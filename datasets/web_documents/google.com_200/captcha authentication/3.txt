<!doctype html>
<!--[if lt IE 7]>  <html class="no-js lt-ie9 lt-ie8 lt-ie7" lang="en-US" prefix="og: http://ogp.me/ns#"> <![endif]-->
<!--[if IE 7]>     <html class="no-js lt-ie9 lt-ie8" lang="en-US" prefix="og: http://ogp.me/ns#"> <![endif]-->
<!--[if IE 8]>     <html class="no-js lt-ie9" lang="en-US" prefix="og: http://ogp.me/ns#"> <![endif]-->
<!--[if gt IE 8]><!-->
<html class="no-js" lang="en-US" prefix="og: http://ogp.me/ns#">
 <head> 
  <meta charset="UTF-8"> 
  <meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1"> 
  <meta name="viewport" content="width=device-width"> 
  <link href="/wp-content/uploads/2016/03/favicon.png" type="image/png" rel="icon"> 
  <link rel="profile" href="http://gmpg.org/xfn/11"> 
  <link rel="pingback" href="https://stormpath.com/xmlrpc.php"> 
  <title>Build a Simple App with Node.js, Express, Passport and Stormpath | Stormpath</title> 
  <meta name="description" content="Build your first application using this Node.js, Express, and Passport Stormpath tutorial. Read more on the Stormpath blog."> 
  <meta name="robots" content="noodp"> 
  <link rel="canonical" href="https://stormpath.com/blog/build-app-nodejs-express-passport-stormpath"> 
  <meta property="og:locale" content="en_US"> 
  <meta property="og:type" content="article"> 
  <meta property="og:title" content="Build a Simple App with Node.js, Express, Passport and Stormpath | Stormpath"> 
  <meta property="og:description" content="Build your first application using this Node.js, Express, and Passport Stormpath tutorial. Read more on the Stormpath blog."> 
  <meta property="og:url" content="https://stormpath.com/blog/build-app-nodejs-express-passport-stormpath"> 
  <meta property="og:site_name" content="Stormpath User Identity API"> 
  <meta property="article:author" content="https://www.facebook.com/rdegges"> 
  <meta property="article:tag" content="Express"> 
  <meta property="article:tag" content="Identity Management"> 
  <meta property="article:tag" content="Stormpath"> 
  <meta property="article:tag" content="Tutorial"> 
  <meta property="article:section" content="Node"> 
  <meta property="article:published_time" content="2014-04-28T00:00:00-07:00"> 
  <meta property="article:modified_time" content="2016-11-01T07:31:32-07:00"> 
  <meta property="og:updated_time" content="2016-11-01T07:31:32-07:00"> 
  <meta property="og:image" content="http://stormpath.com/wp-content/uploads/2016/04/node-stormpath.png"> 
  <meta property="og:image" content="http://stormpath.com/wp-content/uploads/2016/04/node-app-home.png"> 
  <meta property="og:image" content="http://stormpath.com/wp-content/uploads/2016/04/node-app-register.png"> 
  <meta property="og:image" content="http://stormpath.com/wp-content/uploads/2016/04/node-app-dashboard.png"> 
  <meta name="twitter:card" content="summary_large_image"> 
  <meta name="twitter:description" content="Build your first application using this Node.js, Express, and Passport Stormpath tutorial. Read more on the Stormpath blog."> 
  <meta name="twitter:title" content="Build a Simple App with Node.js, Express, Passport and Stormpath | Stormpath"> 
  <meta name="twitter:image" content="http://stormpath.com/wp-content/uploads/2016/04/node-stormpath.png"> 
  <meta name="twitter:creator" content="@rdegges"> 
  <meta property="DC.date.issued" content="2014-04-28T00:00:00-07:00"> 
  <link rel="dns-prefetch" href="//s0.wp.com"> 
  <link rel="dns-prefetch" href="//s.w.org"> 
  <link rel="alternate" type="application/rss+xml" title="Stormpath User Identity API » Feed" href="https://stormpath.com/feed"> 
  <link rel="alternate" type="application/rss+xml" title="Stormpath User Identity API » Comments Feed" href="https://stormpath.com/comments/feed"> 
  <link rel="alternate" type="application/rss+xml" title="Stormpath User Identity API » Build a Simple App with Node.js, Express, Passport and Stormpath Comments Feed" href="https://stormpath.com/blog/build-app-nodejs-express-passport-stormpath/feed"> 
  <script type="text/javascript">
			window._wpemojiSettings = {"baseUrl":"https:\/\/s.w.org\/images\/core\/emoji\/2.3\/72x72\/","ext":".png","svgUrl":"https:\/\/s.w.org\/images\/core\/emoji\/2.3\/svg\/","svgExt":".svg","source":{"concatemoji":"https:\/\/stormpath.com\/wp-includes\/js\/wp-emoji-release.min.js?ver=4.8.2"}};
			!function(a,b,c){function d(a){var b,c,d,e,f=String.fromCharCode;if(!k||!k.fillText)return!1;switch(k.clearRect(0,0,j.width,j.height),k.textBaseline="top",k.font="600 32px Arial",a){case"flag":return k.fillText(f(55356,56826,55356,56819),0,0),b=j.toDataURL(),k.clearRect(0,0,j.width,j.height),k.fillText(f(55356,56826,8203,55356,56819),0,0),c=j.toDataURL(),b!==c&&(k.clearRect(0,0,j.width,j.height),k.fillText(f(55356,57332,56128,56423,56128,56418,56128,56421,56128,56430,56128,56423,56128,56447),0,0),b=j.toDataURL(),k.clearRect(0,0,j.width,j.height),k.fillText(f(55356,57332,8203,56128,56423,8203,56128,56418,8203,56128,56421,8203,56128,56430,8203,56128,56423,8203,56128,56447),0,0),c=j.toDataURL(),b!==c);case"emoji4":return k.fillText(f(55358,56794,8205,9794,65039),0,0),d=j.toDataURL(),k.clearRect(0,0,j.width,j.height),k.fillText(f(55358,56794,8203,9794,65039),0,0),e=j.toDataURL(),d!==e}return!1}function e(a){var c=b.createElement("script");c.src=a,c.defer=c.type="text/javascript",b.getElementsByTagName("head")[0].appendChild(c)}var f,g,h,i,j=b.createElement("canvas"),k=j.getContext&&j.getContext("2d");for(i=Array("flag","emoji4"),c.supports={everything:!0,everythingExceptFlag:!0},h=0;h<i.length;h++)c.supports[i[h]]=d(i[h]),c.supports.everything=c.supports.everything&&c.supports[i[h]],"flag"!==i[h]&&(c.supports.everythingExceptFlag=c.supports.everythingExceptFlag&&c.supports[i[h]]);c.supports.everythingExceptFlag=c.supports.everythingExceptFlag&&!c.supports.flag,c.DOMReady=!1,c.readyCallback=function(){c.DOMReady=!0},c.supports.everything||(g=function(){c.readyCallback()},b.addEventListener?(b.addEventListener("DOMContentLoaded",g,!1),a.addEventListener("load",g,!1)):(a.attachEvent("onload",g),b.attachEvent("onreadystatechange",function(){"complete"===b.readyState&&c.readyCallback()})),f=c.source||{},f.concatemoji?e(f.concatemoji):f.wpemoji&&f.twemoji&&(e(f.twemoji),e(f.wpemoji)))}(window,document,window._wpemojiSettings);
		</script> 
  <style type="text/css">
img.wp-smiley,
img.emoji {
	display: inline !important;
	border: none !important;
	box-shadow: none !important;
	height: 1em !important;
	width: 1em !important;
	margin: 0 .07em !important;
	vertical-align: -0.1em !important;
	background: none !important;
	padding: 0 !important;
}
</style> 
  <link rel="stylesheet" id="crayon-theme-stormpath-css" href="https://stormpath.com/wp-content/uploads/crayon-syntax-highlighter/themes/stormpath/stormpath.css?ver=_2.7.2_beta" type="text/css" media="all"> 
  <link rel="stylesheet" id="crayon-font-monaco-css" href="https://stormpath.com/wp-content/plugins/crayon-syntax-highlighter/fonts/monaco.css?ver=_2.7.2_beta" type="text/css" media="all"> 
  <link rel="stylesheet" id="contact-form-7-css" href="https://stormpath.com/wp-content/plugins/contact-form-7/includes/css/styles.css?ver=4.7" type="text/css" media="all"> 
  <link rel="stylesheet" id="stormpath-style-css" href="https://stormpath.com/wp-content/themes/stormpath/style.css?ver=4.8.2" type="text/css" media="all"> 
  <link rel="stylesheet" id="jetpack_css-css" href="https://stormpath.com/wp-content/plugins/jetpack/css/jetpack.css?ver=4.7.1" type="text/css" media="all"> 
  <script type="text/javascript" src="https://stormpath.com/wp-includes/js/jquery/jquery.js?ver=1.12.4"></script> 
  <script type="text/javascript" src="https://stormpath.com/wp-includes/js/jquery/jquery-migrate.min.js?ver=1.4.1"></script> 
  <script type="text/javascript">
/* <![CDATA[ */
var related_posts_js_options = {"post_heading":"h4"};
/* ]]> */
</script> 
  <script type="text/javascript" src="https://stormpath.com/wp-content/plugins/jetpack/modules/related-posts/related-posts.js?ver=20150408"></script> 
  <link rel="https://api.w.org/" href="https://stormpath.com/wp-json/"> 
  <link rel="EditURI" type="application/rsd+xml" title="RSD" href="https://stormpath.com/xmlrpc.php?rsd"> 
  <link rel="wlwmanifest" type="application/wlwmanifest+xml" href="https://stormpath.com/wp-includes/wlwmanifest.xml"> 
  <link rel="shortlink" href="https://stormpath.com/?p=2611"> 
  <link rel="alternate" type="application/json+oembed" href="https://stormpath.com/wp-json/oembed/1.0/embed?url=https%3A%2F%2Fstormpath.com%2Fblog%2Fbuild-app-nodejs-express-passport-stormpath"> 
  <link rel="alternate" type="text/xml+oembed" href="https://stormpath.com/wp-json/oembed/1.0/embed?url=https%3A%2F%2Fstormpath.com%2Fblog%2Fbuild-app-nodejs-express-passport-stormpath&amp;format=xml"> 
  <script>
!function(f,b,e,v,n,t,s){if(f.fbq)return;n=f.fbq=function(){n.callMethod?
n.callMethod.apply(n,arguments):n.queue.push(arguments)};if(!f._fbq)f._fbq=n;
n.push=n;n.loaded=!0;n.version='2.0';n.queue=[];t=b.createElement(e);t.async=!0;
t.src=v;s=b.getElementsByTagName(e)[0];s.parentNode.insertBefore(t,s)}(window,
document,'script','https://connect.facebook.net/en_US/fbevents.js');

fbq('init', '986262161469311');
fbq('track', "PageView");</script> 
  <noscript>
   &lt;img height="1" width="1" style="display:none" src="https://www.facebook.com/tr?id=986262161469311&amp;amp;ev=PageView&amp;amp;noscript=1"&gt;
  </noscript> 
  <script src="https://cdn.optimizely.com/js/225847041.js"></script> 
  <style type="text/css">.recentcomments a{display:inline !important;padding:0 !important;margin:0 !important;}</style> 
  <meta name="generator" content="Powered by Visual Composer - drag and drop page builder for WordPress."> 
  <!--[if lte IE 9]><link rel="stylesheet" type="text/css" href="https://stormpath.com/wp-content/plugins/js_composer/assets/css/vc_lte_ie9.min.css" media="screen"><![endif]-->
  <!--[if IE  8]><link rel="stylesheet" type="text/css" href="https://stormpath.com/wp-content/plugins/js_composer/assets/css/vc-ie8.min.css" media="screen"><![endif]-->
  <noscript>
   <style type="text/css"> .wpb_animate_when_almost_visible { opacity: 1; }</style>
  </noscript>
 </head> 
 <body id="blog" class="post-template-default single single-post postid-2611 single-format-standard stretched wpb-js-composer js-comp-ver-4.11.2.1 vc_responsive"> 
  <!--[if lt IE 8]>
<p class="chromeframe">You are using an <strong>outdated</strong> browser. Please "browsehappy.com" upgrade your browser or "www.google.com/chromeframe/?redirect=true" activate Google Chrome Frame to improve your experience.</p>
<![endif]--> 
  <div id="wrapper" class="clearfix"> 
   <header class="main-navbar"> 
    <nav class="navbar navbar-default navbar-fixed-top" id="main-nav-menu"> 
     <div class="container main-navbar-container"> 
      <div class="navbar-header-container"> 
       <div class="navbar-header"> 
        <a href="https://stormpath.com" class="standard-logo main-nav-logo" data-dark-logo="http://stormpath.com/wp-content/uploads/2017/08/logos.png"><img src="https://stormpath.com/wp-content/uploads/2017/08/logos.png" alt="Stormpath Logo"></a> 
        <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#main-navbar-collapsable" aria-expanded="false"> <span class="sr-only">Toggle navigation</span> <span class="icon-bar"></span> <span class="icon-bar"></span> <span class="icon-bar"></span> </button> 
       </div> 
      </div> 
      <style>
              .global-msg {
                  color: #bbb;
                  text-align: right;
                  margin-top: 18px;
                  padding: 0px;
              }
          </style> 
      <div class="collapse navbar-collapse" id="main-navbar-collapsable"> 
       <ul id="menu-menu-1" class="nav navbar-nav main-navbar__links">
        <li id="menu-item-5143" class="menu-item menu-item-type-post_type menu-item-object-page current_page_parent menu-item-5143"><a class="main-navbar__link" href="https://stormpath.com/blog">Blog</a></li> 
       </ul> 
       <div class="global-msg visible-lg-block">
        <p>The Stormpath API shut down on August 17, 2017. Thank you to all the developers who have used Stormpath.</p> 
       </div> 
      </div> 
     </div> 
    </nav> 
   </header> 
   <div id="content" class="site-content"> 
    <section id="content"> 
     <div class="content-wrap nopadding"> 
      <div class="blog_header nopadding"> 
       <div class="container blog_header_rule nopadding"> 
        <h1 class="entry-title col-md-8 col-sm-12 col-xs-12 nopadding">Build a Simple App with Node.js, Express, Passport and Stormpath</h1> 
       </div> 
      </div> 
      <div class="container clearfix nopadding"> 
       <main id="blog-content" class="site-main" role="main"> 
        <div class="col-md-8 col-sm-12 col-xs-12 nobottommargin nopadding clearfix"> 
         <article id="post-2611" class="post-2611 post type-post status-publish format-standard hentry category-node tag-express tag-identity-management tag-stormpath tag-tutorial" role="article"> 
          <div class="post-meta"> 
           <div class="author_avatar"> 
            <img alt="" src="https://secure.gravatar.com/avatar/ae15189aa0f55d3b2588db26adcf9a67?s=96&amp;d=mm&amp;r=g" srcset="https://secure.gravatar.com/avatar/ae15189aa0f55d3b2588db26adcf9a67?s=192&amp;d=mm&amp;r=g 2x" class="avatar avatar-96 photo" height="96" width="96"> 
           </div> 
           <p class="author-and-date"> by Randall Degges <span class="dividers">|</span> April 28, 2014 <span class="dividers">|</span> </p> 
           <ul class="post-categories"> 
            <li><a href="https://stormpath.com/blog/category/node" rel="category tag">Node</a></li>
           </ul> 
          </div> 
          <div class="entry-content"> 
           <p><strong>Update 5/11/2016</strong>: Writing Node.js code? Check out our Node Greatest Hits after reading this one:</p> 
           <ul> 
            <li><a href="https://stormpath.com/blog/angular-node-15-minutes">A 15-Minute App Tutorial for AngularJS + Node.js + Stormpath</a>,</li> 
            <li><a href="https://stormpath.com/blog/build-nodejs-express-stormpath-app">Create a Simple Node.js Web App with Express.js, Bootstrap and Stormpath</a></li> 
            <li><a href="https://stormpath.com/blog/everything-you-ever-wanted-to-know-about-node-dot-js-sessions">Everything you ever wanted to know about sessions in Node, but were afraid to ask</a>,</li> 
            <li><a href="https://stormpath.com/blog/choosing-nodejs-authentication-strategy">Choosing Your Node.js Authentication Strategy</a>,</li> 
            <li><a href="https://stormpath.com/blog/making-expressjs-authentication-fun-again">Making Express.js Authentication Fun Again!</a></li> 
           </ul> 
           <p><img class="center-block" title="Node + Stormpath" src="https://stormpath.com/wp-content/uploads/2016/04/node-stormpath.png" alt="Node.js, Express, Passport &amp; Stormpath Tutorial"></p> 
           <p><strong>UPDATE</strong>: Since I wrote this post several months back — I’ve actually built a <em>brand new</em> library called <a href="https://docs.stormpath.com/nodejs/express/latest/">express-stormpath</a> which does everything you can see below — and more! If you’d like to use our new library which is much simpler, you should read <a href="https://stormpath.com/blog/making-expressjs-authentication-fun-again">this blog post</a> about it — otherwise, keep reading!</p> 
           <p>Since the release of our new <a href="https://stormpath.com/blog/finally-manage-users-easily-in-node-dot-js">node.js Stormpath Library</a> I’ve been itching to get my hands dirty and build something.</p> 
           <p>So — let’s build something together ?</p> 
           <p><strong>NOTE</strong>: If you’d like to skip the Stormpath tutorial below and jump straight into the code, I’ve put this app on Github for your viewing pleasure: https://github.com/stormpath/stormpath-passport-express-sample</p> 
           <h2 id="what-were-building">What We’re Building<a href="#what-were-building" class="heading-link"><i class="stp-icons stp-icon-link2"></i></a></h2> 
           <p>I thought a great way to test out the new Stormpath node libraries would be to build a simple website that allows you to do a few things:</p> 
           <ul> 
            <li>Create a new account (register) with email and password.</li> 
            <li>Log into your new account (login) with email and password.</li> 
            <li>Display a dashboard page once you’ve logged in, that is only accessible to&nbsp;users with an account.</li> 
            <li>Redirect unauthenticated users who try to access the dashboard back to the&nbsp;login page.</li> 
            <li>Allow a logged in user to log out of their account (logout).</li> 
           </ul> 
           <p>Pretty simple — but that should at least allow us to play around with the new tooling!</p> 
           <p>In the end, things should look like this:</p> 
           <p><iframe width="751" height="461" src="//www.youtube.com/embed/58wZyVaGR2c" frameborder="0" allowfullscreen></iframe></p> 
           <p><img class="center-block alignnone" title="Node App Home" src="https://stormpath.com/wp-content/uploads/2016/04/node-app-home.png" alt="Node.js App Home Example" width="900" height="554"></p> 
           <p><img class="center-block alignnone" title="Node App Register" src="https://stormpath.com/wp-content/uploads/2016/04/node-app-register.png" alt="Node.js App Register Example" width="900" height="556"></p> 
           <p><img class="center-block alignnone" title="Node App Dashboard" src="https://stormpath.com/wp-content/uploads/2016/04/node-app-dashboard.png" alt="Node.js App Dashboard Example" width="900" height="563"></p> 
           <p>Sound good? I thought so!</p> 
           <h2 id="intro-to-stormpath">Intro to Stormpath<a href="#intro-to-stormpath" class="heading-link"><i class="stp-icons stp-icon-link2"></i></a></h2> 
           <p>If you aren’t already familiar with <a href="https://stormpath.com">Stormpath</a>, it’s an API service that allows you to create, edit, and securely store your application’s user accounts and user account data. Stormpath makes it easy to do stuff like:</p> 
           <ul> 
            <li>User registration and login.</li> 
            <li>Account verification via email.</li> 
            <li>Password reset via email.</li> 
            <li>Social login.</li> 
            <li>And a bunch of other cool stuff you probably don’t like coding!</li> 
           </ul> 
           <p>So — why should you use Stormpath?</p> 
           <p>Well, quite simply, we make building user accounts a lot easier, more secure, and more scalable than what you’re probably used to.</p> 
           <p>Using Stormpath not only allows you to easily build your application out, but it also allows you to scale your site to support millions of users without changing your code, or even needing a database!</p> 
           <p>So, let’s dive in.</p> 
           <p>If you don’t already have a Stormpath account and application, you’ll need to create one now — you can do so here: https://api.stormpath.com/register</p> 
           <p>The rest of this article will assume you have a Stormpath account and API key pair.</p> 
           <h2 id="the-tools">The Tools<a href="#the-tools" class="heading-link"><i class="stp-icons stp-icon-link2"></i></a></h2> 
           <p>For this simple app tutorial, we’ll be using</p> 
           <ul> 
            <li><a href="https://nodejs.org/en/">node.js</a></li> 
            <li><a href="http://expressjs.com/">express.js</a></li> 
            <li><a href="http://passportjs.org/">passport.js</a></li> 
            <li><a href="https://github.com/stormpath/passport-stormpath">passport-stormpath</a></li> 
            <li><a href="https://docs.stormpath.com/nodejs/product-guide/latest/">stormpath-node</a></li> 
           </ul> 
           <p>If you’re not familiar with express, you should check it out! express is an awesome web framework for node.js which makes building full-fledged web applications a lot simpler.</p> 
           <p>One of the most important pieces of express is the middleware layer (powered by <a href="https://github.com/senchalabs/Connect">connect</a>). This middleware allows you to tap into HTTP requests before they reach your view code, allowing you to do cool stuff like authenticate users, among other things.</p> 
           <p>Next up is passport. Passport is a generic library for handling user authentication in node web apps. It allows you to abstract away some of the technical details related to handling web session and authentication. In this Node.js, Passport &amp; Express example, we’ll be using it in combination with the official passport-stormpath backend to log users in and out of our new web app.</p> 
           <p>Lastly, we’ll also be using the official Stormpath node library to register new users (essentially we’ll be sending Stormpath’s API service a POST request when a new user creates an account, this way the user will be stored securely on Stormpath’s servers).</p> 
           <h2 id="getting-started">Getting Started<a href="#getting-started" class="heading-link"><i class="stp-icons stp-icon-link2"></i></a></h2> 
           <p>So, now that we’ve covered what this web app will be doing, what it’ll look like, and what we’ll use to build it: let’s get this going!</p> 
           <p>The first thing you need to do is install <a href="https://nodejs.org/en/">node.js</a> (<em>if you don’t already have it installed</em>).</p> 
           <p>Next, let’s install <a href="http://expressjs.com/">express.js</a> by running:</p> 
           <p></p> 
           <div id="crayon-59cd4daf9b36c876867358" class="crayon-syntax crayon-theme-stormpath crayon-font-monaco crayon-os-pc print-yes notranslate" data-settings=" minimize scroll-mouseover" style=" margin-top: 12px; margin-bottom: 12px; font-size: 12px !important; line-height: 15px !important;"> 
            <div class="crayon-plain-wrap">
             <textarea wrap="soft" class="crayon-plain print-no" data-settings="dblclick" readonly style="-moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4; font-size: 12px !important; line-height: 15px !important;">
$ npm install -g express-generator
</textarea>
            </div> 
            <div class="crayon-main" style=""> 
             <table class="crayon-table"> 
              <tbody>
               <tr class="crayon-row"> 
                <td class="crayon-nums " data-settings="hide"> 
                 <div class="crayon-nums-content" style="font-size: 12px !important; line-height: 15px !important;">
                  <div class="crayon-num" data-line="crayon-59cd4daf9b36c876867358-1">
                   1
                  </div>
                  <div class="crayon-num crayon-striped-num" data-line="crayon-59cd4daf9b36c876867358-2">
                   2
                  </div>
                 </div> </td> 
                <td class="crayon-code">
                 <div class="crayon-pre" style="font-size: 12px !important; line-height: 15px !important; -moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4;">
                  <div class="crayon-line" id="crayon-59cd4daf9b36c876867358-1">
                   <span class="crayon-sy">$</span>
                   <span class="crayon-h"> </span>
                   <span class="crayon-e">npm </span>
                   <span class="crayon-v">install</span>
                   <span class="crayon-h"> </span>
                   <span class="crayon-o">-</span>
                   <span class="crayon-i">g</span>
                   <span class="crayon-h"> </span>
                   <span class="crayon-v">express</span>
                   <span class="crayon-o">-</span>
                   <span class="crayon-i">generator</span>
                  </div>
                  <div class="crayon-line crayon-striped-line" id="crayon-59cd4daf9b36c876867358-2">
                   &nbsp;
                  </div>
                 </div></td> 
               </tr> 
              </tbody>
             </table> 
            </div> 
           </div> 
           <p></p> 
           <p>The <code>express-generator</code> module allows you to easily generate a project skeleton to get started with (<em>yey!</em>).</p> 
           <p>Now that we have express, let’s create our basic project directory:</p> 
           <p></p> 
           <div id="crayon-59cd4daf9b377148753525" class="crayon-syntax crayon-theme-stormpath crayon-font-monaco crayon-os-pc print-yes notranslate" data-settings=" minimize scroll-mouseover" style=" margin-top: 12px; margin-bottom: 12px; font-size: 12px !important; line-height: 15px !important;"> 
            <div class="crayon-plain-wrap">
             <textarea wrap="soft" class="crayon-plain print-no" data-settings="dblclick" readonly style="-moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4; font-size: 12px !important; line-height: 15px !important;">
$ express --css stylus stormpath-express-sample

   create : stormpath-express-sample
   create : stormpath-express-sample/package.json
   create : stormpath-express-sample/app.js
   create : stormpath-express-sample/public
   create : stormpath-express-sample/public/stylesheets
   create : stormpath-express-sample/public/stylesheets/style.styl
   create : stormpath-express-sample/views
   create : stormpath-express-sample/views/index.jade
   create : stormpath-express-sample/views/layout.jade
   create : stormpath-express-sample/views/error.jade
   create : stormpath-express-sample/routes
   create : stormpath-express-sample/routes/index.js
   create : stormpath-express-sample/routes/users.js
   create : stormpath-express-sample/public/javascripts
   create : stormpath-express-sample/public/images
   create : stormpath-express-sample/bin
   create : stormpath-express-sample/bin/www

   install dependencies:
     $ cd stormpath-express-sample &amp;&amp; npm install

   run the app:
     $ DEBUG=stormpath-express-sample:* npm start
</textarea>
            </div> 
            <div class="crayon-main" style=""> 
             <table class="crayon-table"> 
              <tbody>
               <tr class="crayon-row"> 
                <td class="crayon-nums " data-settings="hide"> 
                 <div class="crayon-nums-content" style="font-size: 12px !important; line-height: 15px !important;">
                  <div class="crayon-num" data-line="crayon-59cd4daf9b377148753525-1">
                   1
                  </div>
                  <div class="crayon-num crayon-striped-num" data-line="crayon-59cd4daf9b377148753525-2">
                   2
                  </div>
                  <div class="crayon-num" data-line="crayon-59cd4daf9b377148753525-3">
                   3
                  </div>
                  <div class="crayon-num crayon-striped-num" data-line="crayon-59cd4daf9b377148753525-4">
                   4
                  </div>
                  <div class="crayon-num" data-line="crayon-59cd4daf9b377148753525-5">
                   5
                  </div>
                  <div class="crayon-num crayon-striped-num" data-line="crayon-59cd4daf9b377148753525-6">
                   6
                  </div>
                  <div class="crayon-num" data-line="crayon-59cd4daf9b377148753525-7">
                   7
                  </div>
                  <div class="crayon-num crayon-striped-num" data-line="crayon-59cd4daf9b377148753525-8">
                   8
                  </div>
                  <div class="crayon-num" data-line="crayon-59cd4daf9b377148753525-9">
                   9
                  </div>
                  <div class="crayon-num crayon-striped-num" data-line="crayon-59cd4daf9b377148753525-10">
                   10
                  </div>
                  <div class="crayon-num" data-line="crayon-59cd4daf9b377148753525-11">
                   11
                  </div>
                  <div class="crayon-num crayon-striped-num" data-line="crayon-59cd4daf9b377148753525-12">
                   12
                  </div>
                  <div class="crayon-num" data-line="crayon-59cd4daf9b377148753525-13">
                   13
                  </div>
                  <div class="crayon-num crayon-striped-num" data-line="crayon-59cd4daf9b377148753525-14">
                   14
                  </div>
                  <div class="crayon-num" data-line="crayon-59cd4daf9b377148753525-15">
                   15
                  </div>
                  <div class="crayon-num crayon-striped-num" data-line="crayon-59cd4daf9b377148753525-16">
                   16
                  </div>
                  <div class="crayon-num" data-line="crayon-59cd4daf9b377148753525-17">
                   17
                  </div>
                  <div class="crayon-num crayon-striped-num" data-line="crayon-59cd4daf9b377148753525-18">
                   18
                  </div>
                  <div class="crayon-num" data-line="crayon-59cd4daf9b377148753525-19">
                   19
                  </div>
                  <div class="crayon-num crayon-striped-num" data-line="crayon-59cd4daf9b377148753525-20">
                   20
                  </div>
                  <div class="crayon-num" data-line="crayon-59cd4daf9b377148753525-21">
                   21
                  </div>
                  <div class="crayon-num crayon-striped-num" data-line="crayon-59cd4daf9b377148753525-22">
                   22
                  </div>
                  <div class="crayon-num" data-line="crayon-59cd4daf9b377148753525-23">
                   23
                  </div>
                  <div class="crayon-num crayon-striped-num" data-line="crayon-59cd4daf9b377148753525-24">
                   24
                  </div>
                  <div class="crayon-num" data-line="crayon-59cd4daf9b377148753525-25">
                   25
                  </div>
                  <div class="crayon-num crayon-striped-num" data-line="crayon-59cd4daf9b377148753525-26">
                   26
                  </div>
                 </div> </td> 
                <td class="crayon-code">
                 <div class="crayon-pre" style="font-size: 12px !important; line-height: 15px !important; -moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4;">
                  <div class="crayon-line" id="crayon-59cd4daf9b377148753525-1">
                   <span class="crayon-sy">$</span>
                   <span class="crayon-h"> </span>
                   <span class="crayon-v">express</span>
                   <span class="crayon-h"> </span>
                   <span class="crayon-o">--</span>
                   <span class="crayon-e">css </span>
                   <span class="crayon-e">stylus </span>
                   <span class="crayon-v">stormpath</span>
                   <span class="crayon-o">-</span>
                   <span class="crayon-v">express</span>
                   <span class="crayon-o">-</span>
                   <span class="crayon-e">sample</span>
                  </div>
                  <div class="crayon-line crayon-striped-line" id="crayon-59cd4daf9b377148753525-2">
                   &nbsp;
                  </div>
                  <div class="crayon-line" id="crayon-59cd4daf9b377148753525-3">
                   <span class="crayon-e">&nbsp;&nbsp; </span>
                   <span class="crayon-v">create</span>
                   <span class="crayon-h"> </span>
                   <span class="crayon-o">:</span>
                   <span class="crayon-h"> </span>
                   <span class="crayon-v">stormpath</span>
                   <span class="crayon-o">-</span>
                   <span class="crayon-v">express</span>
                   <span class="crayon-o">-</span>
                   <span class="crayon-e">sample</span>
                  </div>
                  <div class="crayon-line crayon-striped-line" id="crayon-59cd4daf9b377148753525-4">
                   <span class="crayon-e">&nbsp;&nbsp; </span>
                   <span class="crayon-v">create</span>
                   <span class="crayon-h"> </span>
                   <span class="crayon-o">:</span>
                   <span class="crayon-h"> </span>
                   <span class="crayon-v">stormpath</span>
                   <span class="crayon-o">-</span>
                   <span class="crayon-v">express</span>
                   <span class="crayon-o">-</span>
                   <span class="crayon-v">sample</span>
                   <span class="crayon-o">/</span>
                   <span class="crayon-t">package</span>
                   <span class="crayon-sy">.</span>
                   <span class="crayon-e">json</span>
                  </div>
                  <div class="crayon-line" id="crayon-59cd4daf9b377148753525-5">
                   <span class="crayon-e">&nbsp;&nbsp; </span>
                   <span class="crayon-v">create</span>
                   <span class="crayon-h"> </span>
                   <span class="crayon-o">:</span>
                   <span class="crayon-h"> </span>
                   <span class="crayon-v">stormpath</span>
                   <span class="crayon-o">-</span>
                   <span class="crayon-v">express</span>
                   <span class="crayon-o">-</span>
                   <span class="crayon-v">sample</span>
                   <span class="crayon-o">/</span>
                   <span class="crayon-v">app</span>
                   <span class="crayon-sy">.</span>
                   <span class="crayon-e">js</span>
                  </div>
                  <div class="crayon-line crayon-striped-line" id="crayon-59cd4daf9b377148753525-6">
                   <span class="crayon-e">&nbsp;&nbsp; </span>
                   <span class="crayon-v">create</span>
                   <span class="crayon-h"> </span>
                   <span class="crayon-o">:</span>
                   <span class="crayon-h"> </span>
                   <span class="crayon-v">stormpath</span>
                   <span class="crayon-o">-</span>
                   <span class="crayon-v">express</span>
                   <span class="crayon-o">-</span>
                   <span class="crayon-v">sample</span>
                   <span class="crayon-o">/</span>
                   <span class="crayon-m">public</span>
                  </div>
                  <div class="crayon-line" id="crayon-59cd4daf9b377148753525-7">
                   <span class="crayon-h">&nbsp;&nbsp; </span>
                   <span class="crayon-v">create</span>
                   <span class="crayon-h"> </span>
                   <span class="crayon-o">:</span>
                   <span class="crayon-h"> </span>
                   <span class="crayon-v">stormpath</span>
                   <span class="crayon-o">-</span>
                   <span class="crayon-v">express</span>
                   <span class="crayon-o">-</span>
                   <span class="crayon-v">sample</span>
                   <span class="crayon-o">/</span>
                   <span class="crayon-m">public</span>
                   <span class="crayon-o">/</span>
                   <span class="crayon-e">stylesheets</span>
                  </div>
                  <div class="crayon-line crayon-striped-line" id="crayon-59cd4daf9b377148753525-8">
                   <span class="crayon-e">&nbsp;&nbsp; </span>
                   <span class="crayon-v">create</span>
                   <span class="crayon-h"> </span>
                   <span class="crayon-o">:</span>
                   <span class="crayon-h"> </span>
                   <span class="crayon-v">stormpath</span>
                   <span class="crayon-o">-</span>
                   <span class="crayon-v">express</span>
                   <span class="crayon-o">-</span>
                   <span class="crayon-v">sample</span>
                   <span class="crayon-o">/</span>
                   <span class="crayon-m">public</span>
                   <span class="crayon-o">/</span>
                   <span class="crayon-v">stylesheets</span>
                   <span class="crayon-o">/</span>
                   <span class="crayon-v">style</span>
                   <span class="crayon-sy">.</span>
                   <span class="crayon-e">styl</span>
                  </div>
                  <div class="crayon-line" id="crayon-59cd4daf9b377148753525-9">
                   <span class="crayon-e">&nbsp;&nbsp; </span>
                   <span class="crayon-v">create</span>
                   <span class="crayon-h"> </span>
                   <span class="crayon-o">:</span>
                   <span class="crayon-h"> </span>
                   <span class="crayon-v">stormpath</span>
                   <span class="crayon-o">-</span>
                   <span class="crayon-v">express</span>
                   <span class="crayon-o">-</span>
                   <span class="crayon-v">sample</span>
                   <span class="crayon-o">/</span>
                   <span class="crayon-e">views</span>
                  </div>
                  <div class="crayon-line crayon-striped-line" id="crayon-59cd4daf9b377148753525-10">
                   <span class="crayon-e">&nbsp;&nbsp; </span>
                   <span class="crayon-v">create</span>
                   <span class="crayon-h"> </span>
                   <span class="crayon-o">:</span>
                   <span class="crayon-h"> </span>
                   <span class="crayon-v">stormpath</span>
                   <span class="crayon-o">-</span>
                   <span class="crayon-v">express</span>
                   <span class="crayon-o">-</span>
                   <span class="crayon-v">sample</span>
                   <span class="crayon-o">/</span>
                   <span class="crayon-v">views</span>
                   <span class="crayon-o">/</span>
                   <span class="crayon-v">index</span>
                   <span class="crayon-sy">.</span>
                   <span class="crayon-e">jade</span>
                  </div>
                  <div class="crayon-line" id="crayon-59cd4daf9b377148753525-11">
                   <span class="crayon-e">&nbsp;&nbsp; </span>
                   <span class="crayon-v">create</span>
                   <span class="crayon-h"> </span>
                   <span class="crayon-o">:</span>
                   <span class="crayon-h"> </span>
                   <span class="crayon-v">stormpath</span>
                   <span class="crayon-o">-</span>
                   <span class="crayon-v">express</span>
                   <span class="crayon-o">-</span>
                   <span class="crayon-v">sample</span>
                   <span class="crayon-o">/</span>
                   <span class="crayon-v">views</span>
                   <span class="crayon-o">/</span>
                   <span class="crayon-v">layout</span>
                   <span class="crayon-sy">.</span>
                   <span class="crayon-e">jade</span>
                  </div>
                  <div class="crayon-line crayon-striped-line" id="crayon-59cd4daf9b377148753525-12">
                   <span class="crayon-e">&nbsp;&nbsp; </span>
                   <span class="crayon-v">create</span>
                   <span class="crayon-h"> </span>
                   <span class="crayon-o">:</span>
                   <span class="crayon-h"> </span>
                   <span class="crayon-v">stormpath</span>
                   <span class="crayon-o">-</span>
                   <span class="crayon-v">express</span>
                   <span class="crayon-o">-</span>
                   <span class="crayon-v">sample</span>
                   <span class="crayon-o">/</span>
                   <span class="crayon-v">views</span>
                   <span class="crayon-o">/</span>
                   <span class="crayon-v">error</span>
                   <span class="crayon-sy">.</span>
                   <span class="crayon-e">jade</span>
                  </div>
                  <div class="crayon-line" id="crayon-59cd4daf9b377148753525-13">
                   <span class="crayon-e">&nbsp;&nbsp; </span>
                   <span class="crayon-v">create</span>
                   <span class="crayon-h"> </span>
                   <span class="crayon-o">:</span>
                   <span class="crayon-h"> </span>
                   <span class="crayon-v">stormpath</span>
                   <span class="crayon-o">-</span>
                   <span class="crayon-v">express</span>
                   <span class="crayon-o">-</span>
                   <span class="crayon-v">sample</span>
                   <span class="crayon-o">/</span>
                   <span class="crayon-e">routes</span>
                  </div>
                  <div class="crayon-line crayon-striped-line" id="crayon-59cd4daf9b377148753525-14">
                   <span class="crayon-e">&nbsp;&nbsp; </span>
                   <span class="crayon-v">create</span>
                   <span class="crayon-h"> </span>
                   <span class="crayon-o">:</span>
                   <span class="crayon-h"> </span>
                   <span class="crayon-v">stormpath</span>
                   <span class="crayon-o">-</span>
                   <span class="crayon-v">express</span>
                   <span class="crayon-o">-</span>
                   <span class="crayon-v">sample</span>
                   <span class="crayon-o">/</span>
                   <span class="crayon-v">routes</span>
                   <span class="crayon-o">/</span>
                   <span class="crayon-v">index</span>
                   <span class="crayon-sy">.</span>
                   <span class="crayon-e">js</span>
                  </div>
                  <div class="crayon-line" id="crayon-59cd4daf9b377148753525-15">
                   <span class="crayon-e">&nbsp;&nbsp; </span>
                   <span class="crayon-v">create</span>
                   <span class="crayon-h"> </span>
                   <span class="crayon-o">:</span>
                   <span class="crayon-h"> </span>
                   <span class="crayon-v">stormpath</span>
                   <span class="crayon-o">-</span>
                   <span class="crayon-v">express</span>
                   <span class="crayon-o">-</span>
                   <span class="crayon-v">sample</span>
                   <span class="crayon-o">/</span>
                   <span class="crayon-v">routes</span>
                   <span class="crayon-o">/</span>
                   <span class="crayon-v">users</span>
                   <span class="crayon-sy">.</span>
                   <span class="crayon-e">js</span>
                  </div>
                  <div class="crayon-line crayon-striped-line" id="crayon-59cd4daf9b377148753525-16">
                   <span class="crayon-e">&nbsp;&nbsp; </span>
                   <span class="crayon-v">create</span>
                   <span class="crayon-h"> </span>
                   <span class="crayon-o">:</span>
                   <span class="crayon-h"> </span>
                   <span class="crayon-v">stormpath</span>
                   <span class="crayon-o">-</span>
                   <span class="crayon-v">express</span>
                   <span class="crayon-o">-</span>
                   <span class="crayon-v">sample</span>
                   <span class="crayon-o">/</span>
                   <span class="crayon-m">public</span>
                   <span class="crayon-o">/</span>
                   <span class="crayon-e">javascripts</span>
                  </div>
                  <div class="crayon-line" id="crayon-59cd4daf9b377148753525-17">
                   <span class="crayon-e">&nbsp;&nbsp; </span>
                   <span class="crayon-v">create</span>
                   <span class="crayon-h"> </span>
                   <span class="crayon-o">:</span>
                   <span class="crayon-h"> </span>
                   <span class="crayon-v">stormpath</span>
                   <span class="crayon-o">-</span>
                   <span class="crayon-v">express</span>
                   <span class="crayon-o">-</span>
                   <span class="crayon-v">sample</span>
                   <span class="crayon-o">/</span>
                   <span class="crayon-m">public</span>
                   <span class="crayon-o">/</span>
                   <span class="crayon-e">images</span>
                  </div>
                  <div class="crayon-line crayon-striped-line" id="crayon-59cd4daf9b377148753525-18">
                   <span class="crayon-e">&nbsp;&nbsp; </span>
                   <span class="crayon-v">create</span>
                   <span class="crayon-h"> </span>
                   <span class="crayon-o">:</span>
                   <span class="crayon-h"> </span>
                   <span class="crayon-v">stormpath</span>
                   <span class="crayon-o">-</span>
                   <span class="crayon-v">express</span>
                   <span class="crayon-o">-</span>
                   <span class="crayon-v">sample</span>
                   <span class="crayon-o">/</span>
                   <span class="crayon-e">bin</span>
                  </div>
                  <div class="crayon-line" id="crayon-59cd4daf9b377148753525-19">
                   <span class="crayon-e">&nbsp;&nbsp; </span>
                   <span class="crayon-v">create</span>
                   <span class="crayon-h"> </span>
                   <span class="crayon-o">:</span>
                   <span class="crayon-h"> </span>
                   <span class="crayon-v">stormpath</span>
                   <span class="crayon-o">-</span>
                   <span class="crayon-v">express</span>
                   <span class="crayon-o">-</span>
                   <span class="crayon-v">sample</span>
                   <span class="crayon-o">/</span>
                   <span class="crayon-v">bin</span>
                   <span class="crayon-o">/</span>
                   <span class="crayon-e">www</span>
                  </div>
                  <div class="crayon-line crayon-striped-line" id="crayon-59cd4daf9b377148753525-20">
                   &nbsp;
                  </div>
                  <div class="crayon-line" id="crayon-59cd4daf9b377148753525-21">
                   <span class="crayon-e">&nbsp;&nbsp; </span>
                   <span class="crayon-e">install </span>
                   <span class="crayon-v">dependencies</span>
                   <span class="crayon-o">:</span>
                  </div>
                  <div class="crayon-line crayon-striped-line" id="crayon-59cd4daf9b377148753525-22">
                   <span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp; </span>
                   <span class="crayon-sy">$</span>
                   <span class="crayon-h"> </span>
                   <span class="crayon-e">cd </span>
                   <span class="crayon-v">stormpath</span>
                   <span class="crayon-o">-</span>
                   <span class="crayon-v">express</span>
                   <span class="crayon-o">-</span>
                   <span class="crayon-v">sample</span>
                   <span class="crayon-h"> </span>
                   <span class="crayon-o">&amp;&amp;</span>
                   <span class="crayon-h"> </span>
                   <span class="crayon-e">npm </span>
                   <span class="crayon-e">install</span>
                  </div>
                  <div class="crayon-line" id="crayon-59cd4daf9b377148753525-23">
                   &nbsp;
                  </div>
                  <div class="crayon-line crayon-striped-line" id="crayon-59cd4daf9b377148753525-24">
                   <span class="crayon-e">&nbsp;&nbsp; </span>
                   <span class="crayon-e">run </span>
                   <span class="crayon-e">the </span>
                   <span class="crayon-v">app</span>
                   <span class="crayon-o">:</span>
                  </div>
                  <div class="crayon-line" id="crayon-59cd4daf9b377148753525-25">
                   <span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp; </span>
                   <span class="crayon-sy">$</span>
                   <span class="crayon-h"> </span>
                   <span class="crayon-v">DEBUG</span>
                   <span class="crayon-o">=</span>
                   <span class="crayon-v">stormpath</span>
                   <span class="crayon-o">-</span>
                   <span class="crayon-v">express</span>
                   <span class="crayon-o">-</span>
                   <span class="crayon-v">sample</span>
                   <span class="crayon-o">:</span>
                   <span class="crayon-o">*</span>
                   <span class="crayon-h"> </span>
                   <span class="crayon-e">npm </span>
                   <span class="crayon-i">start</span>
                  </div>
                  <div class="crayon-line crayon-striped-line" id="crayon-59cd4daf9b377148753525-26">
                   &nbsp;
                  </div>
                 </div></td> 
               </tr> 
              </tbody>
             </table> 
            </div> 
           </div> 
           <p></p> 
           <p>Then, of course, you’ll want to go into your project directory and install all of the basic dependencies:</p> 
           <p></p> 
           <div id="crayon-59cd4daf9b37c186579472" class="crayon-syntax crayon-theme-stormpath crayon-font-monaco crayon-os-pc print-yes notranslate" data-settings=" minimize scroll-mouseover" style=" margin-top: 12px; margin-bottom: 12px; font-size: 12px !important; line-height: 15px !important;"> 
            <div class="crayon-plain-wrap">
             <textarea wrap="soft" class="crayon-plain print-no" data-settings="dblclick" readonly style="-moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4; font-size: 12px !important; line-height: 15px !important;">
$ cd stormpath-express-sample
$ npm install
</textarea>
            </div> 
            <div class="crayon-main" style=""> 
             <table class="crayon-table"> 
              <tbody>
               <tr class="crayon-row"> 
                <td class="crayon-nums " data-settings="hide"> 
                 <div class="crayon-nums-content" style="font-size: 12px !important; line-height: 15px !important;">
                  <div class="crayon-num" data-line="crayon-59cd4daf9b37c186579472-1">
                   1
                  </div>
                  <div class="crayon-num crayon-striped-num" data-line="crayon-59cd4daf9b37c186579472-2">
                   2
                  </div>
                  <div class="crayon-num" data-line="crayon-59cd4daf9b37c186579472-3">
                   3
                  </div>
                 </div> </td> 
                <td class="crayon-code">
                 <div class="crayon-pre" style="font-size: 12px !important; line-height: 15px !important; -moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4;">
                  <div class="crayon-line" id="crayon-59cd4daf9b37c186579472-1">
                   <span class="crayon-sy">$</span>
                   <span class="crayon-h"> </span>
                   <span class="crayon-e">cd </span>
                   <span class="crayon-v">stormpath</span>
                   <span class="crayon-o">-</span>
                   <span class="crayon-v">express</span>
                   <span class="crayon-o">-</span>
                   <span class="crayon-i">sample</span>
                  </div>
                  <div class="crayon-line crayon-striped-line" id="crayon-59cd4daf9b37c186579472-2">
                   <span class="crayon-sy">$</span>
                   <span class="crayon-h"> </span>
                   <span class="crayon-e">npm </span>
                   <span class="crayon-i">install</span>
                  </div>
                  <div class="crayon-line" id="crayon-59cd4daf9b37c186579472-3">
                   &nbsp;
                  </div>
                 </div></td> 
               </tr> 
              </tbody>
             </table> 
            </div> 
           </div> 
           <p></p> 
           <p>And that’s it for the basic configuration!</p> 
           <h2 id="install-required-modules">Install Required Modules<a href="#install-required-modules" class="heading-link"><i class="stp-icons stp-icon-link2"></i></a></h2> 
           <p>The next thing we’ll want to do is install all of the required modules we’re going to be using.</p> 
           <p>You can install them all by running the following command:</p> 
           <p></p> 
           <div id="crayon-59cd4daf9b37f262280776" class="crayon-syntax crayon-theme-stormpath crayon-font-monaco crayon-os-pc print-yes notranslate" data-settings=" minimize scroll-mouseover" style=" margin-top: 12px; margin-bottom: 12px; font-size: 12px !important; line-height: 15px !important;"> 
            <div class="crayon-plain-wrap">
             <textarea wrap="soft" class="crayon-plain print-no" data-settings="dblclick" readonly style="-moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4; font-size: 12px !important; line-height: 15px !important;">
$ npm install passport passport-stormpath express-session connect-flash stormpath static-favicon --save
</textarea>
            </div> 
            <div class="crayon-main" style=""> 
             <table class="crayon-table"> 
              <tbody>
               <tr class="crayon-row"> 
                <td class="crayon-nums " data-settings="hide"> 
                 <div class="crayon-nums-content" style="font-size: 12px !important; line-height: 15px !important;">
                  <div class="crayon-num" data-line="crayon-59cd4daf9b37f262280776-1">
                   1
                  </div>
                  <div class="crayon-num crayon-striped-num" data-line="crayon-59cd4daf9b37f262280776-2">
                   2
                  </div>
                 </div> </td> 
                <td class="crayon-code">
                 <div class="crayon-pre" style="font-size: 12px !important; line-height: 15px !important; -moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4;">
                  <div class="crayon-line" id="crayon-59cd4daf9b37f262280776-1">
                   <span class="crayon-sy">$</span>
                   <span class="crayon-h"> </span>
                   <span class="crayon-e">npm </span>
                   <span class="crayon-e">install </span>
                   <span class="crayon-e">passport </span>
                   <span class="crayon-v">passport</span>
                   <span class="crayon-o">-</span>
                   <span class="crayon-e">stormpath </span>
                   <span class="crayon-v">express</span>
                   <span class="crayon-o">-</span>
                   <span class="crayon-e">session </span>
                   <span class="crayon-v">connect</span>
                   <span class="crayon-o">-</span>
                   <span class="crayon-e">flash </span>
                   <span class="crayon-e">stormpath </span>
                   <span class="crayon-m">static</span>
                   <span class="crayon-o">-</span>
                   <span class="crayon-v">favicon</span>
                   <span class="crayon-h"> </span>
                   <span class="crayon-o">--</span>
                   <span class="crayon-i">save</span>
                  </div>
                  <div class="crayon-line crayon-striped-line" id="crayon-59cd4daf9b37f262280776-2">
                   &nbsp;
                  </div>
                 </div></td> 
               </tr> 
              </tbody>
             </table> 
            </div> 
           </div> 
           <p></p> 
           <p>This command will install:</p> 
           <ul> 
            <li><a href="http://passportjs.org/">passport.js</a>: the authentication framework.</li> 
            <li><a href="https://github.com/stormpath/passport-stormpath">passport-stormpath</a>: the&nbsp;official Stormpath backend for passport.js.</li> 
            <li><a href="https://github.com/expressjs/session">express-session</a>: a session management&nbsp;tool.</li> 
            <li><a href="https://github.com/jaredhanson/connect-flash">connect-flash</a>: a simple flash&nbsp;library which works with the express.js framework.</li> 
            <li><a href="https://github.com/stormpath/stormpath-sdk-node">stormpath</a>: the official&nbsp;Stormpath node library.</li> 
           </ul> 
           <p><strong>NOTE</strong>: The <code>--save</code> flag instructs node to install the packages, and then add them as dependencies to your project’s <code>package.json</code> file. This way, if you want to bootstrap this project at a later time, you can do so easily by just running <code>npm install</code>.</p> 
           <h2 id="set-environment-variables">Set Environment Variables<a href="#set-environment-variables" class="heading-link"><i class="stp-icons stp-icon-link2"></i></a></h2> 
           <p>Now that we’ve installed all the required modules, let’s configure our environment variables.</p> 
           <p>We’re going to be using environment variables to tell our web app what credentials / secrets to use when running our app.</p> 
           <p>You’ll want to create a <code>.env</code> file in the root of your project with the following contents:</p> 
           <p></p> 
           <div id="crayon-59cd4daf9b382799060964" class="crayon-syntax crayon-theme-stormpath crayon-font-monaco crayon-os-pc print-yes notranslate" data-settings=" minimize scroll-mouseover" style=" margin-top: 12px; margin-bottom: 12px; font-size: 12px !important; line-height: 15px !important;"> 
            <div class="crayon-plain-wrap">
             <textarea wrap="soft" class="crayon-plain print-no" data-settings="dblclick" readonly style="-moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4; font-size: 12px !important; line-height: 15px !important;">
export STORMPATH_API_KEY_ID=xxx
export STORMPATH_API_KEY_SECRET=xxx
export STORMPATH_APP_HREF=xxx
export EXPRESS_SECRET=some_random_string
</textarea>
            </div> 
            <div class="crayon-main" style=""> 
             <table class="crayon-table"> 
              <tbody>
               <tr class="crayon-row"> 
                <td class="crayon-nums " data-settings="hide"> 
                 <div class="crayon-nums-content" style="font-size: 12px !important; line-height: 15px !important;">
                  <div class="crayon-num" data-line="crayon-59cd4daf9b382799060964-1">
                   1
                  </div>
                  <div class="crayon-num crayon-striped-num" data-line="crayon-59cd4daf9b382799060964-2">
                   2
                  </div>
                  <div class="crayon-num" data-line="crayon-59cd4daf9b382799060964-3">
                   3
                  </div>
                  <div class="crayon-num crayon-striped-num" data-line="crayon-59cd4daf9b382799060964-4">
                   4
                  </div>
                  <div class="crayon-num" data-line="crayon-59cd4daf9b382799060964-5">
                   5
                  </div>
                 </div> </td> 
                <td class="crayon-code">
                 <div class="crayon-pre" style="font-size: 12px !important; line-height: 15px !important; -moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4;">
                  <div class="crayon-line" id="crayon-59cd4daf9b382799060964-1">
                   <span class="crayon-e">export </span>
                   <span class="crayon-v">STORMPATH_API_KEY_ID</span>
                   <span class="crayon-o">=</span>
                   <span class="crayon-e">xxx</span>
                  </div>
                  <div class="crayon-line crayon-striped-line" id="crayon-59cd4daf9b382799060964-2">
                   <span class="crayon-e">export </span>
                   <span class="crayon-v">STORMPATH_API_KEY_SECRET</span>
                   <span class="crayon-o">=</span>
                   <span class="crayon-e">xxx</span>
                  </div>
                  <div class="crayon-line" id="crayon-59cd4daf9b382799060964-3">
                   <span class="crayon-e">export </span>
                   <span class="crayon-v">STORMPATH_APP_HREF</span>
                   <span class="crayon-o">=</span>
                   <span class="crayon-e">xxx</span>
                  </div>
                  <div class="crayon-line crayon-striped-line" id="crayon-59cd4daf9b382799060964-4">
                   <span class="crayon-e">export </span>
                   <span class="crayon-v">EXPRESS_SECRET</span>
                   <span class="crayon-o">=</span>
                   <span class="crayon-v">some_random</span>
                   <span class="crayon-sy">_</span>string
                  </div>
                  <div class="crayon-line" id="crayon-59cd4daf9b382799060964-5">
                   &nbsp;
                  </div>
                 </div></td> 
               </tr> 
              </tbody>
             </table> 
            </div> 
           </div> 
           <p></p> 
           <p>Obviously, you’ll need to replace these values with the appropriate values! The Stormpath settings (<code>API_KEY_ID</code>, <code>API_KEY_SECRET</code>, and <code>APP_HREF</code>) will be used to tell the app how to communicate with Stormpath. The <code>EXPRESS_SECRET</code> variable is used to make session management secure (<em>this should be a long string of random characters</em>).</p> 
           <p>If you haven’t already created a Stormpath application, you’ll want to go into the <a href="https://api.stormpath.com/ui2/index.html#/applications">Stormpath admin console</a> and create a new Application called <code>stormpath-express-sample</code>. Once you’ve created this application, you should see an Application REST URL in the web interface — use this URL as the value for your <code>STORMPATH_APP_HREF</code> environment variable.</p> 
           <p>Once you’ve got the environment variables defined in your <code>.env</code> file, all you need to do is use them:</p> 
           <p></p> 
           <div id="crayon-59cd4daf9b386980204818" class="crayon-syntax crayon-theme-stormpath crayon-font-monaco crayon-os-pc print-yes notranslate" data-settings=" minimize scroll-mouseover" style=" margin-top: 12px; margin-bottom: 12px; font-size: 12px !important; line-height: 15px !important;"> 
            <div class="crayon-plain-wrap">
             <textarea wrap="soft" class="crayon-plain print-no" data-settings="dblclick" readonly style="-moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4; font-size: 12px !important; line-height: 15px !important;">
$ source .env
</textarea>
            </div> 
            <div class="crayon-main" style=""> 
             <table class="crayon-table"> 
              <tbody>
               <tr class="crayon-row"> 
                <td class="crayon-nums " data-settings="hide"> 
                 <div class="crayon-nums-content" style="font-size: 12px !important; line-height: 15px !important;">
                  <div class="crayon-num" data-line="crayon-59cd4daf9b386980204818-1">
                   1
                  </div>
                  <div class="crayon-num crayon-striped-num" data-line="crayon-59cd4daf9b386980204818-2">
                   2
                  </div>
                 </div> </td> 
                <td class="crayon-code">
                 <div class="crayon-pre" style="font-size: 12px !important; line-height: 15px !important; -moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4;">
                  <div class="crayon-line" id="crayon-59cd4daf9b386980204818-1">
                   <span class="crayon-sy">$</span>
                   <span class="crayon-h"> </span>
                   <span class="crayon-i">source</span>
                   <span class="crayon-h"> </span>
                   <span class="crayon-sy">.</span>
                   <span class="crayon-i">env</span>
                  </div>
                  <div class="crayon-line crayon-striped-line" id="crayon-59cd4daf9b386980204818-2">
                   &nbsp;
                  </div>
                 </div></td> 
               </tr> 
              </tbody>
             </table> 
            </div> 
           </div> 
           <p></p> 
           <p>The <code>source</code> command will run the <code>.env</code> file, setting the environment variables in your current terminal session.</p> 
           <h2 id="configure-middleware">Configure Middleware<a href="#configure-middleware" class="heading-link"><i class="stp-icons stp-icon-link2"></i></a></h2> 
           <p>The next thing we need to do is open up the <code>app.js</code> file and import our dependencies. You’ll want to make the top of your <code>app.js</code> file look like the below:</p> 
           <p></p> 
           <div id="crayon-59cd4daf9b389225417296" class="crayon-syntax crayon-theme-stormpath crayon-font-monaco crayon-os-pc print-yes notranslate" data-settings=" minimize scroll-mouseover" style=" margin-top: 12px; margin-bottom: 12px; font-size: 12px !important; line-height: 15px !important;"> 
            <div class="crayon-plain-wrap">
             <textarea wrap="soft" class="crayon-plain print-no" data-settings="dblclick" readonly style="-moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4; font-size: 12px !important; line-height: 15px !important;">
var express = require('express');
var path = require('path');
var favicon = require('static-favicon');
var logger = require('morgan');
var cookieParser = require('cookie-parser');
var bodyParser = require('body-parser');

// These are the new imports we're adding:
var passport = require('passport');
var StormpathStrategy = require('passport-stormpath');
var session = require('express-session');
var flash = require('connect-flash');
</textarea>
            </div> 
            <div class="crayon-main" style=""> 
             <table class="crayon-table"> 
              <tbody>
               <tr class="crayon-row"> 
                <td class="crayon-nums " data-settings="hide"> 
                 <div class="crayon-nums-content" style="font-size: 12px !important; line-height: 15px !important;">
                  <div class="crayon-num" data-line="crayon-59cd4daf9b389225417296-1">
                   1
                  </div>
                  <div class="crayon-num crayon-striped-num" data-line="crayon-59cd4daf9b389225417296-2">
                   2
                  </div>
                  <div class="crayon-num" data-line="crayon-59cd4daf9b389225417296-3">
                   3
                  </div>
                  <div class="crayon-num crayon-striped-num" data-line="crayon-59cd4daf9b389225417296-4">
                   4
                  </div>
                  <div class="crayon-num" data-line="crayon-59cd4daf9b389225417296-5">
                   5
                  </div>
                  <div class="crayon-num crayon-striped-num" data-line="crayon-59cd4daf9b389225417296-6">
                   6
                  </div>
                  <div class="crayon-num" data-line="crayon-59cd4daf9b389225417296-7">
                   7
                  </div>
                  <div class="crayon-num crayon-striped-num" data-line="crayon-59cd4daf9b389225417296-8">
                   8
                  </div>
                  <div class="crayon-num" data-line="crayon-59cd4daf9b389225417296-9">
                   9
                  </div>
                  <div class="crayon-num crayon-striped-num" data-line="crayon-59cd4daf9b389225417296-10">
                   10
                  </div>
                  <div class="crayon-num" data-line="crayon-59cd4daf9b389225417296-11">
                   11
                  </div>
                  <div class="crayon-num crayon-striped-num" data-line="crayon-59cd4daf9b389225417296-12">
                   12
                  </div>
                  <div class="crayon-num" data-line="crayon-59cd4daf9b389225417296-13">
                   13
                  </div>
                 </div> </td> 
                <td class="crayon-code">
                 <div class="crayon-pre" style="font-size: 12px !important; line-height: 15px !important; -moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4;">
                  <div class="crayon-line" id="crayon-59cd4daf9b389225417296-1">
                   <span class="crayon-t">var</span>
                   <span class="crayon-h"> </span>
                   <span class="crayon-v">express</span>
                   <span class="crayon-h"> </span>
                   <span class="crayon-o">=</span>
                   <span class="crayon-h"> </span>
                   <span class="crayon-e">require</span>
                   <span class="crayon-sy">(</span>
                   <span class="crayon-s">'express'</span>
                   <span class="crayon-sy">)</span>
                   <span class="crayon-sy">;</span>
                  </div>
                  <div class="crayon-line crayon-striped-line" id="crayon-59cd4daf9b389225417296-2">
                   <span class="crayon-t">var</span>
                   <span class="crayon-h"> </span>
                   <span class="crayon-v">path</span>
                   <span class="crayon-h"> </span>
                   <span class="crayon-o">=</span>
                   <span class="crayon-h"> </span>
                   <span class="crayon-e">require</span>
                   <span class="crayon-sy">(</span>
                   <span class="crayon-s">'path'</span>
                   <span class="crayon-sy">)</span>
                   <span class="crayon-sy">;</span>
                  </div>
                  <div class="crayon-line" id="crayon-59cd4daf9b389225417296-3">
                   <span class="crayon-t">var</span>
                   <span class="crayon-h"> </span>
                   <span class="crayon-v">favicon</span>
                   <span class="crayon-h"> </span>
                   <span class="crayon-o">=</span>
                   <span class="crayon-h"> </span>
                   <span class="crayon-e">require</span>
                   <span class="crayon-sy">(</span>
                   <span class="crayon-s">'static-favicon'</span>
                   <span class="crayon-sy">)</span>
                   <span class="crayon-sy">;</span>
                  </div>
                  <div class="crayon-line crayon-striped-line" id="crayon-59cd4daf9b389225417296-4">
                   <span class="crayon-t">var</span>
                   <span class="crayon-h"> </span>
                   <span class="crayon-v">logger</span>
                   <span class="crayon-h"> </span>
                   <span class="crayon-o">=</span>
                   <span class="crayon-h"> </span>
                   <span class="crayon-e">require</span>
                   <span class="crayon-sy">(</span>
                   <span class="crayon-s">'morgan'</span>
                   <span class="crayon-sy">)</span>
                   <span class="crayon-sy">;</span>
                  </div>
                  <div class="crayon-line" id="crayon-59cd4daf9b389225417296-5">
                   <span class="crayon-t">var</span>
                   <span class="crayon-h"> </span>
                   <span class="crayon-v">cookieParser</span>
                   <span class="crayon-h"> </span>
                   <span class="crayon-o">=</span>
                   <span class="crayon-h"> </span>
                   <span class="crayon-e">require</span>
                   <span class="crayon-sy">(</span>
                   <span class="crayon-s">'cookie-parser'</span>
                   <span class="crayon-sy">)</span>
                   <span class="crayon-sy">;</span>
                  </div>
                  <div class="crayon-line crayon-striped-line" id="crayon-59cd4daf9b389225417296-6">
                   <span class="crayon-t">var</span>
                   <span class="crayon-h"> </span>
                   <span class="crayon-v">bodyParser</span>
                   <span class="crayon-h"> </span>
                   <span class="crayon-o">=</span>
                   <span class="crayon-h"> </span>
                   <span class="crayon-e">require</span>
                   <span class="crayon-sy">(</span>
                   <span class="crayon-s">'body-parser'</span>
                   <span class="crayon-sy">)</span>
                   <span class="crayon-sy">;</span>
                  </div>
                  <div class="crayon-line" id="crayon-59cd4daf9b389225417296-7">
                   &nbsp;
                  </div>
                  <div class="crayon-line crayon-striped-line" id="crayon-59cd4daf9b389225417296-8">
                   <span class="crayon-c">// These are the new imports we're adding:</span>
                  </div>
                  <div class="crayon-line" id="crayon-59cd4daf9b389225417296-9">
                   <span class="crayon-t">var</span>
                   <span class="crayon-h"> </span>
                   <span class="crayon-v">passport</span>
                   <span class="crayon-h"> </span>
                   <span class="crayon-o">=</span>
                   <span class="crayon-h"> </span>
                   <span class="crayon-e">require</span>
                   <span class="crayon-sy">(</span>
                   <span class="crayon-s">'passport'</span>
                   <span class="crayon-sy">)</span>
                   <span class="crayon-sy">;</span>
                  </div>
                  <div class="crayon-line crayon-striped-line" id="crayon-59cd4daf9b389225417296-10">
                   <span class="crayon-t">var</span>
                   <span class="crayon-h"> </span>
                   <span class="crayon-v">StormpathStrategy</span>
                   <span class="crayon-h"> </span>
                   <span class="crayon-o">=</span>
                   <span class="crayon-h"> </span>
                   <span class="crayon-e">require</span>
                   <span class="crayon-sy">(</span>
                   <span class="crayon-s">'passport-stormpath'</span>
                   <span class="crayon-sy">)</span>
                   <span class="crayon-sy">;</span>
                  </div>
                  <div class="crayon-line" id="crayon-59cd4daf9b389225417296-11">
                   <span class="crayon-t">var</span>
                   <span class="crayon-h"> </span>
                   <span class="crayon-v">session</span>
                   <span class="crayon-h"> </span>
                   <span class="crayon-o">=</span>
                   <span class="crayon-h"> </span>
                   <span class="crayon-e">require</span>
                   <span class="crayon-sy">(</span>
                   <span class="crayon-s">'express-session'</span>
                   <span class="crayon-sy">)</span>
                   <span class="crayon-sy">;</span>
                  </div>
                  <div class="crayon-line crayon-striped-line" id="crayon-59cd4daf9b389225417296-12">
                   <span class="crayon-t">var</span>
                   <span class="crayon-h"> </span>
                   <span class="crayon-v">flash</span>
                   <span class="crayon-h"> </span>
                   <span class="crayon-o">=</span>
                   <span class="crayon-h"> </span>
                   <span class="crayon-e">require</span>
                   <span class="crayon-sy">(</span>
                   <span class="crayon-s">'connect-flash'</span>
                   <span class="crayon-sy">)</span>
                   <span class="crayon-sy">;</span>
                  </div>
                  <div class="crayon-line" id="crayon-59cd4daf9b389225417296-13">
                   &nbsp;
                  </div>
                 </div></td> 
               </tr> 
              </tbody>
             </table> 
            </div> 
           </div> 
           <p></p> 
           <p>Now that we have our dependencies imported, let’s configure them!</p> 
           <p>In <code>app.js</code>, you’ll want to add the following:</p> 
           <p></p> 
           <div id="crayon-59cd4daf9b38c120326717" class="crayon-syntax crayon-theme-stormpath crayon-font-monaco crayon-os-pc print-yes notranslate" data-settings=" minimize scroll-mouseover" style=" margin-top: 12px; margin-bottom: 12px; font-size: 12px !important; line-height: 15px !important;"> 
            <div class="crayon-plain-wrap">
             <textarea wrap="soft" class="crayon-plain print-no" data-settings="dblclick" readonly style="-moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4; font-size: 12px !important; line-height: 15px !important;">
var app = express();

// Here is what we're adding:
var strategy = new StormpathStrategy();
passport.use(strategy);
passport.serializeUser(strategy.serializeUser);
passport.deserializeUser(strategy.deserializeUser);
</textarea>
            </div> 
            <div class="crayon-main" style=""> 
             <table class="crayon-table"> 
              <tbody>
               <tr class="crayon-row"> 
                <td class="crayon-nums " data-settings="hide"> 
                 <div class="crayon-nums-content" style="font-size: 12px !important; line-height: 15px !important;">
                  <div class="crayon-num" data-line="crayon-59cd4daf9b38c120326717-1">
                   1
                  </div>
                  <div class="crayon-num crayon-striped-num" data-line="crayon-59cd4daf9b38c120326717-2">
                   2
                  </div>
                  <div class="crayon-num" data-line="crayon-59cd4daf9b38c120326717-3">
                   3
                  </div>
                  <div class="crayon-num crayon-striped-num" data-line="crayon-59cd4daf9b38c120326717-4">
                   4
                  </div>
                  <div class="crayon-num" data-line="crayon-59cd4daf9b38c120326717-5">
                   5
                  </div>
                  <div class="crayon-num crayon-striped-num" data-line="crayon-59cd4daf9b38c120326717-6">
                   6
                  </div>
                  <div class="crayon-num" data-line="crayon-59cd4daf9b38c120326717-7">
                   7
                  </div>
                  <div class="crayon-num crayon-striped-num" data-line="crayon-59cd4daf9b38c120326717-8">
                   8
                  </div>
                 </div> </td> 
                <td class="crayon-code">
                 <div class="crayon-pre" style="font-size: 12px !important; line-height: 15px !important; -moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4;">
                  <div class="crayon-line" id="crayon-59cd4daf9b38c120326717-1">
                   <span class="crayon-t">var</span>
                   <span class="crayon-h"> </span>
                   <span class="crayon-v">app</span>
                   <span class="crayon-h"> </span>
                   <span class="crayon-o">=</span>
                   <span class="crayon-h"> </span>
                   <span class="crayon-e">express</span>
                   <span class="crayon-sy">(</span>
                   <span class="crayon-sy">)</span>
                   <span class="crayon-sy">;</span>
                  </div>
                  <div class="crayon-line crayon-striped-line" id="crayon-59cd4daf9b38c120326717-2">
                   &nbsp;
                  </div>
                  <div class="crayon-line" id="crayon-59cd4daf9b38c120326717-3">
                   <span class="crayon-c">// Here is what we're adding:</span>
                  </div>
                  <div class="crayon-line crayon-striped-line" id="crayon-59cd4daf9b38c120326717-4">
                   <span class="crayon-t">var</span>
                   <span class="crayon-h"> </span>
                   <span class="crayon-v">strategy</span>
                   <span class="crayon-h"> </span>
                   <span class="crayon-o">=</span>
                   <span class="crayon-h"> </span>
                   <span class="crayon-r">new</span>
                   <span class="crayon-h"> </span>
                   <span class="crayon-e">StormpathStrategy</span>
                   <span class="crayon-sy">(</span>
                   <span class="crayon-sy">)</span>
                   <span class="crayon-sy">;</span>
                  </div>
                  <div class="crayon-line" id="crayon-59cd4daf9b38c120326717-5">
                   <span class="crayon-v">passport</span>
                   <span class="crayon-sy">.</span>
                   <span class="crayon-st">use</span>
                   <span class="crayon-sy">(</span>
                   <span class="crayon-v">strategy</span>
                   <span class="crayon-sy">)</span>
                   <span class="crayon-sy">;</span>
                  </div>
                  <div class="crayon-line crayon-striped-line" id="crayon-59cd4daf9b38c120326717-6">
                   <span class="crayon-v">passport</span>
                   <span class="crayon-sy">.</span>
                   <span class="crayon-e">serializeUser</span>
                   <span class="crayon-sy">(</span>
                   <span class="crayon-v">strategy</span>
                   <span class="crayon-sy">.</span>
                   <span class="crayon-v">serializeUser</span>
                   <span class="crayon-sy">)</span>
                   <span class="crayon-sy">;</span>
                  </div>
                  <div class="crayon-line" id="crayon-59cd4daf9b38c120326717-7">
                   <span class="crayon-v">passport</span>
                   <span class="crayon-sy">.</span>
                   <span class="crayon-e">deserializeUser</span>
                   <span class="crayon-sy">(</span>
                   <span class="crayon-v">strategy</span>
                   <span class="crayon-sy">.</span>
                   <span class="crayon-v">deserializeUser</span>
                   <span class="crayon-sy">)</span>
                   <span class="crayon-sy">;</span>
                  </div>
                  <div class="crayon-line crayon-striped-line" id="crayon-59cd4daf9b38c120326717-8">
                   &nbsp;
                  </div>
                 </div></td> 
               </tr> 
              </tbody>
             </table> 
            </div> 
           </div> 
           <p></p> 
           <p>Next, we need to configure some of our middleware in <code>app.js</code>:</p> 
           <p></p> 
           <div id="crayon-59cd4daf9b390074133743" class="crayon-syntax crayon-theme-stormpath crayon-font-monaco crayon-os-pc print-yes notranslate" data-settings=" minimize scroll-mouseover" style=" margin-top: 12px; margin-bottom: 12px; font-size: 12px !important; line-height: 15px !important;"> 
            <div class="crayon-plain-wrap">
             <textarea wrap="soft" class="crayon-plain print-no" data-settings="dblclick" readonly style="-moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4; font-size: 12px !important; line-height: 15px !important;">
app.use(favicon());
app.use(logger('dev'));
app.use(bodyParser.json());
app.use(bodyParser.urlencoded());
app.use(cookieParser());
app.use(require('stylus').middleware(path.join(__dirname, 'public')));
app.use(express.static(path.join(__dirname, 'public')));

// Stuff we're adding:
app.use(session({
  secret: process.env.EXPRESS_SECRET,
  key: 'sid',
  cookie: { secure: false },
}));
app.use(passport.initialize());
app.use(passport.session());
app.use(flash());
</textarea>
            </div> 
            <div class="crayon-main" style=""> 
             <table class="crayon-table"> 
              <tbody>
               <tr class="crayon-row"> 
                <td class="crayon-nums " data-settings="hide"> 
                 <div class="crayon-nums-content" style="font-size: 12px !important; line-height: 15px !important;">
                  <div class="crayon-num" data-line="crayon-59cd4daf9b390074133743-1">
                   1
                  </div>
                  <div class="crayon-num crayon-striped-num" data-line="crayon-59cd4daf9b390074133743-2">
                   2
                  </div>
                  <div class="crayon-num" data-line="crayon-59cd4daf9b390074133743-3">
                   3
                  </div>
                  <div class="crayon-num crayon-striped-num" data-line="crayon-59cd4daf9b390074133743-4">
                   4
                  </div>
                  <div class="crayon-num" data-line="crayon-59cd4daf9b390074133743-5">
                   5
                  </div>
                  <div class="crayon-num crayon-striped-num" data-line="crayon-59cd4daf9b390074133743-6">
                   6
                  </div>
                  <div class="crayon-num" data-line="crayon-59cd4daf9b390074133743-7">
                   7
                  </div>
                  <div class="crayon-num crayon-striped-num" data-line="crayon-59cd4daf9b390074133743-8">
                   8
                  </div>
                  <div class="crayon-num" data-line="crayon-59cd4daf9b390074133743-9">
                   9
                  </div>
                  <div class="crayon-num crayon-striped-num" data-line="crayon-59cd4daf9b390074133743-10">
                   10
                  </div>
                  <div class="crayon-num" data-line="crayon-59cd4daf9b390074133743-11">
                   11
                  </div>
                  <div class="crayon-num crayon-striped-num" data-line="crayon-59cd4daf9b390074133743-12">
                   12
                  </div>
                  <div class="crayon-num" data-line="crayon-59cd4daf9b390074133743-13">
                   13
                  </div>
                  <div class="crayon-num crayon-striped-num" data-line="crayon-59cd4daf9b390074133743-14">
                   14
                  </div>
                  <div class="crayon-num" data-line="crayon-59cd4daf9b390074133743-15">
                   15
                  </div>
                  <div class="crayon-num crayon-striped-num" data-line="crayon-59cd4daf9b390074133743-16">
                   16
                  </div>
                  <div class="crayon-num" data-line="crayon-59cd4daf9b390074133743-17">
                   17
                  </div>
                  <div class="crayon-num crayon-striped-num" data-line="crayon-59cd4daf9b390074133743-18">
                   18
                  </div>
                 </div> </td> 
                <td class="crayon-code">
                 <div class="crayon-pre" style="font-size: 12px !important; line-height: 15px !important; -moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4;">
                  <div class="crayon-line" id="crayon-59cd4daf9b390074133743-1">
                   <span class="crayon-v">app</span>
                   <span class="crayon-sy">.</span>
                   <span class="crayon-st">use</span>
                   <span class="crayon-sy">(</span>
                   <span class="crayon-e">favicon</span>
                   <span class="crayon-sy">(</span>
                   <span class="crayon-sy">)</span>
                   <span class="crayon-sy">)</span>
                   <span class="crayon-sy">;</span>
                  </div>
                  <div class="crayon-line crayon-striped-line" id="crayon-59cd4daf9b390074133743-2">
                   <span class="crayon-v">app</span>
                   <span class="crayon-sy">.</span>
                   <span class="crayon-st">use</span>
                   <span class="crayon-sy">(</span>
                   <span class="crayon-e">logger</span>
                   <span class="crayon-sy">(</span>
                   <span class="crayon-s">'dev'</span>
                   <span class="crayon-sy">)</span>
                   <span class="crayon-sy">)</span>
                   <span class="crayon-sy">;</span>
                  </div>
                  <div class="crayon-line" id="crayon-59cd4daf9b390074133743-3">
                   <span class="crayon-v">app</span>
                   <span class="crayon-sy">.</span>
                   <span class="crayon-st">use</span>
                   <span class="crayon-sy">(</span>
                   <span class="crayon-v">bodyParser</span>
                   <span class="crayon-sy">.</span>
                   <span class="crayon-e">json</span>
                   <span class="crayon-sy">(</span>
                   <span class="crayon-sy">)</span>
                   <span class="crayon-sy">)</span>
                   <span class="crayon-sy">;</span>
                  </div>
                  <div class="crayon-line crayon-striped-line" id="crayon-59cd4daf9b390074133743-4">
                   <span class="crayon-v">app</span>
                   <span class="crayon-sy">.</span>
                   <span class="crayon-st">use</span>
                   <span class="crayon-sy">(</span>
                   <span class="crayon-v">bodyParser</span>
                   <span class="crayon-sy">.</span>
                   <span class="crayon-e">urlencoded</span>
                   <span class="crayon-sy">(</span>
                   <span class="crayon-sy">)</span>
                   <span class="crayon-sy">)</span>
                   <span class="crayon-sy">;</span>
                  </div>
                  <div class="crayon-line" id="crayon-59cd4daf9b390074133743-5">
                   <span class="crayon-v">app</span>
                   <span class="crayon-sy">.</span>
                   <span class="crayon-st">use</span>
                   <span class="crayon-sy">(</span>
                   <span class="crayon-e">cookieParser</span>
                   <span class="crayon-sy">(</span>
                   <span class="crayon-sy">)</span>
                   <span class="crayon-sy">)</span>
                   <span class="crayon-sy">;</span>
                  </div>
                  <div class="crayon-line crayon-striped-line" id="crayon-59cd4daf9b390074133743-6">
                   <span class="crayon-v">app</span>
                   <span class="crayon-sy">.</span>
                   <span class="crayon-st">use</span>
                   <span class="crayon-sy">(</span>
                   <span class="crayon-e">require</span>
                   <span class="crayon-sy">(</span>
                   <span class="crayon-s">'stylus'</span>
                   <span class="crayon-sy">)</span>
                   <span class="crayon-sy">.</span>
                   <span class="crayon-e">middleware</span>
                   <span class="crayon-sy">(</span>
                   <span class="crayon-v">path</span>
                   <span class="crayon-sy">.</span>
                   <span class="crayon-e">join</span>
                   <span class="crayon-sy">(</span>
                   <span class="crayon-v">__dirname</span>
                   <span class="crayon-sy">,</span>
                   <span class="crayon-h"> </span>
                   <span class="crayon-s">'public'</span>
                   <span class="crayon-sy">)</span>
                   <span class="crayon-sy">)</span>
                   <span class="crayon-sy">)</span>
                   <span class="crayon-sy">;</span>
                  </div>
                  <div class="crayon-line" id="crayon-59cd4daf9b390074133743-7">
                   <span class="crayon-v">app</span>
                   <span class="crayon-sy">.</span>
                   <span class="crayon-st">use</span>
                   <span class="crayon-sy">(</span>
                   <span class="crayon-v">express</span>
                   <span class="crayon-sy">.</span>
                   <span class="crayon-m">static</span>
                   <span class="crayon-sy">(</span>
                   <span class="crayon-v">path</span>
                   <span class="crayon-sy">.</span>
                   <span class="crayon-e">join</span>
                   <span class="crayon-sy">(</span>
                   <span class="crayon-v">__dirname</span>
                   <span class="crayon-sy">,</span>
                   <span class="crayon-h"> </span>
                   <span class="crayon-s">'public'</span>
                   <span class="crayon-sy">)</span>
                   <span class="crayon-sy">)</span>
                   <span class="crayon-sy">)</span>
                   <span class="crayon-sy">;</span>
                  </div>
                  <div class="crayon-line crayon-striped-line" id="crayon-59cd4daf9b390074133743-8">
                   &nbsp;
                  </div>
                  <div class="crayon-line" id="crayon-59cd4daf9b390074133743-9">
                   <span class="crayon-c">// Stuff we're adding:</span>
                  </div>
                  <div class="crayon-line crayon-striped-line" id="crayon-59cd4daf9b390074133743-10">
                   <span class="crayon-v">app</span>
                   <span class="crayon-sy">.</span>
                   <span class="crayon-st">use</span>
                   <span class="crayon-sy">(</span>
                   <span class="crayon-e">session</span>
                   <span class="crayon-sy">(</span>
                   <span class="crayon-sy">{</span>
                  </div>
                  <div class="crayon-line" id="crayon-59cd4daf9b390074133743-11">
                   <span class="crayon-h">&nbsp;&nbsp;</span>
                   <span class="crayon-v">secret</span>
                   <span class="crayon-o">:</span>
                   <span class="crayon-h"> </span>
                   <span class="crayon-v">process</span>
                   <span class="crayon-sy">.</span>
                   <span class="crayon-v">env</span>
                   <span class="crayon-sy">.</span>
                   <span class="crayon-v">EXPRESS_SECRET</span>
                   <span class="crayon-sy">,</span>
                  </div>
                  <div class="crayon-line crayon-striped-line" id="crayon-59cd4daf9b390074133743-12">
                   <span class="crayon-h">&nbsp;&nbsp;</span>
                   <span class="crayon-v">key</span>
                   <span class="crayon-o">:</span>
                   <span class="crayon-h"> </span>
                   <span class="crayon-s">'sid'</span>
                   <span class="crayon-sy">,</span>
                  </div>
                  <div class="crayon-line" id="crayon-59cd4daf9b390074133743-13">
                   <span class="crayon-h">&nbsp;&nbsp;</span>
                   <span class="crayon-v">cookie</span>
                   <span class="crayon-o">:</span>
                   <span class="crayon-h"> </span>
                   <span class="crayon-sy">{</span>
                   <span class="crayon-h"> </span>
                   <span class="crayon-v">secure</span>
                   <span class="crayon-o">:</span>
                   <span class="crayon-h"> </span>
                   <span class="crayon-t">false</span>
                   <span class="crayon-h"> </span>
                   <span class="crayon-sy">}</span>
                   <span class="crayon-sy">,</span>
                  </div>
                  <div class="crayon-line crayon-striped-line" id="crayon-59cd4daf9b390074133743-14">
                   <span class="crayon-sy">}</span>
                   <span class="crayon-sy">)</span>
                   <span class="crayon-sy">)</span>
                   <span class="crayon-sy">;</span>
                  </div>
                  <div class="crayon-line" id="crayon-59cd4daf9b390074133743-15">
                   <span class="crayon-v">app</span>
                   <span class="crayon-sy">.</span>
                   <span class="crayon-st">use</span>
                   <span class="crayon-sy">(</span>
                   <span class="crayon-v">passport</span>
                   <span class="crayon-sy">.</span>
                   <span class="crayon-e">initialize</span>
                   <span class="crayon-sy">(</span>
                   <span class="crayon-sy">)</span>
                   <span class="crayon-sy">)</span>
                   <span class="crayon-sy">;</span>
                  </div>
                  <div class="crayon-line crayon-striped-line" id="crayon-59cd4daf9b390074133743-16">
                   <span class="crayon-v">app</span>
                   <span class="crayon-sy">.</span>
                   <span class="crayon-st">use</span>
                   <span class="crayon-sy">(</span>
                   <span class="crayon-v">passport</span>
                   <span class="crayon-sy">.</span>
                   <span class="crayon-e">session</span>
                   <span class="crayon-sy">(</span>
                   <span class="crayon-sy">)</span>
                   <span class="crayon-sy">)</span>
                   <span class="crayon-sy">;</span>
                  </div>
                  <div class="crayon-line" id="crayon-59cd4daf9b390074133743-17">
                   <span class="crayon-v">app</span>
                   <span class="crayon-sy">.</span>
                   <span class="crayon-st">use</span>
                   <span class="crayon-sy">(</span>
                   <span class="crayon-e">flash</span>
                   <span class="crayon-sy">(</span>
                   <span class="crayon-sy">)</span>
                   <span class="crayon-sy">)</span>
                   <span class="crayon-sy">;</span>
                  </div>
                  <div class="crayon-line crayon-striped-line" id="crayon-59cd4daf9b390074133743-18">
                   &nbsp;
                  </div>
                 </div></td> 
               </tr> 
              </tbody>
             </table> 
            </div> 
           </div> 
           <p></p> 
           <p>This just tells express to activate our middleware components.</p> 
           <p>I learned how to do all of the above by reading through the project documentation for the following libraries (<em>it’s nothing special!</em>):</p> 
           <ul> 
            <li><a href="http://passportjs.org/">passport.js</a></li> 
            <li><a href="https://github.com/stormpath/passport-stormpath">passport-stormpath</a></li> 
            <li><a href="https://github.com/expressjs/session">express-session</a></li> 
            <li><a href="https://github.com/jaredhanson/connect-flash">connect-flash</a></li> 
           </ul> 
           <p>Now we’re ready to move onto the good stuff: our routes.</p> 
           <h2 id="writing-the-routes">Writing the Routes<a href="#writing-the-routes" class="heading-link"><i class="stp-icons stp-icon-link2"></i></a></h2> 
           <p>Writing routes is where the real action happens.</p> 
           <p>We’re going to define several routes:</p> 
           <ul> 
            <li>A <code>/</code> route which just displays a simple home page.</li> 
            <li>A <code>/register</code> route which renders a registration page. This route will need to accept both GET and POST requests.</li> 
            <li>A <code>/login</code> route which will allow existing users to log in. This route will need to accept both GET and POST requests as well.</li> 
            <li>A <code>/logout</code> route which will log users out of their account.</li> 
            <li>A <code>/dashboard</code> route which will display a dashboard page for logged in users.</li> 
           </ul> 
           <p>To keep things orderly, let’s create two separate route files.</p> 
           <p>First, open up the <code>routes/index.js</code> file and replace its contents with the following:</p> 
           <p></p> 
           <div id="crayon-59cd4daf9b393749654824" class="crayon-syntax crayon-theme-stormpath crayon-font-monaco crayon-os-pc print-yes notranslate" data-settings=" minimize scroll-mouseover" style=" margin-top: 12px; margin-bottom: 12px; font-size: 12px !important; line-height: 15px !important;"> 
            <div class="crayon-plain-wrap">
             <textarea wrap="soft" class="crayon-plain print-no" data-settings="dblclick" readonly style="-moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4; font-size: 12px !important; line-height: 15px !important;">
var express = require('express');
var router = express.Router();

// Render the home page.
router.get('/', function(req, res) {
  res.render('index', { title: 'Home', user: req.user });
});

// Render the dashboard page.
router.get('/dashboard', function (req, res) {
  if (!req.user || req.user.status !== 'ENABLED') {
    return res.redirect('/login');
  }

  res.render('dashboard', { title: 'Dashboard', user: req.user });
});

module.exports = router;
</textarea>
            </div> 
            <div class="crayon-main" style=""> 
             <table class="crayon-table"> 
              <tbody>
               <tr class="crayon-row"> 
                <td class="crayon-nums " data-settings="hide"> 
                 <div class="crayon-nums-content" style="font-size: 12px !important; line-height: 15px !important;">
                  <div class="crayon-num" data-line="crayon-59cd4daf9b393749654824-1">
                   1
                  </div>
                  <div class="crayon-num crayon-striped-num" data-line="crayon-59cd4daf9b393749654824-2">
                   2
                  </div>
                  <div class="crayon-num" data-line="crayon-59cd4daf9b393749654824-3">
                   3
                  </div>
                  <div class="crayon-num crayon-striped-num" data-line="crayon-59cd4daf9b393749654824-4">
                   4
                  </div>
                  <div class="crayon-num" data-line="crayon-59cd4daf9b393749654824-5">
                   5
                  </div>
                  <div class="crayon-num crayon-striped-num" data-line="crayon-59cd4daf9b393749654824-6">
                   6
                  </div>
                  <div class="crayon-num" data-line="crayon-59cd4daf9b393749654824-7">
                   7
                  </div>
                  <div class="crayon-num crayon-striped-num" data-line="crayon-59cd4daf9b393749654824-8">
                   8
                  </div>
                  <div class="crayon-num" data-line="crayon-59cd4daf9b393749654824-9">
                   9
                  </div>
                  <div class="crayon-num crayon-striped-num" data-line="crayon-59cd4daf9b393749654824-10">
                   10
                  </div>
                  <div class="crayon-num" data-line="crayon-59cd4daf9b393749654824-11">
                   11
                  </div>
                  <div class="crayon-num crayon-striped-num" data-line="crayon-59cd4daf9b393749654824-12">
                   12
                  </div>
                  <div class="crayon-num" data-line="crayon-59cd4daf9b393749654824-13">
                   13
                  </div>
                  <div class="crayon-num crayon-striped-num" data-line="crayon-59cd4daf9b393749654824-14">
                   14
                  </div>
                  <div class="crayon-num" data-line="crayon-59cd4daf9b393749654824-15">
                   15
                  </div>
                  <div class="crayon-num crayon-striped-num" data-line="crayon-59cd4daf9b393749654824-16">
                   16
                  </div>
                  <div class="crayon-num" data-line="crayon-59cd4daf9b393749654824-17">
                   17
                  </div>
                  <div class="crayon-num crayon-striped-num" data-line="crayon-59cd4daf9b393749654824-18">
                   18
                  </div>
                  <div class="crayon-num" data-line="crayon-59cd4daf9b393749654824-19">
                   19
                  </div>
                 </div> </td> 
                <td class="crayon-code">
                 <div class="crayon-pre" style="font-size: 12px !important; line-height: 15px !important; -moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4;">
                  <div class="crayon-line" id="crayon-59cd4daf9b393749654824-1">
                   <span class="crayon-t">var</span>
                   <span class="crayon-h"> </span>
                   <span class="crayon-v">express</span>
                   <span class="crayon-h"> </span>
                   <span class="crayon-o">=</span>
                   <span class="crayon-h"> </span>
                   <span class="crayon-e">require</span>
                   <span class="crayon-sy">(</span>
                   <span class="crayon-s">'express'</span>
                   <span class="crayon-sy">)</span>
                   <span class="crayon-sy">;</span>
                  </div>
                  <div class="crayon-line crayon-striped-line" id="crayon-59cd4daf9b393749654824-2">
                   <span class="crayon-t">var</span>
                   <span class="crayon-h"> </span>
                   <span class="crayon-v">router</span>
                   <span class="crayon-h"> </span>
                   <span class="crayon-o">=</span>
                   <span class="crayon-h"> </span>
                   <span class="crayon-v">express</span>
                   <span class="crayon-sy">.</span>
                   <span class="crayon-e">Router</span>
                   <span class="crayon-sy">(</span>
                   <span class="crayon-sy">)</span>
                   <span class="crayon-sy">;</span>
                  </div>
                  <div class="crayon-line" id="crayon-59cd4daf9b393749654824-3">
                   &nbsp;
                  </div>
                  <div class="crayon-line crayon-striped-line" id="crayon-59cd4daf9b393749654824-4">
                   <span class="crayon-c">// Render the home page.</span>
                  </div>
                  <div class="crayon-line" id="crayon-59cd4daf9b393749654824-5">
                   <span class="crayon-v">router</span>
                   <span class="crayon-sy">.</span>
                   <span class="crayon-e">get</span>
                   <span class="crayon-sy">(</span>
                   <span class="crayon-s">'/'</span>
                   <span class="crayon-sy">,</span>
                   <span class="crayon-h"> </span>
                   <span class="crayon-t">function</span>
                   <span class="crayon-sy">(</span>
                   <span class="crayon-v">req</span>
                   <span class="crayon-sy">,</span>
                   <span class="crayon-h"> </span>
                   <span class="crayon-v">res</span>
                   <span class="crayon-sy">)</span>
                   <span class="crayon-h"> </span>
                   <span class="crayon-sy">{</span>
                  </div>
                  <div class="crayon-line crayon-striped-line" id="crayon-59cd4daf9b393749654824-6">
                   <span class="crayon-h">&nbsp;&nbsp;</span>
                   <span class="crayon-v">res</span>
                   <span class="crayon-sy">.</span>
                   <span class="crayon-e">render</span>
                   <span class="crayon-sy">(</span>
                   <span class="crayon-s">'index'</span>
                   <span class="crayon-sy">,</span>
                   <span class="crayon-h"> </span>
                   <span class="crayon-sy">{</span>
                   <span class="crayon-h"> </span>
                   <span class="crayon-v">title</span>
                   <span class="crayon-o">:</span>
                   <span class="crayon-h"> </span>
                   <span class="crayon-s">'Home'</span>
                   <span class="crayon-sy">,</span>
                   <span class="crayon-h"> </span>
                   <span class="crayon-v">user</span>
                   <span class="crayon-o">:</span>
                   <span class="crayon-h"> </span>
                   <span class="crayon-v">req</span>
                   <span class="crayon-sy">.</span>
                   <span class="crayon-i">user</span>
                   <span class="crayon-h"> </span>
                   <span class="crayon-sy">}</span>
                   <span class="crayon-sy">)</span>
                   <span class="crayon-sy">;</span>
                  </div>
                  <div class="crayon-line" id="crayon-59cd4daf9b393749654824-7">
                   <span class="crayon-sy">}</span>
                   <span class="crayon-sy">)</span>
                   <span class="crayon-sy">;</span>
                  </div>
                  <div class="crayon-line crayon-striped-line" id="crayon-59cd4daf9b393749654824-8">
                   &nbsp;
                  </div>
                  <div class="crayon-line" id="crayon-59cd4daf9b393749654824-9">
                   <span class="crayon-c">// Render the dashboard page.</span>
                  </div>
                  <div class="crayon-line crayon-striped-line" id="crayon-59cd4daf9b393749654824-10">
                   <span class="crayon-v">router</span>
                   <span class="crayon-sy">.</span>
                   <span class="crayon-e">get</span>
                   <span class="crayon-sy">(</span>
                   <span class="crayon-s">'/dashboard'</span>
                   <span class="crayon-sy">,</span>
                   <span class="crayon-h"> </span>
                   <span class="crayon-t">function</span>
                   <span class="crayon-h"> </span>
                   <span class="crayon-sy">(</span>
                   <span class="crayon-v">req</span>
                   <span class="crayon-sy">,</span>
                   <span class="crayon-h"> </span>
                   <span class="crayon-v">res</span>
                   <span class="crayon-sy">)</span>
                   <span class="crayon-h"> </span>
                   <span class="crayon-sy">{</span>
                  </div>
                  <div class="crayon-line" id="crayon-59cd4daf9b393749654824-11">
                   <span class="crayon-h">&nbsp;&nbsp;</span>
                   <span class="crayon-st">if</span>
                   <span class="crayon-h"> </span>
                   <span class="crayon-sy">(</span>
                   <span class="crayon-o">!</span>
                   <span class="crayon-v">req</span>
                   <span class="crayon-sy">.</span>
                   <span class="crayon-v">user</span>
                   <span class="crayon-h"> </span>
                   <span class="crayon-o">||</span>
                   <span class="crayon-h"> </span>
                   <span class="crayon-v">req</span>
                   <span class="crayon-sy">.</span>
                   <span class="crayon-v">user</span>
                   <span class="crayon-sy">.</span>
                   <span class="crayon-v">status</span>
                   <span class="crayon-h"> </span>
                   <span class="crayon-o">!==</span>
                   <span class="crayon-h"> </span>
                   <span class="crayon-s">'ENABLED'</span>
                   <span class="crayon-sy">)</span>
                   <span class="crayon-h"> </span>
                   <span class="crayon-sy">{</span>
                  </div>
                  <div class="crayon-line crayon-striped-line" id="crayon-59cd4daf9b393749654824-12">
                   <span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;</span>
                   <span class="crayon-st">return</span>
                   <span class="crayon-h"> </span>
                   <span class="crayon-v">res</span>
                   <span class="crayon-sy">.</span>
                   <span class="crayon-e">redirect</span>
                   <span class="crayon-sy">(</span>
                   <span class="crayon-s">'/login'</span>
                   <span class="crayon-sy">)</span>
                   <span class="crayon-sy">;</span>
                  </div>
                  <div class="crayon-line" id="crayon-59cd4daf9b393749654824-13">
                   <span class="crayon-h">&nbsp;&nbsp;</span>
                   <span class="crayon-sy">}</span>
                  </div>
                  <div class="crayon-line crayon-striped-line" id="crayon-59cd4daf9b393749654824-14">
                   &nbsp;
                  </div>
                  <div class="crayon-line" id="crayon-59cd4daf9b393749654824-15">
                   <span class="crayon-h">&nbsp;&nbsp;</span>
                   <span class="crayon-v">res</span>
                   <span class="crayon-sy">.</span>
                   <span class="crayon-e">render</span>
                   <span class="crayon-sy">(</span>
                   <span class="crayon-s">'dashboard'</span>
                   <span class="crayon-sy">,</span>
                   <span class="crayon-h"> </span>
                   <span class="crayon-sy">{</span>
                   <span class="crayon-h"> </span>
                   <span class="crayon-v">title</span>
                   <span class="crayon-o">:</span>
                   <span class="crayon-h"> </span>
                   <span class="crayon-s">'Dashboard'</span>
                   <span class="crayon-sy">,</span>
                   <span class="crayon-h"> </span>
                   <span class="crayon-v">user</span>
                   <span class="crayon-o">:</span>
                   <span class="crayon-h"> </span>
                   <span class="crayon-v">req</span>
                   <span class="crayon-sy">.</span>
                   <span class="crayon-i">user</span>
                   <span class="crayon-h"> </span>
                   <span class="crayon-sy">}</span>
                   <span class="crayon-sy">)</span>
                   <span class="crayon-sy">;</span>
                  </div>
                  <div class="crayon-line crayon-striped-line" id="crayon-59cd4daf9b393749654824-16">
                   <span class="crayon-sy">}</span>
                   <span class="crayon-sy">)</span>
                   <span class="crayon-sy">;</span>
                  </div>
                  <div class="crayon-line" id="crayon-59cd4daf9b393749654824-17">
                   &nbsp;
                  </div>
                  <div class="crayon-line crayon-striped-line" id="crayon-59cd4daf9b393749654824-18">
                   <span class="crayon-v">module</span>
                   <span class="crayon-sy">.</span>
                   <span class="crayon-v">exports</span>
                   <span class="crayon-h"> </span>
                   <span class="crayon-o">=</span>
                   <span class="crayon-h"> </span>
                   <span class="crayon-v">router</span>
                   <span class="crayon-sy">;</span>
                  </div>
                  <div class="crayon-line" id="crayon-59cd4daf9b393749654824-19">
                   &nbsp;
                  </div>
                 </div></td> 
               </tr> 
              </tbody>
             </table> 
            </div> 
           </div> 
           <p></p> 
           <p>This <code>index.js</code> route file holds all of the main website routes (<em>anything not auth related</em>).</p> 
           <p>Next, create a new file named <code>routes/auth.js</code> and add the following code:</p> 
           <p></p> 
           <div id="crayon-59cd4daf9b397990434035" class="crayon-syntax crayon-theme-stormpath crayon-font-monaco crayon-os-pc print-yes notranslate" data-settings=" minimize scroll-mouseover" style=" margin-top: 12px; margin-bottom: 12px; font-size: 12px !important; line-height: 15px !important;"> 
            <div class="crayon-plain-wrap">
             <textarea wrap="soft" class="crayon-plain print-no" data-settings="dblclick" readonly style="-moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4; font-size: 12px !important; line-height: 15px !important;">
var express = require('express');
var router = express.Router();
var passport = require('passport');
var stormpath = require('stormpath');

// Render the registration page.
router.get('/register', function(req, res) {
  res.render('register', { title: 'Register', error: req.flash('error')[0] });
});

// Register a new user to Stormpath.
router.post('/register', function(req, res) {
  var username = req.body.username;
  var password = req.body.password;

  // Grab user fields.
  if (!username || !password) {
    return res.render('register', { title: 'Register', error: 'Email and password required.' });
  }

  // Initialize our Stormpath client.
  var apiKey = new stormpath.ApiKey(
    process.env['STORMPATH_API_KEY_ID'],
    process.env['STORMPATH_API_KEY_SECRET']
  );
  var spClient = new stormpath.Client({ apiKey: apiKey });

  // Grab our app, then attempt to create this user's account.
  spClient.getApplication(process.env['STORMPATH_APP_HREF'], function(err, app) {
    if (err) throw err;

    app.createAccount({
      givenName: 'John',
      surname: 'Smith',
      username: username,
      email: username,
      password: password,
    }, function (err, createdAccount) {
      if (err) {
        return res.render('register', { title: 'Register', error: err.userMessage });
      }

      passport.authenticate('stormpath')(req, res, function () {
        return res.redirect('/dashboard');
      });
    });
  });
});

// Render the login page.
router.get('/login', function(req, res) {
  res.render('login', { title: 'Login', error: req.flash('error')[0] });
});

// Authenticate a user.
router.post('/login', passport.authenticate('stormpath', {
  successRedirect: '/dashboard',
  failureRedirect: '/login',
  failureFlash: 'Invalid email or password.'
}));

// Logout the user, then redirect to the home page.
router.get('/logout', function(req, res) {
  req.logout();
  res.redirect('/');
});

module.exports = router;
</textarea>
            </div> 
            <div class="crayon-main" style=""> 
             <table class="crayon-table"> 
              <tbody>
               <tr class="crayon-row"> 
                <td class="crayon-nums " data-settings="hide"> 
                 <div class="crayon-nums-content" style="font-size: 12px !important; line-height: 15px !important;">
                  <div class="crayon-num" data-line="crayon-59cd4daf9b397990434035-1">
                   1
                  </div>
                  <div class="crayon-num crayon-striped-num" data-line="crayon-59cd4daf9b397990434035-2">
                   2
                  </div>
                  <div class="crayon-num" data-line="crayon-59cd4daf9b397990434035-3">
                   3
                  </div>
                  <div class="crayon-num crayon-striped-num" data-line="crayon-59cd4daf9b397990434035-4">
                   4
                  </div>
                  <div class="crayon-num" data-line="crayon-59cd4daf9b397990434035-5">
                   5
                  </div>
                  <div class="crayon-num crayon-striped-num" data-line="crayon-59cd4daf9b397990434035-6">
                   6
                  </div>
                  <div class="crayon-num" data-line="crayon-59cd4daf9b397990434035-7">
                   7
                  </div>
                  <div class="crayon-num crayon-striped-num" data-line="crayon-59cd4daf9b397990434035-8">
                   8
                  </div>
                  <div class="crayon-num" data-line="crayon-59cd4daf9b397990434035-9">
                   9
                  </div>
                  <div class="crayon-num crayon-striped-num" data-line="crayon-59cd4daf9b397990434035-10">
                   10
                  </div>
                  <div class="crayon-num" data-line="crayon-59cd4daf9b397990434035-11">
                   11
                  </div>
                  <div class="crayon-num crayon-striped-num" data-line="crayon-59cd4daf9b397990434035-12">
                   12
                  </div>
                  <div class="crayon-num" data-line="crayon-59cd4daf9b397990434035-13">
                   13
                  </div>
                  <div class="crayon-num crayon-striped-num" data-line="crayon-59cd4daf9b397990434035-14">
                   14
                  </div>
                  <div class="crayon-num" data-line="crayon-59cd4daf9b397990434035-15">
                   15
                  </div>
                  <div class="crayon-num crayon-striped-num" data-line="crayon-59cd4daf9b397990434035-16">
                   16
                  </div>
                  <div class="crayon-num" data-line="crayon-59cd4daf9b397990434035-17">
                   17
                  </div>
                  <div class="crayon-num crayon-striped-num" data-line="crayon-59cd4daf9b397990434035-18">
                   18
                  </div>
                  <div class="crayon-num" data-line="crayon-59cd4daf9b397990434035-19">
                   19
                  </div>
                  <div class="crayon-num crayon-striped-num" data-line="crayon-59cd4daf9b397990434035-20">
                   20
                  </div>
                  <div class="crayon-num" data-line="crayon-59cd4daf9b397990434035-21">
                   21
                  </div>
                  <div class="crayon-num crayon-striped-num" data-line="crayon-59cd4daf9b397990434035-22">
                   22
                  </div>
                  <div class="crayon-num" data-line="crayon-59cd4daf9b397990434035-23">
                   23
                  </div>
                  <div class="crayon-num crayon-striped-num" data-line="crayon-59cd4daf9b397990434035-24">
                   24
                  </div>
                  <div class="crayon-num" data-line="crayon-59cd4daf9b397990434035-25">
                   25
                  </div>
                  <div class="crayon-num crayon-striped-num" data-line="crayon-59cd4daf9b397990434035-26">
                   26
                  </div>
                  <div class="crayon-num" data-line="crayon-59cd4daf9b397990434035-27">
                   27
                  </div>
                  <div class="crayon-num crayon-striped-num" data-line="crayon-59cd4daf9b397990434035-28">
                   28
                  </div>
                  <div class="crayon-num" data-line="crayon-59cd4daf9b397990434035-29">
                   29
                  </div>
                  <div class="crayon-num crayon-striped-num" data-line="crayon-59cd4daf9b397990434035-30">
                   30
                  </div>
                  <div class="crayon-num" data-line="crayon-59cd4daf9b397990434035-31">
                   31
                  </div>
                  <div class="crayon-num crayon-striped-num" data-line="crayon-59cd4daf9b397990434035-32">
                   32
                  </div>
                  <div class="crayon-num" data-line="crayon-59cd4daf9b397990434035-33">
                   33
                  </div>
                  <div class="crayon-num crayon-striped-num" data-line="crayon-59cd4daf9b397990434035-34">
                   34
                  </div>
                  <div class="crayon-num" data-line="crayon-59cd4daf9b397990434035-35">
                   35
                  </div>
                  <div class="crayon-num crayon-striped-num" data-line="crayon-59cd4daf9b397990434035-36">
                   36
                  </div>
                  <div class="crayon-num" data-line="crayon-59cd4daf9b397990434035-37">
                   37
                  </div>
                  <div class="crayon-num crayon-striped-num" data-line="crayon-59cd4daf9b397990434035-38">
                   38
                  </div>
                  <div class="crayon-num" data-line="crayon-59cd4daf9b397990434035-39">
                   39
                  </div>
                  <div class="crayon-num crayon-striped-num" data-line="crayon-59cd4daf9b397990434035-40">
                   40
                  </div>
                  <div class="crayon-num" data-line="crayon-59cd4daf9b397990434035-41">
                   41
                  </div>
                  <div class="crayon-num crayon-striped-num" data-line="crayon-59cd4daf9b397990434035-42">
                   42
                  </div>
                  <div class="crayon-num" data-line="crayon-59cd4daf9b397990434035-43">
                   43
                  </div>
                  <div class="crayon-num crayon-striped-num" data-line="crayon-59cd4daf9b397990434035-44">
                   44
                  </div>
                  <div class="crayon-num" data-line="crayon-59cd4daf9b397990434035-45">
                   45
                  </div>
                  <div class="crayon-num crayon-striped-num" data-line="crayon-59cd4daf9b397990434035-46">
                   46
                  </div>
                  <div class="crayon-num" data-line="crayon-59cd4daf9b397990434035-47">
                   47
                  </div>
                  <div class="crayon-num crayon-striped-num" data-line="crayon-59cd4daf9b397990434035-48">
                   48
                  </div>
                  <div class="crayon-num" data-line="crayon-59cd4daf9b397990434035-49">
                   49
                  </div>
                  <div class="crayon-num crayon-striped-num" data-line="crayon-59cd4daf9b397990434035-50">
                   50
                  </div>
                  <div class="crayon-num" data-line="crayon-59cd4daf9b397990434035-51">
                   51
                  </div>
                  <div class="crayon-num crayon-striped-num" data-line="crayon-59cd4daf9b397990434035-52">
                   52
                  </div>
                  <div class="crayon-num" data-line="crayon-59cd4daf9b397990434035-53">
                   53
                  </div>
                  <div class="crayon-num crayon-striped-num" data-line="crayon-59cd4daf9b397990434035-54">
                   54
                  </div>
                  <div class="crayon-num" data-line="crayon-59cd4daf9b397990434035-55">
                   55
                  </div>
                  <div class="crayon-num crayon-striped-num" data-line="crayon-59cd4daf9b397990434035-56">
                   56
                  </div>
                  <div class="crayon-num" data-line="crayon-59cd4daf9b397990434035-57">
                   57
                  </div>
                  <div class="crayon-num crayon-striped-num" data-line="crayon-59cd4daf9b397990434035-58">
                   58
                  </div>
                  <div class="crayon-num" data-line="crayon-59cd4daf9b397990434035-59">
                   59
                  </div>
                  <div class="crayon-num crayon-striped-num" data-line="crayon-59cd4daf9b397990434035-60">
                   60
                  </div>
                  <div class="crayon-num" data-line="crayon-59cd4daf9b397990434035-61">
                   61
                  </div>
                  <div class="crayon-num crayon-striped-num" data-line="crayon-59cd4daf9b397990434035-62">
                   62
                  </div>
                  <div class="crayon-num" data-line="crayon-59cd4daf9b397990434035-63">
                   63
                  </div>
                  <div class="crayon-num crayon-striped-num" data-line="crayon-59cd4daf9b397990434035-64">
                   64
                  </div>
                  <div class="crayon-num" data-line="crayon-59cd4daf9b397990434035-65">
                   65
                  </div>
                  <div class="crayon-num crayon-striped-num" data-line="crayon-59cd4daf9b397990434035-66">
                   66
                  </div>
                  <div class="crayon-num" data-line="crayon-59cd4daf9b397990434035-67">
                   67
                  </div>
                  <div class="crayon-num crayon-striped-num" data-line="crayon-59cd4daf9b397990434035-68">
                   68
                  </div>
                  <div class="crayon-num" data-line="crayon-59cd4daf9b397990434035-69">
                   69
                  </div>
                 </div> </td> 
                <td class="crayon-code">
                 <div class="crayon-pre" style="font-size: 12px !important; line-height: 15px !important; -moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4;">
                  <div class="crayon-line" id="crayon-59cd4daf9b397990434035-1">
                   <span class="crayon-t">var</span>
                   <span class="crayon-h"> </span>
                   <span class="crayon-v">express</span>
                   <span class="crayon-h"> </span>
                   <span class="crayon-o">=</span>
                   <span class="crayon-h"> </span>
                   <span class="crayon-e">require</span>
                   <span class="crayon-sy">(</span>
                   <span class="crayon-s">'express'</span>
                   <span class="crayon-sy">)</span>
                   <span class="crayon-sy">;</span>
                  </div>
                  <div class="crayon-line crayon-striped-line" id="crayon-59cd4daf9b397990434035-2">
                   <span class="crayon-t">var</span>
                   <span class="crayon-h"> </span>
                   <span class="crayon-v">router</span>
                   <span class="crayon-h"> </span>
                   <span class="crayon-o">=</span>
                   <span class="crayon-h"> </span>
                   <span class="crayon-v">express</span>
                   <span class="crayon-sy">.</span>
                   <span class="crayon-e">Router</span>
                   <span class="crayon-sy">(</span>
                   <span class="crayon-sy">)</span>
                   <span class="crayon-sy">;</span>
                  </div>
                  <div class="crayon-line" id="crayon-59cd4daf9b397990434035-3">
                   <span class="crayon-t">var</span>
                   <span class="crayon-h"> </span>
                   <span class="crayon-v">passport</span>
                   <span class="crayon-h"> </span>
                   <span class="crayon-o">=</span>
                   <span class="crayon-h"> </span>
                   <span class="crayon-e">require</span>
                   <span class="crayon-sy">(</span>
                   <span class="crayon-s">'passport'</span>
                   <span class="crayon-sy">)</span>
                   <span class="crayon-sy">;</span>
                  </div>
                  <div class="crayon-line crayon-striped-line" id="crayon-59cd4daf9b397990434035-4">
                   <span class="crayon-t">var</span>
                   <span class="crayon-h"> </span>
                   <span class="crayon-v">stormpath</span>
                   <span class="crayon-h"> </span>
                   <span class="crayon-o">=</span>
                   <span class="crayon-h"> </span>
                   <span class="crayon-e">require</span>
                   <span class="crayon-sy">(</span>
                   <span class="crayon-s">'stormpath'</span>
                   <span class="crayon-sy">)</span>
                   <span class="crayon-sy">;</span>
                  </div>
                  <div class="crayon-line" id="crayon-59cd4daf9b397990434035-5">
                   &nbsp;
                  </div>
                  <div class="crayon-line crayon-striped-line" id="crayon-59cd4daf9b397990434035-6">
                   <span class="crayon-c">// Render the registration page.</span>
                  </div>
                  <div class="crayon-line" id="crayon-59cd4daf9b397990434035-7">
                   <span class="crayon-v">router</span>
                   <span class="crayon-sy">.</span>
                   <span class="crayon-e">get</span>
                   <span class="crayon-sy">(</span>
                   <span class="crayon-s">'/register'</span>
                   <span class="crayon-sy">,</span>
                   <span class="crayon-h"> </span>
                   <span class="crayon-t">function</span>
                   <span class="crayon-sy">(</span>
                   <span class="crayon-v">req</span>
                   <span class="crayon-sy">,</span>
                   <span class="crayon-h"> </span>
                   <span class="crayon-v">res</span>
                   <span class="crayon-sy">)</span>
                   <span class="crayon-h"> </span>
                   <span class="crayon-sy">{</span>
                  </div>
                  <div class="crayon-line crayon-striped-line" id="crayon-59cd4daf9b397990434035-8">
                   <span class="crayon-h">&nbsp;&nbsp;</span>
                   <span class="crayon-v">res</span>
                   <span class="crayon-sy">.</span>
                   <span class="crayon-e">render</span>
                   <span class="crayon-sy">(</span>
                   <span class="crayon-s">'register'</span>
                   <span class="crayon-sy">,</span>
                   <span class="crayon-h"> </span>
                   <span class="crayon-sy">{</span>
                   <span class="crayon-h"> </span>
                   <span class="crayon-v">title</span>
                   <span class="crayon-o">:</span>
                   <span class="crayon-h"> </span>
                   <span class="crayon-s">'Register'</span>
                   <span class="crayon-sy">,</span>
                   <span class="crayon-h"> </span>
                   <span class="crayon-v">error</span>
                   <span class="crayon-o">:</span>
                   <span class="crayon-h"> </span>
                   <span class="crayon-v">req</span>
                   <span class="crayon-sy">.</span>
                   <span class="crayon-e">flash</span>
                   <span class="crayon-sy">(</span>
                   <span class="crayon-s">'error'</span>
                   <span class="crayon-sy">)</span>
                   <span class="crayon-sy">[</span>
                   <span class="crayon-cn">0</span>
                   <span class="crayon-sy">]</span>
                   <span class="crayon-h"> </span>
                   <span class="crayon-sy">}</span>
                   <span class="crayon-sy">)</span>
                   <span class="crayon-sy">;</span>
                  </div>
                  <div class="crayon-line" id="crayon-59cd4daf9b397990434035-9">
                   <span class="crayon-sy">}</span>
                   <span class="crayon-sy">)</span>
                   <span class="crayon-sy">;</span>
                  </div>
                  <div class="crayon-line crayon-striped-line" id="crayon-59cd4daf9b397990434035-10">
                   &nbsp;
                  </div>
                  <div class="crayon-line" id="crayon-59cd4daf9b397990434035-11">
                   <span class="crayon-c">// Register a new user to Stormpath.</span>
                  </div>
                  <div class="crayon-line crayon-striped-line" id="crayon-59cd4daf9b397990434035-12">
                   <span class="crayon-v">router</span>
                   <span class="crayon-sy">.</span>
                   <span class="crayon-e">post</span>
                   <span class="crayon-sy">(</span>
                   <span class="crayon-s">'/register'</span>
                   <span class="crayon-sy">,</span>
                   <span class="crayon-h"> </span>
                   <span class="crayon-t">function</span>
                   <span class="crayon-sy">(</span>
                   <span class="crayon-v">req</span>
                   <span class="crayon-sy">,</span>
                   <span class="crayon-h"> </span>
                   <span class="crayon-v">res</span>
                   <span class="crayon-sy">)</span>
                   <span class="crayon-h"> </span>
                   <span class="crayon-sy">{</span>
                  </div>
                  <div class="crayon-line" id="crayon-59cd4daf9b397990434035-13">
                   <span class="crayon-h">&nbsp;&nbsp;</span>
                   <span class="crayon-t">var</span>
                   <span class="crayon-h"> </span>
                   <span class="crayon-v">username</span>
                   <span class="crayon-h"> </span>
                   <span class="crayon-o">=</span>
                   <span class="crayon-h"> </span>
                   <span class="crayon-v">req</span>
                   <span class="crayon-sy">.</span>
                   <span class="crayon-v">body</span>
                   <span class="crayon-sy">.</span>
                   <span class="crayon-v">username</span>
                   <span class="crayon-sy">;</span>
                  </div>
                  <div class="crayon-line crayon-striped-line" id="crayon-59cd4daf9b397990434035-14">
                   <span class="crayon-h">&nbsp;&nbsp;</span>
                   <span class="crayon-t">var</span>
                   <span class="crayon-h"> </span>
                   <span class="crayon-v">password</span>
                   <span class="crayon-h"> </span>
                   <span class="crayon-o">=</span>
                   <span class="crayon-h"> </span>
                   <span class="crayon-v">req</span>
                   <span class="crayon-sy">.</span>
                   <span class="crayon-v">body</span>
                   <span class="crayon-sy">.</span>
                   <span class="crayon-v">password</span>
                   <span class="crayon-sy">;</span>
                  </div>
                  <div class="crayon-line" id="crayon-59cd4daf9b397990434035-15">
                   &nbsp;
                  </div>
                  <div class="crayon-line crayon-striped-line" id="crayon-59cd4daf9b397990434035-16">
                   <span class="crayon-h">&nbsp;&nbsp;</span>
                   <span class="crayon-c">// Grab user fields.</span>
                  </div>
                  <div class="crayon-line" id="crayon-59cd4daf9b397990434035-17">
                   <span class="crayon-h">&nbsp;&nbsp;</span>
                   <span class="crayon-st">if</span>
                   <span class="crayon-h"> </span>
                   <span class="crayon-sy">(</span>
                   <span class="crayon-o">!</span>
                   <span class="crayon-v">username</span>
                   <span class="crayon-h"> </span>
                   <span class="crayon-o">||</span>
                   <span class="crayon-h"> </span>
                   <span class="crayon-o">!</span>
                   <span class="crayon-v">password</span>
                   <span class="crayon-sy">)</span>
                   <span class="crayon-h"> </span>
                   <span class="crayon-sy">{</span>
                  </div>
                  <div class="crayon-line crayon-striped-line" id="crayon-59cd4daf9b397990434035-18">
                   <span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;</span>
                   <span class="crayon-st">return</span>
                   <span class="crayon-h"> </span>
                   <span class="crayon-v">res</span>
                   <span class="crayon-sy">.</span>
                   <span class="crayon-e">render</span>
                   <span class="crayon-sy">(</span>
                   <span class="crayon-s">'register'</span>
                   <span class="crayon-sy">,</span>
                   <span class="crayon-h"> </span>
                   <span class="crayon-sy">{</span>
                   <span class="crayon-h"> </span>
                   <span class="crayon-v">title</span>
                   <span class="crayon-o">:</span>
                   <span class="crayon-h"> </span>
                   <span class="crayon-s">'Register'</span>
                   <span class="crayon-sy">,</span>
                   <span class="crayon-h"> </span>
                   <span class="crayon-v">error</span>
                   <span class="crayon-o">:</span>
                   <span class="crayon-h"> </span>
                   <span class="crayon-s">'Email and password required.'</span>
                   <span class="crayon-h"> </span>
                   <span class="crayon-sy">}</span>
                   <span class="crayon-sy">)</span>
                   <span class="crayon-sy">;</span>
                  </div>
                  <div class="crayon-line" id="crayon-59cd4daf9b397990434035-19">
                   <span class="crayon-h">&nbsp;&nbsp;</span>
                   <span class="crayon-sy">}</span>
                  </div>
                  <div class="crayon-line crayon-striped-line" id="crayon-59cd4daf9b397990434035-20">
                   &nbsp;
                  </div>
                  <div class="crayon-line" id="crayon-59cd4daf9b397990434035-21">
                   <span class="crayon-h">&nbsp;&nbsp;</span>
                   <span class="crayon-c">// Initialize our Stormpath client.</span>
                  </div>
                  <div class="crayon-line crayon-striped-line" id="crayon-59cd4daf9b397990434035-22">
                   <span class="crayon-h">&nbsp;&nbsp;</span>
                   <span class="crayon-t">var</span>
                   <span class="crayon-h"> </span>
                   <span class="crayon-v">apiKey</span>
                   <span class="crayon-h"> </span>
                   <span class="crayon-o">=</span>
                   <span class="crayon-h"> </span>
                   <span class="crayon-r">new</span>
                   <span class="crayon-h"> </span>
                   <span class="crayon-v">stormpath</span>
                   <span class="crayon-sy">.</span>
                   <span class="crayon-e">ApiKey</span>
                   <span class="crayon-sy">(</span>
                  </div>
                  <div class="crayon-line" id="crayon-59cd4daf9b397990434035-23">
                   <span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;</span>
                   <span class="crayon-v">process</span>
                   <span class="crayon-sy">.</span>
                   <span class="crayon-v">env</span>
                   <span class="crayon-sy">[</span>
                   <span class="crayon-s">'STORMPATH_API_KEY_ID'</span>
                   <span class="crayon-sy">]</span>
                   <span class="crayon-sy">,</span>
                  </div>
                  <div class="crayon-line crayon-striped-line" id="crayon-59cd4daf9b397990434035-24">
                   <span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;</span>
                   <span class="crayon-v">process</span>
                   <span class="crayon-sy">.</span>
                   <span class="crayon-v">env</span>
                   <span class="crayon-sy">[</span>
                   <span class="crayon-s">'STORMPATH_API_KEY_SECRET'</span>
                   <span class="crayon-sy">]</span>
                  </div>
                  <div class="crayon-line" id="crayon-59cd4daf9b397990434035-25">
                   <span class="crayon-h">&nbsp;&nbsp;</span>
                   <span class="crayon-sy">)</span>
                   <span class="crayon-sy">;</span>
                  </div>
                  <div class="crayon-line crayon-striped-line" id="crayon-59cd4daf9b397990434035-26">
                   <span class="crayon-h">&nbsp;&nbsp;</span>
                   <span class="crayon-t">var</span>
                   <span class="crayon-h"> </span>
                   <span class="crayon-v">spClient</span>
                   <span class="crayon-h"> </span>
                   <span class="crayon-o">=</span>
                   <span class="crayon-h"> </span>
                   <span class="crayon-r">new</span>
                   <span class="crayon-h"> </span>
                   <span class="crayon-v">stormpath</span>
                   <span class="crayon-sy">.</span>
                   <span class="crayon-e">Client</span>
                   <span class="crayon-sy">(</span>
                   <span class="crayon-sy">{</span>
                   <span class="crayon-h"> </span>
                   <span class="crayon-v">apiKey</span>
                   <span class="crayon-o">:</span>
                   <span class="crayon-h"> </span>
                   <span class="crayon-i">apiKey</span>
                   <span class="crayon-h"> </span>
                   <span class="crayon-sy">}</span>
                   <span class="crayon-sy">)</span>
                   <span class="crayon-sy">;</span>
                  </div>
                  <div class="crayon-line" id="crayon-59cd4daf9b397990434035-27">
                   &nbsp;
                  </div>
                  <div class="crayon-line crayon-striped-line" id="crayon-59cd4daf9b397990434035-28">
                   <span class="crayon-h">&nbsp;&nbsp;</span>
                   <span class="crayon-c">// Grab our app, then attempt to create this user's account.</span>
                  </div>
                  <div class="crayon-line" id="crayon-59cd4daf9b397990434035-29">
                   <span class="crayon-h">&nbsp;&nbsp;</span>
                   <span class="crayon-v">spClient</span>
                   <span class="crayon-sy">.</span>
                   <span class="crayon-e">getApplication</span>
                   <span class="crayon-sy">(</span>
                   <span class="crayon-v">process</span>
                   <span class="crayon-sy">.</span>
                   <span class="crayon-v">env</span>
                   <span class="crayon-sy">[</span>
                   <span class="crayon-s">'STORMPATH_APP_HREF'</span>
                   <span class="crayon-sy">]</span>
                   <span class="crayon-sy">,</span>
                   <span class="crayon-h"> </span>
                   <span class="crayon-t">function</span>
                   <span class="crayon-sy">(</span>
                   <span class="crayon-v">err</span>
                   <span class="crayon-sy">,</span>
                   <span class="crayon-h"> </span>
                   <span class="crayon-v">app</span>
                   <span class="crayon-sy">)</span>
                   <span class="crayon-h"> </span>
                   <span class="crayon-sy">{</span>
                  </div>
                  <div class="crayon-line crayon-striped-line" id="crayon-59cd4daf9b397990434035-30">
                   <span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;</span>
                   <span class="crayon-st">if</span>
                   <span class="crayon-h"> </span>
                   <span class="crayon-sy">(</span>
                   <span class="crayon-v">err</span>
                   <span class="crayon-sy">)</span>
                   <span class="crayon-h"> </span>
                   <span class="crayon-st">throw</span>
                   <span class="crayon-h"> </span>
                   <span class="crayon-v">err</span>
                   <span class="crayon-sy">;</span>
                  </div>
                  <div class="crayon-line" id="crayon-59cd4daf9b397990434035-31">
                   &nbsp;
                  </div>
                  <div class="crayon-line crayon-striped-line" id="crayon-59cd4daf9b397990434035-32">
                   <span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;</span>
                   <span class="crayon-v">app</span>
                   <span class="crayon-sy">.</span>
                   <span class="crayon-e">createAccount</span>
                   <span class="crayon-sy">(</span>
                   <span class="crayon-sy">{</span>
                  </div>
                  <div class="crayon-line" id="crayon-59cd4daf9b397990434035-33">
                   <span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span>
                   <span class="crayon-v">givenName</span>
                   <span class="crayon-o">:</span>
                   <span class="crayon-h"> </span>
                   <span class="crayon-s">'John'</span>
                   <span class="crayon-sy">,</span>
                  </div>
                  <div class="crayon-line crayon-striped-line" id="crayon-59cd4daf9b397990434035-34">
                   <span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span>
                   <span class="crayon-v">surname</span>
                   <span class="crayon-o">:</span>
                   <span class="crayon-h"> </span>
                   <span class="crayon-s">'Smith'</span>
                   <span class="crayon-sy">,</span>
                  </div>
                  <div class="crayon-line" id="crayon-59cd4daf9b397990434035-35">
                   <span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span>
                   <span class="crayon-v">username</span>
                   <span class="crayon-o">:</span>
                   <span class="crayon-h"> </span>
                   <span class="crayon-v">username</span>
                   <span class="crayon-sy">,</span>
                  </div>
                  <div class="crayon-line crayon-striped-line" id="crayon-59cd4daf9b397990434035-36">
                   <span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span>
                   <span class="crayon-v">email</span>
                   <span class="crayon-o">:</span>
                   <span class="crayon-h"> </span>
                   <span class="crayon-v">username</span>
                   <span class="crayon-sy">,</span>
                  </div>
                  <div class="crayon-line" id="crayon-59cd4daf9b397990434035-37">
                   <span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span>
                   <span class="crayon-v">password</span>
                   <span class="crayon-o">:</span>
                   <span class="crayon-h"> </span>
                   <span class="crayon-v">password</span>
                   <span class="crayon-sy">,</span>
                  </div>
                  <div class="crayon-line crayon-striped-line" id="crayon-59cd4daf9b397990434035-38">
                   <span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;</span>
                   <span class="crayon-sy">}</span>
                   <span class="crayon-sy">,</span>
                   <span class="crayon-h"> </span>
                   <span class="crayon-t">function</span>
                   <span class="crayon-h"> </span>
                   <span class="crayon-sy">(</span>
                   <span class="crayon-v">err</span>
                   <span class="crayon-sy">,</span>
                   <span class="crayon-h"> </span>
                   <span class="crayon-v">createdAccount</span>
                   <span class="crayon-sy">)</span>
                   <span class="crayon-h"> </span>
                   <span class="crayon-sy">{</span>
                  </div>
                  <div class="crayon-line" id="crayon-59cd4daf9b397990434035-39">
                   <span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span>
                   <span class="crayon-st">if</span>
                   <span class="crayon-h"> </span>
                   <span class="crayon-sy">(</span>
                   <span class="crayon-v">err</span>
                   <span class="crayon-sy">)</span>
                   <span class="crayon-h"> </span>
                   <span class="crayon-sy">{</span>
                  </div>
                  <div class="crayon-line crayon-striped-line" id="crayon-59cd4daf9b397990434035-40">
                   <span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span>
                   <span class="crayon-st">return</span>
                   <span class="crayon-h"> </span>
                   <span class="crayon-v">res</span>
                   <span class="crayon-sy">.</span>
                   <span class="crayon-e">render</span>
                   <span class="crayon-sy">(</span>
                   <span class="crayon-s">'register'</span>
                   <span class="crayon-sy">,</span>
                   <span class="crayon-h"> </span>
                   <span class="crayon-sy">{</span>
                   <span class="crayon-h"> </span>
                   <span class="crayon-v">title</span>
                   <span class="crayon-o">:</span>
                   <span class="crayon-h"> </span>
                   <span class="crayon-s">'Register'</span>
                   <span class="crayon-sy">,</span>
                   <span class="crayon-h"> </span>
                   <span class="crayon-v">error</span>
                   <span class="crayon-o">:</span>
                   <span class="crayon-h"> </span>
                   <span class="crayon-v">err</span>
                   <span class="crayon-sy">.</span>
                   <span class="crayon-i">userMessage</span>
                   <span class="crayon-h"> </span>
                   <span class="crayon-sy">}</span>
                   <span class="crayon-sy">)</span>
                   <span class="crayon-sy">;</span>
                  </div>
                  <div class="crayon-line" id="crayon-59cd4daf9b397990434035-41">
                   <span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span>
                   <span class="crayon-sy">}</span>
                  </div>
                  <div class="crayon-line crayon-striped-line" id="crayon-59cd4daf9b397990434035-42">
                   &nbsp;
                  </div>
                  <div class="crayon-line" id="crayon-59cd4daf9b397990434035-43">
                   <span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span>
                   <span class="crayon-v">passport</span>
                   <span class="crayon-sy">.</span>
                   <span class="crayon-e">authenticate</span>
                   <span class="crayon-sy">(</span>
                   <span class="crayon-s">'stormpath'</span>
                   <span class="crayon-sy">)</span>
                   <span class="crayon-sy">(</span>
                   <span class="crayon-v">req</span>
                   <span class="crayon-sy">,</span>
                   <span class="crayon-h"> </span>
                   <span class="crayon-v">res</span>
                   <span class="crayon-sy">,</span>
                   <span class="crayon-h"> </span>
                   <span class="crayon-t">function</span>
                   <span class="crayon-h"> </span>
                   <span class="crayon-sy">(</span>
                   <span class="crayon-sy">)</span>
                   <span class="crayon-h"> </span>
                   <span class="crayon-sy">{</span>
                  </div>
                  <div class="crayon-line crayon-striped-line" id="crayon-59cd4daf9b397990434035-44">
                   <span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span>
                   <span class="crayon-st">return</span>
                   <span class="crayon-h"> </span>
                   <span class="crayon-v">res</span>
                   <span class="crayon-sy">.</span>
                   <span class="crayon-e">redirect</span>
                   <span class="crayon-sy">(</span>
                   <span class="crayon-s">'/dashboard'</span>
                   <span class="crayon-sy">)</span>
                   <span class="crayon-sy">;</span>
                  </div>
                  <div class="crayon-line" id="crayon-59cd4daf9b397990434035-45">
                   <span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span>
                   <span class="crayon-sy">}</span>
                   <span class="crayon-sy">)</span>
                   <span class="crayon-sy">;</span>
                  </div>
                  <div class="crayon-line crayon-striped-line" id="crayon-59cd4daf9b397990434035-46">
                   <span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;</span>
                   <span class="crayon-sy">}</span>
                   <span class="crayon-sy">)</span>
                   <span class="crayon-sy">;</span>
                  </div>
                  <div class="crayon-line" id="crayon-59cd4daf9b397990434035-47">
                   <span class="crayon-h">&nbsp;&nbsp;</span>
                   <span class="crayon-sy">}</span>
                   <span class="crayon-sy">)</span>
                   <span class="crayon-sy">;</span>
                  </div>
                  <div class="crayon-line crayon-striped-line" id="crayon-59cd4daf9b397990434035-48">
                   <span class="crayon-sy">}</span>
                   <span class="crayon-sy">)</span>
                   <span class="crayon-sy">;</span>
                  </div>
                  <div class="crayon-line" id="crayon-59cd4daf9b397990434035-49">
                   &nbsp;
                  </div>
                  <div class="crayon-line crayon-striped-line" id="crayon-59cd4daf9b397990434035-50">
                   <span class="crayon-c">// Render the login page.</span>
                  </div>
                  <div class="crayon-line" id="crayon-59cd4daf9b397990434035-51">
                   <span class="crayon-v">router</span>
                   <span class="crayon-sy">.</span>
                   <span class="crayon-e">get</span>
                   <span class="crayon-sy">(</span>
                   <span class="crayon-s">'/login'</span>
                   <span class="crayon-sy">,</span>
                   <span class="crayon-h"> </span>
                   <span class="crayon-t">function</span>
                   <span class="crayon-sy">(</span>
                   <span class="crayon-v">req</span>
                   <span class="crayon-sy">,</span>
                   <span class="crayon-h"> </span>
                   <span class="crayon-v">res</span>
                   <span class="crayon-sy">)</span>
                   <span class="crayon-h"> </span>
                   <span class="crayon-sy">{</span>
                  </div>
                  <div class="crayon-line crayon-striped-line" id="crayon-59cd4daf9b397990434035-52">
                   <span class="crayon-h">&nbsp;&nbsp;</span>
                   <span class="crayon-v">res</span>
                   <span class="crayon-sy">.</span>
                   <span class="crayon-e">render</span>
                   <span class="crayon-sy">(</span>
                   <span class="crayon-s">'login'</span>
                   <span class="crayon-sy">,</span>
                   <span class="crayon-h"> </span>
                   <span class="crayon-sy">{</span>
                   <span class="crayon-h"> </span>
                   <span class="crayon-v">title</span>
                   <span class="crayon-o">:</span>
                   <span class="crayon-h"> </span>
                   <span class="crayon-s">'Login'</span>
                   <span class="crayon-sy">,</span>
                   <span class="crayon-h"> </span>
                   <span class="crayon-v">error</span>
                   <span class="crayon-o">:</span>
                   <span class="crayon-h"> </span>
                   <span class="crayon-v">req</span>
                   <span class="crayon-sy">.</span>
                   <span class="crayon-e">flash</span>
                   <span class="crayon-sy">(</span>
                   <span class="crayon-s">'error'</span>
                   <span class="crayon-sy">)</span>
                   <span class="crayon-sy">[</span>
                   <span class="crayon-cn">0</span>
                   <span class="crayon-sy">]</span>
                   <span class="crayon-h"> </span>
                   <span class="crayon-sy">}</span>
                   <span class="crayon-sy">)</span>
                   <span class="crayon-sy">;</span>
                  </div>
                  <div class="crayon-line" id="crayon-59cd4daf9b397990434035-53">
                   <span class="crayon-sy">}</span>
                   <span class="crayon-sy">)</span>
                   <span class="crayon-sy">;</span>
                  </div>
                  <div class="crayon-line crayon-striped-line" id="crayon-59cd4daf9b397990434035-54">
                   &nbsp;
                  </div>
                  <div class="crayon-line" id="crayon-59cd4daf9b397990434035-55">
                   <span class="crayon-c">// Authenticate a user.</span>
                  </div>
                  <div class="crayon-line crayon-striped-line" id="crayon-59cd4daf9b397990434035-56">
                   <span class="crayon-v">router</span>
                   <span class="crayon-sy">.</span>
                   <span class="crayon-e">post</span>
                   <span class="crayon-sy">(</span>
                   <span class="crayon-s">'/login'</span>
                   <span class="crayon-sy">,</span>
                   <span class="crayon-h"> </span>
                   <span class="crayon-v">passport</span>
                   <span class="crayon-sy">.</span>
                   <span class="crayon-e">authenticate</span>
                   <span class="crayon-sy">(</span>
                   <span class="crayon-s">'stormpath'</span>
                   <span class="crayon-sy">,</span>
                   <span class="crayon-h"> </span>
                   <span class="crayon-sy">{</span>
                  </div>
                  <div class="crayon-line" id="crayon-59cd4daf9b397990434035-57">
                   <span class="crayon-h">&nbsp;&nbsp;</span>
                   <span class="crayon-v">successRedirect</span>
                   <span class="crayon-o">:</span>
                   <span class="crayon-h"> </span>
                   <span class="crayon-s">'/dashboard'</span>
                   <span class="crayon-sy">,</span>
                  </div>
                  <div class="crayon-line crayon-striped-line" id="crayon-59cd4daf9b397990434035-58">
                   <span class="crayon-h">&nbsp;&nbsp;</span>
                   <span class="crayon-v">failureRedirect</span>
                   <span class="crayon-o">:</span>
                   <span class="crayon-h"> </span>
                   <span class="crayon-s">'/login'</span>
                   <span class="crayon-sy">,</span>
                  </div>
                  <div class="crayon-line" id="crayon-59cd4daf9b397990434035-59">
                   <span class="crayon-h">&nbsp;&nbsp;</span>
                   <span class="crayon-v">failureFlash</span>
                   <span class="crayon-o">:</span>
                   <span class="crayon-h"> </span>
                   <span class="crayon-s">'Invalid email or password.'</span>
                  </div>
                  <div class="crayon-line crayon-striped-line" id="crayon-59cd4daf9b397990434035-60">
                   <span class="crayon-sy">}</span>
                   <span class="crayon-sy">)</span>
                   <span class="crayon-sy">)</span>
                   <span class="crayon-sy">;</span>
                  </div>
                  <div class="crayon-line" id="crayon-59cd4daf9b397990434035-61">
                   &nbsp;
                  </div>
                  <div class="crayon-line crayon-striped-line" id="crayon-59cd4daf9b397990434035-62">
                   <span class="crayon-c">// Logout the user, then redirect to the home page.</span>
                  </div>
                  <div class="crayon-line" id="crayon-59cd4daf9b397990434035-63">
                   <span class="crayon-v">router</span>
                   <span class="crayon-sy">.</span>
                   <span class="crayon-e">get</span>
                   <span class="crayon-sy">(</span>
                   <span class="crayon-s">'/logout'</span>
                   <span class="crayon-sy">,</span>
                   <span class="crayon-h"> </span>
                   <span class="crayon-t">function</span>
                   <span class="crayon-sy">(</span>
                   <span class="crayon-v">req</span>
                   <span class="crayon-sy">,</span>
                   <span class="crayon-h"> </span>
                   <span class="crayon-v">res</span>
                   <span class="crayon-sy">)</span>
                   <span class="crayon-h"> </span>
                   <span class="crayon-sy">{</span>
                  </div>
                  <div class="crayon-line crayon-striped-line" id="crayon-59cd4daf9b397990434035-64">
                   <span class="crayon-h">&nbsp;&nbsp;</span>
                   <span class="crayon-v">req</span>
                   <span class="crayon-sy">.</span>
                   <span class="crayon-e">logout</span>
                   <span class="crayon-sy">(</span>
                   <span class="crayon-sy">)</span>
                   <span class="crayon-sy">;</span>
                  </div>
                  <div class="crayon-line" id="crayon-59cd4daf9b397990434035-65">
                   <span class="crayon-h">&nbsp;&nbsp;</span>
                   <span class="crayon-v">res</span>
                   <span class="crayon-sy">.</span>
                   <span class="crayon-e">redirect</span>
                   <span class="crayon-sy">(</span>
                   <span class="crayon-s">'/'</span>
                   <span class="crayon-sy">)</span>
                   <span class="crayon-sy">;</span>
                  </div>
                  <div class="crayon-line crayon-striped-line" id="crayon-59cd4daf9b397990434035-66">
                   <span class="crayon-sy">}</span>
                   <span class="crayon-sy">)</span>
                   <span class="crayon-sy">;</span>
                  </div>
                  <div class="crayon-line" id="crayon-59cd4daf9b397990434035-67">
                   &nbsp;
                  </div>
                  <div class="crayon-line crayon-striped-line" id="crayon-59cd4daf9b397990434035-68">
                   <span class="crayon-v">module</span>
                   <span class="crayon-sy">.</span>
                   <span class="crayon-v">exports</span>
                   <span class="crayon-h"> </span>
                   <span class="crayon-o">=</span>
                   <span class="crayon-h"> </span>
                   <span class="crayon-v">router</span>
                   <span class="crayon-sy">;</span>
                  </div>
                  <div class="crayon-line" id="crayon-59cd4daf9b397990434035-69">
                   &nbsp;
                  </div>
                 </div></td> 
               </tr> 
              </tbody>
             </table> 
            </div> 
           </div> 
           <p></p> 
           <p>This <code>auth.js</code> route file contains all the routes that handle user-specific stuff: registration, login, and logout.</p> 
           <p>Now that we’ve <em>created</em> our routes, we have to also plug them into the main <code>app.js</code> file so they’ll be used by express.</p> 
           <p>First, remove the existing routes near the top of your <code>app.js</code> file:</p> 
           <p></p> 
           <div id="crayon-59cd4daf9b39b156650363" class="crayon-syntax crayon-theme-stormpath crayon-font-monaco crayon-os-pc print-yes notranslate" data-settings=" minimize scroll-mouseover" style=" margin-top: 12px; margin-bottom: 12px; font-size: 12px !important; line-height: 15px !important;"> 
            <div class="crayon-plain-wrap">
             <textarea wrap="soft" class="crayon-plain print-no" data-settings="dblclick" readonly style="-moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4; font-size: 12px !important; line-height: 15px !important;">
app.use(passport.session());
app.use(flash());

// Remove these two lines.
var routes = require('./routes/index');
var users = require('./routes/users');
</textarea>
            </div> 
            <div class="crayon-main" style=""> 
             <table class="crayon-table"> 
              <tbody>
               <tr class="crayon-row"> 
                <td class="crayon-nums " data-settings="hide"> 
                 <div class="crayon-nums-content" style="font-size: 12px !important; line-height: 15px !important;">
                  <div class="crayon-num" data-line="crayon-59cd4daf9b39b156650363-1">
                   1
                  </div>
                  <div class="crayon-num crayon-striped-num" data-line="crayon-59cd4daf9b39b156650363-2">
                   2
                  </div>
                  <div class="crayon-num" data-line="crayon-59cd4daf9b39b156650363-3">
                   3
                  </div>
                  <div class="crayon-num crayon-striped-num" data-line="crayon-59cd4daf9b39b156650363-4">
                   4
                  </div>
                  <div class="crayon-num" data-line="crayon-59cd4daf9b39b156650363-5">
                   5
                  </div>
                  <div class="crayon-num crayon-striped-num" data-line="crayon-59cd4daf9b39b156650363-6">
                   6
                  </div>
                  <div class="crayon-num" data-line="crayon-59cd4daf9b39b156650363-7">
                   7
                  </div>
                 </div> </td> 
                <td class="crayon-code">
                 <div class="crayon-pre" style="font-size: 12px !important; line-height: 15px !important; -moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4;">
                  <div class="crayon-line" id="crayon-59cd4daf9b39b156650363-1">
                   <span class="crayon-v">app</span>
                   <span class="crayon-sy">.</span>
                   <span class="crayon-st">use</span>
                   <span class="crayon-sy">(</span>
                   <span class="crayon-v">passport</span>
                   <span class="crayon-sy">.</span>
                   <span class="crayon-e">session</span>
                   <span class="crayon-sy">(</span>
                   <span class="crayon-sy">)</span>
                   <span class="crayon-sy">)</span>
                   <span class="crayon-sy">;</span>
                  </div>
                  <div class="crayon-line crayon-striped-line" id="crayon-59cd4daf9b39b156650363-2">
                   <span class="crayon-v">app</span>
                   <span class="crayon-sy">.</span>
                   <span class="crayon-st">use</span>
                   <span class="crayon-sy">(</span>
                   <span class="crayon-e">flash</span>
                   <span class="crayon-sy">(</span>
                   <span class="crayon-sy">)</span>
                   <span class="crayon-sy">)</span>
                   <span class="crayon-sy">;</span>
                  </div>
                  <div class="crayon-line" id="crayon-59cd4daf9b39b156650363-3">
                   &nbsp;
                  </div>
                  <div class="crayon-line crayon-striped-line" id="crayon-59cd4daf9b39b156650363-4">
                   <span class="crayon-c">// Remove these two lines.</span>
                  </div>
                  <div class="crayon-line" id="crayon-59cd4daf9b39b156650363-5">
                   <span class="crayon-t">var</span>
                   <span class="crayon-h"> </span>
                   <span class="crayon-v">routes</span>
                   <span class="crayon-h"> </span>
                   <span class="crayon-o">=</span>
                   <span class="crayon-h"> </span>
                   <span class="crayon-e">require</span>
                   <span class="crayon-sy">(</span>
                   <span class="crayon-s">'./routes/index'</span>
                   <span class="crayon-sy">)</span>
                   <span class="crayon-sy">;</span>
                  </div>
                  <div class="crayon-line crayon-striped-line" id="crayon-59cd4daf9b39b156650363-6">
                   <span class="crayon-t">var</span>
                   <span class="crayon-h"> </span>
                   <span class="crayon-v">users</span>
                   <span class="crayon-h"> </span>
                   <span class="crayon-o">=</span>
                   <span class="crayon-h"> </span>
                   <span class="crayon-e">require</span>
                   <span class="crayon-sy">(</span>
                   <span class="crayon-s">'./routes/users'</span>
                   <span class="crayon-sy">)</span>
                   <span class="crayon-sy">;</span>
                  </div>
                  <div class="crayon-line" id="crayon-59cd4daf9b39b156650363-7">
                   &nbsp;
                  </div>
                 </div></td> 
               </tr> 
              </tbody>
             </table> 
            </div> 
           </div> 
           <p></p> 
           <p>Next, add in the following two lines to replace the ones you just removed:</p> 
           <p></p> 
           <div id="crayon-59cd4daf9b39f132669360" class="crayon-syntax crayon-theme-stormpath crayon-font-monaco crayon-os-pc print-yes notranslate" data-settings=" minimize scroll-mouseover" style=" margin-top: 12px; margin-bottom: 12px; font-size: 12px !important; line-height: 15px !important;"> 
            <div class="crayon-plain-wrap">
             <textarea wrap="soft" class="crayon-plain print-no" data-settings="dblclick" readonly style="-moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4; font-size: 12px !important; line-height: 15px !important;">
var index_routes = require('./routes/index');
var auth_routes = require('./routes/auth');
</textarea>
            </div> 
            <div class="crayon-main" style=""> 
             <table class="crayon-table"> 
              <tbody>
               <tr class="crayon-row"> 
                <td class="crayon-nums " data-settings="hide"> 
                 <div class="crayon-nums-content" style="font-size: 12px !important; line-height: 15px !important;">
                  <div class="crayon-num" data-line="crayon-59cd4daf9b39f132669360-1">
                   1
                  </div>
                  <div class="crayon-num crayon-striped-num" data-line="crayon-59cd4daf9b39f132669360-2">
                   2
                  </div>
                  <div class="crayon-num" data-line="crayon-59cd4daf9b39f132669360-3">
                   3
                  </div>
                 </div> </td> 
                <td class="crayon-code">
                 <div class="crayon-pre" style="font-size: 12px !important; line-height: 15px !important; -moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4;">
                  <div class="crayon-line" id="crayon-59cd4daf9b39f132669360-1">
                   <span class="crayon-t">var</span>
                   <span class="crayon-h"> </span>
                   <span class="crayon-v">index_routes</span>
                   <span class="crayon-h"> </span>
                   <span class="crayon-o">=</span>
                   <span class="crayon-h"> </span>
                   <span class="crayon-e">require</span>
                   <span class="crayon-sy">(</span>
                   <span class="crayon-s">'./routes/index'</span>
                   <span class="crayon-sy">)</span>
                   <span class="crayon-sy">;</span>
                  </div>
                  <div class="crayon-line crayon-striped-line" id="crayon-59cd4daf9b39f132669360-2">
                   <span class="crayon-t">var</span>
                   <span class="crayon-h"> </span>
                   <span class="crayon-v">auth_routes</span>
                   <span class="crayon-h"> </span>
                   <span class="crayon-o">=</span>
                   <span class="crayon-h"> </span>
                   <span class="crayon-e">require</span>
                   <span class="crayon-sy">(</span>
                   <span class="crayon-s">'./routes/auth'</span>
                   <span class="crayon-sy">)</span>
                   <span class="crayon-sy">;</span>
                  </div>
                  <div class="crayon-line" id="crayon-59cd4daf9b39f132669360-3">
                   &nbsp;
                  </div>
                 </div></td> 
               </tr> 
              </tbody>
             </table> 
            </div> 
           </div> 
           <p></p> 
           <p>After importing the routes, we’ll also need to bind them to express’ URL routing mechanism:</p> 
           <p></p> 
           <div id="crayon-59cd4daf9b3a2835555708" class="crayon-syntax crayon-theme-stormpath crayon-font-monaco crayon-os-pc print-yes notranslate" data-settings=" minimize scroll-mouseover" style=" margin-top: 12px; margin-bottom: 12px; font-size: 12px !important; line-height: 15px !important;"> 
            <div class="crayon-plain-wrap">
             <textarea wrap="soft" class="crayon-plain print-no" data-settings="dblclick" readonly style="-moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4; font-size: 12px !important; line-height: 15px !important;">
app.use(passport.session());
app.use(flash());

// Specify the routes here.
app.use('/', index_routes);
app.use('/', auth_routes);
</textarea>
            </div> 
            <div class="crayon-main" style=""> 
             <table class="crayon-table"> 
              <tbody>
               <tr class="crayon-row"> 
                <td class="crayon-nums " data-settings="hide"> 
                 <div class="crayon-nums-content" style="font-size: 12px !important; line-height: 15px !important;">
                  <div class="crayon-num" data-line="crayon-59cd4daf9b3a2835555708-1">
                   1
                  </div>
                  <div class="crayon-num crayon-striped-num" data-line="crayon-59cd4daf9b3a2835555708-2">
                   2
                  </div>
                  <div class="crayon-num" data-line="crayon-59cd4daf9b3a2835555708-3">
                   3
                  </div>
                  <div class="crayon-num crayon-striped-num" data-line="crayon-59cd4daf9b3a2835555708-4">
                   4
                  </div>
                  <div class="crayon-num" data-line="crayon-59cd4daf9b3a2835555708-5">
                   5
                  </div>
                  <div class="crayon-num crayon-striped-num" data-line="crayon-59cd4daf9b3a2835555708-6">
                   6
                  </div>
                  <div class="crayon-num" data-line="crayon-59cd4daf9b3a2835555708-7">
                   7
                  </div>
                 </div> </td> 
                <td class="crayon-code">
                 <div class="crayon-pre" style="font-size: 12px !important; line-height: 15px !important; -moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4;">
                  <div class="crayon-line" id="crayon-59cd4daf9b3a2835555708-1">
                   <span class="crayon-v">app</span>
                   <span class="crayon-sy">.</span>
                   <span class="crayon-st">use</span>
                   <span class="crayon-sy">(</span>
                   <span class="crayon-v">passport</span>
                   <span class="crayon-sy">.</span>
                   <span class="crayon-e">session</span>
                   <span class="crayon-sy">(</span>
                   <span class="crayon-sy">)</span>
                   <span class="crayon-sy">)</span>
                   <span class="crayon-sy">;</span>
                  </div>
                  <div class="crayon-line crayon-striped-line" id="crayon-59cd4daf9b3a2835555708-2">
                   <span class="crayon-v">app</span>
                   <span class="crayon-sy">.</span>
                   <span class="crayon-st">use</span>
                   <span class="crayon-sy">(</span>
                   <span class="crayon-e">flash</span>
                   <span class="crayon-sy">(</span>
                   <span class="crayon-sy">)</span>
                   <span class="crayon-sy">)</span>
                   <span class="crayon-sy">;</span>
                  </div>
                  <div class="crayon-line" id="crayon-59cd4daf9b3a2835555708-3">
                   &nbsp;
                  </div>
                  <div class="crayon-line crayon-striped-line" id="crayon-59cd4daf9b3a2835555708-4">
                   <span class="crayon-c">// Specify the routes here.</span>
                  </div>
                  <div class="crayon-line" id="crayon-59cd4daf9b3a2835555708-5">
                   <span class="crayon-v">app</span>
                   <span class="crayon-sy">.</span>
                   <span class="crayon-st">use</span>
                   <span class="crayon-sy">(</span>
                   <span class="crayon-s">'/'</span>
                   <span class="crayon-sy">,</span>
                   <span class="crayon-h"> </span>
                   <span class="crayon-v">index_routes</span>
                   <span class="crayon-sy">)</span>
                   <span class="crayon-sy">;</span>
                  </div>
                  <div class="crayon-line crayon-striped-line" id="crayon-59cd4daf9b3a2835555708-6">
                   <span class="crayon-v">app</span>
                   <span class="crayon-sy">.</span>
                   <span class="crayon-st">use</span>
                   <span class="crayon-sy">(</span>
                   <span class="crayon-s">'/'</span>
                   <span class="crayon-sy">,</span>
                   <span class="crayon-h"> </span>
                   <span class="crayon-v">auth_routes</span>
                   <span class="crayon-sy">)</span>
                   <span class="crayon-sy">;</span>
                  </div>
                  <div class="crayon-line" id="crayon-59cd4daf9b3a2835555708-7">
                   &nbsp;
                  </div>
                 </div></td> 
               </tr> 
              </tbody>
             </table> 
            </div> 
           </div> 
           <p></p> 
           <p>Then, delete the existing routes that were there — the lines you’ll want to remove are the following:</p> 
           <p></p> 
           <div id="crayon-59cd4daf9b3a4062871056" class="crayon-syntax crayon-theme-stormpath crayon-font-monaco crayon-os-pc print-yes notranslate" data-settings=" minimize scroll-mouseover" style=" margin-top: 12px; margin-bottom: 12px; font-size: 12px !important; line-height: 15px !important;"> 
            <div class="crayon-plain-wrap">
             <textarea wrap="soft" class="crayon-plain print-no" data-settings="dblclick" readonly style="-moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4; font-size: 12px !important; line-height: 15px !important;">
// Remove these two lines:
app.use('/', routes);
app.use('/users', users);
</textarea>
            </div> 
            <div class="crayon-main" style=""> 
             <table class="crayon-table"> 
              <tbody>
               <tr class="crayon-row"> 
                <td class="crayon-nums " data-settings="hide"> 
                 <div class="crayon-nums-content" style="font-size: 12px !important; line-height: 15px !important;">
                  <div class="crayon-num" data-line="crayon-59cd4daf9b3a4062871056-1">
                   1
                  </div>
                  <div class="crayon-num crayon-striped-num" data-line="crayon-59cd4daf9b3a4062871056-2">
                   2
                  </div>
                  <div class="crayon-num" data-line="crayon-59cd4daf9b3a4062871056-3">
                   3
                  </div>
                  <div class="crayon-num crayon-striped-num" data-line="crayon-59cd4daf9b3a4062871056-4">
                   4
                  </div>
                 </div> </td> 
                <td class="crayon-code">
                 <div class="crayon-pre" style="font-size: 12px !important; line-height: 15px !important; -moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4;">
                  <div class="crayon-line" id="crayon-59cd4daf9b3a4062871056-1">
                   <span class="crayon-c">// Remove these two lines:</span>
                  </div>
                  <div class="crayon-line crayon-striped-line" id="crayon-59cd4daf9b3a4062871056-2">
                   <span class="crayon-v">app</span>
                   <span class="crayon-sy">.</span>
                   <span class="crayon-st">use</span>
                   <span class="crayon-sy">(</span>
                   <span class="crayon-s">'/'</span>
                   <span class="crayon-sy">,</span>
                   <span class="crayon-h"> </span>
                   <span class="crayon-v">routes</span>
                   <span class="crayon-sy">)</span>
                   <span class="crayon-sy">;</span>
                  </div>
                  <div class="crayon-line" id="crayon-59cd4daf9b3a4062871056-3">
                   <span class="crayon-v">app</span>
                   <span class="crayon-sy">.</span>
                   <span class="crayon-st">use</span>
                   <span class="crayon-sy">(</span>
                   <span class="crayon-s">'/users'</span>
                   <span class="crayon-sy">,</span>
                   <span class="crayon-h"> </span>
                   <span class="crayon-v">users</span>
                   <span class="crayon-sy">)</span>
                   <span class="crayon-sy">;</span>
                  </div>
                  <div class="crayon-line crayon-striped-line" id="crayon-59cd4daf9b3a4062871056-4">
                   &nbsp;
                  </div>
                 </div></td> 
               </tr> 
              </tbody>
             </table> 
            </div> 
           </div> 
           <p></p> 
           <p>And with the changes above made — we’ve just successfully finished writing our routes! In the next section, we’ll dive into understanding the routes, and explain why things work the way they do.</p> 
           <h2 id="understanding-the-routes">Understanding the Routes<a href="#understanding-the-routes" class="heading-link"><i class="stp-icons stp-icon-link2"></i></a></h2> 
           <p>Now that we’ve defined our routes let’s see how they work!</p> 
           <h3 id="the-home-page-route">The Home Page Route<a href="#the-home-page-route" class="heading-link"><i class="stp-icons stp-icon-link2"></i></a></h3> 
           <p>Let’s start by looking at the home page route:</p> 
           <p></p> 
           <div id="crayon-59cd4daf9b3a7594073769" class="crayon-syntax crayon-theme-stormpath crayon-font-monaco crayon-os-pc print-yes notranslate" data-settings=" minimize scroll-mouseover" style=" margin-top: 12px; margin-bottom: 12px; font-size: 12px !important; line-height: 15px !important;"> 
            <div class="crayon-plain-wrap">
             <textarea wrap="soft" class="crayon-plain print-no" data-settings="dblclick" readonly style="-moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4; font-size: 12px !important; line-height: 15px !important;">
// Render the home page.
router.get('/', function(req, res) {
  res.render('index', { title: 'Home', user: req.user });
});
</textarea>
            </div> 
            <div class="crayon-main" style=""> 
             <table class="crayon-table"> 
              <tbody>
               <tr class="crayon-row"> 
                <td class="crayon-nums " data-settings="hide"> 
                 <div class="crayon-nums-content" style="font-size: 12px !important; line-height: 15px !important;">
                  <div class="crayon-num" data-line="crayon-59cd4daf9b3a7594073769-1">
                   1
                  </div>
                  <div class="crayon-num crayon-striped-num" data-line="crayon-59cd4daf9b3a7594073769-2">
                   2
                  </div>
                  <div class="crayon-num" data-line="crayon-59cd4daf9b3a7594073769-3">
                   3
                  </div>
                  <div class="crayon-num crayon-striped-num" data-line="crayon-59cd4daf9b3a7594073769-4">
                   4
                  </div>
                  <div class="crayon-num" data-line="crayon-59cd4daf9b3a7594073769-5">
                   5
                  </div>
                 </div> </td> 
                <td class="crayon-code">
                 <div class="crayon-pre" style="font-size: 12px !important; line-height: 15px !important; -moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4;">
                  <div class="crayon-line" id="crayon-59cd4daf9b3a7594073769-1">
                   <span class="crayon-c">// Render the home page.</span>
                  </div>
                  <div class="crayon-line crayon-striped-line" id="crayon-59cd4daf9b3a7594073769-2">
                   <span class="crayon-v">router</span>
                   <span class="crayon-sy">.</span>
                   <span class="crayon-e">get</span>
                   <span class="crayon-sy">(</span>
                   <span class="crayon-s">'/'</span>
                   <span class="crayon-sy">,</span>
                   <span class="crayon-h"> </span>
                   <span class="crayon-t">function</span>
                   <span class="crayon-sy">(</span>
                   <span class="crayon-v">req</span>
                   <span class="crayon-sy">,</span>
                   <span class="crayon-h"> </span>
                   <span class="crayon-v">res</span>
                   <span class="crayon-sy">)</span>
                   <span class="crayon-h"> </span>
                   <span class="crayon-sy">{</span>
                  </div>
                  <div class="crayon-line" id="crayon-59cd4daf9b3a7594073769-3">
                   <span class="crayon-h">&nbsp;&nbsp;</span>
                   <span class="crayon-v">res</span>
                   <span class="crayon-sy">.</span>
                   <span class="crayon-e">render</span>
                   <span class="crayon-sy">(</span>
                   <span class="crayon-s">'index'</span>
                   <span class="crayon-sy">,</span>
                   <span class="crayon-h"> </span>
                   <span class="crayon-sy">{</span>
                   <span class="crayon-h"> </span>
                   <span class="crayon-v">title</span>
                   <span class="crayon-o">:</span>
                   <span class="crayon-h"> </span>
                   <span class="crayon-s">'Home'</span>
                   <span class="crayon-sy">,</span>
                   <span class="crayon-h"> </span>
                   <span class="crayon-v">user</span>
                   <span class="crayon-o">:</span>
                   <span class="crayon-h"> </span>
                   <span class="crayon-v">req</span>
                   <span class="crayon-sy">.</span>
                   <span class="crayon-i">user</span>
                   <span class="crayon-h"> </span>
                   <span class="crayon-sy">}</span>
                   <span class="crayon-sy">)</span>
                   <span class="crayon-sy">;</span>
                  </div>
                  <div class="crayon-line crayon-striped-line" id="crayon-59cd4daf9b3a7594073769-4">
                   <span class="crayon-sy">}</span>
                   <span class="crayon-sy">)</span>
                   <span class="crayon-sy">;</span>
                  </div>
                  <div class="crayon-line" id="crayon-59cd4daf9b3a7594073769-5">
                   &nbsp;
                  </div>
                 </div></td> 
               </tr> 
              </tbody>
             </table> 
            </div> 
           </div> 
           <p></p> 
           <p>The home page route isn’t doing much other than rendering a template (<em>which we have yet to create!</em>), and passing in some variable values.</p> 
           <p>The important thing to note here is the <code>title</code> and <code>user</code> values. We’ll use the <code>title</code> variable in our template to generate a nice HTML title for the page. We’ll also use the <code>user</code> variable to tell us whether or not the person viewing the home page is a user or not.</p> 
           <p>If the person viewing the page IS a user, then instead of displaying a Login button on the website, we’ll just display a link to the Dashboard page.</p> 
           <p>The <code>req.user</code> variable is automatically populated for us by passport. It will either be <code>undefined</code>, or a JSON object of this user’s account.</p> 
           <h3 id="the-dashboard-route">The Dashboard Route<a href="#the-dashboard-route" class="heading-link"><i class="stp-icons stp-icon-link2"></i></a></h3> 
           <p>The dashboard route is also quite simple:</p> 
           <p></p> 
           <div id="crayon-59cd4daf9b3aa451492117" class="crayon-syntax crayon-theme-stormpath crayon-font-monaco crayon-os-pc print-yes notranslate" data-settings=" minimize scroll-mouseover" style=" margin-top: 12px; margin-bottom: 12px; font-size: 12px !important; line-height: 15px !important;"> 
            <div class="crayon-plain-wrap">
             <textarea wrap="soft" class="crayon-plain print-no" data-settings="dblclick" readonly style="-moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4; font-size: 12px !important; line-height: 15px !important;">
// Render the dashboard page.
router.get('/dashboard', function (req, res) {
  if (!req.user || req.user.status !== 'ENABLED') {
    return res.redirect('/login');
  }

  res.render('dashboard', {
    title: 'Dashboard',
    user: req.user,
  });
});
</textarea>
            </div> 
            <div class="crayon-main" style=""> 
             <table class="crayon-table"> 
              <tbody>
               <tr class="crayon-row"> 
                <td class="crayon-nums " data-settings="hide"> 
                 <div class="crayon-nums-content" style="font-size: 12px !important; line-height: 15px !important;">
                  <div class="crayon-num" data-line="crayon-59cd4daf9b3aa451492117-1">
                   1
                  </div>
                  <div class="crayon-num crayon-striped-num" data-line="crayon-59cd4daf9b3aa451492117-2">
                   2
                  </div>
                  <div class="crayon-num" data-line="crayon-59cd4daf9b3aa451492117-3">
                   3
                  </div>
                  <div class="crayon-num crayon-striped-num" data-line="crayon-59cd4daf9b3aa451492117-4">
                   4
                  </div>
                  <div class="crayon-num" data-line="crayon-59cd4daf9b3aa451492117-5">
                   5
                  </div>
                  <div class="crayon-num crayon-striped-num" data-line="crayon-59cd4daf9b3aa451492117-6">
                   6
                  </div>
                  <div class="crayon-num" data-line="crayon-59cd4daf9b3aa451492117-7">
                   7
                  </div>
                  <div class="crayon-num crayon-striped-num" data-line="crayon-59cd4daf9b3aa451492117-8">
                   8
                  </div>
                  <div class="crayon-num" data-line="crayon-59cd4daf9b3aa451492117-9">
                   9
                  </div>
                  <div class="crayon-num crayon-striped-num" data-line="crayon-59cd4daf9b3aa451492117-10">
                   10
                  </div>
                  <div class="crayon-num" data-line="crayon-59cd4daf9b3aa451492117-11">
                   11
                  </div>
                  <div class="crayon-num crayon-striped-num" data-line="crayon-59cd4daf9b3aa451492117-12">
                   12
                  </div>
                 </div> </td> 
                <td class="crayon-code">
                 <div class="crayon-pre" style="font-size: 12px !important; line-height: 15px !important; -moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4;">
                  <div class="crayon-line" id="crayon-59cd4daf9b3aa451492117-1">
                   <span class="crayon-c">// Render the dashboard page.</span>
                  </div>
                  <div class="crayon-line crayon-striped-line" id="crayon-59cd4daf9b3aa451492117-2">
                   <span class="crayon-v">router</span>
                   <span class="crayon-sy">.</span>
                   <span class="crayon-e">get</span>
                   <span class="crayon-sy">(</span>
                   <span class="crayon-s">'/dashboard'</span>
                   <span class="crayon-sy">,</span>
                   <span class="crayon-h"> </span>
                   <span class="crayon-t">function</span>
                   <span class="crayon-h"> </span>
                   <span class="crayon-sy">(</span>
                   <span class="crayon-v">req</span>
                   <span class="crayon-sy">,</span>
                   <span class="crayon-h"> </span>
                   <span class="crayon-v">res</span>
                   <span class="crayon-sy">)</span>
                   <span class="crayon-h"> </span>
                   <span class="crayon-sy">{</span>
                  </div>
                  <div class="crayon-line" id="crayon-59cd4daf9b3aa451492117-3">
                   <span class="crayon-h">&nbsp;&nbsp;</span>
                   <span class="crayon-st">if</span>
                   <span class="crayon-h"> </span>
                   <span class="crayon-sy">(</span>
                   <span class="crayon-o">!</span>
                   <span class="crayon-v">req</span>
                   <span class="crayon-sy">.</span>
                   <span class="crayon-v">user</span>
                   <span class="crayon-h"> </span>
                   <span class="crayon-o">||</span>
                   <span class="crayon-h"> </span>
                   <span class="crayon-v">req</span>
                   <span class="crayon-sy">.</span>
                   <span class="crayon-v">user</span>
                   <span class="crayon-sy">.</span>
                   <span class="crayon-v">status</span>
                   <span class="crayon-h"> </span>
                   <span class="crayon-o">!==</span>
                   <span class="crayon-h"> </span>
                   <span class="crayon-s">'ENABLED'</span>
                   <span class="crayon-sy">)</span>
                   <span class="crayon-h"> </span>
                   <span class="crayon-sy">{</span>
                  </div>
                  <div class="crayon-line crayon-striped-line" id="crayon-59cd4daf9b3aa451492117-4">
                   <span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;</span>
                   <span class="crayon-st">return</span>
                   <span class="crayon-h"> </span>
                   <span class="crayon-v">res</span>
                   <span class="crayon-sy">.</span>
                   <span class="crayon-e">redirect</span>
                   <span class="crayon-sy">(</span>
                   <span class="crayon-s">'/login'</span>
                   <span class="crayon-sy">)</span>
                   <span class="crayon-sy">;</span>
                  </div>
                  <div class="crayon-line" id="crayon-59cd4daf9b3aa451492117-5">
                   <span class="crayon-h">&nbsp;&nbsp;</span>
                   <span class="crayon-sy">}</span>
                  </div>
                  <div class="crayon-line crayon-striped-line" id="crayon-59cd4daf9b3aa451492117-6">
                   &nbsp;
                  </div>
                  <div class="crayon-line" id="crayon-59cd4daf9b3aa451492117-7">
                   <span class="crayon-h">&nbsp;&nbsp;</span>
                   <span class="crayon-v">res</span>
                   <span class="crayon-sy">.</span>
                   <span class="crayon-e">render</span>
                   <span class="crayon-sy">(</span>
                   <span class="crayon-s">'dashboard'</span>
                   <span class="crayon-sy">,</span>
                   <span class="crayon-h"> </span>
                   <span class="crayon-sy">{</span>
                  </div>
                  <div class="crayon-line crayon-striped-line" id="crayon-59cd4daf9b3aa451492117-8">
                   <span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;</span>
                   <span class="crayon-v">title</span>
                   <span class="crayon-o">:</span>
                   <span class="crayon-h"> </span>
                   <span class="crayon-s">'Dashboard'</span>
                   <span class="crayon-sy">,</span>
                  </div>
                  <div class="crayon-line" id="crayon-59cd4daf9b3aa451492117-9">
                   <span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;</span>
                   <span class="crayon-v">user</span>
                   <span class="crayon-o">:</span>
                   <span class="crayon-h"> </span>
                   <span class="crayon-v">req</span>
                   <span class="crayon-sy">.</span>
                   <span class="crayon-v">user</span>
                   <span class="crayon-sy">,</span>
                  </div>
                  <div class="crayon-line crayon-striped-line" id="crayon-59cd4daf9b3aa451492117-10">
                   <span class="crayon-h">&nbsp;&nbsp;</span>
                   <span class="crayon-sy">}</span>
                   <span class="crayon-sy">)</span>
                   <span class="crayon-sy">;</span>
                  </div>
                  <div class="crayon-line" id="crayon-59cd4daf9b3aa451492117-11">
                   <span class="crayon-sy">}</span>
                   <span class="crayon-sy">)</span>
                   <span class="crayon-sy">;</span>
                  </div>
                  <div class="crayon-line crayon-striped-line" id="crayon-59cd4daf9b3aa451492117-12">
                   &nbsp;
                  </div>
                 </div></td> 
               </tr> 
              </tbody>
             </table> 
            </div> 
           </div> 
           <p></p> 
           <p>The first thing we’ll do here is check to see if the person viewing this page is a user, and then, if their account is enabled or not (<em>Stormpath allows you to have users that disabled</em>).</p> 
           <p>If the person viewing our dashboard page isn’t a valid user, we’ll redirect the user to the login page.</p> 
           <p>If the person IS a valid user, we’ll render our dashboard page (<em>simple — right?</em>).</p> 
           <h3 id="the-registration-route">The Registration Route<a href="#the-registration-route" class="heading-link"><i class="stp-icons stp-icon-link2"></i></a></h3> 
           <p>Now we’ll dive into the authentication routes. We’ll start by looking at our registration route — which is responsible for signing up new users.</p> 
           <p></p> 
           <div id="crayon-59cd4daf9b3ae779710580" class="crayon-syntax crayon-theme-stormpath crayon-font-monaco crayon-os-pc print-yes notranslate" data-settings=" minimize scroll-mouseover" style=" margin-top: 12px; margin-bottom: 12px; font-size: 12px !important; line-height: 15px !important;"> 
            <div class="crayon-plain-wrap">
             <textarea wrap="soft" class="crayon-plain print-no" data-settings="dblclick" readonly style="-moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4; font-size: 12px !important; line-height: 15px !important;">
// Render the registration page.
router.get('/register', function(req, res) {
  res.render('register', { title: 'Register', error: req.flash('error')[0] });
});

// Register a new user to Stormpath.
router.post('/register', function(req, res) {
  var username = req.body.username;
  var password = req.body.password;

  // Grab user fields.
  if (!username || !password) {
    return res.render('register', { title: 'Register', error: 'Email and password required.' });
  }

  // Initialize our Stormpath client.
  var apiKey = new stormpath.ApiKey(
    process.env['STORMPATH_API_KEY_ID'],
    process.env['STORMPATH_API_KEY_SECRET']
  );
  var spClient = new stormpath.Client({ apiKey: apiKey });

  // Grab our app, then attempt to create this user's account.
  spClient.getApplication(process.env['STORMPATH_APP_HREF'], function(err, app) {
    if (err) throw err;

    app.createAccount({
      givenName: 'John',
      surname: 'Smith',
      username: username,
      email: username,
      password: password
    }, function (err, createdAccount) {
      if (err) {
        return res.render('register', {title: 'Register', error: err.userMessage});
      }

      passport.authenticate('stormpath')(req, res, function () {
        return res.redirect('/dashboard');
      });
    });
  });
});
</textarea>
            </div> 
            <div class="crayon-main" style=""> 
             <table class="crayon-table"> 
              <tbody>
               <tr class="crayon-row"> 
                <td class="crayon-nums " data-settings="hide"> 
                 <div class="crayon-nums-content" style="font-size: 12px !important; line-height: 15px !important;">
                  <div class="crayon-num" data-line="crayon-59cd4daf9b3ae779710580-1">
                   1
                  </div>
                  <div class="crayon-num crayon-striped-num" data-line="crayon-59cd4daf9b3ae779710580-2">
                   2
                  </div>
                  <div class="crayon-num" data-line="crayon-59cd4daf9b3ae779710580-3">
                   3
                  </div>
                  <div class="crayon-num crayon-striped-num" data-line="crayon-59cd4daf9b3ae779710580-4">
                   4
                  </div>
                  <div class="crayon-num" data-line="crayon-59cd4daf9b3ae779710580-5">
                   5
                  </div>
                  <div class="crayon-num crayon-striped-num" data-line="crayon-59cd4daf9b3ae779710580-6">
                   6
                  </div>
                  <div class="crayon-num" data-line="crayon-59cd4daf9b3ae779710580-7">
                   7
                  </div>
                  <div class="crayon-num crayon-striped-num" data-line="crayon-59cd4daf9b3ae779710580-8">
                   8
                  </div>
                  <div class="crayon-num" data-line="crayon-59cd4daf9b3ae779710580-9">
                   9
                  </div>
                  <div class="crayon-num crayon-striped-num" data-line="crayon-59cd4daf9b3ae779710580-10">
                   10
                  </div>
                  <div class="crayon-num" data-line="crayon-59cd4daf9b3ae779710580-11">
                   11
                  </div>
                  <div class="crayon-num crayon-striped-num" data-line="crayon-59cd4daf9b3ae779710580-12">
                   12
                  </div>
                  <div class="crayon-num" data-line="crayon-59cd4daf9b3ae779710580-13">
                   13
                  </div>
                  <div class="crayon-num crayon-striped-num" data-line="crayon-59cd4daf9b3ae779710580-14">
                   14
                  </div>
                  <div class="crayon-num" data-line="crayon-59cd4daf9b3ae779710580-15">
                   15
                  </div>
                  <div class="crayon-num crayon-striped-num" data-line="crayon-59cd4daf9b3ae779710580-16">
                   16
                  </div>
                  <div class="crayon-num" data-line="crayon-59cd4daf9b3ae779710580-17">
                   17
                  </div>
                  <div class="crayon-num crayon-striped-num" data-line="crayon-59cd4daf9b3ae779710580-18">
                   18
                  </div>
                  <div class="crayon-num" data-line="crayon-59cd4daf9b3ae779710580-19">
                   19
                  </div>
                  <div class="crayon-num crayon-striped-num" data-line="crayon-59cd4daf9b3ae779710580-20">
                   20
                  </div>
                  <div class="crayon-num" data-line="crayon-59cd4daf9b3ae779710580-21">
                   21
                  </div>
                  <div class="crayon-num crayon-striped-num" data-line="crayon-59cd4daf9b3ae779710580-22">
                   22
                  </div>
                  <div class="crayon-num" data-line="crayon-59cd4daf9b3ae779710580-23">
                   23
                  </div>
                  <div class="crayon-num crayon-striped-num" data-line="crayon-59cd4daf9b3ae779710580-24">
                   24
                  </div>
                  <div class="crayon-num" data-line="crayon-59cd4daf9b3ae779710580-25">
                   25
                  </div>
                  <div class="crayon-num crayon-striped-num" data-line="crayon-59cd4daf9b3ae779710580-26">
                   26
                  </div>
                  <div class="crayon-num" data-line="crayon-59cd4daf9b3ae779710580-27">
                   27
                  </div>
                  <div class="crayon-num crayon-striped-num" data-line="crayon-59cd4daf9b3ae779710580-28">
                   28
                  </div>
                  <div class="crayon-num" data-line="crayon-59cd4daf9b3ae779710580-29">
                   29
                  </div>
                  <div class="crayon-num crayon-striped-num" data-line="crayon-59cd4daf9b3ae779710580-30">
                   30
                  </div>
                  <div class="crayon-num" data-line="crayon-59cd4daf9b3ae779710580-31">
                   31
                  </div>
                  <div class="crayon-num crayon-striped-num" data-line="crayon-59cd4daf9b3ae779710580-32">
                   32
                  </div>
                  <div class="crayon-num" data-line="crayon-59cd4daf9b3ae779710580-33">
                   33
                  </div>
                  <div class="crayon-num crayon-striped-num" data-line="crayon-59cd4daf9b3ae779710580-34">
                   34
                  </div>
                  <div class="crayon-num" data-line="crayon-59cd4daf9b3ae779710580-35">
                   35
                  </div>
                  <div class="crayon-num crayon-striped-num" data-line="crayon-59cd4daf9b3ae779710580-36">
                   36
                  </div>
                  <div class="crayon-num" data-line="crayon-59cd4daf9b3ae779710580-37">
                   37
                  </div>
                  <div class="crayon-num crayon-striped-num" data-line="crayon-59cd4daf9b3ae779710580-38">
                   38
                  </div>
                  <div class="crayon-num" data-line="crayon-59cd4daf9b3ae779710580-39">
                   39
                  </div>
                  <div class="crayon-num crayon-striped-num" data-line="crayon-59cd4daf9b3ae779710580-40">
                   40
                  </div>
                  <div class="crayon-num" data-line="crayon-59cd4daf9b3ae779710580-41">
                   41
                  </div>
                  <div class="crayon-num crayon-striped-num" data-line="crayon-59cd4daf9b3ae779710580-42">
                   42
                  </div>
                  <div class="crayon-num" data-line="crayon-59cd4daf9b3ae779710580-43">
                   43
                  </div>
                  <div class="crayon-num crayon-striped-num" data-line="crayon-59cd4daf9b3ae779710580-44">
                   44
                  </div>
                 </div> </td> 
                <td class="crayon-code">
                 <div class="crayon-pre" style="font-size: 12px !important; line-height: 15px !important; -moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4;">
                  <div class="crayon-line" id="crayon-59cd4daf9b3ae779710580-1">
                   <span class="crayon-c">// Render the registration page.</span>
                  </div>
                  <div class="crayon-line crayon-striped-line" id="crayon-59cd4daf9b3ae779710580-2">
                   <span class="crayon-v">router</span>
                   <span class="crayon-sy">.</span>
                   <span class="crayon-e">get</span>
                   <span class="crayon-sy">(</span>
                   <span class="crayon-s">'/register'</span>
                   <span class="crayon-sy">,</span>
                   <span class="crayon-h"> </span>
                   <span class="crayon-t">function</span>
                   <span class="crayon-sy">(</span>
                   <span class="crayon-v">req</span>
                   <span class="crayon-sy">,</span>
                   <span class="crayon-h"> </span>
                   <span class="crayon-v">res</span>
                   <span class="crayon-sy">)</span>
                   <span class="crayon-h"> </span>
                   <span class="crayon-sy">{</span>
                  </div>
                  <div class="crayon-line" id="crayon-59cd4daf9b3ae779710580-3">
                   <span class="crayon-h">&nbsp;&nbsp;</span>
                   <span class="crayon-v">res</span>
                   <span class="crayon-sy">.</span>
                   <span class="crayon-e">render</span>
                   <span class="crayon-sy">(</span>
                   <span class="crayon-s">'register'</span>
                   <span class="crayon-sy">,</span>
                   <span class="crayon-h"> </span>
                   <span class="crayon-sy">{</span>
                   <span class="crayon-h"> </span>
                   <span class="crayon-v">title</span>
                   <span class="crayon-o">:</span>
                   <span class="crayon-h"> </span>
                   <span class="crayon-s">'Register'</span>
                   <span class="crayon-sy">,</span>
                   <span class="crayon-h"> </span>
                   <span class="crayon-v">error</span>
                   <span class="crayon-o">:</span>
                   <span class="crayon-h"> </span>
                   <span class="crayon-v">req</span>
                   <span class="crayon-sy">.</span>
                   <span class="crayon-e">flash</span>
                   <span class="crayon-sy">(</span>
                   <span class="crayon-s">'error'</span>
                   <span class="crayon-sy">)</span>
                   <span class="crayon-sy">[</span>
                   <span class="crayon-cn">0</span>
                   <span class="crayon-sy">]</span>
                   <span class="crayon-h"> </span>
                   <span class="crayon-sy">}</span>
                   <span class="crayon-sy">)</span>
                   <span class="crayon-sy">;</span>
                  </div>
                  <div class="crayon-line crayon-striped-line" id="crayon-59cd4daf9b3ae779710580-4">
                   <span class="crayon-sy">}</span>
                   <span class="crayon-sy">)</span>
                   <span class="crayon-sy">;</span>
                  </div>
                  <div class="crayon-line" id="crayon-59cd4daf9b3ae779710580-5">
                   &nbsp;
                  </div>
                  <div class="crayon-line crayon-striped-line" id="crayon-59cd4daf9b3ae779710580-6">
                   <span class="crayon-c">// Register a new user to Stormpath.</span>
                  </div>
                  <div class="crayon-line" id="crayon-59cd4daf9b3ae779710580-7">
                   <span class="crayon-v">router</span>
                   <span class="crayon-sy">.</span>
                   <span class="crayon-e">post</span>
                   <span class="crayon-sy">(</span>
                   <span class="crayon-s">'/register'</span>
                   <span class="crayon-sy">,</span>
                   <span class="crayon-h"> </span>
                   <span class="crayon-t">function</span>
                   <span class="crayon-sy">(</span>
                   <span class="crayon-v">req</span>
                   <span class="crayon-sy">,</span>
                   <span class="crayon-h"> </span>
                   <span class="crayon-v">res</span>
                   <span class="crayon-sy">)</span>
                   <span class="crayon-h"> </span>
                   <span class="crayon-sy">{</span>
                  </div>
                  <div class="crayon-line crayon-striped-line" id="crayon-59cd4daf9b3ae779710580-8">
                   <span class="crayon-h">&nbsp;&nbsp;</span>
                   <span class="crayon-t">var</span>
                   <span class="crayon-h"> </span>
                   <span class="crayon-v">username</span>
                   <span class="crayon-h"> </span>
                   <span class="crayon-o">=</span>
                   <span class="crayon-h"> </span>
                   <span class="crayon-v">req</span>
                   <span class="crayon-sy">.</span>
                   <span class="crayon-v">body</span>
                   <span class="crayon-sy">.</span>
                   <span class="crayon-v">username</span>
                   <span class="crayon-sy">;</span>
                  </div>
                  <div class="crayon-line" id="crayon-59cd4daf9b3ae779710580-9">
                   <span class="crayon-h">&nbsp;&nbsp;</span>
                   <span class="crayon-t">var</span>
                   <span class="crayon-h"> </span>
                   <span class="crayon-v">password</span>
                   <span class="crayon-h"> </span>
                   <span class="crayon-o">=</span>
                   <span class="crayon-h"> </span>
                   <span class="crayon-v">req</span>
                   <span class="crayon-sy">.</span>
                   <span class="crayon-v">body</span>
                   <span class="crayon-sy">.</span>
                   <span class="crayon-v">password</span>
                   <span class="crayon-sy">;</span>
                  </div>
                  <div class="crayon-line crayon-striped-line" id="crayon-59cd4daf9b3ae779710580-10">
                   &nbsp;
                  </div>
                  <div class="crayon-line" id="crayon-59cd4daf9b3ae779710580-11">
                   <span class="crayon-h">&nbsp;&nbsp;</span>
                   <span class="crayon-c">// Grab user fields.</span>
                  </div>
                  <div class="crayon-line crayon-striped-line" id="crayon-59cd4daf9b3ae779710580-12">
                   <span class="crayon-h">&nbsp;&nbsp;</span>
                   <span class="crayon-st">if</span>
                   <span class="crayon-h"> </span>
                   <span class="crayon-sy">(</span>
                   <span class="crayon-o">!</span>
                   <span class="crayon-v">username</span>
                   <span class="crayon-h"> </span>
                   <span class="crayon-o">||</span>
                   <span class="crayon-h"> </span>
                   <span class="crayon-o">!</span>
                   <span class="crayon-v">password</span>
                   <span class="crayon-sy">)</span>
                   <span class="crayon-h"> </span>
                   <span class="crayon-sy">{</span>
                  </div>
                  <div class="crayon-line" id="crayon-59cd4daf9b3ae779710580-13">
                   <span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;</span>
                   <span class="crayon-st">return</span>
                   <span class="crayon-h"> </span>
                   <span class="crayon-v">res</span>
                   <span class="crayon-sy">.</span>
                   <span class="crayon-e">render</span>
                   <span class="crayon-sy">(</span>
                   <span class="crayon-s">'register'</span>
                   <span class="crayon-sy">,</span>
                   <span class="crayon-h"> </span>
                   <span class="crayon-sy">{</span>
                   <span class="crayon-h"> </span>
                   <span class="crayon-v">title</span>
                   <span class="crayon-o">:</span>
                   <span class="crayon-h"> </span>
                   <span class="crayon-s">'Register'</span>
                   <span class="crayon-sy">,</span>
                   <span class="crayon-h"> </span>
                   <span class="crayon-v">error</span>
                   <span class="crayon-o">:</span>
                   <span class="crayon-h"> </span>
                   <span class="crayon-s">'Email and password required.'</span>
                   <span class="crayon-h"> </span>
                   <span class="crayon-sy">}</span>
                   <span class="crayon-sy">)</span>
                   <span class="crayon-sy">;</span>
                  </div>
                  <div class="crayon-line crayon-striped-line" id="crayon-59cd4daf9b3ae779710580-14">
                   <span class="crayon-h">&nbsp;&nbsp;</span>
                   <span class="crayon-sy">}</span>
                  </div>
                  <div class="crayon-line" id="crayon-59cd4daf9b3ae779710580-15">
                   &nbsp;
                  </div>
                  <div class="crayon-line crayon-striped-line" id="crayon-59cd4daf9b3ae779710580-16">
                   <span class="crayon-h">&nbsp;&nbsp;</span>
                   <span class="crayon-c">// Initialize our Stormpath client.</span>
                  </div>
                  <div class="crayon-line" id="crayon-59cd4daf9b3ae779710580-17">
                   <span class="crayon-h">&nbsp;&nbsp;</span>
                   <span class="crayon-t">var</span>
                   <span class="crayon-h"> </span>
                   <span class="crayon-v">apiKey</span>
                   <span class="crayon-h"> </span>
                   <span class="crayon-o">=</span>
                   <span class="crayon-h"> </span>
                   <span class="crayon-r">new</span>
                   <span class="crayon-h"> </span>
                   <span class="crayon-v">stormpath</span>
                   <span class="crayon-sy">.</span>
                   <span class="crayon-e">ApiKey</span>
                   <span class="crayon-sy">(</span>
                  </div>
                  <div class="crayon-line crayon-striped-line" id="crayon-59cd4daf9b3ae779710580-18">
                   <span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;</span>
                   <span class="crayon-v">process</span>
                   <span class="crayon-sy">.</span>
                   <span class="crayon-v">env</span>
                   <span class="crayon-sy">[</span>
                   <span class="crayon-s">'STORMPATH_API_KEY_ID'</span>
                   <span class="crayon-sy">]</span>
                   <span class="crayon-sy">,</span>
                  </div>
                  <div class="crayon-line" id="crayon-59cd4daf9b3ae779710580-19">
                   <span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;</span>
                   <span class="crayon-v">process</span>
                   <span class="crayon-sy">.</span>
                   <span class="crayon-v">env</span>
                   <span class="crayon-sy">[</span>
                   <span class="crayon-s">'STORMPATH_API_KEY_SECRET'</span>
                   <span class="crayon-sy">]</span>
                  </div>
                  <div class="crayon-line crayon-striped-line" id="crayon-59cd4daf9b3ae779710580-20">
                   <span class="crayon-h">&nbsp;&nbsp;</span>
                   <span class="crayon-sy">)</span>
                   <span class="crayon-sy">;</span>
                  </div>
                  <div class="crayon-line" id="crayon-59cd4daf9b3ae779710580-21">
                   <span class="crayon-h">&nbsp;&nbsp;</span>
                   <span class="crayon-t">var</span>
                   <span class="crayon-h"> </span>
                   <span class="crayon-v">spClient</span>
                   <span class="crayon-h"> </span>
                   <span class="crayon-o">=</span>
                   <span class="crayon-h"> </span>
                   <span class="crayon-r">new</span>
                   <span class="crayon-h"> </span>
                   <span class="crayon-v">stormpath</span>
                   <span class="crayon-sy">.</span>
                   <span class="crayon-e">Client</span>
                   <span class="crayon-sy">(</span>
                   <span class="crayon-sy">{</span>
                   <span class="crayon-h"> </span>
                   <span class="crayon-v">apiKey</span>
                   <span class="crayon-o">:</span>
                   <span class="crayon-h"> </span>
                   <span class="crayon-i">apiKey</span>
                   <span class="crayon-h"> </span>
                   <span class="crayon-sy">}</span>
                   <span class="crayon-sy">)</span>
                   <span class="crayon-sy">;</span>
                  </div>
                  <div class="crayon-line crayon-striped-line" id="crayon-59cd4daf9b3ae779710580-22">
                   &nbsp;
                  </div>
                  <div class="crayon-line" id="crayon-59cd4daf9b3ae779710580-23">
                   <span class="crayon-h">&nbsp;&nbsp;</span>
                   <span class="crayon-c">// Grab our app, then attempt to create this user's account.</span>
                  </div>
                  <div class="crayon-line crayon-striped-line" id="crayon-59cd4daf9b3ae779710580-24">
                   <span class="crayon-h">&nbsp;&nbsp;</span>
                   <span class="crayon-v">spClient</span>
                   <span class="crayon-sy">.</span>
                   <span class="crayon-e">getApplication</span>
                   <span class="crayon-sy">(</span>
                   <span class="crayon-v">process</span>
                   <span class="crayon-sy">.</span>
                   <span class="crayon-v">env</span>
                   <span class="crayon-sy">[</span>
                   <span class="crayon-s">'STORMPATH_APP_HREF'</span>
                   <span class="crayon-sy">]</span>
                   <span class="crayon-sy">,</span>
                   <span class="crayon-h"> </span>
                   <span class="crayon-t">function</span>
                   <span class="crayon-sy">(</span>
                   <span class="crayon-v">err</span>
                   <span class="crayon-sy">,</span>
                   <span class="crayon-h"> </span>
                   <span class="crayon-v">app</span>
                   <span class="crayon-sy">)</span>
                   <span class="crayon-h"> </span>
                   <span class="crayon-sy">{</span>
                  </div>
                  <div class="crayon-line" id="crayon-59cd4daf9b3ae779710580-25">
                   <span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;</span>
                   <span class="crayon-st">if</span>
                   <span class="crayon-h"> </span>
                   <span class="crayon-sy">(</span>
                   <span class="crayon-v">err</span>
                   <span class="crayon-sy">)</span>
                   <span class="crayon-h"> </span>
                   <span class="crayon-st">throw</span>
                   <span class="crayon-h"> </span>
                   <span class="crayon-v">err</span>
                   <span class="crayon-sy">;</span>
                  </div>
                  <div class="crayon-line crayon-striped-line" id="crayon-59cd4daf9b3ae779710580-26">
                   &nbsp;
                  </div>
                  <div class="crayon-line" id="crayon-59cd4daf9b3ae779710580-27">
                   <span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;</span>
                   <span class="crayon-v">app</span>
                   <span class="crayon-sy">.</span>
                   <span class="crayon-e">createAccount</span>
                   <span class="crayon-sy">(</span>
                   <span class="crayon-sy">{</span>
                  </div>
                  <div class="crayon-line crayon-striped-line" id="crayon-59cd4daf9b3ae779710580-28">
                   <span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span>
                   <span class="crayon-v">givenName</span>
                   <span class="crayon-o">:</span>
                   <span class="crayon-h"> </span>
                   <span class="crayon-s">'John'</span>
                   <span class="crayon-sy">,</span>
                  </div>
                  <div class="crayon-line" id="crayon-59cd4daf9b3ae779710580-29">
                   <span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span>
                   <span class="crayon-v">surname</span>
                   <span class="crayon-o">:</span>
                   <span class="crayon-h"> </span>
                   <span class="crayon-s">'Smith'</span>
                   <span class="crayon-sy">,</span>
                  </div>
                  <div class="crayon-line crayon-striped-line" id="crayon-59cd4daf9b3ae779710580-30">
                   <span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span>
                   <span class="crayon-v">username</span>
                   <span class="crayon-o">:</span>
                   <span class="crayon-h"> </span>
                   <span class="crayon-v">username</span>
                   <span class="crayon-sy">,</span>
                  </div>
                  <div class="crayon-line" id="crayon-59cd4daf9b3ae779710580-31">
                   <span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span>
                   <span class="crayon-v">email</span>
                   <span class="crayon-o">:</span>
                   <span class="crayon-h"> </span>
                   <span class="crayon-v">username</span>
                   <span class="crayon-sy">,</span>
                  </div>
                  <div class="crayon-line crayon-striped-line" id="crayon-59cd4daf9b3ae779710580-32">
                   <span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span>
                   <span class="crayon-v">password</span>
                   <span class="crayon-o">:</span>
                   <span class="crayon-h"> </span>
                   <span class="crayon-i">password</span>
                  </div>
                  <div class="crayon-line" id="crayon-59cd4daf9b3ae779710580-33">
                   <span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;</span>
                   <span class="crayon-sy">}</span>
                   <span class="crayon-sy">,</span>
                   <span class="crayon-h"> </span>
                   <span class="crayon-t">function</span>
                   <span class="crayon-h"> </span>
                   <span class="crayon-sy">(</span>
                   <span class="crayon-v">err</span>
                   <span class="crayon-sy">,</span>
                   <span class="crayon-h"> </span>
                   <span class="crayon-v">createdAccount</span>
                   <span class="crayon-sy">)</span>
                   <span class="crayon-h"> </span>
                   <span class="crayon-sy">{</span>
                  </div>
                  <div class="crayon-line crayon-striped-line" id="crayon-59cd4daf9b3ae779710580-34">
                   <span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span>
                   <span class="crayon-st">if</span>
                   <span class="crayon-h"> </span>
                   <span class="crayon-sy">(</span>
                   <span class="crayon-v">err</span>
                   <span class="crayon-sy">)</span>
                   <span class="crayon-h"> </span>
                   <span class="crayon-sy">{</span>
                  </div>
                  <div class="crayon-line" id="crayon-59cd4daf9b3ae779710580-35">
                   <span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span>
                   <span class="crayon-st">return</span>
                   <span class="crayon-h"> </span>
                   <span class="crayon-v">res</span>
                   <span class="crayon-sy">.</span>
                   <span class="crayon-e">render</span>
                   <span class="crayon-sy">(</span>
                   <span class="crayon-s">'register'</span>
                   <span class="crayon-sy">,</span>
                   <span class="crayon-h"> </span>
                   <span class="crayon-sy">{</span>
                   <span class="crayon-v">title</span>
                   <span class="crayon-o">:</span>
                   <span class="crayon-h"> </span>
                   <span class="crayon-s">'Register'</span>
                   <span class="crayon-sy">,</span>
                   <span class="crayon-h"> </span>
                   <span class="crayon-v">error</span>
                   <span class="crayon-o">:</span>
                   <span class="crayon-h"> </span>
                   <span class="crayon-v">err</span>
                   <span class="crayon-sy">.</span>
                   <span class="crayon-v">userMessage</span>
                   <span class="crayon-sy">}</span>
                   <span class="crayon-sy">)</span>
                   <span class="crayon-sy">;</span>
                  </div>
                  <div class="crayon-line crayon-striped-line" id="crayon-59cd4daf9b3ae779710580-36">
                   <span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span>
                   <span class="crayon-sy">}</span>
                  </div>
                  <div class="crayon-line" id="crayon-59cd4daf9b3ae779710580-37">
                   &nbsp;
                  </div>
                  <div class="crayon-line crayon-striped-line" id="crayon-59cd4daf9b3ae779710580-38">
                   <span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span>
                   <span class="crayon-v">passport</span>
                   <span class="crayon-sy">.</span>
                   <span class="crayon-e">authenticate</span>
                   <span class="crayon-sy">(</span>
                   <span class="crayon-s">'stormpath'</span>
                   <span class="crayon-sy">)</span>
                   <span class="crayon-sy">(</span>
                   <span class="crayon-v">req</span>
                   <span class="crayon-sy">,</span>
                   <span class="crayon-h"> </span>
                   <span class="crayon-v">res</span>
                   <span class="crayon-sy">,</span>
                   <span class="crayon-h"> </span>
                   <span class="crayon-t">function</span>
                   <span class="crayon-h"> </span>
                   <span class="crayon-sy">(</span>
                   <span class="crayon-sy">)</span>
                   <span class="crayon-h"> </span>
                   <span class="crayon-sy">{</span>
                  </div>
                  <div class="crayon-line" id="crayon-59cd4daf9b3ae779710580-39">
                   <span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span>
                   <span class="crayon-st">return</span>
                   <span class="crayon-h"> </span>
                   <span class="crayon-v">res</span>
                   <span class="crayon-sy">.</span>
                   <span class="crayon-e">redirect</span>
                   <span class="crayon-sy">(</span>
                   <span class="crayon-s">'/dashboard'</span>
                   <span class="crayon-sy">)</span>
                   <span class="crayon-sy">;</span>
                  </div>
                  <div class="crayon-line crayon-striped-line" id="crayon-59cd4daf9b3ae779710580-40">
                   <span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span>
                   <span class="crayon-sy">}</span>
                   <span class="crayon-sy">)</span>
                   <span class="crayon-sy">;</span>
                  </div>
                  <div class="crayon-line" id="crayon-59cd4daf9b3ae779710580-41">
                   <span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;</span>
                   <span class="crayon-sy">}</span>
                   <span class="crayon-sy">)</span>
                   <span class="crayon-sy">;</span>
                  </div>
                  <div class="crayon-line crayon-striped-line" id="crayon-59cd4daf9b3ae779710580-42">
                   <span class="crayon-h">&nbsp;&nbsp;</span>
                   <span class="crayon-sy">}</span>
                   <span class="crayon-sy">)</span>
                   <span class="crayon-sy">;</span>
                  </div>
                  <div class="crayon-line" id="crayon-59cd4daf9b3ae779710580-43">
                   <span class="crayon-sy">}</span>
                   <span class="crayon-sy">)</span>
                   <span class="crayon-sy">;</span>
                  </div>
                  <div class="crayon-line crayon-striped-line" id="crayon-59cd4daf9b3ae779710580-44">
                   &nbsp;
                  </div>
                 </div></td> 
               </tr> 
              </tbody>
             </table> 
            </div> 
           </div> 
           <p></p> 
           <p>The first bit just renders the registration page for GET requests.</p> 
           <p>The second bit is where things get interesting.</p> 
           <p>Firstly, we’re checking for a <code>username</code> and <code>password</code> field from the HTTP form. This is what the user will be submitting to us when they create a new account. (<em>The <code>username</code> field is actually an email address, but I’ll explain this in more detail later.</em>)</p> 
           <p>Next, we’ll re-render the registration page (<em>with an error message</em>) if either the <code>username</code> or <code>password</code> fields are missing.</p> 
           <p>After that’s out of the way, we need to initialize the Stormpath client. This involves using our API key credentials to make a new client, and then fetching our Stormpath application (<em>since we’ll need to create this new user account inside of our application namespace</em>).</p> 
           <p>Once we’ve fetched our Stormpath application, we’ll then create a new user account using the <code>createAccount</code> method. Since Stormpath requires (<em>at minimum</em>):</p> 
           <ul> 
            <li>givenName</li> 
            <li>surname</li> 
            <li>email</li> 
            <li>and password fields — but we only want to store email / password — I’m just setting the <code>givenName</code> and <code>surname</code> values to <code>'John'</code> and <code>'Smith'</code>.</li> 
           </ul> 
           <p><strong>NOTE</strong>: If the user account creation fails, we’ll render the registration page and pass in an appropriate error message from Stormpath. This will automatically handle problems like users attempting to register with an email that already exists.</p> 
           <p>If everything goes smoothly, we’ll use the passport.js library to log this new user in (<em>creating a session, transparently</em>), then redirect the user to the dashboard page.</p> 
           <h3 id="the-login-route">The Login Route<a href="#the-login-route" class="heading-link"><i class="stp-icons stp-icon-link2"></i></a></h3> 
           <p></p> 
           <div id="crayon-59cd4daf9b3b2001175985" class="crayon-syntax crayon-theme-stormpath crayon-font-monaco crayon-os-pc print-yes notranslate" data-settings=" minimize scroll-mouseover" style=" margin-top: 12px; margin-bottom: 12px; font-size: 12px !important; line-height: 15px !important;"> 
            <div class="crayon-plain-wrap">
             <textarea wrap="soft" class="crayon-plain print-no" data-settings="dblclick" readonly style="-moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4; font-size: 12px !important; line-height: 15px !important;">
// Render the login page.
router.get('/login', function(req, res) {
  res.render('login', { title: 'Login', error: req.flash('error')[0] });
});

// Authenticate a user.
router.post('/login', passport.authenticate('stormpath', {
  successRedirect: '/dashboard',
  failureRedirect: '/login',
  failureFlash: 'Invalid email or password.'
}));
</textarea>
            </div> 
            <div class="crayon-main" style=""> 
             <table class="crayon-table"> 
              <tbody>
               <tr class="crayon-row"> 
                <td class="crayon-nums " data-settings="hide"> 
                 <div class="crayon-nums-content" style="font-size: 12px !important; line-height: 15px !important;">
                  <div class="crayon-num" data-line="crayon-59cd4daf9b3b2001175985-1">
                   1
                  </div>
                  <div class="crayon-num crayon-striped-num" data-line="crayon-59cd4daf9b3b2001175985-2">
                   2
                  </div>
                  <div class="crayon-num" data-line="crayon-59cd4daf9b3b2001175985-3">
                   3
                  </div>
                  <div class="crayon-num crayon-striped-num" data-line="crayon-59cd4daf9b3b2001175985-4">
                   4
                  </div>
                  <div class="crayon-num" data-line="crayon-59cd4daf9b3b2001175985-5">
                   5
                  </div>
                  <div class="crayon-num crayon-striped-num" data-line="crayon-59cd4daf9b3b2001175985-6">
                   6
                  </div>
                  <div class="crayon-num" data-line="crayon-59cd4daf9b3b2001175985-7">
                   7
                  </div>
                  <div class="crayon-num crayon-striped-num" data-line="crayon-59cd4daf9b3b2001175985-8">
                   8
                  </div>
                  <div class="crayon-num" data-line="crayon-59cd4daf9b3b2001175985-9">
                   9
                  </div>
                  <div class="crayon-num crayon-striped-num" data-line="crayon-59cd4daf9b3b2001175985-10">
                   10
                  </div>
                  <div class="crayon-num" data-line="crayon-59cd4daf9b3b2001175985-11">
                   11
                  </div>
                  <div class="crayon-num crayon-striped-num" data-line="crayon-59cd4daf9b3b2001175985-12">
                   12
                  </div>
                 </div> </td> 
                <td class="crayon-code">
                 <div class="crayon-pre" style="font-size: 12px !important; line-height: 15px !important; -moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4;">
                  <div class="crayon-line" id="crayon-59cd4daf9b3b2001175985-1">
                   <span class="crayon-c">// Render the login page.</span>
                  </div>
                  <div class="crayon-line crayon-striped-line" id="crayon-59cd4daf9b3b2001175985-2">
                   <span class="crayon-v">router</span>
                   <span class="crayon-sy">.</span>
                   <span class="crayon-e">get</span>
                   <span class="crayon-sy">(</span>
                   <span class="crayon-s">'/login'</span>
                   <span class="crayon-sy">,</span>
                   <span class="crayon-h"> </span>
                   <span class="crayon-t">function</span>
                   <span class="crayon-sy">(</span>
                   <span class="crayon-v">req</span>
                   <span class="crayon-sy">,</span>
                   <span class="crayon-h"> </span>
                   <span class="crayon-v">res</span>
                   <span class="crayon-sy">)</span>
                   <span class="crayon-h"> </span>
                   <span class="crayon-sy">{</span>
                  </div>
                  <div class="crayon-line" id="crayon-59cd4daf9b3b2001175985-3">
                   <span class="crayon-h">&nbsp;&nbsp;</span>
                   <span class="crayon-v">res</span>
                   <span class="crayon-sy">.</span>
                   <span class="crayon-e">render</span>
                   <span class="crayon-sy">(</span>
                   <span class="crayon-s">'login'</span>
                   <span class="crayon-sy">,</span>
                   <span class="crayon-h"> </span>
                   <span class="crayon-sy">{</span>
                   <span class="crayon-h"> </span>
                   <span class="crayon-v">title</span>
                   <span class="crayon-o">:</span>
                   <span class="crayon-h"> </span>
                   <span class="crayon-s">'Login'</span>
                   <span class="crayon-sy">,</span>
                   <span class="crayon-h"> </span>
                   <span class="crayon-v">error</span>
                   <span class="crayon-o">:</span>
                   <span class="crayon-h"> </span>
                   <span class="crayon-v">req</span>
                   <span class="crayon-sy">.</span>
                   <span class="crayon-e">flash</span>
                   <span class="crayon-sy">(</span>
                   <span class="crayon-s">'error'</span>
                   <span class="crayon-sy">)</span>
                   <span class="crayon-sy">[</span>
                   <span class="crayon-cn">0</span>
                   <span class="crayon-sy">]</span>
                   <span class="crayon-h"> </span>
                   <span class="crayon-sy">}</span>
                   <span class="crayon-sy">)</span>
                   <span class="crayon-sy">;</span>
                  </div>
                  <div class="crayon-line crayon-striped-line" id="crayon-59cd4daf9b3b2001175985-4">
                   <span class="crayon-sy">}</span>
                   <span class="crayon-sy">)</span>
                   <span class="crayon-sy">;</span>
                  </div>
                  <div class="crayon-line" id="crayon-59cd4daf9b3b2001175985-5">
                   &nbsp;
                  </div>
                  <div class="crayon-line crayon-striped-line" id="crayon-59cd4daf9b3b2001175985-6">
                   <span class="crayon-c">// Authenticate a user.</span>
                  </div>
                  <div class="crayon-line" id="crayon-59cd4daf9b3b2001175985-7">
                   <span class="crayon-v">router</span>
                   <span class="crayon-sy">.</span>
                   <span class="crayon-e">post</span>
                   <span class="crayon-sy">(</span>
                   <span class="crayon-s">'/login'</span>
                   <span class="crayon-sy">,</span>
                   <span class="crayon-h"> </span>
                   <span class="crayon-v">passport</span>
                   <span class="crayon-sy">.</span>
                   <span class="crayon-e">authenticate</span>
                   <span class="crayon-sy">(</span>
                   <span class="crayon-s">'stormpath'</span>
                   <span class="crayon-sy">,</span>
                   <span class="crayon-h"> </span>
                   <span class="crayon-sy">{</span>
                  </div>
                  <div class="crayon-line crayon-striped-line" id="crayon-59cd4daf9b3b2001175985-8">
                   <span class="crayon-h">&nbsp;&nbsp;</span>
                   <span class="crayon-v">successRedirect</span>
                   <span class="crayon-o">:</span>
                   <span class="crayon-h"> </span>
                   <span class="crayon-s">'/dashboard'</span>
                   <span class="crayon-sy">,</span>
                  </div>
                  <div class="crayon-line" id="crayon-59cd4daf9b3b2001175985-9">
                   <span class="crayon-h">&nbsp;&nbsp;</span>
                   <span class="crayon-v">failureRedirect</span>
                   <span class="crayon-o">:</span>
                   <span class="crayon-h"> </span>
                   <span class="crayon-s">'/login'</span>
                   <span class="crayon-sy">,</span>
                  </div>
                  <div class="crayon-line crayon-striped-line" id="crayon-59cd4daf9b3b2001175985-10">
                   <span class="crayon-h">&nbsp;&nbsp;</span>
                   <span class="crayon-v">failureFlash</span>
                   <span class="crayon-o">:</span>
                   <span class="crayon-h"> </span>
                   <span class="crayon-s">'Invalid email or password.'</span>
                  </div>
                  <div class="crayon-line" id="crayon-59cd4daf9b3b2001175985-11">
                   <span class="crayon-sy">}</span>
                   <span class="crayon-sy">)</span>
                   <span class="crayon-sy">)</span>
                   <span class="crayon-sy">;</span>
                  </div>
                  <div class="crayon-line crayon-striped-line" id="crayon-59cd4daf9b3b2001175985-12">
                   &nbsp;
                  </div>
                 </div></td> 
               </tr> 
              </tbody>
             </table> 
            </div> 
           </div> 
           <p></p> 
           <p>The login routes (<em>shown above</em>) are responsible for logging existing users back into the site. The GET route only renders the login page, along with an optional error message to display if a user enters invalid credentials.</p> 
           <p><strong>NOTE</strong>: The <code>req.flash('error')[0]</code> you see is provided by the <a href="https://github.com/jaredhanson/connect-flash">connect-flash</a> library. If a login fails, the passport.js library will embed a tiny little ‘error’ message in a cookie, which is what the <code>req.flash('error')[0]</code> call then retrieves.</p> 
           <p>The POST request is completely offloaded to the passport.js library. Passport provides the <code>authenticate</code> method which will transparently check the <code>username</code> and <code>password</code> form fields against the Stormpath API, and take care of login automatically.</p> 
           <p>If the login is successful, Passport will redirect the user to the dashboard page — otherwise, it’ll re-render the login page once more, along with a friendly error message.</p> 
           <h3 id="the-logout-route">The Logout Route<a href="#the-logout-route" class="heading-link"><i class="stp-icons stp-icon-link2"></i></a></h3> 
           <p></p> 
           <div id="crayon-59cd4daf9b3b7751929499" class="crayon-syntax crayon-theme-stormpath crayon-font-monaco crayon-os-pc print-yes notranslate" data-settings=" minimize scroll-mouseover" style=" margin-top: 12px; margin-bottom: 12px; font-size: 12px !important; line-height: 15px !important;"> 
            <div class="crayon-plain-wrap">
             <textarea wrap="soft" class="crayon-plain print-no" data-settings="dblclick" readonly style="-moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4; font-size: 12px !important; line-height: 15px !important;">
// Logout the user, then redirect to the home page.
router.get('/logout', function(req, res) {
  req.logout();
  res.redirect('/');
});
</textarea>
            </div> 
            <div class="crayon-main" style=""> 
             <table class="crayon-table"> 
              <tbody>
               <tr class="crayon-row"> 
                <td class="crayon-nums " data-settings="hide"> 
                 <div class="crayon-nums-content" style="font-size: 12px !important; line-height: 15px !important;">
                  <div class="crayon-num" data-line="crayon-59cd4daf9b3b7751929499-1">
                   1
                  </div>
                  <div class="crayon-num crayon-striped-num" data-line="crayon-59cd4daf9b3b7751929499-2">
                   2
                  </div>
                  <div class="crayon-num" data-line="crayon-59cd4daf9b3b7751929499-3">
                   3
                  </div>
                  <div class="crayon-num crayon-striped-num" data-line="crayon-59cd4daf9b3b7751929499-4">
                   4
                  </div>
                  <div class="crayon-num" data-line="crayon-59cd4daf9b3b7751929499-5">
                   5
                  </div>
                  <div class="crayon-num crayon-striped-num" data-line="crayon-59cd4daf9b3b7751929499-6">
                   6
                  </div>
                 </div> </td> 
                <td class="crayon-code">
                 <div class="crayon-pre" style="font-size: 12px !important; line-height: 15px !important; -moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4;">
                  <div class="crayon-line" id="crayon-59cd4daf9b3b7751929499-1">
                   <span class="crayon-c">// Logout the user, then redirect to the home page.</span>
                  </div>
                  <div class="crayon-line crayon-striped-line" id="crayon-59cd4daf9b3b7751929499-2">
                   <span class="crayon-v">router</span>
                   <span class="crayon-sy">.</span>
                   <span class="crayon-e">get</span>
                   <span class="crayon-sy">(</span>
                   <span class="crayon-s">'/logout'</span>
                   <span class="crayon-sy">,</span>
                   <span class="crayon-h"> </span>
                   <span class="crayon-t">function</span>
                   <span class="crayon-sy">(</span>
                   <span class="crayon-v">req</span>
                   <span class="crayon-sy">,</span>
                   <span class="crayon-h"> </span>
                   <span class="crayon-v">res</span>
                   <span class="crayon-sy">)</span>
                   <span class="crayon-h"> </span>
                   <span class="crayon-sy">{</span>
                  </div>
                  <div class="crayon-line" id="crayon-59cd4daf9b3b7751929499-3">
                   <span class="crayon-h">&nbsp;&nbsp;</span>
                   <span class="crayon-v">req</span>
                   <span class="crayon-sy">.</span>
                   <span class="crayon-e">logout</span>
                   <span class="crayon-sy">(</span>
                   <span class="crayon-sy">)</span>
                   <span class="crayon-sy">;</span>
                  </div>
                  <div class="crayon-line crayon-striped-line" id="crayon-59cd4daf9b3b7751929499-4">
                   <span class="crayon-h">&nbsp;&nbsp;</span>
                   <span class="crayon-v">res</span>
                   <span class="crayon-sy">.</span>
                   <span class="crayon-e">redirect</span>
                   <span class="crayon-sy">(</span>
                   <span class="crayon-s">'/'</span>
                   <span class="crayon-sy">)</span>
                   <span class="crayon-sy">;</span>
                  </div>
                  <div class="crayon-line" id="crayon-59cd4daf9b3b7751929499-5">
                   <span class="crayon-sy">}</span>
                   <span class="crayon-sy">)</span>
                   <span class="crayon-sy">;</span>
                  </div>
                  <div class="crayon-line crayon-striped-line" id="crayon-59cd4daf9b3b7751929499-6">
                   &nbsp;
                  </div>
                 </div></td> 
               </tr> 
              </tbody>
             </table> 
            </div> 
           </div> 
           <p></p> 
           <p>The logout route (<em>above</em>) will log the user out of their account, destroying their session cookies.</p> 
           <p>The passport library automatically adds a <code>logout</code> method onto the <code>req</code> object, which makes it easy to log a user out of their account.</p> 
           <p>Once we’ve logged the user out, we simply redirect them back to the home page.</p> 
           <h2 id="writing-the-templates">Writing the Templates<a href="#writing-the-templates" class="heading-link"><i class="stp-icons stp-icon-link2"></i></a></h2> 
           <p>The last big thing we have to do is define our templates. The templates are the HTML layer that gets presented to users.</p> 
           <p>Let’s get started!</p> 
           <h3 id="create-a-layout">Create a Layout<a href="#create-a-layout" class="heading-link"><i class="stp-icons stp-icon-link2"></i></a></h3> 
           <p>The first thing we’ll want to do is create a <code>layout.jade</code> template. By default, our new express app is using the <a href="https://pugjs.org/api/getting-started.html">jade</a> templating language (<em>check it out if you haven’t, it’s quite cool</em>).</p> 
           <p>Here’s our <code>views/layout.jade</code> template:</p> 
           <p></p> 
           <div id="crayon-59cd4daf9b3ba748639036" class="crayon-syntax crayon-theme-stormpath crayon-font-monaco crayon-os-pc print-yes notranslate" data-settings=" minimize scroll-mouseover" style=" margin-top: 12px; margin-bottom: 12px; font-size: 12px !important; line-height: 15px !important;"> 
            <div class="crayon-plain-wrap">
             <textarea wrap="soft" class="crayon-plain print-no" data-settings="dblclick" readonly style="-moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4; font-size: 12px !important; line-height: 15px !important;">
doctype html
html
  head
    meta(charset='utf-8')
    meta(content='IE=edge', http-equiv='X-UA-Compatible')
    meta(content='width=device-width, initial-scale=1', name='viewport')
    title= 'Express-Stormpath (sample) | ' + title
    link(href='/css/bootstrap.min.css', rel='stylesheet')
    link(href='/css/style.css', rel='stylesheet')
    &lt;!--[if lt IE 9 ]&gt;
    &lt;script src="https://oss.maxcdn.com/libs/html5shiv/3.7.0/html5shiv.js"&gt;&lt;/script&gt;
    &lt;script src="https://oss.maxcdn.com/libs/respond.js/1.4.2/respond.min.js"&gt;&lt;/script&gt;
    &lt;![endif]--&gt;
  body
    .container
      .header
        ul.nav.nav-pills.pull-right
          li
            a(href='/') Home
          if user
            li
              a(href='/dashboard') Dashbaord
            li
              a(href='/logout') Logout
          else
            li
              a(href='/login') Login
        h3.text-muted Flask-Express
      block body
    script(src='https://ajax.googleapis.com/ajax/libs/jquery/1.11.0/jquery.min.js')
    script(src='/js/bootstrap.min.js')
</textarea>
            </div> 
            <div class="crayon-main" style=""> 
             <table class="crayon-table"> 
              <tbody>
               <tr class="crayon-row"> 
                <td class="crayon-nums " data-settings="hide"> 
                 <div class="crayon-nums-content" style="font-size: 12px !important; line-height: 15px !important;">
                  <div class="crayon-num" data-line="crayon-59cd4daf9b3ba748639036-1">
                   1
                  </div>
                  <div class="crayon-num crayon-striped-num" data-line="crayon-59cd4daf9b3ba748639036-2">
                   2
                  </div>
                  <div class="crayon-num" data-line="crayon-59cd4daf9b3ba748639036-3">
                   3
                  </div>
                  <div class="crayon-num crayon-striped-num" data-line="crayon-59cd4daf9b3ba748639036-4">
                   4
                  </div>
                  <div class="crayon-num" data-line="crayon-59cd4daf9b3ba748639036-5">
                   5
                  </div>
                  <div class="crayon-num crayon-striped-num" data-line="crayon-59cd4daf9b3ba748639036-6">
                   6
                  </div>
                  <div class="crayon-num" data-line="crayon-59cd4daf9b3ba748639036-7">
                   7
                  </div>
                  <div class="crayon-num crayon-striped-num" data-line="crayon-59cd4daf9b3ba748639036-8">
                   8
                  </div>
                  <div class="crayon-num" data-line="crayon-59cd4daf9b3ba748639036-9">
                   9
                  </div>
                  <div class="crayon-num crayon-striped-num" data-line="crayon-59cd4daf9b3ba748639036-10">
                   10
                  </div>
                  <div class="crayon-num" data-line="crayon-59cd4daf9b3ba748639036-11">
                   11
                  </div>
                  <div class="crayon-num crayon-striped-num" data-line="crayon-59cd4daf9b3ba748639036-12">
                   12
                  </div>
                  <div class="crayon-num" data-line="crayon-59cd4daf9b3ba748639036-13">
                   13
                  </div>
                  <div class="crayon-num crayon-striped-num" data-line="crayon-59cd4daf9b3ba748639036-14">
                   14
                  </div>
                  <div class="crayon-num" data-line="crayon-59cd4daf9b3ba748639036-15">
                   15
                  </div>
                  <div class="crayon-num crayon-striped-num" data-line="crayon-59cd4daf9b3ba748639036-16">
                   16
                  </div>
                  <div class="crayon-num" data-line="crayon-59cd4daf9b3ba748639036-17">
                   17
                  </div>
                  <div class="crayon-num crayon-striped-num" data-line="crayon-59cd4daf9b3ba748639036-18">
                   18
                  </div>
                  <div class="crayon-num" data-line="crayon-59cd4daf9b3ba748639036-19">
                   19
                  </div>
                  <div class="crayon-num crayon-striped-num" data-line="crayon-59cd4daf9b3ba748639036-20">
                   20
                  </div>
                  <div class="crayon-num" data-line="crayon-59cd4daf9b3ba748639036-21">
                   21
                  </div>
                  <div class="crayon-num crayon-striped-num" data-line="crayon-59cd4daf9b3ba748639036-22">
                   22
                  </div>
                  <div class="crayon-num" data-line="crayon-59cd4daf9b3ba748639036-23">
                   23
                  </div>
                  <div class="crayon-num crayon-striped-num" data-line="crayon-59cd4daf9b3ba748639036-24">
                   24
                  </div>
                  <div class="crayon-num" data-line="crayon-59cd4daf9b3ba748639036-25">
                   25
                  </div>
                  <div class="crayon-num crayon-striped-num" data-line="crayon-59cd4daf9b3ba748639036-26">
                   26
                  </div>
                  <div class="crayon-num" data-line="crayon-59cd4daf9b3ba748639036-27">
                   27
                  </div>
                  <div class="crayon-num crayon-striped-num" data-line="crayon-59cd4daf9b3ba748639036-28">
                   28
                  </div>
                  <div class="crayon-num" data-line="crayon-59cd4daf9b3ba748639036-29">
                   29
                  </div>
                  <div class="crayon-num crayon-striped-num" data-line="crayon-59cd4daf9b3ba748639036-30">
                   30
                  </div>
                  <div class="crayon-num" data-line="crayon-59cd4daf9b3ba748639036-31">
                   31
                  </div>
                  <div class="crayon-num crayon-striped-num" data-line="crayon-59cd4daf9b3ba748639036-32">
                   32
                  </div>
                 </div> </td> 
                <td class="crayon-code">
                 <div class="crayon-pre" style="font-size: 12px !important; line-height: 15px !important; -moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4;">
                  <div class="crayon-line" id="crayon-59cd4daf9b3ba748639036-1">
                   <span class="crayon-e">doctype </span>
                   <span class="crayon-e">html</span>
                  </div>
                  <div class="crayon-line crayon-striped-line" id="crayon-59cd4daf9b3ba748639036-2">
                   <span class="crayon-e">html</span>
                  </div>
                  <div class="crayon-line" id="crayon-59cd4daf9b3ba748639036-3">
                   <span class="crayon-e">&nbsp;&nbsp;</span>
                   <span class="crayon-e">head</span>
                  </div>
                  <div class="crayon-line crayon-striped-line" id="crayon-59cd4daf9b3ba748639036-4">
                   <span class="crayon-e">&nbsp;&nbsp;&nbsp;&nbsp;</span>
                   <span class="crayon-e">meta</span>
                   <span class="crayon-sy">(</span>
                   <span class="crayon-v">charset</span>
                   <span class="crayon-o">=</span>
                   <span class="crayon-s">'utf-8'</span>
                   <span class="crayon-sy">)</span>
                  </div>
                  <div class="crayon-line" id="crayon-59cd4daf9b3ba748639036-5">
                   <span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;</span>
                   <span class="crayon-e">meta</span>
                   <span class="crayon-sy">(</span>
                   <span class="crayon-v">content</span>
                   <span class="crayon-o">=</span>
                   <span class="crayon-s">'IE=edge'</span>
                   <span class="crayon-sy">,</span>
                   <span class="crayon-h"> </span>
                   <span class="crayon-v">http</span>
                   <span class="crayon-o">-</span>
                   <span class="crayon-v">equiv</span>
                   <span class="crayon-o">=</span>
                   <span class="crayon-s">'X-UA-Compatible'</span>
                   <span class="crayon-sy">)</span>
                  </div>
                  <div class="crayon-line crayon-striped-line" id="crayon-59cd4daf9b3ba748639036-6">
                   <span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;</span>
                   <span class="crayon-e">meta</span>
                   <span class="crayon-sy">(</span>
                   <span class="crayon-v">content</span>
                   <span class="crayon-o">=</span>
                   <span class="crayon-s">'width=device-width, initial-scale=1'</span>
                   <span class="crayon-sy">,</span>
                   <span class="crayon-h"> </span>
                   <span class="crayon-v">name</span>
                   <span class="crayon-o">=</span>
                   <span class="crayon-s">'viewport'</span>
                   <span class="crayon-sy">)</span>
                  </div>
                  <div class="crayon-line" id="crayon-59cd4daf9b3ba748639036-7">
                   <span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;</span>
                   <span class="crayon-v">title</span>
                   <span class="crayon-o">=</span>
                   <span class="crayon-h"> </span>
                   <span class="crayon-s">'Express-Stormpath (sample) | '</span>
                   <span class="crayon-h"> </span>
                   <span class="crayon-o">+</span>
                   <span class="crayon-h"> </span>
                   <span class="crayon-e">title</span>
                  </div>
                  <div class="crayon-line crayon-striped-line" id="crayon-59cd4daf9b3ba748639036-8">
                   <span class="crayon-e">&nbsp;&nbsp;&nbsp;&nbsp;</span>
                   <span class="crayon-e">link</span>
                   <span class="crayon-sy">(</span>
                   <span class="crayon-v">href</span>
                   <span class="crayon-o">=</span>
                   <span class="crayon-s">'/css/bootstrap.min.css'</span>
                   <span class="crayon-sy">,</span>
                   <span class="crayon-h"> </span>
                   <span class="crayon-v">rel</span>
                   <span class="crayon-o">=</span>
                   <span class="crayon-s">'stylesheet'</span>
                   <span class="crayon-sy">)</span>
                  </div>
                  <div class="crayon-line" id="crayon-59cd4daf9b3ba748639036-9">
                   <span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;</span>
                   <span class="crayon-e">link</span>
                   <span class="crayon-sy">(</span>
                   <span class="crayon-v">href</span>
                   <span class="crayon-o">=</span>
                   <span class="crayon-s">'/css/style.css'</span>
                   <span class="crayon-sy">,</span>
                   <span class="crayon-h"> </span>
                   <span class="crayon-v">rel</span>
                   <span class="crayon-o">=</span>
                   <span class="crayon-s">'stylesheet'</span>
                   <span class="crayon-sy">)</span>
                  </div>
                  <div class="crayon-line crayon-striped-line" id="crayon-59cd4daf9b3ba748639036-10">
                   <span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;</span>
                   <span class="crayon-o">&lt;</span>
                   <span class="crayon-o">!</span>
                   <span class="crayon-o">--</span>
                   <span class="crayon-sy">[</span>
                   <span class="crayon-st">if</span>
                   <span class="crayon-h"> </span>
                   <span class="crayon-e">lt</span>
                   <span class="crayon-h"> </span>
                   <span class="crayon-e">IE</span>
                   <span class="crayon-h"> </span>
                   <span class="crayon-cn">9</span>
                   <span class="crayon-h"> </span>
                   <span class="crayon-sy">]</span>
                   <span class="crayon-o">&gt;</span>
                  </div>
                  <div class="crayon-line" id="crayon-59cd4daf9b3ba748639036-11">
                   <span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;</span>
                   <span class="crayon-ta">&lt;script </span>
                   <span class="crayon-e ">src</span>
                   <span class="crayon-o">=</span>
                   <span class="crayon-s">"https://oss.maxcdn.com/libs/html5shiv/3.7.0/html5shiv.js"</span>
                   <span class="crayon-o">&gt;</span>
                   <span class="crayon-ta">&lt;/script&gt;</span>
                  </div>
                  <div class="crayon-line crayon-striped-line" id="crayon-59cd4daf9b3ba748639036-12">
                   <span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;</span>
                   <span class="crayon-ta">&lt;script </span>
                   <span class="crayon-e ">src</span>
                   <span class="crayon-o">=</span>
                   <span class="crayon-s">"https://oss.maxcdn.com/libs/respond.js/1.4.2/respond.min.js"</span>
                   <span class="crayon-o">&gt;</span>
                   <span class="crayon-ta">&lt;/script&gt;</span>
                  </div>
                  <div class="crayon-line" id="crayon-59cd4daf9b3ba748639036-13">
                   <span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;</span>
                   <span class="crayon-o">&lt;</span>
                   <span class="crayon-o">!</span>
                   <span class="crayon-sy">[</span>
                   <span class="crayon-st">endif</span>
                   <span class="crayon-sy">]</span>
                   <span class="crayon-o">--</span>
                   <span class="crayon-o">&gt;</span>
                  </div>
                  <div class="crayon-line crayon-striped-line" id="crayon-59cd4daf9b3ba748639036-14">
                   <span class="crayon-h">&nbsp;&nbsp;</span>
                   <span class="crayon-i">body</span>
                  </div>
                  <div class="crayon-line" id="crayon-59cd4daf9b3ba748639036-15">
                   <span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;</span>
                   <span class="crayon-sy">.</span>
                   <span class="crayon-i">container</span>
                  </div>
                  <div class="crayon-line crayon-striped-line" id="crayon-59cd4daf9b3ba748639036-16">
                   <span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span>
                   <span class="crayon-sy">.</span>
                   <span class="crayon-e">header</span>
                  </div>
                  <div class="crayon-line" id="crayon-59cd4daf9b3ba748639036-17">
                   <span class="crayon-e">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span>
                   <span class="crayon-v">ul</span>
                   <span class="crayon-sy">.</span>
                   <span class="crayon-v">nav</span>
                   <span class="crayon-sy">.</span>
                   <span class="crayon-v">nav</span>
                   <span class="crayon-o">-</span>
                   <span class="crayon-v">pills</span>
                   <span class="crayon-sy">.</span>
                   <span class="crayon-v">pull</span>
                   <span class="crayon-o">-</span>
                   <span class="crayon-e">right</span>
                  </div>
                  <div class="crayon-line crayon-striped-line" id="crayon-59cd4daf9b3ba748639036-18">
                   <span class="crayon-e">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span>
                   <span class="crayon-i">li</span>
                  </div>
                  <div class="crayon-line" id="crayon-59cd4daf9b3ba748639036-19">
                   <span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span>
                   <span class="crayon-e">a</span>
                   <span class="crayon-sy">(</span>
                   <span class="crayon-v">href</span>
                   <span class="crayon-o">=</span>
                   <span class="crayon-s">'/'</span>
                   <span class="crayon-sy">)</span>
                   <span class="crayon-h"> </span>
                   <span class="crayon-e">Home</span>
                  </div>
                  <div class="crayon-line crayon-striped-line" id="crayon-59cd4daf9b3ba748639036-20">
                   <span class="crayon-e">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span>
                   <span class="crayon-st">if</span>
                   <span class="crayon-h"> </span>
                   <span class="crayon-e">user</span>
                  </div>
                  <div class="crayon-line" id="crayon-59cd4daf9b3ba748639036-21">
                   <span class="crayon-e">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span>
                   <span class="crayon-i">li</span>
                  </div>
                  <div class="crayon-line crayon-striped-line" id="crayon-59cd4daf9b3ba748639036-22">
                   <span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span>
                   <span class="crayon-e">a</span>
                   <span class="crayon-sy">(</span>
                   <span class="crayon-v">href</span>
                   <span class="crayon-o">=</span>
                   <span class="crayon-s">'/dashboard'</span>
                   <span class="crayon-sy">)</span>
                   <span class="crayon-h"> </span>
                   <span class="crayon-e">Dashbaord</span>
                  </div>
                  <div class="crayon-line" id="crayon-59cd4daf9b3ba748639036-23">
                   <span class="crayon-e">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span>
                   <span class="crayon-i">li</span>
                  </div>
                  <div class="crayon-line crayon-striped-line" id="crayon-59cd4daf9b3ba748639036-24">
                   <span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span>
                   <span class="crayon-e">a</span>
                   <span class="crayon-sy">(</span>
                   <span class="crayon-v">href</span>
                   <span class="crayon-o">=</span>
                   <span class="crayon-s">'/logout'</span>
                   <span class="crayon-sy">)</span>
                   <span class="crayon-h"> </span>
                   <span class="crayon-e">Logout</span>
                  </div>
                  <div class="crayon-line" id="crayon-59cd4daf9b3ba748639036-25">
                   <span class="crayon-e">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span>
                   <span class="crayon-st">else</span>
                  </div>
                  <div class="crayon-line crayon-striped-line" id="crayon-59cd4daf9b3ba748639036-26">
                   <span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span>
                   <span class="crayon-i">li</span>
                  </div>
                  <div class="crayon-line" id="crayon-59cd4daf9b3ba748639036-27">
                   <span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span>
                   <span class="crayon-e">a</span>
                   <span class="crayon-sy">(</span>
                   <span class="crayon-v">href</span>
                   <span class="crayon-o">=</span>
                   <span class="crayon-s">'/login'</span>
                   <span class="crayon-sy">)</span>
                   <span class="crayon-h"> </span>
                   <span class="crayon-e">Login</span>
                  </div>
                  <div class="crayon-line crayon-striped-line" id="crayon-59cd4daf9b3ba748639036-28">
                   <span class="crayon-e">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span>
                   <span class="crayon-v">h3</span>
                   <span class="crayon-sy">.</span>
                   <span class="crayon-v">text</span>
                   <span class="crayon-o">-</span>
                   <span class="crayon-e">muted </span>
                   <span class="crayon-v">Flask</span>
                   <span class="crayon-o">-</span>
                   <span class="crayon-e">Express</span>
                  </div>
                  <div class="crayon-line" id="crayon-59cd4daf9b3ba748639036-29">
                   <span class="crayon-e">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span>
                   <span class="crayon-e">block </span>
                   <span class="crayon-e">body</span>
                  </div>
                  <div class="crayon-line crayon-striped-line" id="crayon-59cd4daf9b3ba748639036-30">
                   <span class="crayon-e">&nbsp;&nbsp;&nbsp;&nbsp;</span>
                   <span class="crayon-e">script</span>
                   <span class="crayon-sy">(</span>
                   <span class="crayon-v">src</span>
                   <span class="crayon-o">=</span>
                   <span class="crayon-s">'https://ajax.googleapis.com/ajax/libs/jquery/1.11.0/jquery.min.js'</span>
                   <span class="crayon-sy">)</span>
                  </div>
                  <div class="crayon-line" id="crayon-59cd4daf9b3ba748639036-31">
                   <span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;</span>
                   <span class="crayon-e">script</span>
                   <span class="crayon-sy">(</span>
                   <span class="crayon-v">src</span>
                   <span class="crayon-o">=</span>
                   <span class="crayon-s">'/js/bootstrap.min.js'</span>
                   <span class="crayon-sy">)</span>
                  </div>
                  <div class="crayon-line crayon-striped-line" id="crayon-59cd4daf9b3ba748639036-32">
                   &nbsp;
                  </div>
                 </div></td> 
               </tr> 
              </tbody>
             </table> 
            </div> 
           </div> 
           <p></p> 
           <p>The main thing our fancy new layout template does is provide a basic HTML page layout that all our other pages will use. The line which reads <code>block body</code> will be overridden by our other templates.</p> 
           <p>The most important bit to take note of here is the nav menu:</p> 
           <p></p> 
           <div id="crayon-59cd4daf9b3be193621233" class="crayon-syntax crayon-theme-stormpath crayon-font-monaco crayon-os-pc print-yes notranslate" data-settings=" minimize scroll-mouseover" style=" margin-top: 12px; margin-bottom: 12px; font-size: 12px !important; line-height: 15px !important;"> 
            <div class="crayon-plain-wrap">
             <textarea wrap="soft" class="crayon-plain print-no" data-settings="dblclick" readonly style="-moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4; font-size: 12px !important; line-height: 15px !important;">
if user
  li
    a(href='/dashboard') Dashbaord
  li
    a(href='/logout') Logout
else
  li
    a(href='/login') Login
      block body
</textarea>
            </div> 
            <div class="crayon-main" style=""> 
             <table class="crayon-table"> 
              <tbody>
               <tr class="crayon-row"> 
                <td class="crayon-nums " data-settings="hide"> 
                 <div class="crayon-nums-content" style="font-size: 12px !important; line-height: 15px !important;">
                  <div class="crayon-num" data-line="crayon-59cd4daf9b3be193621233-1">
                   1
                  </div>
                  <div class="crayon-num crayon-striped-num" data-line="crayon-59cd4daf9b3be193621233-2">
                   2
                  </div>
                  <div class="crayon-num" data-line="crayon-59cd4daf9b3be193621233-3">
                   3
                  </div>
                  <div class="crayon-num crayon-striped-num" data-line="crayon-59cd4daf9b3be193621233-4">
                   4
                  </div>
                  <div class="crayon-num" data-line="crayon-59cd4daf9b3be193621233-5">
                   5
                  </div>
                  <div class="crayon-num crayon-striped-num" data-line="crayon-59cd4daf9b3be193621233-6">
                   6
                  </div>
                  <div class="crayon-num" data-line="crayon-59cd4daf9b3be193621233-7">
                   7
                  </div>
                  <div class="crayon-num crayon-striped-num" data-line="crayon-59cd4daf9b3be193621233-8">
                   8
                  </div>
                  <div class="crayon-num" data-line="crayon-59cd4daf9b3be193621233-9">
                   9
                  </div>
                  <div class="crayon-num crayon-striped-num" data-line="crayon-59cd4daf9b3be193621233-10">
                   10
                  </div>
                 </div> </td> 
                <td class="crayon-code">
                 <div class="crayon-pre" style="font-size: 12px !important; line-height: 15px !important; -moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4;">
                  <div class="crayon-line" id="crayon-59cd4daf9b3be193621233-1">
                   <span class="crayon-st">if</span>
                   <span class="crayon-h"> </span>
                   <span class="crayon-e">user</span>
                  </div>
                  <div class="crayon-line crayon-striped-line" id="crayon-59cd4daf9b3be193621233-2">
                   <span class="crayon-e">&nbsp;&nbsp;</span>
                   <span class="crayon-i">li</span>
                  </div>
                  <div class="crayon-line" id="crayon-59cd4daf9b3be193621233-3">
                   <span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;</span>
                   <span class="crayon-e">a</span>
                   <span class="crayon-sy">(</span>
                   <span class="crayon-v">href</span>
                   <span class="crayon-o">=</span>
                   <span class="crayon-s">'/dashboard'</span>
                   <span class="crayon-sy">)</span>
                   <span class="crayon-h"> </span>
                   <span class="crayon-e">Dashbaord</span>
                  </div>
                  <div class="crayon-line crayon-striped-line" id="crayon-59cd4daf9b3be193621233-4">
                   <span class="crayon-e">&nbsp;&nbsp;</span>
                   <span class="crayon-i">li</span>
                  </div>
                  <div class="crayon-line" id="crayon-59cd4daf9b3be193621233-5">
                   <span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;</span>
                   <span class="crayon-e">a</span>
                   <span class="crayon-sy">(</span>
                   <span class="crayon-v">href</span>
                   <span class="crayon-o">=</span>
                   <span class="crayon-s">'/logout'</span>
                   <span class="crayon-sy">)</span>
                   <span class="crayon-h"> </span>
                   <span class="crayon-e">Logout</span>
                  </div>
                  <div class="crayon-line crayon-striped-line" id="crayon-59cd4daf9b3be193621233-6">
                   <span class="crayon-st">else</span>
                  </div>
                  <div class="crayon-line" id="crayon-59cd4daf9b3be193621233-7">
                   <span class="crayon-h">&nbsp;&nbsp;</span>
                   <span class="crayon-i">li</span>
                  </div>
                  <div class="crayon-line crayon-striped-line" id="crayon-59cd4daf9b3be193621233-8">
                   <span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;</span>
                   <span class="crayon-e">a</span>
                   <span class="crayon-sy">(</span>
                   <span class="crayon-v">href</span>
                   <span class="crayon-o">=</span>
                   <span class="crayon-s">'/login'</span>
                   <span class="crayon-sy">)</span>
                   <span class="crayon-h"> </span>
                   <span class="crayon-e">Login</span>
                  </div>
                  <div class="crayon-line" id="crayon-59cd4daf9b3be193621233-9">
                   <span class="crayon-e">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span>
                   <span class="crayon-e">block </span>
                   <span class="crayon-i">body</span>
                  </div>
                  <div class="crayon-line crayon-striped-line" id="crayon-59cd4daf9b3be193621233-10">
                   &nbsp;
                  </div>
                 </div></td> 
               </tr> 
              </tbody>
             </table> 
            </div> 
           </div> 
           <p></p> 
           <p>We’re using a simple conditional here to check to see whether or not a user is logged in or not (<code>if user</code>), and changing the links the visitor sees accordingly. This ensures that if a user is logged in, and on the homepage — they won’t see a ‘Login’ button displayed in the navbar.</p> 
           <h3 id="the-home-page-template">The Home Page Template<a href="#the-home-page-template" class="heading-link"><i class="stp-icons stp-icon-link2"></i></a></h3> 
           <p>Place the following code into: <code>views/index.jade</code>:</p> 
           <p></p> 
           <div id="crayon-59cd4daf9b3c1864879023" class="crayon-syntax crayon-theme-stormpath crayon-font-monaco crayon-os-pc print-yes notranslate" data-settings=" minimize scroll-mouseover" style=" margin-top: 12px; margin-bottom: 12px; font-size: 12px !important; line-height: 15px !important;"> 
            <div class="crayon-plain-wrap">
             <textarea wrap="soft" class="crayon-plain print-no" data-settings="dblclick" readonly style="-moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4; font-size: 12px !important; line-height: 15px !important;">
extends layout

block body

  #welcome.jumbotron
    h1 Welcome to Stormpath-Express
    p.lead.
      &lt;br/&gt;
      &lt;br/&gt;
      Welcome to this gloriously simple &lt;a href="https://github.com/stormpath/stormpath-express-sample"&gt;Stormpath&lt;/a&gt;
      sample app!
    ul
      li First, take a look through this very basic site.
      li.
        Then, check out this project's source code
        &lt;a href="https://github.com/stormpath/stormpath-express-sample"&gt;on GitHub&lt;/a&gt;.
      li Lastly, integrate Stormpath into your own sites!
    &lt;br/&gt;
    &lt;br/&gt;
    h2 What this Sample App Demonstrates
    br
    p.
      This simple app demonstrates how easy it is to register, login, and
      securely authenticate users on your website using Stormpath.
    p.
      Aren't a Stormpath user yet?
      &lt;a href="https://stormpath.com"&gt;Go signup now!&lt;/a&gt;
    p.
      &lt;b&gt;NOTE&lt;/b&gt;:
      This app will NOT work until you have gone through the bootstrapping
      instructions found in this project's &lt;code&gt;README.md&lt;/code&gt; file. For more
      information, please follow the guide on this project's
      &lt;a href="https://github.com/stormpath/stormpath-express-sample"&gt;GitHub page&lt;/a&gt;.
    p.bigbutton
      a.bigbutton.btn.btn-lg.btn-danger(href='/register', role='button') Register
</textarea>
            </div> 
            <div class="crayon-main" style=""> 
             <table class="crayon-table"> 
              <tbody>
               <tr class="crayon-row"> 
                <td class="crayon-nums " data-settings="hide"> 
                 <div class="crayon-nums-content" style="font-size: 12px !important; line-height: 15px !important;">
                  <div class="crayon-num" data-line="crayon-59cd4daf9b3c1864879023-1">
                   1
                  </div>
                  <div class="crayon-num crayon-striped-num" data-line="crayon-59cd4daf9b3c1864879023-2">
                   2
                  </div>
                  <div class="crayon-num" data-line="crayon-59cd4daf9b3c1864879023-3">
                   3
                  </div>
                  <div class="crayon-num crayon-striped-num" data-line="crayon-59cd4daf9b3c1864879023-4">
                   4
                  </div>
                  <div class="crayon-num" data-line="crayon-59cd4daf9b3c1864879023-5">
                   5
                  </div>
                  <div class="crayon-num crayon-striped-num" data-line="crayon-59cd4daf9b3c1864879023-6">
                   6
                  </div>
                  <div class="crayon-num" data-line="crayon-59cd4daf9b3c1864879023-7">
                   7
                  </div>
                  <div class="crayon-num crayon-striped-num" data-line="crayon-59cd4daf9b3c1864879023-8">
                   8
                  </div>
                  <div class="crayon-num" data-line="crayon-59cd4daf9b3c1864879023-9">
                   9
                  </div>
                  <div class="crayon-num crayon-striped-num" data-line="crayon-59cd4daf9b3c1864879023-10">
                   10
                  </div>
                  <div class="crayon-num" data-line="crayon-59cd4daf9b3c1864879023-11">
                   11
                  </div>
                  <div class="crayon-num crayon-striped-num" data-line="crayon-59cd4daf9b3c1864879023-12">
                   12
                  </div>
                  <div class="crayon-num" data-line="crayon-59cd4daf9b3c1864879023-13">
                   13
                  </div>
                  <div class="crayon-num crayon-striped-num" data-line="crayon-59cd4daf9b3c1864879023-14">
                   14
                  </div>
                  <div class="crayon-num" data-line="crayon-59cd4daf9b3c1864879023-15">
                   15
                  </div>
                  <div class="crayon-num crayon-striped-num" data-line="crayon-59cd4daf9b3c1864879023-16">
                   16
                  </div>
                  <div class="crayon-num" data-line="crayon-59cd4daf9b3c1864879023-17">
                   17
                  </div>
                  <div class="crayon-num crayon-striped-num" data-line="crayon-59cd4daf9b3c1864879023-18">
                   18
                  </div>
                  <div class="crayon-num" data-line="crayon-59cd4daf9b3c1864879023-19">
                   19
                  </div>
                  <div class="crayon-num crayon-striped-num" data-line="crayon-59cd4daf9b3c1864879023-20">
                   20
                  </div>
                  <div class="crayon-num" data-line="crayon-59cd4daf9b3c1864879023-21">
                   21
                  </div>
                  <div class="crayon-num crayon-striped-num" data-line="crayon-59cd4daf9b3c1864879023-22">
                   22
                  </div>
                  <div class="crayon-num" data-line="crayon-59cd4daf9b3c1864879023-23">
                   23
                  </div>
                  <div class="crayon-num crayon-striped-num" data-line="crayon-59cd4daf9b3c1864879023-24">
                   24
                  </div>
                  <div class="crayon-num" data-line="crayon-59cd4daf9b3c1864879023-25">
                   25
                  </div>
                  <div class="crayon-num crayon-striped-num" data-line="crayon-59cd4daf9b3c1864879023-26">
                   26
                  </div>
                  <div class="crayon-num" data-line="crayon-59cd4daf9b3c1864879023-27">
                   27
                  </div>
                  <div class="crayon-num crayon-striped-num" data-line="crayon-59cd4daf9b3c1864879023-28">
                   28
                  </div>
                  <div class="crayon-num" data-line="crayon-59cd4daf9b3c1864879023-29">
                   29
                  </div>
                  <div class="crayon-num crayon-striped-num" data-line="crayon-59cd4daf9b3c1864879023-30">
                   30
                  </div>
                  <div class="crayon-num" data-line="crayon-59cd4daf9b3c1864879023-31">
                   31
                  </div>
                  <div class="crayon-num crayon-striped-num" data-line="crayon-59cd4daf9b3c1864879023-32">
                   32
                  </div>
                  <div class="crayon-num" data-line="crayon-59cd4daf9b3c1864879023-33">
                   33
                  </div>
                  <div class="crayon-num crayon-striped-num" data-line="crayon-59cd4daf9b3c1864879023-34">
                   34
                  </div>
                  <div class="crayon-num" data-line="crayon-59cd4daf9b3c1864879023-35">
                   35
                  </div>
                  <div class="crayon-num crayon-striped-num" data-line="crayon-59cd4daf9b3c1864879023-36">
                   36
                  </div>
                 </div> </td> 
                <td class="crayon-code">
                 <div class="crayon-pre" style="font-size: 12px !important; line-height: 15px !important; -moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4;">
                  <div class="crayon-line" id="crayon-59cd4daf9b3c1864879023-1">
                   <span class="crayon-r">extends</span>
                   <span class="crayon-h"> </span>
                   <span class="crayon-e">layout</span>
                  </div>
                  <div class="crayon-line crayon-striped-line" id="crayon-59cd4daf9b3c1864879023-2">
                   &nbsp;
                  </div>
                  <div class="crayon-line" id="crayon-59cd4daf9b3c1864879023-3">
                   <span class="crayon-e">block </span>
                   <span class="crayon-v">body</span>
                  </div>
                  <div class="crayon-line crayon-striped-line" id="crayon-59cd4daf9b3c1864879023-4">
                   &nbsp;
                  </div>
                  <div class="crayon-line" id="crayon-59cd4daf9b3c1864879023-5">
                   <span class="crayon-h">&nbsp;&nbsp;</span>
                   <span class="crayon-p">#welcome.jumbotron</span>
                  </div>
                  <div class="crayon-line crayon-striped-line" id="crayon-59cd4daf9b3c1864879023-6">
                   <span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;</span>
                   <span class="crayon-e">h1 </span>
                   <span class="crayon-e">Welcome </span>
                   <span class="crayon-st">to</span>
                   <span class="crayon-h"> </span>
                   <span class="crayon-v">Stormpath</span>
                   <span class="crayon-o">-</span>
                   <span class="crayon-i">Express</span>
                  </div>
                  <div class="crayon-line" id="crayon-59cd4daf9b3c1864879023-7">
                   <span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;</span>
                   <span class="crayon-v">p</span>
                   <span class="crayon-sy">.</span>
                   <span class="crayon-v">lead</span>
                   <span class="crayon-sy">.</span>
                  </div>
                  <div class="crayon-line crayon-striped-line" id="crayon-59cd4daf9b3c1864879023-8">
                   <span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span>
                   <span class="crayon-o">&lt;</span>
                   <span class="crayon-v">br</span>
                   <span class="crayon-o">/</span>
                   <span class="crayon-o">&gt;</span>
                  </div>
                  <div class="crayon-line" id="crayon-59cd4daf9b3c1864879023-9">
                   <span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span>
                   <span class="crayon-o">&lt;</span>
                   <span class="crayon-v">br</span>
                   <span class="crayon-o">/</span>
                   <span class="crayon-o">&gt;</span>
                  </div>
                  <div class="crayon-line crayon-striped-line" id="crayon-59cd4daf9b3c1864879023-10">
                   <span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span>
                   <span class="crayon-e">Welcome </span>
                   <span class="crayon-st">to</span>
                   <span class="crayon-h"> </span>
                   <span class="crayon-r">this</span>
                   <span class="crayon-h"> </span>
                   <span class="crayon-e">gloriously </span>
                   <span class="crayon-v">simple</span>
                   <span class="crayon-h"> </span>
                   <span class="crayon-o">&lt;</span>
                   <span class="crayon-i">a</span>
                   <span class="crayon-h"> </span>
                   <span class="crayon-v">href</span>
                   <span class="crayon-o">=</span>
                   <span class="crayon-s">"https://github.com/stormpath/stormpath-express-sample"</span>
                   <span class="crayon-o">&gt;</span>
                   <span class="crayon-v">Stormpath</span>
                   <span class="crayon-o">&lt;</span>
                   <span class="crayon-o">/</span>
                   <span class="crayon-v">a</span>
                   <span class="crayon-o">&gt;</span>
                  </div>
                  <div class="crayon-line" id="crayon-59cd4daf9b3c1864879023-11">
                   <span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span>
                   <span class="crayon-e">sample </span>
                   <span class="crayon-v">app</span>
                   <span class="crayon-o">!</span>
                  </div>
                  <div class="crayon-line crayon-striped-line" id="crayon-59cd4daf9b3c1864879023-12">
                   <span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;</span>
                   <span class="crayon-e">ul</span>
                  </div>
                  <div class="crayon-line" id="crayon-59cd4daf9b3c1864879023-13">
                   <span class="crayon-e">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span>
                   <span class="crayon-e">li </span>
                   <span class="crayon-v">First</span>
                   <span class="crayon-sy">,</span>
                   <span class="crayon-h"> </span>
                   <span class="crayon-i">take</span>
                   <span class="crayon-h"> </span>
                   <span class="crayon-i">a</span>
                   <span class="crayon-h"> </span>
                   <span class="crayon-e">look </span>
                   <span class="crayon-e">through </span>
                   <span class="crayon-r">this</span>
                   <span class="crayon-h"> </span>
                   <span class="crayon-e">very </span>
                   <span class="crayon-e">basic </span>
                   <span class="crayon-v">site</span>
                   <span class="crayon-sy">.</span>
                  </div>
                  <div class="crayon-line crayon-striped-line" id="crayon-59cd4daf9b3c1864879023-14">
                   <span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span>
                   <span class="crayon-v">li</span>
                   <span class="crayon-sy">.</span>
                  </div>
                  <div class="crayon-line" id="crayon-59cd4daf9b3c1864879023-15">
                   <span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span>
                   <span class="crayon-st">Then</span>
                   <span class="crayon-sy">,</span>
                   <span class="crayon-h"> </span>
                   <span class="crayon-e">check </span>
                   <span class="crayon-e">out </span>
                   <span class="crayon-r">this</span>
                   <span class="crayon-h"> </span>
                   <span class="crayon-i">project</span>
                   <span class="crayon-s">'s source code</span>
                  </div>
                  <div class="crayon-line crayon-striped-line" id="crayon-59cd4daf9b3c1864879023-16">
                   <span class="crayon-s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&lt;a href="https://github.com/stormpath/stormpath-express-sample"&gt;on GitHub&lt;/a&gt;.</span>
                  </div>
                  <div class="crayon-line" id="crayon-59cd4daf9b3c1864879023-17">
                   <span class="crayon-s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;li Lastly, integrate Stormpath into your own sites!</span>
                  </div>
                  <div class="crayon-line crayon-striped-line" id="crayon-59cd4daf9b3c1864879023-18">
                   <span class="crayon-s">&nbsp;&nbsp;&nbsp;&nbsp;&lt;br/&gt;</span>
                  </div>
                  <div class="crayon-line" id="crayon-59cd4daf9b3c1864879023-19">
                   <span class="crayon-s">&nbsp;&nbsp;&nbsp;&nbsp;&lt;br/&gt;</span>
                  </div>
                  <div class="crayon-line crayon-striped-line" id="crayon-59cd4daf9b3c1864879023-20">
                   <span class="crayon-s">&nbsp;&nbsp;&nbsp;&nbsp;h2 What this Sample App Demonstrates</span>
                  </div>
                  <div class="crayon-line" id="crayon-59cd4daf9b3c1864879023-21">
                   <span class="crayon-s">&nbsp;&nbsp;&nbsp;&nbsp;br</span>
                  </div>
                  <div class="crayon-line crayon-striped-line" id="crayon-59cd4daf9b3c1864879023-22">
                   <span class="crayon-s">&nbsp;&nbsp;&nbsp;&nbsp;p.</span>
                  </div>
                  <div class="crayon-line" id="crayon-59cd4daf9b3c1864879023-23">
                   <span class="crayon-s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;This simple app demonstrates how easy it is to register, login, and</span>
                  </div>
                  <div class="crayon-line crayon-striped-line" id="crayon-59cd4daf9b3c1864879023-24">
                   <span class="crayon-s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;securely authenticate users on your website using Stormpath.</span>
                  </div>
                  <div class="crayon-line" id="crayon-59cd4daf9b3c1864879023-25">
                   <span class="crayon-s">&nbsp;&nbsp;&nbsp;&nbsp;p.</span>
                  </div>
                  <div class="crayon-line crayon-striped-line" id="crayon-59cd4daf9b3c1864879023-26">
                   <span class="crayon-s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Aren'</span>
                   <span class="crayon-i">t</span>
                   <span class="crayon-h"> </span>
                   <span class="crayon-i">a</span>
                   <span class="crayon-h"> </span>
                   <span class="crayon-e">Stormpath </span>
                   <span class="crayon-e">user </span>
                   <span class="crayon-v">yet</span>
                   <span class="crayon-sy">?</span>
                  </div>
                  <div class="crayon-line" id="crayon-59cd4daf9b3c1864879023-27">
                   <span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span>
                   <span class="crayon-o">&lt;</span>
                   <span class="crayon-i">a</span>
                   <span class="crayon-h"> </span>
                   <span class="crayon-v">href</span>
                   <span class="crayon-o">=</span>
                   <span class="crayon-s">"https://stormpath.com"</span>
                   <span class="crayon-o">&gt;</span>
                   <span class="crayon-e">Go </span>
                   <span class="crayon-e">signup </span>
                   <span class="crayon-v">now</span>
                   <span class="crayon-o">!</span>
                   <span class="crayon-o">&lt;</span>
                   <span class="crayon-o">/</span>
                   <span class="crayon-v">a</span>
                   <span class="crayon-o">&gt;</span>
                  </div>
                  <div class="crayon-line crayon-striped-line" id="crayon-59cd4daf9b3c1864879023-28">
                   <span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;</span>
                   <span class="crayon-v">p</span>
                   <span class="crayon-sy">.</span>
                  </div>
                  <div class="crayon-line" id="crayon-59cd4daf9b3c1864879023-29">
                   <span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span>
                   <span class="crayon-o">&lt;</span>
                   <span class="crayon-v">b</span>
                   <span class="crayon-o">&gt;</span>
                   <span class="crayon-v">NOTE</span>
                   <span class="crayon-o">&lt;</span>
                   <span class="crayon-o">/</span>
                   <span class="crayon-v">b</span>
                   <span class="crayon-o">&gt;</span>
                   <span class="crayon-o">:</span>
                  </div>
                  <div class="crayon-line crayon-striped-line" id="crayon-59cd4daf9b3c1864879023-30">
                   <span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span>
                   <span class="crayon-r">This</span>
                   <span class="crayon-h"> </span>
                   <span class="crayon-e">app </span>
                   <span class="crayon-e">will </span>
                   <span class="crayon-st">NOT</span>
                   <span class="crayon-h"> </span>
                   <span class="crayon-e">work </span>
                   <span class="crayon-e">until </span>
                   <span class="crayon-e">you </span>
                   <span class="crayon-e">have </span>
                   <span class="crayon-e">gone </span>
                   <span class="crayon-e">through </span>
                   <span class="crayon-e">the </span>
                   <span class="crayon-e">bootstrapping</span>
                  </div>
                  <div class="crayon-line" id="crayon-59cd4daf9b3c1864879023-31">
                   <span class="crayon-e">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span>
                   <span class="crayon-e">instructions </span>
                   <span class="crayon-e">found </span>
                   <span class="crayon-st">in</span>
                   <span class="crayon-h"> </span>
                   <span class="crayon-r">this</span>
                   <span class="crayon-h"> </span>
                   <span class="crayon-i">project</span>
                   <span class="crayon-s">'s &lt;code&gt;README.md&lt;/code&gt; file. For more</span>
                  </div>
                  <div class="crayon-line crayon-striped-line" id="crayon-59cd4daf9b3c1864879023-32">
                   <span class="crayon-s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;information, please follow the guide on this project'</span>
                   <span class="crayon-v">s</span>
                  </div>
                  <div class="crayon-line" id="crayon-59cd4daf9b3c1864879023-33">
                   <span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span>
                   <span class="crayon-o">&lt;</span>
                   <span class="crayon-i">a</span>
                   <span class="crayon-h"> </span>
                   <span class="crayon-v">href</span>
                   <span class="crayon-o">=</span>
                   <span class="crayon-s">"https://github.com/stormpath/stormpath-express-sample"</span>
                   <span class="crayon-o">&gt;</span>
                   <span class="crayon-e">GitHub </span>
                   <span class="crayon-v">page</span>
                   <span class="crayon-o">&lt;</span>
                   <span class="crayon-o">/</span>
                   <span class="crayon-v">a</span>
                   <span class="crayon-o">&gt;</span>
                   <span class="crayon-sy">.</span>
                  </div>
                  <div class="crayon-line crayon-striped-line" id="crayon-59cd4daf9b3c1864879023-34">
                   <span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;</span>
                   <span class="crayon-v">p</span>
                   <span class="crayon-sy">.</span>
                   <span class="crayon-i">bigbutton</span>
                  </div>
                  <div class="crayon-line" id="crayon-59cd4daf9b3c1864879023-35">
                   <span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span>
                   <span class="crayon-v">a</span>
                   <span class="crayon-sy">.</span>
                   <span class="crayon-v">bigbutton</span>
                   <span class="crayon-sy">.</span>
                   <span class="crayon-v">btn</span>
                   <span class="crayon-sy">.</span>
                   <span class="crayon-v">btn</span>
                   <span class="crayon-o">-</span>
                   <span class="crayon-v">lg</span>
                   <span class="crayon-sy">.</span>
                   <span class="crayon-v">btn</span>
                   <span class="crayon-o">-</span>
                   <span class="crayon-e">danger</span>
                   <span class="crayon-sy">(</span>
                   <span class="crayon-v">href</span>
                   <span class="crayon-o">=</span>
                   <span class="crayon-s">'/register'</span>
                   <span class="crayon-sy">,</span>
                   <span class="crayon-h"> </span>
                   <span class="crayon-v">role</span>
                   <span class="crayon-o">=</span>
                   <span class="crayon-s">'button'</span>
                   <span class="crayon-sy">)</span>
                   <span class="crayon-h"> </span>
                   <span class="crayon-i">Register</span>
                  </div>
                  <div class="crayon-line crayon-striped-line" id="crayon-59cd4daf9b3c1864879023-36">
                   &nbsp;
                  </div>
                 </div></td> 
               </tr> 
              </tbody>
             </table> 
            </div> 
           </div> 
           <p></p> 
           <p>This is our home page template. All it does is render some static information for users, so there isn’t much to go into here.</p> 
           <p>Since our <code>layout.jade</code> template is already handling our user-smart nav bar, we don’t need to do anything special ?</p> 
           <h3 id="the-registration-template">The Registration Template<a href="#the-registration-template" class="heading-link"><i class="stp-icons stp-icon-link2"></i></a></h3> 
           <p>Place the following code into <code>views/register.jade</code>:</p> 
           <p></p> 
           <div id="crayon-59cd4daf9b3c4131245298" class="crayon-syntax crayon-theme-stormpath crayon-font-monaco crayon-os-pc print-yes notranslate" data-settings=" minimize scroll-mouseover" style=" margin-top: 12px; margin-bottom: 12px; font-size: 12px !important; line-height: 15px !important;"> 
            <div class="crayon-plain-wrap">
             <textarea wrap="soft" class="crayon-plain print-no" data-settings="dblclick" readonly style="-moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4; font-size: 12px !important; line-height: 15px !important;">
extends layout

block body

  .register
    .row
      .col-lg-6.col-lg-offset-3
        form.bs-example.form-horizontal(method='post', action='')
          fieldset
            legend Create a New Account
            if error
              .alert.alert-dismissable.alert-danger.register-fail
                button.close(data-dismiss='alert', type='button') ×
                p.
                  #{error}
            p.
              Registering for this site will create a new user account for you
              via &lt;a href="https://stormpath.com"&gt;Stormpath&lt;/a&gt;, then log you in
              automatically.
            .alert.alert-dismissable.alert-info
              button.close(data-dismiss='alert', type='button') ×
              strong NOTE:&nbsp;
              Your password must be between 8 and 100 characters, and must
              contain lowercase letters, uppercase letters, and numbers.
            .form-group
              label.col-lg-4.control-label(for='username') Email
              .col-lg-4
                input#username.form-control(name='username', type='email', placeholder='Email', autofocus)
            .form-group
              label.col-lg-4.control-label(for='password') Password
              .col-lg-4
                input#password.form-control(name='password', type='password', placeholder='Password')
            .form-group
              .col-lg-10.col-lg-offset-4
                button.btn.btn-primary(type='submit') Register
        h2 A Note About Stormpath Security
        p.
          In a real environment, you should &lt;b&gt;only deploy your application&lt;/b&gt;
          behind SSL / TLS to avoid having user credentials sent in plain text
          over the network.
        p.
          Stormpath user creation is incredibly secure, is not susceptible to
          any known vulnerabilities (MITM, hashing issues, replace attacks,
          etc.), and provides you with a number of options to improve security
          (including buil-in email verification, among other things).  We will
          not verify your account by email now, but this can be easily enabled.
        p.last-p.
          Stormpath can also be configured to allow for weaker (or force
          stronger) passwords, so it can fit into any application workflow.
</textarea>
            </div> 
            <div class="crayon-main" style=""> 
             <table class="crayon-table"> 
              <tbody>
               <tr class="crayon-row"> 
                <td class="crayon-nums " data-settings="hide"> 
                 <div class="crayon-nums-content" style="font-size: 12px !important; line-height: 15px !important;">
                  <div class="crayon-num" data-line="crayon-59cd4daf9b3c4131245298-1">
                   1
                  </div>
                  <div class="crayon-num crayon-striped-num" data-line="crayon-59cd4daf9b3c4131245298-2">
                   2
                  </div>
                  <div class="crayon-num" data-line="crayon-59cd4daf9b3c4131245298-3">
                   3
                  </div>
                  <div class="crayon-num crayon-striped-num" data-line="crayon-59cd4daf9b3c4131245298-4">
                   4
                  </div>
                  <div class="crayon-num" data-line="crayon-59cd4daf9b3c4131245298-5">
                   5
                  </div>
                  <div class="crayon-num crayon-striped-num" data-line="crayon-59cd4daf9b3c4131245298-6">
                   6
                  </div>
                  <div class="crayon-num" data-line="crayon-59cd4daf9b3c4131245298-7">
                   7
                  </div>
                  <div class="crayon-num crayon-striped-num" data-line="crayon-59cd4daf9b3c4131245298-8">
                   8
                  </div>
                  <div class="crayon-num" data-line="crayon-59cd4daf9b3c4131245298-9">
                   9
                  </div>
                  <div class="crayon-num crayon-striped-num" data-line="crayon-59cd4daf9b3c4131245298-10">
                   10
                  </div>
                  <div class="crayon-num" data-line="crayon-59cd4daf9b3c4131245298-11">
                   11
                  </div>
                  <div class="crayon-num crayon-striped-num" data-line="crayon-59cd4daf9b3c4131245298-12">
                   12
                  </div>
                  <div class="crayon-num" data-line="crayon-59cd4daf9b3c4131245298-13">
                   13
                  </div>
                  <div class="crayon-num crayon-striped-num" data-line="crayon-59cd4daf9b3c4131245298-14">
                   14
                  </div>
                  <div class="crayon-num" data-line="crayon-59cd4daf9b3c4131245298-15">
                   15
                  </div>
                  <div class="crayon-num crayon-striped-num" data-line="crayon-59cd4daf9b3c4131245298-16">
                   16
                  </div>
                  <div class="crayon-num" data-line="crayon-59cd4daf9b3c4131245298-17">
                   17
                  </div>
                  <div class="crayon-num crayon-striped-num" data-line="crayon-59cd4daf9b3c4131245298-18">
                   18
                  </div>
                  <div class="crayon-num" data-line="crayon-59cd4daf9b3c4131245298-19">
                   19
                  </div>
                  <div class="crayon-num crayon-striped-num" data-line="crayon-59cd4daf9b3c4131245298-20">
                   20
                  </div>
                  <div class="crayon-num" data-line="crayon-59cd4daf9b3c4131245298-21">
                   21
                  </div>
                  <div class="crayon-num crayon-striped-num" data-line="crayon-59cd4daf9b3c4131245298-22">
                   22
                  </div>
                  <div class="crayon-num" data-line="crayon-59cd4daf9b3c4131245298-23">
                   23
                  </div>
                  <div class="crayon-num crayon-striped-num" data-line="crayon-59cd4daf9b3c4131245298-24">
                   24
                  </div>
                  <div class="crayon-num" data-line="crayon-59cd4daf9b3c4131245298-25">
                   25
                  </div>
                  <div class="crayon-num crayon-striped-num" data-line="crayon-59cd4daf9b3c4131245298-26">
                   26
                  </div>
                  <div class="crayon-num" data-line="crayon-59cd4daf9b3c4131245298-27">
                   27
                  </div>
                  <div class="crayon-num crayon-striped-num" data-line="crayon-59cd4daf9b3c4131245298-28">
                   28
                  </div>
                  <div class="crayon-num" data-line="crayon-59cd4daf9b3c4131245298-29">
                   29
                  </div>
                  <div class="crayon-num crayon-striped-num" data-line="crayon-59cd4daf9b3c4131245298-30">
                   30
                  </div>
                  <div class="crayon-num" data-line="crayon-59cd4daf9b3c4131245298-31">
                   31
                  </div>
                  <div class="crayon-num crayon-striped-num" data-line="crayon-59cd4daf9b3c4131245298-32">
                   32
                  </div>
                  <div class="crayon-num" data-line="crayon-59cd4daf9b3c4131245298-33">
                   33
                  </div>
                  <div class="crayon-num crayon-striped-num" data-line="crayon-59cd4daf9b3c4131245298-34">
                   34
                  </div>
                  <div class="crayon-num" data-line="crayon-59cd4daf9b3c4131245298-35">
                   35
                  </div>
                  <div class="crayon-num crayon-striped-num" data-line="crayon-59cd4daf9b3c4131245298-36">
                   36
                  </div>
                  <div class="crayon-num" data-line="crayon-59cd4daf9b3c4131245298-37">
                   37
                  </div>
                  <div class="crayon-num crayon-striped-num" data-line="crayon-59cd4daf9b3c4131245298-38">
                   38
                  </div>
                  <div class="crayon-num" data-line="crayon-59cd4daf9b3c4131245298-39">
                   39
                  </div>
                  <div class="crayon-num crayon-striped-num" data-line="crayon-59cd4daf9b3c4131245298-40">
                   40
                  </div>
                  <div class="crayon-num" data-line="crayon-59cd4daf9b3c4131245298-41">
                   41
                  </div>
                  <div class="crayon-num crayon-striped-num" data-line="crayon-59cd4daf9b3c4131245298-42">
                   42
                  </div>
                  <div class="crayon-num" data-line="crayon-59cd4daf9b3c4131245298-43">
                   43
                  </div>
                  <div class="crayon-num crayon-striped-num" data-line="crayon-59cd4daf9b3c4131245298-44">
                   44
                  </div>
                  <div class="crayon-num" data-line="crayon-59cd4daf9b3c4131245298-45">
                   45
                  </div>
                  <div class="crayon-num crayon-striped-num" data-line="crayon-59cd4daf9b3c4131245298-46">
                   46
                  </div>
                  <div class="crayon-num" data-line="crayon-59cd4daf9b3c4131245298-47">
                   47
                  </div>
                  <div class="crayon-num crayon-striped-num" data-line="crayon-59cd4daf9b3c4131245298-48">
                   48
                  </div>
                  <div class="crayon-num" data-line="crayon-59cd4daf9b3c4131245298-49">
                   49
                  </div>
                  <div class="crayon-num crayon-striped-num" data-line="crayon-59cd4daf9b3c4131245298-50">
                   50
                  </div>
                 </div> </td> 
                <td class="crayon-code">
                 <div class="crayon-pre" style="font-size: 12px !important; line-height: 15px !important; -moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4;">
                  <div class="crayon-line" id="crayon-59cd4daf9b3c4131245298-1">
                   <span class="crayon-r">extends</span>
                   <span class="crayon-h"> </span>
                   <span class="crayon-e">layout</span>
                  </div>
                  <div class="crayon-line crayon-striped-line" id="crayon-59cd4daf9b3c4131245298-2">
                   &nbsp;
                  </div>
                  <div class="crayon-line" id="crayon-59cd4daf9b3c4131245298-3">
                   <span class="crayon-e">block </span>
                   <span class="crayon-i">body</span>
                  </div>
                  <div class="crayon-line crayon-striped-line" id="crayon-59cd4daf9b3c4131245298-4">
                   &nbsp;
                  </div>
                  <div class="crayon-line" id="crayon-59cd4daf9b3c4131245298-5">
                   <span class="crayon-h">&nbsp;&nbsp;</span>
                   <span class="crayon-sy">.</span>
                   <span class="crayon-i">register</span>
                  </div>
                  <div class="crayon-line crayon-striped-line" id="crayon-59cd4daf9b3c4131245298-6">
                   <span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;</span>
                   <span class="crayon-sy">.</span>
                   <span class="crayon-i">row</span>
                  </div>
                  <div class="crayon-line" id="crayon-59cd4daf9b3c4131245298-7">
                   <span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span>
                   <span class="crayon-sy">.</span>
                   <span class="crayon-v">col</span>
                   <span class="crayon-o">-</span>
                   <span class="crayon-v">lg</span>
                   <span class="crayon-o">-</span>
                   <span class="crayon-cn">6.col</span>
                   <span class="crayon-o">-</span>
                   <span class="crayon-v">lg</span>
                   <span class="crayon-o">-</span>
                   <span class="crayon-v">offset</span>
                   <span class="crayon-o">-</span>
                   <span class="crayon-cn">3</span>
                  </div>
                  <div class="crayon-line crayon-striped-line" id="crayon-59cd4daf9b3c4131245298-8">
                   <span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span>
                   <span class="crayon-v">form</span>
                   <span class="crayon-sy">.</span>
                   <span class="crayon-v">bs</span>
                   <span class="crayon-o">-</span>
                   <span class="crayon-v">example</span>
                   <span class="crayon-sy">.</span>
                   <span class="crayon-v">form</span>
                   <span class="crayon-o">-</span>
                   <span class="crayon-e">horizontal</span>
                   <span class="crayon-sy">(</span>
                   <span class="crayon-v">method</span>
                   <span class="crayon-o">=</span>
                   <span class="crayon-s">'post'</span>
                   <span class="crayon-sy">,</span>
                   <span class="crayon-h"> </span>
                   <span class="crayon-v">action</span>
                   <span class="crayon-o">=</span>
                   <span class="crayon-s">''</span>
                   <span class="crayon-sy">)</span>
                  </div>
                  <div class="crayon-line" id="crayon-59cd4daf9b3c4131245298-9">
                   <span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span>
                   <span class="crayon-e">fieldset</span>
                  </div>
                  <div class="crayon-line crayon-striped-line" id="crayon-59cd4daf9b3c4131245298-10">
                   <span class="crayon-e">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span>
                   <span class="crayon-e">legend </span>
                   <span class="crayon-i">Create</span>
                   <span class="crayon-h"> </span>
                   <span class="crayon-i">a</span>
                   <span class="crayon-h"> </span>
                   <span class="crayon-r">New</span>
                   <span class="crayon-h"> </span>
                   <span class="crayon-e">Account</span>
                  </div>
                  <div class="crayon-line" id="crayon-59cd4daf9b3c4131245298-11">
                   <span class="crayon-e">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span>
                   <span class="crayon-st">if</span>
                   <span class="crayon-h"> </span>
                   <span class="crayon-i">error</span>
                  </div>
                  <div class="crayon-line crayon-striped-line" id="crayon-59cd4daf9b3c4131245298-12">
                   <span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span>
                   <span class="crayon-sy">.</span>
                   <span class="crayon-v">alert</span>
                   <span class="crayon-sy">.</span>
                   <span class="crayon-v">alert</span>
                   <span class="crayon-o">-</span>
                   <span class="crayon-v">dismissable</span>
                   <span class="crayon-sy">.</span>
                   <span class="crayon-v">alert</span>
                   <span class="crayon-o">-</span>
                   <span class="crayon-v">danger</span>
                   <span class="crayon-sy">.</span>
                   <span class="crayon-v">register</span>
                   <span class="crayon-o">-</span>
                   <span class="crayon-e">fail</span>
                  </div>
                  <div class="crayon-line" id="crayon-59cd4daf9b3c4131245298-13">
                   <span class="crayon-e">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span>
                   <span class="crayon-v">button</span>
                   <span class="crayon-sy">.</span>
                   <span class="crayon-e">close</span>
                   <span class="crayon-sy">(</span>
                   <span class="crayon-v">data</span>
                   <span class="crayon-o">-</span>
                   <span class="crayon-v">dismiss</span>
                   <span class="crayon-o">=</span>
                   <span class="crayon-s">'alert'</span>
                   <span class="crayon-sy">,</span>
                   <span class="crayon-h"> </span>
                   <span class="crayon-v">type</span>
                   <span class="crayon-o">=</span>
                   <span class="crayon-s">'button'</span>
                   <span class="crayon-sy">)</span>
                   <span class="crayon-h"> </span>×
                  </div>
                  <div class="crayon-line crayon-striped-line" id="crayon-59cd4daf9b3c4131245298-14">
                   <span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span>
                   <span class="crayon-v">p</span>
                   <span class="crayon-sy">.</span>
                  </div>
                  <div class="crayon-line" id="crayon-59cd4daf9b3c4131245298-15">
                   <span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span>
                   <span class="crayon-p">#{error}</span>
                  </div>
                  <div class="crayon-line crayon-striped-line" id="crayon-59cd4daf9b3c4131245298-16">
                   <span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span>
                   <span class="crayon-v">p</span>
                   <span class="crayon-sy">.</span>
                  </div>
                  <div class="crayon-line" id="crayon-59cd4daf9b3c4131245298-17">
                   <span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span>
                   <span class="crayon-e">Registering </span>
                   <span class="crayon-st">for</span>
                   <span class="crayon-h"> </span>
                   <span class="crayon-r">this</span>
                   <span class="crayon-h"> </span>
                   <span class="crayon-e">site </span>
                   <span class="crayon-e">will </span>
                   <span class="crayon-i">create</span>
                   <span class="crayon-h"> </span>
                   <span class="crayon-i">a</span>
                   <span class="crayon-h"> </span>
                   <span class="crayon-r">new</span>
                   <span class="crayon-h"> </span>
                   <span class="crayon-e">user </span>
                   <span class="crayon-e">account </span>
                   <span class="crayon-st">for</span>
                   <span class="crayon-h"> </span>
                   <span class="crayon-e">you</span>
                  </div>
                  <div class="crayon-line crayon-striped-line" id="crayon-59cd4daf9b3c4131245298-18">
                   <span class="crayon-e">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span>
                   <span class="crayon-v">via</span>
                   <span class="crayon-h"> </span>
                   <span class="crayon-o">&lt;</span>
                   <span class="crayon-i">a</span>
                   <span class="crayon-h"> </span>
                   <span class="crayon-v">href</span>
                   <span class="crayon-o">=</span>
                   <span class="crayon-s">"https://stormpath.com"</span>
                   <span class="crayon-o">&gt;</span>
                   <span class="crayon-v">Stormpath</span>
                   <span class="crayon-o">&lt;</span>
                   <span class="crayon-o">/</span>
                   <span class="crayon-v">a</span>
                   <span class="crayon-o">&gt;</span>
                   <span class="crayon-sy">,</span>
                   <span class="crayon-h"> </span>
                   <span class="crayon-st">then</span>
                   <span class="crayon-h"> </span>
                   <span class="crayon-e">log </span>
                   <span class="crayon-e">you </span>
                   <span class="crayon-st">in</span>
                  </div>
                  <div class="crayon-line" id="crayon-59cd4daf9b3c4131245298-19">
                   <span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span>
                   <span class="crayon-v">automatically</span>
                   <span class="crayon-sy">.</span>
                  </div>
                  <div class="crayon-line crayon-striped-line" id="crayon-59cd4daf9b3c4131245298-20">
                   <span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span>
                   <span class="crayon-sy">.</span>
                   <span class="crayon-v">alert</span>
                   <span class="crayon-sy">.</span>
                   <span class="crayon-v">alert</span>
                   <span class="crayon-o">-</span>
                   <span class="crayon-v">dismissable</span>
                   <span class="crayon-sy">.</span>
                   <span class="crayon-v">alert</span>
                   <span class="crayon-o">-</span>
                   <span class="crayon-e">info</span>
                  </div>
                  <div class="crayon-line" id="crayon-59cd4daf9b3c4131245298-21">
                   <span class="crayon-e">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span>
                   <span class="crayon-v">button</span>
                   <span class="crayon-sy">.</span>
                   <span class="crayon-e">close</span>
                   <span class="crayon-sy">(</span>
                   <span class="crayon-v">data</span>
                   <span class="crayon-o">-</span>
                   <span class="crayon-v">dismiss</span>
                   <span class="crayon-o">=</span>
                   <span class="crayon-s">'alert'</span>
                   <span class="crayon-sy">,</span>
                   <span class="crayon-h"> </span>
                   <span class="crayon-v">type</span>
                   <span class="crayon-o">=</span>
                   <span class="crayon-s">'button'</span>
                   <span class="crayon-sy">)</span>
                   <span class="crayon-h"> </span>×
                  </div>
                  <div class="crayon-line crayon-striped-line" id="crayon-59cd4daf9b3c4131245298-22">
                   <span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span>
                   <span class="crayon-e">strong </span>
                   <span class="crayon-v">NOTE</span>
                   <span class="crayon-o">:</span>&nbsp;
                  </div>
                  <div class="crayon-line" id="crayon-59cd4daf9b3c4131245298-23">
                   <span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span>
                   <span class="crayon-e">Your </span>
                   <span class="crayon-e">password </span>
                   <span class="crayon-e">must </span>
                   <span class="crayon-e">be </span>
                   <span class="crayon-i">between</span>
                   <span class="crayon-h"> </span>
                   <span class="crayon-cn">8</span>
                   <span class="crayon-h"> </span>
                   <span class="crayon-st">and</span>
                   <span class="crayon-h"> </span>
                   <span class="crayon-cn">100</span>
                   <span class="crayon-h"> </span>
                   <span class="crayon-v">characters</span>
                   <span class="crayon-sy">,</span>
                   <span class="crayon-h"> </span>
                   <span class="crayon-st">and</span>
                   <span class="crayon-h"> </span>
                   <span class="crayon-e">must</span>
                  </div>
                  <div class="crayon-line crayon-striped-line" id="crayon-59cd4daf9b3c4131245298-24">
                   <span class="crayon-e">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span>
                   <span class="crayon-e">contain </span>
                   <span class="crayon-e">lowercase </span>
                   <span class="crayon-v">letters</span>
                   <span class="crayon-sy">,</span>
                   <span class="crayon-h"> </span>
                   <span class="crayon-e">uppercase </span>
                   <span class="crayon-v">letters</span>
                   <span class="crayon-sy">,</span>
                   <span class="crayon-h"> </span>
                   <span class="crayon-st">and</span>
                   <span class="crayon-h"> </span>
                   <span class="crayon-v">numbers</span>
                   <span class="crayon-sy">.</span>
                  </div>
                  <div class="crayon-line" id="crayon-59cd4daf9b3c4131245298-25">
                   <span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span>
                   <span class="crayon-sy">.</span>
                   <span class="crayon-v">form</span>
                   <span class="crayon-o">-</span>
                   <span class="crayon-e">group</span>
                  </div>
                  <div class="crayon-line crayon-striped-line" id="crayon-59cd4daf9b3c4131245298-26">
                   <span class="crayon-e">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span>
                   <span class="crayon-v">label</span>
                   <span class="crayon-sy">.</span>
                   <span class="crayon-v">col</span>
                   <span class="crayon-o">-</span>
                   <span class="crayon-v">lg</span>
                   <span class="crayon-o">-</span>
                   <span class="crayon-cn">4.control</span>
                   <span class="crayon-o">-</span>
                   <span class="crayon-e">label</span>
                   <span class="crayon-sy">(</span>
                   <span class="crayon-st">for</span>
                   <span class="crayon-o">=</span>
                   <span class="crayon-s">'username'</span>
                   <span class="crayon-sy">)</span>
                   <span class="crayon-h"> </span>
                   <span class="crayon-i">Email</span>
                  </div>
                  <div class="crayon-line" id="crayon-59cd4daf9b3c4131245298-27">
                   <span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span>
                   <span class="crayon-sy">.</span>
                   <span class="crayon-v">col</span>
                   <span class="crayon-o">-</span>
                   <span class="crayon-v">lg</span>
                   <span class="crayon-o">-</span>
                   <span class="crayon-cn">4</span>
                  </div>
                  <div class="crayon-line crayon-striped-line" id="crayon-59cd4daf9b3c4131245298-28">
                   <span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span>
                   <span class="crayon-v">input</span>
                   <span class="crayon-p">#username.form-control(name='username', type='email', placeholder='Email', autofocus)</span>
                  </div>
                  <div class="crayon-line" id="crayon-59cd4daf9b3c4131245298-29">
                   <span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span>
                   <span class="crayon-sy">.</span>
                   <span class="crayon-v">form</span>
                   <span class="crayon-o">-</span>
                   <span class="crayon-e">group</span>
                  </div>
                  <div class="crayon-line crayon-striped-line" id="crayon-59cd4daf9b3c4131245298-30">
                   <span class="crayon-e">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span>
                   <span class="crayon-v">label</span>
                   <span class="crayon-sy">.</span>
                   <span class="crayon-v">col</span>
                   <span class="crayon-o">-</span>
                   <span class="crayon-v">lg</span>
                   <span class="crayon-o">-</span>
                   <span class="crayon-cn">4.control</span>
                   <span class="crayon-o">-</span>
                   <span class="crayon-e">label</span>
                   <span class="crayon-sy">(</span>
                   <span class="crayon-st">for</span>
                   <span class="crayon-o">=</span>
                   <span class="crayon-s">'password'</span>
                   <span class="crayon-sy">)</span>
                   <span class="crayon-h"> </span>
                   <span class="crayon-i">Password</span>
                  </div>
                  <div class="crayon-line" id="crayon-59cd4daf9b3c4131245298-31">
                   <span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span>
                   <span class="crayon-sy">.</span>
                   <span class="crayon-v">col</span>
                   <span class="crayon-o">-</span>
                   <span class="crayon-v">lg</span>
                   <span class="crayon-o">-</span>
                   <span class="crayon-cn">4</span>
                  </div>
                  <div class="crayon-line crayon-striped-line" id="crayon-59cd4daf9b3c4131245298-32">
                   <span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span>
                   <span class="crayon-v">input</span>
                   <span class="crayon-p">#password.form-control(name='password', type='password', placeholder='Password')</span>
                  </div>
                  <div class="crayon-line" id="crayon-59cd4daf9b3c4131245298-33">
                   <span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span>
                   <span class="crayon-sy">.</span>
                   <span class="crayon-v">form</span>
                   <span class="crayon-o">-</span>
                   <span class="crayon-i">group</span>
                  </div>
                  <div class="crayon-line crayon-striped-line" id="crayon-59cd4daf9b3c4131245298-34">
                   <span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span>
                   <span class="crayon-sy">.</span>
                   <span class="crayon-v">col</span>
                   <span class="crayon-o">-</span>
                   <span class="crayon-v">lg</span>
                   <span class="crayon-o">-</span>
                   <span class="crayon-cn">10.col</span>
                   <span class="crayon-o">-</span>
                   <span class="crayon-v">lg</span>
                   <span class="crayon-o">-</span>
                   <span class="crayon-v">offset</span>
                   <span class="crayon-o">-</span>
                   <span class="crayon-cn">4</span>
                  </div>
                  <div class="crayon-line" id="crayon-59cd4daf9b3c4131245298-35">
                   <span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span>
                   <span class="crayon-v">button</span>
                   <span class="crayon-sy">.</span>
                   <span class="crayon-v">btn</span>
                   <span class="crayon-sy">.</span>
                   <span class="crayon-v">btn</span>
                   <span class="crayon-o">-</span>
                   <span class="crayon-e">primary</span>
                   <span class="crayon-sy">(</span>
                   <span class="crayon-v">type</span>
                   <span class="crayon-o">=</span>
                   <span class="crayon-s">'submit'</span>
                   <span class="crayon-sy">)</span>
                   <span class="crayon-h"> </span>
                   <span class="crayon-e">Register</span>
                  </div>
                  <div class="crayon-line crayon-striped-line" id="crayon-59cd4daf9b3c4131245298-36">
                   <span class="crayon-e">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span>
                   <span class="crayon-i">h2</span>
                   <span class="crayon-h"> </span>
                   <span class="crayon-i">A</span>
                   <span class="crayon-h"> </span>
                   <span class="crayon-e">Note </span>
                   <span class="crayon-e">About </span>
                   <span class="crayon-e">Stormpath </span>
                   <span class="crayon-i">Security</span>
                  </div>
                  <div class="crayon-line" id="crayon-59cd4daf9b3c4131245298-37">
                   <span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span>
                   <span class="crayon-v">p</span>
                   <span class="crayon-sy">.</span>
                  </div>
                  <div class="crayon-line crayon-striped-line" id="crayon-59cd4daf9b3c4131245298-38">
                   <span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span>
                   <span class="crayon-st">In</span>
                   <span class="crayon-h"> </span>
                   <span class="crayon-i">a</span>
                   <span class="crayon-h"> </span>
                   <span class="crayon-e">real </span>
                   <span class="crayon-v">environment</span>
                   <span class="crayon-sy">,</span>
                   <span class="crayon-h"> </span>
                   <span class="crayon-e">you </span>
                   <span class="crayon-v">should</span>
                   <span class="crayon-h"> </span>
                   <span class="crayon-o">&lt;</span>
                   <span class="crayon-v">b</span>
                   <span class="crayon-o">&gt;</span>
                   <span class="crayon-e">only </span>
                   <span class="crayon-e">deploy </span>
                   <span class="crayon-e">your </span>
                   <span class="crayon-v">application</span>
                   <span class="crayon-o">&lt;</span>
                   <span class="crayon-o">/</span>
                   <span class="crayon-v">b</span>
                   <span class="crayon-o">&gt;</span>
                  </div>
                  <div class="crayon-line" id="crayon-59cd4daf9b3c4131245298-39">
                   <span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span>
                   <span class="crayon-e">behind </span>
                   <span class="crayon-v">SSL</span>
                   <span class="crayon-h"> </span>
                   <span class="crayon-o">/</span>
                   <span class="crayon-h"> </span>
                   <span class="crayon-e">TLS </span>
                   <span class="crayon-st">to</span>
                   <span class="crayon-h"> </span>
                   <span class="crayon-e">avoid </span>
                   <span class="crayon-e">having </span>
                   <span class="crayon-e">user </span>
                   <span class="crayon-e">credentials </span>
                   <span class="crayon-e">sent </span>
                   <span class="crayon-st">in</span>
                   <span class="crayon-h"> </span>
                   <span class="crayon-e">plain </span>
                   <span class="crayon-e">text</span>
                  </div>
                  <div class="crayon-line crayon-striped-line" id="crayon-59cd4daf9b3c4131245298-40">
                   <span class="crayon-e">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span>
                   <span class="crayon-e">over </span>
                   <span class="crayon-e">the </span>
                   <span class="crayon-v">network</span>
                   <span class="crayon-sy">.</span>
                  </div>
                  <div class="crayon-line" id="crayon-59cd4daf9b3c4131245298-41">
                   <span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span>
                   <span class="crayon-v">p</span>
                   <span class="crayon-sy">.</span>
                  </div>
                  <div class="crayon-line crayon-striped-line" id="crayon-59cd4daf9b3c4131245298-42">
                   <span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span>
                   <span class="crayon-e">Stormpath </span>
                   <span class="crayon-e">user </span>
                   <span class="crayon-e">creation </span>
                   <span class="crayon-st">is</span>
                   <span class="crayon-h"> </span>
                   <span class="crayon-e">incredibly </span>
                   <span class="crayon-v">secure</span>
                   <span class="crayon-sy">,</span>
                   <span class="crayon-h"> </span>
                   <span class="crayon-st">is</span>
                   <span class="crayon-h"> </span>
                   <span class="crayon-st">not</span>
                   <span class="crayon-h"> </span>
                   <span class="crayon-e">susceptible </span>
                   <span class="crayon-st">to</span>
                  </div>
                  <div class="crayon-line" id="crayon-59cd4daf9b3c4131245298-43">
                   <span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span>
                   <span class="crayon-e">any </span>
                   <span class="crayon-e">known </span>
                   <span class="crayon-e">vulnerabilities</span>
                   <span class="crayon-h"> </span>
                   <span class="crayon-sy">(</span>
                   <span class="crayon-v">MITM</span>
                   <span class="crayon-sy">,</span>
                   <span class="crayon-h"> </span>
                   <span class="crayon-e">hashing </span>
                   <span class="crayon-v">issues</span>
                   <span class="crayon-sy">,</span>
                   <span class="crayon-h"> </span>
                   <span class="crayon-e">replace </span>
                   <span class="crayon-v">attacks</span>
                   <span class="crayon-sy">,</span>
                  </div>
                  <div class="crayon-line crayon-striped-line" id="crayon-59cd4daf9b3c4131245298-44">
                   <span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span>
                   <span class="crayon-v">etc</span>
                   <span class="crayon-sy">.</span>
                   <span class="crayon-sy">)</span>
                   <span class="crayon-sy">,</span>
                   <span class="crayon-h"> </span>
                   <span class="crayon-st">and</span>
                   <span class="crayon-h"> </span>
                   <span class="crayon-e">provides </span>
                   <span class="crayon-e">you </span>
                   <span class="crayon-i">with</span>
                   <span class="crayon-h"> </span>
                   <span class="crayon-i">a</span>
                   <span class="crayon-h"> </span>
                   <span class="crayon-e">number </span>
                   <span class="crayon-e">of </span>
                   <span class="crayon-e">options </span>
                   <span class="crayon-st">to</span>
                   <span class="crayon-h"> </span>
                   <span class="crayon-e">improve </span>
                   <span class="crayon-e">security</span>
                  </div>
                  <div class="crayon-line" id="crayon-59cd4daf9b3c4131245298-45">
                   <span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span>
                   <span class="crayon-sy">(</span>
                   <span class="crayon-e">including </span>
                   <span class="crayon-v">buil</span>
                   <span class="crayon-o">-</span>
                   <span class="crayon-st">in</span>
                   <span class="crayon-h"> </span>
                   <span class="crayon-e">email </span>
                   <span class="crayon-v">verification</span>
                   <span class="crayon-sy">,</span>
                   <span class="crayon-h"> </span>
                   <span class="crayon-e">among </span>
                   <span class="crayon-e">other </span>
                   <span class="crayon-v">things</span>
                   <span class="crayon-sy">)</span>
                   <span class="crayon-sy">.</span>
                   <span class="crayon-h">&nbsp;&nbsp;</span>
                   <span class="crayon-e">We </span>
                   <span class="crayon-e">will</span>
                  </div>
                  <div class="crayon-line crayon-striped-line" id="crayon-59cd4daf9b3c4131245298-46">
                   <span class="crayon-e">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span>
                   <span class="crayon-st">not</span>
                   <span class="crayon-h"> </span>
                   <span class="crayon-e">verify </span>
                   <span class="crayon-e">your </span>
                   <span class="crayon-e">account </span>
                   <span class="crayon-e">by </span>
                   <span class="crayon-e">email </span>
                   <span class="crayon-v">now</span>
                   <span class="crayon-sy">,</span>
                   <span class="crayon-h"> </span>
                   <span class="crayon-e">but </span>
                   <span class="crayon-r">this</span>
                   <span class="crayon-h"> </span>
                   <span class="crayon-e">can </span>
                   <span class="crayon-e">be </span>
                   <span class="crayon-e">easily </span>
                   <span class="crayon-v">enabled</span>
                   <span class="crayon-sy">.</span>
                  </div>
                  <div class="crayon-line" id="crayon-59cd4daf9b3c4131245298-47">
                   <span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span>
                   <span class="crayon-v">p</span>
                   <span class="crayon-sy">.</span>
                   <span class="crayon-v">last</span>
                   <span class="crayon-o">-</span>
                   <span class="crayon-v">p</span>
                   <span class="crayon-sy">.</span>
                  </div>
                  <div class="crayon-line crayon-striped-line" id="crayon-59cd4daf9b3c4131245298-48">
                   <span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span>
                   <span class="crayon-e">Stormpath </span>
                   <span class="crayon-e">can </span>
                   <span class="crayon-e">also </span>
                   <span class="crayon-e">be </span>
                   <span class="crayon-e">configured </span>
                   <span class="crayon-st">to</span>
                   <span class="crayon-h"> </span>
                   <span class="crayon-e">allow </span>
                   <span class="crayon-st">for</span>
                   <span class="crayon-h"> </span>
                   <span class="crayon-e">weaker</span>
                   <span class="crayon-h"> </span>
                   <span class="crayon-sy">(</span>
                   <span class="crayon-st">or</span>
                   <span class="crayon-h"> </span>
                   <span class="crayon-e">force</span>
                  </div>
                  <div class="crayon-line" id="crayon-59cd4daf9b3c4131245298-49">
                   <span class="crayon-e">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span>
                   <span class="crayon-v">stronger</span>
                   <span class="crayon-sy">)</span>
                   <span class="crayon-h"> </span>
                   <span class="crayon-v">passwords</span>
                   <span class="crayon-sy">,</span>
                   <span class="crayon-h"> </span>
                   <span class="crayon-e">so </span>
                   <span class="crayon-e">it </span>
                   <span class="crayon-e">can </span>
                   <span class="crayon-e">fit </span>
                   <span class="crayon-e">into </span>
                   <span class="crayon-e">any </span>
                   <span class="crayon-e">application </span>
                   <span class="crayon-v">workflow</span>
                   <span class="crayon-sy">.</span>
                  </div>
                  <div class="crayon-line crayon-striped-line" id="crayon-59cd4daf9b3c4131245298-50">
                   &nbsp;
                  </div>
                 </div></td> 
               </tr> 
              </tbody>
             </table> 
            </div> 
           </div> 
           <p></p> 
           <p>This page handles user registration.</p> 
           <p>Take a close look at the form — we’re specifying two fields for the user to input: email and password. Take a look at the email input box, however:</p> 
           <p></p> 
           <div id="crayon-59cd4daf9b3c9786617069" class="crayon-syntax crayon-theme-stormpath crayon-font-monaco crayon-os-pc print-yes notranslate" data-settings=" minimize scroll-mouseover" style=" margin-top: 12px; margin-bottom: 12px; font-size: 12px !important; line-height: 15px !important;"> 
            <div class="crayon-plain-wrap">
             <textarea wrap="soft" class="crayon-plain print-no" data-settings="dblclick" readonly style="-moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4; font-size: 12px !important; line-height: 15px !important;">
input#username.form-control(name='username', type='email', placeholder='Email', autofocus)
</textarea>
            </div> 
            <div class="crayon-main" style=""> 
             <table class="crayon-table"> 
              <tbody>
               <tr class="crayon-row"> 
                <td class="crayon-nums " data-settings="hide"> 
                 <div class="crayon-nums-content" style="font-size: 12px !important; line-height: 15px !important;">
                  <div class="crayon-num" data-line="crayon-59cd4daf9b3c9786617069-1">
                   1
                  </div>
                  <div class="crayon-num crayon-striped-num" data-line="crayon-59cd4daf9b3c9786617069-2">
                   2
                  </div>
                 </div> </td> 
                <td class="crayon-code">
                 <div class="crayon-pre" style="font-size: 12px !important; line-height: 15px !important; -moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4;">
                  <div class="crayon-line" id="crayon-59cd4daf9b3c9786617069-1">
                   <span class="crayon-v">input</span>
                   <span class="crayon-p">#username.form-control(name='username', type='email', placeholder='Email', autofocus)</span>
                  </div>
                  <div class="crayon-line crayon-striped-line" id="crayon-59cd4daf9b3c9786617069-2">
                   &nbsp;
                  </div>
                 </div></td> 
               </tr> 
              </tbody>
             </table> 
            </div> 
           </div> 
           <p></p> 
           <p>Although we’re collecting a user’s email address here, we’re setting the HTML <code>name</code> attribute to the value <code>username</code>. This is to make passport happy.</p> 
           <p>Passport expects <code>username</code> and <code>password</code> form elements, so that’s what we’ll use (<em>despite the fact that we’re signing a user with just email / password</em>).</p> 
           <p>We’ll also render an error message to the user (<em>if there is one</em>). This will be called if the registration fails for some reason, displaying a user-friendly error message.</p> 
           <h3 id="the-login-template">The Login Template<a href="#the-login-template" class="heading-link"><i class="stp-icons stp-icon-link2"></i></a></h3> 
           <p>Start by putting the following code into <code>views/login.jade</code>:</p> 
           <p></p> 
           <div id="crayon-59cd4daf9b3cc264195898" class="crayon-syntax crayon-theme-stormpath crayon-font-monaco crayon-os-pc print-yes notranslate" data-settings=" minimize scroll-mouseover" style=" margin-top: 12px; margin-bottom: 12px; font-size: 12px !important; line-height: 15px !important;"> 
            <div class="crayon-plain-wrap">
             <textarea wrap="soft" class="crayon-plain print-no" data-settings="dblclick" readonly style="-moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4; font-size: 12px !important; line-height: 15px !important;">
extends layout

block body

  .login
    .row
      .col-lg-6.col-lg-offset-3
        form.bs-example.form-horizontal(method='post', action='')
          fieldset
            legend Login
            if error
              .alert.alert-dismissable.alert-danger.login-fail
                button.close(type='button', data-dismiss='alert') ×
                p.
                  #{error}
            p.last-p.
              Once you enter your credentials and hit the Login button below,
              your credentials will be securely sent to
              &lt;a href="https://stormpath.com"&gt;Stormpath&lt;/a&gt; and verified.  If
              your credentials are valid, you'll be logged in using a secure
              session -- otherwise, you'll get a user friendly error message.
            .form-group
              label.col-lg-4.control-label(for='username') Email
              .col-lg-4
                input#username.form-control(type='email', name='username', placeholder='Email', autofocus)
            .form-group
              label.col-lg-4.control-label(for='password') Password
              .col-lg-4
                input#password.form-control(type='password', name='password', placeholder='Password')
            .form-group
              .col-lg-10.col-lg-offset-4
                button.btn.btn-primary(type='submit') Login
</textarea>
            </div> 
            <div class="crayon-main" style=""> 
             <table class="crayon-table"> 
              <tbody>
               <tr class="crayon-row"> 
                <td class="crayon-nums " data-settings="hide"> 
                 <div class="crayon-nums-content" style="font-size: 12px !important; line-height: 15px !important;">
                  <div class="crayon-num" data-line="crayon-59cd4daf9b3cc264195898-1">
                   1
                  </div>
                  <div class="crayon-num crayon-striped-num" data-line="crayon-59cd4daf9b3cc264195898-2">
                   2
                  </div>
                  <div class="crayon-num" data-line="crayon-59cd4daf9b3cc264195898-3">
                   3
                  </div>
                  <div class="crayon-num crayon-striped-num" data-line="crayon-59cd4daf9b3cc264195898-4">
                   4
                  </div>
                  <div class="crayon-num" data-line="crayon-59cd4daf9b3cc264195898-5">
                   5
                  </div>
                  <div class="crayon-num crayon-striped-num" data-line="crayon-59cd4daf9b3cc264195898-6">
                   6
                  </div>
                  <div class="crayon-num" data-line="crayon-59cd4daf9b3cc264195898-7">
                   7
                  </div>
                  <div class="crayon-num crayon-striped-num" data-line="crayon-59cd4daf9b3cc264195898-8">
                   8
                  </div>
                  <div class="crayon-num" data-line="crayon-59cd4daf9b3cc264195898-9">
                   9
                  </div>
                  <div class="crayon-num crayon-striped-num" data-line="crayon-59cd4daf9b3cc264195898-10">
                   10
                  </div>
                  <div class="crayon-num" data-line="crayon-59cd4daf9b3cc264195898-11">
                   11
                  </div>
                  <div class="crayon-num crayon-striped-num" data-line="crayon-59cd4daf9b3cc264195898-12">
                   12
                  </div>
                  <div class="crayon-num" data-line="crayon-59cd4daf9b3cc264195898-13">
                   13
                  </div>
                  <div class="crayon-num crayon-striped-num" data-line="crayon-59cd4daf9b3cc264195898-14">
                   14
                  </div>
                  <div class="crayon-num" data-line="crayon-59cd4daf9b3cc264195898-15">
                   15
                  </div>
                  <div class="crayon-num crayon-striped-num" data-line="crayon-59cd4daf9b3cc264195898-16">
                   16
                  </div>
                  <div class="crayon-num" data-line="crayon-59cd4daf9b3cc264195898-17">
                   17
                  </div>
                  <div class="crayon-num crayon-striped-num" data-line="crayon-59cd4daf9b3cc264195898-18">
                   18
                  </div>
                  <div class="crayon-num" data-line="crayon-59cd4daf9b3cc264195898-19">
                   19
                  </div>
                  <div class="crayon-num crayon-striped-num" data-line="crayon-59cd4daf9b3cc264195898-20">
                   20
                  </div>
                  <div class="crayon-num" data-line="crayon-59cd4daf9b3cc264195898-21">
                   21
                  </div>
                  <div class="crayon-num crayon-striped-num" data-line="crayon-59cd4daf9b3cc264195898-22">
                   22
                  </div>
                  <div class="crayon-num" data-line="crayon-59cd4daf9b3cc264195898-23">
                   23
                  </div>
                  <div class="crayon-num crayon-striped-num" data-line="crayon-59cd4daf9b3cc264195898-24">
                   24
                  </div>
                  <div class="crayon-num" data-line="crayon-59cd4daf9b3cc264195898-25">
                   25
                  </div>
                  <div class="crayon-num crayon-striped-num" data-line="crayon-59cd4daf9b3cc264195898-26">
                   26
                  </div>
                  <div class="crayon-num" data-line="crayon-59cd4daf9b3cc264195898-27">
                   27
                  </div>
                  <div class="crayon-num crayon-striped-num" data-line="crayon-59cd4daf9b3cc264195898-28">
                   28
                  </div>
                  <div class="crayon-num" data-line="crayon-59cd4daf9b3cc264195898-29">
                   29
                  </div>
                  <div class="crayon-num crayon-striped-num" data-line="crayon-59cd4daf9b3cc264195898-30">
                   30
                  </div>
                  <div class="crayon-num" data-line="crayon-59cd4daf9b3cc264195898-31">
                   31
                  </div>
                  <div class="crayon-num crayon-striped-num" data-line="crayon-59cd4daf9b3cc264195898-32">
                   32
                  </div>
                  <div class="crayon-num" data-line="crayon-59cd4daf9b3cc264195898-33">
                   33
                  </div>
                 </div> </td> 
                <td class="crayon-code">
                 <div class="crayon-pre" style="font-size: 12px !important; line-height: 15px !important; -moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4;">
                  <div class="crayon-line" id="crayon-59cd4daf9b3cc264195898-1">
                   <span class="crayon-r">extends</span>
                   <span class="crayon-h"> </span>
                   <span class="crayon-e">layout</span>
                  </div>
                  <div class="crayon-line crayon-striped-line" id="crayon-59cd4daf9b3cc264195898-2">
                   &nbsp;
                  </div>
                  <div class="crayon-line" id="crayon-59cd4daf9b3cc264195898-3">
                   <span class="crayon-e">block </span>
                   <span class="crayon-i">body</span>
                  </div>
                  <div class="crayon-line crayon-striped-line" id="crayon-59cd4daf9b3cc264195898-4">
                   &nbsp;
                  </div>
                  <div class="crayon-line" id="crayon-59cd4daf9b3cc264195898-5">
                   <span class="crayon-h">&nbsp;&nbsp;</span>
                   <span class="crayon-sy">.</span>
                   <span class="crayon-i">login</span>
                  </div>
                  <div class="crayon-line crayon-striped-line" id="crayon-59cd4daf9b3cc264195898-6">
                   <span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;</span>
                   <span class="crayon-sy">.</span>
                   <span class="crayon-i">row</span>
                  </div>
                  <div class="crayon-line" id="crayon-59cd4daf9b3cc264195898-7">
                   <span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span>
                   <span class="crayon-sy">.</span>
                   <span class="crayon-v">col</span>
                   <span class="crayon-o">-</span>
                   <span class="crayon-v">lg</span>
                   <span class="crayon-o">-</span>
                   <span class="crayon-cn">6.col</span>
                   <span class="crayon-o">-</span>
                   <span class="crayon-v">lg</span>
                   <span class="crayon-o">-</span>
                   <span class="crayon-v">offset</span>
                   <span class="crayon-o">-</span>
                   <span class="crayon-cn">3</span>
                  </div>
                  <div class="crayon-line crayon-striped-line" id="crayon-59cd4daf9b3cc264195898-8">
                   <span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span>
                   <span class="crayon-v">form</span>
                   <span class="crayon-sy">.</span>
                   <span class="crayon-v">bs</span>
                   <span class="crayon-o">-</span>
                   <span class="crayon-v">example</span>
                   <span class="crayon-sy">.</span>
                   <span class="crayon-v">form</span>
                   <span class="crayon-o">-</span>
                   <span class="crayon-e">horizontal</span>
                   <span class="crayon-sy">(</span>
                   <span class="crayon-v">method</span>
                   <span class="crayon-o">=</span>
                   <span class="crayon-s">'post'</span>
                   <span class="crayon-sy">,</span>
                   <span class="crayon-h"> </span>
                   <span class="crayon-v">action</span>
                   <span class="crayon-o">=</span>
                   <span class="crayon-s">''</span>
                   <span class="crayon-sy">)</span>
                  </div>
                  <div class="crayon-line" id="crayon-59cd4daf9b3cc264195898-9">
                   <span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span>
                   <span class="crayon-e">fieldset</span>
                  </div>
                  <div class="crayon-line crayon-striped-line" id="crayon-59cd4daf9b3cc264195898-10">
                   <span class="crayon-e">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span>
                   <span class="crayon-e">legend </span>
                   <span class="crayon-e">Login</span>
                  </div>
                  <div class="crayon-line" id="crayon-59cd4daf9b3cc264195898-11">
                   <span class="crayon-e">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span>
                   <span class="crayon-st">if</span>
                   <span class="crayon-h"> </span>
                   <span class="crayon-i">error</span>
                  </div>
                  <div class="crayon-line crayon-striped-line" id="crayon-59cd4daf9b3cc264195898-12">
                   <span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span>
                   <span class="crayon-sy">.</span>
                   <span class="crayon-v">alert</span>
                   <span class="crayon-sy">.</span>
                   <span class="crayon-v">alert</span>
                   <span class="crayon-o">-</span>
                   <span class="crayon-v">dismissable</span>
                   <span class="crayon-sy">.</span>
                   <span class="crayon-v">alert</span>
                   <span class="crayon-o">-</span>
                   <span class="crayon-v">danger</span>
                   <span class="crayon-sy">.</span>
                   <span class="crayon-v">login</span>
                   <span class="crayon-o">-</span>
                   <span class="crayon-e">fail</span>
                  </div>
                  <div class="crayon-line" id="crayon-59cd4daf9b3cc264195898-13">
                   <span class="crayon-e">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span>
                   <span class="crayon-v">button</span>
                   <span class="crayon-sy">.</span>
                   <span class="crayon-e">close</span>
                   <span class="crayon-sy">(</span>
                   <span class="crayon-v">type</span>
                   <span class="crayon-o">=</span>
                   <span class="crayon-s">'button'</span>
                   <span class="crayon-sy">,</span>
                   <span class="crayon-h"> </span>
                   <span class="crayon-v">data</span>
                   <span class="crayon-o">-</span>
                   <span class="crayon-v">dismiss</span>
                   <span class="crayon-o">=</span>
                   <span class="crayon-s">'alert'</span>
                   <span class="crayon-sy">)</span>
                   <span class="crayon-h"> </span>×
                  </div>
                  <div class="crayon-line crayon-striped-line" id="crayon-59cd4daf9b3cc264195898-14">
                   <span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span>
                   <span class="crayon-v">p</span>
                   <span class="crayon-sy">.</span>
                  </div>
                  <div class="crayon-line" id="crayon-59cd4daf9b3cc264195898-15">
                   <span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span>
                   <span class="crayon-p">#{error}</span>
                  </div>
                  <div class="crayon-line crayon-striped-line" id="crayon-59cd4daf9b3cc264195898-16">
                   <span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span>
                   <span class="crayon-v">p</span>
                   <span class="crayon-sy">.</span>
                   <span class="crayon-v">last</span>
                   <span class="crayon-o">-</span>
                   <span class="crayon-v">p</span>
                   <span class="crayon-sy">.</span>
                  </div>
                  <div class="crayon-line" id="crayon-59cd4daf9b3cc264195898-17">
                   <span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span>
                   <span class="crayon-e">Once </span>
                   <span class="crayon-e">you </span>
                   <span class="crayon-e">enter </span>
                   <span class="crayon-e">your </span>
                   <span class="crayon-e">credentials </span>
                   <span class="crayon-st">and</span>
                   <span class="crayon-h"> </span>
                   <span class="crayon-e">hit </span>
                   <span class="crayon-e">the </span>
                   <span class="crayon-e">Login </span>
                   <span class="crayon-e">button </span>
                   <span class="crayon-v">below</span>
                   <span class="crayon-sy">,</span>
                  </div>
                  <div class="crayon-line crayon-striped-line" id="crayon-59cd4daf9b3cc264195898-18">
                   <span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span>
                   <span class="crayon-e">your </span>
                   <span class="crayon-e">credentials </span>
                   <span class="crayon-e">will </span>
                   <span class="crayon-e">be </span>
                   <span class="crayon-e">securely </span>
                   <span class="crayon-e">sent </span>
                   <span class="crayon-st">to</span>
                  </div>
                  <div class="crayon-line" id="crayon-59cd4daf9b3cc264195898-19">
                   <span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span>
                   <span class="crayon-o">&lt;</span>
                   <span class="crayon-i">a</span>
                   <span class="crayon-h"> </span>
                   <span class="crayon-v">href</span>
                   <span class="crayon-o">=</span>
                   <span class="crayon-s">"https://stormpath.com"</span>
                   <span class="crayon-o">&gt;</span>
                   <span class="crayon-v">Stormpath</span>
                   <span class="crayon-o">&lt;</span>
                   <span class="crayon-o">/</span>
                   <span class="crayon-v">a</span>
                   <span class="crayon-o">&gt;</span>
                   <span class="crayon-h"> </span>
                   <span class="crayon-st">and</span>
                   <span class="crayon-h"> </span>
                   <span class="crayon-v">verified</span>
                   <span class="crayon-sy">.</span>
                   <span class="crayon-h">&nbsp;&nbsp;</span>
                   <span class="crayon-st">If</span>
                  </div>
                  <div class="crayon-line crayon-striped-line" id="crayon-59cd4daf9b3cc264195898-20">
                   <span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span>
                   <span class="crayon-e">your </span>
                   <span class="crayon-e">credentials </span>
                   <span class="crayon-e">are </span>
                   <span class="crayon-v">valid</span>
                   <span class="crayon-sy">,</span>
                   <span class="crayon-h"> </span>
                   <span class="crayon-i">you</span>
                   <span class="crayon-s">'ll be logged in using a secure</span>
                  </div>
                  <div class="crayon-line" id="crayon-59cd4daf9b3cc264195898-21">
                   <span class="crayon-s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;session -- otherwise, you'</span>
                   <span class="crayon-e">ll </span>
                   <span class="crayon-i">get</span>
                   <span class="crayon-h"> </span>
                   <span class="crayon-i">a</span>
                   <span class="crayon-h"> </span>
                   <span class="crayon-e">user </span>
                   <span class="crayon-e">friendly </span>
                   <span class="crayon-e">error </span>
                   <span class="crayon-v">message</span>
                   <span class="crayon-sy">.</span>
                  </div>
                  <div class="crayon-line crayon-striped-line" id="crayon-59cd4daf9b3cc264195898-22">
                   <span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span>
                   <span class="crayon-sy">.</span>
                   <span class="crayon-v">form</span>
                   <span class="crayon-o">-</span>
                   <span class="crayon-e">group</span>
                  </div>
                  <div class="crayon-line" id="crayon-59cd4daf9b3cc264195898-23">
                   <span class="crayon-e">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span>
                   <span class="crayon-v">label</span>
                   <span class="crayon-sy">.</span>
                   <span class="crayon-v">col</span>
                   <span class="crayon-o">-</span>
                   <span class="crayon-v">lg</span>
                   <span class="crayon-o">-</span>
                   <span class="crayon-cn">4.control</span>
                   <span class="crayon-o">-</span>
                   <span class="crayon-e">label</span>
                   <span class="crayon-sy">(</span>
                   <span class="crayon-st">for</span>
                   <span class="crayon-o">=</span>
                   <span class="crayon-s">'username'</span>
                   <span class="crayon-sy">)</span>
                   <span class="crayon-h"> </span>
                   <span class="crayon-i">Email</span>
                  </div>
                  <div class="crayon-line crayon-striped-line" id="crayon-59cd4daf9b3cc264195898-24">
                   <span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span>
                   <span class="crayon-sy">.</span>
                   <span class="crayon-v">col</span>
                   <span class="crayon-o">-</span>
                   <span class="crayon-v">lg</span>
                   <span class="crayon-o">-</span>
                   <span class="crayon-cn">4</span>
                  </div>
                  <div class="crayon-line" id="crayon-59cd4daf9b3cc264195898-25">
                   <span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span>
                   <span class="crayon-v">input</span>
                   <span class="crayon-p">#username.form-control(type='email', name='username', placeholder='Email', autofocus)</span>
                  </div>
                  <div class="crayon-line crayon-striped-line" id="crayon-59cd4daf9b3cc264195898-26">
                   <span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span>
                   <span class="crayon-sy">.</span>
                   <span class="crayon-v">form</span>
                   <span class="crayon-o">-</span>
                   <span class="crayon-e">group</span>
                  </div>
                  <div class="crayon-line" id="crayon-59cd4daf9b3cc264195898-27">
                   <span class="crayon-e">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span>
                   <span class="crayon-v">label</span>
                   <span class="crayon-sy">.</span>
                   <span class="crayon-v">col</span>
                   <span class="crayon-o">-</span>
                   <span class="crayon-v">lg</span>
                   <span class="crayon-o">-</span>
                   <span class="crayon-cn">4.control</span>
                   <span class="crayon-o">-</span>
                   <span class="crayon-e">label</span>
                   <span class="crayon-sy">(</span>
                   <span class="crayon-st">for</span>
                   <span class="crayon-o">=</span>
                   <span class="crayon-s">'password'</span>
                   <span class="crayon-sy">)</span>
                   <span class="crayon-h"> </span>
                   <span class="crayon-i">Password</span>
                  </div>
                  <div class="crayon-line crayon-striped-line" id="crayon-59cd4daf9b3cc264195898-28">
                   <span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span>
                   <span class="crayon-sy">.</span>
                   <span class="crayon-v">col</span>
                   <span class="crayon-o">-</span>
                   <span class="crayon-v">lg</span>
                   <span class="crayon-o">-</span>
                   <span class="crayon-cn">4</span>
                  </div>
                  <div class="crayon-line" id="crayon-59cd4daf9b3cc264195898-29">
                   <span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span>
                   <span class="crayon-v">input</span>
                   <span class="crayon-p">#password.form-control(type='password', name='password', placeholder='Password')</span>
                  </div>
                  <div class="crayon-line crayon-striped-line" id="crayon-59cd4daf9b3cc264195898-30">
                   <span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span>
                   <span class="crayon-sy">.</span>
                   <span class="crayon-v">form</span>
                   <span class="crayon-o">-</span>
                   <span class="crayon-i">group</span>
                  </div>
                  <div class="crayon-line" id="crayon-59cd4daf9b3cc264195898-31">
                   <span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span>
                   <span class="crayon-sy">.</span>
                   <span class="crayon-v">col</span>
                   <span class="crayon-o">-</span>
                   <span class="crayon-v">lg</span>
                   <span class="crayon-o">-</span>
                   <span class="crayon-cn">10.col</span>
                   <span class="crayon-o">-</span>
                   <span class="crayon-v">lg</span>
                   <span class="crayon-o">-</span>
                   <span class="crayon-v">offset</span>
                   <span class="crayon-o">-</span>
                   <span class="crayon-cn">4</span>
                  </div>
                  <div class="crayon-line crayon-striped-line" id="crayon-59cd4daf9b3cc264195898-32">
                   <span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span>
                   <span class="crayon-v">button</span>
                   <span class="crayon-sy">.</span>
                   <span class="crayon-v">btn</span>
                   <span class="crayon-sy">.</span>
                   <span class="crayon-v">btn</span>
                   <span class="crayon-o">-</span>
                   <span class="crayon-e">primary</span>
                   <span class="crayon-sy">(</span>
                   <span class="crayon-v">type</span>
                   <span class="crayon-o">=</span>
                   <span class="crayon-s">'submit'</span>
                   <span class="crayon-sy">)</span>
                   <span class="crayon-h"> </span>
                   <span class="crayon-i">Login</span>
                  </div>
                  <div class="crayon-line" id="crayon-59cd4daf9b3cc264195898-33">
                   &nbsp;
                  </div>
                 </div></td> 
               </tr> 
              </tbody>
             </table> 
            </div> 
           </div> 
           <p></p> 
           <p>The login template works almost exactly like the registration template we talked about previously. Although we ask users to log in with an email and password, we secretly name the email input field <code>username</code> to make passport happy.</p> 
           <p>Other than that, things work as you would expect if there is an error, we’ll display a user-friendly error message.</p> 
           <h3 id="the-dashboard-template">The Dashboard Template<a href="#the-dashboard-template" class="heading-link"><i class="stp-icons stp-icon-link2"></i></a></h3> 
           <p>Put the following code into <code>views/dashboard.jade</code>:</p> 
           <p></p> 
           <div id="crayon-59cd4daf9b3d0740823209" class="crayon-syntax crayon-theme-stormpath crayon-font-monaco crayon-os-pc print-yes notranslate" data-settings=" minimize scroll-mouseover" style=" margin-top: 12px; margin-bottom: 12px; font-size: 12px !important; line-height: 15px !important;"> 
            <div class="crayon-plain-wrap">
             <textarea wrap="soft" class="crayon-plain print-no" data-settings="dblclick" readonly style="-moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4; font-size: 12px !important; line-height: 15px !important;">
extends layout

block body

  .dashboard
    .row
      .col-lg-12
        .jumbotron
          h1 Dashboard
          br
          br
          p Welcome to your user dashboard!
          p.
            This page displays some of your user information using Jade
            templates.
          p.
            If you click the Logout link in the navbar at the top of this page,
            you'll be logged out of your account and redirected back to the main
            page of this site.
          p.
            Your user account information is being securely stored using
            passport sessions, and Stormpath as the authentication backend.
          br
          br
</textarea>
            </div> 
            <div class="crayon-main" style=""> 
             <table class="crayon-table"> 
              <tbody>
               <tr class="crayon-row"> 
                <td class="crayon-nums " data-settings="hide"> 
                 <div class="crayon-nums-content" style="font-size: 12px !important; line-height: 15px !important;">
                  <div class="crayon-num" data-line="crayon-59cd4daf9b3d0740823209-1">
                   1
                  </div>
                  <div class="crayon-num crayon-striped-num" data-line="crayon-59cd4daf9b3d0740823209-2">
                   2
                  </div>
                  <div class="crayon-num" data-line="crayon-59cd4daf9b3d0740823209-3">
                   3
                  </div>
                  <div class="crayon-num crayon-striped-num" data-line="crayon-59cd4daf9b3d0740823209-4">
                   4
                  </div>
                  <div class="crayon-num" data-line="crayon-59cd4daf9b3d0740823209-5">
                   5
                  </div>
                  <div class="crayon-num crayon-striped-num" data-line="crayon-59cd4daf9b3d0740823209-6">
                   6
                  </div>
                  <div class="crayon-num" data-line="crayon-59cd4daf9b3d0740823209-7">
                   7
                  </div>
                  <div class="crayon-num crayon-striped-num" data-line="crayon-59cd4daf9b3d0740823209-8">
                   8
                  </div>
                  <div class="crayon-num" data-line="crayon-59cd4daf9b3d0740823209-9">
                   9
                  </div>
                  <div class="crayon-num crayon-striped-num" data-line="crayon-59cd4daf9b3d0740823209-10">
                   10
                  </div>
                  <div class="crayon-num" data-line="crayon-59cd4daf9b3d0740823209-11">
                   11
                  </div>
                  <div class="crayon-num crayon-striped-num" data-line="crayon-59cd4daf9b3d0740823209-12">
                   12
                  </div>
                  <div class="crayon-num" data-line="crayon-59cd4daf9b3d0740823209-13">
                   13
                  </div>
                  <div class="crayon-num crayon-striped-num" data-line="crayon-59cd4daf9b3d0740823209-14">
                   14
                  </div>
                  <div class="crayon-num" data-line="crayon-59cd4daf9b3d0740823209-15">
                   15
                  </div>
                  <div class="crayon-num crayon-striped-num" data-line="crayon-59cd4daf9b3d0740823209-16">
                   16
                  </div>
                  <div class="crayon-num" data-line="crayon-59cd4daf9b3d0740823209-17">
                   17
                  </div>
                  <div class="crayon-num crayon-striped-num" data-line="crayon-59cd4daf9b3d0740823209-18">
                   18
                  </div>
                  <div class="crayon-num" data-line="crayon-59cd4daf9b3d0740823209-19">
                   19
                  </div>
                  <div class="crayon-num crayon-striped-num" data-line="crayon-59cd4daf9b3d0740823209-20">
                   20
                  </div>
                  <div class="crayon-num" data-line="crayon-59cd4daf9b3d0740823209-21">
                   21
                  </div>
                  <div class="crayon-num crayon-striped-num" data-line="crayon-59cd4daf9b3d0740823209-22">
                   22
                  </div>
                  <div class="crayon-num" data-line="crayon-59cd4daf9b3d0740823209-23">
                   23
                  </div>
                  <div class="crayon-num crayon-striped-num" data-line="crayon-59cd4daf9b3d0740823209-24">
                   24
                  </div>
                  <div class="crayon-num" data-line="crayon-59cd4daf9b3d0740823209-25">
                   25
                  </div>
                 </div> </td> 
                <td class="crayon-code">
                 <div class="crayon-pre" style="font-size: 12px !important; line-height: 15px !important; -moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4;">
                  <div class="crayon-line" id="crayon-59cd4daf9b3d0740823209-1">
                   <span class="crayon-r">extends</span>
                   <span class="crayon-h"> </span>
                   <span class="crayon-e">layout</span>
                  </div>
                  <div class="crayon-line crayon-striped-line" id="crayon-59cd4daf9b3d0740823209-2">
                   &nbsp;
                  </div>
                  <div class="crayon-line" id="crayon-59cd4daf9b3d0740823209-3">
                   <span class="crayon-e">block </span>
                   <span class="crayon-i">body</span>
                  </div>
                  <div class="crayon-line crayon-striped-line" id="crayon-59cd4daf9b3d0740823209-4">
                   &nbsp;
                  </div>
                  <div class="crayon-line" id="crayon-59cd4daf9b3d0740823209-5">
                   <span class="crayon-h">&nbsp;&nbsp;</span>
                   <span class="crayon-sy">.</span>
                   <span class="crayon-i">dashboard</span>
                  </div>
                  <div class="crayon-line crayon-striped-line" id="crayon-59cd4daf9b3d0740823209-6">
                   <span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;</span>
                   <span class="crayon-sy">.</span>
                   <span class="crayon-i">row</span>
                  </div>
                  <div class="crayon-line" id="crayon-59cd4daf9b3d0740823209-7">
                   <span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span>
                   <span class="crayon-sy">.</span>
                   <span class="crayon-v">col</span>
                   <span class="crayon-o">-</span>
                   <span class="crayon-v">lg</span>
                   <span class="crayon-o">-</span>
                   <span class="crayon-cn">12</span>
                  </div>
                  <div class="crayon-line crayon-striped-line" id="crayon-59cd4daf9b3d0740823209-8">
                   <span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span>
                   <span class="crayon-sy">.</span>
                   <span class="crayon-e">jumbotron</span>
                  </div>
                  <div class="crayon-line" id="crayon-59cd4daf9b3d0740823209-9">
                   <span class="crayon-e">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span>
                   <span class="crayon-e">h1 </span>
                   <span class="crayon-e">Dashboard</span>
                  </div>
                  <div class="crayon-line crayon-striped-line" id="crayon-59cd4daf9b3d0740823209-10">
                   <span class="crayon-e">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span>
                   <span class="crayon-e">br</span>
                  </div>
                  <div class="crayon-line" id="crayon-59cd4daf9b3d0740823209-11">
                   <span class="crayon-e">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span>
                   <span class="crayon-i">br</span>
                  </div>
                  <div class="crayon-line crayon-striped-line" id="crayon-59cd4daf9b3d0740823209-12">
                   <span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span>
                   <span class="crayon-i">p</span>
                   <span class="crayon-h"> </span>
                   <span class="crayon-e">Welcome </span>
                   <span class="crayon-st">to</span>
                   <span class="crayon-h"> </span>
                   <span class="crayon-e">your </span>
                   <span class="crayon-e">user </span>
                   <span class="crayon-v">dashboard</span>
                   <span class="crayon-o">!</span>
                  </div>
                  <div class="crayon-line" id="crayon-59cd4daf9b3d0740823209-13">
                   <span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span>
                   <span class="crayon-v">p</span>
                   <span class="crayon-sy">.</span>
                  </div>
                  <div class="crayon-line crayon-striped-line" id="crayon-59cd4daf9b3d0740823209-14">
                   <span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span>
                   <span class="crayon-r">This</span>
                   <span class="crayon-h"> </span>
                   <span class="crayon-e">page </span>
                   <span class="crayon-e">displays </span>
                   <span class="crayon-e">some </span>
                   <span class="crayon-e">of </span>
                   <span class="crayon-e">your </span>
                   <span class="crayon-e">user </span>
                   <span class="crayon-e">information </span>
                   <span class="crayon-e">using </span>
                   <span class="crayon-e">Jade</span>
                  </div>
                  <div class="crayon-line" id="crayon-59cd4daf9b3d0740823209-15">
                   <span class="crayon-e">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span>
                   <span class="crayon-v">templates</span>
                   <span class="crayon-sy">.</span>
                  </div>
                  <div class="crayon-line crayon-striped-line" id="crayon-59cd4daf9b3d0740823209-16">
                   <span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span>
                   <span class="crayon-v">p</span>
                   <span class="crayon-sy">.</span>
                  </div>
                  <div class="crayon-line" id="crayon-59cd4daf9b3d0740823209-17">
                   <span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span>
                   <span class="crayon-st">If</span>
                   <span class="crayon-h"> </span>
                   <span class="crayon-e">you </span>
                   <span class="crayon-e">click </span>
                   <span class="crayon-e">the </span>
                   <span class="crayon-e">Logout </span>
                   <span class="crayon-e">link </span>
                   <span class="crayon-st">in</span>
                   <span class="crayon-h"> </span>
                   <span class="crayon-e">the </span>
                   <span class="crayon-e">navbar </span>
                   <span class="crayon-e">at </span>
                   <span class="crayon-e">the </span>
                   <span class="crayon-e">top </span>
                   <span class="crayon-e">of </span>
                   <span class="crayon-r">this</span>
                   <span class="crayon-h"> </span>
                   <span class="crayon-v">page</span>
                   <span class="crayon-sy">,</span>
                  </div>
                  <div class="crayon-line crayon-striped-line" id="crayon-59cd4daf9b3d0740823209-18">
                   <span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span>
                   <span class="crayon-i">you</span>'
                   <span class="crayon-e">ll </span>
                   <span class="crayon-e">be </span>
                   <span class="crayon-e">logged </span>
                   <span class="crayon-e">out </span>
                   <span class="crayon-e">of </span>
                   <span class="crayon-e">your </span>
                   <span class="crayon-e">account </span>
                   <span class="crayon-st">and</span>
                   <span class="crayon-h"> </span>
                   <span class="crayon-e">redirected </span>
                   <span class="crayon-e">back </span>
                   <span class="crayon-st">to</span>
                   <span class="crayon-h"> </span>
                   <span class="crayon-e">the </span>
                   <span class="crayon-e">main</span>
                  </div>
                  <div class="crayon-line" id="crayon-59cd4daf9b3d0740823209-19">
                   <span class="crayon-e">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span>
                   <span class="crayon-e">page </span>
                   <span class="crayon-e">of </span>
                   <span class="crayon-r">this</span>
                   <span class="crayon-h"> </span>
                   <span class="crayon-v">site</span>
                   <span class="crayon-sy">.</span>
                  </div>
                  <div class="crayon-line crayon-striped-line" id="crayon-59cd4daf9b3d0740823209-20">
                   <span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span>
                   <span class="crayon-v">p</span>
                   <span class="crayon-sy">.</span>
                  </div>
                  <div class="crayon-line" id="crayon-59cd4daf9b3d0740823209-21">
                   <span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span>
                   <span class="crayon-e">Your </span>
                   <span class="crayon-e">user </span>
                   <span class="crayon-e">account </span>
                   <span class="crayon-e">information </span>
                   <span class="crayon-st">is</span>
                   <span class="crayon-h"> </span>
                   <span class="crayon-e">being </span>
                   <span class="crayon-e">securely </span>
                   <span class="crayon-e">stored </span>
                   <span class="crayon-e">using</span>
                  </div>
                  <div class="crayon-line crayon-striped-line" id="crayon-59cd4daf9b3d0740823209-22">
                   <span class="crayon-e">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span>
                   <span class="crayon-e">passport </span>
                   <span class="crayon-v">sessions</span>
                   <span class="crayon-sy">,</span>
                   <span class="crayon-h"> </span>
                   <span class="crayon-st">and</span>
                   <span class="crayon-h"> </span>
                   <span class="crayon-e">Stormpath </span>
                   <span class="crayon-st">as</span>
                   <span class="crayon-h"> </span>
                   <span class="crayon-e">the </span>
                   <span class="crayon-e">authentication </span>
                   <span class="crayon-v">backend</span>
                   <span class="crayon-sy">.</span>
                  </div>
                  <div class="crayon-line" id="crayon-59cd4daf9b3d0740823209-23">
                   <span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span>
                   <span class="crayon-e">br</span>
                  </div>
                  <div class="crayon-line crayon-striped-line" id="crayon-59cd4daf9b3d0740823209-24">
                   <span class="crayon-e">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span>
                   <span class="crayon-i">br</span>
                  </div>
                  <div class="crayon-line" id="crayon-59cd4daf9b3d0740823209-25">
                   &nbsp;
                  </div>
                 </div></td> 
               </tr> 
              </tbody>
             </table> 
            </div> 
           </div> 
           <p></p> 
           <p>This is probably the simplest of all the templates — it just renders some static content.</p> 
           <p>This page is only accessible to logged-in users.</p> 
           <h2 id="static-assets">Static Assets<a href="#static-assets" class="heading-link"><i class="stp-icons stp-icon-link2"></i></a></h2> 
           <p>The last thing we need to do before we can run our awesome new project is drop in our static assets. This mainly involves copying over <a href="http://getbootstrap.com/">Twitter Bootstrap</a> (<em>I’m not a good designer, OK!</em>).</p> 
           <p>You can run the following commands to download the necessary files locally (into your <code>public</code> directory):</p> 
           <p></p> 
           <div id="crayon-59cd4daf9b3d4517927034" class="crayon-syntax crayon-theme-stormpath crayon-font-monaco crayon-os-pc print-yes notranslate" data-settings=" minimize scroll-mouseover" style=" margin-top: 12px; margin-bottom: 12px; font-size: 12px !important; line-height: 15px !important;"> 
            <div class="crayon-plain-wrap">
             <textarea wrap="soft" class="crayon-plain print-no" data-settings="dblclick" readonly style="-moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4; font-size: 12px !important; line-height: 15px !important;">
$ mkdir -p public/{css,js}
$ wget https://raw.githubusercontent.com/stormpath/stormpath-express-sample/master/public/css/bootstrap.min.css --directory-prefix public/css
$ wget https://raw.githubusercontent.com/stormpath/stormpath-express-sample/master/public/css/style.css --directory-prefix public/css
$ wget https://raw.githubusercontent.com/stormpath/stormpath-express-sample/master/public/js/bootstrap.min.js --directory-prefix public/js
</textarea>
            </div> 
            <div class="crayon-main" style=""> 
             <table class="crayon-table"> 
              <tbody>
               <tr class="crayon-row"> 
                <td class="crayon-nums " data-settings="hide"> 
                 <div class="crayon-nums-content" style="font-size: 12px !important; line-height: 15px !important;">
                  <div class="crayon-num" data-line="crayon-59cd4daf9b3d4517927034-1">
                   1
                  </div>
                  <div class="crayon-num crayon-striped-num" data-line="crayon-59cd4daf9b3d4517927034-2">
                   2
                  </div>
                  <div class="crayon-num" data-line="crayon-59cd4daf9b3d4517927034-3">
                   3
                  </div>
                  <div class="crayon-num crayon-striped-num" data-line="crayon-59cd4daf9b3d4517927034-4">
                   4
                  </div>
                  <div class="crayon-num" data-line="crayon-59cd4daf9b3d4517927034-5">
                   5
                  </div>
                 </div> </td> 
                <td class="crayon-code">
                 <div class="crayon-pre" style="font-size: 12px !important; line-height: 15px !important; -moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4;">
                  <div class="crayon-line" id="crayon-59cd4daf9b3d4517927034-1">
                   <span class="crayon-sy">$</span>
                   <span class="crayon-h"> </span>
                   <span class="crayon-e">mkdir</span>
                   <span class="crayon-h"> </span>
                   <span class="crayon-o">-</span>
                   <span class="crayon-e">p</span>
                   <span class="crayon-h"> </span>
                   <span class="crayon-m">public</span>
                   <span class="crayon-o">/</span>
                   <span class="crayon-sy">{</span>
                   <span class="crayon-v">css</span>
                   <span class="crayon-sy">,</span>
                   <span class="crayon-v">js</span>
                   <span class="crayon-sy">}</span>
                  </div>
                  <div class="crayon-line crayon-striped-line" id="crayon-59cd4daf9b3d4517927034-2">
                   <span class="crayon-sy">$</span>
                   <span class="crayon-h"> </span>
                   <span class="crayon-e">wget </span>
                   <span class="crayon-v">https</span>
                   <span class="crayon-o">:</span>
                   <span class="crayon-c">//raw.githubusercontent.com/stormpath/stormpath-express-sample/master/public/css/bootstrap.min.css --directory-prefix public/css</span>
                  </div>
                  <div class="crayon-line" id="crayon-59cd4daf9b3d4517927034-3">
                   <span class="crayon-sy">$</span>
                   <span class="crayon-h"> </span>
                   <span class="crayon-e">wget </span>
                   <span class="crayon-v">https</span>
                   <span class="crayon-o">:</span>
                   <span class="crayon-c">//raw.githubusercontent.com/stormpath/stormpath-express-sample/master/public/css/style.css --directory-prefix public/css</span>
                  </div>
                  <div class="crayon-line crayon-striped-line" id="crayon-59cd4daf9b3d4517927034-4">
                   <span class="crayon-sy">$</span>
                   <span class="crayon-h"> </span>
                   <span class="crayon-e">wget </span>
                   <span class="crayon-v">https</span>
                   <span class="crayon-o">:</span>
                   <span class="crayon-c">//raw.githubusercontent.com/stormpath/stormpath-express-sample/master/public/js/bootstrap.min.js --directory-prefix public/js</span>
                  </div>
                  <div class="crayon-line" id="crayon-59cd4daf9b3d4517927034-5">
                   &nbsp;
                  </div>
                 </div></td> 
               </tr> 
              </tbody>
             </table> 
            </div> 
           </div> 
           <p></p> 
           <h2 id="lets-run-this-thing">Let’s Run This Thing<a href="#lets-run-this-thing" class="heading-link"><i class="stp-icons stp-icon-link2"></i></a></h2> 
           <p>Now that we’ve gone through the entire project from start to finish let’s run this thing!</p> 
           <p>From the command line, you should be able to run <code>npm start</code> at the root of your project, to launch a local web server on port 3000:</p> 
           <p></p> 
           <div id="crayon-59cd4daf9b3d7155876769" class="crayon-syntax crayon-theme-stormpath crayon-font-monaco crayon-os-pc print-yes notranslate" data-settings=" minimize scroll-mouseover" style=" margin-top: 12px; margin-bottom: 12px; font-size: 12px !important; line-height: 15px !important;"> 
            <div class="crayon-plain-wrap">
             <textarea wrap="soft" class="crayon-plain print-no" data-settings="dblclick" readonly style="-moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4; font-size: 12px !important; line-height: 15px !important;">
$ npm start

&gt; stormpath-express-sample@0.0.1 start
&gt; /Users/rdegges/stormpath-express-sample
&gt; node ./bin/www
</textarea>
            </div> 
            <div class="crayon-main" style=""> 
             <table class="crayon-table"> 
              <tbody>
               <tr class="crayon-row"> 
                <td class="crayon-nums " data-settings="hide"> 
                 <div class="crayon-nums-content" style="font-size: 12px !important; line-height: 15px !important;">
                  <div class="crayon-num" data-line="crayon-59cd4daf9b3d7155876769-1">
                   1
                  </div>
                  <div class="crayon-num crayon-striped-num" data-line="crayon-59cd4daf9b3d7155876769-2">
                   2
                  </div>
                  <div class="crayon-num" data-line="crayon-59cd4daf9b3d7155876769-3">
                   3
                  </div>
                  <div class="crayon-num crayon-striped-num" data-line="crayon-59cd4daf9b3d7155876769-4">
                   4
                  </div>
                  <div class="crayon-num" data-line="crayon-59cd4daf9b3d7155876769-5">
                   5
                  </div>
                  <div class="crayon-num crayon-striped-num" data-line="crayon-59cd4daf9b3d7155876769-6">
                   6
                  </div>
                 </div> </td> 
                <td class="crayon-code">
                 <div class="crayon-pre" style="font-size: 12px !important; line-height: 15px !important; -moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4;">
                  <div class="crayon-line" id="crayon-59cd4daf9b3d7155876769-1">
                   <span class="crayon-sy">$</span>
                   <span class="crayon-h"> </span>
                   <span class="crayon-e">npm </span>
                   <span class="crayon-v">start</span>
                  </div>
                  <div class="crayon-line crayon-striped-line" id="crayon-59cd4daf9b3d7155876769-2">
                   &nbsp;
                  </div>
                  <div class="crayon-line" id="crayon-59cd4daf9b3d7155876769-3">
                   <span class="crayon-o">&gt;</span>
                   <span class="crayon-h"> </span>
                   <span class="crayon-v">stormpath</span>
                   <span class="crayon-o">-</span>
                   <span class="crayon-v">express</span>
                   <span class="crayon-o">-</span>
                   <span class="crayon-v">sample</span>
                   <span class="crayon-sy">@</span>
                   <span class="crayon-cn">0.0.1</span>
                   <span class="crayon-h"> </span>
                   <span class="crayon-v">start</span>
                  </div>
                  <div class="crayon-line crayon-striped-line" id="crayon-59cd4daf9b3d7155876769-4">
                   <span class="crayon-o">&gt;</span>
                   <span class="crayon-h"> </span>
                   <span class="crayon-o">/</span>
                   <span class="crayon-v">Users</span>
                   <span class="crayon-o">/</span>
                   <span class="crayon-v">rdegges</span>
                   <span class="crayon-o">/</span>
                   <span class="crayon-v">stormpath</span>
                   <span class="crayon-o">-</span>
                   <span class="crayon-v">express</span>
                   <span class="crayon-o">-</span>
                   <span class="crayon-v">sample</span>
                  </div>
                  <div class="crayon-line" id="crayon-59cd4daf9b3d7155876769-5">
                   <span class="crayon-o">&gt;</span>
                   <span class="crayon-h"> </span>
                   <span class="crayon-i">node</span>
                   <span class="crayon-h"> </span>
                   <span class="crayon-sy">.</span>
                   <span class="crayon-o">/</span>
                   <span class="crayon-v">bin</span>
                   <span class="crayon-o">/</span>
                   <span class="crayon-i">www</span>
                  </div>
                  <div class="crayon-line crayon-striped-line" id="crayon-59cd4daf9b3d7155876769-6">
                   &nbsp;
                  </div>
                 </div></td> 
               </tr> 
              </tbody>
             </table> 
            </div> 
           </div> 
           <p></p> 
           <p>Now, open your browser and visit <a href="http://localhost:3000">http://localhost:3000</a>. Assuming everything is working well, you should be able to register a new account on the site, visit the dashboard, logout, and log back in again — with no problems.</p> 
           <p>Here’s how things should look:</p> 
           <p><iframe width="420" height="315" src="//www.youtube.com/embed/58wZyVaGR2c" frameborder="0" allowfullscreen></iframe></p> 
           <p>Lastly — all this code is available on Github here: https://github.com/stormpath/stormpath-passport-express-sample</p> 
           <h2 id="want-more-automation">Want More Automation?<a href="#want-more-automation" class="heading-link"><i class="stp-icons stp-icon-link2"></i></a></h2> 
           <p>Passport.js is purely for authentication (<em>i.e. checking that someone’s username and password is valid, or getting their identity from a social provider</em>). It is not designed for handling user registrations, manage password resets, or implement email verification workflows, etc. In turn, our Passport strategy only automates authentication. If you need to do more, like password reset, you’ll need to also use the <a href="https://github.com/stormpath/stormpath-sdk-node">Stormpath Node SDK</a>.</p> 
           <p>For a more seamless and automated experience, check out our <a href="https://docs.stormpath.com/nodejs/express/latest/">express-stormpath</a> library instead of Passport.js. Express.js provides user registration, along with a full suite of user management features for your Express-based web application. This feature includes:</p> 
           <ul> 
            <li>Create, register and authenticate users.</li> 
            <li>Store custom user data with each account.</li> 
            <li>Create and assign permissions (groups, roles, etc.).</li> 
            <li>Handle complex authentication and authorization patterns, like multi-tenancy.</li> 
            <li>Log users in via social login with Facebook and Google OAuth.</li> 
            <li>Cache user information for quick access.</li> 
            <li>Secure all your passwords.</li> 
            <li>Automate all your password reset and account verification workflows.</li> 
           </ul> 
           <h2 id="final-thoughts">Final Thoughts<a href="#final-thoughts" class="heading-link"><i class="stp-icons stp-icon-link2"></i></a></h2> 
           <p>Firstly, if you made it to the bottom of this post: <em>thanks</em>! Hopefully, you enjoyed building this node app along with me!</p> 
           <p>With that said, in the future, we’re planning on expanding our Stormpath support for both node.js and passport.js to make integration even simpler.</p> 
           <p>Among other things, we’d like to:</p> 
           <ul> 
            <li>Make registering users a one liner (instead of requiring custom development work).</li> 
            <li>Make asserting user permissions simple and effortless (making it easy to handle user groups and permissions at a fine-grained level).</li> 
            <li>Make our passport.js middleware more magical by having it automatically patch user data into templates for rendering.</li> 
            <li>Make our passport.js strategy support caching clusters (or either Redis or Memcached) — this way you’ll be able to speed up user sessions quite a bit by avoiding round-trips to the Stormpath REST API.</li> 
           </ul> 
           <p>Got anything else you think would be cool to see added? Please <a href="/cdn-cgi/l/email-protection#b8cbcdc8c8d7caccf8cbccd7cad5c8d9ccd096dbd7d5">drop us a line</a>! We’d love to hear from you ?</p> 
           <p>Best,</p> 
           <p>-Randall</p> 
           <div class="clearfix"></div> 
          </div> 
         </article> 
        </div> 
        <div class="blog_sidebar col-md-3 col-md-offset-1 nopadding" data-spy="affix" data-offset-top="230" data-offset-bottom="600"> 
         <div id="search-5" class="widget widget_search">
          <form role="search" method="get" class="search-form form" action="https://stormpath.com/"> 
           <label for="form-search-input" class="sr-only">Search for</label> 
           <div class="input-group"> 
            <input type="search" id="form-search-input" class="form-control" placeholder="Search …" value="" name="s" title="Search for:"> 
            <span class="input-group-btn"> <button type="submit" class="button button-green button-small search-button"><i class="stp-icons stp-icon-search"></i></button> </span> 
           </div> 
           <input type="hidden" name="post_type" value="post"> 
          </form> 
         </div>
         <div id="categories-5" class="widget widget_categories">
          <h3 class="widget-title">Explore the Topic</h3> 
          <ul> 
           <li class="cat-item cat-item-10"><a href="https://stormpath.com/blog/category/net">.NET</a> </li> 
           <li class="cat-item cat-item-13"><a href="https://stormpath.com/blog/category/general">General</a> </li> 
           <li class="cat-item cat-item-8"><a href="https://stormpath.com/blog/category/java">Java</a> </li> 
           <li class="cat-item cat-item-74"><a href="https://stormpath.com/blog/category/javascript">Javascript</a> </li> 
           <li class="cat-item cat-item-9"><a href="https://stormpath.com/blog/category/mobile">Mobile</a> </li> 
           <li class="cat-item cat-item-7"><a href="https://stormpath.com/blog/category/node">Node</a> </li> 
           <li class="cat-item cat-item-5"><a href="https://stormpath.com/blog/category/php">PHP</a> </li> 
           <li class="cat-item cat-item-11"><a href="https://stormpath.com/blog/category/python">Python</a> </li> 
           <li class="cat-item cat-item-12"><a href="https://stormpath.com/blog/category/rest-api">REST API</a> </li> 
          </ul> 
         </div> 
         <div class="social-bar widget stormpath-social-counter-widget" data-action="fetch_social_share_count" data-instance="2"> 
          <h3 class="widget-title">Share a Post</h3> 
          <a class="social-icon si-small si-borderless si-twitter share-button" target="_blank" href="https://twitter.com/share?text=Build+a+Simple+App+with+Node.js%2C+Express%2C+Passport+and+Stormpath - &amp;url=https%3A%2F%2Fstormpath.com%2Fblog%2Fbuild-app-nodejs-express-passport-stormpath&amp;via=gostormpath"> <i class="stp-icons stp-icon-twitter">
            <div class="social-icon-counter">
             0
            </div></i> <i class="stp-icons stp-icon-twitter">
            <div class="social-icon-counter">
             0
            </div></i> </a> 
          <a class="social-icon si-small si-borderless si-facebook share-button" target="_blank" href="https://www.facebook.com/share.php?u=https%3A%2F%2Fstormpath.com%2Fblog%2Fbuild-app-nodejs-express-passport-stormpath&amp;title=Build%20a%20Simple%20App%20with%20Node.js%2C%20Express%2C%20Passport%20and%20Stormpath"> <i class="stp-icons stp-icon-facebook">
            <div class="social-icon-counter">
             0
            </div></i> <i class="stp-icons stp-icon-facebook">
            <div class="social-icon-counter">
             0
            </div></i> </a> 
          <a class="social-icon si-small si-borderless si-gplus share-button" target="_blank" href="https://plus.google.com/share?url=https%3A%2F%2Fstormpath.com%2Fblog%2Fbuild-app-nodejs-express-passport-stormpath"> <i class="stp-icons stp-icon-gplus">
            <div class="social-icon-counter">
             0
            </div></i> <i class="stp-icons stp-icon-gplus">
            <div class="social-icon-counter">
             0
            </div></i> </a> 
          <a class="social-icon si-small si-borderless si-linkedin share-button" target="_blank" href="http://www.linkedin.com/shareArticle?mini=true&amp;url=https%3A%2F%2Fstormpath.com%2Fblog%2Fbuild-app-nodejs-express-passport-stormpath&amp;title=Build%20a%20Simple%20App%20with%20Node.js%2C%20Express%2C%20Passport%20and%20Stormpath&amp;source=https%3A%2F%2Fstormpath.com"> <i class="stp-icons stp-icon-linkedin">
            <div class="social-icon-counter">
             0
            </div></i> <i class="stp-icons stp-icon-linkedin">
            <div class="social-icon-counter">
             0
            </div></i> </a> 
         </div> 
        </div> 
       </main> 
      </div> 
     </div> 
    </section> 
    <script>!function(e,t,r,n,c,a,l){function i(t,r){return r=e.createElement('div'),r.innerHTML='<a href="'+t.replace(/"/g,'&quot;')+'"></a>',r.childNodes[0].getAttribute('href')}function o(e,t,r,n){for(r='',n='0x'+e.substr(t,2)|0,t+=2;t<e.length;t+=2)r+=String.fromCharCode('0x'+e.substr(t,2)^n);return i(r)}try{for(c=e.getElementsByTagName('a'),l='/cdn-cgi/l/email-protection#',n=0;n<c.length;n++)try{(t=(a=c[n]).href.indexOf(l))>-1&&(a.href='mailto:'+o(a.href,t+l.length))}catch(e){}for(c=e.querySelectorAll('.__cf_email__'),n=0;n<c.length;n++)try{(a=c[n]).parentNode.replaceChild(e.createTextNode(o(a.getAttribute('data-cfemail'),0)),a)}catch(e){}}catch(e){}}(document);</script>
    <script async src="//platform.twitter.com/widgets.js" charset="utf-8"></script> 
   </div> 
   <footer id="footer" class="dark"> 
    <div class="container"> 
     <div class="footer-widgets-wrap nopadding topmargin-sm bottommargin-sm clearfix"> 
      <div class="col-md-4"> 
       <div id="text-4" class="widget widget_text"> 
        <div class="textwidget">
         <img src="https://stormpath.com/wp-content/uploads/2017/08/logos.png" class="footer-logo">
        </div> 
       </div> 
      </div> 
      <div class="col-md-2 col-md-offset-1 col-sm-4 col-xs-5"> 
       <div id="nav_menu-2" class="widget widget_links widget_nav_menu"></div> 
      </div> 
      <div class="col-md-2 col-sm-4 col-xs-6"> 
       <div id="nav_menu-3" class="widget widget_links widget_nav_menu"></div> 
      </div> 
      <div class="col-md-3 col-sm-4 col-xs-12" id="info-social"> 
       <div id="text-3" class="widget widget_text"> 
        <div class="textwidget">
         <div> 
          <strong>Support:</strong> 
          <a href="/cdn-cgi/l/email-protection" class="__cf_email__" data-cfemail="3c58594a5950534c594e4f7c5357485d125f5351">[email&nbsp;protected]</a> 
         </div> 
        </div> 
       </div> 
      </div> 
     </div> 
    </div> 
    <div id="copyrights"> 
     <div class="container clearfix"> 
      <div class="col-md-12">
        Copyright 2017 Stormpath 
      </div> 
     </div> 
    </div> 
   </footer> 
  </div> 
  <noscript>
   <iframe src="//www.googletagmanager.com/ns.html?id=GTM-NQZZFW" height="0" width="0" style="display:none;visibility:hidden"></iframe>
  </noscript> 
  <script>!function(e,t,r,n,c,a,l){function i(t,r){return r=e.createElement('div'),r.innerHTML='<a href="'+t.replace(/"/g,'&quot;')+'"></a>',r.childNodes[0].getAttribute('href')}function o(e,t,r,n){for(r='',n='0x'+e.substr(t,2)|0,t+=2;t<e.length;t+=2)r+=String.fromCharCode('0x'+e.substr(t,2)^n);return i(r)}try{for(c=e.getElementsByTagName('a'),l='/cdn-cgi/l/email-protection#',n=0;n<c.length;n++)try{(t=(a=c[n]).href.indexOf(l))>-1&&(a.href='mailto:'+o(a.href,t+l.length))}catch(e){}for(c=e.querySelectorAll('.__cf_email__'),n=0;n<c.length;n++)try{(a=c[n]).parentNode.replaceChild(e.createTextNode(o(a.getAttribute('data-cfemail'),0)),a)}catch(e){}}catch(e){}}(document);</script>
  <script>(function(w,d,s,l,i){w[l]=w[l]||[];w[l].push({'gtm.start':
                new Date().getTime(),event:'gtm.js'});var f=d.getElementsByTagName(s)[0],
                j=d.createElement(s),dl=l!='dataLayer'?'&l='+l:'';j.async=true;j.src=
                '//www.googletagmanager.com/gtm.js?id='+i+dl;f.parentNode.insertBefore(j,f);
                })(window,document,'script','dataLayer','GTM-NQZZFW');</script> 
  <link rel="stylesheet" id="crayon-css" href="https://stormpath.com/wp-content/plugins/crayon-syntax-highlighter/css/min/crayon.min.css?ver=_2.7.2_beta" type="text/css" media="all"> 
  <script type="text/javascript" src="https://stormpath.com/wp-content/plugins/contact-form-7/includes/js/jquery.form.min.js?ver=3.51.0-2014.06.20"></script> 
  <script type="text/javascript">
/* <![CDATA[ */
var _wpcf7 = {"recaptcha":{"messages":{"empty":"Please verify that you are not a robot."}},"cached":"1"};
/* ]]> */
</script> 
  <script type="text/javascript" src="https://stormpath.com/wp-content/plugins/contact-form-7/includes/js/scripts.js?ver=4.7"></script> 
  <script type="text/javascript" src="https://s0.wp.com/wp-content/js/devicepx-jetpack.js?ver=201739"></script> 
  <script type="text/javascript" src="https://stormpath.com/wp-content/themes/stormpath/vendor/js/script-global.min.js?ver=4.8.2"></script> 
  <script type="text/javascript" src="https://stormpath.com/wp-includes/js/wp-embed.min.js?ver=4.8.2"></script> 
  <script type="text/javascript">
/* <![CDATA[ */
var CrayonSyntaxSettings = {"version":"_2.7.2_beta","is_admin":"0","ajaxurl":"https:\/\/stormpath.com\/wp-admin\/admin-ajax.php","prefix":"crayon-","setting":"crayon-setting","selected":"crayon-setting-selected","changed":"crayon-setting-changed","special":"crayon-setting-special","orig_value":"data-orig-value","debug":""};
var CrayonSyntaxStrings = {"copy":"Press %s to Copy, %s to Paste","minimize":"Click To Expand Code"};
/* ]]> */
</script> 
  <script type="text/javascript" src="https://stormpath.com/wp-content/plugins/crayon-syntax-highlighter/js/min/crayon.min.js?ver=_2.7.2_beta"></script> 
  <script type="text/javascript">
/* <![CDATA[ */
var stormpath_social_object = {"ajaxurl":"https:\/\/stormpath.com\/wp-admin\/admin-ajax.php","post_id":"2611"};
/* ]]> */
</script> 
  <script type="text/javascript" src="https://stormpath.com/wp-content/plugins/stormpath-social-media-widgets/widgets/js/social-media-counter.js?ver=4.8.2"></script> 
  <script type="text/javascript">
/* <![CDATA[ */
var countVars = {"disqusShortname":"stormpath"};
/* ]]> */
</script> 
  <script type="text/javascript" src="https://stormpath.com/wp-content/plugins/disqus-comment-system/media/js/count.js?ver=4.8.2"></script>   
 </body>
</html>