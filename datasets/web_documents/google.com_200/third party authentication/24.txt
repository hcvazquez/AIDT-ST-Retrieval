<!doctype html>
<html lang="en-US">
 <head> 
  <!-- Meta Tags --> 
  <meta http-equiv="Content-Type" content="text/html; charset=UTF-8"> 
  <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1, user-scalable=0"> 
  <!--Shortcut icon--> 
  <link rel="shortcut icon" href="https://jsao.io/wp-content/uploads/2015/07/database.png"> 
  <title> Authentication with Node.js, JWTs, and Oracle Database |  JavaScript and Oracle</title> 
  <link rel="dns-prefetch" href="//s.w.org"> 
  <link rel="alternate" type="application/rss+xml" title="JavaScript and Oracle » Feed" href="https://jsao.io/feed/"> 
  <link rel="alternate" type="application/rss+xml" title="JavaScript and Oracle » Comments Feed" href="https://jsao.io/comments/feed/"> 
  <link rel="alternate" type="application/rss+xml" title="JavaScript and Oracle » Authentication with Node.js, JWTs, and Oracle Database Comments Feed" href="https://jsao.io/2015/06/authentication-with-node-js-jwts-and-oracle-database/feed/"> 
  <meta property="og:site_name" content="JavaScript and Oracle">
  <meta property="og:url" content="https://jsao.io/2015/06/authentication-with-node-js-jwts-and-oracle-database/">
  <meta property="og:title" content="Authentication with Node.js, JWTs, and Oracle Database">
  <meta property="og:type" content="article">
  <meta property="og:image" content="https://jsao.io/wp-content/uploads/2015/06/authentication.jpg"> 
  <script type="text/javascript">
			window._wpemojiSettings = {"baseUrl":"https:\/\/s.w.org\/images\/core\/emoji\/2.3\/72x72\/","ext":".png","svgUrl":"https:\/\/s.w.org\/images\/core\/emoji\/2.3\/svg\/","svgExt":".svg","source":{"concatemoji":"https:\/\/jsao.io\/wp-includes\/js\/wp-emoji-release.min.js?ver=4.8.2"}};
			!function(a,b,c){function d(a){var b,c,d,e,f=String.fromCharCode;if(!k||!k.fillText)return!1;switch(k.clearRect(0,0,j.width,j.height),k.textBaseline="top",k.font="600 32px Arial",a){case"flag":return k.fillText(f(55356,56826,55356,56819),0,0),b=j.toDataURL(),k.clearRect(0,0,j.width,j.height),k.fillText(f(55356,56826,8203,55356,56819),0,0),c=j.toDataURL(),b!==c&&(k.clearRect(0,0,j.width,j.height),k.fillText(f(55356,57332,56128,56423,56128,56418,56128,56421,56128,56430,56128,56423,56128,56447),0,0),b=j.toDataURL(),k.clearRect(0,0,j.width,j.height),k.fillText(f(55356,57332,8203,56128,56423,8203,56128,56418,8203,56128,56421,8203,56128,56430,8203,56128,56423,8203,56128,56447),0,0),c=j.toDataURL(),b!==c);case"emoji4":return k.fillText(f(55358,56794,8205,9794,65039),0,0),d=j.toDataURL(),k.clearRect(0,0,j.width,j.height),k.fillText(f(55358,56794,8203,9794,65039),0,0),e=j.toDataURL(),d!==e}return!1}function e(a){var c=b.createElement("script");c.src=a,c.defer=c.type="text/javascript",b.getElementsByTagName("head")[0].appendChild(c)}var f,g,h,i,j=b.createElement("canvas"),k=j.getContext&&j.getContext("2d");for(i=Array("flag","emoji4"),c.supports={everything:!0,everythingExceptFlag:!0},h=0;h<i.length;h++)c.supports[i[h]]=d(i[h]),c.supports.everything=c.supports.everything&&c.supports[i[h]],"flag"!==i[h]&&(c.supports.everythingExceptFlag=c.supports.everythingExceptFlag&&c.supports[i[h]]);c.supports.everythingExceptFlag=c.supports.everythingExceptFlag&&!c.supports.flag,c.DOMReady=!1,c.readyCallback=function(){c.DOMReady=!0},c.supports.everything||(g=function(){c.readyCallback()},b.addEventListener?(b.addEventListener("DOMContentLoaded",g,!1),a.addEventListener("load",g,!1)):(a.attachEvent("onload",g),b.attachEvent("onreadystatechange",function(){"complete"===b.readyState&&c.readyCallback()})),f=c.source||{},f.concatemoji?e(f.concatemoji):f.wpemoji&&f.twemoji&&(e(f.twemoji),e(f.wpemoji)))}(window,document,window._wpemojiSettings);
		</script> 
  <style type="text/css">
img.wp-smiley,
img.emoji {
	display: inline !important;
	border: none !important;
	box-shadow: none !important;
	height: 1em !important;
	width: 1em !important;
	margin: 0 .07em !important;
	vertical-align: -0.1em !important;
	background: none !important;
	padding: 0 !important;
}
</style> 
  <link rel="stylesheet" id="crayon-css" href="https://jsao.io/wp-content/plugins/crayon-syntax-highlighter/css/min/crayon.min.css?ver=_2.7.2_beta" type="text/css" media="all"> 
  <link rel="stylesheet" id="crayon-theme-classic-css" href="https://jsao.io/wp-content/plugins/crayon-syntax-highlighter/themes/classic/classic.css?ver=_2.7.2_beta" type="text/css" media="all"> 
  <link rel="stylesheet" id="crayon-font-monaco-css" href="https://jsao.io/wp-content/plugins/crayon-syntax-highlighter/fonts/monaco.css?ver=_2.7.2_beta" type="text/css" media="all"> 
  <link rel="stylesheet" id="contact-form-7-css" href="https://jsao.io/wp-content/plugins/contact-form-7/includes/css/styles.css?ver=4.9" type="text/css" media="all"> 
  <link rel="stylesheet" id="mediaelement-css" href="https://jsao.io/wp-includes/js/mediaelement/mediaelementplayer.min.css?ver=2.22.0" type="text/css" media="all"> 
  <link rel="stylesheet" id="wp-mediaelement-css" href="https://jsao.io/wp-includes/js/mediaelement/wp-mediaelement.min.css?ver=4.8.2" type="text/css" media="all"> 
  <link rel="stylesheet" id="rgs-css" href="https://jsao.io/wp-content/themes/salient/css/rgs.css?ver=6.0.1" type="text/css" media="all"> 
  <link rel="stylesheet" id="font-awesome-css" href="https://jsao.io/wp-content/themes/salient/css/font-awesome.min.css?ver=4.8.2" type="text/css" media="all"> 
  <link rel="stylesheet" id="main-styles-css" href="https://jsao.io/wp-content/themes/salient/style.css?ver=6.1.72" type="text/css" media="all"> 
  <!--[if lt IE 9]>
<link rel='stylesheet' id='nectar-ie8-css'  href='https://jsao.io/wp-content/themes/salient/css/ie8.css?ver=4.8.2' type='text/css' media='all' />
<![endif]--> 
  <link rel="stylesheet" id="responsive-css" href="https://jsao.io/wp-content/themes/salient/css/responsive.css?ver=6.1.72" type="text/css" media="all"> 
  <link rel="stylesheet" id="font-awesome-styles-css" href="https://jsao.io/wp-content/plugins/font-awesome/assets/css/font-awesome.min.css?ver=3.2.1" type="text/css" media="all"> 
  <!--[if lte IE 7]>
<link rel='stylesheet' id='font-awesome-ie7-css'  href='https://jsao.io/wp-content/plugins/font-awesome/assets/css/font-awesome-ie7.min.css?ver=3.2.1' type='text/css' media='all' />
<![endif]--> 
  <script type="text/javascript" src="https://jsao.io/wp-includes/js/jquery/jquery.js?ver=1.12.4"></script> 
  <script type="text/javascript" src="https://jsao.io/wp-includes/js/jquery/jquery-migrate.min.js?ver=1.4.1"></script> 
  <script type="text/javascript">
/* <![CDATA[ */
var CrayonSyntaxSettings = {"version":"_2.7.2_beta","is_admin":"0","ajaxurl":"https:\/\/jsao.io\/wp-admin\/admin-ajax.php","prefix":"crayon-","setting":"crayon-setting","selected":"crayon-setting-selected","changed":"crayon-setting-changed","special":"crayon-setting-special","orig_value":"data-orig-value","debug":""};
var CrayonSyntaxStrings = {"copy":"Press %s to Copy, %s to Paste","minimize":"Click To Expand Code"};
/* ]]> */
</script> 
  <script type="text/javascript" src="https://jsao.io/wp-content/plugins/crayon-syntax-highlighter/js/min/crayon.min.js?ver=_2.7.2_beta"></script> 
  <script type="text/javascript" src="https://jsao.io/wp-content/themes/salient/js/modernizr.js?ver=2.6.2"></script> 
  <script type="text/javascript" src="https://jsao.io/wp-content/plugins/js_composer_salient/assets/lib/bower/progress-circle/ProgressCircle.js?ver=4.8.2"></script> 
  <script type="text/javascript" src="https://jsao.io/wp-content/plugins/js_composer_salient/assets/lib/vc_chart/jquery.vc_chart.js?ver=4.8.2"></script> 
  <link rel="https://api.w.org/" href="https://jsao.io/wp-json/"> 
  <link rel="EditURI" type="application/rsd+xml" title="RSD" href="https://jsao.io/xmlrpc.php?rsd"> 
  <link rel="wlwmanifest" type="application/wlwmanifest+xml" href="https://jsao.io/wp-includes/wlwmanifest.xml"> 
  <link rel="prev" title="A Look Back at COLLABORATE15" href="https://jsao.io/2015/04/a-look-back-at-collaborate15/"> 
  <link rel="next" title="Relational to JSON in Oracle Database" href="https://jsao.io/2015/07/relational-to-json-in-oracle-database/"> 
  <link rel="canonical" href="https://jsao.io/2015/06/authentication-with-node-js-jwts-and-oracle-database/"> 
  <link rel="shortlink" href="https://jsao.io/?p=372"> 
  <link rel="alternate" type="application/json+oembed" href="https://jsao.io/wp-json/oembed/1.0/embed?url=https%3A%2F%2Fjsao.io%2F2015%2F06%2Fauthentication-with-node-js-jwts-and-oracle-database%2F"> 
  <link rel="alternate" type="text/xml+oembed" href="https://jsao.io/wp-json/oembed/1.0/embed?url=https%3A%2F%2Fjsao.io%2F2015%2F06%2Fauthentication-with-node-js-jwts-and-oracle-database%2F&amp;format=xml"> 
  <style type="text/css">body a{color:#ff4629;}header#top nav ul li a:hover,header#top nav .sf-menu li.sfHover > a,header#top nav .sf-menu li.current-menu-item > a,header#top nav .sf-menu li.current_page_item > a .sf-sub-indicator i,header#top nav .sf-menu li.current_page_ancestor > a .sf-sub-indicator i,header#top nav ul li a:hover,header#top nav .sf-menu li.sfHover > a,header#top nav .sf-menu li.current_page_ancestor > a,header#top nav .sf-menu li.current-menu-ancestor > a,header#top nav .sf-menu li.current_page_item > a,body header#top nav .sf-menu li.current_page_item > a .sf-sub-indicator [class^="icon-"],header#top nav .sf-menu li.current_page_ancestor > a .sf-sub-indicator [class^="icon-"],header#top nav .sf-menu li.current-menu-ancestor > a,header#top nav .sf-menu li.current_page_item > a,.sf-menu li ul li.sfHover > a .sf-sub-indicator [class^="icon-"],ul.sf-menu > li > a:hover > .sf-sub-indicator i,ul.sf-menu > li > a:active > .sf-sub-indicator i,ul.sf-menu > li.sfHover > a > .sf-sub-indicator i,.sf-menu ul li.current_page_item > a,.sf-menu ul li.current-menu-ancestor > a,.sf-menu ul li.current_page_ancestor > a,.sf-menu ul a:focus,.sf-menu ul a:hover,.sf-menu ul a:active,.sf-menu ul li:hover > a,.sf-menu ul li.sfHover > a,.sf-menu li ul li a:hover,.sf-menu li ul li.sfHover > a,#footer-outer a:hover,.recent-posts .post-header a:hover,article.post .post-header a:hover,article.result a:hover,article.post .post-header h2 a,.single article.post .post-meta a:hover,.comment-list .comment-meta a:hover,label span,.wpcf7-form p span,.icon-3x[class^="icon-"],.icon-3x[class*=" icon-"],.icon-tiny[class^="icon-"],body .circle-border,article.result .title a,.home .blog-recent .col .post-header a:hover,.home .blog-recent .col .post-header h3 a,#single-below-header a:hover,header#top #logo:hover,.sf-menu > li.current_page_ancestor > a > .sf-sub-indicator [class^="icon-"],.sf-menu > li.current-menu-ancestor > a > .sf-sub-indicator [class^="icon-"],body #mobile-menu li.open > a [class^="icon-"],.pricing-column h3,.pricing-table[data-style="flat-alternative"] .pricing-column.accent-color h4,.pricing-table[data-style="flat-alternative"] .pricing-column.accent-color .interval,.comment-author a:hover,.project-attrs li i,#footer-outer #copyright li a i:hover,.col:hover > [class^="icon-"].icon-3x.accent-color.alt-style.hovered,.col:hover > [class*=" icon-"].icon-3x.accent-color.alt-style.hovered,#header-outer .widget_shopping_cart .cart_list a,.woocommerce .star-rating,.woocommerce-page table.cart a.remove,.woocommerce form .form-row .required,.woocommerce-page form .form-row .required,body #header-secondary-outer #social a:hover i,.woocommerce ul.products li.product .price,body .twitter-share:hover i,.twitter-share.hovered i,body .linkedin-share:hover i,.linkedin-share.hovered i,body .google-plus-share:hover i,.google-plus-share.hovered i,.pinterest-share:hover i,.pinterest-share.hovered i,.facebook-share:hover i,.facebook-share.hovered i,.woocommerce-page ul.products li.product .price,.nectar-milestone .number.accent-color,header#top nav > ul > li.megamenu > ul > li > a:hover,header#top nav > ul > li.megamenu > ul > li.sfHover > a,body #portfolio-nav a:hover i,span.accent-color,.nectar-love:hover i,.nectar-love.loved i,.portfolio-items .nectar-love:hover i,.portfolio-items .nectar-love.loved i,body .hovered .nectar-love i,header#top nav ul #search-btn a:hover span,header#top nav ul .slide-out-widget-area-toggle a:hover span,#search-outer #search #close a span:hover,.carousel-wrap[data-full-width="true"] .carousel-heading a:hover i,#search-outer .ui-widget-content li:hover a .title,#search-outer .ui-widget-content .ui-state-hover .title,#search-outer .ui-widget-content .ui-state-focus .title,.portfolio-filters-inline .container ul li a.active,body [class^="icon-"].icon-default-style,.svg-icon-holder[data-color="accent-color"],.team-member a.accent-color:hover,.ascend .comment-list .reply a,.wpcf7-form .wpcf7-not-valid-tip,.text_on_hover.product .add_to_cart_button,.blog-recent[data-style="minimal"] .col > span,.blog-recent[data-style="title_only"] .col:hover .post-header .title,.single #single-meta ul li:not(.meta-share-count):hover i,.single #single-meta ul li:not(.meta-share-count):hover a,.single #single-meta ul li:not(.meta-share-count):hover span,.single #single-meta ul li.meta-share-count .nectar-social a:hover i,#project-meta #single-meta ul li > a,#project-meta ul li.meta-share-count .nectar-social a:hover i,#project-meta ul li:not(.meta-share-count):hover i,#project-meta ul li:not(.meta-share-count):hover span{color:#ff4629!important;}.col:not(#post-area):not(.span_12):not(#sidebar):hover [class^="icon-"].icon-3x.accent-color.alt-style.hovered,body .col:not(#post-area):not(.span_12):not(#sidebar):hover a [class*=" icon-"].icon-3x.accent-color.alt-style.hovered,.ascend #header-outer:not(.transparent) .cart-outer:hover .cart-menu-wrap:not(.has_products) .icon-salient-cart{color:#ff4629!important;}.orbit-wrapper div.slider-nav span.right,.orbit-wrapper div.slider-nav span.left,.flex-direction-nav a,.jp-play-bar,.jp-volume-bar-value,.jcarousel-prev:hover,.jcarousel-next:hover,.portfolio-items .col[data-default-color="true"] .work-item:not(.style-3) .work-info-bg,.portfolio-items .col[data-default-color="true"] .bottom-meta,.portfolio-filters a,.portfolio-filters #sort-portfolio,.project-attrs li span,.progress li span,.nectar-progress-bar span,#footer-outer #footer-widgets .col .tagcloud a:hover,#sidebar .widget .tagcloud a:hover,article.post .more-link span:hover,article.post.quote .post-content .quote-inner,article.post.link .post-content .link-inner,#pagination .next a:hover,#pagination .prev a:hover,.comment-list .reply a:hover,input[type=submit]:hover,input[type="button"]:hover,#footer-outer #copyright li a.vimeo:hover,#footer-outer #copyright li a.behance:hover,.toggle.open h3 a,.tabbed > ul li a.active-tab,[class*=" icon-"],.icon-normal,.bar_graph li span,.nectar-button[data-color-override="false"].regular-button,.nectar-button.tilt.accent-color,body .swiper-slide .button.transparent_2 a.primary-color:hover,#footer-outer #footer-widgets .col input[type="submit"],.carousel-prev:hover,.carousel-next:hover,.blog-recent .more-link span:hover,.post-tags a:hover,.pricing-column.highlight h3,.pricing-table[data-style="flat-alternative"] .pricing-column.highlight h3 .highlight-reason,.pricing-table[data-style="flat-alternative"] .pricing-column.accent-color:before,#to-top:hover,#to-top.dark:hover,body[data-button-style="rounded"] #to-top:after,#pagination a.page-numbers:hover,#pagination span.page-numbers.current,.single-portfolio .facebook-share a:hover,.single-portfolio .twitter-share a:hover,.single-portfolio .pinterest-share a:hover,.single-post .facebook-share a:hover,.single-post .twitter-share a:hover,.single-post .pinterest-share a:hover,.mejs-controls .mejs-time-rail .mejs-time-current,.mejs-controls .mejs-volume-button .mejs-volume-slider .mejs-volume-current,.mejs-controls .mejs-horizontal-volume-slider .mejs-horizontal-volume-current,article.post.quote .post-content .quote-inner,article.post.link .post-content .link-inner,article.format-status .post-content .status-inner,article.post.format-aside .aside-inner,body #header-secondary-outer #social li a.behance:hover,body #header-secondary-outer #social li a.vimeo:hover,#sidebar .widget:hover [class^="icon-"].icon-3x,.woocommerce-page div[data-project-style="text_on_hover"] .single_add_to_cart_button,article.post.quote .content-inner .quote-inner .whole-link,.iosSlider .prev_slide:hover,.iosSlider .next_slide:hover,body [class^="icon-"].icon-3x.alt-style.accent-color,body [class*=" icon-"].icon-3x.alt-style.accent-color,#slide-out-widget-area,#slide-out-widget-area-bg.fullscreen,#header-outer .widget_shopping_cart a.button,body[data-button-style="rounded"] .wpb_wrapper .twitter-share:before,body[data-button-style="rounded"] .wpb_wrapper .twitter-share.hovered:before,body[data-button-style="rounded"] .wpb_wrapper .facebook-share:before,body[data-button-style="rounded"] .wpb_wrapper .facebook-share.hovered:before,body[data-button-style="rounded"] .wpb_wrapper .google-plus-share:before,body[data-button-style="rounded"] .wpb_wrapper .google-plus-share.hovered:before,body[data-button-style="rounded"] .wpb_wrapper .pinterest-share:before,body[data-button-style="rounded"] .wpb_wrapper .pinterest-share.hovered:before,body[data-button-style="rounded"] .wpb_wrapper .linkedin-share:before,body[data-button-style="rounded"] .wpb_wrapper .linkedin-share.hovered:before,#header-outer a.cart-contents .cart-wrap span,.swiper-slide .button.solid_color a,.swiper-slide .button.solid_color_2 a,.portfolio-filters,button[type=submit]:hover,#buddypress button:hover,#buddypress a.button:hover,#buddypress ul.button-nav li.current a,header#top nav ul .slide-out-widget-area-toggle a:hover i.lines,header#top nav ul .slide-out-widget-area-toggle a:hover i.lines:after,header#top nav ul .slide-out-widget-area-toggle a:hover i.lines:before,#buddypress a.button:focus,.text_on_hover.product a.added_to_cart,.woocommerce div.product .woocommerce-tabs .full-width-content ul.tabs li a:after,.woocommerce div[data-project-style="text_on_hover"] .cart .quantity input.minus,.woocommerce div[data-project-style="text_on_hover"] .cart .quantity input.plus,.woocommerce .span_4 input[type="submit"].checkout-button,.portfolio-filters-inline[data-color-scheme="accent-color"]{background-color:#ff4629!important;}.col:hover > [class^="icon-"].icon-3x:not(.alt-style).accent-color.hovered,.col:hover > [class*=" icon-"].icon-3x:not(.alt-style).accent-color.hovered,body .nectar-button.see-through-2[data-hover-color-override="false"]:hover,.col:not(#post-area):not(.span_12):not(#sidebar):hover [class^="icon-"].icon-3x:not(.alt-style).accent-color.hovered,.col:not(#post-area):not(.span_12):not(#sidebar):hover a [class*=" icon-"].icon-3x:not(.alt-style).accent-color.hovered{background-color:#ff4629!important;}.tabbed > ul li a.active-tab,body .recent_projects_widget a:hover img,.recent_projects_widget a:hover img,#sidebar #flickr a:hover img,body .nectar-button.see-through-2[data-hover-color-override="false"]:hover,#footer-outer #flickr a:hover img,body[data-button-style="rounded"] .wpb_wrapper .twitter-share:before,body[data-button-style="rounded"] .wpb_wrapper .twitter-share.hovered:before,body[data-button-style="rounded"] .wpb_wrapper .facebook-share:before,body[data-button-style="rounded"] .wpb_wrapper .facebook-share.hovered:before,body[data-button-style="rounded"] .wpb_wrapper .google-plus-share:before,body[data-button-style="rounded"] .wpb_wrapper .google-plus-share.hovered:before,body[data-button-style="rounded"] .wpb_wrapper .pinterest-share:before,body[data-button-style="rounded"] .wpb_wrapper .pinterest-share.hovered:before,body[data-button-style="rounded"] .wpb_wrapper .linkedin-share:before,body[data-button-style="rounded"] .wpb_wrapper .linkedin-share.hovered:before,#featured article .post-title a:hover,body #featured article .post-title a:hover,div.wpcf7-validation-errors,.single #single-meta ul li:not(.meta-share-count):hover a,.single #project-meta ul li:not(.meta-share-count):hover a{border-color:#ff4629!important;}.default-loading-icon:before{border-top-color:#ff4629!important;}#header-outer a.cart-contents span:before{border-color:transparent #ff4629!important;}body .col:not(#post-area):not(.span_12):not(#sidebar):hover .hovered .circle-border,body #sidebar .widget:hover .circle-border{border-color:#ff4629;}.gallery a:hover img{border-color:#ff4629!important;}@media only screen and (min-width :1px) and (max-width :1000px){body #featured article .post-title > a{background-color:#ff4629;}body #featured article .post-title > a{border-color:#ff4629;}}.nectar-button.regular-button.extra-color-1,.nectar-button.tilt.extra-color-1{background-color:#f6653c!important;}.icon-3x[class^="icon-"].extra-color-1:not(.alt-style),.icon-tiny[class^="icon-"].extra-color-1,.icon-3x[class*=" icon-"].extra-color-1:not(.alt-style),body .icon-3x[class*=" icon-"].extra-color-1:not(.alt-style) .circle-border,.woocommerce-page table.cart a.remove,#header-outer .widget_shopping_cart .cart_list li a.remove,#header-outer .woocommerce.widget_shopping_cart .cart_list li a.remove,.nectar-milestone .number.extra-color-1,span.extra-color-1,.team-member ul.social.extra-color-1 li a,.stock.out-of-stock,body [class^="icon-"].icon-default-style.extra-color-1,.team-member a.extra-color-1:hover,.pricing-table[data-style="flat-alternative"] .pricing-column.highlight.extra-color-1 h3,.pricing-table[data-style="flat-alternative"] .pricing-column.extra-color-1 h4,.pricing-table[data-style="flat-alternative"] .pricing-column.extra-color-1 .interval,.svg-icon-holder[data-color="extra-color-1"]{color:#f6653c!important;}.col:hover > [class^="icon-"].icon-3x.extra-color-1:not(.alt-style),.col:hover > [class*=" icon-"].icon-3x.extra-color-1:not(.alt-style).hovered,body .swiper-slide .button.transparent_2 a.extra-color-1:hover,body .col:not(#post-area):not(.span_12):not(#sidebar):hover [class^="icon-"].icon-3x.extra-color-1:not(.alt-style).hovered,body .col:not(#post-area):not(#sidebar):not(.span_12):hover a [class*=" icon-"].icon-3x.extra-color-1:not(.alt-style).hovered,#sidebar .widget:hover [class^="icon-"].icon-3x.extra-color-1:not(.alt-style),.portfolio-filters-inline[data-color-scheme="extra-color-1"],.pricing-table[data-style="flat-alternative"] .pricing-column.extra-color-1:before,.pricing-table[data-style="flat-alternative"] .pricing-column.highlight.extra-color-1 h3 .highlight-reason{background-color:#f6653c!important;}body [class^="icon-"].icon-3x.alt-style.extra-color-1,body [class*=" icon-"].icon-3x.alt-style.extra-color-1,[class*=" icon-"].extra-color-1.icon-normal,.extra-color-1.icon-normal,.bar_graph li span.extra-color-1,.nectar-progress-bar span.extra-color-1,#header-outer .widget_shopping_cart a.button,.woocommerce ul.products li.product .onsale,.woocommerce-page ul.products li.product .onsale,.woocommerce span.onsale,.woocommerce-page span.onsale,.woocommerce-page table.cart a.remove:hover,.swiper-slide .button.solid_color a.extra-color-1,.swiper-slide .button.solid_color_2 a.extra-color-1,.toggle.open.extra-color-1 h3 a{background-color:#f6653c!important;}.col:hover > [class^="icon-"].icon-3x.extra-color-1.alt-style.hovered,.col:hover > [class*=" icon-"].icon-3x.extra-color-1.alt-style.hovered,.no-highlight.extra-color-1 h3,.col:not(#post-area):not(.span_12):not(#sidebar):hover [class^="icon-"].icon-3x.extra-color-1.alt-style.hovered,body .col:not(#post-area):not(.span_12):not(#sidebar):hover a [class*=" icon-"].icon-3x.extra-color-1.alt-style.hovered{color:#f6653c!important;}body .col:not(#post-area):not(.span_12):not(#sidebar):hover .extra-color-1.hovered .circle-border,.woocommerce-page table.cart a.remove,#header-outer .woocommerce.widget_shopping_cart .cart_list li a.remove,#header-outer .woocommerce.widget_shopping_cart .cart_list li a.remove,body #sidebar .widget:hover .extra-color-1 .circle-border,.woocommerce-page table.cart a.remove{border-color:#f6653c;}.pricing-column.highlight.extra-color-1 h3{background-color:#f6653c!important;}.nectar-button.regular-button.extra-color-2,.nectar-button.tilt.extra-color-2{background-color:#2AC4EA!important;}.icon-3x[class^="icon-"].extra-color-2:not(.alt-style),.icon-3x[class*=" icon-"].extra-color-2:not(.alt-style),.icon-tiny[class^="icon-"].extra-color-2,body .icon-3x[class*=" icon-"].extra-color-2 .circle-border,.nectar-milestone .number.extra-color-2,span.extra-color-2,.team-member ul.social.extra-color-2 li a,body [class^="icon-"].icon-default-style.extra-color-2,.team-member a.extra-color-2:hover,.pricing-table[data-style="flat-alternative"] .pricing-column.highlight.extra-color-2 h3,.pricing-table[data-style="flat-alternative"] .pricing-column.extra-color-2 h4,.pricing-table[data-style="flat-alternative"] .pricing-column.extra-color-2 .interval,.svg-icon-holder[data-color="extra-color-2"]{color:#2AC4EA!important;}.col:hover > [class^="icon-"].icon-3x.extra-color-2:not(.alt-style).hovered,.col:hover > [class*=" icon-"].icon-3x.extra-color-2:not(.alt-style).hovered,body .swiper-slide .button.transparent_2 a.extra-color-2:hover,.col:not(#post-area):not(.span_12):not(#sidebar):hover [class^="icon-"].icon-3x.extra-color-2:not(.alt-style).hovered,.col:not(#post-area):not(.span_12):not(#sidebar):hover a [class*=" icon-"].icon-3x.extra-color-2:not(.alt-style).hovered,#sidebar .widget:hover [class^="icon-"].icon-3x.extra-color-2:not(.alt-style),.pricing-table[data-style="flat-alternative"] .pricing-column.highlight.extra-color-2 h3 .highlight-reason{background-color:#2AC4EA!important;}body [class^="icon-"].icon-3x.alt-style.extra-color-2,body [class*=" icon-"].icon-3x.alt-style.extra-color-2,[class*=" icon-"].extra-color-2.icon-normal,.extra-color-2.icon-normal,.bar_graph li span.extra-color-2,.nectar-progress-bar span.extra-color-2,.woocommerce .product-wrap .add_to_cart_button.added,.woocommerce-message,.woocommerce-error,.woocommerce-info,.woocommerce .widget_price_filter .ui-slider .ui-slider-range,.woocommerce-page .widget_price_filter .ui-slider .ui-slider-range,.swiper-slide .button.solid_color a.extra-color-2,.swiper-slide .button.solid_color_2 a.extra-color-2,.toggle.open.extra-color-2 h3 a,.portfolio-filters-inline[data-color-scheme="extra-color-2"],.pricing-table[data-style="flat-alternative"] .pricing-column.extra-color-2:before{background-color:#2AC4EA!important;}.col:hover > [class^="icon-"].icon-3x.extra-color-2.alt-style.hovered,.col:hover > [class*=" icon-"].icon-3x.extra-color-2.alt-style.hovered,.no-highlight.extra-color-2 h3,.col:not(#post-area):not(.span_12):not(#sidebar):hover [class^="icon-"].icon-3x.extra-color-2.alt-style.hovered,body .col:not(#post-area):not(.span_12):not(#sidebar):hover a [class*=" icon-"].icon-3x.extra-color-2.alt-style.hovered{color:#2AC4EA!important;}body .col:not(#post-area):not(.span_12):not(#sidebar):hover .extra-color-2.hovered .circle-border,body #sidebar .widget:hover .extra-color-2 .circle-border{border-color:#2AC4EA;}.pricing-column.highlight.extra-color-2 h3{background-color:#2AC4EA!important;}.nectar-button.regular-button.extra-color-3,.nectar-button.tilt.extra-color-3{background-color:#333333!important;}.icon-3x[class^="icon-"].extra-color-3:not(.alt-style),.icon-3x[class*=" icon-"].extra-color-3:not(.alt-style),.icon-tiny[class^="icon-"].extra-color-3,body .icon-3x[class*=" icon-"].extra-color-3 .circle-border,.nectar-milestone .number.extra-color-3,span.extra-color-3,.team-member ul.social.extra-color-3 li a,body [class^="icon-"].icon-default-style.extra-color-3,.team-member a.extra-color-3:hover,.pricing-table[data-style="flat-alternative"] .pricing-column.highlight.extra-color-3 h3,.pricing-table[data-style="flat-alternative"] .pricing-column.extra-color-3 h4,.pricing-table[data-style="flat-alternative"] .pricing-column.extra-color-3 .interval,.svg-icon-holder[data-color="extra-color-3"]{color:#333333!important;}.col:hover > [class^="icon-"].icon-3x.extra-color-3:not(.alt-style).hovered,.col:hover > [class*=" icon-"].icon-3x.extra-color-3:not(.alt-style).hovered,body .swiper-slide .button.transparent_2 a.extra-color-3:hover,.col:not(#post-area):not(.span_12):not(#sidebar):hover [class^="icon-"].icon-3x.extra-color-3:not(.alt-style).hovered,.col:not(#post-area):not(.span_12):not(#sidebar):hover a [class*=" icon-"].icon-3x.extra-color-3:not(.alt-style).hovered,#sidebar .widget:hover [class^="icon-"].icon-3x.extra-color-3:not(.alt-style),.portfolio-filters-inline[data-color-scheme="extra-color-3"],.pricing-table[data-style="flat-alternative"] .pricing-column.extra-color-3:before,.pricing-table[data-style="flat-alternative"] .pricing-column.highlight.extra-color-3 h3 .highlight-reason{background-color:#333333!important;}body [class^="icon-"].icon-3x.alt-style.extra-color-3,body [class*=" icon-"].icon-3x.alt-style.extra-color-3,.extra-color-3.icon-normal,[class*=" icon-"].extra-color-3.icon-normal,.bar_graph li span.extra-color-3,.nectar-progress-bar span.extra-color-3,.swiper-slide .button.solid_color a.extra-color-3,.swiper-slide .button.solid_color_2 a.extra-color-3,.toggle.open.extra-color-3 h3 a{background-color:#333333!important;}.col:hover > [class^="icon-"].icon-3x.extra-color-3.alt-style.hovered,.col:hover > [class*=" icon-"].icon-3x.extra-color-3.alt-style.hovered,.no-highlight.extra-color-3 h3,.col:not(#post-area):not(.span_12):not(#sidebar):hover [class^="icon-"].icon-3x.extra-color-3.alt-style.hovered,body .col:not(#post-area):not(.span_12):not(#sidebar):hover a [class*=" icon-"].icon-3x.extra-color-3.alt-style.hovered{color:#333333!important;}body .col:not(#post-area):not(.span_12):not(#sidebar):hover .extra-color-3.hovered .circle-border,body #sidebar .widget:hover .extra-color-3 .circle-border{border-color:#333333;}.pricing-column.highlight.extra-color-3 h3{background-color:#333333!important;}#call-to-action{background-color:#ECEBE9!important;}#call-to-action span{color:#4B4F52!important;}body #slide-out-widget-area-bg{background-color:rgba(0,0,0,0.8);}</style>
  <style type="text/css"> #header-outer{padding-top:28px;}#header-outer #logo img{height:30px;}header#top nav > ul > li > a{padding-bottom:33px;padding-top:5px;}#header-outer .cart-menu{padding-bottom:33px;padding-top:33px;}header#top nav > ul li#search-btn,header#top nav > ul li.slide-out-widget-area-toggle{padding-bottom:4px;padding-top:5px;}header#top .sf-menu > li.sfHover > ul{top:20px;}.sf-sub-indicator{height:20px;}#header-space{height:86px;}body[data-smooth-scrolling="1"] #full_width_portfolio .project-title.parallax-effect{top:86px;}body.single-product div.product .product_title{padding-right:0;}@media only screen and (min-width:1000px){body:not(.ascend)[data-slide-out-widget-area="true"] #header-outer[data-has-menu="false"][data-permanent-transparent="false"] header#top,body.ascend[data-slide-out-widget-area="true"] #header-outer[data-has-menu="false"][data-permanent-transparent="false"][data-full-width="false"] header#top{padding-bottom:28px;}}@media only screen and (min-width:1000px) and (max-width:1300px){.nectar-slider-wrap[data-full-width="true"] .swiper-slide .content h2,.nectar-slider-wrap[data-full-width="boxed-full-width"] .swiper-slide .content h2,.full-width-content .vc_span12 .swiper-slide .content h2{font-size:45px!important;line-height:51px!important;}.nectar-slider-wrap[data-full-width="true"] .swiper-slide .content p,.nectar-slider-wrap[data-full-width="boxed-full-width"] .swiper-slide .content p,.full-width-content .vc_span12 .swiper-slide .content p{font-size:18px!important;line-height:31.2px!important;}}@media only screen and (min-width :690px) and (max-width :1000px){.nectar-slider-wrap[data-full-width="true"] .swiper-slide .content h2,.nectar-slider-wrap[data-full-width="boxed-full-width"] .swiper-slide .content h2,.full-width-content .vc_span12 .swiper-slide .content h2{font-size:33px!important;line-height:39px!important;}.nectar-slider-wrap[data-full-width="true"] .swiper-slide .content p,.nectar-slider-wrap[data-full-width="boxed-full-width"] .swiper-slide .content p,.full-width-content .vc_span12 .swiper-slide .content p{font-size:13.2px!important;line-height:24px!important;}}@media only screen and (max-width :690px){.nectar-slider-wrap[data-full-width="true"][data-fullscreen="false"] .swiper-slide .content h2,.nectar-slider-wrap[data-full-width="boxed-full-width"][data-fullscreen="false"] .swiper-slide .content h2,.full-width-content .vc_span12 .nectar-slider-wrap[data-fullscreen="false"] .swiper-slide .content h2{font-size:15px!important;line-height:21px!important;}.nectar-slider-wrap[data-full-width="true"][data-fullscreen="false"] .swiper-slide .content p,.nectar-slider-wrap[data-full-width="boxed-full-width"][data-fullscreen="false"] .swiper-slide .content p,.full-width-content .vc_span12 .nectar-slider-wrap[data-fullscreen="false"] .swiper-slide .content p{font-size:7.68px!important;line-height:17.52px!important;}}@media only screen and (min-width:1000px){.container,.woocommerce-tabs .full-width-content .tab-container{max-width:1425px;width:100%;margin:0 auto;padding:0 90px;}.swiper-slide .content{padding:0 90px;}body .container .container:not(.tab-container){width:100%!important;padding:0!important;}body .carousel-heading .container{padding:0 10px!important;}body .carousel-heading .container .carousel-next{right:10px;}body .carousel-heading .container .carousel-prev{right:35px;}.carousel-wrap[data-full-width="true"] .carousel-heading a.portfolio-page-link{left:90px;}.carousel-wrap[data-full-width="true"] .carousel-heading{margin-left:-20px;margin-right:-20px;}.carousel-wrap[data-full-width="true"] .carousel-next{right:90px!important;}.carousel-wrap[data-full-width="true"] .carousel-prev{right:115px!important;}.carousel-wrap[data-full-width="true"]{padding:0!important;}.carousel-wrap[data-full-width="true"] .caroufredsel_wrapper{padding:20px!important;}#search-outer #search #close a{right:90px;}#boxed,#boxed #header-outer,#boxed #header-secondary-outer,#boxed #slide-out-widget-area-bg.fullscreen,#boxed #page-header-bg[data-parallax="1"],#boxed #featured,body[data-footer-reveal="1"] #boxed #footer-outer,#boxed .orbit > div,#boxed #featured article,.ascend #boxed #search-outer{max-width:1400px!important;width:90%!important;min-width:980px;}#boxed #search-outer #search #close a{right:0!important;}#boxed .container{width:92%;padding:0;}#boxed #footer-outer #footer-widgets,#boxed #footer-outer #copyright{padding-left:0;padding-right:0;}#boxed .carousel-wrap[data-full-width="true"] .carousel-heading a.portfolio-page-link{left:35px;}#boxed .carousel-wrap[data-full-width="true"] .carousel-next{right:35px!important;}#boxed .carousel-wrap[data-full-width="true"] .carousel-prev{right:60px!important;}}.pagination-navigation{-webkit-filter:url("https://jsao.io/2015/06/authentication-with-node-js-jwts-and-oracle-database/#goo");filter:url("https://jsao.io/2015/06/authentication-with-node-js-jwts-and-oracle-database/#goo");}</style>
  <style type="text/css">body{
   font-size: 16px;
   color: #404040;
}

a:hover {
    color: #cc1b00;
}

p {
    -webkit-font-smoothing: antialiased;
}

#logo span{
    color: #FF0000
}

#logo:hover span {
    color: #444444;
}

.terminal-io{
    white-space: pre;
    word-wrap: normal;
    overflow: auto !important;
    background-color: rgba(0,0,0,0.05);
    border-radius: 3px;
    padding: 0 17px 13px;
    margin-bottom: 27px;
    font-size: 14px;
    line-height: 16px;
    font-family: monospace;
}

.crayon-syntax{
    margin-top: 0 !important;
    margin-bottom: 25px !important;
}

.inline-code{
  font-family: monospace;
  font-size: .9em;
  background-color: #e7f3fe;
  color: #1d5996;
  border-radius: 2px;
  padding: 1px 2px;
}

.inline-code a:hover{
  color: #e61f00;
}

.alert {
  padding: 15px;
  margin-bottom: 20px;
  border: 1px solid rgba(0, 0, 0, 0);
  border-radius: 4px;
}

.alert a {
  color: #e61f00;    
}

.alert-info a:hover {
    color: #b31800;
}

.alert-info {
  color: #31708F;
  background-color: #D9EDF7;
  border-color: #BCE8F1;
}

.alert-warning {
  color: #8A6D3B;
  background-color: #FCF8E3;
  border-color: #FAEBCC;
}

.alert-danger {
  color: #A94442;
  background-color: #F2DEDE;
  border-color: #EBCCD1;
}

.results-table-wrapper {
  width: 100%;
  overflow: auto;
  -webkit-overflow-scrolling: touch;
}

.results-table-wrapper table td {
    text-align: left !important;
}

blockquote {
    line-height: 25px;
    font-size: 20px;
    padding-left: 20px;
}</style> 
  <style type="text/css">.recentcomments a{display:inline !important;padding:0 !important;margin:0 !important;}</style> 
  <meta name="generator" content="Powered by Visual Composer - drag and drop page builder for WordPress."> 
  <!--[if lte IE 9]><link rel="stylesheet" type="text/css" href="https://jsao.io/wp-content/plugins/js_composer_salient/assets/css/vc_lte_ie9.css" media="screen"><![endif]-->
  <!--[if IE  8]><link rel="stylesheet" type="text/css" href="https://jsao.io/wp-content/plugins/js_composer_salient/assets/css/vc-ie8.css" media="screen"><![endif]-->
  <noscript>
   <style> .wpb_animate_when_almost_visible { opacity: 1; }</style>
  </noscript> 
 </head> 
 <body class="post-template-default single single-post postid-372 single-format-standard nectar-auto-lightbox wpb-js-composer js-comp-ver-4.7.4 vc_responsive" data-footer-reveal="false" data-footer-reveal-shadow="none" data-button-style="default" data-header-inherit-rc="false" data-header-search="true" data-animated-anchors="true" data-ajax-transitions="false" data-full-width-header="false" data-slide-out-widget-area="false" data-loading-animation="none" data-bg-header="false" data-ext-responsive="true" data-header-resize="1" data-header-color="light" data-transparent-header="false" data-smooth-scrolling="0" data-permanent-transparent="false" data-responsive="1"> 
  <script>
  (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
  (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
  m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
  })(window,document,'script','//www.google-analytics.com/analytics.js','ga');

  ga('create', 'UA-58769132-1', 'auto');
  ga('send', 'pageview');

</script> 
  <div id="header-space" data-header-mobile-fixed="false"></div> 
  <div id="header-outer" data-has-menu="true" data-mobile-fixed="false" data-user-set-bg="#ffffff" data-format="default" data-permanent-transparent="false" data-cart="false" data-transparency-option="0" data-shrink-num="6" data-full-width="false" data-using-secondary="0" data-using-logo="" data-logo-height="" data-padding="28" data-header-resize="1"> 
   <div id="search-outer" class="nectar"> 
    <div id="search"> 
     <div class="container"> 
      <div id="search-box"> 
       <div class="col span_12"> 
        <form action="https://jsao.io" method="GET"> 
         <input type="text" name="s" id="s" value="Start Typing..." data-placeholder="Start Typing..."> 
        </form> 
       </div>
       <!--/span_12--> 
      </div>
      <!--/search-box--> 
      <div id="close">
       <a href="#"><span class="icon-salient-x" aria-hidden="true"></span></a>
      </div> 
     </div>
     <!--/container--> 
    </div>
    <!--/search--> 
   </div>
   <!--/search-outer--> 
   <header id="top"> 
    <div class="container"> 
     <div class="row"> 
      <div class="col span_3"> 
       <a id="logo" href="https://jsao.io" class="no-image"> <span>J</span>ava<span>S</span>cript <span>a</span>nd <span>O</span>racle </a> 
      </div>
      <!--/span_3--> 
      <div class="col span_9 col_last"> 
       <a href="#mobilemenu" id="toggle-nav"><i class="icon-reorder"></i></a> 
       <nav> 
        <ul class="buttons" data-user-set-ocm="off"> 
         <li id="search-btn">
          <div>
           <a href="#searchbox"><span class="icon-salient-search" aria-hidden="true"></span></a>
          </div> </li> 
        </ul> 
        <ul class="sf-menu"> 
         <li id="menu-item-15" class="menu-item menu-item-type-post_type menu-item-object-page menu-item-15"><a href="https://jsao.io/about/">About</a></li> 
         <li id="menu-item-11" class="menu-item menu-item-type-post_type menu-item-object-page menu-item-11"><a title="contact" href="https://jsao.io/contact/">Contact</a></li> 
        </ul> 
       </nav> 
      </div>
      <!--/span_9--> 
     </div>
     <!--/row--> 
    </div>
    <!--/container--> 
   </header> 
   <div class="ns-loading-cover"></div> 
  </div>
  <!--/header-outer--> 
  <div id="mobile-menu" data-mobile-fixed="false"> 
   <div class="container"> 
    <ul> 
     <li class="menu-item menu-item-type-post_type menu-item-object-page menu-item-15"><a href="https://jsao.io/about/">About</a></li> 
     <li class="menu-item menu-item-type-post_type menu-item-object-page menu-item-11"><a title="contact" href="https://jsao.io/contact/">Contact</a></li> 
     <li id="mobile-search"> 
      <form action="https://jsao.io" method="GET"> 
       <input type="text" name="s" value="" placeholder="Search.."> 
      </form> </li> 
    </ul> 
   </div> 
  </div> 
  <div id="ajax-loading-screen" data-disable-fade-on-click="0" data-method="ajax">
   <span class="loading-icon "> <span class="default-skin-loading-icon"></span> </span>
  </div> 
  <div id="ajax-content-wrap"> 
   <div class="container-wrap  "> 
    <div class="container main-content"> 
     <div class="row heading-title"> 
      <div class="col span_12 section-title blog-title"> 
       <h1 class="entry-title">Authentication with Node.js, JWTs, and Oracle Database</h1> 
       <div id="single-below-header"> 
        <span class="meta-author vcard author"><span class="fn">By <a href="https://jsao.io/author/danmcghan/" title="Posts by danmcghan" rel="author">danmcghan</a></span></span> 
        <span class="meta-date date updated">June 3, 2015</span> 
        <span class="meta-category"><a href="https://jsao.io/category/uncategorized/">Uncategorized</a></span> 
        <!--project-additional--> 
       </div>
       <!--/single-below-header--> 
       <div id="single-meta" data-sharing="1"> 
        <ul> 
         <li class="meta-comment-count"> <a href="https://jsao.io/2015/06/authentication-with-node-js-jwts-and-oracle-database/#comments"><i class="icon-default-style steadysets-icon-chat"></i> 12 Comments</a> </li> 
         <li> <span class="n-shortcode"><a href="#" class="nectar-love" id="nectar-love-372" title="Love this"> <i class="icon-salient-heart"></i><span class="nectar-love-count">0</span></a></span> </li> 
         <li class="meta-share-count"><a href="#"><i class="icon-default-style steadysets-icon-share"></i><span class="share-count-total">0</span></a> 
          <div class="nectar-social">
           <a class="facebook-share nectar-sharing" href="#" title="Share this"> <i class="icon-facebook"></i> <span class="count"></span></a>
           <a class="twitter-share nectar-sharing" href="#" title="Tweet this"> <i class="icon-twitter"></i> <span class="count"></span></a>
           <a class="google-plus-share nectar-sharing-alt" href="#" title="Share this"> <i class="icon-google-plus"></i> <span class="count"> 0 </span></a>
           <a class="linkedin-share nectar-sharing" href="#" title="Share this"> <i class="icon-linkedin"></i> <span class="count"> </span></a>
          </div></li> 
        </ul> 
       </div>
       <!--/single-meta--> 
      </div>
      <!--/section-title--> 
     </div>
     <!--/row--> 
     <div class="row"> 
      <div id="post-area" class="col span_9"> 
       <article id="post-372" class="regular post-372 post type-post status-publish format-standard has-post-thumbnail hentry category-uncategorized"> 
        <div class="post-content"> 
         <div class="content-inner"> 
          <span class="post-featured-img"><img width="800" height="600" src="https://jsao.io/wp-content/uploads/2015/06/authentication.jpg" class="attachment-full size-full wp-post-image" alt="" title="" srcset="https://jsao.io/wp-content/uploads/2015/06/authentication.jpg 800w, https://jsao.io/wp-content/uploads/2015/06/authentication-300x225.jpg 300w" sizes="(max-width: 800px) 100vw, 800px"></span> 
          <p>Authentication isn’t exactly hard, it’s just that there are a <em>lot</em> of moving pieces to consider. Should you provide local authentication or 3rd party authentication via identity providers such as Google and Facebook? Can you reuse an existing credential store like Active Directory? What libraries should you use to help you encrypt passwords and manage logins? Should you use cookie based authentication with sessions or use the emerging JSON Web Token (JWT) standard instead. Are there libraries for JWTs? Which is the best? Okay fine, authentication is hard. But it’s also necessary.<br> <span id="more-372"></span><br> Authentication strategies should be tailored to the application being built. If it’s an internal application you’ll likely want to reuse an existing credential store. Public facing applications will probably use a combination of local credentials and identity providers. In this post I’ll show you how to create a very basic API that authenticates users via local credentials stored in an Oracle Database table and uses JWTs to identify users after they’ve been authenticated. Once understood, the concepts used here could be adapted to better fit your specific authentication needs.</p> 
          <p>What’s a JWT (pronounced “jot”) you ask? That’s a great question, but it’s not one I’m going to attempt to answer here in full. Suffice it to say, JWTs are an alternative to cookies that can be used to identify users post authentication. With JWTs, claims (such as ones identity) can be encrypted and signed before being encoded and then transferred to and from the client. This avoids the need to create and lookup sessions making JWTs stateless in nature and easy to scale. Also, because JWTs use HTTP headers rather than cookies, RESTful APIs that use JWTs can be used by mobile apps as well as web applications (or anything else that can make HTTP requests). For more information on JWTs, check out these resources:</p> 
          <ul> 
           <li><a href="http://self-issued.info/docs/draft-ietf-oauth-json-web-token.html">http://self-issued.info/docs/draft-ietf-oauth-json-web-token.html</a></li> 
           <li><a href="https://scotch.io/tutorials/the-anatomy-of-a-json-web-token">https://scotch.io/tutorials/the-anatomy-of-a-json-web-token</a></li> 
          </ul> 
          <h4>Prerequisites</h4> 
          <p>To complete this tutorial you’ll need to have an Oracle Database, Node.js, and the Oracle Database Node.js driver (v0.5 or better) ready to go. Checkout <a href="https://jsao.io/2015/01/up-and-running-with-node-js-oracle/">Up and Running with Node.js and Oracle</a> if you are interested in getting a VM setup with these requirements.</p> 
          <p>There will not be a front-end application included with this post (though I may release one in a future post), so you’ll need to have access to a REST client that allows you to test making requests and examine the responses. If you use the Chrome web browser and prefer a GUI, I recommend either Postman or Advanced REST client, both of which are available for free in the Chrome Web Store. If you prefer command line tools I recommend <a href="http://curl.haxx.se/">cURL</a>.</p> 
          <h4>Database Objects</h4> 
          <p>Let’s kick things off by creating three tables and some supporting objects in the database. Execute this code in the schema that you’ll be connecting to from Node.js using a tool like <a href="http://www.oracle.com/technetwork/developer-tools/sql-developer/overview/index-097090.html">SQL Developer</a>.</p> 
          <!-- Crayon Syntax Highlighter v_2.7.2_beta --> 
          <div id="crayon-59d380ad4688b686631480" class="crayon-syntax crayon-theme-classic crayon-font-monaco crayon-os-pc print-yes notranslate" data-settings=" no-popup minimize scroll-mouseover" style=" margin-top: 12px; margin-bottom: 12px; font-size: 12px !important; line-height: 15px !important;"> 
           <div class="crayon-toolbar" data-settings=" show" style="font-size: 12px !important;height: 18px !important; line-height: 18px !important;">
            <span class="crayon-title"></span> 
            <div class="crayon-tools" style="font-size: 12px !important;height: 18px !important; line-height: 18px !important;">
             <div class="crayon-button crayon-copy-button" title="Copy">
              <div class="crayon-button-icon"></div>
             </div>
             <span class="crayon-language">Oracle PL/SQL</span>
            </div>
           </div> 
           <div class="crayon-info" style="min-height: 16.8px !important; line-height: 16.8px !important;"></div> 
           <div class="crayon-plain-wrap">
            <textarea wrap="soft" class="crayon-plain print-no" data-settings="dblclick" readonly style="-moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4; font-size: 12px !important; line-height: 15px !important;">
create table jsao_users (
   id number not null,
   email varchar2(100 byte) not null,
   role varchar2(10 byte) not null,
   password varchar2(100 byte) not null,
   constraint jsao_users_pk primary key (id),
   constraint jsao_users_chk1 check (role in ('BASE', 'ADMIN')),
   constraint jsao_users_uk1 unique (email)
);

create sequence jsao_users_seq;

create or replace trigger bir_jsao_users_trg
   before insert on jsao_users
   for each row
begin
   if :new.id is null
   then
      :new.id := jsao_users_seq.nextval;
   end if;
end bir_jsao_users_trg;
/

create table jsao_public_things (
   column1 varchar2(200 byte) not null
);

insert into jsao_public_things (column1) values ('Lorem ipsum dolor sit amet, consectetur adipiscing elit.');
insert into jsao_public_things (column1) values ('Morbi interdum, justo a commodo gravida, magna tortor scelerisque nisl, vitae iaculis odio nisi vel risus.');
insert into jsao_public_things (column1) values ('Fusce ac dui ullamcorper, dignissim purus sit amet, consequat dolor.');
insert into jsao_public_things (column1) values ('Vestibulum ante ipsum primis in faucibus orci luctus et ultrices posuere cubilia Curae; Mauris porttitor tincidunt magna nec pharetra. ');
insert into jsao_public_things (column1) values ('Vestibulum mi purus, ornare ut sem sed, porttitor fermentum erat.');

create table jsao_protected_things(
   column1 varchar2(200 byte) not null
);

insert into jsao_protected_things (column1) values ('Bacon ipsum dolor amet shank sirloin capicola tenderloin pork chop salami.');
insert into jsao_protected_things (column1) values ('Pancetta frankfurter ham hock t-bone. ');
insert into jsao_protected_things (column1) values ('Boudin drumstick tongue ground round pork jerky prosciutto pork belly brisket meatball ham, doner biltong sausage.');
insert into jsao_protected_things (column1) values ('Beef ribs jerky chicken t-bone, andouille rump spare ribs short loin shankle frankfurter sirloin ham hock ball tip pork loin turducken.');
insert into jsao_protected_things (column1) values ('Porchetta beef brisket, jowl flank leberkas capicola turducken ground round meatloaf hamburger strip steak venison. ');

commit;</textarea>
           </div> 
           <div class="crayon-main" style=""> 
            <table class="crayon-table"> 
             <tbody>
              <tr class="crayon-row"> 
               <td class="crayon-nums " data-settings="show"> 
                <div class="crayon-nums-content" style="font-size: 12px !important; line-height: 15px !important;">
                 <div class="crayon-num" data-line="crayon-59d380ad4688b686631480-1">
                  1
                 </div>
                 <div class="crayon-num crayon-striped-num" data-line="crayon-59d380ad4688b686631480-2">
                  2
                 </div>
                 <div class="crayon-num" data-line="crayon-59d380ad4688b686631480-3">
                  3
                 </div>
                 <div class="crayon-num crayon-striped-num" data-line="crayon-59d380ad4688b686631480-4">
                  4
                 </div>
                 <div class="crayon-num" data-line="crayon-59d380ad4688b686631480-5">
                  5
                 </div>
                 <div class="crayon-num crayon-striped-num" data-line="crayon-59d380ad4688b686631480-6">
                  6
                 </div>
                 <div class="crayon-num" data-line="crayon-59d380ad4688b686631480-7">
                  7
                 </div>
                 <div class="crayon-num crayon-striped-num" data-line="crayon-59d380ad4688b686631480-8">
                  8
                 </div>
                 <div class="crayon-num" data-line="crayon-59d380ad4688b686631480-9">
                  9
                 </div>
                 <div class="crayon-num crayon-striped-num" data-line="crayon-59d380ad4688b686631480-10">
                  10
                 </div>
                 <div class="crayon-num" data-line="crayon-59d380ad4688b686631480-11">
                  11
                 </div>
                 <div class="crayon-num crayon-striped-num" data-line="crayon-59d380ad4688b686631480-12">
                  12
                 </div>
                 <div class="crayon-num" data-line="crayon-59d380ad4688b686631480-13">
                  13
                 </div>
                 <div class="crayon-num crayon-striped-num" data-line="crayon-59d380ad4688b686631480-14">
                  14
                 </div>
                 <div class="crayon-num" data-line="crayon-59d380ad4688b686631480-15">
                  15
                 </div>
                 <div class="crayon-num crayon-striped-num" data-line="crayon-59d380ad4688b686631480-16">
                  16
                 </div>
                 <div class="crayon-num" data-line="crayon-59d380ad4688b686631480-17">
                  17
                 </div>
                 <div class="crayon-num crayon-striped-num" data-line="crayon-59d380ad4688b686631480-18">
                  18
                 </div>
                 <div class="crayon-num" data-line="crayon-59d380ad4688b686631480-19">
                  19
                 </div>
                 <div class="crayon-num crayon-striped-num" data-line="crayon-59d380ad4688b686631480-20">
                  20
                 </div>
                 <div class="crayon-num" data-line="crayon-59d380ad4688b686631480-21">
                  21
                 </div>
                 <div class="crayon-num crayon-striped-num" data-line="crayon-59d380ad4688b686631480-22">
                  22
                 </div>
                 <div class="crayon-num" data-line="crayon-59d380ad4688b686631480-23">
                  23
                 </div>
                 <div class="crayon-num crayon-striped-num" data-line="crayon-59d380ad4688b686631480-24">
                  24
                 </div>
                 <div class="crayon-num" data-line="crayon-59d380ad4688b686631480-25">
                  25
                 </div>
                 <div class="crayon-num crayon-striped-num" data-line="crayon-59d380ad4688b686631480-26">
                  26
                 </div>
                 <div class="crayon-num" data-line="crayon-59d380ad4688b686631480-27">
                  27
                 </div>
                 <div class="crayon-num crayon-striped-num" data-line="crayon-59d380ad4688b686631480-28">
                  28
                 </div>
                 <div class="crayon-num" data-line="crayon-59d380ad4688b686631480-29">
                  29
                 </div>
                 <div class="crayon-num crayon-striped-num" data-line="crayon-59d380ad4688b686631480-30">
                  30
                 </div>
                 <div class="crayon-num" data-line="crayon-59d380ad4688b686631480-31">
                  31
                 </div>
                 <div class="crayon-num crayon-striped-num" data-line="crayon-59d380ad4688b686631480-32">
                  32
                 </div>
                 <div class="crayon-num" data-line="crayon-59d380ad4688b686631480-33">
                  33
                 </div>
                 <div class="crayon-num crayon-striped-num" data-line="crayon-59d380ad4688b686631480-34">
                  34
                 </div>
                 <div class="crayon-num" data-line="crayon-59d380ad4688b686631480-35">
                  35
                 </div>
                 <div class="crayon-num crayon-striped-num" data-line="crayon-59d380ad4688b686631480-36">
                  36
                 </div>
                 <div class="crayon-num" data-line="crayon-59d380ad4688b686631480-37">
                  37
                 </div>
                 <div class="crayon-num crayon-striped-num" data-line="crayon-59d380ad4688b686631480-38">
                  38
                 </div>
                 <div class="crayon-num" data-line="crayon-59d380ad4688b686631480-39">
                  39
                 </div>
                 <div class="crayon-num crayon-striped-num" data-line="crayon-59d380ad4688b686631480-40">
                  40
                 </div>
                 <div class="crayon-num" data-line="crayon-59d380ad4688b686631480-41">
                  41
                 </div>
                 <div class="crayon-num crayon-striped-num" data-line="crayon-59d380ad4688b686631480-42">
                  42
                 </div>
                 <div class="crayon-num" data-line="crayon-59d380ad4688b686631480-43">
                  43
                 </div>
                 <div class="crayon-num crayon-striped-num" data-line="crayon-59d380ad4688b686631480-44">
                  44
                 </div>
                </div> </td> 
               <td class="crayon-code">
                <div class="crayon-pre" style="font-size: 12px !important; line-height: 15px !important; -moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4;">
                 <div class="crayon-line" id="crayon-59d380ad4688b686631480-1">
                  <span class="crayon-r">create</span>
                  <span class="crayon-h"> </span>
                  <span class="crayon-r">table</span>
                  <span class="crayon-h"> </span>jsao_users
                  <span class="crayon-h"> </span>(
                 </div>
                 <div class="crayon-line crayon-striped-line" id="crayon-59d380ad4688b686631480-2">
                  <span class="crayon-h">&nbsp;&nbsp; </span>id
                  <span class="crayon-h"> </span>
                  <span class="crayon-r">number</span>
                  <span class="crayon-h"> </span>
                  <span class="crayon-r">not</span>
                  <span class="crayon-h"> </span>
                  <span class="crayon-r">null</span>,
                 </div>
                 <div class="crayon-line" id="crayon-59d380ad4688b686631480-3">
                  <span class="crayon-h">&nbsp;&nbsp; </span>email
                  <span class="crayon-h"> </span>
                  <span class="crayon-r">varchar2</span>(100
                  <span class="crayon-h"> </span>byte)
                  <span class="crayon-h"> </span>
                  <span class="crayon-r">not</span>
                  <span class="crayon-h"> </span>
                  <span class="crayon-r">null</span>,
                 </div>
                 <div class="crayon-line crayon-striped-line" id="crayon-59d380ad4688b686631480-4">
                  <span class="crayon-h">&nbsp;&nbsp; </span>
                  <span class="crayon-r">role</span>
                  <span class="crayon-h"> </span>
                  <span class="crayon-r">varchar2</span>(10
                  <span class="crayon-h"> </span>byte)
                  <span class="crayon-h"> </span>
                  <span class="crayon-r">not</span>
                  <span class="crayon-h"> </span>
                  <span class="crayon-r">null</span>,
                 </div>
                 <div class="crayon-line" id="crayon-59d380ad4688b686631480-5">
                  <span class="crayon-h">&nbsp;&nbsp; </span>
                  <span class="crayon-r">password</span>
                  <span class="crayon-h"> </span>
                  <span class="crayon-r">varchar2</span>(100
                  <span class="crayon-h"> </span>byte)
                  <span class="crayon-h"> </span>
                  <span class="crayon-r">not</span>
                  <span class="crayon-h"> </span>
                  <span class="crayon-r">null</span>,
                 </div>
                 <div class="crayon-line crayon-striped-line" id="crayon-59d380ad4688b686631480-6">
                  <span class="crayon-h">&nbsp;&nbsp; </span>
                  <span class="crayon-r">constraint</span>
                  <span class="crayon-h"> </span>jsao_users_pk
                  <span class="crayon-h"> </span>
                  <span class="crayon-r">primary</span>
                  <span class="crayon-h"> </span>
                  <span class="crayon-r">key</span>
                  <span class="crayon-h"> </span>(id),
                 </div>
                 <div class="crayon-line" id="crayon-59d380ad4688b686631480-7">
                  <span class="crayon-h">&nbsp;&nbsp; </span>
                  <span class="crayon-r">constraint</span>
                  <span class="crayon-h"> </span>jsao_users_chk1
                  <span class="crayon-h"> </span>
                  <span class="crayon-r">check</span>
                  <span class="crayon-h"> </span>(
                  <span class="crayon-r">role</span>
                  <span class="crayon-h"> </span>
                  <span class="crayon-r">in</span>
                  <span class="crayon-h"> </span>(
                  <span class="crayon-s">'BASE'</span>,
                  <span class="crayon-h"> </span>
                  <span class="crayon-s">'ADMIN'</span>)),
                 </div>
                 <div class="crayon-line crayon-striped-line" id="crayon-59d380ad4688b686631480-8">
                  <span class="crayon-h">&nbsp;&nbsp; </span>
                  <span class="crayon-r">constraint</span>
                  <span class="crayon-h"> </span>jsao_users_uk1
                  <span class="crayon-h"> </span>
                  <span class="crayon-r">unique</span>
                  <span class="crayon-h"> </span>(email)
                 </div>
                 <div class="crayon-line" id="crayon-59d380ad4688b686631480-9">
                  );
                 </div>
                 <div class="crayon-line crayon-striped-line" id="crayon-59d380ad4688b686631480-10">
                  &nbsp;
                 </div>
                 <div class="crayon-line" id="crayon-59d380ad4688b686631480-11">
                  <span class="crayon-r">create</span>
                  <span class="crayon-h"> </span>
                  <span class="crayon-r">sequence</span>
                  <span class="crayon-h"> </span>jsao_users_seq;
                 </div>
                 <div class="crayon-line crayon-striped-line" id="crayon-59d380ad4688b686631480-12">
                  &nbsp;
                 </div>
                 <div class="crayon-line" id="crayon-59d380ad4688b686631480-13">
                  <span class="crayon-r">create</span>
                  <span class="crayon-h"> </span>
                  <span class="crayon-r">or</span>
                  <span class="crayon-h"> </span>
                  <span class="crayon-r">replace</span>
                  <span class="crayon-h"> </span>
                  <span class="crayon-r">trigger</span>
                  <span class="crayon-h"> </span>bir_jsao_users_trg
                 </div>
                 <div class="crayon-line crayon-striped-line" id="crayon-59d380ad4688b686631480-14">
                  <span class="crayon-h">&nbsp;&nbsp; </span>
                  <span class="crayon-r">before</span>
                  <span class="crayon-h"> </span>
                  <span class="crayon-r">insert</span>
                  <span class="crayon-h"> </span>
                  <span class="crayon-r">on</span>
                  <span class="crayon-h"> </span>jsao_users
                 </div>
                 <div class="crayon-line" id="crayon-59d380ad4688b686631480-15">
                  <span class="crayon-h">&nbsp;&nbsp; </span>
                  <span class="crayon-r">for</span>
                  <span class="crayon-h"> </span>
                  <span class="crayon-r">each</span>
                  <span class="crayon-h"> </span>
                  <span class="crayon-r">row</span>
                 </div>
                 <div class="crayon-line crayon-striped-line" id="crayon-59d380ad4688b686631480-16">
                  <span class="crayon-r">begin</span>
                 </div>
                 <div class="crayon-line" id="crayon-59d380ad4688b686631480-17">
                  <span class="crayon-h">&nbsp;&nbsp; </span>
                  <span class="crayon-r">if</span>
                  <span class="crayon-h"> </span>:
                  <span class="crayon-r">new</span>.id
                  <span class="crayon-h"> </span>
                  <span class="crayon-r">is</span>
                  <span class="crayon-h"> </span>
                  <span class="crayon-r">null</span>
                 </div>
                 <div class="crayon-line crayon-striped-line" id="crayon-59d380ad4688b686631480-18">
                  <span class="crayon-h">&nbsp;&nbsp; </span>
                  <span class="crayon-r">then</span>
                 </div>
                 <div class="crayon-line" id="crayon-59d380ad4688b686631480-19">
                  <span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span>:
                  <span class="crayon-r">new</span>.id
                  <span class="crayon-h"> </span>:=
                  <span class="crayon-h"> </span>jsao_users_seq.nextval;
                 </div>
                 <div class="crayon-line crayon-striped-line" id="crayon-59d380ad4688b686631480-20">
                  <span class="crayon-h">&nbsp;&nbsp; </span>
                  <span class="crayon-r">end</span>
                  <span class="crayon-h"> </span>
                  <span class="crayon-r">if</span>;
                 </div>
                 <div class="crayon-line" id="crayon-59d380ad4688b686631480-21">
                  <span class="crayon-r">end</span>
                  <span class="crayon-h"> </span>bir_jsao_users_trg;
                 </div>
                 <div class="crayon-line crayon-striped-line" id="crayon-59d380ad4688b686631480-22">
                  /
                 </div>
                 <div class="crayon-line" id="crayon-59d380ad4688b686631480-23">
                  &nbsp;
                 </div>
                 <div class="crayon-line crayon-striped-line" id="crayon-59d380ad4688b686631480-24">
                  <span class="crayon-r">create</span>
                  <span class="crayon-h"> </span>
                  <span class="crayon-r">table</span>
                  <span class="crayon-h"> </span>jsao_public_things
                  <span class="crayon-h"> </span>(
                 </div>
                 <div class="crayon-line" id="crayon-59d380ad4688b686631480-25">
                  <span class="crayon-h">&nbsp;&nbsp; </span>column1
                  <span class="crayon-h"> </span>
                  <span class="crayon-r">varchar2</span>(200
                  <span class="crayon-h"> </span>byte)
                  <span class="crayon-h"> </span>
                  <span class="crayon-r">not</span>
                  <span class="crayon-h"> </span>
                  <span class="crayon-r">null</span>
                 </div>
                 <div class="crayon-line crayon-striped-line" id="crayon-59d380ad4688b686631480-26">
                  );
                 </div>
                 <div class="crayon-line" id="crayon-59d380ad4688b686631480-27">
                  &nbsp;
                 </div>
                 <div class="crayon-line crayon-striped-line" id="crayon-59d380ad4688b686631480-28">
                  <span class="crayon-r">insert</span>
                  <span class="crayon-h"> </span>
                  <span class="crayon-r">into</span>
                  <span class="crayon-h"> </span>jsao_public_things
                  <span class="crayon-h"> </span>(column1)
                  <span class="crayon-h"> </span>
                  <span class="crayon-r">values</span>
                  <span class="crayon-h"> </span>(
                  <span class="crayon-s">'Lorem ipsum dolor sit amet, consectetur adipiscing elit.'</span>);
                 </div>
                 <div class="crayon-line" id="crayon-59d380ad4688b686631480-29">
                  <span class="crayon-r">insert</span>
                  <span class="crayon-h"> </span>
                  <span class="crayon-r">into</span>
                  <span class="crayon-h"> </span>jsao_public_things
                  <span class="crayon-h"> </span>(column1)
                  <span class="crayon-h"> </span>
                  <span class="crayon-r">values</span>
                  <span class="crayon-h"> </span>(
                  <span class="crayon-s">'Morbi interdum, justo a commodo gravida, magna tortor scelerisque nisl, vitae iaculis odio nisi vel risus.'</span>);
                 </div>
                 <div class="crayon-line crayon-striped-line" id="crayon-59d380ad4688b686631480-30">
                  <span class="crayon-r">insert</span>
                  <span class="crayon-h"> </span>
                  <span class="crayon-r">into</span>
                  <span class="crayon-h"> </span>jsao_public_things
                  <span class="crayon-h"> </span>(column1)
                  <span class="crayon-h"> </span>
                  <span class="crayon-r">values</span>
                  <span class="crayon-h"> </span>(
                  <span class="crayon-s">'Fusce ac dui ullamcorper, dignissim purus sit amet, consequat dolor.'</span>);
                 </div>
                 <div class="crayon-line" id="crayon-59d380ad4688b686631480-31">
                  <span class="crayon-r">insert</span>
                  <span class="crayon-h"> </span>
                  <span class="crayon-r">into</span>
                  <span class="crayon-h"> </span>jsao_public_things
                  <span class="crayon-h"> </span>(column1)
                  <span class="crayon-h"> </span>
                  <span class="crayon-r">values</span>
                  <span class="crayon-h"> </span>(
                  <span class="crayon-s">'Vestibulum ante ipsum primis in faucibus orci luctus et ultrices posuere cubilia Curae; Mauris porttitor tincidunt magna nec pharetra. '</span>);
                 </div>
                 <div class="crayon-line crayon-striped-line" id="crayon-59d380ad4688b686631480-32">
                  <span class="crayon-r">insert</span>
                  <span class="crayon-h"> </span>
                  <span class="crayon-r">into</span>
                  <span class="crayon-h"> </span>jsao_public_things
                  <span class="crayon-h"> </span>(column1)
                  <span class="crayon-h"> </span>
                  <span class="crayon-r">values</span>
                  <span class="crayon-h"> </span>(
                  <span class="crayon-s">'Vestibulum mi purus, ornare ut sem sed, porttitor fermentum erat.'</span>);
                 </div>
                 <div class="crayon-line" id="crayon-59d380ad4688b686631480-33">
                  &nbsp;
                 </div>
                 <div class="crayon-line crayon-striped-line" id="crayon-59d380ad4688b686631480-34">
                  <span class="crayon-r">create</span>
                  <span class="crayon-h"> </span>
                  <span class="crayon-r">table</span>
                  <span class="crayon-h"> </span>jsao_protected_things(
                 </div>
                 <div class="crayon-line" id="crayon-59d380ad4688b686631480-35">
                  <span class="crayon-h">&nbsp;&nbsp; </span>column1
                  <span class="crayon-h"> </span>
                  <span class="crayon-r">varchar2</span>(200
                  <span class="crayon-h"> </span>byte)
                  <span class="crayon-h"> </span>
                  <span class="crayon-r">not</span>
                  <span class="crayon-h"> </span>
                  <span class="crayon-r">null</span>
                 </div>
                 <div class="crayon-line crayon-striped-line" id="crayon-59d380ad4688b686631480-36">
                  );
                 </div>
                 <div class="crayon-line" id="crayon-59d380ad4688b686631480-37">
                  &nbsp;
                 </div>
                 <div class="crayon-line crayon-striped-line" id="crayon-59d380ad4688b686631480-38">
                  <span class="crayon-r">insert</span>
                  <span class="crayon-h"> </span>
                  <span class="crayon-r">into</span>
                  <span class="crayon-h"> </span>jsao_protected_things
                  <span class="crayon-h"> </span>(column1)
                  <span class="crayon-h"> </span>
                  <span class="crayon-r">values</span>
                  <span class="crayon-h"> </span>(
                  <span class="crayon-s">'Bacon ipsum dolor amet shank sirloin capicola tenderloin pork chop salami.'</span>);
                 </div>
                 <div class="crayon-line" id="crayon-59d380ad4688b686631480-39">
                  <span class="crayon-r">insert</span>
                  <span class="crayon-h"> </span>
                  <span class="crayon-r">into</span>
                  <span class="crayon-h"> </span>jsao_protected_things
                  <span class="crayon-h"> </span>(column1)
                  <span class="crayon-h"> </span>
                  <span class="crayon-r">values</span>
                  <span class="crayon-h"> </span>(
                  <span class="crayon-s">'Pancetta frankfurter ham hock t-bone. '</span>);
                 </div>
                 <div class="crayon-line crayon-striped-line" id="crayon-59d380ad4688b686631480-40">
                  <span class="crayon-r">insert</span>
                  <span class="crayon-h"> </span>
                  <span class="crayon-r">into</span>
                  <span class="crayon-h"> </span>jsao_protected_things
                  <span class="crayon-h"> </span>(column1)
                  <span class="crayon-h"> </span>
                  <span class="crayon-r">values</span>
                  <span class="crayon-h"> </span>(
                  <span class="crayon-s">'Boudin drumstick tongue ground round pork jerky prosciutto pork belly brisket meatball ham, doner biltong sausage.'</span>);
                 </div>
                 <div class="crayon-line" id="crayon-59d380ad4688b686631480-41">
                  <span class="crayon-r">insert</span>
                  <span class="crayon-h"> </span>
                  <span class="crayon-r">into</span>
                  <span class="crayon-h"> </span>jsao_protected_things
                  <span class="crayon-h"> </span>(column1)
                  <span class="crayon-h"> </span>
                  <span class="crayon-r">values</span>
                  <span class="crayon-h"> </span>(
                  <span class="crayon-s">'Beef ribs jerky chicken t-bone, andouille rump spare ribs short loin shankle frankfurter sirloin ham hock ball tip pork loin turducken.'</span>);
                 </div>
                 <div class="crayon-line crayon-striped-line" id="crayon-59d380ad4688b686631480-42">
                  <span class="crayon-r">insert</span>
                  <span class="crayon-h"> </span>
                  <span class="crayon-r">into</span>
                  <span class="crayon-h"> </span>jsao_protected_things
                  <span class="crayon-h"> </span>(column1)
                  <span class="crayon-h"> </span>
                  <span class="crayon-r">values</span>
                  <span class="crayon-h"> </span>(
                  <span class="crayon-s">'Porchetta beef brisket, jowl flank leberkas capicola turducken ground round meatloaf hamburger strip steak venison. '</span>);
                 </div>
                 <div class="crayon-line" id="crayon-59d380ad4688b686631480-43">
                  &nbsp;
                 </div>
                 <div class="crayon-line crayon-striped-line" id="crayon-59d380ad4688b686631480-44">
                  <span class="crayon-r">commit</span>;
                 </div>
                </div></td> 
              </tr> 
             </tbody>
            </table> 
           </div> 
          </div> 
          <!-- [Format Time: 0.0116 seconds] --> 
          <p>The jsao_users table will contain our users and we’ll use the email and password fields for authentication (passwords will be stored hashed). The other tables, jsao_protected_things and jsao_public_things, will be used to demonstrate creating API routes that do and do not require authentication respectively. </p> 
          <h4>Starting the API</h4> 
          <p>Create a new directory named <span class="inline-code">auth-api</span> where you’re running Node.js. This will be the API’s top level directory. Then create the following <span class="inline-code">package.json</span> file within the <span class="inline-code">auth-api</span> directory.</p> 
          <!-- Crayon Syntax Highlighter v_2.7.2_beta --> 
          <div id="crayon-59d380ad468a3730358993" class="crayon-syntax crayon-theme-classic crayon-font-monaco crayon-os-pc print-yes notranslate" data-settings=" no-popup minimize scroll-mouseover" style=" margin-top: 12px; margin-bottom: 12px; font-size: 12px !important; line-height: 15px !important;"> 
           <div class="crayon-toolbar" data-settings=" show" style="font-size: 12px !important;height: 18px !important; line-height: 18px !important;">
            <span class="crayon-title">auth-api/package.json</span> 
            <div class="crayon-tools" style="font-size: 12px !important;height: 18px !important; line-height: 18px !important;">
             <div class="crayon-button crayon-copy-button" title="Copy">
              <div class="crayon-button-icon"></div>
             </div>
             <span class="crayon-language">JavaScript</span>
            </div>
           </div> 
           <div class="crayon-info" style="min-height: 16.8px !important; line-height: 16.8px !important;"></div> 
           <div class="crayon-plain-wrap">
            <textarea wrap="soft" class="crayon-plain print-no" data-settings="dblclick" readonly style="-moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4; font-size: 12px !important; line-height: 15px !important;">
{
  "name": "auth-api",
  "version": "1.0.0",
  "description": "A demonstration of authentication with Node.js, JWTs, and Oracle Database",
  "main": "server.js",
  "scripts": {
    "test": "echo \"Error: no test specified\" &amp;&amp; exit 1"
  },
  "author": "The Oracle Database Advocates Team",
  "license": "ISC",
  "dependencies": {
    "bcrypt": "^0.8.3",
    "body-parser": "^1.12.4",
    "express": "^4.12.4",
    "jsonwebtoken": "^5.0.1",
    "morgan": "^1.5.3"
  }
}</textarea>
           </div> 
           <div class="crayon-main" style=""> 
            <table class="crayon-table"> 
             <tbody>
              <tr class="crayon-row"> 
               <td class="crayon-nums " data-settings="show"> 
                <div class="crayon-nums-content" style="font-size: 12px !important; line-height: 15px !important;">
                 <div class="crayon-num" data-line="crayon-59d380ad468a3730358993-1">
                  1
                 </div>
                 <div class="crayon-num crayon-striped-num" data-line="crayon-59d380ad468a3730358993-2">
                  2
                 </div>
                 <div class="crayon-num" data-line="crayon-59d380ad468a3730358993-3">
                  3
                 </div>
                 <div class="crayon-num crayon-striped-num" data-line="crayon-59d380ad468a3730358993-4">
                  4
                 </div>
                 <div class="crayon-num" data-line="crayon-59d380ad468a3730358993-5">
                  5
                 </div>
                 <div class="crayon-num crayon-striped-num" data-line="crayon-59d380ad468a3730358993-6">
                  6
                 </div>
                 <div class="crayon-num" data-line="crayon-59d380ad468a3730358993-7">
                  7
                 </div>
                 <div class="crayon-num crayon-striped-num" data-line="crayon-59d380ad468a3730358993-8">
                  8
                 </div>
                 <div class="crayon-num" data-line="crayon-59d380ad468a3730358993-9">
                  9
                 </div>
                 <div class="crayon-num crayon-striped-num" data-line="crayon-59d380ad468a3730358993-10">
                  10
                 </div>
                 <div class="crayon-num" data-line="crayon-59d380ad468a3730358993-11">
                  11
                 </div>
                 <div class="crayon-num crayon-striped-num" data-line="crayon-59d380ad468a3730358993-12">
                  12
                 </div>
                 <div class="crayon-num" data-line="crayon-59d380ad468a3730358993-13">
                  13
                 </div>
                 <div class="crayon-num crayon-striped-num" data-line="crayon-59d380ad468a3730358993-14">
                  14
                 </div>
                 <div class="crayon-num" data-line="crayon-59d380ad468a3730358993-15">
                  15
                 </div>
                 <div class="crayon-num crayon-striped-num" data-line="crayon-59d380ad468a3730358993-16">
                  16
                 </div>
                 <div class="crayon-num" data-line="crayon-59d380ad468a3730358993-17">
                  17
                 </div>
                 <div class="crayon-num crayon-striped-num" data-line="crayon-59d380ad468a3730358993-18">
                  18
                 </div>
                </div> </td> 
               <td class="crayon-code">
                <div class="crayon-pre" style="font-size: 12px !important; line-height: 15px !important; -moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4;">
                 <div class="crayon-line" id="crayon-59d380ad468a3730358993-1">
                  <span class="crayon-sy">{</span>
                 </div>
                 <div class="crayon-line crayon-striped-line" id="crayon-59d380ad468a3730358993-2">
                  <span class="crayon-h">&nbsp;&nbsp;</span>
                  <span class="crayon-s">"name"</span>
                  <span class="crayon-o">:</span>
                  <span class="crayon-h"> </span>
                  <span class="crayon-s">"auth-api"</span>
                  <span class="crayon-sy">,</span>
                 </div>
                 <div class="crayon-line" id="crayon-59d380ad468a3730358993-3">
                  <span class="crayon-h">&nbsp;&nbsp;</span>
                  <span class="crayon-s">"version"</span>
                  <span class="crayon-o">:</span>
                  <span class="crayon-h"> </span>
                  <span class="crayon-s">"1.0.0"</span>
                  <span class="crayon-sy">,</span>
                 </div>
                 <div class="crayon-line crayon-striped-line" id="crayon-59d380ad468a3730358993-4">
                  <span class="crayon-h">&nbsp;&nbsp;</span>
                  <span class="crayon-s">"description"</span>
                  <span class="crayon-o">:</span>
                  <span class="crayon-h"> </span>
                  <span class="crayon-s">"A demonstration of authentication with Node.js, JWTs, and Oracle Database"</span>
                  <span class="crayon-sy">,</span>
                 </div>
                 <div class="crayon-line" id="crayon-59d380ad468a3730358993-5">
                  <span class="crayon-h">&nbsp;&nbsp;</span>
                  <span class="crayon-s">"main"</span>
                  <span class="crayon-o">:</span>
                  <span class="crayon-h"> </span>
                  <span class="crayon-s">"server.js"</span>
                  <span class="crayon-sy">,</span>
                 </div>
                 <div class="crayon-line crayon-striped-line" id="crayon-59d380ad468a3730358993-6">
                  <span class="crayon-h">&nbsp;&nbsp;</span>
                  <span class="crayon-s">"scripts"</span>
                  <span class="crayon-o">:</span>
                  <span class="crayon-h"> </span>
                  <span class="crayon-sy">{</span>
                 </div>
                 <div class="crayon-line" id="crayon-59d380ad468a3730358993-7">
                  <span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;</span>
                  <span class="crayon-s">"test"</span>
                  <span class="crayon-o">:</span>
                  <span class="crayon-h"> </span>
                  <span class="crayon-s">"echo \"Error: no test specified\" &amp;&amp; exit 1"</span>
                 </div>
                 <div class="crayon-line crayon-striped-line" id="crayon-59d380ad468a3730358993-8">
                  <span class="crayon-h">&nbsp;&nbsp;</span>
                  <span class="crayon-sy">}</span>
                  <span class="crayon-sy">,</span>
                 </div>
                 <div class="crayon-line" id="crayon-59d380ad468a3730358993-9">
                  <span class="crayon-h">&nbsp;&nbsp;</span>
                  <span class="crayon-s">"author"</span>
                  <span class="crayon-o">:</span>
                  <span class="crayon-h"> </span>
                  <span class="crayon-s">"The Oracle Database Advocates Team"</span>
                  <span class="crayon-sy">,</span>
                 </div>
                 <div class="crayon-line crayon-striped-line" id="crayon-59d380ad468a3730358993-10">
                  <span class="crayon-h">&nbsp;&nbsp;</span>
                  <span class="crayon-s">"license"</span>
                  <span class="crayon-o">:</span>
                  <span class="crayon-h"> </span>
                  <span class="crayon-s">"ISC"</span>
                  <span class="crayon-sy">,</span>
                 </div>
                 <div class="crayon-line" id="crayon-59d380ad468a3730358993-11">
                  <span class="crayon-h">&nbsp;&nbsp;</span>
                  <span class="crayon-s">"dependencies"</span>
                  <span class="crayon-o">:</span>
                  <span class="crayon-h"> </span>
                  <span class="crayon-sy">{</span>
                 </div>
                 <div class="crayon-line crayon-striped-line" id="crayon-59d380ad468a3730358993-12">
                  <span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;</span>
                  <span class="crayon-s">"bcrypt"</span>
                  <span class="crayon-o">:</span>
                  <span class="crayon-h"> </span>
                  <span class="crayon-s">"^0.8.3"</span>
                  <span class="crayon-sy">,</span>
                 </div>
                 <div class="crayon-line" id="crayon-59d380ad468a3730358993-13">
                  <span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;</span>
                  <span class="crayon-s">"body-parser"</span>
                  <span class="crayon-o">:</span>
                  <span class="crayon-h"> </span>
                  <span class="crayon-s">"^1.12.4"</span>
                  <span class="crayon-sy">,</span>
                 </div>
                 <div class="crayon-line crayon-striped-line" id="crayon-59d380ad468a3730358993-14">
                  <span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;</span>
                  <span class="crayon-s">"express"</span>
                  <span class="crayon-o">:</span>
                  <span class="crayon-h"> </span>
                  <span class="crayon-s">"^4.12.4"</span>
                  <span class="crayon-sy">,</span>
                 </div>
                 <div class="crayon-line" id="crayon-59d380ad468a3730358993-15">
                  <span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;</span>
                  <span class="crayon-s">"jsonwebtoken"</span>
                  <span class="crayon-o">:</span>
                  <span class="crayon-h"> </span>
                  <span class="crayon-s">"^5.0.1"</span>
                  <span class="crayon-sy">,</span>
                 </div>
                 <div class="crayon-line crayon-striped-line" id="crayon-59d380ad468a3730358993-16">
                  <span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;</span>
                  <span class="crayon-s">"morgan"</span>
                  <span class="crayon-o">:</span>
                  <span class="crayon-h"> </span>
                  <span class="crayon-s">"^1.5.3"</span>
                 </div>
                 <div class="crayon-line" id="crayon-59d380ad468a3730358993-17">
                  <span class="crayon-h">&nbsp;&nbsp;</span>
                  <span class="crayon-sy">}</span>
                 </div>
                 <div class="crayon-line crayon-striped-line" id="crayon-59d380ad468a3730358993-18">
                  <span class="crayon-sy">}</span>
                 </div>
                </div></td> 
              </tr> 
             </tbody>
            </table> 
           </div> 
          </div> 
          <!-- [Format Time: 0.0023 seconds] --> 
          <p>The <span class="inline-code">package.json</span> is used by NPM to keep track of the dependencies in this project, of which we have 5 (excluding oracledb which should be installed globally):</p> 
          <ol> 
           <li><strong>express</strong> is a popular webserver for Node.js.</li> 
           <li><strong>morgan</strong> is a logger for express.</li> 
           <li><strong>body-parser</strong> is an express module that handles parsing the body portion of incoming HTTP requests.</li> 
           <li><strong>bcrypt</strong> is a module used for encrypting and decrypting things in Node.js. If you’re running Node.js on Windows you may run into some compilation errors. If this happens have a look at <a href="http://stackoverflow.com/questions/14573488/error-compiling-bcrypt-node-js">this GitHub post</a>.</li> 
           <li><strong>jsonwebtoken</strong> is fairly standard module for working with JWTs in Node.js.</li> 
          </ol> 
          <p>Once you’ve created this file you can open the <span class="inline-code">auth-api</span> directory in a terminal window and run:</p>
          <!-- Crayon Syntax Highlighter v_2.7.2_beta --> 
          <div id="crayon-59d380ad468ac739184428" class="crayon-syntax crayon-theme-classic crayon-font-monaco crayon-os-pc print-yes notranslate" data-settings=" no-popup minimize scroll-mouseover" style=" margin-top: 12px; margin-bottom: 12px; font-size: 12px !important; line-height: 15px !important;"> 
           <div class="crayon-toolbar" data-settings=" show" style="font-size: 12px !important;height: 18px !important; line-height: 18px !important;">
            <span class="crayon-title"></span> 
            <div class="crayon-tools" style="font-size: 12px !important;height: 18px !important; line-height: 18px !important;">
             <div class="crayon-button crayon-copy-button" title="Copy">
              <div class="crayon-button-icon"></div>
             </div>
             <span class="crayon-language">Shell</span>
            </div>
           </div> 
           <div class="crayon-info" style="min-height: 16.8px !important; line-height: 16.8px !important;"></div> 
           <div class="crayon-plain-wrap">
            <textarea wrap="soft" class="crayon-plain print-no" data-settings="dblclick" readonly style="-moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4; font-size: 12px !important; line-height: 15px !important;">
npm install</textarea>
           </div> 
           <div class="crayon-main" style=""> 
            <table class="crayon-table"> 
             <tbody>
              <tr class="crayon-row"> 
               <td class="crayon-nums " data-settings="show"> 
                <div class="crayon-nums-content" style="font-size: 12px !important; line-height: 15px !important;">
                 <div class="crayon-num" data-line="crayon-59d380ad468ac739184428-1">
                  1
                 </div>
                </div> </td> 
               <td class="crayon-code">
                <div class="crayon-pre" style="font-size: 12px !important; line-height: 15px !important; -moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4;">
                 <div class="crayon-line" id="crayon-59d380ad468ac739184428-1">
                  <span class="crayon-e">npm </span>
                  <span class="crayon-v">install</span>
                 </div>
                </div></td> 
              </tr> 
             </tbody>
            </table> 
           </div> 
          </div> 
          <!-- [Format Time: 0.0005 seconds] --> 
          <p> This will instruct NPM to begin installing the dependancies, which it will place in a new directory named <span class="inline-code">node_modules</span>.</p> 
          <p>Next we’ll create the <span class="inline-code">server.js</span> file in the <span class="inline-code">auth-api</span> directory.</p> 
          <!-- Crayon Syntax Highlighter v_2.7.2_beta --> 
          <div id="crayon-59d380ad468b4219257694" class="crayon-syntax crayon-theme-classic crayon-font-monaco crayon-os-pc print-yes notranslate" data-settings=" no-popup minimize scroll-mouseover" style=" margin-top: 12px; margin-bottom: 12px; font-size: 12px !important; line-height: 15px !important;"> 
           <div class="crayon-toolbar" data-settings=" show" style="font-size: 12px !important;height: 18px !important; line-height: 18px !important;">
            <span class="crayon-title">auth-api/server.js</span> 
            <div class="crayon-tools" style="font-size: 12px !important;height: 18px !important; line-height: 18px !important;">
             <div class="crayon-button crayon-copy-button" title="Copy">
              <div class="crayon-button-icon"></div>
             </div>
             <span class="crayon-language">JavaScript</span>
            </div>
           </div> 
           <div class="crayon-info" style="min-height: 16.8px !important; line-height: 16.8px !important;"></div> 
           <div class="crayon-plain-wrap">
            <textarea wrap="soft" class="crayon-plain print-no" data-settings="dblclick" readonly style="-moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4; font-size: 12px !important; line-height: 15px !important;">
var express = require('express');
var morgan = require('morgan');
var bodyParser = require('body-parser');
var app;
var router;
var port = 3000;

app = express();

app.use(morgan('combined')); //logger
app.use(bodyParser.json());

router = express.Router();

router.get('/public_things', function(req, res) {
   res.json({"message": "Here are the public things..."});
});

app.use('/api', router);

app.listen(port, function() {
    console.log('Web server listening on localhost:' + port);
});</textarea>
           </div> 
           <div class="crayon-main" style=""> 
            <table class="crayon-table"> 
             <tbody>
              <tr class="crayon-row"> 
               <td class="crayon-nums " data-settings="show"> 
                <div class="crayon-nums-content" style="font-size: 12px !important; line-height: 15px !important;">
                 <div class="crayon-num" data-line="crayon-59d380ad468b4219257694-1">
                  1
                 </div>
                 <div class="crayon-num crayon-striped-num" data-line="crayon-59d380ad468b4219257694-2">
                  2
                 </div>
                 <div class="crayon-num" data-line="crayon-59d380ad468b4219257694-3">
                  3
                 </div>
                 <div class="crayon-num crayon-striped-num" data-line="crayon-59d380ad468b4219257694-4">
                  4
                 </div>
                 <div class="crayon-num" data-line="crayon-59d380ad468b4219257694-5">
                  5
                 </div>
                 <div class="crayon-num crayon-striped-num" data-line="crayon-59d380ad468b4219257694-6">
                  6
                 </div>
                 <div class="crayon-num" data-line="crayon-59d380ad468b4219257694-7">
                  7
                 </div>
                 <div class="crayon-num crayon-striped-num" data-line="crayon-59d380ad468b4219257694-8">
                  8
                 </div>
                 <div class="crayon-num" data-line="crayon-59d380ad468b4219257694-9">
                  9
                 </div>
                 <div class="crayon-num crayon-striped-num" data-line="crayon-59d380ad468b4219257694-10">
                  10
                 </div>
                 <div class="crayon-num" data-line="crayon-59d380ad468b4219257694-11">
                  11
                 </div>
                 <div class="crayon-num crayon-striped-num" data-line="crayon-59d380ad468b4219257694-12">
                  12
                 </div>
                 <div class="crayon-num" data-line="crayon-59d380ad468b4219257694-13">
                  13
                 </div>
                 <div class="crayon-num crayon-striped-num" data-line="crayon-59d380ad468b4219257694-14">
                  14
                 </div>
                 <div class="crayon-num" data-line="crayon-59d380ad468b4219257694-15">
                  15
                 </div>
                 <div class="crayon-num crayon-striped-num" data-line="crayon-59d380ad468b4219257694-16">
                  16
                 </div>
                 <div class="crayon-num" data-line="crayon-59d380ad468b4219257694-17">
                  17
                 </div>
                 <div class="crayon-num crayon-striped-num" data-line="crayon-59d380ad468b4219257694-18">
                  18
                 </div>
                 <div class="crayon-num" data-line="crayon-59d380ad468b4219257694-19">
                  19
                 </div>
                 <div class="crayon-num crayon-striped-num" data-line="crayon-59d380ad468b4219257694-20">
                  20
                 </div>
                 <div class="crayon-num" data-line="crayon-59d380ad468b4219257694-21">
                  21
                 </div>
                 <div class="crayon-num crayon-striped-num" data-line="crayon-59d380ad468b4219257694-22">
                  22
                 </div>
                 <div class="crayon-num" data-line="crayon-59d380ad468b4219257694-23">
                  23
                 </div>
                </div> </td> 
               <td class="crayon-code">
                <div class="crayon-pre" style="font-size: 12px !important; line-height: 15px !important; -moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4;">
                 <div class="crayon-line" id="crayon-59d380ad468b4219257694-1">
                  <span class="crayon-t">var</span>
                  <span class="crayon-h"> </span>
                  <span class="crayon-v">express</span>
                  <span class="crayon-h"> </span>
                  <span class="crayon-o">=</span>
                  <span class="crayon-h"> </span>
                  <span class="crayon-e">require</span>
                  <span class="crayon-sy">(</span>
                  <span class="crayon-s">'express'</span>
                  <span class="crayon-sy">)</span>
                  <span class="crayon-sy">;</span>
                 </div>
                 <div class="crayon-line crayon-striped-line" id="crayon-59d380ad468b4219257694-2">
                  <span class="crayon-t">var</span>
                  <span class="crayon-h"> </span>
                  <span class="crayon-v">morgan</span>
                  <span class="crayon-h"> </span>
                  <span class="crayon-o">=</span>
                  <span class="crayon-h"> </span>
                  <span class="crayon-e">require</span>
                  <span class="crayon-sy">(</span>
                  <span class="crayon-s">'morgan'</span>
                  <span class="crayon-sy">)</span>
                  <span class="crayon-sy">;</span>
                 </div>
                 <div class="crayon-line" id="crayon-59d380ad468b4219257694-3">
                  <span class="crayon-t">var</span>
                  <span class="crayon-h"> </span>
                  <span class="crayon-v">bodyParser</span>
                  <span class="crayon-h"> </span>
                  <span class="crayon-o">=</span>
                  <span class="crayon-h"> </span>
                  <span class="crayon-e">require</span>
                  <span class="crayon-sy">(</span>
                  <span class="crayon-s">'body-parser'</span>
                  <span class="crayon-sy">)</span>
                  <span class="crayon-sy">;</span>
                 </div>
                 <div class="crayon-line crayon-striped-line" id="crayon-59d380ad468b4219257694-4">
                  <span class="crayon-t">var</span>
                  <span class="crayon-h"> </span>
                  <span class="crayon-v">app</span>
                  <span class="crayon-sy">;</span>
                 </div>
                 <div class="crayon-line" id="crayon-59d380ad468b4219257694-5">
                  <span class="crayon-t">var</span>
                  <span class="crayon-h"> </span>
                  <span class="crayon-v">router</span>
                  <span class="crayon-sy">;</span>
                 </div>
                 <div class="crayon-line crayon-striped-line" id="crayon-59d380ad468b4219257694-6">
                  <span class="crayon-t">var</span>
                  <span class="crayon-h"> </span>
                  <span class="crayon-v">port</span>
                  <span class="crayon-h"> </span>
                  <span class="crayon-o">=</span>
                  <span class="crayon-h"> </span>
                  <span class="crayon-cn">3000</span>
                  <span class="crayon-sy">;</span>
                 </div>
                 <div class="crayon-line" id="crayon-59d380ad468b4219257694-7">
                  &nbsp;
                 </div>
                 <div class="crayon-line crayon-striped-line" id="crayon-59d380ad468b4219257694-8">
                  <span class="crayon-v">app</span>
                  <span class="crayon-h"> </span>
                  <span class="crayon-o">=</span>
                  <span class="crayon-h"> </span>
                  <span class="crayon-e">express</span>
                  <span class="crayon-sy">(</span>
                  <span class="crayon-sy">)</span>
                  <span class="crayon-sy">;</span>
                 </div>
                 <div class="crayon-line" id="crayon-59d380ad468b4219257694-9">
                  &nbsp;
                 </div>
                 <div class="crayon-line crayon-striped-line" id="crayon-59d380ad468b4219257694-10">
                  <span class="crayon-v">app</span>
                  <span class="crayon-sy">.</span>
                  <span class="crayon-st">use</span>
                  <span class="crayon-sy">(</span>
                  <span class="crayon-e">morgan</span>
                  <span class="crayon-sy">(</span>
                  <span class="crayon-s">'combined'</span>
                  <span class="crayon-sy">)</span>
                  <span class="crayon-sy">)</span>
                  <span class="crayon-sy">;</span>
                  <span class="crayon-h"> </span>
                  <span class="crayon-c">//logger</span>
                 </div>
                 <div class="crayon-line" id="crayon-59d380ad468b4219257694-11">
                  <span class="crayon-v">app</span>
                  <span class="crayon-sy">.</span>
                  <span class="crayon-st">use</span>
                  <span class="crayon-sy">(</span>
                  <span class="crayon-v">bodyParser</span>
                  <span class="crayon-sy">.</span>
                  <span class="crayon-e">json</span>
                  <span class="crayon-sy">(</span>
                  <span class="crayon-sy">)</span>
                  <span class="crayon-sy">)</span>
                  <span class="crayon-sy">;</span>
                 </div>
                 <div class="crayon-line crayon-striped-line" id="crayon-59d380ad468b4219257694-12">
                  &nbsp;
                 </div>
                 <div class="crayon-line" id="crayon-59d380ad468b4219257694-13">
                  <span class="crayon-v">router</span>
                  <span class="crayon-h"> </span>
                  <span class="crayon-o">=</span>
                  <span class="crayon-h"> </span>
                  <span class="crayon-v">express</span>
                  <span class="crayon-sy">.</span>
                  <span class="crayon-e">Router</span>
                  <span class="crayon-sy">(</span>
                  <span class="crayon-sy">)</span>
                  <span class="crayon-sy">;</span>
                 </div>
                 <div class="crayon-line crayon-striped-line" id="crayon-59d380ad468b4219257694-14">
                  &nbsp;
                 </div>
                 <div class="crayon-line" id="crayon-59d380ad468b4219257694-15">
                  <span class="crayon-v">router</span>
                  <span class="crayon-sy">.</span>
                  <span class="crayon-e">get</span>
                  <span class="crayon-sy">(</span>
                  <span class="crayon-s">'/public_things'</span>
                  <span class="crayon-sy">,</span>
                  <span class="crayon-h"> </span>
                  <span class="crayon-t">function</span>
                  <span class="crayon-sy">(</span>
                  <span class="crayon-v">req</span>
                  <span class="crayon-sy">,</span>
                  <span class="crayon-h"> </span>
                  <span class="crayon-v">res</span>
                  <span class="crayon-sy">)</span>
                  <span class="crayon-h"> </span>
                  <span class="crayon-sy">{</span>
                 </div>
                 <div class="crayon-line crayon-striped-line" id="crayon-59d380ad468b4219257694-16">
                  <span class="crayon-h">&nbsp;&nbsp; </span>
                  <span class="crayon-v">res</span>
                  <span class="crayon-sy">.</span>
                  <span class="crayon-e">json</span>
                  <span class="crayon-sy">(</span>
                  <span class="crayon-sy">{</span>
                  <span class="crayon-s">"message"</span>
                  <span class="crayon-o">:</span>
                  <span class="crayon-h"> </span>
                  <span class="crayon-s">"Here are the public things..."</span>
                  <span class="crayon-sy">}</span>
                  <span class="crayon-sy">)</span>
                  <span class="crayon-sy">;</span>
                 </div>
                 <div class="crayon-line" id="crayon-59d380ad468b4219257694-17">
                  <span class="crayon-sy">}</span>
                  <span class="crayon-sy">)</span>
                  <span class="crayon-sy">;</span>
                 </div>
                 <div class="crayon-line crayon-striped-line" id="crayon-59d380ad468b4219257694-18">
                  &nbsp;
                 </div>
                 <div class="crayon-line" id="crayon-59d380ad468b4219257694-19">
                  <span class="crayon-v">app</span>
                  <span class="crayon-sy">.</span>
                  <span class="crayon-st">use</span>
                  <span class="crayon-sy">(</span>
                  <span class="crayon-s">'/api'</span>
                  <span class="crayon-sy">,</span>
                  <span class="crayon-h"> </span>
                  <span class="crayon-v">router</span>
                  <span class="crayon-sy">)</span>
                  <span class="crayon-sy">;</span>
                 </div>
                 <div class="crayon-line crayon-striped-line" id="crayon-59d380ad468b4219257694-20">
                  &nbsp;
                 </div>
                 <div class="crayon-line" id="crayon-59d380ad468b4219257694-21">
                  <span class="crayon-v">app</span>
                  <span class="crayon-sy">.</span>
                  <span class="crayon-e">listen</span>
                  <span class="crayon-sy">(</span>
                  <span class="crayon-v">port</span>
                  <span class="crayon-sy">,</span>
                  <span class="crayon-h"> </span>
                  <span class="crayon-t">function</span>
                  <span class="crayon-sy">(</span>
                  <span class="crayon-sy">)</span>
                  <span class="crayon-h"> </span>
                  <span class="crayon-sy">{</span>
                 </div>
                 <div class="crayon-line crayon-striped-line" id="crayon-59d380ad468b4219257694-22">
                  <span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;</span>
                  <span class="crayon-v">console</span>
                  <span class="crayon-sy">.</span>
                  <span class="crayon-e">log</span>
                  <span class="crayon-sy">(</span>
                  <span class="crayon-s">'Web server listening on localhost:'</span>
                  <span class="crayon-h"> </span>
                  <span class="crayon-o">+</span>
                  <span class="crayon-h"> </span>
                  <span class="crayon-v">port</span>
                  <span class="crayon-sy">)</span>
                  <span class="crayon-sy">;</span>
                 </div>
                 <div class="crayon-line" id="crayon-59d380ad468b4219257694-23">
                  <span class="crayon-sy">}</span>
                  <span class="crayon-sy">)</span>
                  <span class="crayon-sy">;</span>
                 </div>
                </div></td> 
              </tr> 
             </tbody>
            </table> 
           </div> 
          </div> 
          <!-- [Format Time: 0.0041 seconds] --> 
          <p>The <span class="inline-code">server.js</span> file can be thought of as our “main” API file. This is the file we’ll actually be executing with Node.js. As you can see, it brings in a number of dependencies and then starts a web server that listens for requests on port 3000. A router is created and used to listen to GET requests on <span class="inline-code">/api/public_things</span>. The logic that handles the GET request on that route simply responds with a JSON message. Later, we’ll create logic that gets data from Oracle Database. But before we get to that, let’s test everything up to this point.</p> 
          <p>Open the <span class="inline-code">auth-api</span> directory in a terminal window and run:</p>
          <!-- Crayon Syntax Highlighter v_2.7.2_beta --> 
          <div id="crayon-59d380ad468bb860029077" class="crayon-syntax crayon-theme-classic crayon-font-monaco crayon-os-pc print-yes notranslate" data-settings=" no-popup minimize scroll-mouseover" style=" margin-top: 12px; margin-bottom: 12px; font-size: 12px !important; line-height: 15px !important;"> 
           <div class="crayon-toolbar" data-settings=" show" style="font-size: 12px !important;height: 18px !important; line-height: 18px !important;">
            <span class="crayon-title"></span> 
            <div class="crayon-tools" style="font-size: 12px !important;height: 18px !important; line-height: 18px !important;">
             <div class="crayon-button crayon-copy-button" title="Copy">
              <div class="crayon-button-icon"></div>
             </div>
             <span class="crayon-language">Shell</span>
            </div>
           </div> 
           <div class="crayon-info" style="min-height: 16.8px !important; line-height: 16.8px !important;"></div> 
           <div class="crayon-plain-wrap">
            <textarea wrap="soft" class="crayon-plain print-no" data-settings="dblclick" readonly style="-moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4; font-size: 12px !important; line-height: 15px !important;">
node server.js</textarea>
           </div> 
           <div class="crayon-main" style=""> 
            <table class="crayon-table"> 
             <tbody>
              <tr class="crayon-row"> 
               <td class="crayon-nums " data-settings="show"> 
                <div class="crayon-nums-content" style="font-size: 12px !important; line-height: 15px !important;">
                 <div class="crayon-num" data-line="crayon-59d380ad468bb860029077-1">
                  1
                 </div>
                </div> </td> 
               <td class="crayon-code">
                <div class="crayon-pre" style="font-size: 12px !important; line-height: 15px !important; -moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4;">
                 <div class="crayon-line" id="crayon-59d380ad468bb860029077-1">
                  <span class="crayon-e">node </span>
                  <span class="crayon-v">server</span>
                  <span class="crayon-e">.js</span>
                 </div>
                </div></td> 
              </tr> 
             </tbody>
            </table> 
           </div> 
          </div> 
          <!-- [Format Time: 0.0003 seconds] --> 
          <p> If you see the “Web server listening on localhost:3000” message then your web server should be running. Open your REST client and issue a GET request on http://localhost:3000/api/public_things. Here’s an example in Postman:</p> 
          <p><a href="https://jsao.io/wp-content/uploads/2015/06/auth-api-test-1.png" rel="prettyPhoto[gallery-WMde]"><img src="https://jsao.io/wp-content/uploads/2015/06/auth-api-test-1.png" alt="auth-api test 1" width="1706" height="584" class="alignnone size-full wp-image-431" srcset="https://jsao.io/wp-content/uploads/2015/06/auth-api-test-1.png 1706w, https://jsao.io/wp-content/uploads/2015/06/auth-api-test-1-300x103.png 300w, https://jsao.io/wp-content/uploads/2015/06/auth-api-test-1-1024x351.png 1024w" sizes="(max-width: 1706px) 100vw, 1706px"></a></p> 
          <p>If you see the JSON response with the message “Here are the public things…” then everything should be working.</p> 
          <h4>Creating a Public Route</h4> 
          <p>Time to bring in the database! Create the following <span class="inline-code">config.js</span> file in <span class="inline-code">auth-api</span>. Note that this tutorial will not be using a connection pool. If you plan on running a web server in production you should look into using a connection pool. Also, see my earlier post, <a href="https://jsao.io/2015/03/making-a-wrapper-module-for-the-node-js-driver-for-oracle-database/">Making a Wrapper Module for the Node.js Driver for Oracle Database</a>, for ways to make that easier.</p> 
          <!-- Crayon Syntax Highlighter v_2.7.2_beta --> 
          <div id="crayon-59d380ad468c1258962937" class="crayon-syntax crayon-theme-classic crayon-font-monaco crayon-os-pc print-yes notranslate" data-settings=" no-popup minimize scroll-mouseover" style=" margin-top: 12px; margin-bottom: 12px; font-size: 12px !important; line-height: 15px !important;"> 
           <div class="crayon-toolbar" data-settings=" show" style="font-size: 12px !important;height: 18px !important; line-height: 18px !important;">
            <span class="crayon-title">auth-api/config.js</span> 
            <div class="crayon-tools" style="font-size: 12px !important;height: 18px !important; line-height: 18px !important;">
             <div class="crayon-button crayon-copy-button" title="Copy">
              <div class="crayon-button-icon"></div>
             </div>
             <span class="crayon-language">JavaScript</span>
            </div>
           </div> 
           <div class="crayon-info" style="min-height: 16.8px !important; line-height: 16.8px !important;"></div> 
           <div class="crayon-plain-wrap">
            <textarea wrap="soft" class="crayon-plain print-no" data-settings="dblclick" readonly style="-moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4; font-size: 12px !important; line-height: 15px !important;">
module.exports = {
    database: {
        user: 'hr',
        password: 'oracle',
        connectString: 'localhost:1521/orcl'
    }
};</textarea>
           </div> 
           <div class="crayon-main" style=""> 
            <table class="crayon-table"> 
             <tbody>
              <tr class="crayon-row"> 
               <td class="crayon-nums " data-settings="show"> 
                <div class="crayon-nums-content" style="font-size: 12px !important; line-height: 15px !important;">
                 <div class="crayon-num" data-line="crayon-59d380ad468c1258962937-1">
                  1
                 </div>
                 <div class="crayon-num crayon-striped-num" data-line="crayon-59d380ad468c1258962937-2">
                  2
                 </div>
                 <div class="crayon-num" data-line="crayon-59d380ad468c1258962937-3">
                  3
                 </div>
                 <div class="crayon-num crayon-striped-num" data-line="crayon-59d380ad468c1258962937-4">
                  4
                 </div>
                 <div class="crayon-num" data-line="crayon-59d380ad468c1258962937-5">
                  5
                 </div>
                 <div class="crayon-num crayon-striped-num" data-line="crayon-59d380ad468c1258962937-6">
                  6
                 </div>
                 <div class="crayon-num" data-line="crayon-59d380ad468c1258962937-7">
                  7
                 </div>
                </div> </td> 
               <td class="crayon-code">
                <div class="crayon-pre" style="font-size: 12px !important; line-height: 15px !important; -moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4;">
                 <div class="crayon-line" id="crayon-59d380ad468c1258962937-1">
                  <span class="crayon-v">module</span>
                  <span class="crayon-sy">.</span>
                  <span class="crayon-v">exports</span>
                  <span class="crayon-h"> </span>
                  <span class="crayon-o">=</span>
                  <span class="crayon-h"> </span>
                  <span class="crayon-sy">{</span>
                 </div>
                 <div class="crayon-line crayon-striped-line" id="crayon-59d380ad468c1258962937-2">
                  <span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;</span>
                  <span class="crayon-v">database</span>
                  <span class="crayon-o">:</span>
                  <span class="crayon-h"> </span>
                  <span class="crayon-sy">{</span>
                 </div>
                 <div class="crayon-line" id="crayon-59d380ad468c1258962937-3">
                  <span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span>
                  <span class="crayon-v">user</span>
                  <span class="crayon-o">:</span>
                  <span class="crayon-h"> </span>
                  <span class="crayon-s">'hr'</span>
                  <span class="crayon-sy">,</span>
                 </div>
                 <div class="crayon-line crayon-striped-line" id="crayon-59d380ad468c1258962937-4">
                  <span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span>
                  <span class="crayon-v">password</span>
                  <span class="crayon-o">:</span>
                  <span class="crayon-h"> </span>
                  <span class="crayon-s">'oracle'</span>
                  <span class="crayon-sy">,</span>
                 </div>
                 <div class="crayon-line" id="crayon-59d380ad468c1258962937-5">
                  <span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span>
                  <span class="crayon-v">connectString</span>
                  <span class="crayon-o">:</span>
                  <span class="crayon-h"> </span>
                  <span class="crayon-s">'localhost:1521/orcl'</span>
                 </div>
                 <div class="crayon-line crayon-striped-line" id="crayon-59d380ad468c1258962937-6">
                  <span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;</span>
                  <span class="crayon-sy">}</span>
                 </div>
                 <div class="crayon-line" id="crayon-59d380ad468c1258962937-7">
                  <span class="crayon-sy">}</span>
                  <span class="crayon-sy">;</span>
                 </div>
                </div></td> 
              </tr> 
             </tbody>
            </table> 
           </div> 
          </div> 
          <!-- [Format Time: 0.0007 seconds] --> 
          <p>The <span class="inline-code">config.js</span> is used to hold our API’s configuration data. You will likely need to update the connection information to work with your database instance. </p> 
          <p>Create a subdirectory in <span class="inline-code">auth-api</span> named <span class="inline-code">routes</span>, then add the following <span class="inline-code">publicThings.js</span> file.</p>
          <!-- Crayon Syntax Highlighter v_2.7.2_beta --> 
          <div id="crayon-59d380ad468c8745236737" class="crayon-syntax crayon-theme-classic crayon-font-monaco crayon-os-pc print-yes notranslate" data-settings=" no-popup minimize scroll-mouseover" style=" margin-top: 12px; margin-bottom: 12px; font-size: 12px !important; line-height: 15px !important;"> 
           <div class="crayon-toolbar" data-settings=" show" style="font-size: 12px !important;height: 18px !important; line-height: 18px !important;">
            <span class="crayon-title">auth-api/routes/publicThings.js</span> 
            <div class="crayon-tools" style="font-size: 12px !important;height: 18px !important; line-height: 18px !important;">
             <div class="crayon-button crayon-copy-button" title="Copy">
              <div class="crayon-button-icon"></div>
             </div>
             <span class="crayon-language">JavaScript</span>
            </div>
           </div> 
           <div class="crayon-info" style="min-height: 16.8px !important; line-height: 16.8px !important;"></div> 
           <div class="crayon-plain-wrap">
            <textarea wrap="soft" class="crayon-plain print-no" data-settings="dblclick" readonly style="-moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4; font-size: 12px !important; line-height: 15px !important;">
var oracledb = require('oracledb');
var config = require(__dirname + '../../config.js');

function get(req, res, next) {
    oracledb.getConnection(
        config.database,
        function(err, connection){
            if (err) {
                return next(err);
            }

            connection.execute(
                'select column1 as "column1" ' +
                'from jsao_public_things ',
                {},//no binds
                {
                    outFormat: oracledb.OBJECT
                },
                function(err, results){
                    if (err) {
                        connection.release(function(err) {
                            if (err) {
                                console.error(err.message);
                            }
                        });

                        return next(err);
                    }

                    res.status(200).json(results.rows);

                    connection.release(function(err) {
                        if (err) {
                            console.error(err.message);
                        }
                    });
                });
        }
    );
}

module.exports.get = get;</textarea>
           </div> 
           <div class="crayon-main" style=""> 
            <table class="crayon-table"> 
             <tbody>
              <tr class="crayon-row"> 
               <td class="crayon-nums " data-settings="show"> 
                <div class="crayon-nums-content" style="font-size: 12px !important; line-height: 15px !important;">
                 <div class="crayon-num" data-line="crayon-59d380ad468c8745236737-1">
                  1
                 </div>
                 <div class="crayon-num crayon-striped-num" data-line="crayon-59d380ad468c8745236737-2">
                  2
                 </div>
                 <div class="crayon-num" data-line="crayon-59d380ad468c8745236737-3">
                  3
                 </div>
                 <div class="crayon-num crayon-striped-num" data-line="crayon-59d380ad468c8745236737-4">
                  4
                 </div>
                 <div class="crayon-num" data-line="crayon-59d380ad468c8745236737-5">
                  5
                 </div>
                 <div class="crayon-num crayon-striped-num" data-line="crayon-59d380ad468c8745236737-6">
                  6
                 </div>
                 <div class="crayon-num" data-line="crayon-59d380ad468c8745236737-7">
                  7
                 </div>
                 <div class="crayon-num crayon-striped-num" data-line="crayon-59d380ad468c8745236737-8">
                  8
                 </div>
                 <div class="crayon-num" data-line="crayon-59d380ad468c8745236737-9">
                  9
                 </div>
                 <div class="crayon-num crayon-striped-num" data-line="crayon-59d380ad468c8745236737-10">
                  10
                 </div>
                 <div class="crayon-num" data-line="crayon-59d380ad468c8745236737-11">
                  11
                 </div>
                 <div class="crayon-num crayon-striped-num" data-line="crayon-59d380ad468c8745236737-12">
                  12
                 </div>
                 <div class="crayon-num" data-line="crayon-59d380ad468c8745236737-13">
                  13
                 </div>
                 <div class="crayon-num crayon-striped-num" data-line="crayon-59d380ad468c8745236737-14">
                  14
                 </div>
                 <div class="crayon-num" data-line="crayon-59d380ad468c8745236737-15">
                  15
                 </div>
                 <div class="crayon-num crayon-striped-num" data-line="crayon-59d380ad468c8745236737-16">
                  16
                 </div>
                 <div class="crayon-num" data-line="crayon-59d380ad468c8745236737-17">
                  17
                 </div>
                 <div class="crayon-num crayon-striped-num" data-line="crayon-59d380ad468c8745236737-18">
                  18
                 </div>
                 <div class="crayon-num" data-line="crayon-59d380ad468c8745236737-19">
                  19
                 </div>
                 <div class="crayon-num crayon-striped-num" data-line="crayon-59d380ad468c8745236737-20">
                  20
                 </div>
                 <div class="crayon-num" data-line="crayon-59d380ad468c8745236737-21">
                  21
                 </div>
                 <div class="crayon-num crayon-striped-num" data-line="crayon-59d380ad468c8745236737-22">
                  22
                 </div>
                 <div class="crayon-num" data-line="crayon-59d380ad468c8745236737-23">
                  23
                 </div>
                 <div class="crayon-num crayon-striped-num" data-line="crayon-59d380ad468c8745236737-24">
                  24
                 </div>
                 <div class="crayon-num" data-line="crayon-59d380ad468c8745236737-25">
                  25
                 </div>
                 <div class="crayon-num crayon-striped-num" data-line="crayon-59d380ad468c8745236737-26">
                  26
                 </div>
                 <div class="crayon-num" data-line="crayon-59d380ad468c8745236737-27">
                  27
                 </div>
                 <div class="crayon-num crayon-striped-num" data-line="crayon-59d380ad468c8745236737-28">
                  28
                 </div>
                 <div class="crayon-num" data-line="crayon-59d380ad468c8745236737-29">
                  29
                 </div>
                 <div class="crayon-num crayon-striped-num" data-line="crayon-59d380ad468c8745236737-30">
                  30
                 </div>
                 <div class="crayon-num" data-line="crayon-59d380ad468c8745236737-31">
                  31
                 </div>
                 <div class="crayon-num crayon-striped-num" data-line="crayon-59d380ad468c8745236737-32">
                  32
                 </div>
                 <div class="crayon-num" data-line="crayon-59d380ad468c8745236737-33">
                  33
                 </div>
                 <div class="crayon-num crayon-striped-num" data-line="crayon-59d380ad468c8745236737-34">
                  34
                 </div>
                 <div class="crayon-num" data-line="crayon-59d380ad468c8745236737-35">
                  35
                 </div>
                 <div class="crayon-num crayon-striped-num" data-line="crayon-59d380ad468c8745236737-36">
                  36
                 </div>
                 <div class="crayon-num" data-line="crayon-59d380ad468c8745236737-37">
                  37
                 </div>
                 <div class="crayon-num crayon-striped-num" data-line="crayon-59d380ad468c8745236737-38">
                  38
                 </div>
                 <div class="crayon-num" data-line="crayon-59d380ad468c8745236737-39">
                  39
                 </div>
                 <div class="crayon-num crayon-striped-num" data-line="crayon-59d380ad468c8745236737-40">
                  40
                 </div>
                 <div class="crayon-num" data-line="crayon-59d380ad468c8745236737-41">
                  41
                 </div>
                 <div class="crayon-num crayon-striped-num" data-line="crayon-59d380ad468c8745236737-42">
                  42
                 </div>
                </div> </td> 
               <td class="crayon-code">
                <div class="crayon-pre" style="font-size: 12px !important; line-height: 15px !important; -moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4;">
                 <div class="crayon-line" id="crayon-59d380ad468c8745236737-1">
                  <span class="crayon-t">var</span>
                  <span class="crayon-h"> </span>
                  <span class="crayon-v">oracledb</span>
                  <span class="crayon-h"> </span>
                  <span class="crayon-o">=</span>
                  <span class="crayon-h"> </span>
                  <span class="crayon-e">require</span>
                  <span class="crayon-sy">(</span>
                  <span class="crayon-s">'oracledb'</span>
                  <span class="crayon-sy">)</span>
                  <span class="crayon-sy">;</span>
                 </div>
                 <div class="crayon-line crayon-striped-line" id="crayon-59d380ad468c8745236737-2">
                  <span class="crayon-t">var</span>
                  <span class="crayon-h"> </span>
                  <span class="crayon-v">config</span>
                  <span class="crayon-h"> </span>
                  <span class="crayon-o">=</span>
                  <span class="crayon-h"> </span>
                  <span class="crayon-e">require</span>
                  <span class="crayon-sy">(</span>
                  <span class="crayon-v">__dirname</span>
                  <span class="crayon-h"> </span>
                  <span class="crayon-o">+</span>
                  <span class="crayon-h"> </span>
                  <span class="crayon-s">'../../config.js'</span>
                  <span class="crayon-sy">)</span>
                  <span class="crayon-sy">;</span>
                 </div>
                 <div class="crayon-line" id="crayon-59d380ad468c8745236737-3">
                  &nbsp;
                 </div>
                 <div class="crayon-line crayon-striped-line" id="crayon-59d380ad468c8745236737-4">
                  <span class="crayon-t">function</span>
                  <span class="crayon-h"> </span>
                  <span class="crayon-e">get</span>
                  <span class="crayon-sy">(</span>
                  <span class="crayon-v">req</span>
                  <span class="crayon-sy">,</span>
                  <span class="crayon-h"> </span>
                  <span class="crayon-v">res</span>
                  <span class="crayon-sy">,</span>
                  <span class="crayon-h"> </span>
                  <span class="crayon-v">next</span>
                  <span class="crayon-sy">)</span>
                  <span class="crayon-h"> </span>
                  <span class="crayon-sy">{</span>
                 </div>
                 <div class="crayon-line" id="crayon-59d380ad468c8745236737-5">
                  <span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;</span>
                  <span class="crayon-v">oracledb</span>
                  <span class="crayon-sy">.</span>
                  <span class="crayon-e">getConnection</span>
                  <span class="crayon-sy">(</span>
                 </div>
                 <div class="crayon-line crayon-striped-line" id="crayon-59d380ad468c8745236737-6">
                  <span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span>
                  <span class="crayon-v">config</span>
                  <span class="crayon-sy">.</span>
                  <span class="crayon-v">database</span>
                  <span class="crayon-sy">,</span>
                 </div>
                 <div class="crayon-line" id="crayon-59d380ad468c8745236737-7">
                  <span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span>
                  <span class="crayon-t">function</span>
                  <span class="crayon-sy">(</span>
                  <span class="crayon-v">err</span>
                  <span class="crayon-sy">,</span>
                  <span class="crayon-h"> </span>
                  <span class="crayon-v">connection</span>
                  <span class="crayon-sy">)</span>
                  <span class="crayon-sy">{</span>
                 </div>
                 <div class="crayon-line crayon-striped-line" id="crayon-59d380ad468c8745236737-8">
                  <span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span>
                  <span class="crayon-st">if</span>
                  <span class="crayon-h"> </span>
                  <span class="crayon-sy">(</span>
                  <span class="crayon-v">err</span>
                  <span class="crayon-sy">)</span>
                  <span class="crayon-h"> </span>
                  <span class="crayon-sy">{</span>
                 </div>
                 <div class="crayon-line" id="crayon-59d380ad468c8745236737-9">
                  <span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span>
                  <span class="crayon-st">return</span>
                  <span class="crayon-h"> </span>
                  <span class="crayon-e">next</span>
                  <span class="crayon-sy">(</span>
                  <span class="crayon-v">err</span>
                  <span class="crayon-sy">)</span>
                  <span class="crayon-sy">;</span>
                 </div>
                 <div class="crayon-line crayon-striped-line" id="crayon-59d380ad468c8745236737-10">
                  <span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span>
                  <span class="crayon-sy">}</span>
                 </div>
                 <div class="crayon-line" id="crayon-59d380ad468c8745236737-11">
                  &nbsp;
                 </div>
                 <div class="crayon-line crayon-striped-line" id="crayon-59d380ad468c8745236737-12">
                  <span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span>
                  <span class="crayon-v">connection</span>
                  <span class="crayon-sy">.</span>
                  <span class="crayon-e">execute</span>
                  <span class="crayon-sy">(</span>
                 </div>
                 <div class="crayon-line" id="crayon-59d380ad468c8745236737-13">
                  <span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span>
                  <span class="crayon-s">'select column1 as "column1" '</span>
                  <span class="crayon-h"> </span>
                  <span class="crayon-o">+</span>
                 </div>
                 <div class="crayon-line crayon-striped-line" id="crayon-59d380ad468c8745236737-14">
                  <span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span>
                  <span class="crayon-s">'from jsao_public_things '</span>
                  <span class="crayon-sy">,</span>
                 </div>
                 <div class="crayon-line" id="crayon-59d380ad468c8745236737-15">
                  <span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span>
                  <span class="crayon-sy">{</span>
                  <span class="crayon-sy">}</span>
                  <span class="crayon-sy">,</span>
                  <span class="crayon-c">//no binds</span>
                 </div>
                 <div class="crayon-line crayon-striped-line" id="crayon-59d380ad468c8745236737-16">
                  <span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span>
                  <span class="crayon-sy">{</span>
                 </div>
                 <div class="crayon-line" id="crayon-59d380ad468c8745236737-17">
                  <span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span>
                  <span class="crayon-v">outFormat</span>
                  <span class="crayon-o">:</span>
                  <span class="crayon-h"> </span>
                  <span class="crayon-v">oracledb</span>
                  <span class="crayon-sy">.</span>
                  <span class="crayon-t">OBJECT</span>
                 </div>
                 <div class="crayon-line crayon-striped-line" id="crayon-59d380ad468c8745236737-18">
                  <span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span>
                  <span class="crayon-sy">}</span>
                  <span class="crayon-sy">,</span>
                 </div>
                 <div class="crayon-line" id="crayon-59d380ad468c8745236737-19">
                  <span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span>
                  <span class="crayon-t">function</span>
                  <span class="crayon-sy">(</span>
                  <span class="crayon-v">err</span>
                  <span class="crayon-sy">,</span>
                  <span class="crayon-h"> </span>
                  <span class="crayon-v">results</span>
                  <span class="crayon-sy">)</span>
                  <span class="crayon-sy">{</span>
                 </div>
                 <div class="crayon-line crayon-striped-line" id="crayon-59d380ad468c8745236737-20">
                  <span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span>
                  <span class="crayon-st">if</span>
                  <span class="crayon-h"> </span>
                  <span class="crayon-sy">(</span>
                  <span class="crayon-v">err</span>
                  <span class="crayon-sy">)</span>
                  <span class="crayon-h"> </span>
                  <span class="crayon-sy">{</span>
                 </div>
                 <div class="crayon-line" id="crayon-59d380ad468c8745236737-21">
                  <span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span>
                  <span class="crayon-v">connection</span>
                  <span class="crayon-sy">.</span>
                  <span class="crayon-e">release</span>
                  <span class="crayon-sy">(</span>
                  <span class="crayon-t">function</span>
                  <span class="crayon-sy">(</span>
                  <span class="crayon-v">err</span>
                  <span class="crayon-sy">)</span>
                  <span class="crayon-h"> </span>
                  <span class="crayon-sy">{</span>
                 </div>
                 <div class="crayon-line crayon-striped-line" id="crayon-59d380ad468c8745236737-22">
                  <span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span>
                  <span class="crayon-st">if</span>
                  <span class="crayon-h"> </span>
                  <span class="crayon-sy">(</span>
                  <span class="crayon-v">err</span>
                  <span class="crayon-sy">)</span>
                  <span class="crayon-h"> </span>
                  <span class="crayon-sy">{</span>
                 </div>
                 <div class="crayon-line" id="crayon-59d380ad468c8745236737-23">
                  <span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span>
                  <span class="crayon-v">console</span>
                  <span class="crayon-sy">.</span>
                  <span class="crayon-e">error</span>
                  <span class="crayon-sy">(</span>
                  <span class="crayon-v">err</span>
                  <span class="crayon-sy">.</span>
                  <span class="crayon-v">message</span>
                  <span class="crayon-sy">)</span>
                  <span class="crayon-sy">;</span>
                 </div>
                 <div class="crayon-line crayon-striped-line" id="crayon-59d380ad468c8745236737-24">
                  <span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span>
                  <span class="crayon-sy">}</span>
                 </div>
                 <div class="crayon-line" id="crayon-59d380ad468c8745236737-25">
                  <span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span>
                  <span class="crayon-sy">}</span>
                  <span class="crayon-sy">)</span>
                  <span class="crayon-sy">;</span>
                 </div>
                 <div class="crayon-line crayon-striped-line" id="crayon-59d380ad468c8745236737-26">
                  &nbsp;
                 </div>
                 <div class="crayon-line" id="crayon-59d380ad468c8745236737-27">
                  <span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span>
                  <span class="crayon-st">return</span>
                  <span class="crayon-h"> </span>
                  <span class="crayon-e">next</span>
                  <span class="crayon-sy">(</span>
                  <span class="crayon-v">err</span>
                  <span class="crayon-sy">)</span>
                  <span class="crayon-sy">;</span>
                 </div>
                 <div class="crayon-line crayon-striped-line" id="crayon-59d380ad468c8745236737-28">
                  <span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span>
                  <span class="crayon-sy">}</span>
                 </div>
                 <div class="crayon-line" id="crayon-59d380ad468c8745236737-29">
                  &nbsp;
                 </div>
                 <div class="crayon-line crayon-striped-line" id="crayon-59d380ad468c8745236737-30">
                  <span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span>
                  <span class="crayon-v">res</span>
                  <span class="crayon-sy">.</span>
                  <span class="crayon-e">status</span>
                  <span class="crayon-sy">(</span>
                  <span class="crayon-cn">200</span>
                  <span class="crayon-sy">)</span>
                  <span class="crayon-sy">.</span>
                  <span class="crayon-e">json</span>
                  <span class="crayon-sy">(</span>
                  <span class="crayon-v">results</span>
                  <span class="crayon-sy">.</span>
                  <span class="crayon-v">rows</span>
                  <span class="crayon-sy">)</span>
                  <span class="crayon-sy">;</span>
                 </div>
                 <div class="crayon-line" id="crayon-59d380ad468c8745236737-31">
                  &nbsp;
                 </div>
                 <div class="crayon-line crayon-striped-line" id="crayon-59d380ad468c8745236737-32">
                  <span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span>
                  <span class="crayon-v">connection</span>
                  <span class="crayon-sy">.</span>
                  <span class="crayon-e">release</span>
                  <span class="crayon-sy">(</span>
                  <span class="crayon-t">function</span>
                  <span class="crayon-sy">(</span>
                  <span class="crayon-v">err</span>
                  <span class="crayon-sy">)</span>
                  <span class="crayon-h"> </span>
                  <span class="crayon-sy">{</span>
                 </div>
                 <div class="crayon-line" id="crayon-59d380ad468c8745236737-33">
                  <span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span>
                  <span class="crayon-st">if</span>
                  <span class="crayon-h"> </span>
                  <span class="crayon-sy">(</span>
                  <span class="crayon-v">err</span>
                  <span class="crayon-sy">)</span>
                  <span class="crayon-h"> </span>
                  <span class="crayon-sy">{</span>
                 </div>
                 <div class="crayon-line crayon-striped-line" id="crayon-59d380ad468c8745236737-34">
                  <span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span>
                  <span class="crayon-v">console</span>
                  <span class="crayon-sy">.</span>
                  <span class="crayon-e">error</span>
                  <span class="crayon-sy">(</span>
                  <span class="crayon-v">err</span>
                  <span class="crayon-sy">.</span>
                  <span class="crayon-v">message</span>
                  <span class="crayon-sy">)</span>
                  <span class="crayon-sy">;</span>
                 </div>
                 <div class="crayon-line" id="crayon-59d380ad468c8745236737-35">
                  <span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span>
                  <span class="crayon-sy">}</span>
                 </div>
                 <div class="crayon-line crayon-striped-line" id="crayon-59d380ad468c8745236737-36">
                  <span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span>
                  <span class="crayon-sy">}</span>
                  <span class="crayon-sy">)</span>
                  <span class="crayon-sy">;</span>
                 </div>
                 <div class="crayon-line" id="crayon-59d380ad468c8745236737-37">
                  <span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span>
                  <span class="crayon-sy">}</span>
                  <span class="crayon-sy">)</span>
                  <span class="crayon-sy">;</span>
                 </div>
                 <div class="crayon-line crayon-striped-line" id="crayon-59d380ad468c8745236737-38">
                  <span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span>
                  <span class="crayon-sy">}</span>
                 </div>
                 <div class="crayon-line" id="crayon-59d380ad468c8745236737-39">
                  <span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;</span>
                  <span class="crayon-sy">)</span>
                  <span class="crayon-sy">;</span>
                 </div>
                 <div class="crayon-line crayon-striped-line" id="crayon-59d380ad468c8745236737-40">
                  <span class="crayon-sy">}</span>
                 </div>
                 <div class="crayon-line" id="crayon-59d380ad468c8745236737-41">
                  &nbsp;
                 </div>
                 <div class="crayon-line crayon-striped-line" id="crayon-59d380ad468c8745236737-42">
                  <span class="crayon-v">module</span>
                  <span class="crayon-sy">.</span>
                  <span class="crayon-v">exports</span>
                  <span class="crayon-sy">.</span>
                  <span class="crayon-v">get</span>
                  <span class="crayon-h"> </span>
                  <span class="crayon-o">=</span>
                  <span class="crayon-h"> </span>
                  <span class="crayon-v">get</span>
                  <span class="crayon-sy">;</span>
                 </div>
                </div></td> 
              </tr> 
             </tbody>
            </table> 
           </div> 
          </div> 
          <!-- [Format Time: 0.0053 seconds] --> 
          <p> </p>
          <p><span class="inline-code">publicThings.js</span> requires in the Oracle Database driver and uses it to execute a query and send the results out through the response. The <span class="inline-code">get</span> function is exported from the module which allows us to use it in <span class="inline-code">server.js</span>.</p> 
          <!-- Crayon Syntax Highlighter v_2.7.2_beta --> 
          <div id="crayon-59d380ad468d0627083613" class="crayon-syntax crayon-theme-classic crayon-font-monaco crayon-os-pc print-yes notranslate" data-settings=" no-popup minimize scroll-mouseover" style=" margin-top: 12px; margin-bottom: 12px; font-size: 12px !important; line-height: 15px !important;"> 
           <div class="crayon-toolbar" data-settings=" show" style="font-size: 12px !important;height: 18px !important; line-height: 18px !important;">
            <span class="crayon-title">auth-api/server.js</span> 
            <div class="crayon-tools" style="font-size: 12px !important;height: 18px !important; line-height: 18px !important;">
             <div class="crayon-button crayon-copy-button" title="Copy">
              <div class="crayon-button-icon"></div>
             </div>
             <span class="crayon-language">JavaScript</span>
            </div>
           </div> 
           <div class="crayon-info" style="min-height: 16.8px !important; line-height: 16.8px !important;"></div> 
           <div class="crayon-plain-wrap">
            <textarea wrap="soft" class="crayon-plain print-no" data-settings="dblclick" readonly style="-moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4; font-size: 12px !important; line-height: 15px !important;">
var express = require('express');
var morgan = require('morgan');
var bodyParser = require('body-parser');
var publicThings = require(__dirname + '/routes/publicThings.js');
var app;
var router;
var port = 3000;

app = express();

app.use(morgan('combined')); //logger
app.use(bodyParser.json());

router = express.Router();

router.get('/public_things', publicThings.get);

app.use('/api', router);

app.listen(port, function() {
    console.log('Web server listening on localhost:' + port);
});</textarea>
           </div> 
           <div class="crayon-main" style=""> 
            <table class="crayon-table"> 
             <tbody>
              <tr class="crayon-row"> 
               <td class="crayon-nums " data-settings="show"> 
                <div class="crayon-nums-content" style="font-size: 12px !important; line-height: 15px !important;">
                 <div class="crayon-num" data-line="crayon-59d380ad468d0627083613-1">
                  1
                 </div>
                 <div class="crayon-num crayon-striped-num" data-line="crayon-59d380ad468d0627083613-2">
                  2
                 </div>
                 <div class="crayon-num" data-line="crayon-59d380ad468d0627083613-3">
                  3
                 </div>
                 <div class="crayon-num crayon-marked-num crayon-top crayon-bottom crayon-striped-num" data-line="crayon-59d380ad468d0627083613-4">
                  4
                 </div>
                 <div class="crayon-num" data-line="crayon-59d380ad468d0627083613-5">
                  5
                 </div>
                 <div class="crayon-num crayon-striped-num" data-line="crayon-59d380ad468d0627083613-6">
                  6
                 </div>
                 <div class="crayon-num" data-line="crayon-59d380ad468d0627083613-7">
                  7
                 </div>
                 <div class="crayon-num crayon-striped-num" data-line="crayon-59d380ad468d0627083613-8">
                  8
                 </div>
                 <div class="crayon-num" data-line="crayon-59d380ad468d0627083613-9">
                  9
                 </div>
                 <div class="crayon-num crayon-striped-num" data-line="crayon-59d380ad468d0627083613-10">
                  10
                 </div>
                 <div class="crayon-num" data-line="crayon-59d380ad468d0627083613-11">
                  11
                 </div>
                 <div class="crayon-num crayon-striped-num" data-line="crayon-59d380ad468d0627083613-12">
                  12
                 </div>
                 <div class="crayon-num" data-line="crayon-59d380ad468d0627083613-13">
                  13
                 </div>
                 <div class="crayon-num crayon-striped-num" data-line="crayon-59d380ad468d0627083613-14">
                  14
                 </div>
                 <div class="crayon-num" data-line="crayon-59d380ad468d0627083613-15">
                  15
                 </div>
                 <div class="crayon-num crayon-marked-num crayon-top crayon-bottom crayon-striped-num" data-line="crayon-59d380ad468d0627083613-16">
                  16
                 </div>
                 <div class="crayon-num" data-line="crayon-59d380ad468d0627083613-17">
                  17
                 </div>
                 <div class="crayon-num crayon-striped-num" data-line="crayon-59d380ad468d0627083613-18">
                  18
                 </div>
                 <div class="crayon-num" data-line="crayon-59d380ad468d0627083613-19">
                  19
                 </div>
                 <div class="crayon-num crayon-striped-num" data-line="crayon-59d380ad468d0627083613-20">
                  20
                 </div>
                 <div class="crayon-num" data-line="crayon-59d380ad468d0627083613-21">
                  21
                 </div>
                 <div class="crayon-num crayon-striped-num" data-line="crayon-59d380ad468d0627083613-22">
                  22
                 </div>
                </div> </td> 
               <td class="crayon-code">
                <div class="crayon-pre" style="font-size: 12px !important; line-height: 15px !important; -moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4;">
                 <div class="crayon-line" id="crayon-59d380ad468d0627083613-1">
                  <span class="crayon-t">var</span>
                  <span class="crayon-h"> </span>
                  <span class="crayon-v">express</span>
                  <span class="crayon-h"> </span>
                  <span class="crayon-o">=</span>
                  <span class="crayon-h"> </span>
                  <span class="crayon-e">require</span>
                  <span class="crayon-sy">(</span>
                  <span class="crayon-s">'express'</span>
                  <span class="crayon-sy">)</span>
                  <span class="crayon-sy">;</span>
                 </div>
                 <div class="crayon-line crayon-striped-line" id="crayon-59d380ad468d0627083613-2">
                  <span class="crayon-t">var</span>
                  <span class="crayon-h"> </span>
                  <span class="crayon-v">morgan</span>
                  <span class="crayon-h"> </span>
                  <span class="crayon-o">=</span>
                  <span class="crayon-h"> </span>
                  <span class="crayon-e">require</span>
                  <span class="crayon-sy">(</span>
                  <span class="crayon-s">'morgan'</span>
                  <span class="crayon-sy">)</span>
                  <span class="crayon-sy">;</span>
                 </div>
                 <div class="crayon-line" id="crayon-59d380ad468d0627083613-3">
                  <span class="crayon-t">var</span>
                  <span class="crayon-h"> </span>
                  <span class="crayon-v">bodyParser</span>
                  <span class="crayon-h"> </span>
                  <span class="crayon-o">=</span>
                  <span class="crayon-h"> </span>
                  <span class="crayon-e">require</span>
                  <span class="crayon-sy">(</span>
                  <span class="crayon-s">'body-parser'</span>
                  <span class="crayon-sy">)</span>
                  <span class="crayon-sy">;</span>
                 </div>
                 <div class="crayon-line crayon-marked-line crayon-top crayon-bottom crayon-striped-line" id="crayon-59d380ad468d0627083613-4">
                  <span class="crayon-t">var</span>
                  <span class="crayon-h"> </span>
                  <span class="crayon-v">publicThings</span>
                  <span class="crayon-h"> </span>
                  <span class="crayon-o">=</span>
                  <span class="crayon-h"> </span>
                  <span class="crayon-e">require</span>
                  <span class="crayon-sy">(</span>
                  <span class="crayon-v">__dirname</span>
                  <span class="crayon-h"> </span>
                  <span class="crayon-o">+</span>
                  <span class="crayon-h"> </span>
                  <span class="crayon-s">'/routes/publicThings.js'</span>
                  <span class="crayon-sy">)</span>
                  <span class="crayon-sy">;</span>
                 </div>
                 <div class="crayon-line" id="crayon-59d380ad468d0627083613-5">
                  <span class="crayon-t">var</span>
                  <span class="crayon-h"> </span>
                  <span class="crayon-v">app</span>
                  <span class="crayon-sy">;</span>
                 </div>
                 <div class="crayon-line crayon-striped-line" id="crayon-59d380ad468d0627083613-6">
                  <span class="crayon-t">var</span>
                  <span class="crayon-h"> </span>
                  <span class="crayon-v">router</span>
                  <span class="crayon-sy">;</span>
                 </div>
                 <div class="crayon-line" id="crayon-59d380ad468d0627083613-7">
                  <span class="crayon-t">var</span>
                  <span class="crayon-h"> </span>
                  <span class="crayon-v">port</span>
                  <span class="crayon-h"> </span>
                  <span class="crayon-o">=</span>
                  <span class="crayon-h"> </span>
                  <span class="crayon-cn">3000</span>
                  <span class="crayon-sy">;</span>
                 </div>
                 <div class="crayon-line crayon-striped-line" id="crayon-59d380ad468d0627083613-8">
                  &nbsp;
                 </div>
                 <div class="crayon-line" id="crayon-59d380ad468d0627083613-9">
                  <span class="crayon-v">app</span>
                  <span class="crayon-h"> </span>
                  <span class="crayon-o">=</span>
                  <span class="crayon-h"> </span>
                  <span class="crayon-e">express</span>
                  <span class="crayon-sy">(</span>
                  <span class="crayon-sy">)</span>
                  <span class="crayon-sy">;</span>
                 </div>
                 <div class="crayon-line crayon-striped-line" id="crayon-59d380ad468d0627083613-10">
                  &nbsp;
                 </div>
                 <div class="crayon-line" id="crayon-59d380ad468d0627083613-11">
                  <span class="crayon-v">app</span>
                  <span class="crayon-sy">.</span>
                  <span class="crayon-st">use</span>
                  <span class="crayon-sy">(</span>
                  <span class="crayon-e">morgan</span>
                  <span class="crayon-sy">(</span>
                  <span class="crayon-s">'combined'</span>
                  <span class="crayon-sy">)</span>
                  <span class="crayon-sy">)</span>
                  <span class="crayon-sy">;</span>
                  <span class="crayon-h"> </span>
                  <span class="crayon-c">//logger</span>
                 </div>
                 <div class="crayon-line crayon-striped-line" id="crayon-59d380ad468d0627083613-12">
                  <span class="crayon-v">app</span>
                  <span class="crayon-sy">.</span>
                  <span class="crayon-st">use</span>
                  <span class="crayon-sy">(</span>
                  <span class="crayon-v">bodyParser</span>
                  <span class="crayon-sy">.</span>
                  <span class="crayon-e">json</span>
                  <span class="crayon-sy">(</span>
                  <span class="crayon-sy">)</span>
                  <span class="crayon-sy">)</span>
                  <span class="crayon-sy">;</span>
                 </div>
                 <div class="crayon-line" id="crayon-59d380ad468d0627083613-13">
                  &nbsp;
                 </div>
                 <div class="crayon-line crayon-striped-line" id="crayon-59d380ad468d0627083613-14">
                  <span class="crayon-v">router</span>
                  <span class="crayon-h"> </span>
                  <span class="crayon-o">=</span>
                  <span class="crayon-h"> </span>
                  <span class="crayon-v">express</span>
                  <span class="crayon-sy">.</span>
                  <span class="crayon-e">Router</span>
                  <span class="crayon-sy">(</span>
                  <span class="crayon-sy">)</span>
                  <span class="crayon-sy">;</span>
                 </div>
                 <div class="crayon-line" id="crayon-59d380ad468d0627083613-15">
                  &nbsp;
                 </div>
                 <div class="crayon-line crayon-marked-line crayon-top crayon-bottom crayon-striped-line" id="crayon-59d380ad468d0627083613-16">
                  <span class="crayon-v">router</span>
                  <span class="crayon-sy">.</span>
                  <span class="crayon-e">get</span>
                  <span class="crayon-sy">(</span>
                  <span class="crayon-s">'/public_things'</span>
                  <span class="crayon-sy">,</span>
                  <span class="crayon-h"> </span>
                  <span class="crayon-v">publicThings</span>
                  <span class="crayon-sy">.</span>
                  <span class="crayon-v">get</span>
                  <span class="crayon-sy">)</span>
                  <span class="crayon-sy">;</span>
                 </div>
                 <div class="crayon-line" id="crayon-59d380ad468d0627083613-17">
                  &nbsp;
                 </div>
                 <div class="crayon-line crayon-striped-line" id="crayon-59d380ad468d0627083613-18">
                  <span class="crayon-v">app</span>
                  <span class="crayon-sy">.</span>
                  <span class="crayon-st">use</span>
                  <span class="crayon-sy">(</span>
                  <span class="crayon-s">'/api'</span>
                  <span class="crayon-sy">,</span>
                  <span class="crayon-h"> </span>
                  <span class="crayon-v">router</span>
                  <span class="crayon-sy">)</span>
                  <span class="crayon-sy">;</span>
                 </div>
                 <div class="crayon-line" id="crayon-59d380ad468d0627083613-19">
                  &nbsp;
                 </div>
                 <div class="crayon-line crayon-striped-line" id="crayon-59d380ad468d0627083613-20">
                  <span class="crayon-v">app</span>
                  <span class="crayon-sy">.</span>
                  <span class="crayon-e">listen</span>
                  <span class="crayon-sy">(</span>
                  <span class="crayon-v">port</span>
                  <span class="crayon-sy">,</span>
                  <span class="crayon-h"> </span>
                  <span class="crayon-t">function</span>
                  <span class="crayon-sy">(</span>
                  <span class="crayon-sy">)</span>
                  <span class="crayon-h"> </span>
                  <span class="crayon-sy">{</span>
                 </div>
                 <div class="crayon-line" id="crayon-59d380ad468d0627083613-21">
                  <span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;</span>
                  <span class="crayon-v">console</span>
                  <span class="crayon-sy">.</span>
                  <span class="crayon-e">log</span>
                  <span class="crayon-sy">(</span>
                  <span class="crayon-s">'Web server listening on localhost:'</span>
                  <span class="crayon-h"> </span>
                  <span class="crayon-o">+</span>
                  <span class="crayon-h"> </span>
                  <span class="crayon-v">port</span>
                  <span class="crayon-sy">)</span>
                  <span class="crayon-sy">;</span>
                 </div>
                 <div class="crayon-line crayon-striped-line" id="crayon-59d380ad468d0627083613-22">
                  <span class="crayon-sy">}</span>
                  <span class="crayon-sy">)</span>
                  <span class="crayon-sy">;</span>
                 </div>
                </div></td> 
              </tr> 
             </tbody>
            </table> 
           </div> 
          </div> 
          <!-- [Format Time: 0.0026 seconds] --> 
          <p>Let’s run another test to tryout the new logic. Stop your previous Node.js process if it’s still running with <span class="inline-code">ctrl + c</span> and then start it back up. Use your REST client to issue the same GET request as before. You should see results like the following:</p> 
          <p><a href="https://jsao.io/wp-content/uploads/2015/06/auth-api-test-2.png" rel="prettyPhoto[gallery-WMde]"><img src="https://jsao.io/wp-content/uploads/2015/06/auth-api-test-2.png" alt="auth-api test 2" width="1834" height="988" class="alignnone size-full wp-image-429" srcset="https://jsao.io/wp-content/uploads/2015/06/auth-api-test-2.png 1834w, https://jsao.io/wp-content/uploads/2015/06/auth-api-test-2-300x162.png 300w, https://jsao.io/wp-content/uploads/2015/06/auth-api-test-2-1024x552.png 1024w" sizes="(max-width: 1834px) 100vw, 1834px"></a></p> 
          <p>Now users of our API can access the data from the <span class="inline-code">/api/public_things</span> route, awesome!</p> 
          <h4>Creating a Protected Route</h4> 
          <p>Of course not all of our data should be accessed so easily! Let’s create a <span class="inline-code">/api/protected_things</span> route that requires a valid JWT to return data. We’ll start by updating the <span class="inline-code">config.js</span> to include a secret key (shhhh, don’t tell anyone!).</p> 
          <!-- Crayon Syntax Highlighter v_2.7.2_beta --> 
          <div id="crayon-59d380ad468d7092754319" class="crayon-syntax crayon-theme-classic crayon-font-monaco crayon-os-pc print-yes notranslate" data-settings=" no-popup minimize scroll-mouseover" style=" margin-top: 12px; margin-bottom: 12px; font-size: 12px !important; line-height: 15px !important;"> 
           <div class="crayon-toolbar" data-settings=" show" style="font-size: 12px !important;height: 18px !important; line-height: 18px !important;">
            <span class="crayon-title">auth-api/config.js</span> 
            <div class="crayon-tools" style="font-size: 12px !important;height: 18px !important; line-height: 18px !important;">
             <div class="crayon-button crayon-copy-button" title="Copy">
              <div class="crayon-button-icon"></div>
             </div>
             <span class="crayon-language">JavaScript</span>
            </div>
           </div> 
           <div class="crayon-info" style="min-height: 16.8px !important; line-height: 16.8px !important;"></div> 
           <div class="crayon-plain-wrap">
            <textarea wrap="soft" class="crayon-plain print-no" data-settings="dblclick" readonly style="-moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4; font-size: 12px !important; line-height: 15px !important;">
module.exports = {
    database: {
        user: 'hr',
        password: 'oracle',
        connectString: 'localhost:1523/orcl'
    },
    jwtSecretKey: "jmvhDdDBMvqb=M@6h&amp;QVA7x"
};</textarea>
           </div> 
           <div class="crayon-main" style=""> 
            <table class="crayon-table"> 
             <tbody>
              <tr class="crayon-row"> 
               <td class="crayon-nums " data-settings="show"> 
                <div class="crayon-nums-content" style="font-size: 12px !important; line-height: 15px !important;">
                 <div class="crayon-num" data-line="crayon-59d380ad468d7092754319-1">
                  1
                 </div>
                 <div class="crayon-num crayon-striped-num" data-line="crayon-59d380ad468d7092754319-2">
                  2
                 </div>
                 <div class="crayon-num" data-line="crayon-59d380ad468d7092754319-3">
                  3
                 </div>
                 <div class="crayon-num crayon-striped-num" data-line="crayon-59d380ad468d7092754319-4">
                  4
                 </div>
                 <div class="crayon-num" data-line="crayon-59d380ad468d7092754319-5">
                  5
                 </div>
                 <div class="crayon-num crayon-striped-num" data-line="crayon-59d380ad468d7092754319-6">
                  6
                 </div>
                 <div class="crayon-num" data-line="crayon-59d380ad468d7092754319-7">
                  7
                 </div>
                 <div class="crayon-num crayon-striped-num" data-line="crayon-59d380ad468d7092754319-8">
                  8
                 </div>
                </div> </td> 
               <td class="crayon-code">
                <div class="crayon-pre" style="font-size: 12px !important; line-height: 15px !important; -moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4;">
                 <div class="crayon-line" id="crayon-59d380ad468d7092754319-1">
                  <span class="crayon-v">module</span>
                  <span class="crayon-sy">.</span>
                  <span class="crayon-v">exports</span>
                  <span class="crayon-h"> </span>
                  <span class="crayon-o">=</span>
                  <span class="crayon-h"> </span>
                  <span class="crayon-sy">{</span>
                 </div>
                 <div class="crayon-line crayon-striped-line" id="crayon-59d380ad468d7092754319-2">
                  <span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;</span>
                  <span class="crayon-v">database</span>
                  <span class="crayon-o">:</span>
                  <span class="crayon-h"> </span>
                  <span class="crayon-sy">{</span>
                 </div>
                 <div class="crayon-line" id="crayon-59d380ad468d7092754319-3">
                  <span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span>
                  <span class="crayon-v">user</span>
                  <span class="crayon-o">:</span>
                  <span class="crayon-h"> </span>
                  <span class="crayon-s">'hr'</span>
                  <span class="crayon-sy">,</span>
                 </div>
                 <div class="crayon-line crayon-striped-line" id="crayon-59d380ad468d7092754319-4">
                  <span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span>
                  <span class="crayon-v">password</span>
                  <span class="crayon-o">:</span>
                  <span class="crayon-h"> </span>
                  <span class="crayon-s">'oracle'</span>
                  <span class="crayon-sy">,</span>
                 </div>
                 <div class="crayon-line" id="crayon-59d380ad468d7092754319-5">
                  <span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span>
                  <span class="crayon-v">connectString</span>
                  <span class="crayon-o">:</span>
                  <span class="crayon-h"> </span>
                  <span class="crayon-s">'localhost:1523/orcl'</span>
                 </div>
                 <div class="crayon-line crayon-striped-line" id="crayon-59d380ad468d7092754319-6">
                  <span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;</span>
                  <span class="crayon-sy">}</span>
                  <span class="crayon-sy">,</span>
                 </div>
                 <div class="crayon-line" id="crayon-59d380ad468d7092754319-7">
                  <span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;</span>
                  <span class="crayon-v">jwtSecretKey</span>
                  <span class="crayon-o">:</span>
                  <span class="crayon-h"> </span>
                  <span class="crayon-s">"jmvhDdDBMvqb=M@6h&amp;QVA7x"</span>
                 </div>
                 <div class="crayon-line crayon-striped-line" id="crayon-59d380ad468d7092754319-8">
                  <span class="crayon-sy">}</span>
                  <span class="crayon-sy">;</span>
                 </div>
                </div></td> 
              </tr> 
             </tbody>
            </table> 
           </div> 
          </div> 
          <!-- [Format Time: 0.0009 seconds] --> 
          <p>Now we can create our <span class="inline-code">/api/protected_things</span> route logic in a new file named <span class="inline-code">protectedThings.js</span> in the <span class="inline-code">routes</span> directory.</p> 
          <!-- Crayon Syntax Highlighter v_2.7.2_beta --> 
          <div id="crayon-59d380ad468de939822909" class="crayon-syntax crayon-theme-classic crayon-font-monaco crayon-os-pc print-yes notranslate" data-settings=" no-popup minimize scroll-mouseover" style=" margin-top: 12px; margin-bottom: 12px; font-size: 12px !important; line-height: 15px !important;"> 
           <div class="crayon-toolbar" data-settings=" show" style="font-size: 12px !important;height: 18px !important; line-height: 18px !important;">
            <span class="crayon-title">auth-api/routes/protectedThings.js</span> 
            <div class="crayon-tools" style="font-size: 12px !important;height: 18px !important; line-height: 18px !important;">
             <div class="crayon-button crayon-copy-button" title="Copy">
              <div class="crayon-button-icon"></div>
             </div>
             <span class="crayon-language">JavaScript</span>
            </div>
           </div> 
           <div class="crayon-info" style="min-height: 16.8px !important; line-height: 16.8px !important;"></div> 
           <div class="crayon-plain-wrap">
            <textarea wrap="soft" class="crayon-plain print-no" data-settings="dblclick" readonly style="-moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4; font-size: 12px !important; line-height: 15px !important;">
var oracledb = require('oracledb');
var jwt = require('jsonwebtoken');
var config = require(__dirname + '../../config.js');

function get(req, res, next) {
    var token;
    var payload;

    if (!req.headers.authorization) {
        return res.status(401).send({message: 'You are not authorized'});
    }

    token = req.headers.authorization.split(' ')[1];

    try {
        payload = jwt.verify(token, config.jwtSecretKey);
    } catch (e) {
        if (e.name === 'TokenExpiredError') {
            res.status(401).send({message: 'Token Expired'});
        } else {
            res.status(401).send({message: 'Authentication failed'});
        }

        return;
    }

    oracledb.getConnection(
        config.database,
        function(err, connection){
            if (err) {
                return next(err);
            }

            connection.execute(
                'select column1 as "column1" ' +
                'from jsao_protected_things ',
                {},//no binds
                {
                    outFormat: oracledb.OBJECT
                },
                function(err, results){
                    if (err) {
                        connection.release(function(err) {
                            if (err) {
                                console.error(err.message);
                            }
                        });

                        return next(err);
                    }

                    res.status(200).json(results.rows);

                    connection.release(function(err) {
                        if (err) {
                            console.error(err.message);
                        }
                    });
                }
            );
        }
    );
}

module.exports.get = get;</textarea>
           </div> 
           <div class="crayon-main" style=""> 
            <table class="crayon-table"> 
             <tbody>
              <tr class="crayon-row"> 
               <td class="crayon-nums " data-settings="show"> 
                <div class="crayon-nums-content" style="font-size: 12px !important; line-height: 15px !important;">
                 <div class="crayon-num" data-line="crayon-59d380ad468de939822909-1">
                  1
                 </div>
                 <div class="crayon-num crayon-marked-num crayon-top crayon-bottom crayon-striped-num" data-line="crayon-59d380ad468de939822909-2">
                  2
                 </div>
                 <div class="crayon-num" data-line="crayon-59d380ad468de939822909-3">
                  3
                 </div>
                 <div class="crayon-num crayon-striped-num" data-line="crayon-59d380ad468de939822909-4">
                  4
                 </div>
                 <div class="crayon-num" data-line="crayon-59d380ad468de939822909-5">
                  5
                 </div>
                 <div class="crayon-num crayon-marked-num crayon-top crayon-striped-num" data-line="crayon-59d380ad468de939822909-6">
                  6
                 </div>
                 <div class="crayon-num crayon-marked-num" data-line="crayon-59d380ad468de939822909-7">
                  7
                 </div>
                 <div class="crayon-num crayon-marked-num crayon-striped-num" data-line="crayon-59d380ad468de939822909-8">
                  8
                 </div>
                 <div class="crayon-num crayon-marked-num" data-line="crayon-59d380ad468de939822909-9">
                  9
                 </div>
                 <div class="crayon-num crayon-marked-num crayon-striped-num" data-line="crayon-59d380ad468de939822909-10">
                  10
                 </div>
                 <div class="crayon-num crayon-marked-num" data-line="crayon-59d380ad468de939822909-11">
                  11
                 </div>
                 <div class="crayon-num crayon-marked-num crayon-striped-num" data-line="crayon-59d380ad468de939822909-12">
                  12
                 </div>
                 <div class="crayon-num crayon-marked-num" data-line="crayon-59d380ad468de939822909-13">
                  13
                 </div>
                 <div class="crayon-num crayon-marked-num crayon-striped-num" data-line="crayon-59d380ad468de939822909-14">
                  14
                 </div>
                 <div class="crayon-num crayon-marked-num" data-line="crayon-59d380ad468de939822909-15">
                  15
                 </div>
                 <div class="crayon-num crayon-marked-num crayon-striped-num" data-line="crayon-59d380ad468de939822909-16">
                  16
                 </div>
                 <div class="crayon-num crayon-marked-num" data-line="crayon-59d380ad468de939822909-17">
                  17
                 </div>
                 <div class="crayon-num crayon-marked-num crayon-striped-num" data-line="crayon-59d380ad468de939822909-18">
                  18
                 </div>
                 <div class="crayon-num crayon-marked-num" data-line="crayon-59d380ad468de939822909-19">
                  19
                 </div>
                 <div class="crayon-num crayon-marked-num crayon-striped-num" data-line="crayon-59d380ad468de939822909-20">
                  20
                 </div>
                 <div class="crayon-num crayon-marked-num" data-line="crayon-59d380ad468de939822909-21">
                  21
                 </div>
                 <div class="crayon-num crayon-marked-num crayon-striped-num" data-line="crayon-59d380ad468de939822909-22">
                  22
                 </div>
                 <div class="crayon-num crayon-marked-num" data-line="crayon-59d380ad468de939822909-23">
                  23
                 </div>
                 <div class="crayon-num crayon-marked-num crayon-striped-num" data-line="crayon-59d380ad468de939822909-24">
                  24
                 </div>
                 <div class="crayon-num crayon-marked-num crayon-bottom" data-line="crayon-59d380ad468de939822909-25">
                  25
                 </div>
                 <div class="crayon-num crayon-striped-num" data-line="crayon-59d380ad468de939822909-26">
                  26
                 </div>
                 <div class="crayon-num" data-line="crayon-59d380ad468de939822909-27">
                  27
                 </div>
                 <div class="crayon-num crayon-striped-num" data-line="crayon-59d380ad468de939822909-28">
                  28
                 </div>
                 <div class="crayon-num" data-line="crayon-59d380ad468de939822909-29">
                  29
                 </div>
                 <div class="crayon-num crayon-striped-num" data-line="crayon-59d380ad468de939822909-30">
                  30
                 </div>
                 <div class="crayon-num" data-line="crayon-59d380ad468de939822909-31">
                  31
                 </div>
                 <div class="crayon-num crayon-striped-num" data-line="crayon-59d380ad468de939822909-32">
                  32
                 </div>
                 <div class="crayon-num" data-line="crayon-59d380ad468de939822909-33">
                  33
                 </div>
                 <div class="crayon-num crayon-striped-num" data-line="crayon-59d380ad468de939822909-34">
                  34
                 </div>
                 <div class="crayon-num" data-line="crayon-59d380ad468de939822909-35">
                  35
                 </div>
                 <div class="crayon-num crayon-marked-num crayon-top crayon-bottom crayon-striped-num" data-line="crayon-59d380ad468de939822909-36">
                  36
                 </div>
                 <div class="crayon-num" data-line="crayon-59d380ad468de939822909-37">
                  37
                 </div>
                 <div class="crayon-num crayon-striped-num" data-line="crayon-59d380ad468de939822909-38">
                  38
                 </div>
                 <div class="crayon-num" data-line="crayon-59d380ad468de939822909-39">
                  39
                 </div>
                 <div class="crayon-num crayon-striped-num" data-line="crayon-59d380ad468de939822909-40">
                  40
                 </div>
                 <div class="crayon-num" data-line="crayon-59d380ad468de939822909-41">
                  41
                 </div>
                 <div class="crayon-num crayon-striped-num" data-line="crayon-59d380ad468de939822909-42">
                  42
                 </div>
                 <div class="crayon-num" data-line="crayon-59d380ad468de939822909-43">
                  43
                 </div>
                 <div class="crayon-num crayon-striped-num" data-line="crayon-59d380ad468de939822909-44">
                  44
                 </div>
                 <div class="crayon-num" data-line="crayon-59d380ad468de939822909-45">
                  45
                 </div>
                 <div class="crayon-num crayon-striped-num" data-line="crayon-59d380ad468de939822909-46">
                  46
                 </div>
                 <div class="crayon-num" data-line="crayon-59d380ad468de939822909-47">
                  47
                 </div>
                 <div class="crayon-num crayon-striped-num" data-line="crayon-59d380ad468de939822909-48">
                  48
                 </div>
                 <div class="crayon-num" data-line="crayon-59d380ad468de939822909-49">
                  49
                 </div>
                 <div class="crayon-num crayon-striped-num" data-line="crayon-59d380ad468de939822909-50">
                  50
                 </div>
                 <div class="crayon-num" data-line="crayon-59d380ad468de939822909-51">
                  51
                 </div>
                 <div class="crayon-num crayon-striped-num" data-line="crayon-59d380ad468de939822909-52">
                  52
                 </div>
                 <div class="crayon-num" data-line="crayon-59d380ad468de939822909-53">
                  53
                 </div>
                 <div class="crayon-num crayon-striped-num" data-line="crayon-59d380ad468de939822909-54">
                  54
                 </div>
                 <div class="crayon-num" data-line="crayon-59d380ad468de939822909-55">
                  55
                 </div>
                 <div class="crayon-num crayon-striped-num" data-line="crayon-59d380ad468de939822909-56">
                  56
                 </div>
                 <div class="crayon-num" data-line="crayon-59d380ad468de939822909-57">
                  57
                 </div>
                 <div class="crayon-num crayon-striped-num" data-line="crayon-59d380ad468de939822909-58">
                  58
                 </div>
                 <div class="crayon-num" data-line="crayon-59d380ad468de939822909-59">
                  59
                 </div>
                 <div class="crayon-num crayon-striped-num" data-line="crayon-59d380ad468de939822909-60">
                  60
                 </div>
                 <div class="crayon-num" data-line="crayon-59d380ad468de939822909-61">
                  61
                 </div>
                 <div class="crayon-num crayon-striped-num" data-line="crayon-59d380ad468de939822909-62">
                  62
                 </div>
                 <div class="crayon-num" data-line="crayon-59d380ad468de939822909-63">
                  63
                 </div>
                 <div class="crayon-num crayon-striped-num" data-line="crayon-59d380ad468de939822909-64">
                  64
                 </div>
                 <div class="crayon-num" data-line="crayon-59d380ad468de939822909-65">
                  65
                 </div>
                </div> </td> 
               <td class="crayon-code">
                <div class="crayon-pre" style="font-size: 12px !important; line-height: 15px !important; -moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4;">
                 <div class="crayon-line" id="crayon-59d380ad468de939822909-1">
                  <span class="crayon-t">var</span>
                  <span class="crayon-h"> </span>
                  <span class="crayon-v">oracledb</span>
                  <span class="crayon-h"> </span>
                  <span class="crayon-o">=</span>
                  <span class="crayon-h"> </span>
                  <span class="crayon-e">require</span>
                  <span class="crayon-sy">(</span>
                  <span class="crayon-s">'oracledb'</span>
                  <span class="crayon-sy">)</span>
                  <span class="crayon-sy">;</span>
                 </div>
                 <div class="crayon-line crayon-marked-line crayon-top crayon-bottom crayon-striped-line" id="crayon-59d380ad468de939822909-2">
                  <span class="crayon-t">var</span>
                  <span class="crayon-h"> </span>
                  <span class="crayon-v">jwt</span>
                  <span class="crayon-h"> </span>
                  <span class="crayon-o">=</span>
                  <span class="crayon-h"> </span>
                  <span class="crayon-e">require</span>
                  <span class="crayon-sy">(</span>
                  <span class="crayon-s">'jsonwebtoken'</span>
                  <span class="crayon-sy">)</span>
                  <span class="crayon-sy">;</span>
                 </div>
                 <div class="crayon-line" id="crayon-59d380ad468de939822909-3">
                  <span class="crayon-t">var</span>
                  <span class="crayon-h"> </span>
                  <span class="crayon-v">config</span>
                  <span class="crayon-h"> </span>
                  <span class="crayon-o">=</span>
                  <span class="crayon-h"> </span>
                  <span class="crayon-e">require</span>
                  <span class="crayon-sy">(</span>
                  <span class="crayon-v">__dirname</span>
                  <span class="crayon-h"> </span>
                  <span class="crayon-o">+</span>
                  <span class="crayon-h"> </span>
                  <span class="crayon-s">'../../config.js'</span>
                  <span class="crayon-sy">)</span>
                  <span class="crayon-sy">;</span>
                 </div>
                 <div class="crayon-line crayon-striped-line" id="crayon-59d380ad468de939822909-4">
                  &nbsp;
                 </div>
                 <div class="crayon-line" id="crayon-59d380ad468de939822909-5">
                  <span class="crayon-t">function</span>
                  <span class="crayon-h"> </span>
                  <span class="crayon-e">get</span>
                  <span class="crayon-sy">(</span>
                  <span class="crayon-v">req</span>
                  <span class="crayon-sy">,</span>
                  <span class="crayon-h"> </span>
                  <span class="crayon-v">res</span>
                  <span class="crayon-sy">,</span>
                  <span class="crayon-h"> </span>
                  <span class="crayon-v">next</span>
                  <span class="crayon-sy">)</span>
                  <span class="crayon-h"> </span>
                  <span class="crayon-sy">{</span>
                 </div>
                 <div class="crayon-line crayon-marked-line crayon-top crayon-striped-line" id="crayon-59d380ad468de939822909-6">
                  <span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;</span>
                  <span class="crayon-t">var</span>
                  <span class="crayon-h"> </span>
                  <span class="crayon-v">token</span>
                  <span class="crayon-sy">;</span>
                 </div>
                 <div class="crayon-line crayon-marked-line" id="crayon-59d380ad468de939822909-7">
                  <span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;</span>
                  <span class="crayon-t">var</span>
                  <span class="crayon-h"> </span>
                  <span class="crayon-v">payload</span>
                  <span class="crayon-sy">;</span>
                 </div>
                 <div class="crayon-line crayon-marked-line crayon-striped-line" id="crayon-59d380ad468de939822909-8">
                  &nbsp;
                 </div>
                 <div class="crayon-line crayon-marked-line" id="crayon-59d380ad468de939822909-9">
                  <span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;</span>
                  <span class="crayon-st">if</span>
                  <span class="crayon-h"> </span>
                  <span class="crayon-sy">(</span>
                  <span class="crayon-o">!</span>
                  <span class="crayon-v">req</span>
                  <span class="crayon-sy">.</span>
                  <span class="crayon-v">headers</span>
                  <span class="crayon-sy">.</span>
                  <span class="crayon-v">authorization</span>
                  <span class="crayon-sy">)</span>
                  <span class="crayon-h"> </span>
                  <span class="crayon-sy">{</span>
                 </div>
                 <div class="crayon-line crayon-marked-line crayon-striped-line" id="crayon-59d380ad468de939822909-10">
                  <span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span>
                  <span class="crayon-st">return</span>
                  <span class="crayon-h"> </span>
                  <span class="crayon-v">res</span>
                  <span class="crayon-sy">.</span>
                  <span class="crayon-e">status</span>
                  <span class="crayon-sy">(</span>
                  <span class="crayon-cn">401</span>
                  <span class="crayon-sy">)</span>
                  <span class="crayon-sy">.</span>
                  <span class="crayon-e">send</span>
                  <span class="crayon-sy">(</span>
                  <span class="crayon-sy">{</span>
                  <span class="crayon-v">message</span>
                  <span class="crayon-o">:</span>
                  <span class="crayon-h"> </span>
                  <span class="crayon-s">'You are not authorized'</span>
                  <span class="crayon-sy">}</span>
                  <span class="crayon-sy">)</span>
                  <span class="crayon-sy">;</span>
                 </div>
                 <div class="crayon-line crayon-marked-line" id="crayon-59d380ad468de939822909-11">
                  <span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;</span>
                  <span class="crayon-sy">}</span>
                 </div>
                 <div class="crayon-line crayon-marked-line crayon-striped-line" id="crayon-59d380ad468de939822909-12">
                  &nbsp;
                 </div>
                 <div class="crayon-line crayon-marked-line" id="crayon-59d380ad468de939822909-13">
                  <span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;</span>
                  <span class="crayon-v">token</span>
                  <span class="crayon-h"> </span>
                  <span class="crayon-o">=</span>
                  <span class="crayon-h"> </span>
                  <span class="crayon-v">req</span>
                  <span class="crayon-sy">.</span>
                  <span class="crayon-v">headers</span>
                  <span class="crayon-sy">.</span>
                  <span class="crayon-v">authorization</span>
                  <span class="crayon-sy">.</span>
                  <span class="crayon-e">split</span>
                  <span class="crayon-sy">(</span>
                  <span class="crayon-s">' '</span>
                  <span class="crayon-sy">)</span>
                  <span class="crayon-sy">[</span>
                  <span class="crayon-cn">1</span>
                  <span class="crayon-sy">]</span>
                  <span class="crayon-sy">;</span>
                 </div>
                 <div class="crayon-line crayon-marked-line crayon-striped-line" id="crayon-59d380ad468de939822909-14">
                  &nbsp;
                 </div>
                 <div class="crayon-line crayon-marked-line" id="crayon-59d380ad468de939822909-15">
                  <span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;</span>
                  <span class="crayon-st">try</span>
                  <span class="crayon-h"> </span>
                  <span class="crayon-sy">{</span>
                 </div>
                 <div class="crayon-line crayon-marked-line crayon-striped-line" id="crayon-59d380ad468de939822909-16">
                  <span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span>
                  <span class="crayon-v">payload</span>
                  <span class="crayon-h"> </span>
                  <span class="crayon-o">=</span>
                  <span class="crayon-h"> </span>
                  <span class="crayon-v">jwt</span>
                  <span class="crayon-sy">.</span>
                  <span class="crayon-e">verify</span>
                  <span class="crayon-sy">(</span>
                  <span class="crayon-v">token</span>
                  <span class="crayon-sy">,</span>
                  <span class="crayon-h"> </span>
                  <span class="crayon-v">config</span>
                  <span class="crayon-sy">.</span>
                  <span class="crayon-v">jwtSecretKey</span>
                  <span class="crayon-sy">)</span>
                  <span class="crayon-sy">;</span>
                 </div>
                 <div class="crayon-line crayon-marked-line" id="crayon-59d380ad468de939822909-17">
                  <span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;</span>
                  <span class="crayon-sy">}</span>
                  <span class="crayon-h"> </span>
                  <span class="crayon-st">catch</span>
                  <span class="crayon-h"> </span>
                  <span class="crayon-sy">(</span>
                  <span class="crayon-v">e</span>
                  <span class="crayon-sy">)</span>
                  <span class="crayon-h"> </span>
                  <span class="crayon-sy">{</span>
                 </div>
                 <div class="crayon-line crayon-marked-line crayon-striped-line" id="crayon-59d380ad468de939822909-18">
                  <span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span>
                  <span class="crayon-st">if</span>
                  <span class="crayon-h"> </span>
                  <span class="crayon-sy">(</span>
                  <span class="crayon-v">e</span>
                  <span class="crayon-sy">.</span>
                  <span class="crayon-v">name</span>
                  <span class="crayon-h"> </span>
                  <span class="crayon-o">===</span>
                  <span class="crayon-h"> </span>
                  <span class="crayon-s">'TokenExpiredError'</span>
                  <span class="crayon-sy">)</span>
                  <span class="crayon-h"> </span>
                  <span class="crayon-sy">{</span>
                 </div>
                 <div class="crayon-line crayon-marked-line" id="crayon-59d380ad468de939822909-19">
                  <span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span>
                  <span class="crayon-v">res</span>
                  <span class="crayon-sy">.</span>
                  <span class="crayon-e">status</span>
                  <span class="crayon-sy">(</span>
                  <span class="crayon-cn">401</span>
                  <span class="crayon-sy">)</span>
                  <span class="crayon-sy">.</span>
                  <span class="crayon-e">send</span>
                  <span class="crayon-sy">(</span>
                  <span class="crayon-sy">{</span>
                  <span class="crayon-v">message</span>
                  <span class="crayon-o">:</span>
                  <span class="crayon-h"> </span>
                  <span class="crayon-s">'Token Expired'</span>
                  <span class="crayon-sy">}</span>
                  <span class="crayon-sy">)</span>
                  <span class="crayon-sy">;</span>
                 </div>
                 <div class="crayon-line crayon-marked-line crayon-striped-line" id="crayon-59d380ad468de939822909-20">
                  <span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span>
                  <span class="crayon-sy">}</span>
                  <span class="crayon-h"> </span>
                  <span class="crayon-st">else</span>
                  <span class="crayon-h"> </span>
                  <span class="crayon-sy">{</span>
                 </div>
                 <div class="crayon-line crayon-marked-line" id="crayon-59d380ad468de939822909-21">
                  <span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span>
                  <span class="crayon-v">res</span>
                  <span class="crayon-sy">.</span>
                  <span class="crayon-e">status</span>
                  <span class="crayon-sy">(</span>
                  <span class="crayon-cn">401</span>
                  <span class="crayon-sy">)</span>
                  <span class="crayon-sy">.</span>
                  <span class="crayon-e">send</span>
                  <span class="crayon-sy">(</span>
                  <span class="crayon-sy">{</span>
                  <span class="crayon-v">message</span>
                  <span class="crayon-o">:</span>
                  <span class="crayon-h"> </span>
                  <span class="crayon-s">'Authentication failed'</span>
                  <span class="crayon-sy">}</span>
                  <span class="crayon-sy">)</span>
                  <span class="crayon-sy">;</span>
                 </div>
                 <div class="crayon-line crayon-marked-line crayon-striped-line" id="crayon-59d380ad468de939822909-22">
                  <span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span>
                  <span class="crayon-sy">}</span>
                 </div>
                 <div class="crayon-line crayon-marked-line" id="crayon-59d380ad468de939822909-23">
                  &nbsp;
                 </div>
                 <div class="crayon-line crayon-marked-line crayon-striped-line" id="crayon-59d380ad468de939822909-24">
                  <span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span>
                  <span class="crayon-st">return</span>
                  <span class="crayon-sy">;</span>
                 </div>
                 <div class="crayon-line crayon-marked-line crayon-bottom" id="crayon-59d380ad468de939822909-25">
                  <span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;</span>
                  <span class="crayon-sy">}</span>
                 </div>
                 <div class="crayon-line crayon-striped-line" id="crayon-59d380ad468de939822909-26">
                  &nbsp;
                 </div>
                 <div class="crayon-line" id="crayon-59d380ad468de939822909-27">
                  <span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;</span>
                  <span class="crayon-v">oracledb</span>
                  <span class="crayon-sy">.</span>
                  <span class="crayon-e">getConnection</span>
                  <span class="crayon-sy">(</span>
                 </div>
                 <div class="crayon-line crayon-striped-line" id="crayon-59d380ad468de939822909-28">
                  <span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span>
                  <span class="crayon-v">config</span>
                  <span class="crayon-sy">.</span>
                  <span class="crayon-v">database</span>
                  <span class="crayon-sy">,</span>
                 </div>
                 <div class="crayon-line" id="crayon-59d380ad468de939822909-29">
                  <span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span>
                  <span class="crayon-t">function</span>
                  <span class="crayon-sy">(</span>
                  <span class="crayon-v">err</span>
                  <span class="crayon-sy">,</span>
                  <span class="crayon-h"> </span>
                  <span class="crayon-v">connection</span>
                  <span class="crayon-sy">)</span>
                  <span class="crayon-sy">{</span>
                 </div>
                 <div class="crayon-line crayon-striped-line" id="crayon-59d380ad468de939822909-30">
                  <span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span>
                  <span class="crayon-st">if</span>
                  <span class="crayon-h"> </span>
                  <span class="crayon-sy">(</span>
                  <span class="crayon-v">err</span>
                  <span class="crayon-sy">)</span>
                  <span class="crayon-h"> </span>
                  <span class="crayon-sy">{</span>
                 </div>
                 <div class="crayon-line" id="crayon-59d380ad468de939822909-31">
                  <span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span>
                  <span class="crayon-st">return</span>
                  <span class="crayon-h"> </span>
                  <span class="crayon-e">next</span>
                  <span class="crayon-sy">(</span>
                  <span class="crayon-v">err</span>
                  <span class="crayon-sy">)</span>
                  <span class="crayon-sy">;</span>
                 </div>
                 <div class="crayon-line crayon-striped-line" id="crayon-59d380ad468de939822909-32">
                  <span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span>
                  <span class="crayon-sy">}</span>
                 </div>
                 <div class="crayon-line" id="crayon-59d380ad468de939822909-33">
                  &nbsp;
                 </div>
                 <div class="crayon-line crayon-striped-line" id="crayon-59d380ad468de939822909-34">
                  <span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span>
                  <span class="crayon-v">connection</span>
                  <span class="crayon-sy">.</span>
                  <span class="crayon-e">execute</span>
                  <span class="crayon-sy">(</span>
                 </div>
                 <div class="crayon-line" id="crayon-59d380ad468de939822909-35">
                  <span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span>
                  <span class="crayon-s">'select column1 as "column1" '</span>
                  <span class="crayon-h"> </span>
                  <span class="crayon-o">+</span>
                 </div>
                 <div class="crayon-line crayon-marked-line crayon-top crayon-bottom crayon-striped-line" id="crayon-59d380ad468de939822909-36">
                  <span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span>
                  <span class="crayon-s">'from jsao_protected_things '</span>
                  <span class="crayon-sy">,</span>
                 </div>
                 <div class="crayon-line" id="crayon-59d380ad468de939822909-37">
                  <span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span>
                  <span class="crayon-sy">{</span>
                  <span class="crayon-sy">}</span>
                  <span class="crayon-sy">,</span>
                  <span class="crayon-c">//no binds</span>
                 </div>
                 <div class="crayon-line crayon-striped-line" id="crayon-59d380ad468de939822909-38">
                  <span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span>
                  <span class="crayon-sy">{</span>
                 </div>
                 <div class="crayon-line" id="crayon-59d380ad468de939822909-39">
                  <span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span>
                  <span class="crayon-v">outFormat</span>
                  <span class="crayon-o">:</span>
                  <span class="crayon-h"> </span>
                  <span class="crayon-v">oracledb</span>
                  <span class="crayon-sy">.</span>
                  <span class="crayon-t">OBJECT</span>
                 </div>
                 <div class="crayon-line crayon-striped-line" id="crayon-59d380ad468de939822909-40">
                  <span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span>
                  <span class="crayon-sy">}</span>
                  <span class="crayon-sy">,</span>
                 </div>
                 <div class="crayon-line" id="crayon-59d380ad468de939822909-41">
                  <span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span>
                  <span class="crayon-t">function</span>
                  <span class="crayon-sy">(</span>
                  <span class="crayon-v">err</span>
                  <span class="crayon-sy">,</span>
                  <span class="crayon-h"> </span>
                  <span class="crayon-v">results</span>
                  <span class="crayon-sy">)</span>
                  <span class="crayon-sy">{</span>
                 </div>
                 <div class="crayon-line crayon-striped-line" id="crayon-59d380ad468de939822909-42">
                  <span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span>
                  <span class="crayon-st">if</span>
                  <span class="crayon-h"> </span>
                  <span class="crayon-sy">(</span>
                  <span class="crayon-v">err</span>
                  <span class="crayon-sy">)</span>
                  <span class="crayon-h"> </span>
                  <span class="crayon-sy">{</span>
                 </div>
                 <div class="crayon-line" id="crayon-59d380ad468de939822909-43">
                  <span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span>
                  <span class="crayon-v">connection</span>
                  <span class="crayon-sy">.</span>
                  <span class="crayon-e">release</span>
                  <span class="crayon-sy">(</span>
                  <span class="crayon-t">function</span>
                  <span class="crayon-sy">(</span>
                  <span class="crayon-v">err</span>
                  <span class="crayon-sy">)</span>
                  <span class="crayon-h"> </span>
                  <span class="crayon-sy">{</span>
                 </div>
                 <div class="crayon-line crayon-striped-line" id="crayon-59d380ad468de939822909-44">
                  <span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span>
                  <span class="crayon-st">if</span>
                  <span class="crayon-h"> </span>
                  <span class="crayon-sy">(</span>
                  <span class="crayon-v">err</span>
                  <span class="crayon-sy">)</span>
                  <span class="crayon-h"> </span>
                  <span class="crayon-sy">{</span>
                 </div>
                 <div class="crayon-line" id="crayon-59d380ad468de939822909-45">
                  <span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span>
                  <span class="crayon-v">console</span>
                  <span class="crayon-sy">.</span>
                  <span class="crayon-e">error</span>
                  <span class="crayon-sy">(</span>
                  <span class="crayon-v">err</span>
                  <span class="crayon-sy">.</span>
                  <span class="crayon-v">message</span>
                  <span class="crayon-sy">)</span>
                  <span class="crayon-sy">;</span>
                 </div>
                 <div class="crayon-line crayon-striped-line" id="crayon-59d380ad468de939822909-46">
                  <span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span>
                  <span class="crayon-sy">}</span>
                 </div>
                 <div class="crayon-line" id="crayon-59d380ad468de939822909-47">
                  <span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span>
                  <span class="crayon-sy">}</span>
                  <span class="crayon-sy">)</span>
                  <span class="crayon-sy">;</span>
                 </div>
                 <div class="crayon-line crayon-striped-line" id="crayon-59d380ad468de939822909-48">
                  &nbsp;
                 </div>
                 <div class="crayon-line" id="crayon-59d380ad468de939822909-49">
                  <span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span>
                  <span class="crayon-st">return</span>
                  <span class="crayon-h"> </span>
                  <span class="crayon-e">next</span>
                  <span class="crayon-sy">(</span>
                  <span class="crayon-v">err</span>
                  <span class="crayon-sy">)</span>
                  <span class="crayon-sy">;</span>
                 </div>
                 <div class="crayon-line crayon-striped-line" id="crayon-59d380ad468de939822909-50">
                  <span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span>
                  <span class="crayon-sy">}</span>
                 </div>
                 <div class="crayon-line" id="crayon-59d380ad468de939822909-51">
                  &nbsp;
                 </div>
                 <div class="crayon-line crayon-striped-line" id="crayon-59d380ad468de939822909-52">
                  <span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span>
                  <span class="crayon-v">res</span>
                  <span class="crayon-sy">.</span>
                  <span class="crayon-e">status</span>
                  <span class="crayon-sy">(</span>
                  <span class="crayon-cn">200</span>
                  <span class="crayon-sy">)</span>
                  <span class="crayon-sy">.</span>
                  <span class="crayon-e">json</span>
                  <span class="crayon-sy">(</span>
                  <span class="crayon-v">results</span>
                  <span class="crayon-sy">.</span>
                  <span class="crayon-v">rows</span>
                  <span class="crayon-sy">)</span>
                  <span class="crayon-sy">;</span>
                 </div>
                 <div class="crayon-line" id="crayon-59d380ad468de939822909-53">
                  &nbsp;
                 </div>
                 <div class="crayon-line crayon-striped-line" id="crayon-59d380ad468de939822909-54">
                  <span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span>
                  <span class="crayon-v">connection</span>
                  <span class="crayon-sy">.</span>
                  <span class="crayon-e">release</span>
                  <span class="crayon-sy">(</span>
                  <span class="crayon-t">function</span>
                  <span class="crayon-sy">(</span>
                  <span class="crayon-v">err</span>
                  <span class="crayon-sy">)</span>
                  <span class="crayon-h"> </span>
                  <span class="crayon-sy">{</span>
                 </div>
                 <div class="crayon-line" id="crayon-59d380ad468de939822909-55">
                  <span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span>
                  <span class="crayon-st">if</span>
                  <span class="crayon-h"> </span>
                  <span class="crayon-sy">(</span>
                  <span class="crayon-v">err</span>
                  <span class="crayon-sy">)</span>
                  <span class="crayon-h"> </span>
                  <span class="crayon-sy">{</span>
                 </div>
                 <div class="crayon-line crayon-striped-line" id="crayon-59d380ad468de939822909-56">
                  <span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span>
                  <span class="crayon-v">console</span>
                  <span class="crayon-sy">.</span>
                  <span class="crayon-e">error</span>
                  <span class="crayon-sy">(</span>
                  <span class="crayon-v">err</span>
                  <span class="crayon-sy">.</span>
                  <span class="crayon-v">message</span>
                  <span class="crayon-sy">)</span>
                  <span class="crayon-sy">;</span>
                 </div>
                 <div class="crayon-line" id="crayon-59d380ad468de939822909-57">
                  <span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span>
                  <span class="crayon-sy">}</span>
                 </div>
                 <div class="crayon-line crayon-striped-line" id="crayon-59d380ad468de939822909-58">
                  <span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span>
                  <span class="crayon-sy">}</span>
                  <span class="crayon-sy">)</span>
                  <span class="crayon-sy">;</span>
                 </div>
                 <div class="crayon-line" id="crayon-59d380ad468de939822909-59">
                  <span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span>
                  <span class="crayon-sy">}</span>
                 </div>
                 <div class="crayon-line crayon-striped-line" id="crayon-59d380ad468de939822909-60">
                  <span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span>
                  <span class="crayon-sy">)</span>
                  <span class="crayon-sy">;</span>
                 </div>
                 <div class="crayon-line" id="crayon-59d380ad468de939822909-61">
                  <span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span>
                  <span class="crayon-sy">}</span>
                 </div>
                 <div class="crayon-line crayon-striped-line" id="crayon-59d380ad468de939822909-62">
                  <span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;</span>
                  <span class="crayon-sy">)</span>
                  <span class="crayon-sy">;</span>
                 </div>
                 <div class="crayon-line" id="crayon-59d380ad468de939822909-63">
                  <span class="crayon-sy">}</span>
                 </div>
                 <div class="crayon-line crayon-striped-line" id="crayon-59d380ad468de939822909-64">
                  &nbsp;
                 </div>
                 <div class="crayon-line" id="crayon-59d380ad468de939822909-65">
                  <span class="crayon-v">module</span>
                  <span class="crayon-sy">.</span>
                  <span class="crayon-v">exports</span>
                  <span class="crayon-sy">.</span>
                  <span class="crayon-v">get</span>
                  <span class="crayon-h"> </span>
                  <span class="crayon-o">=</span>
                  <span class="crayon-h"> </span>
                  <span class="crayon-v">get</span>
                  <span class="crayon-sy">;</span>
                 </div>
                </div></td> 
              </tr> 
             </tbody>
            </table> 
           </div> 
          </div> 
          <!-- [Format Time: 0.0066 seconds] --> 
          <p><span class="inline-code">protectedThings.js</span> is different from <span class="inline-code">publicThings.js</span> in two ways. Of course it fetches data from a different table, but in addition, it uses the <span class="inline-code">jsonwebtoken</span> module to ensure that the request has a valid JWT. </p> 
          <p>With the <span class="inline-code">protectedThings.js</span> in place we just need to update <span class="inline-code">server.js</span> to map the new route through.</p> 
          <!-- Crayon Syntax Highlighter v_2.7.2_beta --> 
          <div id="crayon-59d380ad468e6476072459" class="crayon-syntax crayon-theme-classic crayon-font-monaco crayon-os-pc print-yes notranslate" data-settings=" no-popup minimize scroll-mouseover" style=" margin-top: 12px; margin-bottom: 12px; font-size: 12px !important; line-height: 15px !important;"> 
           <div class="crayon-toolbar" data-settings=" show" style="font-size: 12px !important;height: 18px !important; line-height: 18px !important;">
            <span class="crayon-title">auth-api/server.js</span> 
            <div class="crayon-tools" style="font-size: 12px !important;height: 18px !important; line-height: 18px !important;">
             <div class="crayon-button crayon-copy-button" title="Copy">
              <div class="crayon-button-icon"></div>
             </div>
             <span class="crayon-language">JavaScript</span>
            </div>
           </div> 
           <div class="crayon-info" style="min-height: 16.8px !important; line-height: 16.8px !important;"></div> 
           <div class="crayon-plain-wrap">
            <textarea wrap="soft" class="crayon-plain print-no" data-settings="dblclick" readonly style="-moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4; font-size: 12px !important; line-height: 15px !important;">
var express = require('express');
var morgan = require('morgan');
var bodyParser = require('body-parser');
var publicThings = require(__dirname + '/routes/publicThings.js');
var protectedThings = require(__dirname + '/routes/protectedThings.js');
var app;
var router;
var port = 3000;

app = express();

app.use(morgan('combined')); //logger
app.use(bodyParser.json());

router = express.Router();

router.get('/public_things', publicThings.get);
router.get('/protected_things', protectedThings.get);

app.use('/api', router);

app.listen(port, function() {
    console.log('Web server listening on localhost:' + port);
});</textarea>
           </div> 
           <div class="crayon-main" style=""> 
            <table class="crayon-table"> 
             <tbody>
              <tr class="crayon-row"> 
               <td class="crayon-nums " data-settings="show"> 
                <div class="crayon-nums-content" style="font-size: 12px !important; line-height: 15px !important;">
                 <div class="crayon-num" data-line="crayon-59d380ad468e6476072459-1">
                  1
                 </div>
                 <div class="crayon-num crayon-striped-num" data-line="crayon-59d380ad468e6476072459-2">
                  2
                 </div>
                 <div class="crayon-num" data-line="crayon-59d380ad468e6476072459-3">
                  3
                 </div>
                 <div class="crayon-num crayon-striped-num" data-line="crayon-59d380ad468e6476072459-4">
                  4
                 </div>
                 <div class="crayon-num crayon-marked-num crayon-top crayon-bottom" data-line="crayon-59d380ad468e6476072459-5">
                  5
                 </div>
                 <div class="crayon-num crayon-striped-num" data-line="crayon-59d380ad468e6476072459-6">
                  6
                 </div>
                 <div class="crayon-num" data-line="crayon-59d380ad468e6476072459-7">
                  7
                 </div>
                 <div class="crayon-num crayon-striped-num" data-line="crayon-59d380ad468e6476072459-8">
                  8
                 </div>
                 <div class="crayon-num" data-line="crayon-59d380ad468e6476072459-9">
                  9
                 </div>
                 <div class="crayon-num crayon-striped-num" data-line="crayon-59d380ad468e6476072459-10">
                  10
                 </div>
                 <div class="crayon-num" data-line="crayon-59d380ad468e6476072459-11">
                  11
                 </div>
                 <div class="crayon-num crayon-striped-num" data-line="crayon-59d380ad468e6476072459-12">
                  12
                 </div>
                 <div class="crayon-num" data-line="crayon-59d380ad468e6476072459-13">
                  13
                 </div>
                 <div class="crayon-num crayon-striped-num" data-line="crayon-59d380ad468e6476072459-14">
                  14
                 </div>
                 <div class="crayon-num" data-line="crayon-59d380ad468e6476072459-15">
                  15
                 </div>
                 <div class="crayon-num crayon-striped-num" data-line="crayon-59d380ad468e6476072459-16">
                  16
                 </div>
                 <div class="crayon-num" data-line="crayon-59d380ad468e6476072459-17">
                  17
                 </div>
                 <div class="crayon-num crayon-marked-num crayon-top crayon-bottom crayon-striped-num" data-line="crayon-59d380ad468e6476072459-18">
                  18
                 </div>
                 <div class="crayon-num" data-line="crayon-59d380ad468e6476072459-19">
                  19
                 </div>
                 <div class="crayon-num crayon-striped-num" data-line="crayon-59d380ad468e6476072459-20">
                  20
                 </div>
                 <div class="crayon-num" data-line="crayon-59d380ad468e6476072459-21">
                  21
                 </div>
                 <div class="crayon-num crayon-striped-num" data-line="crayon-59d380ad468e6476072459-22">
                  22
                 </div>
                 <div class="crayon-num" data-line="crayon-59d380ad468e6476072459-23">
                  23
                 </div>
                 <div class="crayon-num crayon-striped-num" data-line="crayon-59d380ad468e6476072459-24">
                  24
                 </div>
                </div> </td> 
               <td class="crayon-code">
                <div class="crayon-pre" style="font-size: 12px !important; line-height: 15px !important; -moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4;">
                 <div class="crayon-line" id="crayon-59d380ad468e6476072459-1">
                  <span class="crayon-t">var</span>
                  <span class="crayon-h"> </span>
                  <span class="crayon-v">express</span>
                  <span class="crayon-h"> </span>
                  <span class="crayon-o">=</span>
                  <span class="crayon-h"> </span>
                  <span class="crayon-e">require</span>
                  <span class="crayon-sy">(</span>
                  <span class="crayon-s">'express'</span>
                  <span class="crayon-sy">)</span>
                  <span class="crayon-sy">;</span>
                 </div>
                 <div class="crayon-line crayon-striped-line" id="crayon-59d380ad468e6476072459-2">
                  <span class="crayon-t">var</span>
                  <span class="crayon-h"> </span>
                  <span class="crayon-v">morgan</span>
                  <span class="crayon-h"> </span>
                  <span class="crayon-o">=</span>
                  <span class="crayon-h"> </span>
                  <span class="crayon-e">require</span>
                  <span class="crayon-sy">(</span>
                  <span class="crayon-s">'morgan'</span>
                  <span class="crayon-sy">)</span>
                  <span class="crayon-sy">;</span>
                 </div>
                 <div class="crayon-line" id="crayon-59d380ad468e6476072459-3">
                  <span class="crayon-t">var</span>
                  <span class="crayon-h"> </span>
                  <span class="crayon-v">bodyParser</span>
                  <span class="crayon-h"> </span>
                  <span class="crayon-o">=</span>
                  <span class="crayon-h"> </span>
                  <span class="crayon-e">require</span>
                  <span class="crayon-sy">(</span>
                  <span class="crayon-s">'body-parser'</span>
                  <span class="crayon-sy">)</span>
                  <span class="crayon-sy">;</span>
                 </div>
                 <div class="crayon-line crayon-striped-line" id="crayon-59d380ad468e6476072459-4">
                  <span class="crayon-t">var</span>
                  <span class="crayon-h"> </span>
                  <span class="crayon-v">publicThings</span>
                  <span class="crayon-h"> </span>
                  <span class="crayon-o">=</span>
                  <span class="crayon-h"> </span>
                  <span class="crayon-e">require</span>
                  <span class="crayon-sy">(</span>
                  <span class="crayon-v">__dirname</span>
                  <span class="crayon-h"> </span>
                  <span class="crayon-o">+</span>
                  <span class="crayon-h"> </span>
                  <span class="crayon-s">'/routes/publicThings.js'</span>
                  <span class="crayon-sy">)</span>
                  <span class="crayon-sy">;</span>
                 </div>
                 <div class="crayon-line crayon-marked-line crayon-top crayon-bottom" id="crayon-59d380ad468e6476072459-5">
                  <span class="crayon-t">var</span>
                  <span class="crayon-h"> </span>
                  <span class="crayon-v">protectedThings</span>
                  <span class="crayon-h"> </span>
                  <span class="crayon-o">=</span>
                  <span class="crayon-h"> </span>
                  <span class="crayon-e">require</span>
                  <span class="crayon-sy">(</span>
                  <span class="crayon-v">__dirname</span>
                  <span class="crayon-h"> </span>
                  <span class="crayon-o">+</span>
                  <span class="crayon-h"> </span>
                  <span class="crayon-s">'/routes/protectedThings.js'</span>
                  <span class="crayon-sy">)</span>
                  <span class="crayon-sy">;</span>
                 </div>
                 <div class="crayon-line crayon-striped-line" id="crayon-59d380ad468e6476072459-6">
                  <span class="crayon-t">var</span>
                  <span class="crayon-h"> </span>
                  <span class="crayon-v">app</span>
                  <span class="crayon-sy">;</span>
                 </div>
                 <div class="crayon-line" id="crayon-59d380ad468e6476072459-7">
                  <span class="crayon-t">var</span>
                  <span class="crayon-h"> </span>
                  <span class="crayon-v">router</span>
                  <span class="crayon-sy">;</span>
                 </div>
                 <div class="crayon-line crayon-striped-line" id="crayon-59d380ad468e6476072459-8">
                  <span class="crayon-t">var</span>
                  <span class="crayon-h"> </span>
                  <span class="crayon-v">port</span>
                  <span class="crayon-h"> </span>
                  <span class="crayon-o">=</span>
                  <span class="crayon-h"> </span>
                  <span class="crayon-cn">3000</span>
                  <span class="crayon-sy">;</span>
                 </div>
                 <div class="crayon-line" id="crayon-59d380ad468e6476072459-9">
                  &nbsp;
                 </div>
                 <div class="crayon-line crayon-striped-line" id="crayon-59d380ad468e6476072459-10">
                  <span class="crayon-v">app</span>
                  <span class="crayon-h"> </span>
                  <span class="crayon-o">=</span>
                  <span class="crayon-h"> </span>
                  <span class="crayon-e">express</span>
                  <span class="crayon-sy">(</span>
                  <span class="crayon-sy">)</span>
                  <span class="crayon-sy">;</span>
                 </div>
                 <div class="crayon-line" id="crayon-59d380ad468e6476072459-11">
                  &nbsp;
                 </div>
                 <div class="crayon-line crayon-striped-line" id="crayon-59d380ad468e6476072459-12">
                  <span class="crayon-v">app</span>
                  <span class="crayon-sy">.</span>
                  <span class="crayon-st">use</span>
                  <span class="crayon-sy">(</span>
                  <span class="crayon-e">morgan</span>
                  <span class="crayon-sy">(</span>
                  <span class="crayon-s">'combined'</span>
                  <span class="crayon-sy">)</span>
                  <span class="crayon-sy">)</span>
                  <span class="crayon-sy">;</span>
                  <span class="crayon-h"> </span>
                  <span class="crayon-c">//logger</span>
                 </div>
                 <div class="crayon-line" id="crayon-59d380ad468e6476072459-13">
                  <span class="crayon-v">app</span>
                  <span class="crayon-sy">.</span>
                  <span class="crayon-st">use</span>
                  <span class="crayon-sy">(</span>
                  <span class="crayon-v">bodyParser</span>
                  <span class="crayon-sy">.</span>
                  <span class="crayon-e">json</span>
                  <span class="crayon-sy">(</span>
                  <span class="crayon-sy">)</span>
                  <span class="crayon-sy">)</span>
                  <span class="crayon-sy">;</span>
                 </div>
                 <div class="crayon-line crayon-striped-line" id="crayon-59d380ad468e6476072459-14">
                  &nbsp;
                 </div>
                 <div class="crayon-line" id="crayon-59d380ad468e6476072459-15">
                  <span class="crayon-v">router</span>
                  <span class="crayon-h"> </span>
                  <span class="crayon-o">=</span>
                  <span class="crayon-h"> </span>
                  <span class="crayon-v">express</span>
                  <span class="crayon-sy">.</span>
                  <span class="crayon-e">Router</span>
                  <span class="crayon-sy">(</span>
                  <span class="crayon-sy">)</span>
                  <span class="crayon-sy">;</span>
                 </div>
                 <div class="crayon-line crayon-striped-line" id="crayon-59d380ad468e6476072459-16">
                  &nbsp;
                 </div>
                 <div class="crayon-line" id="crayon-59d380ad468e6476072459-17">
                  <span class="crayon-v">router</span>
                  <span class="crayon-sy">.</span>
                  <span class="crayon-e">get</span>
                  <span class="crayon-sy">(</span>
                  <span class="crayon-s">'/public_things'</span>
                  <span class="crayon-sy">,</span>
                  <span class="crayon-h"> </span>
                  <span class="crayon-v">publicThings</span>
                  <span class="crayon-sy">.</span>
                  <span class="crayon-v">get</span>
                  <span class="crayon-sy">)</span>
                  <span class="crayon-sy">;</span>
                 </div>
                 <div class="crayon-line crayon-marked-line crayon-top crayon-bottom crayon-striped-line" id="crayon-59d380ad468e6476072459-18">
                  <span class="crayon-v">router</span>
                  <span class="crayon-sy">.</span>
                  <span class="crayon-e">get</span>
                  <span class="crayon-sy">(</span>
                  <span class="crayon-s">'/protected_things'</span>
                  <span class="crayon-sy">,</span>
                  <span class="crayon-h"> </span>
                  <span class="crayon-v">protectedThings</span>
                  <span class="crayon-sy">.</span>
                  <span class="crayon-v">get</span>
                  <span class="crayon-sy">)</span>
                  <span class="crayon-sy">;</span>
                 </div>
                 <div class="crayon-line" id="crayon-59d380ad468e6476072459-19">
                  &nbsp;
                 </div>
                 <div class="crayon-line crayon-striped-line" id="crayon-59d380ad468e6476072459-20">
                  <span class="crayon-v">app</span>
                  <span class="crayon-sy">.</span>
                  <span class="crayon-st">use</span>
                  <span class="crayon-sy">(</span>
                  <span class="crayon-s">'/api'</span>
                  <span class="crayon-sy">,</span>
                  <span class="crayon-h"> </span>
                  <span class="crayon-v">router</span>
                  <span class="crayon-sy">)</span>
                  <span class="crayon-sy">;</span>
                 </div>
                 <div class="crayon-line" id="crayon-59d380ad468e6476072459-21">
                  &nbsp;
                 </div>
                 <div class="crayon-line crayon-striped-line" id="crayon-59d380ad468e6476072459-22">
                  <span class="crayon-v">app</span>
                  <span class="crayon-sy">.</span>
                  <span class="crayon-e">listen</span>
                  <span class="crayon-sy">(</span>
                  <span class="crayon-v">port</span>
                  <span class="crayon-sy">,</span>
                  <span class="crayon-h"> </span>
                  <span class="crayon-t">function</span>
                  <span class="crayon-sy">(</span>
                  <span class="crayon-sy">)</span>
                  <span class="crayon-h"> </span>
                  <span class="crayon-sy">{</span>
                 </div>
                 <div class="crayon-line" id="crayon-59d380ad468e6476072459-23">
                  <span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;</span>
                  <span class="crayon-v">console</span>
                  <span class="crayon-sy">.</span>
                  <span class="crayon-e">log</span>
                  <span class="crayon-sy">(</span>
                  <span class="crayon-s">'Web server listening on localhost:'</span>
                  <span class="crayon-h"> </span>
                  <span class="crayon-o">+</span>
                  <span class="crayon-h"> </span>
                  <span class="crayon-v">port</span>
                  <span class="crayon-sy">)</span>
                  <span class="crayon-sy">;</span>
                 </div>
                 <div class="crayon-line crayon-striped-line" id="crayon-59d380ad468e6476072459-24">
                  <span class="crayon-sy">}</span>
                  <span class="crayon-sy">)</span>
                  <span class="crayon-sy">;</span>
                 </div>
                </div></td> 
              </tr> 
             </tbody>
            </table> 
           </div> 
          </div> 
          <!-- [Format Time: 0.0031 seconds] --> 
          <p>Restart your server and try calling this route like we did the last…</p> 
          <p><a href="https://jsao.io/wp-content/uploads/2015/06/auth-api-test-3.png" rel="prettyPhoto[gallery-WMde]"><img src="https://jsao.io/wp-content/uploads/2015/06/auth-api-test-3.png" alt="auth-api test 3" width="1824" height="708" class="alignnone size-full wp-image-438" srcset="https://jsao.io/wp-content/uploads/2015/06/auth-api-test-3.png 1824w, https://jsao.io/wp-content/uploads/2015/06/auth-api-test-3-300x116.png 300w, https://jsao.io/wp-content/uploads/2015/06/auth-api-test-3-1024x397.png 1024w" sizes="(max-width: 1824px) 100vw, 1824px"></a></p> 
          <p>Ouch, that hurts! ? But at least we know our data is safe… You can try sending fake authorization headers through – they should fail.</p> 
          <h4>Creating Users</h4> 
          <p>This tutorial is about authentication, but before we can authenticate users we have to create some. Add the following <span class="inline-code">users.js</span> file in our <span class="inline-code">routes</span> directory.</p> 
          <!-- Crayon Syntax Highlighter v_2.7.2_beta --> 
          <div id="crayon-59d380ad468ed175324424" class="crayon-syntax crayon-theme-classic crayon-font-monaco crayon-os-pc print-yes notranslate" data-settings=" no-popup minimize scroll-mouseover" style=" margin-top: 12px; margin-bottom: 12px; font-size: 12px !important; line-height: 15px !important;"> 
           <div class="crayon-toolbar" data-settings=" show" style="font-size: 12px !important;height: 18px !important; line-height: 18px !important;">
            <span class="crayon-title">auth-api/routes/users.js</span> 
            <div class="crayon-tools" style="font-size: 12px !important;height: 18px !important; line-height: 18px !important;">
             <div class="crayon-button crayon-copy-button" title="Copy">
              <div class="crayon-button-icon"></div>
             </div>
             <span class="crayon-language">JavaScript</span>
            </div>
           </div> 
           <div class="crayon-info" style="min-height: 16.8px !important; line-height: 16.8px !important;"></div> 
           <div class="crayon-plain-wrap">
            <textarea wrap="soft" class="crayon-plain print-no" data-settings="dblclick" readonly style="-moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4; font-size: 12px !important; line-height: 15px !important;">
var oracledb = require('oracledb');
var bcrypt = require('bcrypt');
var jwt = require('jsonwebtoken');
var config = require(__dirname + '../../config.js');

function post(req, res, next) {
    var user = {
        email: req.body.email
    };
    var unhashedPassword = req.body.password;

    bcrypt.genSalt(10, function(err, salt) {
        if (err) {
            return next(err);
        }

        bcrypt.hash(unhashedPassword, salt, function(err, hash) {
            if (err) {
                return next(err);
            }

            user.hashedPassword = hash;

            insertUser(user, function(err, user) {
                var payload;

                if (err) {
                    return next(err);
                }

                payload = {
                    sub: user.email,
                    role: user.role
                };

                res.status(200).json({
                    user: user,
                    token: jwt.sign(payload, config.jwtSecretKey, {expiresInMinutes: 60})
                });
            });
        });
    });
}

module.exports.post = post;

function insertUser(user, cb) {
    oracledb.getConnection(
        config.database,
        function(err, connection){
            if (err) {
                return cb(err);
            }

            connection.execute(
                'insert into jsao_users ( ' +
                '   email, ' +
                '   password, ' +
                '   role ' +
                ') ' +
                'values (' +
                '    :email, ' +
                '    :password, ' +
                '    \'BASE\' ' +
                ') ' +
                'returning ' +
                '   id, ' +
                '   email, ' +
                '   role ' +
                'into ' +
                '   :rid, ' +
                '   :remail, ' +
                '   :rrole',
                {
                    email: user.email.toLowerCase(),
                    password: user.hashedPassword,
                    rid: {
                        type: oracledb.NUMBER,
                        dir: oracledb.BIND_OUT
                    },
                    remail: {
                        type: oracledb.STRING,
                        dir: oracledb.BIND_OUT
                    },
                    rrole: {
                        type: oracledb.STRING,
                        dir: oracledb.BIND_OUT
                    }

                },
                {
                    autoCommit: true
                },
                function(err, results){
                    if (err) {
                        connection.release(function(err) {
                            if (err) {
                                console.error(err.message);
                            }
                        });

                        return cb(err);
                    }

                    cb(null, {
                        id: results.outBinds.rid[0],
                        email: results.outBinds.remail[0],
                        role: results.outBinds.rrole[0]
                    });

                    connection.release(function(err) {
                        if (err) {
                            console.error(err.message);
                        }
                    });
                });
        }
    );
}</textarea>
           </div> 
           <div class="crayon-main" style=""> 
            <table class="crayon-table"> 
             <tbody>
              <tr class="crayon-row"> 
               <td class="crayon-nums " data-settings="show"> 
                <div class="crayon-nums-content" style="font-size: 12px !important; line-height: 15px !important;">
                 <div class="crayon-num" data-line="crayon-59d380ad468ed175324424-1">
                  1
                 </div>
                 <div class="crayon-num crayon-marked-num crayon-top crayon-striped-num" data-line="crayon-59d380ad468ed175324424-2">
                  2
                 </div>
                 <div class="crayon-num crayon-marked-num crayon-bottom" data-line="crayon-59d380ad468ed175324424-3">
                  3
                 </div>
                 <div class="crayon-num crayon-striped-num" data-line="crayon-59d380ad468ed175324424-4">
                  4
                 </div>
                 <div class="crayon-num" data-line="crayon-59d380ad468ed175324424-5">
                  5
                 </div>
                 <div class="crayon-num crayon-striped-num" data-line="crayon-59d380ad468ed175324424-6">
                  6
                 </div>
                 <div class="crayon-num" data-line="crayon-59d380ad468ed175324424-7">
                  7
                 </div>
                 <div class="crayon-num crayon-striped-num" data-line="crayon-59d380ad468ed175324424-8">
                  8
                 </div>
                 <div class="crayon-num" data-line="crayon-59d380ad468ed175324424-9">
                  9
                 </div>
                 <div class="crayon-num crayon-striped-num" data-line="crayon-59d380ad468ed175324424-10">
                  10
                 </div>
                 <div class="crayon-num" data-line="crayon-59d380ad468ed175324424-11">
                  11
                 </div>
                 <div class="crayon-num crayon-marked-num crayon-top crayon-bottom crayon-striped-num" data-line="crayon-59d380ad468ed175324424-12">
                  12
                 </div>
                 <div class="crayon-num" data-line="crayon-59d380ad468ed175324424-13">
                  13
                 </div>
                 <div class="crayon-num crayon-striped-num" data-line="crayon-59d380ad468ed175324424-14">
                  14
                 </div>
                 <div class="crayon-num" data-line="crayon-59d380ad468ed175324424-15">
                  15
                 </div>
                 <div class="crayon-num crayon-striped-num" data-line="crayon-59d380ad468ed175324424-16">
                  16
                 </div>
                 <div class="crayon-num crayon-marked-num crayon-top crayon-bottom" data-line="crayon-59d380ad468ed175324424-17">
                  17
                 </div>
                 <div class="crayon-num crayon-striped-num" data-line="crayon-59d380ad468ed175324424-18">
                  18
                 </div>
                 <div class="crayon-num" data-line="crayon-59d380ad468ed175324424-19">
                  19
                 </div>
                 <div class="crayon-num crayon-striped-num" data-line="crayon-59d380ad468ed175324424-20">
                  20
                 </div>
                 <div class="crayon-num" data-line="crayon-59d380ad468ed175324424-21">
                  21
                 </div>
                 <div class="crayon-num crayon-striped-num" data-line="crayon-59d380ad468ed175324424-22">
                  22
                 </div>
                 <div class="crayon-num" data-line="crayon-59d380ad468ed175324424-23">
                  23
                 </div>
                 <div class="crayon-num crayon-striped-num" data-line="crayon-59d380ad468ed175324424-24">
                  24
                 </div>
                 <div class="crayon-num" data-line="crayon-59d380ad468ed175324424-25">
                  25
                 </div>
                 <div class="crayon-num crayon-striped-num" data-line="crayon-59d380ad468ed175324424-26">
                  26
                 </div>
                 <div class="crayon-num" data-line="crayon-59d380ad468ed175324424-27">
                  27
                 </div>
                 <div class="crayon-num crayon-striped-num" data-line="crayon-59d380ad468ed175324424-28">
                  28
                 </div>
                 <div class="crayon-num" data-line="crayon-59d380ad468ed175324424-29">
                  29
                 </div>
                 <div class="crayon-num crayon-striped-num" data-line="crayon-59d380ad468ed175324424-30">
                  30
                 </div>
                 <div class="crayon-num" data-line="crayon-59d380ad468ed175324424-31">
                  31
                 </div>
                 <div class="crayon-num crayon-striped-num" data-line="crayon-59d380ad468ed175324424-32">
                  32
                 </div>
                 <div class="crayon-num" data-line="crayon-59d380ad468ed175324424-33">
                  33
                 </div>
                 <div class="crayon-num crayon-striped-num" data-line="crayon-59d380ad468ed175324424-34">
                  34
                 </div>
                 <div class="crayon-num" data-line="crayon-59d380ad468ed175324424-35">
                  35
                 </div>
                 <div class="crayon-num crayon-striped-num" data-line="crayon-59d380ad468ed175324424-36">
                  36
                 </div>
                 <div class="crayon-num" data-line="crayon-59d380ad468ed175324424-37">
                  37
                 </div>
                 <div class="crayon-num crayon-marked-num crayon-top crayon-bottom crayon-striped-num" data-line="crayon-59d380ad468ed175324424-38">
                  38
                 </div>
                 <div class="crayon-num" data-line="crayon-59d380ad468ed175324424-39">
                  39
                 </div>
                 <div class="crayon-num crayon-striped-num" data-line="crayon-59d380ad468ed175324424-40">
                  40
                 </div>
                 <div class="crayon-num" data-line="crayon-59d380ad468ed175324424-41">
                  41
                 </div>
                 <div class="crayon-num crayon-striped-num" data-line="crayon-59d380ad468ed175324424-42">
                  42
                 </div>
                 <div class="crayon-num" data-line="crayon-59d380ad468ed175324424-43">
                  43
                 </div>
                 <div class="crayon-num crayon-striped-num" data-line="crayon-59d380ad468ed175324424-44">
                  44
                 </div>
                 <div class="crayon-num" data-line="crayon-59d380ad468ed175324424-45">
                  45
                 </div>
                 <div class="crayon-num crayon-striped-num" data-line="crayon-59d380ad468ed175324424-46">
                  46
                 </div>
                 <div class="crayon-num" data-line="crayon-59d380ad468ed175324424-47">
                  47
                 </div>
                 <div class="crayon-num crayon-striped-num" data-line="crayon-59d380ad468ed175324424-48">
                  48
                 </div>
                 <div class="crayon-num" data-line="crayon-59d380ad468ed175324424-49">
                  49
                 </div>
                 <div class="crayon-num crayon-striped-num" data-line="crayon-59d380ad468ed175324424-50">
                  50
                 </div>
                 <div class="crayon-num" data-line="crayon-59d380ad468ed175324424-51">
                  51
                 </div>
                 <div class="crayon-num crayon-striped-num" data-line="crayon-59d380ad468ed175324424-52">
                  52
                 </div>
                 <div class="crayon-num" data-line="crayon-59d380ad468ed175324424-53">
                  53
                 </div>
                 <div class="crayon-num crayon-striped-num" data-line="crayon-59d380ad468ed175324424-54">
                  54
                 </div>
                 <div class="crayon-num" data-line="crayon-59d380ad468ed175324424-55">
                  55
                 </div>
                 <div class="crayon-num crayon-striped-num" data-line="crayon-59d380ad468ed175324424-56">
                  56
                 </div>
                 <div class="crayon-num" data-line="crayon-59d380ad468ed175324424-57">
                  57
                 </div>
                 <div class="crayon-num crayon-striped-num" data-line="crayon-59d380ad468ed175324424-58">
                  58
                 </div>
                 <div class="crayon-num" data-line="crayon-59d380ad468ed175324424-59">
                  59
                 </div>
                 <div class="crayon-num crayon-striped-num" data-line="crayon-59d380ad468ed175324424-60">
                  60
                 </div>
                 <div class="crayon-num" data-line="crayon-59d380ad468ed175324424-61">
                  61
                 </div>
                 <div class="crayon-num crayon-striped-num" data-line="crayon-59d380ad468ed175324424-62">
                  62
                 </div>
                 <div class="crayon-num" data-line="crayon-59d380ad468ed175324424-63">
                  63
                 </div>
                 <div class="crayon-num crayon-striped-num" data-line="crayon-59d380ad468ed175324424-64">
                  64
                 </div>
                 <div class="crayon-num" data-line="crayon-59d380ad468ed175324424-65">
                  65
                 </div>
                 <div class="crayon-num crayon-striped-num" data-line="crayon-59d380ad468ed175324424-66">
                  66
                 </div>
                 <div class="crayon-num" data-line="crayon-59d380ad468ed175324424-67">
                  67
                 </div>
                 <div class="crayon-num crayon-striped-num" data-line="crayon-59d380ad468ed175324424-68">
                  68
                 </div>
                 <div class="crayon-num" data-line="crayon-59d380ad468ed175324424-69">
                  69
                 </div>
                 <div class="crayon-num crayon-striped-num" data-line="crayon-59d380ad468ed175324424-70">
                  70
                 </div>
                 <div class="crayon-num" data-line="crayon-59d380ad468ed175324424-71">
                  71
                 </div>
                 <div class="crayon-num crayon-striped-num" data-line="crayon-59d380ad468ed175324424-72">
                  72
                 </div>
                 <div class="crayon-num" data-line="crayon-59d380ad468ed175324424-73">
                  73
                 </div>
                 <div class="crayon-num crayon-striped-num" data-line="crayon-59d380ad468ed175324424-74">
                  74
                 </div>
                 <div class="crayon-num" data-line="crayon-59d380ad468ed175324424-75">
                  75
                 </div>
                 <div class="crayon-num crayon-marked-num crayon-top crayon-bottom crayon-striped-num" data-line="crayon-59d380ad468ed175324424-76">
                  76
                 </div>
                 <div class="crayon-num" data-line="crayon-59d380ad468ed175324424-77">
                  77
                 </div>
                 <div class="crayon-num crayon-striped-num" data-line="crayon-59d380ad468ed175324424-78">
                  78
                 </div>
                 <div class="crayon-num" data-line="crayon-59d380ad468ed175324424-79">
                  79
                 </div>
                 <div class="crayon-num crayon-striped-num" data-line="crayon-59d380ad468ed175324424-80">
                  80
                 </div>
                 <div class="crayon-num" data-line="crayon-59d380ad468ed175324424-81">
                  81
                 </div>
                 <div class="crayon-num crayon-striped-num" data-line="crayon-59d380ad468ed175324424-82">
                  82
                 </div>
                 <div class="crayon-num" data-line="crayon-59d380ad468ed175324424-83">
                  83
                 </div>
                 <div class="crayon-num crayon-striped-num" data-line="crayon-59d380ad468ed175324424-84">
                  84
                 </div>
                 <div class="crayon-num" data-line="crayon-59d380ad468ed175324424-85">
                  85
                 </div>
                 <div class="crayon-num crayon-striped-num" data-line="crayon-59d380ad468ed175324424-86">
                  86
                 </div>
                 <div class="crayon-num" data-line="crayon-59d380ad468ed175324424-87">
                  87
                 </div>
                 <div class="crayon-num crayon-striped-num" data-line="crayon-59d380ad468ed175324424-88">
                  88
                 </div>
                 <div class="crayon-num" data-line="crayon-59d380ad468ed175324424-89">
                  89
                 </div>
                 <div class="crayon-num crayon-striped-num" data-line="crayon-59d380ad468ed175324424-90">
                  90
                 </div>
                 <div class="crayon-num" data-line="crayon-59d380ad468ed175324424-91">
                  91
                 </div>
                 <div class="crayon-num crayon-striped-num" data-line="crayon-59d380ad468ed175324424-92">
                  92
                 </div>
                 <div class="crayon-num" data-line="crayon-59d380ad468ed175324424-93">
                  93
                 </div>
                 <div class="crayon-num crayon-striped-num" data-line="crayon-59d380ad468ed175324424-94">
                  94
                 </div>
                 <div class="crayon-num" data-line="crayon-59d380ad468ed175324424-95">
                  95
                 </div>
                 <div class="crayon-num crayon-striped-num" data-line="crayon-59d380ad468ed175324424-96">
                  96
                 </div>
                 <div class="crayon-num" data-line="crayon-59d380ad468ed175324424-97">
                  97
                 </div>
                 <div class="crayon-num crayon-striped-num" data-line="crayon-59d380ad468ed175324424-98">
                  98
                 </div>
                 <div class="crayon-num" data-line="crayon-59d380ad468ed175324424-99">
                  99
                 </div>
                 <div class="crayon-num crayon-striped-num" data-line="crayon-59d380ad468ed175324424-100">
                  100
                 </div>
                 <div class="crayon-num" data-line="crayon-59d380ad468ed175324424-101">
                  101
                 </div>
                 <div class="crayon-num crayon-striped-num" data-line="crayon-59d380ad468ed175324424-102">
                  102
                 </div>
                 <div class="crayon-num" data-line="crayon-59d380ad468ed175324424-103">
                  103
                 </div>
                 <div class="crayon-num crayon-striped-num" data-line="crayon-59d380ad468ed175324424-104">
                  104
                 </div>
                 <div class="crayon-num" data-line="crayon-59d380ad468ed175324424-105">
                  105
                 </div>
                 <div class="crayon-num crayon-striped-num" data-line="crayon-59d380ad468ed175324424-106">
                  106
                 </div>
                 <div class="crayon-num" data-line="crayon-59d380ad468ed175324424-107">
                  107
                 </div>
                 <div class="crayon-num crayon-striped-num" data-line="crayon-59d380ad468ed175324424-108">
                  108
                 </div>
                 <div class="crayon-num" data-line="crayon-59d380ad468ed175324424-109">
                  109
                 </div>
                 <div class="crayon-num crayon-striped-num" data-line="crayon-59d380ad468ed175324424-110">
                  110
                 </div>
                 <div class="crayon-num" data-line="crayon-59d380ad468ed175324424-111">
                  111
                 </div>
                 <div class="crayon-num crayon-striped-num" data-line="crayon-59d380ad468ed175324424-112">
                  112
                 </div>
                 <div class="crayon-num" data-line="crayon-59d380ad468ed175324424-113">
                  113
                 </div>
                 <div class="crayon-num crayon-striped-num" data-line="crayon-59d380ad468ed175324424-114">
                  114
                 </div>
                 <div class="crayon-num" data-line="crayon-59d380ad468ed175324424-115">
                  115
                 </div>
                 <div class="crayon-num crayon-striped-num" data-line="crayon-59d380ad468ed175324424-116">
                  116
                 </div>
                 <div class="crayon-num" data-line="crayon-59d380ad468ed175324424-117">
                  117
                 </div>
                 <div class="crayon-num crayon-striped-num" data-line="crayon-59d380ad468ed175324424-118">
                  118
                 </div>
                 <div class="crayon-num" data-line="crayon-59d380ad468ed175324424-119">
                  119
                 </div>
                </div> </td> 
               <td class="crayon-code">
                <div class="crayon-pre" style="font-size: 12px !important; line-height: 15px !important; -moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4;">
                 <div class="crayon-line" id="crayon-59d380ad468ed175324424-1">
                  <span class="crayon-t">var</span>
                  <span class="crayon-h"> </span>
                  <span class="crayon-v">oracledb</span>
                  <span class="crayon-h"> </span>
                  <span class="crayon-o">=</span>
                  <span class="crayon-h"> </span>
                  <span class="crayon-e">require</span>
                  <span class="crayon-sy">(</span>
                  <span class="crayon-s">'oracledb'</span>
                  <span class="crayon-sy">)</span>
                  <span class="crayon-sy">;</span>
                 </div>
                 <div class="crayon-line crayon-marked-line crayon-top crayon-striped-line" id="crayon-59d380ad468ed175324424-2">
                  <span class="crayon-t">var</span>
                  <span class="crayon-h"> </span>
                  <span class="crayon-v">bcrypt</span>
                  <span class="crayon-h"> </span>
                  <span class="crayon-o">=</span>
                  <span class="crayon-h"> </span>
                  <span class="crayon-e">require</span>
                  <span class="crayon-sy">(</span>
                  <span class="crayon-s">'bcrypt'</span>
                  <span class="crayon-sy">)</span>
                  <span class="crayon-sy">;</span>
                 </div>
                 <div class="crayon-line crayon-marked-line crayon-bottom" id="crayon-59d380ad468ed175324424-3">
                  <span class="crayon-t">var</span>
                  <span class="crayon-h"> </span>
                  <span class="crayon-v">jwt</span>
                  <span class="crayon-h"> </span>
                  <span class="crayon-o">=</span>
                  <span class="crayon-h"> </span>
                  <span class="crayon-e">require</span>
                  <span class="crayon-sy">(</span>
                  <span class="crayon-s">'jsonwebtoken'</span>
                  <span class="crayon-sy">)</span>
                  <span class="crayon-sy">;</span>
                 </div>
                 <div class="crayon-line crayon-striped-line" id="crayon-59d380ad468ed175324424-4">
                  <span class="crayon-t">var</span>
                  <span class="crayon-h"> </span>
                  <span class="crayon-v">config</span>
                  <span class="crayon-h"> </span>
                  <span class="crayon-o">=</span>
                  <span class="crayon-h"> </span>
                  <span class="crayon-e">require</span>
                  <span class="crayon-sy">(</span>
                  <span class="crayon-v">__dirname</span>
                  <span class="crayon-h"> </span>
                  <span class="crayon-o">+</span>
                  <span class="crayon-h"> </span>
                  <span class="crayon-s">'../../config.js'</span>
                  <span class="crayon-sy">)</span>
                  <span class="crayon-sy">;</span>
                 </div>
                 <div class="crayon-line" id="crayon-59d380ad468ed175324424-5">
                  &nbsp;
                 </div>
                 <div class="crayon-line crayon-striped-line" id="crayon-59d380ad468ed175324424-6">
                  <span class="crayon-t">function</span>
                  <span class="crayon-h"> </span>
                  <span class="crayon-e">post</span>
                  <span class="crayon-sy">(</span>
                  <span class="crayon-v">req</span>
                  <span class="crayon-sy">,</span>
                  <span class="crayon-h"> </span>
                  <span class="crayon-v">res</span>
                  <span class="crayon-sy">,</span>
                  <span class="crayon-h"> </span>
                  <span class="crayon-v">next</span>
                  <span class="crayon-sy">)</span>
                  <span class="crayon-h"> </span>
                  <span class="crayon-sy">{</span>
                 </div>
                 <div class="crayon-line" id="crayon-59d380ad468ed175324424-7">
                  <span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;</span>
                  <span class="crayon-t">var</span>
                  <span class="crayon-h"> </span>
                  <span class="crayon-v">user</span>
                  <span class="crayon-h"> </span>
                  <span class="crayon-o">=</span>
                  <span class="crayon-h"> </span>
                  <span class="crayon-sy">{</span>
                 </div>
                 <div class="crayon-line crayon-striped-line" id="crayon-59d380ad468ed175324424-8">
                  <span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span>
                  <span class="crayon-v">email</span>
                  <span class="crayon-o">:</span>
                  <span class="crayon-h"> </span>
                  <span class="crayon-v">req</span>
                  <span class="crayon-sy">.</span>
                  <span class="crayon-v">body</span>
                  <span class="crayon-sy">.</span>
                  <span class="crayon-i">email</span>
                 </div>
                 <div class="crayon-line" id="crayon-59d380ad468ed175324424-9">
                  <span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;</span>
                  <span class="crayon-sy">}</span>
                  <span class="crayon-sy">;</span>
                 </div>
                 <div class="crayon-line crayon-striped-line" id="crayon-59d380ad468ed175324424-10">
                  <span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;</span>
                  <span class="crayon-t">var</span>
                  <span class="crayon-h"> </span>
                  <span class="crayon-v">unhashedPassword</span>
                  <span class="crayon-h"> </span>
                  <span class="crayon-o">=</span>
                  <span class="crayon-h"> </span>
                  <span class="crayon-v">req</span>
                  <span class="crayon-sy">.</span>
                  <span class="crayon-v">body</span>
                  <span class="crayon-sy">.</span>
                  <span class="crayon-v">password</span>
                  <span class="crayon-sy">;</span>
                 </div>
                 <div class="crayon-line" id="crayon-59d380ad468ed175324424-11">
                  &nbsp;
                 </div>
                 <div class="crayon-line crayon-marked-line crayon-top crayon-bottom crayon-striped-line" id="crayon-59d380ad468ed175324424-12">
                  <span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;</span>
                  <span class="crayon-v">bcrypt</span>
                  <span class="crayon-sy">.</span>
                  <span class="crayon-e">genSalt</span>
                  <span class="crayon-sy">(</span>
                  <span class="crayon-cn">10</span>
                  <span class="crayon-sy">,</span>
                  <span class="crayon-h"> </span>
                  <span class="crayon-t">function</span>
                  <span class="crayon-sy">(</span>
                  <span class="crayon-v">err</span>
                  <span class="crayon-sy">,</span>
                  <span class="crayon-h"> </span>
                  <span class="crayon-v">salt</span>
                  <span class="crayon-sy">)</span>
                  <span class="crayon-h"> </span>
                  <span class="crayon-sy">{</span>
                 </div>
                 <div class="crayon-line" id="crayon-59d380ad468ed175324424-13">
                  <span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span>
                  <span class="crayon-st">if</span>
                  <span class="crayon-h"> </span>
                  <span class="crayon-sy">(</span>
                  <span class="crayon-v">err</span>
                  <span class="crayon-sy">)</span>
                  <span class="crayon-h"> </span>
                  <span class="crayon-sy">{</span>
                 </div>
                 <div class="crayon-line crayon-striped-line" id="crayon-59d380ad468ed175324424-14">
                  <span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span>
                  <span class="crayon-st">return</span>
                  <span class="crayon-h"> </span>
                  <span class="crayon-e">next</span>
                  <span class="crayon-sy">(</span>
                  <span class="crayon-v">err</span>
                  <span class="crayon-sy">)</span>
                  <span class="crayon-sy">;</span>
                 </div>
                 <div class="crayon-line" id="crayon-59d380ad468ed175324424-15">
                  <span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span>
                  <span class="crayon-sy">}</span>
                 </div>
                 <div class="crayon-line crayon-striped-line" id="crayon-59d380ad468ed175324424-16">
                  &nbsp;
                 </div>
                 <div class="crayon-line crayon-marked-line crayon-top crayon-bottom" id="crayon-59d380ad468ed175324424-17">
                  <span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span>
                  <span class="crayon-v">bcrypt</span>
                  <span class="crayon-sy">.</span>
                  <span class="crayon-e">hash</span>
                  <span class="crayon-sy">(</span>
                  <span class="crayon-v">unhashedPassword</span>
                  <span class="crayon-sy">,</span>
                  <span class="crayon-h"> </span>
                  <span class="crayon-v">salt</span>
                  <span class="crayon-sy">,</span>
                  <span class="crayon-h"> </span>
                  <span class="crayon-t">function</span>
                  <span class="crayon-sy">(</span>
                  <span class="crayon-v">err</span>
                  <span class="crayon-sy">,</span>
                  <span class="crayon-h"> </span>
                  <span class="crayon-v">hash</span>
                  <span class="crayon-sy">)</span>
                  <span class="crayon-h"> </span>
                  <span class="crayon-sy">{</span>
                 </div>
                 <div class="crayon-line crayon-striped-line" id="crayon-59d380ad468ed175324424-18">
                  <span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span>
                  <span class="crayon-st">if</span>
                  <span class="crayon-h"> </span>
                  <span class="crayon-sy">(</span>
                  <span class="crayon-v">err</span>
                  <span class="crayon-sy">)</span>
                  <span class="crayon-h"> </span>
                  <span class="crayon-sy">{</span>
                 </div>
                 <div class="crayon-line" id="crayon-59d380ad468ed175324424-19">
                  <span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span>
                  <span class="crayon-st">return</span>
                  <span class="crayon-h"> </span>
                  <span class="crayon-e">next</span>
                  <span class="crayon-sy">(</span>
                  <span class="crayon-v">err</span>
                  <span class="crayon-sy">)</span>
                  <span class="crayon-sy">;</span>
                 </div>
                 <div class="crayon-line crayon-striped-line" id="crayon-59d380ad468ed175324424-20">
                  <span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span>
                  <span class="crayon-sy">}</span>
                 </div>
                 <div class="crayon-line" id="crayon-59d380ad468ed175324424-21">
                  &nbsp;
                 </div>
                 <div class="crayon-line crayon-striped-line" id="crayon-59d380ad468ed175324424-22">
                  <span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span>
                  <span class="crayon-v">user</span>
                  <span class="crayon-sy">.</span>
                  <span class="crayon-v">hashedPassword</span>
                  <span class="crayon-h"> </span>
                  <span class="crayon-o">=</span>
                  <span class="crayon-h"> </span>
                  <span class="crayon-v">hash</span>
                  <span class="crayon-sy">;</span>
                 </div>
                 <div class="crayon-line" id="crayon-59d380ad468ed175324424-23">
                  &nbsp;
                 </div>
                 <div class="crayon-line crayon-striped-line" id="crayon-59d380ad468ed175324424-24">
                  <span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span>
                  <span class="crayon-e">insertUser</span>
                  <span class="crayon-sy">(</span>
                  <span class="crayon-v">user</span>
                  <span class="crayon-sy">,</span>
                  <span class="crayon-h"> </span>
                  <span class="crayon-t">function</span>
                  <span class="crayon-sy">(</span>
                  <span class="crayon-v">err</span>
                  <span class="crayon-sy">,</span>
                  <span class="crayon-h"> </span>
                  <span class="crayon-v">user</span>
                  <span class="crayon-sy">)</span>
                  <span class="crayon-h"> </span>
                  <span class="crayon-sy">{</span>
                 </div>
                 <div class="crayon-line" id="crayon-59d380ad468ed175324424-25">
                  <span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span>
                  <span class="crayon-t">var</span>
                  <span class="crayon-h"> </span>
                  <span class="crayon-v">payload</span>
                  <span class="crayon-sy">;</span>
                 </div>
                 <div class="crayon-line crayon-striped-line" id="crayon-59d380ad468ed175324424-26">
                  &nbsp;
                 </div>
                 <div class="crayon-line" id="crayon-59d380ad468ed175324424-27">
                  <span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span>
                  <span class="crayon-st">if</span>
                  <span class="crayon-h"> </span>
                  <span class="crayon-sy">(</span>
                  <span class="crayon-v">err</span>
                  <span class="crayon-sy">)</span>
                  <span class="crayon-h"> </span>
                  <span class="crayon-sy">{</span>
                 </div>
                 <div class="crayon-line crayon-striped-line" id="crayon-59d380ad468ed175324424-28">
                  <span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span>
                  <span class="crayon-st">return</span>
                  <span class="crayon-h"> </span>
                  <span class="crayon-e">next</span>
                  <span class="crayon-sy">(</span>
                  <span class="crayon-v">err</span>
                  <span class="crayon-sy">)</span>
                  <span class="crayon-sy">;</span>
                 </div>
                 <div class="crayon-line" id="crayon-59d380ad468ed175324424-29">
                  <span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span>
                  <span class="crayon-sy">}</span>
                 </div>
                 <div class="crayon-line crayon-striped-line" id="crayon-59d380ad468ed175324424-30">
                  &nbsp;
                 </div>
                 <div class="crayon-line" id="crayon-59d380ad468ed175324424-31">
                  <span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span>
                  <span class="crayon-v">payload</span>
                  <span class="crayon-h"> </span>
                  <span class="crayon-o">=</span>
                  <span class="crayon-h"> </span>
                  <span class="crayon-sy">{</span>
                 </div>
                 <div class="crayon-line crayon-striped-line" id="crayon-59d380ad468ed175324424-32">
                  <span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span>
                  <span class="crayon-v">sub</span>
                  <span class="crayon-o">:</span>
                  <span class="crayon-h"> </span>
                  <span class="crayon-v">user</span>
                  <span class="crayon-sy">.</span>
                  <span class="crayon-v">email</span>
                  <span class="crayon-sy">,</span>
                 </div>
                 <div class="crayon-line" id="crayon-59d380ad468ed175324424-33">
                  <span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span>
                  <span class="crayon-v">role</span>
                  <span class="crayon-o">:</span>
                  <span class="crayon-h"> </span>
                  <span class="crayon-v">user</span>
                  <span class="crayon-sy">.</span>
                  <span class="crayon-i">role</span>
                 </div>
                 <div class="crayon-line crayon-striped-line" id="crayon-59d380ad468ed175324424-34">
                  <span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span>
                  <span class="crayon-sy">}</span>
                  <span class="crayon-sy">;</span>
                 </div>
                 <div class="crayon-line" id="crayon-59d380ad468ed175324424-35">
                  &nbsp;
                 </div>
                 <div class="crayon-line crayon-striped-line" id="crayon-59d380ad468ed175324424-36">
                  <span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span>
                  <span class="crayon-v">res</span>
                  <span class="crayon-sy">.</span>
                  <span class="crayon-e">status</span>
                  <span class="crayon-sy">(</span>
                  <span class="crayon-cn">200</span>
                  <span class="crayon-sy">)</span>
                  <span class="crayon-sy">.</span>
                  <span class="crayon-e">json</span>
                  <span class="crayon-sy">(</span>
                  <span class="crayon-sy">{</span>
                 </div>
                 <div class="crayon-line" id="crayon-59d380ad468ed175324424-37">
                  <span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span>
                  <span class="crayon-v">user</span>
                  <span class="crayon-o">:</span>
                  <span class="crayon-h"> </span>
                  <span class="crayon-v">user</span>
                  <span class="crayon-sy">,</span>
                 </div>
                 <div class="crayon-line crayon-marked-line crayon-top crayon-bottom crayon-striped-line" id="crayon-59d380ad468ed175324424-38">
                  <span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span>
                  <span class="crayon-v">token</span>
                  <span class="crayon-o">:</span>
                  <span class="crayon-h"> </span>
                  <span class="crayon-v">jwt</span>
                  <span class="crayon-sy">.</span>
                  <span class="crayon-e">sign</span>
                  <span class="crayon-sy">(</span>
                  <span class="crayon-v">payload</span>
                  <span class="crayon-sy">,</span>
                  <span class="crayon-h"> </span>
                  <span class="crayon-v">config</span>
                  <span class="crayon-sy">.</span>
                  <span class="crayon-v">jwtSecretKey</span>
                  <span class="crayon-sy">,</span>
                  <span class="crayon-h"> </span>
                  <span class="crayon-sy">{</span>
                  <span class="crayon-v">expiresInMinutes</span>
                  <span class="crayon-o">:</span>
                  <span class="crayon-h"> </span>
                  <span class="crayon-cn">60</span>
                  <span class="crayon-sy">}</span>
                  <span class="crayon-sy">)</span>
                 </div>
                 <div class="crayon-line" id="crayon-59d380ad468ed175324424-39">
                  <span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span>
                  <span class="crayon-sy">}</span>
                  <span class="crayon-sy">)</span>
                  <span class="crayon-sy">;</span>
                 </div>
                 <div class="crayon-line crayon-striped-line" id="crayon-59d380ad468ed175324424-40">
                  <span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span>
                  <span class="crayon-sy">}</span>
                  <span class="crayon-sy">)</span>
                  <span class="crayon-sy">;</span>
                 </div>
                 <div class="crayon-line" id="crayon-59d380ad468ed175324424-41">
                  <span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span>
                  <span class="crayon-sy">}</span>
                  <span class="crayon-sy">)</span>
                  <span class="crayon-sy">;</span>
                 </div>
                 <div class="crayon-line crayon-striped-line" id="crayon-59d380ad468ed175324424-42">
                  <span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;</span>
                  <span class="crayon-sy">}</span>
                  <span class="crayon-sy">)</span>
                  <span class="crayon-sy">;</span>
                 </div>
                 <div class="crayon-line" id="crayon-59d380ad468ed175324424-43">
                  <span class="crayon-sy">}</span>
                 </div>
                 <div class="crayon-line crayon-striped-line" id="crayon-59d380ad468ed175324424-44">
                  &nbsp;
                 </div>
                 <div class="crayon-line" id="crayon-59d380ad468ed175324424-45">
                  <span class="crayon-v">module</span>
                  <span class="crayon-sy">.</span>
                  <span class="crayon-v">exports</span>
                  <span class="crayon-sy">.</span>
                  <span class="crayon-v">post</span>
                  <span class="crayon-h"> </span>
                  <span class="crayon-o">=</span>
                  <span class="crayon-h"> </span>
                  <span class="crayon-v">post</span>
                  <span class="crayon-sy">;</span>
                 </div>
                 <div class="crayon-line crayon-striped-line" id="crayon-59d380ad468ed175324424-46">
                  &nbsp;
                 </div>
                 <div class="crayon-line" id="crayon-59d380ad468ed175324424-47">
                  <span class="crayon-t">function</span>
                  <span class="crayon-h"> </span>
                  <span class="crayon-e">insertUser</span>
                  <span class="crayon-sy">(</span>
                  <span class="crayon-v">user</span>
                  <span class="crayon-sy">,</span>
                  <span class="crayon-h"> </span>
                  <span class="crayon-v">cb</span>
                  <span class="crayon-sy">)</span>
                  <span class="crayon-h"> </span>
                  <span class="crayon-sy">{</span>
                 </div>
                 <div class="crayon-line crayon-striped-line" id="crayon-59d380ad468ed175324424-48">
                  <span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;</span>
                  <span class="crayon-v">oracledb</span>
                  <span class="crayon-sy">.</span>
                  <span class="crayon-e">getConnection</span>
                  <span class="crayon-sy">(</span>
                 </div>
                 <div class="crayon-line" id="crayon-59d380ad468ed175324424-49">
                  <span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span>
                  <span class="crayon-v">config</span>
                  <span class="crayon-sy">.</span>
                  <span class="crayon-v">database</span>
                  <span class="crayon-sy">,</span>
                 </div>
                 <div class="crayon-line crayon-striped-line" id="crayon-59d380ad468ed175324424-50">
                  <span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span>
                  <span class="crayon-t">function</span>
                  <span class="crayon-sy">(</span>
                  <span class="crayon-v">err</span>
                  <span class="crayon-sy">,</span>
                  <span class="crayon-h"> </span>
                  <span class="crayon-v">connection</span>
                  <span class="crayon-sy">)</span>
                  <span class="crayon-sy">{</span>
                 </div>
                 <div class="crayon-line" id="crayon-59d380ad468ed175324424-51">
                  <span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span>
                  <span class="crayon-st">if</span>
                  <span class="crayon-h"> </span>
                  <span class="crayon-sy">(</span>
                  <span class="crayon-v">err</span>
                  <span class="crayon-sy">)</span>
                  <span class="crayon-h"> </span>
                  <span class="crayon-sy">{</span>
                 </div>
                 <div class="crayon-line crayon-striped-line" id="crayon-59d380ad468ed175324424-52">
                  <span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span>
                  <span class="crayon-st">return</span>
                  <span class="crayon-h"> </span>
                  <span class="crayon-e">cb</span>
                  <span class="crayon-sy">(</span>
                  <span class="crayon-v">err</span>
                  <span class="crayon-sy">)</span>
                  <span class="crayon-sy">;</span>
                 </div>
                 <div class="crayon-line" id="crayon-59d380ad468ed175324424-53">
                  <span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span>
                  <span class="crayon-sy">}</span>
                 </div>
                 <div class="crayon-line crayon-striped-line" id="crayon-59d380ad468ed175324424-54">
                  &nbsp;
                 </div>
                 <div class="crayon-line" id="crayon-59d380ad468ed175324424-55">
                  <span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span>
                  <span class="crayon-v">connection</span>
                  <span class="crayon-sy">.</span>
                  <span class="crayon-e">execute</span>
                  <span class="crayon-sy">(</span>
                 </div>
                 <div class="crayon-line crayon-striped-line" id="crayon-59d380ad468ed175324424-56">
                  <span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span>
                  <span class="crayon-s">'insert into jsao_users ( '</span>
                  <span class="crayon-h"> </span>
                  <span class="crayon-o">+</span>
                 </div>
                 <div class="crayon-line" id="crayon-59d380ad468ed175324424-57">
                  <span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span>
                  <span class="crayon-s">'&nbsp;&nbsp; email, '</span>
                  <span class="crayon-h"> </span>
                  <span class="crayon-o">+</span>
                 </div>
                 <div class="crayon-line crayon-striped-line" id="crayon-59d380ad468ed175324424-58">
                  <span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span>
                  <span class="crayon-s">'&nbsp;&nbsp; password, '</span>
                  <span class="crayon-h"> </span>
                  <span class="crayon-o">+</span>
                 </div>
                 <div class="crayon-line" id="crayon-59d380ad468ed175324424-59">
                  <span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span>
                  <span class="crayon-s">'&nbsp;&nbsp; role '</span>
                  <span class="crayon-h"> </span>
                  <span class="crayon-o">+</span>
                 </div>
                 <div class="crayon-line crayon-striped-line" id="crayon-59d380ad468ed175324424-60">
                  <span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span>
                  <span class="crayon-s">') '</span>
                  <span class="crayon-h"> </span>
                  <span class="crayon-o">+</span>
                 </div>
                 <div class="crayon-line" id="crayon-59d380ad468ed175324424-61">
                  <span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span>
                  <span class="crayon-s">'values ('</span>
                  <span class="crayon-h"> </span>
                  <span class="crayon-o">+</span>
                 </div>
                 <div class="crayon-line crayon-striped-line" id="crayon-59d380ad468ed175324424-62">
                  <span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span>
                  <span class="crayon-s">'&nbsp;&nbsp;&nbsp;&nbsp;:email, '</span>
                  <span class="crayon-h"> </span>
                  <span class="crayon-o">+</span>
                 </div>
                 <div class="crayon-line" id="crayon-59d380ad468ed175324424-63">
                  <span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span>
                  <span class="crayon-s">'&nbsp;&nbsp;&nbsp;&nbsp;:password, '</span>
                  <span class="crayon-h"> </span>
                  <span class="crayon-o">+</span>
                 </div>
                 <div class="crayon-line crayon-striped-line" id="crayon-59d380ad468ed175324424-64">
                  <span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span>
                  <span class="crayon-s">'&nbsp;&nbsp;&nbsp;&nbsp;\'BASE\' '</span>
                  <span class="crayon-h"> </span>
                  <span class="crayon-o">+</span>
                 </div>
                 <div class="crayon-line" id="crayon-59d380ad468ed175324424-65">
                  <span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span>
                  <span class="crayon-s">') '</span>
                  <span class="crayon-h"> </span>
                  <span class="crayon-o">+</span>
                 </div>
                 <div class="crayon-line crayon-striped-line" id="crayon-59d380ad468ed175324424-66">
                  <span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span>
                  <span class="crayon-s">'returning '</span>
                  <span class="crayon-h"> </span>
                  <span class="crayon-o">+</span>
                 </div>
                 <div class="crayon-line" id="crayon-59d380ad468ed175324424-67">
                  <span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span>
                  <span class="crayon-s">'&nbsp;&nbsp; id, '</span>
                  <span class="crayon-h"> </span>
                  <span class="crayon-o">+</span>
                 </div>
                 <div class="crayon-line crayon-striped-line" id="crayon-59d380ad468ed175324424-68">
                  <span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span>
                  <span class="crayon-s">'&nbsp;&nbsp; email, '</span>
                  <span class="crayon-h"> </span>
                  <span class="crayon-o">+</span>
                 </div>
                 <div class="crayon-line" id="crayon-59d380ad468ed175324424-69">
                  <span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span>
                  <span class="crayon-s">'&nbsp;&nbsp; role '</span>
                  <span class="crayon-h"> </span>
                  <span class="crayon-o">+</span>
                 </div>
                 <div class="crayon-line crayon-striped-line" id="crayon-59d380ad468ed175324424-70">
                  <span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span>
                  <span class="crayon-s">'into '</span>
                  <span class="crayon-h"> </span>
                  <span class="crayon-o">+</span>
                 </div>
                 <div class="crayon-line" id="crayon-59d380ad468ed175324424-71">
                  <span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span>
                  <span class="crayon-s">'&nbsp;&nbsp; :rid, '</span>
                  <span class="crayon-h"> </span>
                  <span class="crayon-o">+</span>
                 </div>
                 <div class="crayon-line crayon-striped-line" id="crayon-59d380ad468ed175324424-72">
                  <span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span>
                  <span class="crayon-s">'&nbsp;&nbsp; :remail, '</span>
                  <span class="crayon-h"> </span>
                  <span class="crayon-o">+</span>
                 </div>
                 <div class="crayon-line" id="crayon-59d380ad468ed175324424-73">
                  <span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span>
                  <span class="crayon-s">'&nbsp;&nbsp; :rrole'</span>
                  <span class="crayon-sy">,</span>
                 </div>
                 <div class="crayon-line crayon-striped-line" id="crayon-59d380ad468ed175324424-74">
                  <span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span>
                  <span class="crayon-sy">{</span>
                 </div>
                 <div class="crayon-line" id="crayon-59d380ad468ed175324424-75">
                  <span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span>
                  <span class="crayon-v">email</span>
                  <span class="crayon-o">:</span>
                  <span class="crayon-h"> </span>
                  <span class="crayon-v">user</span>
                  <span class="crayon-sy">.</span>
                  <span class="crayon-v">email</span>
                  <span class="crayon-sy">.</span>
                  <span class="crayon-e">toLowerCase</span>
                  <span class="crayon-sy">(</span>
                  <span class="crayon-sy">)</span>
                  <span class="crayon-sy">,</span>
                 </div>
                 <div class="crayon-line crayon-marked-line crayon-top crayon-bottom crayon-striped-line" id="crayon-59d380ad468ed175324424-76">
                  <span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span>
                  <span class="crayon-v">password</span>
                  <span class="crayon-o">:</span>
                  <span class="crayon-h"> </span>
                  <span class="crayon-v">user</span>
                  <span class="crayon-sy">.</span>
                  <span class="crayon-v">hashedPassword</span>
                  <span class="crayon-sy">,</span>
                 </div>
                 <div class="crayon-line" id="crayon-59d380ad468ed175324424-77">
                  <span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span>
                  <span class="crayon-v">rid</span>
                  <span class="crayon-o">:</span>
                  <span class="crayon-h"> </span>
                  <span class="crayon-sy">{</span>
                 </div>
                 <div class="crayon-line crayon-striped-line" id="crayon-59d380ad468ed175324424-78">
                  <span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span>
                  <span class="crayon-v">type</span>
                  <span class="crayon-o">:</span>
                  <span class="crayon-h"> </span>
                  <span class="crayon-v">oracledb</span>
                  <span class="crayon-sy">.</span>
                  <span class="crayon-v">NUMBER</span>
                  <span class="crayon-sy">,</span>
                 </div>
                 <div class="crayon-line" id="crayon-59d380ad468ed175324424-79">
                  <span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span>
                  <span class="crayon-v">dir</span>
                  <span class="crayon-o">:</span>
                  <span class="crayon-h"> </span>
                  <span class="crayon-v">oracledb</span>
                  <span class="crayon-sy">.</span>
                  <span class="crayon-v">BIND</span>
                  <span class="crayon-sy">_</span>OUT
                 </div>
                 <div class="crayon-line crayon-striped-line" id="crayon-59d380ad468ed175324424-80">
                  <span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span>
                  <span class="crayon-sy">}</span>
                  <span class="crayon-sy">,</span>
                 </div>
                 <div class="crayon-line" id="crayon-59d380ad468ed175324424-81">
                  <span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span>
                  <span class="crayon-v">remail</span>
                  <span class="crayon-o">:</span>
                  <span class="crayon-h"> </span>
                  <span class="crayon-sy">{</span>
                 </div>
                 <div class="crayon-line crayon-striped-line" id="crayon-59d380ad468ed175324424-82">
                  <span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span>
                  <span class="crayon-v">type</span>
                  <span class="crayon-o">:</span>
                  <span class="crayon-h"> </span>
                  <span class="crayon-v">oracledb</span>
                  <span class="crayon-sy">.</span>
                  <span class="crayon-t">STRING</span>
                  <span class="crayon-sy">,</span>
                 </div>
                 <div class="crayon-line" id="crayon-59d380ad468ed175324424-83">
                  <span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span>
                  <span class="crayon-v">dir</span>
                  <span class="crayon-o">:</span>
                  <span class="crayon-h"> </span>
                  <span class="crayon-v">oracledb</span>
                  <span class="crayon-sy">.</span>
                  <span class="crayon-v">BIND</span>
                  <span class="crayon-sy">_</span>OUT
                 </div>
                 <div class="crayon-line crayon-striped-line" id="crayon-59d380ad468ed175324424-84">
                  <span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span>
                  <span class="crayon-sy">}</span>
                  <span class="crayon-sy">,</span>
                 </div>
                 <div class="crayon-line" id="crayon-59d380ad468ed175324424-85">
                  <span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span>
                  <span class="crayon-v">rrole</span>
                  <span class="crayon-o">:</span>
                  <span class="crayon-h"> </span>
                  <span class="crayon-sy">{</span>
                 </div>
                 <div class="crayon-line crayon-striped-line" id="crayon-59d380ad468ed175324424-86">
                  <span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span>
                  <span class="crayon-v">type</span>
                  <span class="crayon-o">:</span>
                  <span class="crayon-h"> </span>
                  <span class="crayon-v">oracledb</span>
                  <span class="crayon-sy">.</span>
                  <span class="crayon-t">STRING</span>
                  <span class="crayon-sy">,</span>
                 </div>
                 <div class="crayon-line" id="crayon-59d380ad468ed175324424-87">
                  <span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span>
                  <span class="crayon-v">dir</span>
                  <span class="crayon-o">:</span>
                  <span class="crayon-h"> </span>
                  <span class="crayon-v">oracledb</span>
                  <span class="crayon-sy">.</span>
                  <span class="crayon-v">BIND</span>
                  <span class="crayon-sy">_</span>OUT
                 </div>
                 <div class="crayon-line crayon-striped-line" id="crayon-59d380ad468ed175324424-88">
                  <span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span>
                  <span class="crayon-sy">}</span>
                 </div>
                 <div class="crayon-line" id="crayon-59d380ad468ed175324424-89">
                  &nbsp;
                 </div>
                 <div class="crayon-line crayon-striped-line" id="crayon-59d380ad468ed175324424-90">
                  <span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span>
                  <span class="crayon-sy">}</span>
                  <span class="crayon-sy">,</span>
                 </div>
                 <div class="crayon-line" id="crayon-59d380ad468ed175324424-91">
                  <span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span>
                  <span class="crayon-sy">{</span>
                 </div>
                 <div class="crayon-line crayon-striped-line" id="crayon-59d380ad468ed175324424-92">
                  <span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span>
                  <span class="crayon-v">autoCommit</span>
                  <span class="crayon-o">:</span>
                  <span class="crayon-h"> </span>
                  <span class="crayon-t">true</span>
                 </div>
                 <div class="crayon-line" id="crayon-59d380ad468ed175324424-93">
                  <span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span>
                  <span class="crayon-sy">}</span>
                  <span class="crayon-sy">,</span>
                 </div>
                 <div class="crayon-line crayon-striped-line" id="crayon-59d380ad468ed175324424-94">
                  <span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span>
                  <span class="crayon-t">function</span>
                  <span class="crayon-sy">(</span>
                  <span class="crayon-v">err</span>
                  <span class="crayon-sy">,</span>
                  <span class="crayon-h"> </span>
                  <span class="crayon-v">results</span>
                  <span class="crayon-sy">)</span>
                  <span class="crayon-sy">{</span>
                 </div>
                 <div class="crayon-line" id="crayon-59d380ad468ed175324424-95">
                  <span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span>
                  <span class="crayon-st">if</span>
                  <span class="crayon-h"> </span>
                  <span class="crayon-sy">(</span>
                  <span class="crayon-v">err</span>
                  <span class="crayon-sy">)</span>
                  <span class="crayon-h"> </span>
                  <span class="crayon-sy">{</span>
                 </div>
                 <div class="crayon-line crayon-striped-line" id="crayon-59d380ad468ed175324424-96">
                  <span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span>
                  <span class="crayon-v">connection</span>
                  <span class="crayon-sy">.</span>
                  <span class="crayon-e">release</span>
                  <span class="crayon-sy">(</span>
                  <span class="crayon-t">function</span>
                  <span class="crayon-sy">(</span>
                  <span class="crayon-v">err</span>
                  <span class="crayon-sy">)</span>
                  <span class="crayon-h"> </span>
                  <span class="crayon-sy">{</span>
                 </div>
                 <div class="crayon-line" id="crayon-59d380ad468ed175324424-97">
                  <span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span>
                  <span class="crayon-st">if</span>
                  <span class="crayon-h"> </span>
                  <span class="crayon-sy">(</span>
                  <span class="crayon-v">err</span>
                  <span class="crayon-sy">)</span>
                  <span class="crayon-h"> </span>
                  <span class="crayon-sy">{</span>
                 </div>
                 <div class="crayon-line crayon-striped-line" id="crayon-59d380ad468ed175324424-98">
                  <span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span>
                  <span class="crayon-v">console</span>
                  <span class="crayon-sy">.</span>
                  <span class="crayon-e">error</span>
                  <span class="crayon-sy">(</span>
                  <span class="crayon-v">err</span>
                  <span class="crayon-sy">.</span>
                  <span class="crayon-v">message</span>
                  <span class="crayon-sy">)</span>
                  <span class="crayon-sy">;</span>
                 </div>
                 <div class="crayon-line" id="crayon-59d380ad468ed175324424-99">
                  <span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span>
                  <span class="crayon-sy">}</span>
                 </div>
                 <div class="crayon-line crayon-striped-line" id="crayon-59d380ad468ed175324424-100">
                  <span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span>
                  <span class="crayon-sy">}</span>
                  <span class="crayon-sy">)</span>
                  <span class="crayon-sy">;</span>
                 </div>
                 <div class="crayon-line" id="crayon-59d380ad468ed175324424-101">
                  &nbsp;
                 </div>
                 <div class="crayon-line crayon-striped-line" id="crayon-59d380ad468ed175324424-102">
                  <span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span>
                  <span class="crayon-st">return</span>
                  <span class="crayon-h"> </span>
                  <span class="crayon-e">cb</span>
                  <span class="crayon-sy">(</span>
                  <span class="crayon-v">err</span>
                  <span class="crayon-sy">)</span>
                  <span class="crayon-sy">;</span>
                 </div>
                 <div class="crayon-line" id="crayon-59d380ad468ed175324424-103">
                  <span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span>
                  <span class="crayon-sy">}</span>
                 </div>
                 <div class="crayon-line crayon-striped-line" id="crayon-59d380ad468ed175324424-104">
                  &nbsp;
                 </div>
                 <div class="crayon-line" id="crayon-59d380ad468ed175324424-105">
                  <span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span>
                  <span class="crayon-e">cb</span>
                  <span class="crayon-sy">(</span>
                  <span class="crayon-t">null</span>
                  <span class="crayon-sy">,</span>
                  <span class="crayon-h"> </span>
                  <span class="crayon-sy">{</span>
                 </div>
                 <div class="crayon-line crayon-striped-line" id="crayon-59d380ad468ed175324424-106">
                  <span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span>
                  <span class="crayon-v">id</span>
                  <span class="crayon-o">:</span>
                  <span class="crayon-h"> </span>
                  <span class="crayon-v">results</span>
                  <span class="crayon-sy">.</span>
                  <span class="crayon-v">outBinds</span>
                  <span class="crayon-sy">.</span>
                  <span class="crayon-v">rid</span>
                  <span class="crayon-sy">[</span>
                  <span class="crayon-cn">0</span>
                  <span class="crayon-sy">]</span>
                  <span class="crayon-sy">,</span>
                 </div>
                 <div class="crayon-line" id="crayon-59d380ad468ed175324424-107">
                  <span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span>
                  <span class="crayon-v">email</span>
                  <span class="crayon-o">:</span>
                  <span class="crayon-h"> </span>
                  <span class="crayon-v">results</span>
                  <span class="crayon-sy">.</span>
                  <span class="crayon-v">outBinds</span>
                  <span class="crayon-sy">.</span>
                  <span class="crayon-v">remail</span>
                  <span class="crayon-sy">[</span>
                  <span class="crayon-cn">0</span>
                  <span class="crayon-sy">]</span>
                  <span class="crayon-sy">,</span>
                 </div>
                 <div class="crayon-line crayon-striped-line" id="crayon-59d380ad468ed175324424-108">
                  <span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span>
                  <span class="crayon-v">role</span>
                  <span class="crayon-o">:</span>
                  <span class="crayon-h"> </span>
                  <span class="crayon-v">results</span>
                  <span class="crayon-sy">.</span>
                  <span class="crayon-v">outBinds</span>
                  <span class="crayon-sy">.</span>
                  <span class="crayon-v">rrole</span>
                  <span class="crayon-sy">[</span>
                  <span class="crayon-cn">0</span>
                  <span class="crayon-sy">]</span>
                 </div>
                 <div class="crayon-line" id="crayon-59d380ad468ed175324424-109">
                  <span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span>
                  <span class="crayon-sy">}</span>
                  <span class="crayon-sy">)</span>
                  <span class="crayon-sy">;</span>
                 </div>
                 <div class="crayon-line crayon-striped-line" id="crayon-59d380ad468ed175324424-110">
                  &nbsp;
                 </div>
                 <div class="crayon-line" id="crayon-59d380ad468ed175324424-111">
                  <span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span>
                  <span class="crayon-v">connection</span>
                  <span class="crayon-sy">.</span>
                  <span class="crayon-e">release</span>
                  <span class="crayon-sy">(</span>
                  <span class="crayon-t">function</span>
                  <span class="crayon-sy">(</span>
                  <span class="crayon-v">err</span>
                  <span class="crayon-sy">)</span>
                  <span class="crayon-h"> </span>
                  <span class="crayon-sy">{</span>
                 </div>
                 <div class="crayon-line crayon-striped-line" id="crayon-59d380ad468ed175324424-112">
                  <span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span>
                  <span class="crayon-st">if</span>
                  <span class="crayon-h"> </span>
                  <span class="crayon-sy">(</span>
                  <span class="crayon-v">err</span>
                  <span class="crayon-sy">)</span>
                  <span class="crayon-h"> </span>
                  <span class="crayon-sy">{</span>
                 </div>
                 <div class="crayon-line" id="crayon-59d380ad468ed175324424-113">
                  <span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span>
                  <span class="crayon-v">console</span>
                  <span class="crayon-sy">.</span>
                  <span class="crayon-e">error</span>
                  <span class="crayon-sy">(</span>
                  <span class="crayon-v">err</span>
                  <span class="crayon-sy">.</span>
                  <span class="crayon-v">message</span>
                  <span class="crayon-sy">)</span>
                  <span class="crayon-sy">;</span>
                 </div>
                 <div class="crayon-line crayon-striped-line" id="crayon-59d380ad468ed175324424-114">
                  <span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span>
                  <span class="crayon-sy">}</span>
                 </div>
                 <div class="crayon-line" id="crayon-59d380ad468ed175324424-115">
                  <span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span>
                  <span class="crayon-sy">}</span>
                  <span class="crayon-sy">)</span>
                  <span class="crayon-sy">;</span>
                 </div>
                 <div class="crayon-line crayon-striped-line" id="crayon-59d380ad468ed175324424-116">
                  <span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span>
                  <span class="crayon-sy">}</span>
                  <span class="crayon-sy">)</span>
                  <span class="crayon-sy">;</span>
                 </div>
                 <div class="crayon-line" id="crayon-59d380ad468ed175324424-117">
                  <span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span>
                  <span class="crayon-sy">}</span>
                 </div>
                 <div class="crayon-line crayon-striped-line" id="crayon-59d380ad468ed175324424-118">
                  <span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;</span>
                  <span class="crayon-sy">)</span>
                  <span class="crayon-sy">;</span>
                 </div>
                 <div class="crayon-line" id="crayon-59d380ad468ed175324424-119">
                  <span class="crayon-sy">}</span>
                 </div>
                </div></td> 
              </tr> 
             </tbody>
            </table> 
           </div> 
          </div> 
          <!-- [Format Time: 0.0115 seconds] --> 
          <p>The <span class="inline-code">users.js</span> uses <span class="inline-code">bcrypt</span> to first generate a salt and then use it to hash the password. Once the password is hashed the <span class="inline-code">insertUser</span> function is invoked to do the insert into Oracle Database. The <span class="inline-code">insertUser</span> function demonstrates several features of the Oracle Database Node.js driver, such as the ability to use the returning clause (which always returns arrays) and the autoCommit setting (which was set to true). After the user is inserted, the user data is sent to the client along with a JWT access token that was generated with the <span class="inline-code">jsonwebtoken</span> module.</p> 
          <p>As we did before, we need to update <span class="inline-code">server.js</span> to map new the route through.</p> 
          <!-- Crayon Syntax Highlighter v_2.7.2_beta --> 
          <div id="crayon-59d380ad468f7961548724" class="crayon-syntax crayon-theme-classic crayon-font-monaco crayon-os-pc print-yes notranslate" data-settings=" no-popup minimize scroll-mouseover" style=" margin-top: 12px; margin-bottom: 12px; font-size: 12px !important; line-height: 15px !important;"> 
           <div class="crayon-toolbar" data-settings=" show" style="font-size: 12px !important;height: 18px !important; line-height: 18px !important;">
            <span class="crayon-title">auth-api/server.js</span> 
            <div class="crayon-tools" style="font-size: 12px !important;height: 18px !important; line-height: 18px !important;">
             <div class="crayon-button crayon-copy-button" title="Copy">
              <div class="crayon-button-icon"></div>
             </div>
             <span class="crayon-language">JavaScript</span>
            </div>
           </div> 
           <div class="crayon-info" style="min-height: 16.8px !important; line-height: 16.8px !important;"></div> 
           <div class="crayon-plain-wrap">
            <textarea wrap="soft" class="crayon-plain print-no" data-settings="dblclick" readonly style="-moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4; font-size: 12px !important; line-height: 15px !important;">
var express = require('express');
var morgan = require('morgan');
var bodyParser = require('body-parser');
var publicThings = require(__dirname + '/routes/publicThings.js');
var protectedThings = require(__dirname + '/routes/protectedThings.js');
var users = require(__dirname + '/routes/users.js');
var app;
var router;
var port = 3000;

app = express();

app.use(morgan('combined')); //logger
app.use(bodyParser.json());

router = express.Router();

router.get('/public_things', publicThings.get);
router.get('/protected_things', protectedThings.get);
router.post('/users', users.post);

app.use('/api', router);

app.listen(port, function() {
    console.log('Web server listening on localhost:' + port);
});</textarea>
           </div> 
           <div class="crayon-main" style=""> 
            <table class="crayon-table"> 
             <tbody>
              <tr class="crayon-row"> 
               <td class="crayon-nums " data-settings="show"> 
                <div class="crayon-nums-content" style="font-size: 12px !important; line-height: 15px !important;">
                 <div class="crayon-num" data-line="crayon-59d380ad468f7961548724-1">
                  1
                 </div>
                 <div class="crayon-num crayon-striped-num" data-line="crayon-59d380ad468f7961548724-2">
                  2
                 </div>
                 <div class="crayon-num" data-line="crayon-59d380ad468f7961548724-3">
                  3
                 </div>
                 <div class="crayon-num crayon-striped-num" data-line="crayon-59d380ad468f7961548724-4">
                  4
                 </div>
                 <div class="crayon-num" data-line="crayon-59d380ad468f7961548724-5">
                  5
                 </div>
                 <div class="crayon-num crayon-marked-num crayon-top crayon-bottom crayon-striped-num" data-line="crayon-59d380ad468f7961548724-6">
                  6
                 </div>
                 <div class="crayon-num" data-line="crayon-59d380ad468f7961548724-7">
                  7
                 </div>
                 <div class="crayon-num crayon-striped-num" data-line="crayon-59d380ad468f7961548724-8">
                  8
                 </div>
                 <div class="crayon-num" data-line="crayon-59d380ad468f7961548724-9">
                  9
                 </div>
                 <div class="crayon-num crayon-striped-num" data-line="crayon-59d380ad468f7961548724-10">
                  10
                 </div>
                 <div class="crayon-num" data-line="crayon-59d380ad468f7961548724-11">
                  11
                 </div>
                 <div class="crayon-num crayon-striped-num" data-line="crayon-59d380ad468f7961548724-12">
                  12
                 </div>
                 <div class="crayon-num" data-line="crayon-59d380ad468f7961548724-13">
                  13
                 </div>
                 <div class="crayon-num crayon-striped-num" data-line="crayon-59d380ad468f7961548724-14">
                  14
                 </div>
                 <div class="crayon-num" data-line="crayon-59d380ad468f7961548724-15">
                  15
                 </div>
                 <div class="crayon-num crayon-striped-num" data-line="crayon-59d380ad468f7961548724-16">
                  16
                 </div>
                 <div class="crayon-num" data-line="crayon-59d380ad468f7961548724-17">
                  17
                 </div>
                 <div class="crayon-num crayon-striped-num" data-line="crayon-59d380ad468f7961548724-18">
                  18
                 </div>
                 <div class="crayon-num" data-line="crayon-59d380ad468f7961548724-19">
                  19
                 </div>
                 <div class="crayon-num crayon-marked-num crayon-top crayon-bottom crayon-striped-num" data-line="crayon-59d380ad468f7961548724-20">
                  20
                 </div>
                 <div class="crayon-num" data-line="crayon-59d380ad468f7961548724-21">
                  21
                 </div>
                 <div class="crayon-num crayon-striped-num" data-line="crayon-59d380ad468f7961548724-22">
                  22
                 </div>
                 <div class="crayon-num" data-line="crayon-59d380ad468f7961548724-23">
                  23
                 </div>
                 <div class="crayon-num crayon-striped-num" data-line="crayon-59d380ad468f7961548724-24">
                  24
                 </div>
                 <div class="crayon-num" data-line="crayon-59d380ad468f7961548724-25">
                  25
                 </div>
                 <div class="crayon-num crayon-striped-num" data-line="crayon-59d380ad468f7961548724-26">
                  26
                 </div>
                </div> </td> 
               <td class="crayon-code">
                <div class="crayon-pre" style="font-size: 12px !important; line-height: 15px !important; -moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4;">
                 <div class="crayon-line" id="crayon-59d380ad468f7961548724-1">
                  <span class="crayon-t">var</span>
                  <span class="crayon-h"> </span>
                  <span class="crayon-v">express</span>
                  <span class="crayon-h"> </span>
                  <span class="crayon-o">=</span>
                  <span class="crayon-h"> </span>
                  <span class="crayon-e">require</span>
                  <span class="crayon-sy">(</span>
                  <span class="crayon-s">'express'</span>
                  <span class="crayon-sy">)</span>
                  <span class="crayon-sy">;</span>
                 </div>
                 <div class="crayon-line crayon-striped-line" id="crayon-59d380ad468f7961548724-2">
                  <span class="crayon-t">var</span>
                  <span class="crayon-h"> </span>
                  <span class="crayon-v">morgan</span>
                  <span class="crayon-h"> </span>
                  <span class="crayon-o">=</span>
                  <span class="crayon-h"> </span>
                  <span class="crayon-e">require</span>
                  <span class="crayon-sy">(</span>
                  <span class="crayon-s">'morgan'</span>
                  <span class="crayon-sy">)</span>
                  <span class="crayon-sy">;</span>
                 </div>
                 <div class="crayon-line" id="crayon-59d380ad468f7961548724-3">
                  <span class="crayon-t">var</span>
                  <span class="crayon-h"> </span>
                  <span class="crayon-v">bodyParser</span>
                  <span class="crayon-h"> </span>
                  <span class="crayon-o">=</span>
                  <span class="crayon-h"> </span>
                  <span class="crayon-e">require</span>
                  <span class="crayon-sy">(</span>
                  <span class="crayon-s">'body-parser'</span>
                  <span class="crayon-sy">)</span>
                  <span class="crayon-sy">;</span>
                 </div>
                 <div class="crayon-line crayon-striped-line" id="crayon-59d380ad468f7961548724-4">
                  <span class="crayon-t">var</span>
                  <span class="crayon-h"> </span>
                  <span class="crayon-v">publicThings</span>
                  <span class="crayon-h"> </span>
                  <span class="crayon-o">=</span>
                  <span class="crayon-h"> </span>
                  <span class="crayon-e">require</span>
                  <span class="crayon-sy">(</span>
                  <span class="crayon-v">__dirname</span>
                  <span class="crayon-h"> </span>
                  <span class="crayon-o">+</span>
                  <span class="crayon-h"> </span>
                  <span class="crayon-s">'/routes/publicThings.js'</span>
                  <span class="crayon-sy">)</span>
                  <span class="crayon-sy">;</span>
                 </div>
                 <div class="crayon-line" id="crayon-59d380ad468f7961548724-5">
                  <span class="crayon-t">var</span>
                  <span class="crayon-h"> </span>
                  <span class="crayon-v">protectedThings</span>
                  <span class="crayon-h"> </span>
                  <span class="crayon-o">=</span>
                  <span class="crayon-h"> </span>
                  <span class="crayon-e">require</span>
                  <span class="crayon-sy">(</span>
                  <span class="crayon-v">__dirname</span>
                  <span class="crayon-h"> </span>
                  <span class="crayon-o">+</span>
                  <span class="crayon-h"> </span>
                  <span class="crayon-s">'/routes/protectedThings.js'</span>
                  <span class="crayon-sy">)</span>
                  <span class="crayon-sy">;</span>
                 </div>
                 <div class="crayon-line crayon-marked-line crayon-top crayon-bottom crayon-striped-line" id="crayon-59d380ad468f7961548724-6">
                  <span class="crayon-t">var</span>
                  <span class="crayon-h"> </span>
                  <span class="crayon-v">users</span>
                  <span class="crayon-h"> </span>
                  <span class="crayon-o">=</span>
                  <span class="crayon-h"> </span>
                  <span class="crayon-e">require</span>
                  <span class="crayon-sy">(</span>
                  <span class="crayon-v">__dirname</span>
                  <span class="crayon-h"> </span>
                  <span class="crayon-o">+</span>
                  <span class="crayon-h"> </span>
                  <span class="crayon-s">'/routes/users.js'</span>
                  <span class="crayon-sy">)</span>
                  <span class="crayon-sy">;</span>
                 </div>
                 <div class="crayon-line" id="crayon-59d380ad468f7961548724-7">
                  <span class="crayon-t">var</span>
                  <span class="crayon-h"> </span>
                  <span class="crayon-v">app</span>
                  <span class="crayon-sy">;</span>
                 </div>
                 <div class="crayon-line crayon-striped-line" id="crayon-59d380ad468f7961548724-8">
                  <span class="crayon-t">var</span>
                  <span class="crayon-h"> </span>
                  <span class="crayon-v">router</span>
                  <span class="crayon-sy">;</span>
                 </div>
                 <div class="crayon-line" id="crayon-59d380ad468f7961548724-9">
                  <span class="crayon-t">var</span>
                  <span class="crayon-h"> </span>
                  <span class="crayon-v">port</span>
                  <span class="crayon-h"> </span>
                  <span class="crayon-o">=</span>
                  <span class="crayon-h"> </span>
                  <span class="crayon-cn">3000</span>
                  <span class="crayon-sy">;</span>
                 </div>
                 <div class="crayon-line crayon-striped-line" id="crayon-59d380ad468f7961548724-10">
                  &nbsp;
                 </div>
                 <div class="crayon-line" id="crayon-59d380ad468f7961548724-11">
                  <span class="crayon-v">app</span>
                  <span class="crayon-h"> </span>
                  <span class="crayon-o">=</span>
                  <span class="crayon-h"> </span>
                  <span class="crayon-e">express</span>
                  <span class="crayon-sy">(</span>
                  <span class="crayon-sy">)</span>
                  <span class="crayon-sy">;</span>
                 </div>
                 <div class="crayon-line crayon-striped-line" id="crayon-59d380ad468f7961548724-12">
                  &nbsp;
                 </div>
                 <div class="crayon-line" id="crayon-59d380ad468f7961548724-13">
                  <span class="crayon-v">app</span>
                  <span class="crayon-sy">.</span>
                  <span class="crayon-st">use</span>
                  <span class="crayon-sy">(</span>
                  <span class="crayon-e">morgan</span>
                  <span class="crayon-sy">(</span>
                  <span class="crayon-s">'combined'</span>
                  <span class="crayon-sy">)</span>
                  <span class="crayon-sy">)</span>
                  <span class="crayon-sy">;</span>
                  <span class="crayon-h"> </span>
                  <span class="crayon-c">//logger</span>
                 </div>
                 <div class="crayon-line crayon-striped-line" id="crayon-59d380ad468f7961548724-14">
                  <span class="crayon-v">app</span>
                  <span class="crayon-sy">.</span>
                  <span class="crayon-st">use</span>
                  <span class="crayon-sy">(</span>
                  <span class="crayon-v">bodyParser</span>
                  <span class="crayon-sy">.</span>
                  <span class="crayon-e">json</span>
                  <span class="crayon-sy">(</span>
                  <span class="crayon-sy">)</span>
                  <span class="crayon-sy">)</span>
                  <span class="crayon-sy">;</span>
                 </div>
                 <div class="crayon-line" id="crayon-59d380ad468f7961548724-15">
                  &nbsp;
                 </div>
                 <div class="crayon-line crayon-striped-line" id="crayon-59d380ad468f7961548724-16">
                  <span class="crayon-v">router</span>
                  <span class="crayon-h"> </span>
                  <span class="crayon-o">=</span>
                  <span class="crayon-h"> </span>
                  <span class="crayon-v">express</span>
                  <span class="crayon-sy">.</span>
                  <span class="crayon-e">Router</span>
                  <span class="crayon-sy">(</span>
                  <span class="crayon-sy">)</span>
                  <span class="crayon-sy">;</span>
                 </div>
                 <div class="crayon-line" id="crayon-59d380ad468f7961548724-17">
                  &nbsp;
                 </div>
                 <div class="crayon-line crayon-striped-line" id="crayon-59d380ad468f7961548724-18">
                  <span class="crayon-v">router</span>
                  <span class="crayon-sy">.</span>
                  <span class="crayon-e">get</span>
                  <span class="crayon-sy">(</span>
                  <span class="crayon-s">'/public_things'</span>
                  <span class="crayon-sy">,</span>
                  <span class="crayon-h"> </span>
                  <span class="crayon-v">publicThings</span>
                  <span class="crayon-sy">.</span>
                  <span class="crayon-v">get</span>
                  <span class="crayon-sy">)</span>
                  <span class="crayon-sy">;</span>
                 </div>
                 <div class="crayon-line" id="crayon-59d380ad468f7961548724-19">
                  <span class="crayon-v">router</span>
                  <span class="crayon-sy">.</span>
                  <span class="crayon-e">get</span>
                  <span class="crayon-sy">(</span>
                  <span class="crayon-s">'/protected_things'</span>
                  <span class="crayon-sy">,</span>
                  <span class="crayon-h"> </span>
                  <span class="crayon-v">protectedThings</span>
                  <span class="crayon-sy">.</span>
                  <span class="crayon-v">get</span>
                  <span class="crayon-sy">)</span>
                  <span class="crayon-sy">;</span>
                 </div>
                 <div class="crayon-line crayon-marked-line crayon-top crayon-bottom crayon-striped-line" id="crayon-59d380ad468f7961548724-20">
                  <span class="crayon-v">router</span>
                  <span class="crayon-sy">.</span>
                  <span class="crayon-e">post</span>
                  <span class="crayon-sy">(</span>
                  <span class="crayon-s">'/users'</span>
                  <span class="crayon-sy">,</span>
                  <span class="crayon-h"> </span>
                  <span class="crayon-v">users</span>
                  <span class="crayon-sy">.</span>
                  <span class="crayon-v">post</span>
                  <span class="crayon-sy">)</span>
                  <span class="crayon-sy">;</span>
                 </div>
                 <div class="crayon-line" id="crayon-59d380ad468f7961548724-21">
                  &nbsp;
                 </div>
                 <div class="crayon-line crayon-striped-line" id="crayon-59d380ad468f7961548724-22">
                  <span class="crayon-v">app</span>
                  <span class="crayon-sy">.</span>
                  <span class="crayon-st">use</span>
                  <span class="crayon-sy">(</span>
                  <span class="crayon-s">'/api'</span>
                  <span class="crayon-sy">,</span>
                  <span class="crayon-h"> </span>
                  <span class="crayon-v">router</span>
                  <span class="crayon-sy">)</span>
                  <span class="crayon-sy">;</span>
                 </div>
                 <div class="crayon-line" id="crayon-59d380ad468f7961548724-23">
                  &nbsp;
                 </div>
                 <div class="crayon-line crayon-striped-line" id="crayon-59d380ad468f7961548724-24">
                  <span class="crayon-v">app</span>
                  <span class="crayon-sy">.</span>
                  <span class="crayon-e">listen</span>
                  <span class="crayon-sy">(</span>
                  <span class="crayon-v">port</span>
                  <span class="crayon-sy">,</span>
                  <span class="crayon-h"> </span>
                  <span class="crayon-t">function</span>
                  <span class="crayon-sy">(</span>
                  <span class="crayon-sy">)</span>
                  <span class="crayon-h"> </span>
                  <span class="crayon-sy">{</span>
                 </div>
                 <div class="crayon-line" id="crayon-59d380ad468f7961548724-25">
                  <span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;</span>
                  <span class="crayon-v">console</span>
                  <span class="crayon-sy">.</span>
                  <span class="crayon-e">log</span>
                  <span class="crayon-sy">(</span>
                  <span class="crayon-s">'Web server listening on localhost:'</span>
                  <span class="crayon-h"> </span>
                  <span class="crayon-o">+</span>
                  <span class="crayon-h"> </span>
                  <span class="crayon-v">port</span>
                  <span class="crayon-sy">)</span>
                  <span class="crayon-sy">;</span>
                 </div>
                 <div class="crayon-line crayon-striped-line" id="crayon-59d380ad468f7961548724-26">
                  <span class="crayon-sy">}</span>
                  <span class="crayon-sy">)</span>
                  <span class="crayon-sy">;</span>
                 </div>
                </div></td> 
              </tr> 
             </tbody>
            </table> 
           </div> 
          </div> 
          <!-- [Format Time: 0.0034 seconds] --> 
          <p>Testing this route is a little tricker than before as we are going to be sending some data to the server. The body of the request will be JSON and we’ll need to include the appropriate header to indicate that. Restart your server and give it a shot.</p> 
          <p><a href="https://jsao.io/wp-content/uploads/2015/06/auth-api-test-4.png" rel="prettyPhoto[gallery-WMde]"><img src="https://jsao.io/wp-content/uploads/2015/06/auth-api-test-4.png" alt="auth-api test 4" width="1838" height="1426" class="alignnone size-full wp-image-446" srcset="https://jsao.io/wp-content/uploads/2015/06/auth-api-test-4.png 1838w, https://jsao.io/wp-content/uploads/2015/06/auth-api-test-4-300x233.png 300w, https://jsao.io/wp-content/uploads/2015/06/auth-api-test-4-1024x794.png 1024w" sizes="(max-width: 1838px) 100vw, 1838px"></a></p> 
          <p>Notice that, when done correctly, we get both the user back (with the new id) and a token. A token! You know what we can do with that! Let’s re-test our <span class="inline-code">/api/protected_things</span> route, this time we’ll supply the correct authorization header. Note that the value of the authorization header is the word “Bearer”, followed by a space, and then the token value.</p> 
          <p><a href="https://jsao.io/wp-content/uploads/2015/06/auth-api-test-5.png" rel="prettyPhoto[gallery-WMde]"><img src="https://jsao.io/wp-content/uploads/2015/06/auth-api-test-5.png" alt="auth-api test 5" width="1832" height="1180" class="alignnone size-full wp-image-447" srcset="https://jsao.io/wp-content/uploads/2015/06/auth-api-test-5.png 1832w, https://jsao.io/wp-content/uploads/2015/06/auth-api-test-5-300x193.png 300w, https://jsao.io/wp-content/uploads/2015/06/auth-api-test-5-1024x660.png 1024w" sizes="(max-width: 1832px) 100vw, 1832px"></a></p> 
          <p>It’s bacon!!! ? Typically the token returned would be saved to local storage, assuming the application is a web app, and then added to the HTTP headers of all subsequent requests to the API. </p> 
          <p>Just incase you were wondering, this is what our new record looks like in our table.</p> 
          <p><a href="https://jsao.io/wp-content/uploads/2015/06/user-with-hashed-pass-in-db.png" rel="prettyPhoto[gallery-WMde]"><img src="https://jsao.io/wp-content/uploads/2015/06/user-with-hashed-pass-in-db.png" alt="user with hashed password in db" width="1452" height="238" class="alignnone size-full wp-image-449" srcset="https://jsao.io/wp-content/uploads/2015/06/user-with-hashed-pass-in-db.png 1452w, https://jsao.io/wp-content/uploads/2015/06/user-with-hashed-pass-in-db-300x49.png 300w, https://jsao.io/wp-content/uploads/2015/06/user-with-hashed-pass-in-db-1024x168.png 1024w" sizes="(max-width: 1452px) 100vw, 1452px"></a></p> 
          <h4>Authenticating Users</h4> 
          <p>The token generated when creating a user will only be valid for 60 minutes (that can be adjusted), after which time requests will receive an error with the message “Token Expired”. At that point the application can redirect the user to a login screen where they can authenticate themselves to get a shiny new token. We’ll create the <span class="inline-code">logins.js</span> in our routes directory to contain this logic.</p> 
          <!-- Crayon Syntax Highlighter v_2.7.2_beta --> 
          <div id="crayon-59d380ad46900768914041" class="crayon-syntax crayon-theme-classic crayon-font-monaco crayon-os-pc print-yes notranslate" data-settings=" no-popup minimize scroll-mouseover" style=" margin-top: 12px; margin-bottom: 12px; font-size: 12px !important; line-height: 15px !important;"> 
           <div class="crayon-toolbar" data-settings=" show" style="font-size: 12px !important;height: 18px !important; line-height: 18px !important;">
            <span class="crayon-title">auth-api/routes/logins.js</span> 
            <div class="crayon-tools" style="font-size: 12px !important;height: 18px !important; line-height: 18px !important;">
             <div class="crayon-button crayon-copy-button" title="Copy">
              <div class="crayon-button-icon"></div>
             </div>
             <span class="crayon-language">JavaScript</span>
            </div>
           </div> 
           <div class="crayon-info" style="min-height: 16.8px !important; line-height: 16.8px !important;"></div> 
           <div class="crayon-plain-wrap">
            <textarea wrap="soft" class="crayon-plain print-no" data-settings="dblclick" readonly style="-moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4; font-size: 12px !important; line-height: 15px !important;">
var oracledb = require('oracledb');
var bcrypt = require('bcrypt');
var jwt = require('jsonwebtoken');
var config = require(__dirname + '../../config.js');

function post(req, res, next) {
    oracledb.getConnection(
        config.database,
        function(err, connection){
            if (err) {
                return next(err);
            }

            connection.execute(
                'select id as "id", ' +
                '   email as "email", ' +
                '   password as "password", ' +
                '   role as "role" ' +
                'from jsao_users ' +
                'where email = :email',
                {
                    email: req.body.email.toLowerCase()
                },
                {
                    outFormat: oracledb.OBJECT
                },
                function(err, results){
                    var user;

                    if (err) {
                        connection.release(function(err) {
                            if (err) {
                                console.error(err.message);
                            }
                        });

                        return next(err);
                    }

                    user = results.rows[0];

                    bcrypt.compare(req.body.password, user.password, function(err, pwMatch) {
                        var payload;

                        if (err) {
                            return next(err);
                        }

                        if (!pwMatch) {
                            res.status(401).send({message: 'Invalid email or password.'});
                            return;
                        }

                        payload = {
                            sub: user.email,
                            role: user.role
                        };

                        res.status(200).json({
                            user: user,
                            token: jwt.sign(payload, config.jwtSecretKey, {expiresInMinutes: 60})
                        });
                    });

                    connection.release(function(err) {
                        if (err) {
                            console.error(err.message);
                        }
                    });
                });
        }
    );
}

module.exports.post = post;</textarea>
           </div> 
           <div class="crayon-main" style=""> 
            <table class="crayon-table"> 
             <tbody>
              <tr class="crayon-row"> 
               <td class="crayon-nums " data-settings="show"> 
                <div class="crayon-nums-content" style="font-size: 12px !important; line-height: 15px !important;">
                 <div class="crayon-num" data-line="crayon-59d380ad46900768914041-1">
                  1
                 </div>
                 <div class="crayon-num crayon-striped-num" data-line="crayon-59d380ad46900768914041-2">
                  2
                 </div>
                 <div class="crayon-num" data-line="crayon-59d380ad46900768914041-3">
                  3
                 </div>
                 <div class="crayon-num crayon-striped-num" data-line="crayon-59d380ad46900768914041-4">
                  4
                 </div>
                 <div class="crayon-num" data-line="crayon-59d380ad46900768914041-5">
                  5
                 </div>
                 <div class="crayon-num crayon-striped-num" data-line="crayon-59d380ad46900768914041-6">
                  6
                 </div>
                 <div class="crayon-num" data-line="crayon-59d380ad46900768914041-7">
                  7
                 </div>
                 <div class="crayon-num crayon-striped-num" data-line="crayon-59d380ad46900768914041-8">
                  8
                 </div>
                 <div class="crayon-num" data-line="crayon-59d380ad46900768914041-9">
                  9
                 </div>
                 <div class="crayon-num crayon-striped-num" data-line="crayon-59d380ad46900768914041-10">
                  10
                 </div>
                 <div class="crayon-num" data-line="crayon-59d380ad46900768914041-11">
                  11
                 </div>
                 <div class="crayon-num crayon-striped-num" data-line="crayon-59d380ad46900768914041-12">
                  12
                 </div>
                 <div class="crayon-num" data-line="crayon-59d380ad46900768914041-13">
                  13
                 </div>
                 <div class="crayon-num crayon-striped-num" data-line="crayon-59d380ad46900768914041-14">
                  14
                 </div>
                 <div class="crayon-num" data-line="crayon-59d380ad46900768914041-15">
                  15
                 </div>
                 <div class="crayon-num crayon-striped-num" data-line="crayon-59d380ad46900768914041-16">
                  16
                 </div>
                 <div class="crayon-num" data-line="crayon-59d380ad46900768914041-17">
                  17
                 </div>
                 <div class="crayon-num crayon-striped-num" data-line="crayon-59d380ad46900768914041-18">
                  18
                 </div>
                 <div class="crayon-num" data-line="crayon-59d380ad46900768914041-19">
                  19
                 </div>
                 <div class="crayon-num crayon-striped-num" data-line="crayon-59d380ad46900768914041-20">
                  20
                 </div>
                 <div class="crayon-num" data-line="crayon-59d380ad46900768914041-21">
                  21
                 </div>
                 <div class="crayon-num crayon-striped-num" data-line="crayon-59d380ad46900768914041-22">
                  22
                 </div>
                 <div class="crayon-num" data-line="crayon-59d380ad46900768914041-23">
                  23
                 </div>
                 <div class="crayon-num crayon-striped-num" data-line="crayon-59d380ad46900768914041-24">
                  24
                 </div>
                 <div class="crayon-num" data-line="crayon-59d380ad46900768914041-25">
                  25
                 </div>
                 <div class="crayon-num crayon-striped-num" data-line="crayon-59d380ad46900768914041-26">
                  26
                 </div>
                 <div class="crayon-num" data-line="crayon-59d380ad46900768914041-27">
                  27
                 </div>
                 <div class="crayon-num crayon-striped-num" data-line="crayon-59d380ad46900768914041-28">
                  28
                 </div>
                 <div class="crayon-num" data-line="crayon-59d380ad46900768914041-29">
                  29
                 </div>
                 <div class="crayon-num crayon-striped-num" data-line="crayon-59d380ad46900768914041-30">
                  30
                 </div>
                 <div class="crayon-num" data-line="crayon-59d380ad46900768914041-31">
                  31
                 </div>
                 <div class="crayon-num crayon-striped-num" data-line="crayon-59d380ad46900768914041-32">
                  32
                 </div>
                 <div class="crayon-num" data-line="crayon-59d380ad46900768914041-33">
                  33
                 </div>
                 <div class="crayon-num crayon-striped-num" data-line="crayon-59d380ad46900768914041-34">
                  34
                 </div>
                 <div class="crayon-num" data-line="crayon-59d380ad46900768914041-35">
                  35
                 </div>
                 <div class="crayon-num crayon-striped-num" data-line="crayon-59d380ad46900768914041-36">
                  36
                 </div>
                 <div class="crayon-num" data-line="crayon-59d380ad46900768914041-37">
                  37
                 </div>
                 <div class="crayon-num crayon-striped-num" data-line="crayon-59d380ad46900768914041-38">
                  38
                 </div>
                 <div class="crayon-num" data-line="crayon-59d380ad46900768914041-39">
                  39
                 </div>
                 <div class="crayon-num crayon-striped-num" data-line="crayon-59d380ad46900768914041-40">
                  40
                 </div>
                 <div class="crayon-num" data-line="crayon-59d380ad46900768914041-41">
                  41
                 </div>
                 <div class="crayon-num crayon-striped-num" data-line="crayon-59d380ad46900768914041-42">
                  42
                 </div>
                 <div class="crayon-num" data-line="crayon-59d380ad46900768914041-43">
                  43
                 </div>
                 <div class="crayon-num crayon-striped-num" data-line="crayon-59d380ad46900768914041-44">
                  44
                 </div>
                 <div class="crayon-num" data-line="crayon-59d380ad46900768914041-45">
                  45
                 </div>
                 <div class="crayon-num crayon-striped-num" data-line="crayon-59d380ad46900768914041-46">
                  46
                 </div>
                 <div class="crayon-num" data-line="crayon-59d380ad46900768914041-47">
                  47
                 </div>
                 <div class="crayon-num crayon-striped-num" data-line="crayon-59d380ad46900768914041-48">
                  48
                 </div>
                 <div class="crayon-num" data-line="crayon-59d380ad46900768914041-49">
                  49
                 </div>
                 <div class="crayon-num crayon-striped-num" data-line="crayon-59d380ad46900768914041-50">
                  50
                 </div>
                 <div class="crayon-num" data-line="crayon-59d380ad46900768914041-51">
                  51
                 </div>
                 <div class="crayon-num crayon-striped-num" data-line="crayon-59d380ad46900768914041-52">
                  52
                 </div>
                 <div class="crayon-num" data-line="crayon-59d380ad46900768914041-53">
                  53
                 </div>
                 <div class="crayon-num crayon-striped-num" data-line="crayon-59d380ad46900768914041-54">
                  54
                 </div>
                 <div class="crayon-num" data-line="crayon-59d380ad46900768914041-55">
                  55
                 </div>
                 <div class="crayon-num crayon-striped-num" data-line="crayon-59d380ad46900768914041-56">
                  56
                 </div>
                 <div class="crayon-num" data-line="crayon-59d380ad46900768914041-57">
                  57
                 </div>
                 <div class="crayon-num crayon-striped-num" data-line="crayon-59d380ad46900768914041-58">
                  58
                 </div>
                 <div class="crayon-num" data-line="crayon-59d380ad46900768914041-59">
                  59
                 </div>
                 <div class="crayon-num crayon-striped-num" data-line="crayon-59d380ad46900768914041-60">
                  60
                 </div>
                 <div class="crayon-num" data-line="crayon-59d380ad46900768914041-61">
                  61
                 </div>
                 <div class="crayon-num crayon-striped-num" data-line="crayon-59d380ad46900768914041-62">
                  62
                 </div>
                 <div class="crayon-num" data-line="crayon-59d380ad46900768914041-63">
                  63
                 </div>
                 <div class="crayon-num crayon-striped-num" data-line="crayon-59d380ad46900768914041-64">
                  64
                 </div>
                 <div class="crayon-num" data-line="crayon-59d380ad46900768914041-65">
                  65
                 </div>
                 <div class="crayon-num crayon-striped-num" data-line="crayon-59d380ad46900768914041-66">
                  66
                 </div>
                 <div class="crayon-num" data-line="crayon-59d380ad46900768914041-67">
                  67
                 </div>
                 <div class="crayon-num crayon-striped-num" data-line="crayon-59d380ad46900768914041-68">
                  68
                 </div>
                 <div class="crayon-num" data-line="crayon-59d380ad46900768914041-69">
                  69
                 </div>
                 <div class="crayon-num crayon-striped-num" data-line="crayon-59d380ad46900768914041-70">
                  70
                 </div>
                 <div class="crayon-num" data-line="crayon-59d380ad46900768914041-71">
                  71
                 </div>
                 <div class="crayon-num crayon-striped-num" data-line="crayon-59d380ad46900768914041-72">
                  72
                 </div>
                 <div class="crayon-num" data-line="crayon-59d380ad46900768914041-73">
                  73
                 </div>
                 <div class="crayon-num crayon-striped-num" data-line="crayon-59d380ad46900768914041-74">
                  74
                 </div>
                 <div class="crayon-num" data-line="crayon-59d380ad46900768914041-75">
                  75
                 </div>
                </div> </td> 
               <td class="crayon-code">
                <div class="crayon-pre" style="font-size: 12px !important; line-height: 15px !important; -moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4;">
                 <div class="crayon-line" id="crayon-59d380ad46900768914041-1">
                  <span class="crayon-t">var</span>
                  <span class="crayon-h"> </span>
                  <span class="crayon-v">oracledb</span>
                  <span class="crayon-h"> </span>
                  <span class="crayon-o">=</span>
                  <span class="crayon-h"> </span>
                  <span class="crayon-e">require</span>
                  <span class="crayon-sy">(</span>
                  <span class="crayon-s">'oracledb'</span>
                  <span class="crayon-sy">)</span>
                  <span class="crayon-sy">;</span>
                 </div>
                 <div class="crayon-line crayon-striped-line" id="crayon-59d380ad46900768914041-2">
                  <span class="crayon-t">var</span>
                  <span class="crayon-h"> </span>
                  <span class="crayon-v">bcrypt</span>
                  <span class="crayon-h"> </span>
                  <span class="crayon-o">=</span>
                  <span class="crayon-h"> </span>
                  <span class="crayon-e">require</span>
                  <span class="crayon-sy">(</span>
                  <span class="crayon-s">'bcrypt'</span>
                  <span class="crayon-sy">)</span>
                  <span class="crayon-sy">;</span>
                 </div>
                 <div class="crayon-line" id="crayon-59d380ad46900768914041-3">
                  <span class="crayon-t">var</span>
                  <span class="crayon-h"> </span>
                  <span class="crayon-v">jwt</span>
                  <span class="crayon-h"> </span>
                  <span class="crayon-o">=</span>
                  <span class="crayon-h"> </span>
                  <span class="crayon-e">require</span>
                  <span class="crayon-sy">(</span>
                  <span class="crayon-s">'jsonwebtoken'</span>
                  <span class="crayon-sy">)</span>
                  <span class="crayon-sy">;</span>
                 </div>
                 <div class="crayon-line crayon-striped-line" id="crayon-59d380ad46900768914041-4">
                  <span class="crayon-t">var</span>
                  <span class="crayon-h"> </span>
                  <span class="crayon-v">config</span>
                  <span class="crayon-h"> </span>
                  <span class="crayon-o">=</span>
                  <span class="crayon-h"> </span>
                  <span class="crayon-e">require</span>
                  <span class="crayon-sy">(</span>
                  <span class="crayon-v">__dirname</span>
                  <span class="crayon-h"> </span>
                  <span class="crayon-o">+</span>
                  <span class="crayon-h"> </span>
                  <span class="crayon-s">'../../config.js'</span>
                  <span class="crayon-sy">)</span>
                  <span class="crayon-sy">;</span>
                 </div>
                 <div class="crayon-line" id="crayon-59d380ad46900768914041-5">
                  &nbsp;
                 </div>
                 <div class="crayon-line crayon-striped-line" id="crayon-59d380ad46900768914041-6">
                  <span class="crayon-t">function</span>
                  <span class="crayon-h"> </span>
                  <span class="crayon-e">post</span>
                  <span class="crayon-sy">(</span>
                  <span class="crayon-v">req</span>
                  <span class="crayon-sy">,</span>
                  <span class="crayon-h"> </span>
                  <span class="crayon-v">res</span>
                  <span class="crayon-sy">,</span>
                  <span class="crayon-h"> </span>
                  <span class="crayon-v">next</span>
                  <span class="crayon-sy">)</span>
                  <span class="crayon-h"> </span>
                  <span class="crayon-sy">{</span>
                 </div>
                 <div class="crayon-line" id="crayon-59d380ad46900768914041-7">
                  <span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;</span>
                  <span class="crayon-v">oracledb</span>
                  <span class="crayon-sy">.</span>
                  <span class="crayon-e">getConnection</span>
                  <span class="crayon-sy">(</span>
                 </div>
                 <div class="crayon-line crayon-striped-line" id="crayon-59d380ad46900768914041-8">
                  <span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span>
                  <span class="crayon-v">config</span>
                  <span class="crayon-sy">.</span>
                  <span class="crayon-v">database</span>
                  <span class="crayon-sy">,</span>
                 </div>
                 <div class="crayon-line" id="crayon-59d380ad46900768914041-9">
                  <span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span>
                  <span class="crayon-t">function</span>
                  <span class="crayon-sy">(</span>
                  <span class="crayon-v">err</span>
                  <span class="crayon-sy">,</span>
                  <span class="crayon-h"> </span>
                  <span class="crayon-v">connection</span>
                  <span class="crayon-sy">)</span>
                  <span class="crayon-sy">{</span>
                 </div>
                 <div class="crayon-line crayon-striped-line" id="crayon-59d380ad46900768914041-10">
                  <span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span>
                  <span class="crayon-st">if</span>
                  <span class="crayon-h"> </span>
                  <span class="crayon-sy">(</span>
                  <span class="crayon-v">err</span>
                  <span class="crayon-sy">)</span>
                  <span class="crayon-h"> </span>
                  <span class="crayon-sy">{</span>
                 </div>
                 <div class="crayon-line" id="crayon-59d380ad46900768914041-11">
                  <span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span>
                  <span class="crayon-st">return</span>
                  <span class="crayon-h"> </span>
                  <span class="crayon-e">next</span>
                  <span class="crayon-sy">(</span>
                  <span class="crayon-v">err</span>
                  <span class="crayon-sy">)</span>
                  <span class="crayon-sy">;</span>
                 </div>
                 <div class="crayon-line crayon-striped-line" id="crayon-59d380ad46900768914041-12">
                  <span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span>
                  <span class="crayon-sy">}</span>
                 </div>
                 <div class="crayon-line" id="crayon-59d380ad46900768914041-13">
                  &nbsp;
                 </div>
                 <div class="crayon-line crayon-striped-line" id="crayon-59d380ad46900768914041-14">
                  <span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span>
                  <span class="crayon-v">connection</span>
                  <span class="crayon-sy">.</span>
                  <span class="crayon-e">execute</span>
                  <span class="crayon-sy">(</span>
                 </div>
                 <div class="crayon-line" id="crayon-59d380ad46900768914041-15">
                  <span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span>
                  <span class="crayon-s">'select id as "id", '</span>
                  <span class="crayon-h"> </span>
                  <span class="crayon-o">+</span>
                 </div>
                 <div class="crayon-line crayon-striped-line" id="crayon-59d380ad46900768914041-16">
                  <span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span>
                  <span class="crayon-s">'&nbsp;&nbsp; email as "email", '</span>
                  <span class="crayon-h"> </span>
                  <span class="crayon-o">+</span>
                 </div>
                 <div class="crayon-line" id="crayon-59d380ad46900768914041-17">
                  <span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span>
                  <span class="crayon-s">'&nbsp;&nbsp; password as "password", '</span>
                  <span class="crayon-h"> </span>
                  <span class="crayon-o">+</span>
                 </div>
                 <div class="crayon-line crayon-striped-line" id="crayon-59d380ad46900768914041-18">
                  <span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span>
                  <span class="crayon-s">'&nbsp;&nbsp; role as "role" '</span>
                  <span class="crayon-h"> </span>
                  <span class="crayon-o">+</span>
                 </div>
                 <div class="crayon-line" id="crayon-59d380ad46900768914041-19">
                  <span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span>
                  <span class="crayon-s">'from jsao_users '</span>
                  <span class="crayon-h"> </span>
                  <span class="crayon-o">+</span>
                 </div>
                 <div class="crayon-line crayon-striped-line" id="crayon-59d380ad46900768914041-20">
                  <span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span>
                  <span class="crayon-s">'where email = :email'</span>
                  <span class="crayon-sy">,</span>
                 </div>
                 <div class="crayon-line" id="crayon-59d380ad46900768914041-21">
                  <span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span>
                  <span class="crayon-sy">{</span>
                 </div>
                 <div class="crayon-line crayon-striped-line" id="crayon-59d380ad46900768914041-22">
                  <span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span>
                  <span class="crayon-v">email</span>
                  <span class="crayon-o">:</span>
                  <span class="crayon-h"> </span>
                  <span class="crayon-v">req</span>
                  <span class="crayon-sy">.</span>
                  <span class="crayon-v">body</span>
                  <span class="crayon-sy">.</span>
                  <span class="crayon-v">email</span>
                  <span class="crayon-sy">.</span>
                  <span class="crayon-e">toLowerCase</span>
                  <span class="crayon-sy">(</span>
                  <span class="crayon-sy">)</span>
                 </div>
                 <div class="crayon-line" id="crayon-59d380ad46900768914041-23">
                  <span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span>
                  <span class="crayon-sy">}</span>
                  <span class="crayon-sy">,</span>
                 </div>
                 <div class="crayon-line crayon-striped-line" id="crayon-59d380ad46900768914041-24">
                  <span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span>
                  <span class="crayon-sy">{</span>
                 </div>
                 <div class="crayon-line" id="crayon-59d380ad46900768914041-25">
                  <span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span>
                  <span class="crayon-v">outFormat</span>
                  <span class="crayon-o">:</span>
                  <span class="crayon-h"> </span>
                  <span class="crayon-v">oracledb</span>
                  <span class="crayon-sy">.</span>
                  <span class="crayon-t">OBJECT</span>
                 </div>
                 <div class="crayon-line crayon-striped-line" id="crayon-59d380ad46900768914041-26">
                  <span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span>
                  <span class="crayon-sy">}</span>
                  <span class="crayon-sy">,</span>
                 </div>
                 <div class="crayon-line" id="crayon-59d380ad46900768914041-27">
                  <span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span>
                  <span class="crayon-t">function</span>
                  <span class="crayon-sy">(</span>
                  <span class="crayon-v">err</span>
                  <span class="crayon-sy">,</span>
                  <span class="crayon-h"> </span>
                  <span class="crayon-v">results</span>
                  <span class="crayon-sy">)</span>
                  <span class="crayon-sy">{</span>
                 </div>
                 <div class="crayon-line crayon-striped-line" id="crayon-59d380ad46900768914041-28">
                  <span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span>
                  <span class="crayon-t">var</span>
                  <span class="crayon-h"> </span>
                  <span class="crayon-v">user</span>
                  <span class="crayon-sy">;</span>
                 </div>
                 <div class="crayon-line" id="crayon-59d380ad46900768914041-29">
                  &nbsp;
                 </div>
                 <div class="crayon-line crayon-striped-line" id="crayon-59d380ad46900768914041-30">
                  <span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span>
                  <span class="crayon-st">if</span>
                  <span class="crayon-h"> </span>
                  <span class="crayon-sy">(</span>
                  <span class="crayon-v">err</span>
                  <span class="crayon-sy">)</span>
                  <span class="crayon-h"> </span>
                  <span class="crayon-sy">{</span>
                 </div>
                 <div class="crayon-line" id="crayon-59d380ad46900768914041-31">
                  <span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span>
                  <span class="crayon-v">connection</span>
                  <span class="crayon-sy">.</span>
                  <span class="crayon-e">release</span>
                  <span class="crayon-sy">(</span>
                  <span class="crayon-t">function</span>
                  <span class="crayon-sy">(</span>
                  <span class="crayon-v">err</span>
                  <span class="crayon-sy">)</span>
                  <span class="crayon-h"> </span>
                  <span class="crayon-sy">{</span>
                 </div>
                 <div class="crayon-line crayon-striped-line" id="crayon-59d380ad46900768914041-32">
                  <span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span>
                  <span class="crayon-st">if</span>
                  <span class="crayon-h"> </span>
                  <span class="crayon-sy">(</span>
                  <span class="crayon-v">err</span>
                  <span class="crayon-sy">)</span>
                  <span class="crayon-h"> </span>
                  <span class="crayon-sy">{</span>
                 </div>
                 <div class="crayon-line" id="crayon-59d380ad46900768914041-33">
                  <span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span>
                  <span class="crayon-v">console</span>
                  <span class="crayon-sy">.</span>
                  <span class="crayon-e">error</span>
                  <span class="crayon-sy">(</span>
                  <span class="crayon-v">err</span>
                  <span class="crayon-sy">.</span>
                  <span class="crayon-v">message</span>
                  <span class="crayon-sy">)</span>
                  <span class="crayon-sy">;</span>
                 </div>
                 <div class="crayon-line crayon-striped-line" id="crayon-59d380ad46900768914041-34">
                  <span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span>
                  <span class="crayon-sy">}</span>
                 </div>
                 <div class="crayon-line" id="crayon-59d380ad46900768914041-35">
                  <span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span>
                  <span class="crayon-sy">}</span>
                  <span class="crayon-sy">)</span>
                  <span class="crayon-sy">;</span>
                 </div>
                 <div class="crayon-line crayon-striped-line" id="crayon-59d380ad46900768914041-36">
                  &nbsp;
                 </div>
                 <div class="crayon-line" id="crayon-59d380ad46900768914041-37">
                  <span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span>
                  <span class="crayon-st">return</span>
                  <span class="crayon-h"> </span>
                  <span class="crayon-e">next</span>
                  <span class="crayon-sy">(</span>
                  <span class="crayon-v">err</span>
                  <span class="crayon-sy">)</span>
                  <span class="crayon-sy">;</span>
                 </div>
                 <div class="crayon-line crayon-striped-line" id="crayon-59d380ad46900768914041-38">
                  <span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span>
                  <span class="crayon-sy">}</span>
                 </div>
                 <div class="crayon-line" id="crayon-59d380ad46900768914041-39">
                  &nbsp;
                 </div>
                 <div class="crayon-line crayon-striped-line" id="crayon-59d380ad46900768914041-40">
                  <span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span>
                  <span class="crayon-v">user</span>
                  <span class="crayon-h"> </span>
                  <span class="crayon-o">=</span>
                  <span class="crayon-h"> </span>
                  <span class="crayon-v">results</span>
                  <span class="crayon-sy">.</span>
                  <span class="crayon-v">rows</span>
                  <span class="crayon-sy">[</span>
                  <span class="crayon-cn">0</span>
                  <span class="crayon-sy">]</span>
                  <span class="crayon-sy">;</span>
                 </div>
                 <div class="crayon-line" id="crayon-59d380ad46900768914041-41">
                  &nbsp;
                 </div>
                 <div class="crayon-line crayon-striped-line" id="crayon-59d380ad46900768914041-42">
                  <span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span>
                  <span class="crayon-v">bcrypt</span>
                  <span class="crayon-sy">.</span>
                  <span class="crayon-e">compare</span>
                  <span class="crayon-sy">(</span>
                  <span class="crayon-v">req</span>
                  <span class="crayon-sy">.</span>
                  <span class="crayon-v">body</span>
                  <span class="crayon-sy">.</span>
                  <span class="crayon-v">password</span>
                  <span class="crayon-sy">,</span>
                  <span class="crayon-h"> </span>
                  <span class="crayon-v">user</span>
                  <span class="crayon-sy">.</span>
                  <span class="crayon-v">password</span>
                  <span class="crayon-sy">,</span>
                  <span class="crayon-h"> </span>
                  <span class="crayon-t">function</span>
                  <span class="crayon-sy">(</span>
                  <span class="crayon-v">err</span>
                  <span class="crayon-sy">,</span>
                  <span class="crayon-h"> </span>
                  <span class="crayon-v">pwMatch</span>
                  <span class="crayon-sy">)</span>
                  <span class="crayon-h"> </span>
                  <span class="crayon-sy">{</span>
                 </div>
                 <div class="crayon-line" id="crayon-59d380ad46900768914041-43">
                  <span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span>
                  <span class="crayon-t">var</span>
                  <span class="crayon-h"> </span>
                  <span class="crayon-v">payload</span>
                  <span class="crayon-sy">;</span>
                 </div>
                 <div class="crayon-line crayon-striped-line" id="crayon-59d380ad46900768914041-44">
                  &nbsp;
                 </div>
                 <div class="crayon-line" id="crayon-59d380ad46900768914041-45">
                  <span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span>
                  <span class="crayon-st">if</span>
                  <span class="crayon-h"> </span>
                  <span class="crayon-sy">(</span>
                  <span class="crayon-v">err</span>
                  <span class="crayon-sy">)</span>
                  <span class="crayon-h"> </span>
                  <span class="crayon-sy">{</span>
                 </div>
                 <div class="crayon-line crayon-striped-line" id="crayon-59d380ad46900768914041-46">
                  <span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span>
                  <span class="crayon-st">return</span>
                  <span class="crayon-h"> </span>
                  <span class="crayon-e">next</span>
                  <span class="crayon-sy">(</span>
                  <span class="crayon-v">err</span>
                  <span class="crayon-sy">)</span>
                  <span class="crayon-sy">;</span>
                 </div>
                 <div class="crayon-line" id="crayon-59d380ad46900768914041-47">
                  <span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span>
                  <span class="crayon-sy">}</span>
                 </div>
                 <div class="crayon-line crayon-striped-line" id="crayon-59d380ad46900768914041-48">
                  &nbsp;
                 </div>
                 <div class="crayon-line" id="crayon-59d380ad46900768914041-49">
                  <span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span>
                  <span class="crayon-st">if</span>
                  <span class="crayon-h"> </span>
                  <span class="crayon-sy">(</span>
                  <span class="crayon-o">!</span>
                  <span class="crayon-v">pwMatch</span>
                  <span class="crayon-sy">)</span>
                  <span class="crayon-h"> </span>
                  <span class="crayon-sy">{</span>
                 </div>
                 <div class="crayon-line crayon-striped-line" id="crayon-59d380ad46900768914041-50">
                  <span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span>
                  <span class="crayon-v">res</span>
                  <span class="crayon-sy">.</span>
                  <span class="crayon-e">status</span>
                  <span class="crayon-sy">(</span>
                  <span class="crayon-cn">401</span>
                  <span class="crayon-sy">)</span>
                  <span class="crayon-sy">.</span>
                  <span class="crayon-e">send</span>
                  <span class="crayon-sy">(</span>
                  <span class="crayon-sy">{</span>
                  <span class="crayon-v">message</span>
                  <span class="crayon-o">:</span>
                  <span class="crayon-h"> </span>
                  <span class="crayon-s">'Invalid email or password.'</span>
                  <span class="crayon-sy">}</span>
                  <span class="crayon-sy">)</span>
                  <span class="crayon-sy">;</span>
                 </div>
                 <div class="crayon-line" id="crayon-59d380ad46900768914041-51">
                  <span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span>
                  <span class="crayon-st">return</span>
                  <span class="crayon-sy">;</span>
                 </div>
                 <div class="crayon-line crayon-striped-line" id="crayon-59d380ad46900768914041-52">
                  <span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span>
                  <span class="crayon-sy">}</span>
                 </div>
                 <div class="crayon-line" id="crayon-59d380ad46900768914041-53">
                  &nbsp;
                 </div>
                 <div class="crayon-line crayon-striped-line" id="crayon-59d380ad46900768914041-54">
                  <span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span>
                  <span class="crayon-v">payload</span>
                  <span class="crayon-h"> </span>
                  <span class="crayon-o">=</span>
                  <span class="crayon-h"> </span>
                  <span class="crayon-sy">{</span>
                 </div>
                 <div class="crayon-line" id="crayon-59d380ad46900768914041-55">
                  <span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span>
                  <span class="crayon-v">sub</span>
                  <span class="crayon-o">:</span>
                  <span class="crayon-h"> </span>
                  <span class="crayon-v">user</span>
                  <span class="crayon-sy">.</span>
                  <span class="crayon-v">email</span>
                  <span class="crayon-sy">,</span>
                 </div>
                 <div class="crayon-line crayon-striped-line" id="crayon-59d380ad46900768914041-56">
                  <span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span>
                  <span class="crayon-v">role</span>
                  <span class="crayon-o">:</span>
                  <span class="crayon-h"> </span>
                  <span class="crayon-v">user</span>
                  <span class="crayon-sy">.</span>
                  <span class="crayon-i">role</span>
                 </div>
                 <div class="crayon-line" id="crayon-59d380ad46900768914041-57">
                  <span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span>
                  <span class="crayon-sy">}</span>
                  <span class="crayon-sy">;</span>
                 </div>
                 <div class="crayon-line crayon-striped-line" id="crayon-59d380ad46900768914041-58">
                  &nbsp;
                 </div>
                 <div class="crayon-line" id="crayon-59d380ad46900768914041-59">
                  <span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span>
                  <span class="crayon-v">res</span>
                  <span class="crayon-sy">.</span>
                  <span class="crayon-e">status</span>
                  <span class="crayon-sy">(</span>
                  <span class="crayon-cn">200</span>
                  <span class="crayon-sy">)</span>
                  <span class="crayon-sy">.</span>
                  <span class="crayon-e">json</span>
                  <span class="crayon-sy">(</span>
                  <span class="crayon-sy">{</span>
                 </div>
                 <div class="crayon-line crayon-striped-line" id="crayon-59d380ad46900768914041-60">
                  <span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span>
                  <span class="crayon-v">user</span>
                  <span class="crayon-o">:</span>
                  <span class="crayon-h"> </span>
                  <span class="crayon-v">user</span>
                  <span class="crayon-sy">,</span>
                 </div>
                 <div class="crayon-line" id="crayon-59d380ad46900768914041-61">
                  <span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span>
                  <span class="crayon-v">token</span>
                  <span class="crayon-o">:</span>
                  <span class="crayon-h"> </span>
                  <span class="crayon-v">jwt</span>
                  <span class="crayon-sy">.</span>
                  <span class="crayon-e">sign</span>
                  <span class="crayon-sy">(</span>
                  <span class="crayon-v">payload</span>
                  <span class="crayon-sy">,</span>
                  <span class="crayon-h"> </span>
                  <span class="crayon-v">config</span>
                  <span class="crayon-sy">.</span>
                  <span class="crayon-v">jwtSecretKey</span>
                  <span class="crayon-sy">,</span>
                  <span class="crayon-h"> </span>
                  <span class="crayon-sy">{</span>
                  <span class="crayon-v">expiresInMinutes</span>
                  <span class="crayon-o">:</span>
                  <span class="crayon-h"> </span>
                  <span class="crayon-cn">60</span>
                  <span class="crayon-sy">}</span>
                  <span class="crayon-sy">)</span>
                 </div>
                 <div class="crayon-line crayon-striped-line" id="crayon-59d380ad46900768914041-62">
                  <span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span>
                  <span class="crayon-sy">}</span>
                  <span class="crayon-sy">)</span>
                  <span class="crayon-sy">;</span>
                 </div>
                 <div class="crayon-line" id="crayon-59d380ad46900768914041-63">
                  <span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span>
                  <span class="crayon-sy">}</span>
                  <span class="crayon-sy">)</span>
                  <span class="crayon-sy">;</span>
                 </div>
                 <div class="crayon-line crayon-striped-line" id="crayon-59d380ad46900768914041-64">
                  &nbsp;
                 </div>
                 <div class="crayon-line" id="crayon-59d380ad46900768914041-65">
                  <span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span>
                  <span class="crayon-v">connection</span>
                  <span class="crayon-sy">.</span>
                  <span class="crayon-e">release</span>
                  <span class="crayon-sy">(</span>
                  <span class="crayon-t">function</span>
                  <span class="crayon-sy">(</span>
                  <span class="crayon-v">err</span>
                  <span class="crayon-sy">)</span>
                  <span class="crayon-h"> </span>
                  <span class="crayon-sy">{</span>
                 </div>
                 <div class="crayon-line crayon-striped-line" id="crayon-59d380ad46900768914041-66">
                  <span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span>
                  <span class="crayon-st">if</span>
                  <span class="crayon-h"> </span>
                  <span class="crayon-sy">(</span>
                  <span class="crayon-v">err</span>
                  <span class="crayon-sy">)</span>
                  <span class="crayon-h"> </span>
                  <span class="crayon-sy">{</span>
                 </div>
                 <div class="crayon-line" id="crayon-59d380ad46900768914041-67">
                  <span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span>
                  <span class="crayon-v">console</span>
                  <span class="crayon-sy">.</span>
                  <span class="crayon-e">error</span>
                  <span class="crayon-sy">(</span>
                  <span class="crayon-v">err</span>
                  <span class="crayon-sy">.</span>
                  <span class="crayon-v">message</span>
                  <span class="crayon-sy">)</span>
                  <span class="crayon-sy">;</span>
                 </div>
                 <div class="crayon-line crayon-striped-line" id="crayon-59d380ad46900768914041-68">
                  <span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span>
                  <span class="crayon-sy">}</span>
                 </div>
                 <div class="crayon-line" id="crayon-59d380ad46900768914041-69">
                  <span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span>
                  <span class="crayon-sy">}</span>
                  <span class="crayon-sy">)</span>
                  <span class="crayon-sy">;</span>
                 </div>
                 <div class="crayon-line crayon-striped-line" id="crayon-59d380ad46900768914041-70">
                  <span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span>
                  <span class="crayon-sy">}</span>
                  <span class="crayon-sy">)</span>
                  <span class="crayon-sy">;</span>
                 </div>
                 <div class="crayon-line" id="crayon-59d380ad46900768914041-71">
                  <span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span>
                  <span class="crayon-sy">}</span>
                 </div>
                 <div class="crayon-line crayon-striped-line" id="crayon-59d380ad46900768914041-72">
                  <span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;</span>
                  <span class="crayon-sy">)</span>
                  <span class="crayon-sy">;</span>
                 </div>
                 <div class="crayon-line" id="crayon-59d380ad46900768914041-73">
                  <span class="crayon-sy">}</span>
                 </div>
                 <div class="crayon-line crayon-striped-line" id="crayon-59d380ad46900768914041-74">
                  &nbsp;
                 </div>
                 <div class="crayon-line" id="crayon-59d380ad46900768914041-75">
                  <span class="crayon-v">module</span>
                  <span class="crayon-sy">.</span>
                  <span class="crayon-v">exports</span>
                  <span class="crayon-sy">.</span>
                  <span class="crayon-v">post</span>
                  <span class="crayon-h"> </span>
                  <span class="crayon-o">=</span>
                  <span class="crayon-h"> </span>
                  <span class="crayon-v">post</span>
                  <span class="crayon-sy">;</span>
                 </div>
                </div></td> 
              </tr> 
             </tbody>
            </table> 
           </div> 
          </div> 
          <!-- [Format Time: 0.0074 seconds] --> 
          <p><span class="inline-code">logins.js</span> fetches the user information, including the hashed password, from the database. It then uses the <span class="inline-code">brcypt</span> module to compare the hashed password to the password that was sent in the POST to <span class="inline-code">/api/logins</span> route. If a match is found then a new token is generated and sent to the client.</p> 
          <p>As before, we need to update <span class="inline-code">server.js</span> to map the new route through.</p>
          <!-- Crayon Syntax Highlighter v_2.7.2_beta --> 
          <div id="crayon-59d380ad4690a242057476" class="crayon-syntax crayon-theme-classic crayon-font-monaco crayon-os-pc print-yes notranslate" data-settings=" no-popup minimize scroll-mouseover" style=" margin-top: 12px; margin-bottom: 12px; font-size: 12px !important; line-height: 15px !important;"> 
           <div class="crayon-toolbar" data-settings=" show" style="font-size: 12px !important;height: 18px !important; line-height: 18px !important;">
            <span class="crayon-title">auth-api/server.js</span> 
            <div class="crayon-tools" style="font-size: 12px !important;height: 18px !important; line-height: 18px !important;">
             <div class="crayon-button crayon-copy-button" title="Copy">
              <div class="crayon-button-icon"></div>
             </div>
             <span class="crayon-language">JavaScript</span>
            </div>
           </div> 
           <div class="crayon-info" style="min-height: 16.8px !important; line-height: 16.8px !important;"></div> 
           <div class="crayon-plain-wrap">
            <textarea wrap="soft" class="crayon-plain print-no" data-settings="dblclick" readonly style="-moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4; font-size: 12px !important; line-height: 15px !important;">
var express = require('express');
var morgan = require('morgan');
var bodyParser = require('body-parser');
var publicThings = require(__dirname + '/routes/publicThings.js');
var protectedThings = require(__dirname + '/routes/protectedThings.js');
var users = require(__dirname + '/routes/users.js');
var logins = require(__dirname + '/routes/logins.js');
var app;
var router;
var port = 3000;

app = express();

app.use(morgan('combined')); //logger
app.use(bodyParser.json());

router = express.Router();

router.get('/public_things', publicThings.get);
router.get('/protected_things', protectedThings.get);
router.post('/users', users.post);
router.post('/logins', logins.post);

app.use('/api', router);

app.listen(port, function() {
    console.log('Web server listening on localhost:' + port);
});</textarea>
           </div> 
           <div class="crayon-main" style=""> 
            <table class="crayon-table"> 
             <tbody>
              <tr class="crayon-row"> 
               <td class="crayon-nums " data-settings="show"> 
                <div class="crayon-nums-content" style="font-size: 12px !important; line-height: 15px !important;">
                 <div class="crayon-num" data-line="crayon-59d380ad4690a242057476-1">
                  1
                 </div>
                 <div class="crayon-num crayon-striped-num" data-line="crayon-59d380ad4690a242057476-2">
                  2
                 </div>
                 <div class="crayon-num" data-line="crayon-59d380ad4690a242057476-3">
                  3
                 </div>
                 <div class="crayon-num crayon-striped-num" data-line="crayon-59d380ad4690a242057476-4">
                  4
                 </div>
                 <div class="crayon-num" data-line="crayon-59d380ad4690a242057476-5">
                  5
                 </div>
                 <div class="crayon-num crayon-striped-num" data-line="crayon-59d380ad4690a242057476-6">
                  6
                 </div>
                 <div class="crayon-num crayon-marked-num crayon-top crayon-bottom" data-line="crayon-59d380ad4690a242057476-7">
                  7
                 </div>
                 <div class="crayon-num crayon-striped-num" data-line="crayon-59d380ad4690a242057476-8">
                  8
                 </div>
                 <div class="crayon-num" data-line="crayon-59d380ad4690a242057476-9">
                  9
                 </div>
                 <div class="crayon-num crayon-striped-num" data-line="crayon-59d380ad4690a242057476-10">
                  10
                 </div>
                 <div class="crayon-num" data-line="crayon-59d380ad4690a242057476-11">
                  11
                 </div>
                 <div class="crayon-num crayon-striped-num" data-line="crayon-59d380ad4690a242057476-12">
                  12
                 </div>
                 <div class="crayon-num" data-line="crayon-59d380ad4690a242057476-13">
                  13
                 </div>
                 <div class="crayon-num crayon-striped-num" data-line="crayon-59d380ad4690a242057476-14">
                  14
                 </div>
                 <div class="crayon-num" data-line="crayon-59d380ad4690a242057476-15">
                  15
                 </div>
                 <div class="crayon-num crayon-striped-num" data-line="crayon-59d380ad4690a242057476-16">
                  16
                 </div>
                 <div class="crayon-num" data-line="crayon-59d380ad4690a242057476-17">
                  17
                 </div>
                 <div class="crayon-num crayon-striped-num" data-line="crayon-59d380ad4690a242057476-18">
                  18
                 </div>
                 <div class="crayon-num" data-line="crayon-59d380ad4690a242057476-19">
                  19
                 </div>
                 <div class="crayon-num crayon-striped-num" data-line="crayon-59d380ad4690a242057476-20">
                  20
                 </div>
                 <div class="crayon-num" data-line="crayon-59d380ad4690a242057476-21">
                  21
                 </div>
                 <div class="crayon-num crayon-marked-num crayon-top crayon-bottom crayon-striped-num" data-line="crayon-59d380ad4690a242057476-22">
                  22
                 </div>
                 <div class="crayon-num" data-line="crayon-59d380ad4690a242057476-23">
                  23
                 </div>
                 <div class="crayon-num crayon-striped-num" data-line="crayon-59d380ad4690a242057476-24">
                  24
                 </div>
                 <div class="crayon-num" data-line="crayon-59d380ad4690a242057476-25">
                  25
                 </div>
                 <div class="crayon-num crayon-striped-num" data-line="crayon-59d380ad4690a242057476-26">
                  26
                 </div>
                 <div class="crayon-num" data-line="crayon-59d380ad4690a242057476-27">
                  27
                 </div>
                 <div class="crayon-num crayon-striped-num" data-line="crayon-59d380ad4690a242057476-28">
                  28
                 </div>
                </div> </td> 
               <td class="crayon-code">
                <div class="crayon-pre" style="font-size: 12px !important; line-height: 15px !important; -moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4;">
                 <div class="crayon-line" id="crayon-59d380ad4690a242057476-1">
                  <span class="crayon-t">var</span>
                  <span class="crayon-h"> </span>
                  <span class="crayon-v">express</span>
                  <span class="crayon-h"> </span>
                  <span class="crayon-o">=</span>
                  <span class="crayon-h"> </span>
                  <span class="crayon-e">require</span>
                  <span class="crayon-sy">(</span>
                  <span class="crayon-s">'express'</span>
                  <span class="crayon-sy">)</span>
                  <span class="crayon-sy">;</span>
                 </div>
                 <div class="crayon-line crayon-striped-line" id="crayon-59d380ad4690a242057476-2">
                  <span class="crayon-t">var</span>
                  <span class="crayon-h"> </span>
                  <span class="crayon-v">morgan</span>
                  <span class="crayon-h"> </span>
                  <span class="crayon-o">=</span>
                  <span class="crayon-h"> </span>
                  <span class="crayon-e">require</span>
                  <span class="crayon-sy">(</span>
                  <span class="crayon-s">'morgan'</span>
                  <span class="crayon-sy">)</span>
                  <span class="crayon-sy">;</span>
                 </div>
                 <div class="crayon-line" id="crayon-59d380ad4690a242057476-3">
                  <span class="crayon-t">var</span>
                  <span class="crayon-h"> </span>
                  <span class="crayon-v">bodyParser</span>
                  <span class="crayon-h"> </span>
                  <span class="crayon-o">=</span>
                  <span class="crayon-h"> </span>
                  <span class="crayon-e">require</span>
                  <span class="crayon-sy">(</span>
                  <span class="crayon-s">'body-parser'</span>
                  <span class="crayon-sy">)</span>
                  <span class="crayon-sy">;</span>
                 </div>
                 <div class="crayon-line crayon-striped-line" id="crayon-59d380ad4690a242057476-4">
                  <span class="crayon-t">var</span>
                  <span class="crayon-h"> </span>
                  <span class="crayon-v">publicThings</span>
                  <span class="crayon-h"> </span>
                  <span class="crayon-o">=</span>
                  <span class="crayon-h"> </span>
                  <span class="crayon-e">require</span>
                  <span class="crayon-sy">(</span>
                  <span class="crayon-v">__dirname</span>
                  <span class="crayon-h"> </span>
                  <span class="crayon-o">+</span>
                  <span class="crayon-h"> </span>
                  <span class="crayon-s">'/routes/publicThings.js'</span>
                  <span class="crayon-sy">)</span>
                  <span class="crayon-sy">;</span>
                 </div>
                 <div class="crayon-line" id="crayon-59d380ad4690a242057476-5">
                  <span class="crayon-t">var</span>
                  <span class="crayon-h"> </span>
                  <span class="crayon-v">protectedThings</span>
                  <span class="crayon-h"> </span>
                  <span class="crayon-o">=</span>
                  <span class="crayon-h"> </span>
                  <span class="crayon-e">require</span>
                  <span class="crayon-sy">(</span>
                  <span class="crayon-v">__dirname</span>
                  <span class="crayon-h"> </span>
                  <span class="crayon-o">+</span>
                  <span class="crayon-h"> </span>
                  <span class="crayon-s">'/routes/protectedThings.js'</span>
                  <span class="crayon-sy">)</span>
                  <span class="crayon-sy">;</span>
                 </div>
                 <div class="crayon-line crayon-striped-line" id="crayon-59d380ad4690a242057476-6">
                  <span class="crayon-t">var</span>
                  <span class="crayon-h"> </span>
                  <span class="crayon-v">users</span>
                  <span class="crayon-h"> </span>
                  <span class="crayon-o">=</span>
                  <span class="crayon-h"> </span>
                  <span class="crayon-e">require</span>
                  <span class="crayon-sy">(</span>
                  <span class="crayon-v">__dirname</span>
                  <span class="crayon-h"> </span>
                  <span class="crayon-o">+</span>
                  <span class="crayon-h"> </span>
                  <span class="crayon-s">'/routes/users.js'</span>
                  <span class="crayon-sy">)</span>
                  <span class="crayon-sy">;</span>
                 </div>
                 <div class="crayon-line crayon-marked-line crayon-top crayon-bottom" id="crayon-59d380ad4690a242057476-7">
                  <span class="crayon-t">var</span>
                  <span class="crayon-h"> </span>
                  <span class="crayon-v">logins</span>
                  <span class="crayon-h"> </span>
                  <span class="crayon-o">=</span>
                  <span class="crayon-h"> </span>
                  <span class="crayon-e">require</span>
                  <span class="crayon-sy">(</span>
                  <span class="crayon-v">__dirname</span>
                  <span class="crayon-h"> </span>
                  <span class="crayon-o">+</span>
                  <span class="crayon-h"> </span>
                  <span class="crayon-s">'/routes/logins.js'</span>
                  <span class="crayon-sy">)</span>
                  <span class="crayon-sy">;</span>
                 </div>
                 <div class="crayon-line crayon-striped-line" id="crayon-59d380ad4690a242057476-8">
                  <span class="crayon-t">var</span>
                  <span class="crayon-h"> </span>
                  <span class="crayon-v">app</span>
                  <span class="crayon-sy">;</span>
                 </div>
                 <div class="crayon-line" id="crayon-59d380ad4690a242057476-9">
                  <span class="crayon-t">var</span>
                  <span class="crayon-h"> </span>
                  <span class="crayon-v">router</span>
                  <span class="crayon-sy">;</span>
                 </div>
                 <div class="crayon-line crayon-striped-line" id="crayon-59d380ad4690a242057476-10">
                  <span class="crayon-t">var</span>
                  <span class="crayon-h"> </span>
                  <span class="crayon-v">port</span>
                  <span class="crayon-h"> </span>
                  <span class="crayon-o">=</span>
                  <span class="crayon-h"> </span>
                  <span class="crayon-cn">3000</span>
                  <span class="crayon-sy">;</span>
                 </div>
                 <div class="crayon-line" id="crayon-59d380ad4690a242057476-11">
                  &nbsp;
                 </div>
                 <div class="crayon-line crayon-striped-line" id="crayon-59d380ad4690a242057476-12">
                  <span class="crayon-v">app</span>
                  <span class="crayon-h"> </span>
                  <span class="crayon-o">=</span>
                  <span class="crayon-h"> </span>
                  <span class="crayon-e">express</span>
                  <span class="crayon-sy">(</span>
                  <span class="crayon-sy">)</span>
                  <span class="crayon-sy">;</span>
                 </div>
                 <div class="crayon-line" id="crayon-59d380ad4690a242057476-13">
                  &nbsp;
                 </div>
                 <div class="crayon-line crayon-striped-line" id="crayon-59d380ad4690a242057476-14">
                  <span class="crayon-v">app</span>
                  <span class="crayon-sy">.</span>
                  <span class="crayon-st">use</span>
                  <span class="crayon-sy">(</span>
                  <span class="crayon-e">morgan</span>
                  <span class="crayon-sy">(</span>
                  <span class="crayon-s">'combined'</span>
                  <span class="crayon-sy">)</span>
                  <span class="crayon-sy">)</span>
                  <span class="crayon-sy">;</span>
                  <span class="crayon-h"> </span>
                  <span class="crayon-c">//logger</span>
                 </div>
                 <div class="crayon-line" id="crayon-59d380ad4690a242057476-15">
                  <span class="crayon-v">app</span>
                  <span class="crayon-sy">.</span>
                  <span class="crayon-st">use</span>
                  <span class="crayon-sy">(</span>
                  <span class="crayon-v">bodyParser</span>
                  <span class="crayon-sy">.</span>
                  <span class="crayon-e">json</span>
                  <span class="crayon-sy">(</span>
                  <span class="crayon-sy">)</span>
                  <span class="crayon-sy">)</span>
                  <span class="crayon-sy">;</span>
                 </div>
                 <div class="crayon-line crayon-striped-line" id="crayon-59d380ad4690a242057476-16">
                  &nbsp;
                 </div>
                 <div class="crayon-line" id="crayon-59d380ad4690a242057476-17">
                  <span class="crayon-v">router</span>
                  <span class="crayon-h"> </span>
                  <span class="crayon-o">=</span>
                  <span class="crayon-h"> </span>
                  <span class="crayon-v">express</span>
                  <span class="crayon-sy">.</span>
                  <span class="crayon-e">Router</span>
                  <span class="crayon-sy">(</span>
                  <span class="crayon-sy">)</span>
                  <span class="crayon-sy">;</span>
                 </div>
                 <div class="crayon-line crayon-striped-line" id="crayon-59d380ad4690a242057476-18">
                  &nbsp;
                 </div>
                 <div class="crayon-line" id="crayon-59d380ad4690a242057476-19">
                  <span class="crayon-v">router</span>
                  <span class="crayon-sy">.</span>
                  <span class="crayon-e">get</span>
                  <span class="crayon-sy">(</span>
                  <span class="crayon-s">'/public_things'</span>
                  <span class="crayon-sy">,</span>
                  <span class="crayon-h"> </span>
                  <span class="crayon-v">publicThings</span>
                  <span class="crayon-sy">.</span>
                  <span class="crayon-v">get</span>
                  <span class="crayon-sy">)</span>
                  <span class="crayon-sy">;</span>
                 </div>
                 <div class="crayon-line crayon-striped-line" id="crayon-59d380ad4690a242057476-20">
                  <span class="crayon-v">router</span>
                  <span class="crayon-sy">.</span>
                  <span class="crayon-e">get</span>
                  <span class="crayon-sy">(</span>
                  <span class="crayon-s">'/protected_things'</span>
                  <span class="crayon-sy">,</span>
                  <span class="crayon-h"> </span>
                  <span class="crayon-v">protectedThings</span>
                  <span class="crayon-sy">.</span>
                  <span class="crayon-v">get</span>
                  <span class="crayon-sy">)</span>
                  <span class="crayon-sy">;</span>
                 </div>
                 <div class="crayon-line" id="crayon-59d380ad4690a242057476-21">
                  <span class="crayon-v">router</span>
                  <span class="crayon-sy">.</span>
                  <span class="crayon-e">post</span>
                  <span class="crayon-sy">(</span>
                  <span class="crayon-s">'/users'</span>
                  <span class="crayon-sy">,</span>
                  <span class="crayon-h"> </span>
                  <span class="crayon-v">users</span>
                  <span class="crayon-sy">.</span>
                  <span class="crayon-v">post</span>
                  <span class="crayon-sy">)</span>
                  <span class="crayon-sy">;</span>
                 </div>
                 <div class="crayon-line crayon-marked-line crayon-top crayon-bottom crayon-striped-line" id="crayon-59d380ad4690a242057476-22">
                  <span class="crayon-v">router</span>
                  <span class="crayon-sy">.</span>
                  <span class="crayon-e">post</span>
                  <span class="crayon-sy">(</span>
                  <span class="crayon-s">'/logins'</span>
                  <span class="crayon-sy">,</span>
                  <span class="crayon-h"> </span>
                  <span class="crayon-v">logins</span>
                  <span class="crayon-sy">.</span>
                  <span class="crayon-v">post</span>
                  <span class="crayon-sy">)</span>
                  <span class="crayon-sy">;</span>
                 </div>
                 <div class="crayon-line" id="crayon-59d380ad4690a242057476-23">
                  &nbsp;
                 </div>
                 <div class="crayon-line crayon-striped-line" id="crayon-59d380ad4690a242057476-24">
                  <span class="crayon-v">app</span>
                  <span class="crayon-sy">.</span>
                  <span class="crayon-st">use</span>
                  <span class="crayon-sy">(</span>
                  <span class="crayon-s">'/api'</span>
                  <span class="crayon-sy">,</span>
                  <span class="crayon-h"> </span>
                  <span class="crayon-v">router</span>
                  <span class="crayon-sy">)</span>
                  <span class="crayon-sy">;</span>
                 </div>
                 <div class="crayon-line" id="crayon-59d380ad4690a242057476-25">
                  &nbsp;
                 </div>
                 <div class="crayon-line crayon-striped-line" id="crayon-59d380ad4690a242057476-26">
                  <span class="crayon-v">app</span>
                  <span class="crayon-sy">.</span>
                  <span class="crayon-e">listen</span>
                  <span class="crayon-sy">(</span>
                  <span class="crayon-v">port</span>
                  <span class="crayon-sy">,</span>
                  <span class="crayon-h"> </span>
                  <span class="crayon-t">function</span>
                  <span class="crayon-sy">(</span>
                  <span class="crayon-sy">)</span>
                  <span class="crayon-h"> </span>
                  <span class="crayon-sy">{</span>
                 </div>
                 <div class="crayon-line" id="crayon-59d380ad4690a242057476-27">
                  <span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;</span>
                  <span class="crayon-v">console</span>
                  <span class="crayon-sy">.</span>
                  <span class="crayon-e">log</span>
                  <span class="crayon-sy">(</span>
                  <span class="crayon-s">'Web server listening on localhost:'</span>
                  <span class="crayon-h"> </span>
                  <span class="crayon-o">+</span>
                  <span class="crayon-h"> </span>
                  <span class="crayon-v">port</span>
                  <span class="crayon-sy">)</span>
                  <span class="crayon-sy">;</span>
                 </div>
                 <div class="crayon-line crayon-striped-line" id="crayon-59d380ad4690a242057476-28">
                  <span class="crayon-sy">}</span>
                  <span class="crayon-sy">)</span>
                  <span class="crayon-sy">;</span>
                 </div>
                </div></td> 
              </tr> 
             </tbody>
            </table> 
           </div> 
          </div> 
          <!-- [Format Time: 0.0038 seconds] --> 
          <p> </p>
          <p>If you restart your server and test a POST to the <span class="inline-code">/api/logins</span> route with the correct email and password, you should get the user data and a new token. However, if the email or password are wrong you should get an error message.</p> 
          <p><a href="https://jsao.io/wp-content/uploads/2015/06/auth-api-test-6.png" rel="prettyPhoto[gallery-WMde]"><img src="https://jsao.io/wp-content/uploads/2015/06/auth-api-test-6.png" alt="auth-api test 6" width="1826" height="1452" class="alignnone size-full wp-image-463" srcset="https://jsao.io/wp-content/uploads/2015/06/auth-api-test-6.png 1826w, https://jsao.io/wp-content/uploads/2015/06/auth-api-test-6-300x239.png 300w, https://jsao.io/wp-content/uploads/2015/06/auth-api-test-6-1024x814.png 1024w" sizes="(max-width: 1826px) 100vw, 1826px"></a></p> 
          <h4>Streamlining the Authentication and Authorization</h4> 
          <p>Currently the authentication code for the <span class="inline-code">/api/protected_things</span> route is embedded in the route’s logic. This makes it hard to reuse. Also, it’s currently only ensuring that users are authenticated, it’s not doing any authorization. We can fix both issues pretty easily. First, we’ll remove the authentication logic from <span class="inline-code">protectedThings.js</span>. That’s right, strip it out!</p> 
          <!-- Crayon Syntax Highlighter v_2.7.2_beta --> 
          <div id="crayon-59d380ad46912860372167" class="crayon-syntax crayon-theme-classic crayon-font-monaco crayon-os-pc print-yes notranslate" data-settings=" no-popup minimize scroll-mouseover" style=" margin-top: 12px; margin-bottom: 12px; font-size: 12px !important; line-height: 15px !important;"> 
           <div class="crayon-toolbar" data-settings=" show" style="font-size: 12px !important;height: 18px !important; line-height: 18px !important;">
            <span class="crayon-title">auth-api/routes/protectedThings.js</span> 
            <div class="crayon-tools" style="font-size: 12px !important;height: 18px !important; line-height: 18px !important;">
             <div class="crayon-button crayon-copy-button" title="Copy">
              <div class="crayon-button-icon"></div>
             </div>
             <span class="crayon-language">JavaScript</span>
            </div>
           </div> 
           <div class="crayon-info" style="min-height: 16.8px !important; line-height: 16.8px !important;"></div> 
           <div class="crayon-plain-wrap">
            <textarea wrap="soft" class="crayon-plain print-no" data-settings="dblclick" readonly style="-moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4; font-size: 12px !important; line-height: 15px !important;">
var oracledb = require('oracledb');
var config = require(__dirname + '../../config.js');

function get(req, res, next) {
    oracledb.getConnection(
        config.database,
        function(err, connection){
            if (err) {
                return next(err);
            }

            connection.execute(
                'select column1 as "column1" ' +
                'from jsao_protected_things ',
                {},//no binds
                {
                    outFormat: oracledb.OBJECT
                },
                function(err, results){
                    if (err) {
                        connection.release(function(err) {
                            if (err) {
                                console.error(err.message);
                            }
                        });

                        return next(err);
                    }

                    res.status(200).json(results.rows);

                    connection.release(function(err) {
                        if (err) {
                            console.error(err.message);
                        }
                    });
                }
            );
        }
    );
}

module.exports.get = get;</textarea>
           </div> 
           <div class="crayon-main" style=""> 
            <table class="crayon-table"> 
             <tbody>
              <tr class="crayon-row"> 
               <td class="crayon-nums " data-settings="show"> 
                <div class="crayon-nums-content" style="font-size: 12px !important; line-height: 15px !important;">
                 <div class="crayon-num" data-line="crayon-59d380ad46912860372167-1">
                  1
                 </div>
                 <div class="crayon-num crayon-striped-num" data-line="crayon-59d380ad46912860372167-2">
                  2
                 </div>
                 <div class="crayon-num" data-line="crayon-59d380ad46912860372167-3">
                  3
                 </div>
                 <div class="crayon-num crayon-striped-num" data-line="crayon-59d380ad46912860372167-4">
                  4
                 </div>
                 <div class="crayon-num" data-line="crayon-59d380ad46912860372167-5">
                  5
                 </div>
                 <div class="crayon-num crayon-striped-num" data-line="crayon-59d380ad46912860372167-6">
                  6
                 </div>
                 <div class="crayon-num" data-line="crayon-59d380ad46912860372167-7">
                  7
                 </div>
                 <div class="crayon-num crayon-striped-num" data-line="crayon-59d380ad46912860372167-8">
                  8
                 </div>
                 <div class="crayon-num" data-line="crayon-59d380ad46912860372167-9">
                  9
                 </div>
                 <div class="crayon-num crayon-striped-num" data-line="crayon-59d380ad46912860372167-10">
                  10
                 </div>
                 <div class="crayon-num" data-line="crayon-59d380ad46912860372167-11">
                  11
                 </div>
                 <div class="crayon-num crayon-striped-num" data-line="crayon-59d380ad46912860372167-12">
                  12
                 </div>
                 <div class="crayon-num" data-line="crayon-59d380ad46912860372167-13">
                  13
                 </div>
                 <div class="crayon-num crayon-striped-num" data-line="crayon-59d380ad46912860372167-14">
                  14
                 </div>
                 <div class="crayon-num" data-line="crayon-59d380ad46912860372167-15">
                  15
                 </div>
                 <div class="crayon-num crayon-striped-num" data-line="crayon-59d380ad46912860372167-16">
                  16
                 </div>
                 <div class="crayon-num" data-line="crayon-59d380ad46912860372167-17">
                  17
                 </div>
                 <div class="crayon-num crayon-striped-num" data-line="crayon-59d380ad46912860372167-18">
                  18
                 </div>
                 <div class="crayon-num" data-line="crayon-59d380ad46912860372167-19">
                  19
                 </div>
                 <div class="crayon-num crayon-striped-num" data-line="crayon-59d380ad46912860372167-20">
                  20
                 </div>
                 <div class="crayon-num" data-line="crayon-59d380ad46912860372167-21">
                  21
                 </div>
                 <div class="crayon-num crayon-striped-num" data-line="crayon-59d380ad46912860372167-22">
                  22
                 </div>
                 <div class="crayon-num" data-line="crayon-59d380ad46912860372167-23">
                  23
                 </div>
                 <div class="crayon-num crayon-striped-num" data-line="crayon-59d380ad46912860372167-24">
                  24
                 </div>
                 <div class="crayon-num" data-line="crayon-59d380ad46912860372167-25">
                  25
                 </div>
                 <div class="crayon-num crayon-striped-num" data-line="crayon-59d380ad46912860372167-26">
                  26
                 </div>
                 <div class="crayon-num" data-line="crayon-59d380ad46912860372167-27">
                  27
                 </div>
                 <div class="crayon-num crayon-striped-num" data-line="crayon-59d380ad46912860372167-28">
                  28
                 </div>
                 <div class="crayon-num" data-line="crayon-59d380ad46912860372167-29">
                  29
                 </div>
                 <div class="crayon-num crayon-striped-num" data-line="crayon-59d380ad46912860372167-30">
                  30
                 </div>
                 <div class="crayon-num" data-line="crayon-59d380ad46912860372167-31">
                  31
                 </div>
                 <div class="crayon-num crayon-striped-num" data-line="crayon-59d380ad46912860372167-32">
                  32
                 </div>
                 <div class="crayon-num" data-line="crayon-59d380ad46912860372167-33">
                  33
                 </div>
                 <div class="crayon-num crayon-striped-num" data-line="crayon-59d380ad46912860372167-34">
                  34
                 </div>
                 <div class="crayon-num" data-line="crayon-59d380ad46912860372167-35">
                  35
                 </div>
                 <div class="crayon-num crayon-striped-num" data-line="crayon-59d380ad46912860372167-36">
                  36
                 </div>
                 <div class="crayon-num" data-line="crayon-59d380ad46912860372167-37">
                  37
                 </div>
                 <div class="crayon-num crayon-striped-num" data-line="crayon-59d380ad46912860372167-38">
                  38
                 </div>
                 <div class="crayon-num" data-line="crayon-59d380ad46912860372167-39">
                  39
                 </div>
                 <div class="crayon-num crayon-striped-num" data-line="crayon-59d380ad46912860372167-40">
                  40
                 </div>
                 <div class="crayon-num" data-line="crayon-59d380ad46912860372167-41">
                  41
                 </div>
                 <div class="crayon-num crayon-striped-num" data-line="crayon-59d380ad46912860372167-42">
                  42
                 </div>
                 <div class="crayon-num" data-line="crayon-59d380ad46912860372167-43">
                  43
                 </div>
                </div> </td> 
               <td class="crayon-code">
                <div class="crayon-pre" style="font-size: 12px !important; line-height: 15px !important; -moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4;">
                 <div class="crayon-line" id="crayon-59d380ad46912860372167-1">
                  <span class="crayon-t">var</span>
                  <span class="crayon-h"> </span>
                  <span class="crayon-v">oracledb</span>
                  <span class="crayon-h"> </span>
                  <span class="crayon-o">=</span>
                  <span class="crayon-h"> </span>
                  <span class="crayon-e">require</span>
                  <span class="crayon-sy">(</span>
                  <span class="crayon-s">'oracledb'</span>
                  <span class="crayon-sy">)</span>
                  <span class="crayon-sy">;</span>
                 </div>
                 <div class="crayon-line crayon-striped-line" id="crayon-59d380ad46912860372167-2">
                  <span class="crayon-t">var</span>
                  <span class="crayon-h"> </span>
                  <span class="crayon-v">config</span>
                  <span class="crayon-h"> </span>
                  <span class="crayon-o">=</span>
                  <span class="crayon-h"> </span>
                  <span class="crayon-e">require</span>
                  <span class="crayon-sy">(</span>
                  <span class="crayon-v">__dirname</span>
                  <span class="crayon-h"> </span>
                  <span class="crayon-o">+</span>
                  <span class="crayon-h"> </span>
                  <span class="crayon-s">'../../config.js'</span>
                  <span class="crayon-sy">)</span>
                  <span class="crayon-sy">;</span>
                 </div>
                 <div class="crayon-line" id="crayon-59d380ad46912860372167-3">
                  &nbsp;
                 </div>
                 <div class="crayon-line crayon-striped-line" id="crayon-59d380ad46912860372167-4">
                  <span class="crayon-t">function</span>
                  <span class="crayon-h"> </span>
                  <span class="crayon-e">get</span>
                  <span class="crayon-sy">(</span>
                  <span class="crayon-v">req</span>
                  <span class="crayon-sy">,</span>
                  <span class="crayon-h"> </span>
                  <span class="crayon-v">res</span>
                  <span class="crayon-sy">,</span>
                  <span class="crayon-h"> </span>
                  <span class="crayon-v">next</span>
                  <span class="crayon-sy">)</span>
                  <span class="crayon-h"> </span>
                  <span class="crayon-sy">{</span>
                 </div>
                 <div class="crayon-line" id="crayon-59d380ad46912860372167-5">
                  <span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;</span>
                  <span class="crayon-v">oracledb</span>
                  <span class="crayon-sy">.</span>
                  <span class="crayon-e">getConnection</span>
                  <span class="crayon-sy">(</span>
                 </div>
                 <div class="crayon-line crayon-striped-line" id="crayon-59d380ad46912860372167-6">
                  <span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span>
                  <span class="crayon-v">config</span>
                  <span class="crayon-sy">.</span>
                  <span class="crayon-v">database</span>
                  <span class="crayon-sy">,</span>
                 </div>
                 <div class="crayon-line" id="crayon-59d380ad46912860372167-7">
                  <span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span>
                  <span class="crayon-t">function</span>
                  <span class="crayon-sy">(</span>
                  <span class="crayon-v">err</span>
                  <span class="crayon-sy">,</span>
                  <span class="crayon-h"> </span>
                  <span class="crayon-v">connection</span>
                  <span class="crayon-sy">)</span>
                  <span class="crayon-sy">{</span>
                 </div>
                 <div class="crayon-line crayon-striped-line" id="crayon-59d380ad46912860372167-8">
                  <span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span>
                  <span class="crayon-st">if</span>
                  <span class="crayon-h"> </span>
                  <span class="crayon-sy">(</span>
                  <span class="crayon-v">err</span>
                  <span class="crayon-sy">)</span>
                  <span class="crayon-h"> </span>
                  <span class="crayon-sy">{</span>
                 </div>
                 <div class="crayon-line" id="crayon-59d380ad46912860372167-9">
                  <span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span>
                  <span class="crayon-st">return</span>
                  <span class="crayon-h"> </span>
                  <span class="crayon-e">next</span>
                  <span class="crayon-sy">(</span>
                  <span class="crayon-v">err</span>
                  <span class="crayon-sy">)</span>
                  <span class="crayon-sy">;</span>
                 </div>
                 <div class="crayon-line crayon-striped-line" id="crayon-59d380ad46912860372167-10">
                  <span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span>
                  <span class="crayon-sy">}</span>
                 </div>
                 <div class="crayon-line" id="crayon-59d380ad46912860372167-11">
                  &nbsp;
                 </div>
                 <div class="crayon-line crayon-striped-line" id="crayon-59d380ad46912860372167-12">
                  <span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span>
                  <span class="crayon-v">connection</span>
                  <span class="crayon-sy">.</span>
                  <span class="crayon-e">execute</span>
                  <span class="crayon-sy">(</span>
                 </div>
                 <div class="crayon-line" id="crayon-59d380ad46912860372167-13">
                  <span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span>
                  <span class="crayon-s">'select column1 as "column1" '</span>
                  <span class="crayon-h"> </span>
                  <span class="crayon-o">+</span>
                 </div>
                 <div class="crayon-line crayon-striped-line" id="crayon-59d380ad46912860372167-14">
                  <span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span>
                  <span class="crayon-s">'from jsao_protected_things '</span>
                  <span class="crayon-sy">,</span>
                 </div>
                 <div class="crayon-line" id="crayon-59d380ad46912860372167-15">
                  <span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span>
                  <span class="crayon-sy">{</span>
                  <span class="crayon-sy">}</span>
                  <span class="crayon-sy">,</span>
                  <span class="crayon-c">//no binds</span>
                 </div>
                 <div class="crayon-line crayon-striped-line" id="crayon-59d380ad46912860372167-16">
                  <span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span>
                  <span class="crayon-sy">{</span>
                 </div>
                 <div class="crayon-line" id="crayon-59d380ad46912860372167-17">
                  <span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span>
                  <span class="crayon-v">outFormat</span>
                  <span class="crayon-o">:</span>
                  <span class="crayon-h"> </span>
                  <span class="crayon-v">oracledb</span>
                  <span class="crayon-sy">.</span>
                  <span class="crayon-t">OBJECT</span>
                 </div>
                 <div class="crayon-line crayon-striped-line" id="crayon-59d380ad46912860372167-18">
                  <span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span>
                  <span class="crayon-sy">}</span>
                  <span class="crayon-sy">,</span>
                 </div>
                 <div class="crayon-line" id="crayon-59d380ad46912860372167-19">
                  <span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span>
                  <span class="crayon-t">function</span>
                  <span class="crayon-sy">(</span>
                  <span class="crayon-v">err</span>
                  <span class="crayon-sy">,</span>
                  <span class="crayon-h"> </span>
                  <span class="crayon-v">results</span>
                  <span class="crayon-sy">)</span>
                  <span class="crayon-sy">{</span>
                 </div>
                 <div class="crayon-line crayon-striped-line" id="crayon-59d380ad46912860372167-20">
                  <span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span>
                  <span class="crayon-st">if</span>
                  <span class="crayon-h"> </span>
                  <span class="crayon-sy">(</span>
                  <span class="crayon-v">err</span>
                  <span class="crayon-sy">)</span>
                  <span class="crayon-h"> </span>
                  <span class="crayon-sy">{</span>
                 </div>
                 <div class="crayon-line" id="crayon-59d380ad46912860372167-21">
                  <span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span>
                  <span class="crayon-v">connection</span>
                  <span class="crayon-sy">.</span>
                  <span class="crayon-e">release</span>
                  <span class="crayon-sy">(</span>
                  <span class="crayon-t">function</span>
                  <span class="crayon-sy">(</span>
                  <span class="crayon-v">err</span>
                  <span class="crayon-sy">)</span>
                  <span class="crayon-h"> </span>
                  <span class="crayon-sy">{</span>
                 </div>
                 <div class="crayon-line crayon-striped-line" id="crayon-59d380ad46912860372167-22">
                  <span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span>
                  <span class="crayon-st">if</span>
                  <span class="crayon-h"> </span>
                  <span class="crayon-sy">(</span>
                  <span class="crayon-v">err</span>
                  <span class="crayon-sy">)</span>
                  <span class="crayon-h"> </span>
                  <span class="crayon-sy">{</span>
                 </div>
                 <div class="crayon-line" id="crayon-59d380ad46912860372167-23">
                  <span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span>
                  <span class="crayon-v">console</span>
                  <span class="crayon-sy">.</span>
                  <span class="crayon-e">error</span>
                  <span class="crayon-sy">(</span>
                  <span class="crayon-v">err</span>
                  <span class="crayon-sy">.</span>
                  <span class="crayon-v">message</span>
                  <span class="crayon-sy">)</span>
                  <span class="crayon-sy">;</span>
                 </div>
                 <div class="crayon-line crayon-striped-line" id="crayon-59d380ad46912860372167-24">
                  <span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span>
                  <span class="crayon-sy">}</span>
                 </div>
                 <div class="crayon-line" id="crayon-59d380ad46912860372167-25">
                  <span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span>
                  <span class="crayon-sy">}</span>
                  <span class="crayon-sy">)</span>
                  <span class="crayon-sy">;</span>
                 </div>
                 <div class="crayon-line crayon-striped-line" id="crayon-59d380ad46912860372167-26">
                  &nbsp;
                 </div>
                 <div class="crayon-line" id="crayon-59d380ad46912860372167-27">
                  <span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span>
                  <span class="crayon-st">return</span>
                  <span class="crayon-h"> </span>
                  <span class="crayon-e">next</span>
                  <span class="crayon-sy">(</span>
                  <span class="crayon-v">err</span>
                  <span class="crayon-sy">)</span>
                  <span class="crayon-sy">;</span>
                 </div>
                 <div class="crayon-line crayon-striped-line" id="crayon-59d380ad46912860372167-28">
                  <span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span>
                  <span class="crayon-sy">}</span>
                 </div>
                 <div class="crayon-line" id="crayon-59d380ad46912860372167-29">
                  &nbsp;
                 </div>
                 <div class="crayon-line crayon-striped-line" id="crayon-59d380ad46912860372167-30">
                  <span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span>
                  <span class="crayon-v">res</span>
                  <span class="crayon-sy">.</span>
                  <span class="crayon-e">status</span>
                  <span class="crayon-sy">(</span>
                  <span class="crayon-cn">200</span>
                  <span class="crayon-sy">)</span>
                  <span class="crayon-sy">.</span>
                  <span class="crayon-e">json</span>
                  <span class="crayon-sy">(</span>
                  <span class="crayon-v">results</span>
                  <span class="crayon-sy">.</span>
                  <span class="crayon-v">rows</span>
                  <span class="crayon-sy">)</span>
                  <span class="crayon-sy">;</span>
                 </div>
                 <div class="crayon-line" id="crayon-59d380ad46912860372167-31">
                  &nbsp;
                 </div>
                 <div class="crayon-line crayon-striped-line" id="crayon-59d380ad46912860372167-32">
                  <span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span>
                  <span class="crayon-v">connection</span>
                  <span class="crayon-sy">.</span>
                  <span class="crayon-e">release</span>
                  <span class="crayon-sy">(</span>
                  <span class="crayon-t">function</span>
                  <span class="crayon-sy">(</span>
                  <span class="crayon-v">err</span>
                  <span class="crayon-sy">)</span>
                  <span class="crayon-h"> </span>
                  <span class="crayon-sy">{</span>
                 </div>
                 <div class="crayon-line" id="crayon-59d380ad46912860372167-33">
                  <span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span>
                  <span class="crayon-st">if</span>
                  <span class="crayon-h"> </span>
                  <span class="crayon-sy">(</span>
                  <span class="crayon-v">err</span>
                  <span class="crayon-sy">)</span>
                  <span class="crayon-h"> </span>
                  <span class="crayon-sy">{</span>
                 </div>
                 <div class="crayon-line crayon-striped-line" id="crayon-59d380ad46912860372167-34">
                  <span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span>
                  <span class="crayon-v">console</span>
                  <span class="crayon-sy">.</span>
                  <span class="crayon-e">error</span>
                  <span class="crayon-sy">(</span>
                  <span class="crayon-v">err</span>
                  <span class="crayon-sy">.</span>
                  <span class="crayon-v">message</span>
                  <span class="crayon-sy">)</span>
                  <span class="crayon-sy">;</span>
                 </div>
                 <div class="crayon-line" id="crayon-59d380ad46912860372167-35">
                  <span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span>
                  <span class="crayon-sy">}</span>
                 </div>
                 <div class="crayon-line crayon-striped-line" id="crayon-59d380ad46912860372167-36">
                  <span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span>
                  <span class="crayon-sy">}</span>
                  <span class="crayon-sy">)</span>
                  <span class="crayon-sy">;</span>
                 </div>
                 <div class="crayon-line" id="crayon-59d380ad46912860372167-37">
                  <span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span>
                  <span class="crayon-sy">}</span>
                 </div>
                 <div class="crayon-line crayon-striped-line" id="crayon-59d380ad46912860372167-38">
                  <span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span>
                  <span class="crayon-sy">)</span>
                  <span class="crayon-sy">;</span>
                 </div>
                 <div class="crayon-line" id="crayon-59d380ad46912860372167-39">
                  <span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span>
                  <span class="crayon-sy">}</span>
                 </div>
                 <div class="crayon-line crayon-striped-line" id="crayon-59d380ad46912860372167-40">
                  <span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;</span>
                  <span class="crayon-sy">)</span>
                  <span class="crayon-sy">;</span>
                 </div>
                 <div class="crayon-line" id="crayon-59d380ad46912860372167-41">
                  <span class="crayon-sy">}</span>
                 </div>
                 <div class="crayon-line crayon-striped-line" id="crayon-59d380ad46912860372167-42">
                  &nbsp;
                 </div>
                 <div class="crayon-line" id="crayon-59d380ad46912860372167-43">
                  <span class="crayon-v">module</span>
                  <span class="crayon-sy">.</span>
                  <span class="crayon-v">exports</span>
                  <span class="crayon-sy">.</span>
                  <span class="crayon-v">get</span>
                  <span class="crayon-h"> </span>
                  <span class="crayon-o">=</span>
                  <span class="crayon-h"> </span>
                  <span class="crayon-v">get</span>
                  <span class="crayon-sy">;</span>
                 </div>
                </div></td> 
              </tr> 
             </tbody>
            </table> 
           </div> 
          </div> 
          <!-- [Format Time: 0.0041 seconds] --> 
          <p>Now we’ll create an <span class="inline-code">auth.js</span> file in the <span class="inline-code">routes</span> directory to contain our new, beefier authentication and authorization logic. </p> 
          <!-- Crayon Syntax Highlighter v_2.7.2_beta --> 
          <div id="crayon-59d380ad4691a673934356" class="crayon-syntax crayon-theme-classic crayon-font-monaco crayon-os-pc print-yes notranslate" data-settings=" no-popup minimize scroll-mouseover" style=" margin-top: 12px; margin-bottom: 12px; font-size: 12px !important; line-height: 15px !important;"> 
           <div class="crayon-toolbar" data-settings=" show" style="font-size: 12px !important;height: 18px !important; line-height: 18px !important;">
            <span class="crayon-title">auth-api/routes/auth.js</span> 
            <div class="crayon-tools" style="font-size: 12px !important;height: 18px !important; line-height: 18px !important;">
             <div class="crayon-button crayon-copy-button" title="Copy">
              <div class="crayon-button-icon"></div>
             </div>
             <span class="crayon-language">JavaScript</span>
            </div>
           </div> 
           <div class="crayon-info" style="min-height: 16.8px !important; line-height: 16.8px !important;"></div> 
           <div class="crayon-plain-wrap">
            <textarea wrap="soft" class="crayon-plain print-no" data-settings="dblclick" readonly style="-moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4; font-size: 12px !important; line-height: 15px !important;">
var jwt = require('jsonwebtoken');
var config = require(__dirname + '../../config.js');

function auth(role) {
    return function(req, res, next) {
        var token;
        var payload;

        if (!req.headers.authorization) {
            return res.status(401).send({message: 'You are not authorized'});
        }

        token = req.headers.authorization.split(' ')[1];

        try {
            payload = jwt.verify(token, config.jwtSecretKey);
        } catch (e) {
            if (e.name === 'TokenExpiredError') {
                res.status(401).send({message: 'Token Expired'});
            } else {
                res.status(401).send({message: 'Authentication failed'});
            }

            return;
        }

        if (!role || role === payload.role) {
            //pass some user details through in case they are needed
            req.user = {
                email: payload.sub,
                role: payload.role
            };

            next();
        } else {
            res.status(401).send({message: 'You are not authorized'});
        }
    }
}

module.exports = auth;</textarea>
           </div> 
           <div class="crayon-main" style=""> 
            <table class="crayon-table"> 
             <tbody>
              <tr class="crayon-row"> 
               <td class="crayon-nums " data-settings="show"> 
                <div class="crayon-nums-content" style="font-size: 12px !important; line-height: 15px !important;">
                 <div class="crayon-num" data-line="crayon-59d380ad4691a673934356-1">
                  1
                 </div>
                 <div class="crayon-num crayon-striped-num" data-line="crayon-59d380ad4691a673934356-2">
                  2
                 </div>
                 <div class="crayon-num" data-line="crayon-59d380ad4691a673934356-3">
                  3
                 </div>
                 <div class="crayon-num crayon-striped-num" data-line="crayon-59d380ad4691a673934356-4">
                  4
                 </div>
                 <div class="crayon-num" data-line="crayon-59d380ad4691a673934356-5">
                  5
                 </div>
                 <div class="crayon-num crayon-striped-num" data-line="crayon-59d380ad4691a673934356-6">
                  6
                 </div>
                 <div class="crayon-num" data-line="crayon-59d380ad4691a673934356-7">
                  7
                 </div>
                 <div class="crayon-num crayon-striped-num" data-line="crayon-59d380ad4691a673934356-8">
                  8
                 </div>
                 <div class="crayon-num" data-line="crayon-59d380ad4691a673934356-9">
                  9
                 </div>
                 <div class="crayon-num crayon-striped-num" data-line="crayon-59d380ad4691a673934356-10">
                  10
                 </div>
                 <div class="crayon-num" data-line="crayon-59d380ad4691a673934356-11">
                  11
                 </div>
                 <div class="crayon-num crayon-striped-num" data-line="crayon-59d380ad4691a673934356-12">
                  12
                 </div>
                 <div class="crayon-num" data-line="crayon-59d380ad4691a673934356-13">
                  13
                 </div>
                 <div class="crayon-num crayon-striped-num" data-line="crayon-59d380ad4691a673934356-14">
                  14
                 </div>
                 <div class="crayon-num" data-line="crayon-59d380ad4691a673934356-15">
                  15
                 </div>
                 <div class="crayon-num crayon-striped-num" data-line="crayon-59d380ad4691a673934356-16">
                  16
                 </div>
                 <div class="crayon-num" data-line="crayon-59d380ad4691a673934356-17">
                  17
                 </div>
                 <div class="crayon-num crayon-striped-num" data-line="crayon-59d380ad4691a673934356-18">
                  18
                 </div>
                 <div class="crayon-num" data-line="crayon-59d380ad4691a673934356-19">
                  19
                 </div>
                 <div class="crayon-num crayon-striped-num" data-line="crayon-59d380ad4691a673934356-20">
                  20
                 </div>
                 <div class="crayon-num" data-line="crayon-59d380ad4691a673934356-21">
                  21
                 </div>
                 <div class="crayon-num crayon-striped-num" data-line="crayon-59d380ad4691a673934356-22">
                  22
                 </div>
                 <div class="crayon-num" data-line="crayon-59d380ad4691a673934356-23">
                  23
                 </div>
                 <div class="crayon-num crayon-striped-num" data-line="crayon-59d380ad4691a673934356-24">
                  24
                 </div>
                 <div class="crayon-num" data-line="crayon-59d380ad4691a673934356-25">
                  25
                 </div>
                 <div class="crayon-num crayon-striped-num" data-line="crayon-59d380ad4691a673934356-26">
                  26
                 </div>
                 <div class="crayon-num" data-line="crayon-59d380ad4691a673934356-27">
                  27
                 </div>
                 <div class="crayon-num crayon-striped-num" data-line="crayon-59d380ad4691a673934356-28">
                  28
                 </div>
                 <div class="crayon-num" data-line="crayon-59d380ad4691a673934356-29">
                  29
                 </div>
                 <div class="crayon-num crayon-striped-num" data-line="crayon-59d380ad4691a673934356-30">
                  30
                 </div>
                 <div class="crayon-num" data-line="crayon-59d380ad4691a673934356-31">
                  31
                 </div>
                 <div class="crayon-num crayon-striped-num" data-line="crayon-59d380ad4691a673934356-32">
                  32
                 </div>
                 <div class="crayon-num" data-line="crayon-59d380ad4691a673934356-33">
                  33
                 </div>
                 <div class="crayon-num crayon-striped-num" data-line="crayon-59d380ad4691a673934356-34">
                  34
                 </div>
                 <div class="crayon-num" data-line="crayon-59d380ad4691a673934356-35">
                  35
                 </div>
                 <div class="crayon-num crayon-striped-num" data-line="crayon-59d380ad4691a673934356-36">
                  36
                 </div>
                 <div class="crayon-num" data-line="crayon-59d380ad4691a673934356-37">
                  37
                 </div>
                 <div class="crayon-num crayon-striped-num" data-line="crayon-59d380ad4691a673934356-38">
                  38
                 </div>
                 <div class="crayon-num" data-line="crayon-59d380ad4691a673934356-39">
                  39
                 </div>
                 <div class="crayon-num crayon-striped-num" data-line="crayon-59d380ad4691a673934356-40">
                  40
                 </div>
                 <div class="crayon-num" data-line="crayon-59d380ad4691a673934356-41">
                  41
                 </div>
                </div> </td> 
               <td class="crayon-code">
                <div class="crayon-pre" style="font-size: 12px !important; line-height: 15px !important; -moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4;">
                 <div class="crayon-line" id="crayon-59d380ad4691a673934356-1">
                  <span class="crayon-t">var</span>
                  <span class="crayon-h"> </span>
                  <span class="crayon-v">jwt</span>
                  <span class="crayon-h"> </span>
                  <span class="crayon-o">=</span>
                  <span class="crayon-h"> </span>
                  <span class="crayon-e">require</span>
                  <span class="crayon-sy">(</span>
                  <span class="crayon-s">'jsonwebtoken'</span>
                  <span class="crayon-sy">)</span>
                  <span class="crayon-sy">;</span>
                 </div>
                 <div class="crayon-line crayon-striped-line" id="crayon-59d380ad4691a673934356-2">
                  <span class="crayon-t">var</span>
                  <span class="crayon-h"> </span>
                  <span class="crayon-v">config</span>
                  <span class="crayon-h"> </span>
                  <span class="crayon-o">=</span>
                  <span class="crayon-h"> </span>
                  <span class="crayon-e">require</span>
                  <span class="crayon-sy">(</span>
                  <span class="crayon-v">__dirname</span>
                  <span class="crayon-h"> </span>
                  <span class="crayon-o">+</span>
                  <span class="crayon-h"> </span>
                  <span class="crayon-s">'../../config.js'</span>
                  <span class="crayon-sy">)</span>
                  <span class="crayon-sy">;</span>
                 </div>
                 <div class="crayon-line" id="crayon-59d380ad4691a673934356-3">
                  &nbsp;
                 </div>
                 <div class="crayon-line crayon-striped-line" id="crayon-59d380ad4691a673934356-4">
                  <span class="crayon-t">function</span>
                  <span class="crayon-h"> </span>
                  <span class="crayon-e">auth</span>
                  <span class="crayon-sy">(</span>
                  <span class="crayon-v">role</span>
                  <span class="crayon-sy">)</span>
                  <span class="crayon-h"> </span>
                  <span class="crayon-sy">{</span>
                 </div>
                 <div class="crayon-line" id="crayon-59d380ad4691a673934356-5">
                  <span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;</span>
                  <span class="crayon-st">return</span>
                  <span class="crayon-h"> </span>
                  <span class="crayon-t">function</span>
                  <span class="crayon-sy">(</span>
                  <span class="crayon-v">req</span>
                  <span class="crayon-sy">,</span>
                  <span class="crayon-h"> </span>
                  <span class="crayon-v">res</span>
                  <span class="crayon-sy">,</span>
                  <span class="crayon-h"> </span>
                  <span class="crayon-v">next</span>
                  <span class="crayon-sy">)</span>
                  <span class="crayon-h"> </span>
                  <span class="crayon-sy">{</span>
                 </div>
                 <div class="crayon-line crayon-striped-line" id="crayon-59d380ad4691a673934356-6">
                  <span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span>
                  <span class="crayon-t">var</span>
                  <span class="crayon-h"> </span>
                  <span class="crayon-v">token</span>
                  <span class="crayon-sy">;</span>
                 </div>
                 <div class="crayon-line" id="crayon-59d380ad4691a673934356-7">
                  <span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span>
                  <span class="crayon-t">var</span>
                  <span class="crayon-h"> </span>
                  <span class="crayon-v">payload</span>
                  <span class="crayon-sy">;</span>
                 </div>
                 <div class="crayon-line crayon-striped-line" id="crayon-59d380ad4691a673934356-8">
                  &nbsp;
                 </div>
                 <div class="crayon-line" id="crayon-59d380ad4691a673934356-9">
                  <span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span>
                  <span class="crayon-st">if</span>
                  <span class="crayon-h"> </span>
                  <span class="crayon-sy">(</span>
                  <span class="crayon-o">!</span>
                  <span class="crayon-v">req</span>
                  <span class="crayon-sy">.</span>
                  <span class="crayon-v">headers</span>
                  <span class="crayon-sy">.</span>
                  <span class="crayon-v">authorization</span>
                  <span class="crayon-sy">)</span>
                  <span class="crayon-h"> </span>
                  <span class="crayon-sy">{</span>
                 </div>
                 <div class="crayon-line crayon-striped-line" id="crayon-59d380ad4691a673934356-10">
                  <span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span>
                  <span class="crayon-st">return</span>
                  <span class="crayon-h"> </span>
                  <span class="crayon-v">res</span>
                  <span class="crayon-sy">.</span>
                  <span class="crayon-e">status</span>
                  <span class="crayon-sy">(</span>
                  <span class="crayon-cn">401</span>
                  <span class="crayon-sy">)</span>
                  <span class="crayon-sy">.</span>
                  <span class="crayon-e">send</span>
                  <span class="crayon-sy">(</span>
                  <span class="crayon-sy">{</span>
                  <span class="crayon-v">message</span>
                  <span class="crayon-o">:</span>
                  <span class="crayon-h"> </span>
                  <span class="crayon-s">'You are not authorized'</span>
                  <span class="crayon-sy">}</span>
                  <span class="crayon-sy">)</span>
                  <span class="crayon-sy">;</span>
                 </div>
                 <div class="crayon-line" id="crayon-59d380ad4691a673934356-11">
                  <span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span>
                  <span class="crayon-sy">}</span>
                 </div>
                 <div class="crayon-line crayon-striped-line" id="crayon-59d380ad4691a673934356-12">
                  &nbsp;
                 </div>
                 <div class="crayon-line" id="crayon-59d380ad4691a673934356-13">
                  <span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span>
                  <span class="crayon-v">token</span>
                  <span class="crayon-h"> </span>
                  <span class="crayon-o">=</span>
                  <span class="crayon-h"> </span>
                  <span class="crayon-v">req</span>
                  <span class="crayon-sy">.</span>
                  <span class="crayon-v">headers</span>
                  <span class="crayon-sy">.</span>
                  <span class="crayon-v">authorization</span>
                  <span class="crayon-sy">.</span>
                  <span class="crayon-e">split</span>
                  <span class="crayon-sy">(</span>
                  <span class="crayon-s">' '</span>
                  <span class="crayon-sy">)</span>
                  <span class="crayon-sy">[</span>
                  <span class="crayon-cn">1</span>
                  <span class="crayon-sy">]</span>
                  <span class="crayon-sy">;</span>
                 </div>
                 <div class="crayon-line crayon-striped-line" id="crayon-59d380ad4691a673934356-14">
                  &nbsp;
                 </div>
                 <div class="crayon-line" id="crayon-59d380ad4691a673934356-15">
                  <span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span>
                  <span class="crayon-st">try</span>
                  <span class="crayon-h"> </span>
                  <span class="crayon-sy">{</span>
                 </div>
                 <div class="crayon-line crayon-striped-line" id="crayon-59d380ad4691a673934356-16">
                  <span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span>
                  <span class="crayon-v">payload</span>
                  <span class="crayon-h"> </span>
                  <span class="crayon-o">=</span>
                  <span class="crayon-h"> </span>
                  <span class="crayon-v">jwt</span>
                  <span class="crayon-sy">.</span>
                  <span class="crayon-e">verify</span>
                  <span class="crayon-sy">(</span>
                  <span class="crayon-v">token</span>
                  <span class="crayon-sy">,</span>
                  <span class="crayon-h"> </span>
                  <span class="crayon-v">config</span>
                  <span class="crayon-sy">.</span>
                  <span class="crayon-v">jwtSecretKey</span>
                  <span class="crayon-sy">)</span>
                  <span class="crayon-sy">;</span>
                 </div>
                 <div class="crayon-line" id="crayon-59d380ad4691a673934356-17">
                  <span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span>
                  <span class="crayon-sy">}</span>
                  <span class="crayon-h"> </span>
                  <span class="crayon-st">catch</span>
                  <span class="crayon-h"> </span>
                  <span class="crayon-sy">(</span>
                  <span class="crayon-v">e</span>
                  <span class="crayon-sy">)</span>
                  <span class="crayon-h"> </span>
                  <span class="crayon-sy">{</span>
                 </div>
                 <div class="crayon-line crayon-striped-line" id="crayon-59d380ad4691a673934356-18">
                  <span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span>
                  <span class="crayon-st">if</span>
                  <span class="crayon-h"> </span>
                  <span class="crayon-sy">(</span>
                  <span class="crayon-v">e</span>
                  <span class="crayon-sy">.</span>
                  <span class="crayon-v">name</span>
                  <span class="crayon-h"> </span>
                  <span class="crayon-o">===</span>
                  <span class="crayon-h"> </span>
                  <span class="crayon-s">'TokenExpiredError'</span>
                  <span class="crayon-sy">)</span>
                  <span class="crayon-h"> </span>
                  <span class="crayon-sy">{</span>
                 </div>
                 <div class="crayon-line" id="crayon-59d380ad4691a673934356-19">
                  <span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span>
                  <span class="crayon-v">res</span>
                  <span class="crayon-sy">.</span>
                  <span class="crayon-e">status</span>
                  <span class="crayon-sy">(</span>
                  <span class="crayon-cn">401</span>
                  <span class="crayon-sy">)</span>
                  <span class="crayon-sy">.</span>
                  <span class="crayon-e">send</span>
                  <span class="crayon-sy">(</span>
                  <span class="crayon-sy">{</span>
                  <span class="crayon-v">message</span>
                  <span class="crayon-o">:</span>
                  <span class="crayon-h"> </span>
                  <span class="crayon-s">'Token Expired'</span>
                  <span class="crayon-sy">}</span>
                  <span class="crayon-sy">)</span>
                  <span class="crayon-sy">;</span>
                 </div>
                 <div class="crayon-line crayon-striped-line" id="crayon-59d380ad4691a673934356-20">
                  <span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span>
                  <span class="crayon-sy">}</span>
                  <span class="crayon-h"> </span>
                  <span class="crayon-st">else</span>
                  <span class="crayon-h"> </span>
                  <span class="crayon-sy">{</span>
                 </div>
                 <div class="crayon-line" id="crayon-59d380ad4691a673934356-21">
                  <span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span>
                  <span class="crayon-v">res</span>
                  <span class="crayon-sy">.</span>
                  <span class="crayon-e">status</span>
                  <span class="crayon-sy">(</span>
                  <span class="crayon-cn">401</span>
                  <span class="crayon-sy">)</span>
                  <span class="crayon-sy">.</span>
                  <span class="crayon-e">send</span>
                  <span class="crayon-sy">(</span>
                  <span class="crayon-sy">{</span>
                  <span class="crayon-v">message</span>
                  <span class="crayon-o">:</span>
                  <span class="crayon-h"> </span>
                  <span class="crayon-s">'Authentication failed'</span>
                  <span class="crayon-sy">}</span>
                  <span class="crayon-sy">)</span>
                  <span class="crayon-sy">;</span>
                 </div>
                 <div class="crayon-line crayon-striped-line" id="crayon-59d380ad4691a673934356-22">
                  <span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span>
                  <span class="crayon-sy">}</span>
                 </div>
                 <div class="crayon-line" id="crayon-59d380ad4691a673934356-23">
                  &nbsp;
                 </div>
                 <div class="crayon-line crayon-striped-line" id="crayon-59d380ad4691a673934356-24">
                  <span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span>
                  <span class="crayon-st">return</span>
                  <span class="crayon-sy">;</span>
                 </div>
                 <div class="crayon-line" id="crayon-59d380ad4691a673934356-25">
                  <span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span>
                  <span class="crayon-sy">}</span>
                 </div>
                 <div class="crayon-line crayon-striped-line" id="crayon-59d380ad4691a673934356-26">
                  &nbsp;
                 </div>
                 <div class="crayon-line" id="crayon-59d380ad4691a673934356-27">
                  <span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span>
                  <span class="crayon-st">if</span>
                  <span class="crayon-h"> </span>
                  <span class="crayon-sy">(</span>
                  <span class="crayon-o">!</span>
                  <span class="crayon-v">role</span>
                  <span class="crayon-h"> </span>
                  <span class="crayon-o">||</span>
                  <span class="crayon-h"> </span>
                  <span class="crayon-v">role</span>
                  <span class="crayon-h"> </span>
                  <span class="crayon-o">===</span>
                  <span class="crayon-h"> </span>
                  <span class="crayon-v">payload</span>
                  <span class="crayon-sy">.</span>
                  <span class="crayon-v">role</span>
                  <span class="crayon-sy">)</span>
                  <span class="crayon-h"> </span>
                  <span class="crayon-sy">{</span>
                 </div>
                 <div class="crayon-line crayon-striped-line" id="crayon-59d380ad4691a673934356-28">
                  <span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span>
                  <span class="crayon-c">//pass some user details through in case they are needed</span>
                 </div>
                 <div class="crayon-line" id="crayon-59d380ad4691a673934356-29">
                  <span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span>
                  <span class="crayon-v">req</span>
                  <span class="crayon-sy">.</span>
                  <span class="crayon-v">user</span>
                  <span class="crayon-h"> </span>
                  <span class="crayon-o">=</span>
                  <span class="crayon-h"> </span>
                  <span class="crayon-sy">{</span>
                 </div>
                 <div class="crayon-line crayon-striped-line" id="crayon-59d380ad4691a673934356-30">
                  <span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span>
                  <span class="crayon-v">email</span>
                  <span class="crayon-o">:</span>
                  <span class="crayon-h"> </span>
                  <span class="crayon-v">payload</span>
                  <span class="crayon-sy">.</span>
                  <span class="crayon-v">sub</span>
                  <span class="crayon-sy">,</span>
                 </div>
                 <div class="crayon-line" id="crayon-59d380ad4691a673934356-31">
                  <span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span>
                  <span class="crayon-v">role</span>
                  <span class="crayon-o">:</span>
                  <span class="crayon-h"> </span>
                  <span class="crayon-v">payload</span>
                  <span class="crayon-sy">.</span>
                  <span class="crayon-i">role</span>
                 </div>
                 <div class="crayon-line crayon-striped-line" id="crayon-59d380ad4691a673934356-32">
                  <span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span>
                  <span class="crayon-sy">}</span>
                  <span class="crayon-sy">;</span>
                 </div>
                 <div class="crayon-line" id="crayon-59d380ad4691a673934356-33">
                  &nbsp;
                 </div>
                 <div class="crayon-line crayon-striped-line" id="crayon-59d380ad4691a673934356-34">
                  <span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span>
                  <span class="crayon-e">next</span>
                  <span class="crayon-sy">(</span>
                  <span class="crayon-sy">)</span>
                  <span class="crayon-sy">;</span>
                 </div>
                 <div class="crayon-line" id="crayon-59d380ad4691a673934356-35">
                  <span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span>
                  <span class="crayon-sy">}</span>
                  <span class="crayon-h"> </span>
                  <span class="crayon-st">else</span>
                  <span class="crayon-h"> </span>
                  <span class="crayon-sy">{</span>
                 </div>
                 <div class="crayon-line crayon-striped-line" id="crayon-59d380ad4691a673934356-36">
                  <span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span>
                  <span class="crayon-v">res</span>
                  <span class="crayon-sy">.</span>
                  <span class="crayon-e">status</span>
                  <span class="crayon-sy">(</span>
                  <span class="crayon-cn">401</span>
                  <span class="crayon-sy">)</span>
                  <span class="crayon-sy">.</span>
                  <span class="crayon-e">send</span>
                  <span class="crayon-sy">(</span>
                  <span class="crayon-sy">{</span>
                  <span class="crayon-v">message</span>
                  <span class="crayon-o">:</span>
                  <span class="crayon-h"> </span>
                  <span class="crayon-s">'You are not authorized'</span>
                  <span class="crayon-sy">}</span>
                  <span class="crayon-sy">)</span>
                  <span class="crayon-sy">;</span>
                 </div>
                 <div class="crayon-line" id="crayon-59d380ad4691a673934356-37">
                  <span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span>
                  <span class="crayon-sy">}</span>
                 </div>
                 <div class="crayon-line crayon-striped-line" id="crayon-59d380ad4691a673934356-38">
                  <span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;</span>
                  <span class="crayon-sy">}</span>
                 </div>
                 <div class="crayon-line" id="crayon-59d380ad4691a673934356-39">
                  <span class="crayon-sy">}</span>
                 </div>
                 <div class="crayon-line crayon-striped-line" id="crayon-59d380ad4691a673934356-40">
                  &nbsp;
                 </div>
                 <div class="crayon-line" id="crayon-59d380ad4691a673934356-41">
                  <span class="crayon-v">module</span>
                  <span class="crayon-sy">.</span>
                  <span class="crayon-v">exports</span>
                  <span class="crayon-h"> </span>
                  <span class="crayon-o">=</span>
                  <span class="crayon-h"> </span>
                  <span class="crayon-v">auth</span>
                  <span class="crayon-sy">;</span>
                 </div>
                </div></td> 
              </tr> 
             </tbody>
            </table> 
           </div> 
          </div> 
          <!-- [Format Time: 0.0048 seconds] --> 
          <p>Notice that the <span class="inline-code">auth</span> function returns a function (middleware) that handles the authentication and authorization. If both checks pass then <span class="inline-code">next</span> is invoked which executes the next handler on the route. How can we use this new middleware? All we have to do is require it into <span class="inline-code">server.js</span> and invoke it as the first handler for a route that should be protected.</p> 
          <!-- Crayon Syntax Highlighter v_2.7.2_beta --> 
          <div id="crayon-59d380ad46922243717232" class="crayon-syntax crayon-theme-classic crayon-font-monaco crayon-os-pc print-yes notranslate" data-settings=" no-popup minimize scroll-mouseover" style=" margin-top: 12px; margin-bottom: 12px; font-size: 12px !important; line-height: 15px !important;"> 
           <div class="crayon-toolbar" data-settings=" show" style="font-size: 12px !important;height: 18px !important; line-height: 18px !important;">
            <span class="crayon-title">auth-api/server.js</span> 
            <div class="crayon-tools" style="font-size: 12px !important;height: 18px !important; line-height: 18px !important;">
             <div class="crayon-button crayon-copy-button" title="Copy">
              <div class="crayon-button-icon"></div>
             </div>
             <span class="crayon-language">JavaScript</span>
            </div>
           </div> 
           <div class="crayon-info" style="min-height: 16.8px !important; line-height: 16.8px !important;"></div> 
           <div class="crayon-plain-wrap">
            <textarea wrap="soft" class="crayon-plain print-no" data-settings="dblclick" readonly style="-moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4; font-size: 12px !important; line-height: 15px !important;">
var express = require('express');
var morgan = require('morgan');
var bodyParser = require('body-parser');
var auth = require(__dirname + '/routes/auth.js');
var publicThings = require(__dirname + '/routes/publicThings.js');
var protectedThings = require(__dirname + '/routes/protectedThings.js');
var users = require(__dirname + '/routes/users.js');
var logins = require(__dirname + '/routes/logins.js');
var app;
var router;
var port = 3000;

app = express();

app.use(morgan('combined')); //logger
app.use(bodyParser.json());

router = express.Router();

router.get('/public_things', publicThings.get);
router.get('/protected_things', auth(), protectedThings.get);
router.get('/protected_things2', auth('ADMIN'), protectedThings.get);
router.post('/users', users.post);
router.post('/logins', logins.post);

app.use('/api', router);

app.listen(port, function() {
    console.log('Web server listening on localhost:' + port);
});</textarea>
           </div> 
           <div class="crayon-main" style=""> 
            <table class="crayon-table"> 
             <tbody>
              <tr class="crayon-row"> 
               <td class="crayon-nums " data-settings="show"> 
                <div class="crayon-nums-content" style="font-size: 12px !important; line-height: 15px !important;">
                 <div class="crayon-num" data-line="crayon-59d380ad46922243717232-1">
                  1
                 </div>
                 <div class="crayon-num crayon-striped-num" data-line="crayon-59d380ad46922243717232-2">
                  2
                 </div>
                 <div class="crayon-num" data-line="crayon-59d380ad46922243717232-3">
                  3
                 </div>
                 <div class="crayon-num crayon-marked-num crayon-top crayon-bottom crayon-striped-num" data-line="crayon-59d380ad46922243717232-4">
                  4
                 </div>
                 <div class="crayon-num" data-line="crayon-59d380ad46922243717232-5">
                  5
                 </div>
                 <div class="crayon-num crayon-striped-num" data-line="crayon-59d380ad46922243717232-6">
                  6
                 </div>
                 <div class="crayon-num" data-line="crayon-59d380ad46922243717232-7">
                  7
                 </div>
                 <div class="crayon-num crayon-striped-num" data-line="crayon-59d380ad46922243717232-8">
                  8
                 </div>
                 <div class="crayon-num" data-line="crayon-59d380ad46922243717232-9">
                  9
                 </div>
                 <div class="crayon-num crayon-striped-num" data-line="crayon-59d380ad46922243717232-10">
                  10
                 </div>
                 <div class="crayon-num" data-line="crayon-59d380ad46922243717232-11">
                  11
                 </div>
                 <div class="crayon-num crayon-striped-num" data-line="crayon-59d380ad46922243717232-12">
                  12
                 </div>
                 <div class="crayon-num" data-line="crayon-59d380ad46922243717232-13">
                  13
                 </div>
                 <div class="crayon-num crayon-striped-num" data-line="crayon-59d380ad46922243717232-14">
                  14
                 </div>
                 <div class="crayon-num" data-line="crayon-59d380ad46922243717232-15">
                  15
                 </div>
                 <div class="crayon-num crayon-striped-num" data-line="crayon-59d380ad46922243717232-16">
                  16
                 </div>
                 <div class="crayon-num" data-line="crayon-59d380ad46922243717232-17">
                  17
                 </div>
                 <div class="crayon-num crayon-striped-num" data-line="crayon-59d380ad46922243717232-18">
                  18
                 </div>
                 <div class="crayon-num" data-line="crayon-59d380ad46922243717232-19">
                  19
                 </div>
                 <div class="crayon-num crayon-striped-num" data-line="crayon-59d380ad46922243717232-20">
                  20
                 </div>
                 <div class="crayon-num crayon-marked-num crayon-top" data-line="crayon-59d380ad46922243717232-21">
                  21
                 </div>
                 <div class="crayon-num crayon-marked-num crayon-bottom crayon-striped-num" data-line="crayon-59d380ad46922243717232-22">
                  22
                 </div>
                 <div class="crayon-num" data-line="crayon-59d380ad46922243717232-23">
                  23
                 </div>
                 <div class="crayon-num crayon-striped-num" data-line="crayon-59d380ad46922243717232-24">
                  24
                 </div>
                 <div class="crayon-num" data-line="crayon-59d380ad46922243717232-25">
                  25
                 </div>
                 <div class="crayon-num crayon-striped-num" data-line="crayon-59d380ad46922243717232-26">
                  26
                 </div>
                 <div class="crayon-num" data-line="crayon-59d380ad46922243717232-27">
                  27
                 </div>
                 <div class="crayon-num crayon-striped-num" data-line="crayon-59d380ad46922243717232-28">
                  28
                 </div>
                 <div class="crayon-num" data-line="crayon-59d380ad46922243717232-29">
                  29
                 </div>
                 <div class="crayon-num crayon-striped-num" data-line="crayon-59d380ad46922243717232-30">
                  30
                 </div>
                </div> </td> 
               <td class="crayon-code">
                <div class="crayon-pre" style="font-size: 12px !important; line-height: 15px !important; -moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4;">
                 <div class="crayon-line" id="crayon-59d380ad46922243717232-1">
                  <span class="crayon-t">var</span>
                  <span class="crayon-h"> </span>
                  <span class="crayon-v">express</span>
                  <span class="crayon-h"> </span>
                  <span class="crayon-o">=</span>
                  <span class="crayon-h"> </span>
                  <span class="crayon-e">require</span>
                  <span class="crayon-sy">(</span>
                  <span class="crayon-s">'express'</span>
                  <span class="crayon-sy">)</span>
                  <span class="crayon-sy">;</span>
                 </div>
                 <div class="crayon-line crayon-striped-line" id="crayon-59d380ad46922243717232-2">
                  <span class="crayon-t">var</span>
                  <span class="crayon-h"> </span>
                  <span class="crayon-v">morgan</span>
                  <span class="crayon-h"> </span>
                  <span class="crayon-o">=</span>
                  <span class="crayon-h"> </span>
                  <span class="crayon-e">require</span>
                  <span class="crayon-sy">(</span>
                  <span class="crayon-s">'morgan'</span>
                  <span class="crayon-sy">)</span>
                  <span class="crayon-sy">;</span>
                 </div>
                 <div class="crayon-line" id="crayon-59d380ad46922243717232-3">
                  <span class="crayon-t">var</span>
                  <span class="crayon-h"> </span>
                  <span class="crayon-v">bodyParser</span>
                  <span class="crayon-h"> </span>
                  <span class="crayon-o">=</span>
                  <span class="crayon-h"> </span>
                  <span class="crayon-e">require</span>
                  <span class="crayon-sy">(</span>
                  <span class="crayon-s">'body-parser'</span>
                  <span class="crayon-sy">)</span>
                  <span class="crayon-sy">;</span>
                 </div>
                 <div class="crayon-line crayon-marked-line crayon-top crayon-bottom crayon-striped-line" id="crayon-59d380ad46922243717232-4">
                  <span class="crayon-t">var</span>
                  <span class="crayon-h"> </span>
                  <span class="crayon-v">auth</span>
                  <span class="crayon-h"> </span>
                  <span class="crayon-o">=</span>
                  <span class="crayon-h"> </span>
                  <span class="crayon-e">require</span>
                  <span class="crayon-sy">(</span>
                  <span class="crayon-v">__dirname</span>
                  <span class="crayon-h"> </span>
                  <span class="crayon-o">+</span>
                  <span class="crayon-h"> </span>
                  <span class="crayon-s">'/routes/auth.js'</span>
                  <span class="crayon-sy">)</span>
                  <span class="crayon-sy">;</span>
                 </div>
                 <div class="crayon-line" id="crayon-59d380ad46922243717232-5">
                  <span class="crayon-t">var</span>
                  <span class="crayon-h"> </span>
                  <span class="crayon-v">publicThings</span>
                  <span class="crayon-h"> </span>
                  <span class="crayon-o">=</span>
                  <span class="crayon-h"> </span>
                  <span class="crayon-e">require</span>
                  <span class="crayon-sy">(</span>
                  <span class="crayon-v">__dirname</span>
                  <span class="crayon-h"> </span>
                  <span class="crayon-o">+</span>
                  <span class="crayon-h"> </span>
                  <span class="crayon-s">'/routes/publicThings.js'</span>
                  <span class="crayon-sy">)</span>
                  <span class="crayon-sy">;</span>
                 </div>
                 <div class="crayon-line crayon-striped-line" id="crayon-59d380ad46922243717232-6">
                  <span class="crayon-t">var</span>
                  <span class="crayon-h"> </span>
                  <span class="crayon-v">protectedThings</span>
                  <span class="crayon-h"> </span>
                  <span class="crayon-o">=</span>
                  <span class="crayon-h"> </span>
                  <span class="crayon-e">require</span>
                  <span class="crayon-sy">(</span>
                  <span class="crayon-v">__dirname</span>
                  <span class="crayon-h"> </span>
                  <span class="crayon-o">+</span>
                  <span class="crayon-h"> </span>
                  <span class="crayon-s">'/routes/protectedThings.js'</span>
                  <span class="crayon-sy">)</span>
                  <span class="crayon-sy">;</span>
                 </div>
                 <div class="crayon-line" id="crayon-59d380ad46922243717232-7">
                  <span class="crayon-t">var</span>
                  <span class="crayon-h"> </span>
                  <span class="crayon-v">users</span>
                  <span class="crayon-h"> </span>
                  <span class="crayon-o">=</span>
                  <span class="crayon-h"> </span>
                  <span class="crayon-e">require</span>
                  <span class="crayon-sy">(</span>
                  <span class="crayon-v">__dirname</span>
                  <span class="crayon-h"> </span>
                  <span class="crayon-o">+</span>
                  <span class="crayon-h"> </span>
                  <span class="crayon-s">'/routes/users.js'</span>
                  <span class="crayon-sy">)</span>
                  <span class="crayon-sy">;</span>
                 </div>
                 <div class="crayon-line crayon-striped-line" id="crayon-59d380ad46922243717232-8">
                  <span class="crayon-t">var</span>
                  <span class="crayon-h"> </span>
                  <span class="crayon-v">logins</span>
                  <span class="crayon-h"> </span>
                  <span class="crayon-o">=</span>
                  <span class="crayon-h"> </span>
                  <span class="crayon-e">require</span>
                  <span class="crayon-sy">(</span>
                  <span class="crayon-v">__dirname</span>
                  <span class="crayon-h"> </span>
                  <span class="crayon-o">+</span>
                  <span class="crayon-h"> </span>
                  <span class="crayon-s">'/routes/logins.js'</span>
                  <span class="crayon-sy">)</span>
                  <span class="crayon-sy">;</span>
                 </div>
                 <div class="crayon-line" id="crayon-59d380ad46922243717232-9">
                  <span class="crayon-t">var</span>
                  <span class="crayon-h"> </span>
                  <span class="crayon-v">app</span>
                  <span class="crayon-sy">;</span>
                 </div>
                 <div class="crayon-line crayon-striped-line" id="crayon-59d380ad46922243717232-10">
                  <span class="crayon-t">var</span>
                  <span class="crayon-h"> </span>
                  <span class="crayon-v">router</span>
                  <span class="crayon-sy">;</span>
                 </div>
                 <div class="crayon-line" id="crayon-59d380ad46922243717232-11">
                  <span class="crayon-t">var</span>
                  <span class="crayon-h"> </span>
                  <span class="crayon-v">port</span>
                  <span class="crayon-h"> </span>
                  <span class="crayon-o">=</span>
                  <span class="crayon-h"> </span>
                  <span class="crayon-cn">3000</span>
                  <span class="crayon-sy">;</span>
                 </div>
                 <div class="crayon-line crayon-striped-line" id="crayon-59d380ad46922243717232-12">
                  &nbsp;
                 </div>
                 <div class="crayon-line" id="crayon-59d380ad46922243717232-13">
                  <span class="crayon-v">app</span>
                  <span class="crayon-h"> </span>
                  <span class="crayon-o">=</span>
                  <span class="crayon-h"> </span>
                  <span class="crayon-e">express</span>
                  <span class="crayon-sy">(</span>
                  <span class="crayon-sy">)</span>
                  <span class="crayon-sy">;</span>
                 </div>
                 <div class="crayon-line crayon-striped-line" id="crayon-59d380ad46922243717232-14">
                  &nbsp;
                 </div>
                 <div class="crayon-line" id="crayon-59d380ad46922243717232-15">
                  <span class="crayon-v">app</span>
                  <span class="crayon-sy">.</span>
                  <span class="crayon-st">use</span>
                  <span class="crayon-sy">(</span>
                  <span class="crayon-e">morgan</span>
                  <span class="crayon-sy">(</span>
                  <span class="crayon-s">'combined'</span>
                  <span class="crayon-sy">)</span>
                  <span class="crayon-sy">)</span>
                  <span class="crayon-sy">;</span>
                  <span class="crayon-h"> </span>
                  <span class="crayon-c">//logger</span>
                 </div>
                 <div class="crayon-line crayon-striped-line" id="crayon-59d380ad46922243717232-16">
                  <span class="crayon-v">app</span>
                  <span class="crayon-sy">.</span>
                  <span class="crayon-st">use</span>
                  <span class="crayon-sy">(</span>
                  <span class="crayon-v">bodyParser</span>
                  <span class="crayon-sy">.</span>
                  <span class="crayon-e">json</span>
                  <span class="crayon-sy">(</span>
                  <span class="crayon-sy">)</span>
                  <span class="crayon-sy">)</span>
                  <span class="crayon-sy">;</span>
                 </div>
                 <div class="crayon-line" id="crayon-59d380ad46922243717232-17">
                  &nbsp;
                 </div>
                 <div class="crayon-line crayon-striped-line" id="crayon-59d380ad46922243717232-18">
                  <span class="crayon-v">router</span>
                  <span class="crayon-h"> </span>
                  <span class="crayon-o">=</span>
                  <span class="crayon-h"> </span>
                  <span class="crayon-v">express</span>
                  <span class="crayon-sy">.</span>
                  <span class="crayon-e">Router</span>
                  <span class="crayon-sy">(</span>
                  <span class="crayon-sy">)</span>
                  <span class="crayon-sy">;</span>
                 </div>
                 <div class="crayon-line" id="crayon-59d380ad46922243717232-19">
                  &nbsp;
                 </div>
                 <div class="crayon-line crayon-striped-line" id="crayon-59d380ad46922243717232-20">
                  <span class="crayon-v">router</span>
                  <span class="crayon-sy">.</span>
                  <span class="crayon-e">get</span>
                  <span class="crayon-sy">(</span>
                  <span class="crayon-s">'/public_things'</span>
                  <span class="crayon-sy">,</span>
                  <span class="crayon-h"> </span>
                  <span class="crayon-v">publicThings</span>
                  <span class="crayon-sy">.</span>
                  <span class="crayon-v">get</span>
                  <span class="crayon-sy">)</span>
                  <span class="crayon-sy">;</span>
                 </div>
                 <div class="crayon-line crayon-marked-line crayon-top" id="crayon-59d380ad46922243717232-21">
                  <span class="crayon-v">router</span>
                  <span class="crayon-sy">.</span>
                  <span class="crayon-e">get</span>
                  <span class="crayon-sy">(</span>
                  <span class="crayon-s">'/protected_things'</span>
                  <span class="crayon-sy">,</span>
                  <span class="crayon-h"> </span>
                  <span class="crayon-e">auth</span>
                  <span class="crayon-sy">(</span>
                  <span class="crayon-sy">)</span>
                  <span class="crayon-sy">,</span>
                  <span class="crayon-h"> </span>
                  <span class="crayon-v">protectedThings</span>
                  <span class="crayon-sy">.</span>
                  <span class="crayon-v">get</span>
                  <span class="crayon-sy">)</span>
                  <span class="crayon-sy">;</span>
                 </div>
                 <div class="crayon-line crayon-marked-line crayon-bottom crayon-striped-line" id="crayon-59d380ad46922243717232-22">
                  <span class="crayon-v">router</span>
                  <span class="crayon-sy">.</span>
                  <span class="crayon-e">get</span>
                  <span class="crayon-sy">(</span>
                  <span class="crayon-s">'/protected_things2'</span>
                  <span class="crayon-sy">,</span>
                  <span class="crayon-h"> </span>
                  <span class="crayon-e">auth</span>
                  <span class="crayon-sy">(</span>
                  <span class="crayon-s">'ADMIN'</span>
                  <span class="crayon-sy">)</span>
                  <span class="crayon-sy">,</span>
                  <span class="crayon-h"> </span>
                  <span class="crayon-v">protectedThings</span>
                  <span class="crayon-sy">.</span>
                  <span class="crayon-v">get</span>
                  <span class="crayon-sy">)</span>
                  <span class="crayon-sy">;</span>
                 </div>
                 <div class="crayon-line" id="crayon-59d380ad46922243717232-23">
                  <span class="crayon-v">router</span>
                  <span class="crayon-sy">.</span>
                  <span class="crayon-e">post</span>
                  <span class="crayon-sy">(</span>
                  <span class="crayon-s">'/users'</span>
                  <span class="crayon-sy">,</span>
                  <span class="crayon-h"> </span>
                  <span class="crayon-v">users</span>
                  <span class="crayon-sy">.</span>
                  <span class="crayon-v">post</span>
                  <span class="crayon-sy">)</span>
                  <span class="crayon-sy">;</span>
                 </div>
                 <div class="crayon-line crayon-striped-line" id="crayon-59d380ad46922243717232-24">
                  <span class="crayon-v">router</span>
                  <span class="crayon-sy">.</span>
                  <span class="crayon-e">post</span>
                  <span class="crayon-sy">(</span>
                  <span class="crayon-s">'/logins'</span>
                  <span class="crayon-sy">,</span>
                  <span class="crayon-h"> </span>
                  <span class="crayon-v">logins</span>
                  <span class="crayon-sy">.</span>
                  <span class="crayon-v">post</span>
                  <span class="crayon-sy">)</span>
                  <span class="crayon-sy">;</span>
                 </div>
                 <div class="crayon-line" id="crayon-59d380ad46922243717232-25">
                  &nbsp;
                 </div>
                 <div class="crayon-line crayon-striped-line" id="crayon-59d380ad46922243717232-26">
                  <span class="crayon-v">app</span>
                  <span class="crayon-sy">.</span>
                  <span class="crayon-st">use</span>
                  <span class="crayon-sy">(</span>
                  <span class="crayon-s">'/api'</span>
                  <span class="crayon-sy">,</span>
                  <span class="crayon-h"> </span>
                  <span class="crayon-v">router</span>
                  <span class="crayon-sy">)</span>
                  <span class="crayon-sy">;</span>
                 </div>
                 <div class="crayon-line" id="crayon-59d380ad46922243717232-27">
                  &nbsp;
                 </div>
                 <div class="crayon-line crayon-striped-line" id="crayon-59d380ad46922243717232-28">
                  <span class="crayon-v">app</span>
                  <span class="crayon-sy">.</span>
                  <span class="crayon-e">listen</span>
                  <span class="crayon-sy">(</span>
                  <span class="crayon-v">port</span>
                  <span class="crayon-sy">,</span>
                  <span class="crayon-h"> </span>
                  <span class="crayon-t">function</span>
                  <span class="crayon-sy">(</span>
                  <span class="crayon-sy">)</span>
                  <span class="crayon-h"> </span>
                  <span class="crayon-sy">{</span>
                 </div>
                 <div class="crayon-line" id="crayon-59d380ad46922243717232-29">
                  <span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;</span>
                  <span class="crayon-v">console</span>
                  <span class="crayon-sy">.</span>
                  <span class="crayon-e">log</span>
                  <span class="crayon-sy">(</span>
                  <span class="crayon-s">'Web server listening on localhost:'</span>
                  <span class="crayon-h"> </span>
                  <span class="crayon-o">+</span>
                  <span class="crayon-h"> </span>
                  <span class="crayon-v">port</span>
                  <span class="crayon-sy">)</span>
                  <span class="crayon-sy">;</span>
                 </div>
                 <div class="crayon-line crayon-striped-line" id="crayon-59d380ad46922243717232-30">
                  <span class="crayon-sy">}</span>
                  <span class="crayon-sy">)</span>
                  <span class="crayon-sy">;</span>
                 </div>
                </div></td> 
              </tr> 
             </tbody>
            </table> 
           </div> 
          </div> 
          <!-- [Format Time: 0.0043 seconds] --> 
          <p>Here you see that the original <span class="inline-code">/api/protected_things</span> route still requires authentication (auth is used but not passed a role). There’s also a new route, <span class="inline-code">/api/protected_things2</span> that demonstrates how easy it is to ensure that a user has a certain role. Of course this logic could be modified to better meet your authentication and authorization needs. </p> 
          <p>I hope this helps answer some questions regarding local authentication with Oracle Database and JWTs!</p> 
         </div>
         <!--/content-inner--> 
        </div>
        <!--/post-content--> 
       </article>
       <!--/article--> 
       <div class="comments-section"> 
        <!-- You can start editing here. --> 
        <div class="comment-wrap "> 
         <h3 id="comments"> 12 Comments</h3> 
         <div class="navigation"> 
          <div class="alignleft"></div> 
          <div class="alignright"></div> 
         </div> 
         <ul class="comment-list "> 
          <li class="comment even thread-even depth-1" id="comment-144"> 
           <div id="div-comment-144" class="comment-body"> 
            <div class="comment-author vcard"> 
             <img alt="" src="https://secure.gravatar.com/avatar/d9bcf79786027119d2e1532a1877f56a?s=60&amp;d=mm&amp;r=g" srcset="https://secure.gravatar.com/avatar/d9bcf79786027119d2e1532a1877f56a?s=120&amp;d=mm&amp;r=g 2x" class="avatar avatar-60 photo" height="60" width="60"> 
             <cite class="fn">Kaelon Egan</cite> 
             <span class="says">says:</span> 
            </div> 
            <div class="comment-meta commentmetadata">
             <a href="https://jsao.io/2015/06/authentication-with-node-js-jwts-and-oracle-database/#comment-144"> June 3, 2015 at 12:33 pm</a> 
            </div> 
            <p>Nice work Dan!</p> 
            <div class="reply">
             <a rel="nofollow" class="comment-reply-link" href="https://jsao.io/2015/06/authentication-with-node-js-jwts-and-oracle-database/?replytocom=144#respond" onclick="return addComment.moveForm( &quot;div-comment-144&quot;, &quot;144&quot;, &quot;respond&quot;, &quot;372&quot; )" aria-label="Reply to Kaelon Egan">Reply</a>
            </div> 
           </div> </li>
          <!-- #comment-## --> 
          <li class="comment odd alt thread-odd thread-alt depth-1" id="comment-145"> 
           <div id="div-comment-145" class="comment-body"> 
            <div class="comment-author vcard"> 
             <img alt="" src="https://secure.gravatar.com/avatar/936c8ea8208732ed417340f3850b40e5?s=60&amp;d=mm&amp;r=g" srcset="https://secure.gravatar.com/avatar/936c8ea8208732ed417340f3850b40e5?s=120&amp;d=mm&amp;r=g 2x" class="avatar avatar-60 photo" height="60" width="60"> 
             <cite class="fn"><a href="http://jes.blogs.shellprompt.net" rel="external nofollow" class="url">John Scott</a></cite> 
             <span class="says">says:</span> 
            </div> 
            <div class="comment-meta commentmetadata">
             <a href="https://jsao.io/2015/06/authentication-with-node-js-jwts-and-oracle-database/#comment-145"> June 4, 2015 at 2:56 am</a> 
            </div> 
            <p>Dan,</p> 
            <p>Fantastic, awesome work!</p> 
            <div class="reply">
             <a rel="nofollow" class="comment-reply-link" href="https://jsao.io/2015/06/authentication-with-node-js-jwts-and-oracle-database/?replytocom=145#respond" onclick="return addComment.moveForm( &quot;div-comment-145&quot;, &quot;145&quot;, &quot;respond&quot;, &quot;372&quot; )" aria-label="Reply to John Scott">Reply</a>
            </div> 
           </div> </li>
          <!-- #comment-## --> 
          <li class="comment even thread-even depth-1" id="comment-187"> 
           <div id="div-comment-187" class="comment-body"> 
            <div class="comment-author vcard"> 
             <img alt="" src="https://secure.gravatar.com/avatar/66cd3e07af6b051195e8811d088a4fc1?s=60&amp;d=mm&amp;r=g" srcset="https://secure.gravatar.com/avatar/66cd3e07af6b051195e8811d088a4fc1?s=120&amp;d=mm&amp;r=g 2x" class="avatar avatar-60 photo" height="60" width="60"> 
             <cite class="fn">Valentino</cite> 
             <span class="says">says:</span> 
            </div> 
            <div class="comment-meta commentmetadata">
             <a href="https://jsao.io/2015/06/authentication-with-node-js-jwts-and-oracle-database/#comment-187"> May 12, 2016 at 4:07 am</a> 
            </div> 
            <p>Actually followed the tutorial from start to finish. Amazing learning experience !<br> Dan , it’s been almost a year since you wrote this. Did you get any new experiences that you would improve authorization and that is not mentioned in this guide.</p> 
            <div class="reply">
             <a rel="nofollow" class="comment-reply-link" href="https://jsao.io/2015/06/authentication-with-node-js-jwts-and-oracle-database/?replytocom=187#respond" onclick="return addComment.moveForm( &quot;div-comment-187&quot;, &quot;187&quot;, &quot;respond&quot;, &quot;372&quot; )" aria-label="Reply to Valentino">Reply</a>
            </div> 
           </div> </li>
          <!-- #comment-## --> 
          <li class="comment byuser comment-author-danmcghan bypostauthor odd alt thread-odd thread-alt depth-1" id="comment-189"> 
           <div id="div-comment-189" class="comment-body"> 
            <div class="comment-author vcard"> 
             <img alt="" src="https://secure.gravatar.com/avatar/62d96a62b3f31cb7fd44f92f32108b7b?s=60&amp;d=mm&amp;r=g" srcset="https://secure.gravatar.com/avatar/62d96a62b3f31cb7fd44f92f32108b7b?s=120&amp;d=mm&amp;r=g 2x" class="avatar avatar-60 photo" height="60" width="60"> 
             <cite class="fn">danmcghan</cite> 
             <span class="says">says:</span> 
            </div> 
            <div class="comment-meta commentmetadata">
             <a href="https://jsao.io/2015/06/authentication-with-node-js-jwts-and-oracle-database/#comment-189"> May 12, 2016 at 3:35 pm</a> 
            </div> 
            <p>Thanks! </p> 
            <p>Almost a year, wow! Honestly I haven’t revisited this topic for a while, so nothing new to add so far…</p> 
            <div class="reply">
             <a rel="nofollow" class="comment-reply-link" href="https://jsao.io/2015/06/authentication-with-node-js-jwts-and-oracle-database/?replytocom=189#respond" onclick="return addComment.moveForm( &quot;div-comment-189&quot;, &quot;189&quot;, &quot;respond&quot;, &quot;372&quot; )" aria-label="Reply to danmcghan">Reply</a>
            </div> 
           </div> </li>
          <!-- #comment-## --> 
          <li class="comment even thread-even depth-1 parent" id="comment-229"> 
           <div id="div-comment-229" class="comment-body"> 
            <div class="comment-author vcard"> 
             <img alt="" src="https://secure.gravatar.com/avatar/7fdc2683bcdab3830a16e4fba0c6e11b?s=60&amp;d=mm&amp;r=g" srcset="https://secure.gravatar.com/avatar/7fdc2683bcdab3830a16e4fba0c6e11b?s=120&amp;d=mm&amp;r=g 2x" class="avatar avatar-60 photo" height="60" width="60"> 
             <cite class="fn">Femi</cite> 
             <span class="says">says:</span> 
            </div> 
            <div class="comment-meta commentmetadata">
             <a href="https://jsao.io/2015/06/authentication-with-node-js-jwts-and-oracle-database/#comment-229"> October 26, 2016 at 7:14 am</a> 
            </div> 
            <p>Hi Dan,<br> This is a very useful article and has surely put my on the right track after a few baby steps.<br> I do want to ask though, is there any library you’re aware of that helps create/verify JWT’s… In PL/SQL (I forgot to add)<br> Thanks</p> 
            <div class="reply">
             <a rel="nofollow" class="comment-reply-link" href="https://jsao.io/2015/06/authentication-with-node-js-jwts-and-oracle-database/?replytocom=229#respond" onclick="return addComment.moveForm( &quot;div-comment-229&quot;, &quot;229&quot;, &quot;respond&quot;, &quot;372&quot; )" aria-label="Reply to Femi">Reply</a>
            </div> 
           </div> 
           <ul class="children"> 
            <li class="comment byuser comment-author-danmcghan bypostauthor odd alt depth-2" id="comment-230"> 
             <div id="div-comment-230" class="comment-body"> 
              <div class="comment-author vcard"> 
               <img alt="" src="https://secure.gravatar.com/avatar/62d96a62b3f31cb7fd44f92f32108b7b?s=60&amp;d=mm&amp;r=g" srcset="https://secure.gravatar.com/avatar/62d96a62b3f31cb7fd44f92f32108b7b?s=120&amp;d=mm&amp;r=g 2x" class="avatar avatar-60 photo" height="60" width="60"> 
               <cite class="fn">danmcghan</cite> 
               <span class="says">says:</span> 
              </div> 
              <div class="comment-meta commentmetadata">
               <a href="https://jsao.io/2015/06/authentication-with-node-js-jwts-and-oracle-database/#comment-230"> October 27, 2016 at 1:48 am</a> 
              </div> 
              <p>Hi Femi,</p> 
              <p>I’m glad it helped!</p> 
              <p>Sorry, I’m unaware of a PL/SQL based solution for this. But I’d say the correct place for this logic is in the middle tier since you’re trying to secure routes there, no?</p> 
              <p>Regards,<br> Dan</p> 
              <div class="reply">
               <a rel="nofollow" class="comment-reply-link" href="https://jsao.io/2015/06/authentication-with-node-js-jwts-and-oracle-database/?replytocom=230#respond" onclick="return addComment.moveForm( &quot;div-comment-230&quot;, &quot;230&quot;, &quot;respond&quot;, &quot;372&quot; )" aria-label="Reply to danmcghan">Reply</a>
              </div> 
             </div> </li>
            <!-- #comment-## --> 
           </ul>
           <!-- .children --> </li>
          <!-- #comment-## --> 
          <li class="comment even thread-odd thread-alt depth-1 parent" id="comment-251"> 
           <div id="div-comment-251" class="comment-body"> 
            <div class="comment-author vcard"> 
             <img alt="" src="https://secure.gravatar.com/avatar/b596518fd5c8b12a45760415329a9832?s=60&amp;d=mm&amp;r=g" srcset="https://secure.gravatar.com/avatar/b596518fd5c8b12a45760415329a9832?s=120&amp;d=mm&amp;r=g 2x" class="avatar avatar-60 photo" height="60" width="60"> 
             <cite class="fn">jordan</cite> 
             <span class="says">says:</span> 
            </div> 
            <div class="comment-meta commentmetadata">
             <a href="https://jsao.io/2015/06/authentication-with-node-js-jwts-and-oracle-database/#comment-251"> February 16, 2017 at 5:47 am</a> 
            </div> 
            <p>When give a shot <a href="http://127.0.0.1:3000/api/users" rel="nofollow">http://127.0.0.1:3000/api/users</a>, i received “Cannot GET /api/users” .<br> What is the probelm?</p> 
            <div class="reply">
             <a rel="nofollow" class="comment-reply-link" href="https://jsao.io/2015/06/authentication-with-node-js-jwts-and-oracle-database/?replytocom=251#respond" onclick="return addComment.moveForm( &quot;div-comment-251&quot;, &quot;251&quot;, &quot;respond&quot;, &quot;372&quot; )" aria-label="Reply to jordan">Reply</a>
            </div> 
           </div> 
           <ul class="children"> 
            <li class="comment byuser comment-author-danmcghan bypostauthor odd alt depth-2" id="comment-252"> 
             <div id="div-comment-252" class="comment-body"> 
              <div class="comment-author vcard"> 
               <img alt="" src="https://secure.gravatar.com/avatar/62d96a62b3f31cb7fd44f92f32108b7b?s=60&amp;d=mm&amp;r=g" srcset="https://secure.gravatar.com/avatar/62d96a62b3f31cb7fd44f92f32108b7b?s=120&amp;d=mm&amp;r=g 2x" class="avatar avatar-60 photo" height="60" width="60"> 
               <cite class="fn">danmcghan</cite> 
               <span class="says">says:</span> 
              </div> 
              <div class="comment-meta commentmetadata">
               <a href="https://jsao.io/2015/06/authentication-with-node-js-jwts-and-oracle-database/#comment-252"> February 16, 2017 at 10:25 am</a> 
              </div> 
              <p>Hi Jordan,</p> 
              <p>This tutorial doesn’t have a route handler for GET on /api/users. There’s a handler for POST on /api/users. Perhaps that’s what you meant to do?</p> 
              <p>Regards,<br> Dan</p> 
              <div class="reply">
               <a rel="nofollow" class="comment-reply-link" href="https://jsao.io/2015/06/authentication-with-node-js-jwts-and-oracle-database/?replytocom=252#respond" onclick="return addComment.moveForm( &quot;div-comment-252&quot;, &quot;252&quot;, &quot;respond&quot;, &quot;372&quot; )" aria-label="Reply to danmcghan">Reply</a>
              </div> 
             </div> </li>
            <!-- #comment-## --> 
           </ul>
           <!-- .children --> </li>
          <!-- #comment-## --> 
          <li class="comment even thread-even depth-1 parent" id="comment-264"> 
           <div id="div-comment-264" class="comment-body"> 
            <div class="comment-author vcard"> 
             <img alt="" src="https://secure.gravatar.com/avatar/cb8cf7459cb02c952f590d07e8a66e55?s=60&amp;d=mm&amp;r=g" srcset="https://secure.gravatar.com/avatar/cb8cf7459cb02c952f590d07e8a66e55?s=120&amp;d=mm&amp;r=g 2x" class="avatar avatar-60 photo" height="60" width="60"> 
             <cite class="fn">Annjawn</cite> 
             <span class="says">says:</span> 
            </div> 
            <div class="comment-meta commentmetadata">
             <a href="https://jsao.io/2015/06/authentication-with-node-js-jwts-and-oracle-database/#comment-264"> April 11, 2017 at 1:46 am</a> 
            </div> 
            <p>This is beautiful. This answered so many of my questions!!! THANKS A TON Dan!</p> 
            <div class="reply">
             <a rel="nofollow" class="comment-reply-link" href="https://jsao.io/2015/06/authentication-with-node-js-jwts-and-oracle-database/?replytocom=264#respond" onclick="return addComment.moveForm( &quot;div-comment-264&quot;, &quot;264&quot;, &quot;respond&quot;, &quot;372&quot; )" aria-label="Reply to Annjawn">Reply</a>
            </div> 
           </div> 
           <ul class="children"> 
            <li class="comment byuser comment-author-danmcghan bypostauthor odd alt depth-2" id="comment-265"> 
             <div id="div-comment-265" class="comment-body"> 
              <div class="comment-author vcard"> 
               <img alt="" src="https://secure.gravatar.com/avatar/62d96a62b3f31cb7fd44f92f32108b7b?s=60&amp;d=mm&amp;r=g" srcset="https://secure.gravatar.com/avatar/62d96a62b3f31cb7fd44f92f32108b7b?s=120&amp;d=mm&amp;r=g 2x" class="avatar avatar-60 photo" height="60" width="60"> 
               <cite class="fn">danmcghan</cite> 
               <span class="says">says:</span> 
              </div> 
              <div class="comment-meta commentmetadata">
               <a href="https://jsao.io/2015/06/authentication-with-node-js-jwts-and-oracle-database/#comment-265"> April 11, 2017 at 11:23 am</a> 
              </div> 
              <p>Hi Annjawn,</p> 
              <p>I’m glad you found it useful!</p> 
              <p>Regards,<br> Dan</p> 
              <div class="reply">
               <a rel="nofollow" class="comment-reply-link" href="https://jsao.io/2015/06/authentication-with-node-js-jwts-and-oracle-database/?replytocom=265#respond" onclick="return addComment.moveForm( &quot;div-comment-265&quot;, &quot;265&quot;, &quot;respond&quot;, &quot;372&quot; )" aria-label="Reply to danmcghan">Reply</a>
              </div> 
             </div> </li>
            <!-- #comment-## --> 
           </ul>
           <!-- .children --> </li>
          <!-- #comment-## --> 
          <li class="comment even thread-odd thread-alt depth-1 parent" id="comment-274"> 
           <div id="div-comment-274" class="comment-body"> 
            <div class="comment-author vcard"> 
             <img alt="" src="https://secure.gravatar.com/avatar/32b620ba64dab0dca9432229c466a950?s=60&amp;d=mm&amp;r=g" srcset="https://secure.gravatar.com/avatar/32b620ba64dab0dca9432229c466a950?s=120&amp;d=mm&amp;r=g 2x" class="avatar avatar-60 photo" height="60" width="60"> 
             <cite class="fn">Harsha</cite> 
             <span class="says">says:</span> 
            </div> 
            <div class="comment-meta commentmetadata">
             <a href="https://jsao.io/2015/06/authentication-with-node-js-jwts-and-oracle-database/#comment-274"> June 7, 2017 at 10:57 am</a> 
            </div> 
            <p>Hey<br> Thank you so much for this code.<br> I have a small question what is sub inside the payload function used for ?</p> 
            <div class="reply">
             <a rel="nofollow" class="comment-reply-link" href="https://jsao.io/2015/06/authentication-with-node-js-jwts-and-oracle-database/?replytocom=274#respond" onclick="return addComment.moveForm( &quot;div-comment-274&quot;, &quot;274&quot;, &quot;respond&quot;, &quot;372&quot; )" aria-label="Reply to Harsha">Reply</a>
            </div> 
           </div> 
           <ul class="children"> 
            <li class="comment byuser comment-author-danmcghan bypostauthor odd alt depth-2" id="comment-276"> 
             <div id="div-comment-276" class="comment-body"> 
              <div class="comment-author vcard"> 
               <img alt="" src="https://secure.gravatar.com/avatar/62d96a62b3f31cb7fd44f92f32108b7b?s=60&amp;d=mm&amp;r=g" srcset="https://secure.gravatar.com/avatar/62d96a62b3f31cb7fd44f92f32108b7b?s=120&amp;d=mm&amp;r=g 2x" class="avatar avatar-60 photo" height="60" width="60"> 
               <cite class="fn">danmcghan</cite> 
               <span class="says">says:</span> 
              </div> 
              <div class="comment-meta commentmetadata">
               <a href="https://jsao.io/2015/06/authentication-with-node-js-jwts-and-oracle-database/#comment-276"> June 9, 2017 at 3:13 pm</a> 
              </div> 
              <p>Hi Harsha,</p> 
              <p>sub is for “subject”. Read more about that <a href="https://jwt.io/introduction/" rel="nofollow">here.</a></p> 
              <div class="reply">
               <a rel="nofollow" class="comment-reply-link" href="https://jsao.io/2015/06/authentication-with-node-js-jwts-and-oracle-database/?replytocom=276#respond" onclick="return addComment.moveForm( &quot;div-comment-276&quot;, &quot;276&quot;, &quot;respond&quot;, &quot;372&quot; )" aria-label="Reply to danmcghan">Reply</a>
              </div> 
             </div> </li>
            <!-- #comment-## --> 
           </ul>
           <!-- .children --> </li>
          <!-- #comment-## --> 
         </ul> 
         <div id="respond" class="comment-respond"> 
          <h3 id="reply-title" class="comment-reply-title">Leave a Reply <small><a rel="nofollow" id="cancel-comment-reply-link" href="/2015/06/authentication-with-node-js-jwts-and-oracle-database/#respond" style="display:none;">Cancel Reply</a></small></h3> 
          <form action="https://jsao.io/wp-comments-post.php" method="post" id="commentform" class="comment-form"> 
           <div class="row">
            <div class="col span_12">
             <textarea id="comment" name="comment" cols="45" rows="8" aria-required="true"></textarea>
            </div>
           </div>
           <div class="row"> 
            <div class="col span_4">
             <label for="author">Name <span class="required">*</span></label> 
             <input id="author" name="author" type="text" value="" size="30">
            </div> 
            <div class="col span_4">
             <label for="email">Email <span class="required">*</span></label>
             <input id="email" name="email" type="text" value="" size="30">
            </div> 
            <div class="col span_4 col_last">
             <label for="url">Website</label>
             <input id="url" name="url" type="text" value="" size="30">
            </div>
           </div> 
           <p class="form-submit"><input name="submit" type="submit" id="submit" class="submit" value="Submit Comment"> <input type="hidden" name="comment_post_ID" value="372" id="comment_post_ID"> <input type="hidden" name="comment_parent" id="comment_parent" value="0"> </p> 
          </form> 
         </div>
         <!-- #respond --> 
        </div> 
       </div> 
      </div>
      <!--/span_9--> 
      <div id="sidebar" class="col span_3 col_last"> 
       <div id="search-4" class="widget widget_search">
        <form role="search" method="get" class="search-form" action="https://jsao.io/"> 
         <label> <input type="text" class="search-field" placeholder="Search..." value="" name="s" title="Search for:"> </label> 
         <input type="submit" class="search-submit" value="Search"> 
        </form>
       </div>
       <div id="text-4" class="widget widget_text">
        <h4>@dmcghan on Twitter</h4> 
        <div class="textwidget">
         <a class="twitter-timeline" data-dnt="true" href="https://twitter.com/dmcghan" data-widget-id="573865684469465090">Tweets by @dmcghan</a> 
         <script>!function(d,s,id){var js,fjs=d.getElementsByTagName(s)[0],p=/^http:/.test(d.location)?'http':'https';if(!d.getElementById(id)){js=d.createElement(s);js.id=id;js.src=p+"://platform.twitter.com/widgets.js";fjs.parentNode.insertBefore(js,fjs);}}(document,"script","twitter-wjs");</script>
        </div> 
       </div>
       <div id="text-5" class="widget widget_text">
        <h4>Important Links</h4> 
        <div class="textwidget">
         <ul> 
          <li><a href="http://www.oracle.com/technetwork/database/database-technologies/node_js/index.html">Node.js Developer Center</a></li> 
          <li><a href="https://github.com/oracle/node-oracledb">Oracle Database driver for Node.js</a></li> 
          <li><a href="http://www.oracle.com/webfolder/technetwork/jet/index.html">Oracle JET</a></li> 
          <li><a href="https://jsao.io/feed/">JSAO RSS Feed</a></li> 
         </ul>
        </div> 
       </div>
       <div id="archives-2" class="widget widget_archive">
        <h4>Archives</h4> 
        <ul> 
         <li><a href="https://jsao.io/2017/07/">July 2017</a></li> 
         <li><a href="https://jsao.io/2017/06/">June 2017</a></li> 
         <li><a href="https://jsao.io/2017/05/">May 2017</a></li> 
         <li><a href="https://jsao.io/2017/02/">February 2017</a></li> 
         <li><a href="https://jsao.io/2017/01/">January 2017</a></li> 
         <li><a href="https://jsao.io/2016/10/">October 2016</a></li> 
         <li><a href="https://jsao.io/2016/09/">September 2016</a></li> 
         <li><a href="https://jsao.io/2016/08/">August 2016</a></li> 
         <li><a href="https://jsao.io/2016/03/">March 2016</a></li> 
         <li><a href="https://jsao.io/2016/02/">February 2016</a></li> 
         <li><a href="https://jsao.io/2015/10/">October 2015</a></li> 
         <li><a href="https://jsao.io/2015/09/">September 2015</a></li> 
         <li><a href="https://jsao.io/2015/07/">July 2015</a></li> 
         <li><a href="https://jsao.io/2015/06/">June 2015</a></li> 
         <li><a href="https://jsao.io/2015/04/">April 2015</a></li> 
         <li><a href="https://jsao.io/2015/03/">March 2015</a></li> 
         <li><a href="https://jsao.io/2015/02/">February 2015</a></li> 
         <li><a href="https://jsao.io/2015/01/">January 2015</a></li> 
        </ul> 
       </div> 
      </div>
      <!--/sidebar--> 
     </div>
     <!--/row--> 
     <!--ascend only author/comment positioning--> 
     <div class="row"> 
     </div> 
    </div>
    <!--/container--> 
   </div>
   <!--/container-wrap--> 
   <div id="footer-outer" data-midnight="light" data-using-widget-area="true"> 
    <div id="footer-widgets"> 
     <div class="container"> 
      <div class="row"> 
       <div class="col span_3"> 
        <!-- Footer widget area 1 --> 
        <div id="recent-posts-4" class="widget widget_recent_entries"> 
         <h4>FRESH FROM THE BLOG</h4> 
         <ul> 
          <li> <a href="https://jsao.io/2017/07/connecting-a-node-js-app-in-accs-to-exadata-express/">Connecting a Node.js App in ACCS to Exadata Express</a> <span class="post-date">July 25, 2017</span> </li> 
          <li> <a href="https://jsao.io/2017/07/how-to-get-use-and-close-a-db-connection-using-async-functions/">How to get, use, and close a DB connection using async functions</a> <span class="post-date">July 13, 2017</span> </li> 
          <li> <a href="https://jsao.io/2017/06/how-to-get-use-and-close-a-db-connection-using-promises/">How to get, use, and close a DB connection using promises</a> <span class="post-date">June 29, 2017</span> </li> 
          <li> <a href="https://jsao.io/2017/06/how-to-get-use-and-close-a-db-connection-using-the-async-module/">How to get, use, and close a DB connection using the Async module</a> <span class="post-date">June 15, 2017</span> </li> 
          <li> <a href="https://jsao.io/2017/06/how-to-get-use-and-close-a-db-connection-using-callbacks/">How to get, use, and close a DB connection using callbacks</a> <span class="post-date">June 12, 2017</span> </li> 
         </ul> 
        </div> 
       </div>
       <!--/span_3--> 
       <div class="col span_3"> 
        <!-- Footer widget area 2 --> 
        <div id="recent-comments-4" class="widget widget_recent_comments">
         <h4>RECENT COMMENTS</h4>
         <ul id="recentcomments">
          <li class="recentcomments"><span class="comment-author-link">danmcghan</span> on <a href="https://jsao.io/2017/06/how-to-get-use-and-close-a-db-connection-using-the-async-module/#comment-288">How to get, use, and close a DB connection using the Async module</a></li>
          <li class="recentcomments"><span class="comment-author-link"><a href="https://ruepprich.wordpress.com" rel="external nofollow" class="url">Christoph</a></span> on <a href="https://jsao.io/2017/06/how-to-get-use-and-close-a-db-connection-using-the-async-module/#comment-287">How to get, use, and close a DB connection using the Async module</a></li>
          <li class="recentcomments"><span class="comment-author-link">danmcghan</span> on <a href="https://jsao.io/2015/03/throttled-file-loading-with-node-js-oracle-database/#comment-283">Throttled File Loading with Node.js &amp; Oracle Database</a></li>
          <li class="recentcomments"><span class="comment-author-link"><a href="http://www.renatodelima.com.br" rel="external nofollow" class="url">Renato Costa</a></span> on <a href="https://jsao.io/2015/03/throttled-file-loading-with-node-js-oracle-database/#comment-282">Throttled File Loading with Node.js &amp; Oracle Database</a></li>
          <li class="recentcomments"><span class="comment-author-link">danmcghan</span> on <a href="https://jsao.io/2015/02/real-time-data-with-node-js-socket-io-and-oracle-database/#comment-278">Real-time Data with Node.js, Socket.IO, and Oracle Database</a></li>
         </ul>
        </div> 
       </div>
       <!--/span_3--> 
       <div class="col span_3"> 
        <!-- Footer widget area 3 --> 
        <div id="archives-3" class="widget widget_archive">
         <h4>ARCHIVES</h4> 
         <ul> 
          <li><a href="https://jsao.io/2017/07/">July 2017</a>&nbsp;(2)</li> 
          <li><a href="https://jsao.io/2017/06/">June 2017</a>&nbsp;(4)</li> 
          <li><a href="https://jsao.io/2017/05/">May 2017</a>&nbsp;(1)</li> 
          <li><a href="https://jsao.io/2017/02/">February 2017</a>&nbsp;(1)</li> 
          <li><a href="https://jsao.io/2017/01/">January 2017</a>&nbsp;(1)</li> 
          <li><a href="https://jsao.io/2016/10/">October 2016</a>&nbsp;(1)</li> 
          <li><a href="https://jsao.io/2016/09/">September 2016</a>&nbsp;(1)</li> 
          <li><a href="https://jsao.io/2016/08/">August 2016</a>&nbsp;(1)</li> 
          <li><a href="https://jsao.io/2016/03/">March 2016</a>&nbsp;(1)</li> 
          <li><a href="https://jsao.io/2016/02/">February 2016</a>&nbsp;(1)</li> 
          <li><a href="https://jsao.io/2015/10/">October 2015</a>&nbsp;(1)</li> 
          <li><a href="https://jsao.io/2015/09/">September 2015</a>&nbsp;(1)</li> 
          <li><a href="https://jsao.io/2015/07/">July 2015</a>&nbsp;(6)</li> 
          <li><a href="https://jsao.io/2015/06/">June 2015</a>&nbsp;(1)</li> 
          <li><a href="https://jsao.io/2015/04/">April 2015</a>&nbsp;(2)</li> 
          <li><a href="https://jsao.io/2015/03/">March 2015</a>&nbsp;(2)</li> 
          <li><a href="https://jsao.io/2015/02/">February 2015</a>&nbsp;(2)</li> 
          <li><a href="https://jsao.io/2015/01/">January 2015</a>&nbsp;(3)</li> 
         </ul> 
        </div> 
       </div>
       <!--/span_3--> 
       <div class="col span_3"> 
        <!-- Footer widget area 4 --> 
       </div>
       <!--/span_3--> 
      </div>
      <!--/row--> 
     </div>
     <!--/container--> 
    </div>
    <!--/footer-widgets--> 
    <div class="row" id="copyright"> 
     <div class="container"> 
      <div class="col span_5"> 
       <p>© 2017 JavaScript and Oracle. </p> 
      </div>
      <!--/span_5--> 
      <div class="col span_7 col_last"> 
       <ul id="social"> 
        <li><a target="_blank" href="https://twitter.com/dmcghan"><i class="icon-twitter"></i> </a></li> 
        <li><a target="_blank" href="https://www.linkedin.com/in/danmcghan/"><i class="icon-linkedin"></i> </a></li> 
        <li><a target="_blank" href="https://google.com/+DanMcGhan"><i class="icon-google-plus"></i> </a></li> 
       </ul> 
      </div>
      <!--/span_7--> 
     </div>
     <!--/container--> 
    </div>
    <!--/row--> 
   </div>
   <!--/footer-outer--> 
  </div> 
  <!--/ajax-content-wrap--> 
  <a id="to-top"><i class="icon-angle-up"></i></a> 
  <script type="text/javascript" src="https://jsao.io/wp-includes/js/jquery/ui/core.min.js?ver=1.11.4"></script> 
  <script type="text/javascript" src="https://jsao.io/wp-includes/js/jquery/ui/widget.min.js?ver=1.11.4"></script> 
  <script type="text/javascript" src="https://jsao.io/wp-includes/js/jquery/ui/position.min.js?ver=1.11.4"></script> 
  <script type="text/javascript" src="https://jsao.io/wp-includes/js/jquery/ui/menu.min.js?ver=1.11.4"></script> 
  <script type="text/javascript" src="https://jsao.io/wp-includes/js/wp-a11y.min.js?ver=4.8.2"></script> 
  <script type="text/javascript">
/* <![CDATA[ */
var uiAutocompleteL10n = {"noResults":"No results found.","oneResult":"1 result found. Use up and down arrow keys to navigate.","manyResults":"%d results found. Use up and down arrow keys to navigate.","itemSelected":"Item selected."};
/* ]]> */
</script> 
  <script type="text/javascript" src="https://jsao.io/wp-includes/js/jquery/ui/autocomplete.min.js?ver=1.11.4"></script> 
  <script type="text/javascript">
/* <![CDATA[ */
var MyAcSearch = {"url":"https:\/\/jsao.io\/wp-admin\/admin-ajax.php"};
/* ]]> */
</script> 
  <script type="text/javascript" src="https://jsao.io/wp-content/themes/salient/nectar/assets/functions/ajax-search/wpss-search-suggest.js"></script> 
  <script type="text/javascript">
/* <![CDATA[ */
var wpcf7 = {"apiSettings":{"root":"https:\/\/jsao.io\/wp-json\/contact-form-7\/v1","namespace":"contact-form-7\/v1"},"recaptcha":{"messages":{"empty":"Please verify that you are not a robot."}}};
/* ]]> */
</script> 
  <script type="text/javascript" src="https://jsao.io/wp-content/plugins/contact-form-7/includes/js/scripts.js?ver=4.9"></script> 
  <script type="text/javascript">
/* <![CDATA[ */
var zerospam = {"key":"tSxzlbrieY6fBaX*&Tqqa1CgKvvtkSF6DP!)i&BL90Tks%FZoyQy!b3bHUENg@d4"};
/* ]]> */
</script> 
  <script type="text/javascript" src="https://jsao.io/wp-content/plugins/zero-spam/js/zerospam.js?ver=3.0.6"></script> 
  <script type="text/javascript" src="https://jsao.io/wp-content/themes/salient/js/respond.js?ver=1.1"></script> 
  <script type="text/javascript" src="https://jsao.io/wp-content/themes/salient/js/sticky.js?ver=1.0"></script> 
  <script type="text/javascript" src="https://jsao.io/wp-content/themes/salient/js/prettyPhoto.js?ver=6.0.1"></script> 
  <script type="text/javascript" src="https://jsao.io/wp-content/themes/salient/js/isotope.min.js?ver=2.0"></script> 
  <script type="text/javascript" src="https://jsao.io/wp-content/themes/salient/js/superfish.js?ver=1.4.8"></script> 
  <script type="text/javascript">
/* <![CDATA[ */
var nectarLove = {"ajaxurl":"https:\/\/jsao.io\/wp-admin\/admin-ajax.php","postID":"372","rooturl":"https:\/\/jsao.io","pluginPages":[],"disqusComments":"false"};
/* ]]> */
</script> 
  <script type="text/javascript" src="https://jsao.io/wp-content/themes/salient/js/init.js?ver=6.1.72"></script> 
  <script type="text/javascript" src="https://jsao.io/wp-content/themes/salient/js/infinitescroll.js?ver=1.0"></script> 
  <script type="text/javascript">
/* <![CDATA[ */
var mejsL10n = {"language":"en-US","strings":{"Close":"Close","Fullscreen":"Fullscreen","Turn off Fullscreen":"Turn off Fullscreen","Go Fullscreen":"Go Fullscreen","Download File":"Download File","Download Video":"Download Video","Play":"Play","Pause":"Pause","Captions\/Subtitles":"Captions\/Subtitles","None":"None","Time Slider":"Time Slider","Skip back %1 seconds":"Skip back %1 seconds","Video Player":"Video Player","Audio Player":"Audio Player","Volume Slider":"Volume Slider","Mute Toggle":"Mute Toggle","Unmute":"Unmute","Mute":"Mute","Use Up\/Down Arrow keys to increase or decrease volume.":"Use Up\/Down Arrow keys to increase or decrease volume.","Use Left\/Right Arrow keys to advance one second, Up\/Down arrows to advance ten seconds.":"Use Left\/Right Arrow keys to advance one second, Up\/Down arrows to advance ten seconds."}};
var _wpmejsSettings = {"pluginPath":"\/wp-includes\/js\/mediaelement\/"};
/* ]]> */
</script> 
  <script type="text/javascript" src="https://jsao.io/wp-includes/js/mediaelement/mediaelement-and-player.min.js?ver=2.22.0"></script> 
  <script type="text/javascript" src="https://jsao.io/wp-includes/js/mediaelement/wp-mediaelement.min.js?ver=4.8.2"></script> 
  <script type="text/javascript" src="https://jsao.io/wp-includes/js/comment-reply.min.js?ver=4.8.2"></script> 
  <script type="text/javascript" src="https://jsao.io/wp-includes/js/wp-embed.min.js?ver=4.8.2"></script>  
 </body>
</html>