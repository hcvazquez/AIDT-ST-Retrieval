<!doctype html>
<html xmlns="http://www.w3.org/1999/xhtml">
 <head> 
  <title>Token Based Authentication Using ASP.Net Web API, OWIN and Identity With Entity Framework</title> 
  <meta name="Keywords" content="ASP.NET,OWIN,Token Based Authentication,Web API"> 
  <meta NAME="DESCRIPTION" CONTENT="This article explains how to use Token Based Authentication using ASP.NET Web API, OWIN and Identity with Entity Framework."> 
  <meta name="Search.TopicType" content="kbArticle"> 
  <meta name="Search.PublishDate" content="20 Jun 2015 12:00:00 GMT"> 
  <meta name="Search.RevisedDate" content="22 May 2017 12:11:30 GMT"> 
  <meta name="Search.UserRating" content="0%"> 
  <meta name="CODE_LANGUAGE" content="C#"> 
  <meta NAME="MS.LOCALE" CONTENT="en-US"> 
  <meta HTTP-EQUIV="Content-Type" CONTENT="text/html; charset=us-ascii"> 
  <meta name="Author" content="Jignesh Trivedi"> 
  <meta http-equiv="X-UA-Compatible" content="IE=edge">
  <meta name="viewport" content="width=device-width, initial-scale=1, user-scalable=no">
  <meta name="Title" content="Token Based Authentication Using ASP.Net Web API, OWIN and Identity With Entity Framework">
  <meta name="twitter:card" content="summary_large_image">
  <meta name="twitter:site" content="@CsharpCorner">
  <meta name="twitter:creator" content="@CsharpCorner">
  <meta name="twitter:title" content="Token Based Authentication Using ASP.Net Web API, OWIN and Identity With Entity Framework">
  <meta name="twitter:description" content="This article explains how to use Token Based Authentication using ASP.NET Web API, OWIN and Identity with Entity Framework.">
  <meta name="twitter:image" content="http://csharpcorner.mindcrackerinc.netdna-cdn.com/UploadFile/TwitterCard/twitter_card_logo.png">
  <meta name="og:image" content="http://www.c-sharpcorner.com/images/csharp-corner.png" property="og:image">
  <meta name="og:type" content="Articles" property="og:type">
  <meta name="og:description" content="This article explains how to use Token Based Authentication using ASP.NET Web API, OWIN and Identity with Entity Framework." property="og:description">
  <meta name="og:title" content="Token Based Authentication Using ASP.Net Web API, OWIN and Identity With Entity Framework" property="og:title">
  <meta name="og:url" content="http://www.c-sharpcorner.com/uploadfile/ff2f08/token-based-authentication-using-asp-net-web-api-owin-and-i/" property="og:url">
  <meta http-equiv="Page-Exit" content="progid:DXImageTransform.Microsoft.Fade(duration=.3)">
  <meta property="fb:app_id" content="440531902678919">
  <link rel="Shortcut Icon" href="http://csharpcorner.mindcrackerinc.netdna-cdn.com/Images/McnIcon.ico">
  <link href="http://csharpcorner.mindcrackerinc.netdna-cdn.com/css/new_article_detail?v=mX5P5H4io0tb5DoW6xDF-o48bzZCVltJ-fpdlYPYC1g1" rel="stylesheet"> 
  <script>var _gaq=_gaq||[];_gaq.push(["_setAccount","UA-535360-1"]),_gaq.push(["_trackPageview"]),function(){var e=document.createElement("script");e.type="text/javascript",e.async=!0,e.src="http://www.google-analytics.com/ga.js";var t=document.getElementsByTagName("script")[0];t.parentNode.insertBefore(e,t)}();</script>
 </head> 
 <body id="MasterBody" data-section="Articles"> 
  <div class="toasterShow">
   <span id="toasterSpanMessage"></span>
  </div> 
  <form method="post" action="/UploadFile/ff2f08/token-based-authentication-using-Asp-Net-web-api-owin-and-i/" id="aspnetForm"> 
   <div class="aspNetHidden"> 
    <input type="hidden" name="__VIEWSTATE" id="__VIEWSTATE" value="/wEPDwUKMTY1NDU2MTA1Mg8WAh4TVmFsaWRhdGVSZXF1ZXN0TW9kZQIBZBgBBR5fX0NvbnRyb2xzUmVxdWlyZVBvc3RCYWNrS2V5X18WAQUtY3RsMDAkSGVhZGVySG9tZU5ld0Rlc2lnbiRMb2dpbjEkY2hrUmVtZWJlck1llnPkQ5YkpoRcFeQvqCYla4ZIx0c="> 
   </div> 
   <div id="OldHeader"> 
    <div class="responsiveHeader"> 
     <meta name="google-signin-scope" content="https://www.googleapis.com/auth/plus.login https://www.googleapis.com/auth/plus.profile.emails.read profile"> 
     <meta name="google-signin-requestvisibleactions" content="http://schemas.google.com/AddActivity"> 
     <meta name="google-signin-cookiepolicy" content="single_host_origin"> 
     <input id="FBAppId" type="hidden" value="440531902678919" clientidmode="Static"> 
     <meta name="google-signin-clientid" content="1008907732563-jaf78g0pj7k52q8efh0r22c58iol91cg.apps.googleusercontent.com"> 
     <div id="geoLocationPopup" style="display:none;"></div> 
     <div class="page" style="position: relative; z-index: 999;"> 
      <div class="loginControl"> 
       <a href="javascript:void(0);" id="loginBtn" class="icons login" onclick="return false;" title="Login">&nbsp;</a> 
       <a href="http://www.c-sharpcorner.com/register" id="ctl00_HeaderHomeNewDesign_Login1_HyperLinkRegister" title="New User Register Here" class="icons signUp"></a> 
       <div id="askQuestion" class="notificationMessageCntr display_none_mobile"> 
        <a id="PostForum" class="icons askaquestion" title="Ask A Question" href="http://www.c-sharpcorner.com/forums/AddPost.aspx?TSource=AddPost"></a> 
       </div> 
       <div id="commentNotification" class="notificationMessageCntr"> 
        <span id="spanCommentsNotifications" style="display:none;" class="messageCount"></span> 
        <span class="arrow">&nbsp;</span> 
       </div> 
       <div id="userCommentBox" class="msg_container" style="display: none;"> 
        <div class="NoticationLoading"> 
         <label id="LabelNoComments" style="display: none; text-align: center; color: red;"> No unread comment.</label> 
         <a id="imgComments" href="javascript:void(0)" class="loadmore" style="display: none; text-align: center"> <img src="http://csharpcorner.mindcrackerinc.netdna-cdn.com/Images/csharp/ajax-loader-small.gif" alt="loading..." width="12" height="9"></a> 
        </div> 
        <ul id="dvComments"> 
        </ul> 
        <a class="gotoAllView" href="/notification/">View All Comments</a> 
       </div> 
       <div id="messageNotification" class="notificationMessageCntr"> 
        <span id="spanMessages" style="display:none;" class="messageCount"></span> 
        <span class="arrow">&nbsp;</span> 
       </div> 
       <div id="userMsgBox" class="msg_container" style="display: none;"> 
        <div class="NoticationLoading"> 
         <label id="LabelNoData" style="display: none; text-align: center; color: red;"> No unread message.</label> 
         <a id="imgMessages" href="javascript:void(0)" class="loadmore" style="display: none; text-align: center"> <img src="http://csharpcorner.mindcrackerinc.netdna-cdn.com/Images/csharp/ajax-loader-small.gif" width="12" height="9"></a> 
        </div> 
        <ul id="dvMessages"> 
        </ul> 
        <a href="/notification/notification.aspx" id="ctl00_HeaderHomeNewDesign_Login1_LinkButtonAllMessages" class="gotoAllView">View All Messages</a> 
       </div> 
       <div id="generalNotifications" class="notificationMessageCntr"> 
        <span id="spanGeneralNotifications" style="display:none;" class="messageCount"></span>
        <span class="arrow">&nbsp;</span> 
       </div> 
       <div id="generalNotificationContainer" class="msg_container general_notifications" style="display: none;"> 
        <div class="NoticationLoading"> 
         <a id="LabelNoDataNotifications" style="display: none; text-align: center; color: red;">No unread notification.</a> 
         <a id="imgGeneralNotifications" href="javascript:void(0)" class="loadmore" style="display: none; text-align: center"> <img src="http://csharpcorner.mindcrackerinc.netdna-cdn.com/Images/csharp/ajax-loader-small.gif" alt="loading..." width="12" height="9"></a> 
        </div> 
        <ul> 
         <div id="dvGeneralNotifications"> 
         </div> 
        </ul> 
        <a class="gotoAllView" href="/notification/GeneralNotification.aspx">View All Notifications</a> 
       </div> 
       <div class="notificationMessageCntr display_none_mobile"> 
        <span class="arrow">&nbsp;</span> 
       </div> 
       <div class="msg_container admin_msg_container" style="display: none;"> 
        <ul id="ctl00_HeaderHomeNewDesign_Login1_UnapprovedContentStats" class="unapproved_stats"> 
        </ul> 
       </div> 
      </div> 
      <div id="LoginSpan" defaultbutton="ImageButtonLogin" class="loginPopup" style="display: none;"> 
       <div style="text-align: center;"> 
        <label id="LabelErrorMessage" style="padding-bottom: 5px; color: red; margin-left: 45px; display: none"> </label> 
       </div> 
       <span class="arrow">&nbsp;</span> 
       <div class="row"> 
        <label class="lableText"> Email :</label> 
        <input name="ctl00$HeaderHomeNewDesign$Login1$TextBoxUserId" type="text" id="TextBoxUserId" placeholder="Enter UserID or Email" title="Use your UserId or Email to login" onchange="RemoveValidationMessage();" class="inputBox" style="width: 150px;"> 
        <span id="spanRequiredId" style="display: none; color: #f00;">*</span> 
       </div> 
       <div class="row"> 
        <label class="lableText"> Password : </label> 
        <input name="ctl00$HeaderHomeNewDesign$Login1$TextBoxPassword" type="password" id="TextBoxPassword" title="enter your password" placeholder="Enter Password" onchange="RemoveValidationMessage();" maxlength="40" class="inputBox" style="width: 150px;" autocomplete="off"> 
        <span id="spanRequiredPassword" style="display: none; color: #f00;">*</span> 
       </div> 
       <div class="row"> 
        <label class="lableText"> &nbsp;</label> 
        <label class="lableText" style="width: auto"> <input name="ctl00$HeaderHomeNewDesign$Login1$chkRemeberMe" type="checkbox" id="chkRemeberMe" checked>Remember me</label> 
       </div> 
       <div class="row"> 
        <img class="login loader" src="http://csharpcorner.mindcrackerinc.netdna-cdn.com/Images/csharp/ajax-loader-small.gif" alt="please wait..." width="12" height="9"> 
        <label class="lableText"> &nbsp;</label> 
        <input type="submit" name="ctl00$HeaderHomeNewDesign$Login1$ImageButtonLogin" value="Login" onclick="return validateRequiredFields();" id="ctl00_HeaderHomeNewDesign_Login1_ImageButtonLogin" title="Login"> 
        <a href="http://www.c-sharpcorner.com/register?check=f" class="LinkRed">Forgot password?</a> 
       </div> 
       <div class="row2"> 
        <label class="lableText2"> Login using </label> 
        <a class="facebook" onclick="FacebookLogin(); return false;" title="Facebook"></a> &nbsp;
        <a id="googleLoginHeader" class="google" title="Google"></a> &nbsp;
        <a id="linkedInLoginHeader" onclick="LinkedInLogin();" class="linkedIn" title="LinkedIn"></a> &nbsp;
        <a id="twitterLoginHeader" class="twitter" title="Twitter"></a> 
       </div> 
      </div> 
      <a class="menuButton"></a> 
      <a href="http://www.c-sharpcorner.com" id="ctl00_HeaderHomeNewDesign_Login1_AnchorResponsiveLogo" class="logo_responsive">C# Corner</a> 
     </div> 
     <input type="hidden" id="HiddenErrorMessage" value="Unable to fetch your account data!"> 
     <input type="hidden" name="ctl00$HeaderHomeNewDesign$Login1$hdnSocialLoginType" id="hdnSocialLoginType"> 
     <input type="hidden" name="ctl00$HeaderHomeNewDesign$Login1$hdnAccessToken" id="hdnAccessToken"> 
     <input type="hidden" name="ctl00$HeaderHomeNewDesign$Login1$HiddenFieldUserId" id="HiddenFieldUserId"> 
     <input type="hidden" name="ctl00$HeaderHomeNewDesign$Login1$HiddenFieldEmail" id="HiddenFieldEmail"> 
     <input type="hidden" name="ctl00$HeaderHomeNewDesign$Login1$HiddenFieldFirstName" id="HiddenFieldFirstName"> 
     <input type="hidden" name="ctl00$HeaderHomeNewDesign$Login1$HiddenFieldLastName" id="HiddenFieldLastName"> 
     <input type="hidden" name="ctl00$HeaderHomeNewDesign$Login1$HiddenFieldType" id="HiddenFieldType"> 
     <input type="hidden" name="ctl00$HeaderHomeNewDesign$Login1$HiddenShowLogin" id="HiddenShowLogin"> 
     <input type="hidden" name="ctl00$HeaderHomeNewDesign$Login1$HiddenShowAnnouncement" id="HiddenShowAnnouncement"> 
     <input name="ctl00$HeaderHomeNewDesign$Login1$HiddenLinkedInApiKey" type="hidden" id="HiddenLinkedInApiKey" value="78fng0cgbs540z"> 
     <input type="submit" name="ctl00$HeaderHomeNewDesign$Login1$BtnLoginSocial" value="" id="BtnLoginSocial" style="display: none;"> 
     <input type="submit" name="ctl00$HeaderHomeNewDesign$Login1$btnLoginWithTwitter" value="" id="btnLoginWithTwitter" style="display: none;"> 
     <div class="header"> 
      <div class="topHeaderConainer" style="width: 100%; float: left;"> 
       <div class="InFocusNews display_none"> 
        <div class="page" style="position: relative;"> 
         <span class="title"> In Focus</span> 
         <div class="rightNew" style="display: inline;"> 
          <div class="ticker"> 
           <a href="http://www.c-sharpcorner.com/jobs/recent-jobs" id="InFocus">Check out available jobs on C# Corner</a> 
          </div> 
         </div> 
        </div> 
       </div> 
       <div class="display_none"> 
        <div class="page"> 
         <h1 style="position:fixed; left:-99999px; top:-99999px; opacity:0;">C# Corner</h1> 
         <a href="http://www.c-sharpcorner.com" id="ctl00_HeaderHomeNewDesign_Contribution1_LogoLink" class="logo" title="C# Corner"> <img src="http://csharpcorner.mindcrackerinc.netdna-cdn.com/App_Themes/CSharp/Images/SiteLogo.png" id="ctl00_HeaderHomeNewDesign_Contribution1_imageLogo" class="display_none" alt="C# Corner"> </a> 
         <div id="ctl00_HeaderHomeNewDesign_Contribution1_ContributionLinks"> 
          <div class="contributeList"> 
           <a href="javascript:void(0);" class="contributeOnHeader">Contribute</a> 
           <ul> 
            <li> <a href="/publish">An Article</a> </li> 
            <li> <a href="/blogs/createblog.aspx">A Blog</a> </li> 
            <li> <a href="/news/createnews.aspx">A News</a> </li> 
            <li> <a href="/publish/createarticle.aspx?type=videos">A Video</a> </li> 
            <li> <a href="/resources/createresource.aspx">A Link</a> </li> 
            <li> <a href="/interviews/question/postquestion.aspx">An Interview Question</a> </li> 
           </ul> 
          </div> 
          <a id="ctl00_HeaderHomeNewDesign_Contribution1_PostForum" class="askQuestionOnHeader" href="/forums/AddPost.aspx?TSource=AddPost">Ask a Question</a> 
         </div> 
        </div> 
       </div> 
       <div id="ctl00_HeaderHomeNewDesign_HeaderMenu" class="HeadermenuStripBlue"> 
        <div class="page"> 
         <div class="responsiveMenu"> 
          <div class="SearchBox"> 
           <div id="ctl00_HeaderHomeNewDesign_Panal1"> 
            <input name="ctl00$HeaderHomeNewDesign$searchTextBox" type="text" id="ctl00_HeaderHomeNewDesign_searchTextBox" class="searchTextBox" placeholder="C# Corner Search" onkeypress="SearchClick(event)"> 
            <input type="submit" name="ctl00$HeaderHomeNewDesign$searchImageButton" value="" onclick="SearchContent(event);" id="searchImageButton" class="button"> 
           </div> 
          </div> 
          <ul id="MenuControl1" class="headerMenu"> 
           <li class="display_none first"><a href="http://www.c-sharpcorner.com" class="csharpHome" title="C# Corner Home">&nbsp;</a></li> 
           <li><a href="http://www.c-sharpcorner.com/technologies" class="show-dropdown menuLinkBlue" title="Technologies"> TECHNOLOGIES </a> 
            <div class="dropDownMenu" id="dropDown"> 
             <div id="ctl00_HeaderHomeNewDesign_divTechnology" style="overflow: hidden; margin-bottom: 10px;"> 
              <span id="ctl00_HeaderHomeNewDesign_RepeaterTechnologyTop"><span> <a href="http://www.c-sharpcorner.com/technologies/dot_net_2015"> .NET </a> </span><span> <a href="http://www.c-sharpcorner.com/technologies/botframework"> Bot Framework </a> </span><span> <a href="http://www.c-sharpcorner.com/technologies/graphics-design"> Graphics Design </a> </span><span> <a href="http://www.c-sharpcorner.com/technologies/nodejs"> Node.js </a> </span><span> <a href="http://www.c-sharpcorner.com/technologies/signalr"> SignalR </a> </span><br><span> <a href="http://www.c-sharpcorner.com/technologies/dotnetcore"> .NET Core </a> </span><span> <a href="http://www.c-sharpcorner.com/technologies/business"> Business </a> </span><span> <a href="http://www.c-sharpcorner.com/technologies/how-do-i"> How do I </a> </span><span> <a href="http://www.c-sharpcorner.com/technologies/office-development"> Office Development </a> </span><span> <a href="http://www.c-sharpcorner.com/technologies/silverlight"> Silverlight </a> </span><br><span> <a href="http://www.c-sharpcorner.com/technologies/active-directory"> Active Directory </a> </span><span> <a href="http://www.c-sharpcorner.com/technologies/csharp-programming"> C# </a> </span><span> <a href="http://www.c-sharpcorner.com/technologies/html5"> HTML 5 </a> </span><span> <a href="http://www.c-sharpcorner.com/technologies/oop-ood"> OOP/OOD </a> </span><span> <a href="http://www.c-sharpcorner.com/technologies/testing"> Software Testing </a> </span><br><span> <a href="http://www.c-sharpcorner.com/technologies/ado-dot-net"> ADO.NET </a> </span><span> <a href="http://www.c-sharpcorner.com/technologies/learn-csharp-corner"> C# Corner </a> </span><span> <a href="http://www.c-sharpcorner.com/technologies/internet-and-web"> Internet &amp; Web </a> </span><span> <a href="http://www.c-sharpcorner.com/technologies/open-source"> Open Source </a> </span><span> <a href="http://www.c-sharpcorner.com/technologies/sql-language"> SQL Language </a> </span><br><span> <a href="http://www.c-sharpcorner.com/technologies/agile-development"> Agile Development </a> </span><span> <a href="http://www.c-sharpcorner.com/technologies/career-advice"> Career Advice </a> </span><span> <a href="http://www.c-sharpcorner.com/technologies/internet-of-things"> Internet of Things </a> </span><span> <a href="http://www.c-sharpcorner.com/technologies/philosophy"> Philosophy </a> </span><span> <a href="http://www.c-sharpcorner.com/technologies/sql-server"> SQL Server </a> </span><br><span> <a href="http://www.c-sharpcorner.com/technologies/ajax"> AJAX </a> </span><span> <a href="http://www.c-sharpcorner.com/technologies/cloud"> Cloud </a> </span><span> <a href="http://www.c-sharpcorner.com/technologies/ios"> iOS </a> </span><span> <a href="http://www.c-sharpcorner.com/technologies/php"> PHP </a> </span><span> <a href="http://www.c-sharpcorner.com/technologies/swift-programming"> Swift </a> </span><br><span> <a href="http://www.c-sharpcorner.com/technologies/algorithms-in-csharp"> Algorithms in C# </a> </span><span> <a href="http://www.c-sharpcorner.com/technologies/coding-best-practices"> Coding Best Practices </a> </span><span> <a href="http://www.c-sharpcorner.com/technologies/java"> Java </a> </span><span> <a href="http://www.c-sharpcorner.com/technologies/power-bi"> Power BI </a> </span><span> <a href="http://www.c-sharpcorner.com/technologies/typescript"> TypeScript </a> </span><br><span> <a href="http://www.c-sharpcorner.com/technologies/android-programming"> Android </a> </span><span> <a href="http://www.c-sharpcorner.com/technologies/cognitive-services"> Cognitive Services </a> </span><span> <a href="http://www.c-sharpcorner.com/technologies/javascript"> JavaScript </a> </span><span> <a href="http://www.c-sharpcorner.com/technologies/products"> Products </a> </span><span> <a href="http://www.c-sharpcorner.com/technologies/universal-windows-apps"> UWP </a> </span><br><span> <a href="http://www.c-sharpcorner.com/technologies/angularjs"> Angular </a> </span><span> <a href="http://www.c-sharpcorner.com/technologies/cybersecurity"> Cyber Security </a> </span><span> <a href="http://www.c-sharpcorner.com/technologies/jquery"> JQuery </a> </span><span> <a href="http://www.c-sharpcorner.com/technologies/progressivewebapps"> Progressive Web Apps </a> </span><span> <a href="http://www.c-sharpcorner.com/technologies/visual-studio"> Visual Studio </a> </span><br><span> <a href="http://www.c-sharpcorner.com/technologies/architecture"> Architecture </a> </span><span> <a href="http://www.c-sharpcorner.com/technologies/databases-and-dba"> Databases &amp; DBA </a> </span><span> <a href="http://www.c-sharpcorner.com/technologies/json"> JSON </a> </span><span> <a href="http://www.c-sharpcorner.com/technologies/project-management"> Project Management </a> </span><span> <a href="http://www.c-sharpcorner.com/technologies/virtual-and-augmented-reality"> VR and AR </a> </span><br><span> <a href="http://www.c-sharpcorner.com/technologies/asp-dot-net-programming"> ASP.NET </a> </span><span> <a href="http://www.c-sharpcorner.com/technologies/design-patterns-and-practices"> Design Patterns &amp; Practices </a> </span><span> <a href="http://www.c-sharpcorner.com/technologies/knockout"> Knockout </a> </span><span> <a href="http://www.c-sharpcorner.com/technologies/python"> Python </a> </span><span> <a href="http://www.c-sharpcorner.com/technologies/web-development"> Web Development </a> </span><br><span> <a href="http://www.c-sharpcorner.com/technologies/Asp-Net-core"> ASP.NET Core </a> </span><span> <a href="http://www.c-sharpcorner.com/technologies/deployment"> DevOps </a> </span><span> <a href="http://www.c-sharpcorner.com/technologies/leadership"> Leadership </a> </span><span> <a href="http://www.c-sharpcorner.com/technologies/r"> R </a> </span><span> <a href="http://www.c-sharpcorner.com/technologies/web-services"> Web Services </a> </span><br><span> <a href="http://www.c-sharpcorner.com/technologies/aurelia"> Aurelia </a> </span><span> <a href="http://www.c-sharpcorner.com/technologies/dynamics-crm"> Dynamics CRM </a> </span><span> <a href="http://www.c-sharpcorner.com/technologies/linq"> LINQ </a> </span><span> <a href="http://www.c-sharpcorner.com/technologies/react"> React </a> </span><span> <a href="http://www.c-sharpcorner.com/technologies/windows-forms"> Windows Forms </a> </span><br><span> <a href="http://www.c-sharpcorner.com/technologies/aws"> AWS </a> </span><span> <a href="http://www.c-sharpcorner.com/technologies/enterprise-development"> Enterprise Development </a> </span><span> <a href="http://www.c-sharpcorner.com/technologies/machine-learning"> Machine Learning </a> </span><span> <a href="http://www.c-sharpcorner.com/technologies/robotics-and-hardware"> Robotics &amp; Hardware </a> </span><span> <a href="http://www.c-sharpcorner.com/technologies/windows-powershell"> Windows PowerShell </a> </span><br><span> <a href="http://www.c-sharpcorner.com/technologies/azure"> Azure </a> </span><span> <a href="http://www.c-sharpcorner.com/technologies/entityframework"> Entity Framework </a> </span><span> <a href="http://www.c-sharpcorner.com/technologies/microsoft365"> Microsoft 365 </a> </span><span> <a href="http://www.c-sharpcorner.com/technologies/rubyonrails"> Ruby on Rails </a> </span><span> <a href="http://www.c-sharpcorner.com/technologies/wpf"> WPF </a> </span><br><span> <a href="http://www.c-sharpcorner.com/technologies/big-data"> Big Data </a> </span><span> <a href="http://www.c-sharpcorner.com/technologies/error-zone"> Error Zone </a> </span><span> <a href="http://www.c-sharpcorner.com/technologies/microsoft-office"> Microsoft Office </a> </span><span> <a href="http://www.c-sharpcorner.com/technologies/security-in-dot-net"> Security </a> </span><span> <a href="http://www.c-sharpcorner.com/technologies/xamarin"> Xamarin </a> </span><br><span> <a href="http://www.c-sharpcorner.com/technologies/blockchain"> Blockchain </a> </span><span> <a href="http://www.c-sharpcorner.com/technologies/games-programming-csharp"> Games Programming </a> </span><span> <a href="http://www.c-sharpcorner.com/technologies/mobile"> Mobile Development </a> </span><span> <a href="http://www.c-sharpcorner.com/technologies/windows-server_2012"> Servers </a> </span><span> <a href="http://www.c-sharpcorner.com/technologies/xaml"> XAML </a> </span><br><span> <a href="http://www.c-sharpcorner.com/technologies/bootstrap"> Bootstrap </a> </span><span> <a href="http://www.c-sharpcorner.com/technologies/googlecloud"> Google Cloud </a> </span><span> <a href="http://www.c-sharpcorner.com/technologies/networking"> Networking </a> </span><span> <a href="http://www.c-sharpcorner.com/technologies/sharepoint"> SharePoint </a> </span><span> <a href="http://www.c-sharpcorner.com/technologies/xml"> XML </a> </span></span> 
             </div> 
             <div style="position: absolute; bottom: 5px; left: 10px;"> 
              <a href="http://www.c-sharpcorner.com/ContactUs.aspx?type=7" class="LinkNormalBlue" style="color: #ff6600; background: none; text-transform: none; float: left;">Request a new Category</a>
              <span style="float: left; color: #a4a4a4; margin-top: 0px; font-size:17px;">|</span>
              <a href="http://www.c-sharpcorner.com/technologies" class="LinkNormalBlue viewAll" style="color: #36c; background: none; text-transform: none; float: left;">View All</a> 
             </div> 
            </div> </li> 
           <li><a class="menu-color-default" href="http://www.c-sharpcorner.com/forums" title="Ask a Question" target="">ANSWERS</a></li>
           <li><a class="menu-color-default" href="http://www.c-sharpcorner.com/blogs" title="Share a Blog" target="">BLOGS</a></li>
           <li><a class="menu-color-default" href="http://www.c-sharpcorner.com/videos" title="Share a Video" target="">VIDEOS</a></li>
           <li><a class="menu-color-default" href="http://www.c-sharpcorner.com/interviews" title="Ask an Interview Question" target="">INTERVIEWS</a></li>
           <li><a class="menu-color-default" href="http://www.c-sharpcorner.com/ebooks" title="Share a Book" target="">BOOKS</a></li>
           <li><a class="menu-color-default" href="http://www.c-sharpcorner.com/news" title="Submit a News" target="">NEWS</a></li>
           <li class="more-btn"><a class="menu-color-default" href="http://www.c-sharpcorner.com/events" title="Attend an Event" target="">EVENTS</a>
            <ul class="dropdown-content">
             <li><a class="menu-color-default" href="http://www.c-sharpcorner.com/chapters" title="Join a Chapter" target="">CHAPTERS</a></li>
             <li><a class="menu-color-default" href="http://conference.c-sharpcorner.com" title="C# Corner Annual Conference 2017" target="_blank">ANNUAL CONFERENCE</a></li>
             <li><a class="menu-color-default" href="http://mathura.c-sharpcorner.com/" title="C# Corner Mathura Developer Conference 2017" target="_blank">Mathura Conference</a></li>
             <li><a class="menu-color-default" href="http://xamarin.c-sharpcorner.com/" title="C# Corner Xamarin DevCon17" target="_blank">Xamarin DevCon</a></li>
             <li><a class="menu-color-default" href="http://delhi.c-sharpcorner.com/" title="C# Corner Delhi Developer Conference 2016" target="_blank">Delhi Conference</a></li>
             <li><a class="menu-color-default" href="http://startup.c-sharpcorner.com/" title="C# Corner Startup Conference 2016" target="_blank">Startup Conference</a></li>
             <li><a class="menu-color-default" href="http://hyderabad.c-sharpcorner.com/" title="C# Corner Hyderabad Developer Conference 2016" target="_blank">Hyderabad Conference</a></li>
             <li><a class="menu-color-default" href="http://chandigarh.c-sharpcorner.com/" title="C# Corner Chandigarh Developer Conference 2016" target="_blank">Chandigarh Conference</a></li>
            </ul></li>
           <li><a class="menu-color-default" href="http://www.c-sharpcorner.com/careeradvice" title="Get Career Advice" target="">CAREER</a></li>
           <li><a class="menu-color-default" href="http://www.c-sharpcorner.com/jobs" title="Get Jobs" target="">JOBS</a></li>
           <li><a class="menu-color-dark-blue" href="http://noltran.com/" title="" target="_blank">TRAINING</a></li>
           <li class="more-btn"><a href="javascript:void(0);">MORE</a>
            <ul class="dropdown-content">
             <li><a class="menu-color-default" href="http://consultants.c-sharpcorner.com/" title="C# Corner Consultants" target="_blank">Consultants</a></li>
             <li><a class="menu-color-default" href="http://www.c-sharpcorner.com/ideas" title="Share an Idea" target="">IDEAS</a></li>
             <li><a class="menu-color-default" href="http://www.c-sharpcorner.com/resources" title="Resources" target="">LINKS</a></li>
             <li><a class="menu-color-default" href="http://www.c-sharpcorner.com/beginners/" title="Students" target="">STUDENTS</a></li>
             <li><a class="menu-color-default" href="http://www.c-sharpcorner.com/members/" title="C# Corner Members" target="">MEMBERS</a></li>
             <li><a class="menu-color-default" href="http://www.c-sharpcorner.com/stories" title="Share your story" target="">STORIES</a></li>
             <li><a class="menu-color-default" href="http://www.c-sharpcorner.com/certification" title="Get certified and accelerate your skill" target="">Certifications</a></li>
            </ul></li> 
          </ul> 
         </div> 
        </div> 
       </div> 
       <div id="HeaderAdvertise" style="position: relative;top: initial;float: left;width: 100%;text-align: center;color: #fff;"> 
       </div> 
      </div> 
     </div> 
    </div> 
   </div> 
   <div class="b-container page-body"> 
    <div class="b-row"> 
     <div class="content"> 
      <div id="div1" class="content-header"> 
       <div class="media"> 
        <div class="media-left media-top hidden-xs"> 
         <a href="http://www.c-sharpcorner.com/technologies/asp-dot-net-programming" id="CategoryLink"> <img src="http://csharpcorner.mindcrackerinc.netdna-cdn.com/UploadFile/MinorCatImages/014724AM.png.ashx?width=64&amp;height=64" id="ImgCategory" class="category-image-64" width="64" height="64" title="ASP.NET" alt="ASP.NET" data-category="224"> </a> 
        </div> 
        <div class="media-body"> 
         <h1 id="ContentTitle" class="content-heading">Token Based Authentication Using ASP.Net Web API, OWIN and Identity With Entity Framework</h1> 
        </div> 
       </div> 
       <div class="publish-info"> 
        <ul class="list-inline"> 
         <li><a href="http://www.c-sharpcorner.com/members/jignesh-trivedi" id="AuthorProfileLinkOnPhoto"> <img src="http://csharpcorner.mindcrackerinc.netdna-cdn.com/UploadFile/AuthorImage/ff2f0820160726064055.png.ashx?width=100&amp;height=100" id="ImgAuthor" class="user-image-36" alt="Jignesh Trivedi" title="Jignesh Trivedi"> </a> </li> 
         <li class="author-name"><a href="http://www.c-sharpcorner.com/members/jignesh-trivedi" id="AuthorProfileLinkForName">Jignesh Trivedi</a></li> 
         <li class="publish-time"><i class="d-icon icon-clock"></i><span id="PublishDate">Jun 20<span class="year"> 2015</span></span></li> 
         <li class="content-type"><i class="d-icon icon-content-type"></i><a id="ContentType" href="/articles">Article</a></li> 
        </ul> 
       </div> 
       <div class="content-actions"> 
        <ul id="TopStatsContainer" class="user-action-list list-inline"> 
         <li id="FeaturedSpan" class="featured" title="Featured" style="display:none;"> <a href="/featured-articles"><i class="d-icon icon-star"></i></a> </li> 
         <li> <a href="javascript:void(0);" id="btnLikeAnchor" class="d-icon icon-28 icon-like like-button"></a> <a href="javascript:void(0);" id="AnchorEmotionPopup" onclick="getContentReactions('6964d5de-97e1-4210-ac2e-b1e89ad499e7','article');"> <span id="LabelLikeCount" class="user-action-count">14</span> </a> 
          <ul id="emotionsContainer" class="emotions-wrapper list-inline"> 
           <li class="relative"><a href="javascript:void(0);" onclick="reactByEmotion(1,&quot;icon-e-like&quot;);" class="d-icon icon-e-like" data-toggle="tooltip" data-title="Like"></a><span></span></li>
           <li class="relative"><a href="javascript:void(0);" onclick="reactByEmotion(2,&quot;icon-e-love&quot;);" class="d-icon icon-e-love" data-toggle="tooltip" data-title="Love It"></a><span></span></li>
           <li class="relative"><a href="javascript:void(0);" onclick="reactByEmotion(4,&quot;icon-e-awesome&quot;);" class="d-icon icon-e-awesome" data-toggle="tooltip" data-title="Awesome"></a><span></span></li>
           <li class="relative"><a href="javascript:void(0);" onclick="reactByEmotion(5,&quot;icon-e-interesting&quot;);" class="d-icon icon-e-interesting" data-toggle="tooltip" data-title="Interesting"></a><span></span></li>
           <li class="relative"><a href="javascript:void(0);" onclick="reactByEmotion(7,&quot;icon-e-okay&quot;);" class="d-icon icon-e-okay" data-toggle="tooltip" data-title="It's Okay"></a><span></span></li>
           <li class="relative"><a href="javascript:void(0);" onclick="reactByEmotion(8,&quot;icon-e-poor&quot;);" class="d-icon icon-e-poor" data-toggle="tooltip" data-title="Thumbs Down"></a><span></span></li>
          </ul> </li> 
         <li class="relative" title="Comments"> <a href="javascript:void(0);" id="CommentIcon"> <i class="d-icon icon-comment2"></i> <span id="spanComments" class="user-action-count">0</span> </a> </li> 
         <li class="relative" title="Views"><i class="d-icon icon-view"></i> <span id="ViewCounts" class="user-action-count">535.8k</span></li> 
         <li class="reader-level"><i id="ReaderLevel" class="d-icon icon-28 icon-level-intermediate" title="Intermediate"></i></li> 
        </ul> 
       </div> 
      </div> 
      <div class="cotent-share-icon clearfix"> 
       <ul data-content-type="Article"> 
        <li> <a class="d-icon icon-facebook-2" title="Share on Facebook" href="https://www.facebook.com/sharer.php?u=http://www.c-sharpcorner.com/UploadFile/ff2f08/token-based-authentication-using-Asp-Net-web-api-owin" onclick="popupwindowAtCenter(this.href,'Share on Facebook',600,600);return false;" target="_blank" data-track>facebook</a></li> 
        <li><a class="d-icon icon-twitter-2" title="Share on Twitter" href="https://twitter.com/intent/tweet?&amp;via=CsharpCorner&amp;related=CsharpCorner&amp;text=Token+Based+Authentication+Using+ASP.Net+Web+API%2c+OWIN+and+Identity+With+Entity+Framework http://www.c-sharpcorner.com/UploadFile/ff2f08/token-based-authentication-using-Asp-Net-web-api-owin" target="_blank" data-track>twitter</a></li> 
        <li><a class="d-icon icon-linkedIn-2" title="Share on Linkedin" href="https://www.linkedin.com/shareArticle?mini=true&amp;url=http://www.c-sharpcorner.com/UploadFile/ff2f08/token-based-authentication-using-Asp-Net-web-api-owin" onclick="popupwindowAtCenter(this.href,'Share on LinkedIn',600,600);return false;" target="_blank" data-track>linkedIn</a></li> 
        <li><a class="d-icon icon-googlePlus-2" title="Share on Google+" href="https://plus.google.com/share?url=http://www.c-sharpcorner.com/UploadFile/ff2f08/token-based-authentication-using-Asp-Net-web-api-owin" onclick="popupwindowAtCenter(this.href,'Share on Google+',600,600);return false;" target="_blank" data-track>google Plus</a></li> 
        <li><a class="d-icon icon-reddit" title="Share on Reddit" href="//www.reddit.com/submit?url=http%3a%2f%2fwww.c-sharpcorner.com%2fUploadFile%2fff2f08%2ftoken-based-authentication-using-Asp-Net-web-api-owin-and-i%2fdefault.aspx" onclick="popupwindowAtCenter(this.href,'Share on Reddit',600,600);return false;" target="_blank" data-track>Reddit</a></li> 
        <li class="hidden-md-up"><a class="d-icon icon-whatsapp" title="Share on Whatsapp" href="whatsapp://send?text=Token Based Authentication Using ASP.Net Web API, OWIN and Identity With Entity Framework%0A%0Ahttp%3a%2f%2fwww.c-sharpcorner.com%2fUploadFile%2fff2f08%2ftoken-based-authentication-using-Asp-Net-web-api-owin-and-i%2f" data-action="share/whatsapp/share" target="_blank">WhatsApp</a></li> 
        <li id="InnerIconContainer" class="inner-icon-container"> 
         <ul id="ActionsIconsContainer"> 
          <li><a href="http://www.c-sharpcorner.com/userregistration/logincheck.aspx?returnurl=http://www.c-sharpcorner.com/articles/emailtofriend.aspx?articleid=6964d5de-97e1-4210-ac2e-b1e89ad499e7" id="ctl00_ImageButtonEmail" cliendidmode="static" class="d-icon icon-email" title="Email this article to friend">Email</a></li> 
          <li><a href="javascript:void(0);" id="ImageButtonAddToMyBookmarks" title="Bookmark this article" onclick="return AddToArticleBookmark(this);" class="d-icon icon-32 icon-bookmark-add text-hide">Bookmark</a></li> 
          <li id="ListPrintContent" class="hidden-tablet"><a href="javascript:void(GetPrintVersion('Article'))" id="AnchorPrintArticle" title="Print" class="d-icon icon-print">Print</a></li> 
          <li><a href="http://www.c-sharpcorner.com/members/jignesh-trivedi/articles" id="AuthorsOtherArticles" class="d-icon icon-other-article" title="Author's other article">Other Artcile</a></li> 
         </ul> </li> 
        <li id="btnIconExpander" class="hidden-sm-down"><a href="javascript:void(0);" class="d-icon icon-expand" title="Expand">Expand</a></li> 
       </ul> 
      </div> 
      <div class="user-content"> 
       <div class="b-row" style="padding: 0 15px;"> 
        <div class="content-head-link clearfix"> 
         <div id="ctl00_lstDownloadFiles" class="download-items" style="position:relative">
          <div class="icon-box">
           <i class="d-icon icon-28 icon-download-content" title="Download Files"></i>
          </div>
          <div class="file-box">
           <a class="text-blue-600  bold" data-download-type="Article" href="javascript:void(0);" onclick="return downloadFile(11598,this)" title="OwinAuthentication.zip">OwinAuthentication.zip</a>
           <span style="margin: 0 3px;">|</span>
           <a class="text-blue-600  bold" data-download-type="Article" href="javascript:void(0);" onclick="return downloadFile(12630,this)" title="OwinAuthentication.zip">OwinAuthentication.zip</a>
           <span style="margin: 0 3px;">|</span>
           <a class="text-blue-600  bold" data-download-type="Article" href="javascript:void(0);" onclick="return downloadFile(13662,this)" title="OwinAuthentication.zip">OwinAuthentication.zip</a>
          </div>
         </div> 
         <div class="ad-items linkAdContainer" id="LinkAdContainerTop"> 
         </div> 
        </div> 
       </div> 
       <div id="div2" class="PaddingLeft5">
        <p align="justify"></p>
        <p><strong>Introduction<br> </strong><br> The Open Web Interface for .NET (<a href="http://www.c-sharpcorner.com/UploadFile/ff2f08/introduction-to-token-based-authentication-using-owin-katan/" rel="nofollow">OWIN</a>) defines a standard interface between .NET web servers and web applications. Katana is open-source components for building and hosting OWIN-based web applications. It provides the implementation of the OWIN specification. The OAuth authorization framework enables a third-party application to obtain limited access to a HTTP service.<br> <br> Currently the preferred approach to authenticate the users is to use a signed token and this token is sent to the server with each request. The following are the benefits for using this approach.</p> 
        <ul>
         <li><strong>Scalability of Servers<br></strong>the token itself contains all the information of the user that is needed for authentication, so Web Farm extension is an easy task. There is no dependence on shared session stores.<br><br></li>
         <li><strong>Loosely Coupling<br></strong>Our front-end application is not coupled with a specific authentication mechanism. The token is generated from the server and our web API has a built-in way to understand this token and perform authentication.<br><br></li>
         <li><strong>Mobile Friendly<br></strong>This type of authentication does not require cookies, so this authentication type can be used with mobile applications.</li> 
        </ul> 
        <p><strong>Example<br> </strong><br> In the following demo application, the OAuth authorization server and the Web API endpoints will be hosted inside the same host.<br> <br> <img alt="Based Authentication" src="http://csharpcorner.mindcrackerinc.netdna-cdn.com/UploadFile/ff2f08/token-based-authentication-using-Asp-Net-web-api-owin-and-i/Images/Based Authentication.jpg"><br> The following is the procedure to do Token Based Authentication using ASP.NET Web API, OWIN and Identity.<br> <br> <strong>Step 1</strong></p> 
        <p>Create and configure a Web API project.<br> <br> Create an empty solution for the project template "ASP.NET Web Application" and add a core reference of the Web API and set the authentication to “No Authentication”.<br> <br> <img alt="Create and configur" src="http://csharpcorner.mindcrackerinc.netdna-cdn.com/UploadFile/ff2f08/token-based-authentication-using-Asp-Net-web-api-owin-and-i/Images/Create and configur.jpg"><br> <br> Update the current version of the Web API using the Nuget package with the following command.<br> <br> &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<em>PM&gt; Update-package Microsoft.AspNet.WebApi</em><br> <br> <img alt="WebApi" src="http://csharpcorner.mindcrackerinc.netdna-cdn.com/UploadFile/ff2f08/token-based-authentication-using-Asp-Net-web-api-owin-and-i/Images/WebApi.jpg"><br> <br> <strong>Step 2</strong></p> 
        <p>Instal the required OWIN component using Nuget Packages.<br> <br> In this step, we need to install Nuget packages that are required to set up our OWIN server and configure the Web API to be hosted within the OWIN server. The "Microsoft.AspNet.Identity.Owin" package provides many useful extensions and we will use this while working with ASP.Net Identity on top of OWIN. It also downloads some other dependency packages. One of those dependency packages is "Microsoft.Owin.Security.OAuth". This is a core package required to support any standard OAuth 2.0 authentication workflow. The “Microsoft.Owin.Host.SystemWeb” namespace contains the types related to handling OWIN requests. It helps us to run OWIN-based applications on IIS using the ASP.NET request pipeline.<br> <br> Use the following commands to instal the OWIN server.</p> 
        <ul>
         <p><em>PM&gt; Install-Package Microsoft.AspNet.Identity.Owin<br>PM&gt; Install-Package Microsoft.Owin.Host.SystemWeb</em></p> 
        </ul> 
        <p>ASP.NET Identity also supports the Entity Framework. Here we will use ASP.Net identity with Entity Framework, so we need to install this via Nuget packages.</p> 
        <ul>
         <p><em>PM&gt; Install-Package Microsoft.AspNet.Identity.EntityFramework</em></p> 
        </ul> 
        <p>This will also install the Entity Framework as a dependency. <br> <strong><br> Step 3</strong></p> 
        <p>Create a DbContext class. The IdentityDbContext Class uses the default entity types for ASP.NET Identity Users, Roles, Claims and Logins. We can overload this to add our own entity types.<br> </p> 
        <div class="dp-highlighter"> 
         <div class="bar"></div> 
         <ol class="dp-c">
          <li class="alt"><span><span class="keyword">public</span><span>&nbsp;</span><span class="keyword">class</span><span>&nbsp;OwinAuthDbContext&nbsp;:&nbsp;IdentityDbContext&nbsp;&nbsp;</span></span></li>
          <li><span>{&nbsp;&nbsp;</span></li>
          <li class="alt"><span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword">public</span><span>&nbsp;OwinAuthDbContext()&nbsp;&nbsp;</span></span></li>
          <li><span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;:&nbsp;<span class="keyword">base</span><span>(</span><span class="string">"OwinAuthDbContext"</span><span>)&nbsp;&nbsp;</span></span></li>
          <li class="alt"><span>&nbsp;&nbsp;&nbsp;&nbsp;{&nbsp;&nbsp;</span></li>
          <li><span>&nbsp;&nbsp;&nbsp;&nbsp;}&nbsp;&nbsp;</span></li>
          <li class="alt"><span>}&nbsp;&nbsp;</span></li> 
         </ol> 
        </div> 
        <p><strong>Step 4</strong></p> 
        <p>Do the migrations (optional step).<br> <br> Entity Framework supports the database migration to create the database and insert some initial values. Migration commands can be executed from the Package Manager Console.<br> <br> <img alt="Migration commands" src="http://csharpcorner.mindcrackerinc.netdna-cdn.com/UploadFile/ff2f08/token-based-authentication-using-Asp-Net-web-api-owin-and-i/Images/Migration commands.jpg"><br> <br> <strong>Step 4</strong></p> 
        <p>Define an OWIN Startup Class.<br> <br> Every OWIN application has a startup class in which we specify components for the application pipeline. Here we are using the OwinStartup Attribute to connect to the startup class with the hosting runtime.</p> 
        <div class="dp-highlighter"> 
         <div class="bar"></div> 
         <ol class="dp-c">
          <li class="alt"><span><span class="keyword">using</span><span>&nbsp;Microsoft.Owin;&nbsp;&nbsp;</span></span></li>
          <li><span><span class="keyword">using</span><span>&nbsp;Owin;&nbsp;&nbsp;</span></span></li>
          <li class="alt"><span>&nbsp;&nbsp;</span></li>
          <li><span>[assembly:&nbsp;OwinStartup(<span class="keyword">typeof</span><span>(OwinAuthentication.Startup))]&nbsp;&nbsp;</span></span></li>
          <li class="alt"><span><span class="keyword">namespace</span><span>&nbsp;OwinAuthentication&nbsp;&nbsp;</span></span></li>
          <li><span>{&nbsp;&nbsp;</span></li>
          <li class="alt"><span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword">public</span><span>&nbsp;</span><span class="keyword">class</span><span>&nbsp;Startup&nbsp;&nbsp;</span></span></li>
          <li><span>&nbsp;&nbsp;&nbsp;&nbsp;{&nbsp;&nbsp;</span></li>
          <li class="alt"><span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword">public</span><span>&nbsp;</span><span class="keyword">void</span><span>&nbsp;Configuration(IAppBuilder&nbsp;app)&nbsp;&nbsp;</span></span></li>
          <li><span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{&nbsp;&nbsp;</span></li>
          <li class="alt"><span>&nbsp;&nbsp;</span></li>
          <li><span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}&nbsp;&nbsp;</span></li>
          <li class="alt"><span>&nbsp;&nbsp;&nbsp;&nbsp;}&nbsp;&nbsp;</span></li>
          <li><span>}&nbsp;&nbsp;</span></li> 
         </ol> 
        </div> 
        <p><strong>Step 5</strong></p> 
        <p>Configure the OAuth Authorization Server.<br> <br> AppBuilderExtensions has the method "CreatePerOwinContext&lt;T&gt;" that registers a callback that will be invoked to create an instance of type T and it will be stored in the OwinContext. Later on we can retrieve it using the context.Get method. This method creates one instance of the given type per request. Here we are using ASP.Net Identity with Entity Framework, so we must create the instance of our DbContext class and to do this we use this extension method.<br> <br> The Microsoft.AspNet.Identity namespace has the class UserManager that exposes the use related to the API that automatically saves the changes to the UserStore. Here we will interact with our database using the UserManager class.<br> <br> The following code is required to use the UserManager class inside our OWIN component efficiently.</p> 
        <div class="dp-highlighter"> 
         <div class="bar"></div> 
         <ol class="dp-c">
          <li class="alt"><span><span class="keyword">private</span><span>&nbsp;</span><span class="keyword">void</span><span>&nbsp;ConfigureOAuth(IAppBuilder&nbsp;app)&nbsp;&nbsp;</span></span></li>
          <li><span>{&nbsp;&nbsp;</span></li>
          <li class="alt"><span>&nbsp;&nbsp;&nbsp;&nbsp;app.CreatePerOwinContext&lt;OwinAuthDbContext&gt;(()&nbsp;=&gt;&nbsp;<span class="keyword">new</span><span>&nbsp;OwinAuthDbContext());&nbsp;&nbsp;</span></span></li>
          <li><span>&nbsp;&nbsp;&nbsp;&nbsp;app.CreatePerOwinContext&lt;UserManager&lt;IdentityUser&gt;&gt;(CreateManager);&nbsp;&nbsp;</span></li>
          <li class="alt"><span>}&nbsp;&nbsp;</span></li>
          <li><span>&nbsp;&nbsp;</span></li>
          <li class="alt"><span><span class="keyword">private</span><span>&nbsp;</span><span class="keyword">static</span><span>&nbsp;UserManager&lt;IdentityUser&gt;&nbsp;CreateManager&nbsp;(IdentityFactoryOptions&lt;UserManager&lt;IdentityUser&gt;&gt;&nbsp;options,&nbsp;IOwinContext&nbsp;context)&nbsp;&nbsp;</span></span></li>
          <li><span>{&nbsp;&nbsp;</span></li>
          <li class="alt"><span>&nbsp;&nbsp;&nbsp;&nbsp;var&nbsp;userStore&nbsp;=&nbsp;<span class="keyword">new</span><span>&nbsp;UserStore&lt;IdentityUser&gt;(context.Get&lt;OwinAuthDbContext&gt;());&nbsp;&nbsp;</span></span></li>
          <li><span>&nbsp;&nbsp;&nbsp;&nbsp;var&nbsp;owinManager&nbsp;=&nbsp;<span class="keyword">new</span><span>&nbsp;UserManager&lt;IdentityUser&gt;(userStore);&nbsp;&nbsp;</span></span></li>
          <li class="alt"><span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword">return</span><span>&nbsp;owinManager;&nbsp;&nbsp;</span></span></li>
          <li><span>}&nbsp;&nbsp;</span></li> 
         </ol> 
        </div> The ConfigureOAuth method will be called inside the Configuration method of the OWIN startup class.
        <br> 
        <br> The UseOAuthAuthorizationServer extension method of OWIN is used to setup the authorization server. Following are the setup options:&nbsp; 
        <ul>
         <li><strong>TokenEndpointPath<br></strong>requests the path on which the client application directly communicates to obtain the access token. It must begin with a leading slash, for example "/oauth/token".<br><br></li>
         <li><strong>AuthorizeEndpointPath<br></strong>It is the request path where the client application will redirect the user-agent to obtain the user's consent to issue a token or code. It must begin with a leading slash (the same as TokenEndpointPath).<br><br></li>
         <li><strong>AllowInsecureHttp<br></strong>Set to true to allow authorize and token requests to arrive on HTTP URI addresses.<br><br></li>
         <li><strong>Provider<br></strong>the object provided by the application to process events raised by the Authorization Server. It may the instance of OAuthAuthorizationServerProvider and assign delegates necessary for the OAuth flow.<br><br></li>
         <li><strong>AuthorizationCodeProvider<br></strong>produces a single-use authorization code to return to the client application. It is required where the token is produced by the OnCreate/OnCreateAsync event.<br><br></li>
         <li><strong>RefreshTokenProvider<br></strong>produces a refresh token that may produce a new access token when required. If this option is not provided then the authorization server will not return refresh tokens from the Token endpoint.<br><br></li>
         <li><strong>ApplicationCanDisplayErrors<br></strong>Set to true when the web application is able to render error messages on the Authorize endpoint. This is required only in cases where the browser is not redirected back to the client application.<br><br></li>
         <li><strong>AccessTokenExpireTimeSpan<br></strong>The time period the access token remains valid after it was generated. The default value is 20 minutes.<br><br></li>
         <li><strong>AccessTokenFormat<br></strong>The data format used to protect the information contained by the access token. If it is not provided then the application will use the default data protection provider depending on the host server.<br><br></li>
         <li><strong>AccessTokenProvider<br></strong>It produces a bearer token.<br><br></li>
         <li><strong>AuthorizationCodeExpireTimeSpan<br></strong>The time period the authorization code remains valid after it was generated. The default value is 5 minutes<br><br></li>
         <li><strong>AuthorizationCodeFormat<br></strong>The data format used to protect and unprotect the information contained in the authorization code.<br><br></li>
         <li><strong>RefreshTokenFormat<br></strong>The data format used to protect and unprotect the information contained in the refresh token. <br><br></li>
         <li><strong>SystemClock<br></strong>Used to know what the current clock time is when calculating or validating token expiration. The default value is DateTimeOffset.UtcNow.&nbsp;</li> 
        </ul> 
        <div class="dp-highlighter"> 
         <div class="bar"></div> 
         <ol class="dp-c">
          <li class="alt"><span><span class="keyword">private</span><span>&nbsp;</span><span class="keyword">void</span><span>&nbsp;ConfigureOAuth(IAppBuilder&nbsp;app)&nbsp;&nbsp;</span></span></li>
          <li><span>{&nbsp;&nbsp;</span></li>
          <li class="alt"><span>&nbsp;&nbsp;&nbsp;&nbsp;….&nbsp;&nbsp;</span></li>
          <li><span>&nbsp;&nbsp;&nbsp;&nbsp;….&nbsp;&nbsp;</span></li>
          <li class="alt"><span>&nbsp;&nbsp;&nbsp;&nbsp;app.UseOAuthAuthorizationServer(<span class="keyword">new</span><span>&nbsp;OAuthAuthorizationServerOptions&nbsp;&nbsp;</span></span></li>
          <li><span>&nbsp;&nbsp;&nbsp;&nbsp;{&nbsp;&nbsp;</span></li>
          <li class="alt"><span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;TokenEndpointPath&nbsp;=&nbsp;<span class="keyword">new</span><span>&nbsp;PathString(</span><span class="string">"/oauth/token"</span><span>),&nbsp;&nbsp;</span></span></li>
          <li><span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Provider&nbsp;=&nbsp;<span class="keyword">new</span><span>&nbsp;AuthorizationServerProvider(),&nbsp;&nbsp;</span></span></li>
          <li class="alt"><span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;AccessTokenExpireTimeSpan&nbsp;=&nbsp;TimeSpan.FromMinutes(30),&nbsp;&nbsp;</span></li>
          <li><span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;AllowInsecureHttp&nbsp;=&nbsp;<span class="keyword">true</span><span>,&nbsp;&nbsp;</span></span></li>
          <li class="alt"><span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span></li>
          <li><span>&nbsp;&nbsp;&nbsp;&nbsp;});&nbsp;&nbsp;</span></li>
          <li class="alt"><span>&nbsp;&nbsp;&nbsp;&nbsp;app.UseOAuthBearerAuthentication(<span class="keyword">new</span><span>&nbsp;OAuthBearerAuthenticationOptions());&nbsp;&nbsp;</span></span></li>
          <li><span>}&nbsp;&nbsp;</span></li> 
         </ol> 
        </div> An Authorization Server uses a default implementation of IOAuthAuthorizationServerProvider to communicate with a web application while processing the request. OAuthAuthorizationServerProvider provides some default behavior like as used as a virtual base class and offers delegate properties that may be used to handle individual calls without creating the instance.
        <br> 
        <br> Here I just override the methods that I need here: ValidateClientAuthentication and GrantResourceOwnerCredentials. 
        <br> 
        <br> 
        <strong>ValidateClientAuthentication<br><br></strong>It is called to validate that the requester (origin of the request) is a registered client_id and the correct credentials for that client are present on the request. "OAuthValidateClientAuthenticationContext.TryGetBasicCredentials" may be able to retrieve the values of the client credential request header if the web application accepts basic authentication credentials. If the web application accepts a client id and secret as form-encoded POST parameters, "OAuthValidateClientAuthenticationContext.TryGetFormCredentials" can be used to retrieve this value. Finally, if "OAuthValidateClientAuthenticationContext.Validated” is not called then the request will not proceed further.
        <br> 
        <br> 
        <strong>GrantResourceOwnerCredentials<br><br></strong>It is called when the request to the token endpoint arrives with a "grant_type" of "password". This occurs when the user provides a user id and password directly to the client application using the client application user interface. If the web application supports the resource owner credentials grant type, it must validate the username and password property of context. To issue the access token, the request must end with the “OAuthGrantResourceOwnerCredentialsContext.Validated" method. The default behavior is to reject this grant type.
        <br> 
        <div class="dp-highlighter"> 
         <div class="bar"></div> 
         <ol class="dp-c">
          <li class="alt"><span><span class="keyword">public</span><span>&nbsp;</span><span class="keyword">class</span><span>&nbsp;AuthorizationServerProvider&nbsp;:&nbsp;OAuthAuthorizationServerProvider&nbsp;&nbsp;</span></span></li>
          <li><span>{&nbsp;&nbsp;</span></li>
          <li class="alt"><span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword">public</span><span>&nbsp;</span><span class="keyword">override</span><span>&nbsp;async&nbsp;Task&nbsp;ValidateClientAuthentication(OAuthValidateClientAuthenticationContext&nbsp;context)&nbsp;&nbsp;</span></span></li>
          <li><span>&nbsp;&nbsp;&nbsp;&nbsp;{&nbsp;&nbsp;</span></li>
          <li class="alt"><span>&nbsp;&nbsp;&nbsp;&nbsp;}&nbsp;&nbsp;</span></li>
          <li><span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword">public</span><span>&nbsp;</span><span class="keyword">override</span><span>&nbsp;async&nbsp;Task&nbsp;GrantResourceOwnerCredentials(OAuthGrantResourceOwnerCredentialsContext&nbsp;context)&nbsp;&nbsp;</span></span></li>
          <li class="alt"><span>&nbsp;&nbsp;&nbsp;&nbsp;{&nbsp;&nbsp;</span></li>
          <li><span>&nbsp;&nbsp;&nbsp;&nbsp;}&nbsp;&nbsp;</span></li>
          <li class="alt"><span>}&nbsp;&nbsp;</span></li> 
         </ol> 
        </div> The following is a probable implementation of the ValidateClientAuthentication method.
        <br> 
        <div class="dp-highlighter"> 
         <div class="bar"></div> 
         <ol class="dp-c">
          <li class="alt"><span><span class="keyword">public</span><span>&nbsp;</span><span class="keyword">override</span><span>&nbsp;async&nbsp;Task&nbsp;ValidateClientAuthentication(OAuthValidateClientAuthenticationContext&nbsp;context)&nbsp;&nbsp;</span></span></li>
          <li><span>{&nbsp;&nbsp;</span></li>
          <li class="alt"><span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword">string</span><span>&nbsp;clientId;&nbsp;&nbsp;</span></span></li>
          <li><span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword">string</span><span>&nbsp;clientSecret;&nbsp;&nbsp;</span></span></li>
          <li class="alt"><span>&nbsp;&nbsp;</span></li>
          <li><span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword">if</span><span>&nbsp;(context.TryGetBasicCredentials(</span><span class="keyword">out</span><span>&nbsp;clientId,&nbsp;</span><span class="keyword">out</span><span>&nbsp;clientSecret))&nbsp;&nbsp;</span></span></li>
          <li class="alt"><span>&nbsp;&nbsp;&nbsp;&nbsp;{&nbsp;&nbsp;&nbsp;</span></li>
          <li><span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment">//&nbsp;validate&nbsp;the&nbsp;client&nbsp;Id&nbsp;and&nbsp;secret&nbsp;against&nbsp;database&nbsp;or&nbsp;from&nbsp;configuration&nbsp;file.</span><span>&nbsp;&nbsp;</span></span></li>
          <li class="alt"><span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;context.Validated();&nbsp;&nbsp;</span></li>
          <li><span>&nbsp;&nbsp;&nbsp;&nbsp;}&nbsp;&nbsp;</span></li>
          <li class="alt"><span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword">else</span><span>&nbsp;&nbsp;</span></span></li>
          <li><span>&nbsp;&nbsp;&nbsp;&nbsp;{&nbsp;&nbsp;</span></li>
          <li class="alt"><span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;context.SetError(<span class="string">"invalid_client"</span><span>,&nbsp;</span><span class="string">"Client&nbsp;credentials&nbsp;could&nbsp;not&nbsp;be&nbsp;retrieved&nbsp;from&nbsp;the&nbsp;Authorization&nbsp;header"</span><span>);&nbsp;&nbsp;</span></span></li>
          <li><span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;context.Rejected();&nbsp;&nbsp;</span></li>
          <li class="alt"><span>&nbsp;&nbsp;&nbsp;&nbsp;}&nbsp;&nbsp;</span></li>
          <li><span>}&nbsp;&nbsp;</span></li> 
         </ol> 
        </div> The following is an implementation of the GrantResourceOwnerCredentials method.
        <br> 
        <div class="dp-highlighter"> 
         <div class="bar"></div> 
         <ol class="dp-c">
          <li class="alt"><span><span class="keyword">public</span><span>&nbsp;</span><span class="keyword">override</span><span>&nbsp;async&nbsp;Task&nbsp;GrantResourceOwnerCredentials(OAuthGrantResourceOwnerCredentialsContext&nbsp;context)&nbsp;&nbsp;</span></span></li>
          <li><span>{&nbsp;&nbsp;</span></li>
          <li class="alt"><span>&nbsp;&nbsp;&nbsp;&nbsp;UserManager&lt;IdentityUser&gt;&nbsp;userManager&nbsp;=&nbsp;context.OwinContext.GetUserManager&lt;UserManager&lt;IdentityUser&gt;&gt;();&nbsp;&nbsp;</span></li>
          <li><span>&nbsp;&nbsp;&nbsp;&nbsp;IdentityUser&nbsp;user;&nbsp;&nbsp;</span></li>
          <li class="alt"><span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword">try</span><span>&nbsp;&nbsp;</span></span></li>
          <li><span>&nbsp;&nbsp;&nbsp;&nbsp;{&nbsp;&nbsp;</span></li>
          <li class="alt"><span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;user&nbsp;=&nbsp;await&nbsp;userManager.FindAsync(context.UserName,&nbsp;context.Password);&nbsp;&nbsp;</span></li>
          <li><span>&nbsp;&nbsp;&nbsp;&nbsp;}&nbsp;&nbsp;</span></li>
          <li class="alt"><span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword">catch</span><span>&nbsp;&nbsp;</span></span></li>
          <li><span>&nbsp;&nbsp;&nbsp;&nbsp;{&nbsp;&nbsp;</span></li>
          <li class="alt"><span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment">//&nbsp;Could&nbsp;not&nbsp;retrieve&nbsp;the&nbsp;user&nbsp;due&nbsp;to&nbsp;error.</span><span>&nbsp;&nbsp;</span></span></li>
          <li><span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;context.SetError(<span class="string">"server_error"</span><span>);&nbsp;&nbsp;</span></span></li>
          <li class="alt"><span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;context.Rejected();&nbsp;&nbsp;</span></li>
          <li><span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword">return</span><span>;&nbsp;&nbsp;</span></span></li>
          <li class="alt"><span>&nbsp;&nbsp;&nbsp;&nbsp;}&nbsp;&nbsp;</span></li>
          <li><span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword">if</span><span>&nbsp;(user&nbsp;!=&nbsp;</span><span class="keyword">null</span><span>)&nbsp;&nbsp;</span></span></li>
          <li class="alt"><span>&nbsp;&nbsp;&nbsp;&nbsp;{&nbsp;&nbsp;</span></li>
          <li><span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;ClaimsIdentity&nbsp;identity&nbsp;=&nbsp;await&nbsp;userManager.CreateIdentityAsync(&nbsp;&nbsp;</span></li>
          <li class="alt"><span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;user,&nbsp;&nbsp;</span></li>
          <li><span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;DefaultAuthenticationTypes.ExternalBearer);&nbsp;&nbsp;</span></li>
          <li class="alt"><span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;context.Validated(identity);&nbsp;&nbsp;</span></li>
          <li><span>&nbsp;&nbsp;&nbsp;&nbsp;}&nbsp;&nbsp;</span></li>
          <li class="alt"><span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword">else</span><span>&nbsp;&nbsp;</span></span></li>
          <li><span>&nbsp;&nbsp;&nbsp;&nbsp;{&nbsp;&nbsp;</span></li>
          <li class="alt"><span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;context.SetError(<span class="string">"invalid_grant"</span><span>,&nbsp;</span><span class="string">"Invalid&nbsp;User&nbsp;Id&nbsp;or&nbsp;password'"</span><span>);&nbsp;&nbsp;</span></span></li>
          <li><span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;context.Rejected();&nbsp;&nbsp;</span></li>
          <li class="alt"><span>&nbsp;&nbsp;}&nbsp;&nbsp;</span></li> 
         </ol> 
        </div> 
        <p>An HTTP POST request is made to the URL "/oauth/token" endpoint with grant_type parameter "password"; it will first arrive at the ValidateClientAuthentication method. In this place we can retrieve the client credentials and validate it. If the client credential is invalid, we need to return an unauthorized request using the context.Rejected method. If we grant the request in the ValidateClientAuthentication method, the request will arrive at the GrantResourceOwnerCredentials method. Inside this method, we need to validate that the user is using resource-owner credentials.<br> <br> <strong>Step 6</strong></p> 
        <p>Test the Project.<br> <br> To test the preceding approach I created a console project in my solution. Create the following Token class within the console application.</p> 
        <div class="dp-highlighter"> 
         <div class="bar"></div> 
         <ol class="dp-c">
          <li class="alt"><span><span class="keyword">using</span><span>&nbsp;Newtonsoft.Json;&nbsp;&nbsp;</span></span></li>
          <li><span>&nbsp;&nbsp;</span></li>
          <li class="alt"><span><span class="keyword">namespace</span><span>&nbsp;OWINTest&nbsp;&nbsp;</span></span></li>
          <li><span>{&nbsp;&nbsp;</span></li>
          <li class="alt"><span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword">public</span><span>&nbsp;</span><span class="keyword">class</span><span>&nbsp;Token&nbsp;&nbsp;</span></span></li>
          <li><span>&nbsp;&nbsp;&nbsp;&nbsp;{&nbsp;&nbsp;</span></li>
          <li class="alt"><span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;[JsonProperty(<span class="string">"access_token"</span><span>)]&nbsp;&nbsp;</span></span></li>
          <li><span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword">public</span><span>&nbsp;</span><span class="keyword">string</span><span>&nbsp;AccessToken&nbsp;{&nbsp;</span><span class="keyword">get</span><span>;&nbsp;</span><span class="keyword">set</span><span>;&nbsp;}&nbsp;&nbsp;</span></span></li>
          <li class="alt"><span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;[JsonProperty(<span class="string">"token_type"</span><span>)]&nbsp;&nbsp;</span></span></li>
          <li><span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword">public</span><span>&nbsp;</span><span class="keyword">string</span><span>&nbsp;TokenType&nbsp;{&nbsp;</span><span class="keyword">get</span><span>;&nbsp;</span><span class="keyword">set</span><span>;&nbsp;}&nbsp;&nbsp;</span></span></li>
          <li class="alt"><span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;[JsonProperty(<span class="string">"expires_in"</span><span>)]&nbsp;&nbsp;</span></span></li>
          <li><span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword">public</span><span>&nbsp;</span><span class="keyword">int</span><span>&nbsp;ExpiresIn&nbsp;{&nbsp;</span><span class="keyword">get</span><span>;&nbsp;</span><span class="keyword">set</span><span>;&nbsp;}&nbsp;&nbsp;</span></span></li>
          <li class="alt"><span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;[JsonProperty(<span class="string">"refresh_token"</span><span>)]&nbsp;&nbsp;</span></span></li>
          <li><span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword">public</span><span>&nbsp;</span><span class="keyword">string</span><span>&nbsp;RefreshToken&nbsp;{&nbsp;</span><span class="keyword">get</span><span>;&nbsp;</span><span class="keyword">set</span><span>;&nbsp;}&nbsp;&nbsp;</span></span></li>
          <li class="alt"><span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;[JsonProperty(<span class="string">"error"</span><span>)]&nbsp;&nbsp;</span></span></li>
          <li><span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword">public</span><span>&nbsp;</span><span class="keyword">string</span><span>&nbsp;Error&nbsp;{&nbsp;</span><span class="keyword">get</span><span>;&nbsp;</span><span class="keyword">set</span><span>;&nbsp;}&nbsp;&nbsp;</span></span></li>
          <li class="alt"><span>&nbsp;&nbsp;&nbsp;&nbsp;}&nbsp;&nbsp;</span></li>
          <li><span>}&nbsp;&nbsp;</span></li> 
         </ol> 
        </div> 
        <strong>Program.cs code<br> </strong> 
        <div class="dp-highlighter"> 
         <div class="bar"></div> 
         <ol class="dp-c">
          <li class="alt"><span><span class="keyword">using</span><span>&nbsp;System;&nbsp;&nbsp;</span></span></li>
          <li><span><span class="keyword">using</span><span>&nbsp;System.Collections.Generic;&nbsp;&nbsp;</span></span></li>
          <li class="alt"><span><span class="keyword">using</span><span>&nbsp;System.Net.Http;&nbsp;&nbsp;</span></span></li>
          <li><span><span class="keyword">using</span><span>&nbsp;System.Net.Http.Formatting;&nbsp;&nbsp;</span></span></li>
          <li class="alt"><span>&nbsp;&nbsp;</span></li>
          <li><span><span class="keyword">namespace</span><span>&nbsp;OWINTest&nbsp;&nbsp;</span></span></li>
          <li class="alt"><span>{&nbsp;&nbsp;</span></li>
          <li><span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword">class</span><span>&nbsp;Program&nbsp;&nbsp;</span></span></li>
          <li class="alt"><span>&nbsp;&nbsp;&nbsp;&nbsp;{&nbsp;&nbsp;</span></li>
          <li><span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword">static</span><span>&nbsp;</span><span class="keyword">void</span><span>&nbsp;Main(</span><span class="keyword">string</span><span>[]&nbsp;args)&nbsp;&nbsp;</span></span></li>
          <li class="alt"><span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{&nbsp;&nbsp;</span></li>
          <li><span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword">string</span><span>&nbsp;baseAddress&nbsp;=&nbsp;</span><span class="string">"http://localhost:4312"</span><span>;&nbsp;&nbsp;</span></span></li>
          <li class="alt"><span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword">using</span><span>&nbsp;(var&nbsp;client&nbsp;=&nbsp;</span><span class="keyword">new</span><span>&nbsp;HttpClient())&nbsp;&nbsp;</span></span></li>
          <li><span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{&nbsp;&nbsp;</span></li>
          <li class="alt"><span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;var&nbsp;form&nbsp;=&nbsp;<span class="keyword">new</span><span>&nbsp;Dictionary&lt;</span><span class="keyword">string</span><span>,&nbsp;</span><span class="keyword">string</span><span>&gt;&nbsp;&nbsp;&nbsp;&nbsp;</span></span></li>
          <li><span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{&nbsp;&nbsp;&nbsp;&nbsp;</span></li>
          <li class="alt"><span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{<span class="string">"grant_type"</span><span>,&nbsp;</span><span class="string">"password"</span><span>},&nbsp;&nbsp;&nbsp;&nbsp;</span></span></li>
          <li><span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{<span class="string">"username"</span><span>,&nbsp;</span><span class="string">"jignesh"</span><span>},&nbsp;&nbsp;&nbsp;&nbsp;</span></span></li>
          <li class="alt"><span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{<span class="string">"password"</span><span>,&nbsp;</span><span class="string">"user123456"</span><span>},&nbsp;&nbsp;&nbsp;&nbsp;</span></span></li>
          <li><span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;};&nbsp;&nbsp;</span></li>
          <li class="alt"><span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;var&nbsp;tokenResponse&nbsp;=&nbsp;client.PostAsync(baseAddress&nbsp;+&nbsp;<span class="string">"/oauth/token"</span><span>,&nbsp;</span><span class="keyword">new</span><span>&nbsp;FormUrlEncodedContent(form)).Result;&nbsp;&nbsp;</span></span></li>
          <li><span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment">//var&nbsp;token&nbsp;=&nbsp;tokenResponse.Content.ReadAsStringAsync().Result;</span><span>&nbsp;&nbsp;</span></span></li>
          <li class="alt"><span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;var&nbsp;token&nbsp;=&nbsp;tokenResponse.Content.ReadAsAsync&lt;Token&gt;(<span class="keyword">new</span><span>[]&nbsp;{&nbsp;</span><span class="keyword">new</span><span>&nbsp;JsonMediaTypeFormatter()&nbsp;}).Result;&nbsp;&nbsp;</span></span></li>
          <li><span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword">if</span><span>&nbsp;(</span><span class="keyword">string</span><span>.IsNullOrEmpty(token.Error))&nbsp;&nbsp;</span></span></li>
          <li class="alt"><span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{&nbsp;&nbsp;</span></li>
          <li><span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Console.WriteLine(<span class="string">"Token&nbsp;issued&nbsp;is:&nbsp;{0}"</span><span>,&nbsp;token.AccessToken);&nbsp;&nbsp;</span></span></li>
          <li class="alt"><span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}&nbsp;&nbsp;</span></li>
          <li><span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword">else</span><span>&nbsp;&nbsp;</span></span></li>
          <li class="alt"><span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{&nbsp;&nbsp;</span></li>
          <li><span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Console.WriteLine(<span class="string">"Error&nbsp;:&nbsp;{0}"</span><span>,&nbsp;token.Error);&nbsp;&nbsp;</span></span></li>
          <li class="alt"><span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}&nbsp;&nbsp;</span></li>
          <li><span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Console.Read();&nbsp;&nbsp;</span></li>
          <li class="alt"><span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}&nbsp;&nbsp;</span></li>
          <li><span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}&nbsp;&nbsp;</span></li>
          <li class="alt"><span>&nbsp;&nbsp;&nbsp;&nbsp;}&nbsp;&nbsp;</span></li>
          <li><span>}&nbsp;&nbsp;</span></li> 
         </ol> 
        </div> Using the following script, insert some dummy data into the AspNetUser table. Here I have encrypted my password using Abstraction for the password hashing methods of the Microsoft.AspNet.Identity namespace available with the UserManger class.
        <br> 
        <div class="dp-highlighter"> 
         <div class="bar"></div> 
         <ol class="dp-sql">
          <li class="alt"><span><span class="keyword">INSERT</span><span>&nbsp;[dbo].[AspNetUsers]&nbsp;([Id],&nbsp;[Email],&nbsp;[EmailConfirmed],&nbsp;[PasswordHash],&nbsp;[SecurityStamp],&nbsp;&nbsp;&nbsp;</span></span></li>
          <li><span>[PhoneNumber],&nbsp;[PhoneNumberConfirmed],&nbsp;[TwoFactorEnabled],&nbsp;[LockoutEndDateUtc],&nbsp;[LockoutEnabled],&nbsp;&nbsp;&nbsp;</span></li>
          <li class="alt"><span>[AccessFailedCount],&nbsp;[UserName])&nbsp;&nbsp;&nbsp;</span></li>
          <li><span><span class="keyword">VALUES</span><span>&nbsp;(N</span><span class="string">'9f15bdd0fcd5423190c2e877ba0228ee'</span><span>,&nbsp;N</span><span class="string">'abc@gail.com'</span><span>,&nbsp;1,&nbsp;&nbsp;&nbsp;</span></span></li>
          <li class="alt"><span>N<span class="string">'ALkHGax/i5KBYWJ7q4jhJmMKmm2quBtnnqS8KcmLWd2kQpN6FaGVulDmmX12s7YAyQ=='</span><span>,&nbsp;&nbsp;&nbsp;</span></span></li>
          <li><span>N<span class="string">'a7bc5c5c-6169-4911-b935-6fc4df01d313'</span><span>,&nbsp;</span><span class="op">NULL</span><span>,&nbsp;0,&nbsp;0,&nbsp;</span><span class="op">NULL</span><span>,&nbsp;0,&nbsp;0,&nbsp;N</span><span class="string">'Jignesh'</span><span>)&nbsp;&nbsp;</span></span></li> 
         </ol> 
        </div> 
        <strong>Output</strong>
        <br> 
        <br> 
        <img alt="JSON" src="http://csharpcorner.mindcrackerinc.netdna-cdn.com/UploadFile/ff2f08/token-based-authentication-using-Asp-Net-web-api-owin-and-i/Images/JSON.jpg">
        <br> 
        <br> We receive the response in the form of JSON and we convert it into our Token class using the Content.ReadAsAsync method. The Result Token class contains either the access token or an error. If we pass the wrong credentials, the system will generate the error:
        <br> 
        <br> 
        <img alt="error" src="http://csharpcorner.mindcrackerinc.netdna-cdn.com/UploadFile/ff2f08/token-based-authentication-using-Asp-Net-web-api-owin-and-i/Images/error.jpg">
        <br> 
        <br> In the next request we use this token for the authentication and the token will be sent in the request header. The Token is valid up to its expiry time.
        <br> 
        <br> To test it, I added a controller to my Web API project and created a test method as in the following.
        <br> 
        <div class="dp-highlighter"> 
         <div class="bar"></div> 
         <ol class="dp-c">
          <li class="alt"><span><span class="keyword">using</span><span>&nbsp;System.Web.Http;&nbsp;&nbsp;</span></span></li>
          <li><span>&nbsp;&nbsp;</span></li>
          <li class="alt"><span><span class="keyword">namespace</span><span>&nbsp;OwinAuthentication.Controllers&nbsp;&nbsp;</span></span></li>
          <li><span>{&nbsp;&nbsp;</span></li>
          <li class="alt"><span>&nbsp;&nbsp;&nbsp;&nbsp;[Authorize]&nbsp;&nbsp;</span></li>
          <li><span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword">public</span><span>&nbsp;</span><span class="keyword">class</span><span>&nbsp;POCController&nbsp;:&nbsp;ApiController&nbsp;&nbsp;</span></span></li>
          <li class="alt"><span>&nbsp;&nbsp;&nbsp;&nbsp;{&nbsp;&nbsp;</span></li>
          <li><span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;[HttpGet]&nbsp;&nbsp;</span></li>
          <li class="alt"><span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;[Route(<span class="string">"api/TestMethod"</span><span>)]&nbsp;&nbsp;</span></span></li>
          <li><span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword">public</span><span>&nbsp;</span><span class="keyword">string</span><span>&nbsp;TestMethod()&nbsp;&nbsp;</span></span></li>
          <li class="alt"><span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{&nbsp;&nbsp;</span></li>
          <li><span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword">return</span><span>&nbsp;</span><span class="string">"Hello,&nbsp;C#&nbsp;Corner&nbsp;Member.&nbsp;"</span><span>;&nbsp;&nbsp;</span></span></li>
          <li class="alt"><span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}&nbsp;&nbsp;</span></li>
          <li><span>&nbsp;&nbsp;&nbsp;&nbsp;}&nbsp;&nbsp;</span></li>
          <li class="alt"><span>}&nbsp;&nbsp;</span></li> 
         </ol> 
        </div> Here we must mark our controller or action method with the Authorize attribute to check whether the request has a valid token. 
        <br> 
        <br> The following is needed to append in a client application (console application in our case). First of all we need to get the token using the code described in the preceding section and then use this token to process the request.
        <br> 
        <div class="dp-highlighter"> 
         <div class="bar"></div> 
         <ol class="dp-c">
          <li class="alt"><span><span class="keyword">using</span><span>&nbsp;(HttpClient&nbsp;httpClient1&nbsp;=&nbsp;</span><span class="keyword">new</span><span>&nbsp;HttpClient())&nbsp;&nbsp;</span></span></li>
          <li><span>{&nbsp;&nbsp;</span></li>
          <li class="alt"><span>&nbsp;&nbsp;&nbsp;&nbsp;httpClient1.BaseAddress&nbsp;=&nbsp;<span class="keyword">new</span><span>&nbsp;Uri(baseAddress);&nbsp;&nbsp;</span></span></li>
          <li><span>&nbsp;&nbsp;&nbsp;&nbsp;httpClient1.DefaultRequestHeaders.Authorization&nbsp;=&nbsp;<span class="keyword">new</span><span>&nbsp;AuthenticationHeaderValue(</span><span class="string">"bearer"</span><span>,&nbsp;token.AccessToken);&nbsp;&nbsp;</span></span></li>
          <li class="alt"><span>&nbsp;&nbsp;&nbsp;&nbsp;HttpResponseMessage&nbsp;response&nbsp;=&nbsp;httpClient1.GetAsync(<span class="string">"api/TestMethod"</span><span>).Result;&nbsp;&nbsp;</span></span></li>
          <li><span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword">if</span><span>&nbsp;(response.IsSuccessStatusCode)&nbsp;&nbsp;</span></span></li>
          <li class="alt"><span>&nbsp;&nbsp;&nbsp;&nbsp;{&nbsp;&nbsp;</span></li>
          <li><span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;System.Console.WriteLine(<span class="string">"Success"</span><span>);&nbsp;&nbsp;</span></span></li>
          <li class="alt"><span>&nbsp;&nbsp;&nbsp;&nbsp;}&nbsp;&nbsp;</span></li>
          <li><span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword">string</span><span>&nbsp;message&nbsp;=&nbsp;response.Content.ReadAsStringAsync().Result;&nbsp;&nbsp;</span></span></li>
          <li class="alt"><span>&nbsp;&nbsp;&nbsp;&nbsp;System.Console.WriteLine(<span class="string">"URL&nbsp;responese&nbsp;:&nbsp;"</span><span>&nbsp;+&nbsp;message);&nbsp;&nbsp;</span></span></li>
          <li><span>}&nbsp;&nbsp;</span></li> 
         </ol> 
        </div> 
        <strong>Output</strong>
        <br> 
        <br> 
        <img alt="Output" src="http://csharpcorner.mindcrackerinc.netdna-cdn.com/UploadFile/ff2f08/token-based-authentication-using-Asp-Net-web-api-owin-and-i/Images/Output.jpg">
        <strong></strong>
        <br> 
        <br> 
        <strong>Summary <br> </strong>
        <br> Using this article we can set up our authorization server and we have a working OAuth 2.0 token endpoint that only supports "Resource Owner Password Credentials Grant" as of now.&nbsp; 
        <p></p>
       </div> 
       <div id="ArticleExtentionContainer"> 
       </div> 
      </div> 
      <div class="clear"></div> 
      <div class="linkAdContainer bottom" id="LinkAdContainerBottom"> 
      </div> 
      <div id="ctl00_divTagsBox" class="tags item-list margin-t15"> 
       <ul id="ArticleTagKeywords" class="list-inline-float tag-cloud">
        <li><a href="/topics/asp-net">ASP.NET</a></li>
        <li><a href="/topics/owin">OWIN</a></li>
        <li><a href="/topics/token-based-authentication">Token Based Authentication</a></li>
        <li><a href="/topics/web-api">Web API</a></li>
       </ul> 
      </div> 
      <div id="AboutAuthorBox"> 
      </div> 
      <div class="clear"></div> 
      <div id="ctl00_CommentsBox" class="commentsContainer"></div> 
     </div> 
     <div class="right-bar hidden-md-down "> 
      <div id="NewsArticleAdBox"></div> 
      <div id="PremiumSponsorTextAdBox" style="margin:10px 0;"></div> 
      <div class="rightbar-items"> 
       <h4 class="heading"> <a href="/rss/toparticles.aspx" class="rss-link-right" target="_blank"> <i class="c-icon icon-rss icon-20"></i> </a>TRENDING UP </h4> 
       <ul id="TrendingUpList" class="numbered-list">
        <li class="media margin-t8">
         <div class="media-left media-middle"> 
          <span class="numbers">01</span>
         </div>
         <div class="media-body media-middle">
          <a class="body" href="http://www.c-sharpcorner.com/article/getting-started-with-asp-net-core-and-angular-4-using-web-api/">Getting Started With ASP.NET Core And Angular 4 Using WEB API</a>
         </div></li>
        <li class="media margin-t8">
         <div class="media-left media-middle"> 
          <span class="numbers">02</span>
         </div>
         <div class="media-body media-middle">
          <a class="body" href="http://www.c-sharpcorner.com/article/two-ways-to-get-data-from-entity-framework/">Two Ways To Get Data From Entity Framework</a>
         </div></li>
        <li class="media margin-t8">
         <div class="media-left media-middle"> 
          <span class="numbers">03</span>
         </div>
         <div class="media-body media-middle">
          <a class="body" href="http://www.c-sharpcorner.com/article/deep-dive-into-microsoft-azure/">Deep Dive Into Microsoft Azure</a>
         </div></li>
        <li class="media margin-t8">
         <div class="media-left media-middle"> 
          <span class="numbers">04</span>
         </div>
         <div class="media-body media-middle">
          <a class="body" href="http://www.c-sharpcorner.com/article/most-asked-sql-queries-in-interview-questions/">35 Essential Basic-Advanced SQL Query-Questions Asked In Technical Interviews</a>
         </div></li>
        <li class="media margin-t8">
         <div class="media-left media-middle"> 
          <span class="numbers">05</span>
         </div>
         <div class="media-body media-middle">
          <a class="body" href="http://www.c-sharpcorner.com/article/asp-net-mvc-crud-operation-using-entityframework/">ASP.NET MVC CRUD Operation Using Entity Framework Without Writing Single Code</a>
         </div></li>
        <li class="media margin-t8">
         <div class="media-left media-middle"> 
          <span class="numbers">06</span>
         </div>
         <div class="media-body media-middle">
          <a class="body" href="http://www.c-sharpcorner.com/article/custom-paging-in-angular-ui-grid/">Custom Paging In Angular-UI Grid</a>
         </div></li>
        <li class="media margin-t8">
         <div class="media-left media-middle"> 
          <span class="numbers">07</span>
         </div>
         <div class="media-body media-middle">
          <a class="body" href="http://www.c-sharpcorner.com/article/install-and-use-github-extension/">GitHub Extension In Visual Studio 2017</a>
         </div></li>
        <li class="media margin-t8">
         <div class="media-left media-middle"> 
          <span class="numbers">08</span>
         </div>
         <div class="media-body media-middle">
          <a class="body" href="http://www.c-sharpcorner.com/article/leadership-challenge-001-positive-reinforcement/">Leadership Challenge 001 - Positive Reinforcement</a>
         </div></li>
        <li class="media margin-t8">
         <div class="media-left media-middle"> 
          <span class="numbers">09</span>
         </div>
         <div class="media-body media-middle">
          <a class="body" href="http://www.c-sharpcorner.com/article/the-basic-concepts-of-datascience/">The Basic Concepts Of Data Science</a>
         </div></li>
        <li class="media margin-t8">
         <div class="media-left media-middle"> 
          <span class="numbers">10</span>
         </div>
         <div class="media-body media-middle">
          <a class="body" href="http://www.c-sharpcorner.com/article/how-to-customize-ui-grid-height-dynamically/">How To Customize UI-Grid Height Dynamically</a>
         </div></li>
       </ul> 
       <p class="view-all-link"> <a href="/top-articles">View All<i class="c-icon icon-view-all"></i></a> </p> 
      </div> 
      <div id="NewArticleAdMiddle"></div> 
     </div> 
    </div> 
   </div> 
   <footer> 
    <script>var topFooter_headTag = document.getElementsByTagName("Head")[0];var topFooter_linkTag = document.createElement("link");topFooter_linkTag.rel = "stylesheet";topFooter_linkTag.href = "/app_themes/NewDesign/footer_20170608.css";topFooter_headTag.insertBefore(topFooter_linkTag, topFooter_headTag.firstChild);setTimeout(function () { document.getElementById("subscriber_email").addEventListener("keyup", function (e) { if (e.keyCode == 13) { footerRegister(); } }); }, 300);
</script> 
    <div class="top-footer"> 
     <div class="b-container"> 
      <div class="b-row"> 
       <div id="NewTopFooter"> 
        <div class="info"> 
         <div class="img-wrap"> 
          <a href="http://c-sharpcorner.com"> <img src="http://csharpcorner.mindcrackerinc.netdna-cdn.com/Images/transparent_logo.png" alt="C# Corner Logo"></a> 
         </div> 
         <div class="footer-list-city"> 
          <ul> 
           <li><a style="color: rgba(255,255,255,.5);">Philadelphia</a></li> 
           <li><a style="color: rgba(255,255,255,.5);">New York</a></li> 
           <li><a style="color: rgba(255,255,255,.5);">London</a></li> 
           <li><a style="color: rgba(255,255,255,.5);">Delhi</a></li> 
          </ul> 
         </div> 
        </div> 
        <div class="sign-up"> 
         <div class="news-letter-heading">
          Join C# Corner
         </div> 
         <div class="sign-up-text">
          A community of 2.3 million developers worldwide
         </div> 
         <div class="sign-up-form"> 
          <input type="text" placeholder="Enter your email address" id="subscriber_email">
          <a onclick="footerRegister();">Sign Up</a> 
         </div> 
        </div> 
        <div class="links"> 
         <div class="b-row"> 
          <div class="learn"> 
           <ul class="footer-list-new"> 
            <li><a href="/learn/asp-net-mvc">Learn ASP.NET MVC</a></li> 
            <li><a href="/learn/learn-asp-net-core-10/">Learn ASP.NET Core</a></li> 
            <li><a href="/learn/python-tutorial">Learn Python</a></li> 
            <li><a href="/learn/javascript-for-professionals">Learn JavaScript</a></li> 
            <li><a href="/learn/xamarin-jump-start">Learn Xamarin</a></li> 
            <li><a href="/learn/oracle-jump-start">Learn Oracle</a></li> 
            <li><a href="/learn">More...</a></li> 
           </ul> 
          </div> 
          <div class="extra-links"> 
           <ul> 
            <li><a href="/">Home</a></li> 
            <li><a href="/events">Events</a></li> 
            <li><a href="http://consultants.c-sharpcorner.com/">Consultants</a></li> 
            <li><a href="/jobs/">Jobs</a></li> 
            <li><a href="/careeradvice">Career Advice</a></li> 
            <li><a href="/stories">Stories</a></li> 
            <!--<li><a href="/partners.aspx">Partners</a></li>--> 
           </ul> 
          </div> 
         </div> 
        </div> 
       </div> 
      </div> 
     </div> 
    </div> 
    <div class="bottom-footer"> 
     <div class="b-container"> 
      <div> 
       <div class="right-items"> 
        <ul class="footer-social-bar"> 
         <li><a title="Facebook" target="_blank" href="http://www.facebook.com/pages/C-Corner/194086953935286" class="facebook-icon"><i class="c-icon icon-28 icon-facebook"></i></a></li> 
         <li><a title="Twitter" target="_blank" href="http://twitter.com/csharpcorner" class="twitter-icon"><i class="c-icon icon-28 icon-twitter"></i></a></li> 
         <li><a title="Google+" target="_blank" href="https://plus.google.com/u/0/114221266846457741050/posts" class="googleplus-icon"><i class="c-icon icon-28 icon-googleplus"></i></a></li> 
         <li><a title="Youtube" target="_blank" href="http://www.youtube.com/user/CsharpCorner1/" class="youtube-icon"><i class="c-icon icon-28 icon-youtube"></i></a></li> 
         <li><a title="Birch" target="_blank" href="http://www.birch.com/" class="birch-icon"><i class="c-icon icon-28 icon-birch"></i></a></li> 
         <li><a title="Android App" target="_blank" href="https://play.google.com/store/apps/details?id=com.mcn.csharpcorner&amp;pcampaignid=MKT-Other-global-all-co-prtnr-py-PartBadge-Mar2515-1" class="birch-icon"><i class="c-icon icon-28 icon-google-play-store"></i></a></li> 
         <li><a title="Windows App" target="_blank" href="https://www.microsoft.com/store/apps/9nblggh4tmwd?ocid=badge" class="birch-icon"><i class="c-icon icon-28 icon-win-store"></i></a></li> 
        </ul> 
       </div> 
       <div class="left-items"> 
        <ul class="footer-nav"> 
         <li><a href="http://www.c-sharpcorner.com/resources/aboutus.aspx">About Us</a></li> 
         <li><a href="http://www.c-sharpcorner.com/contactus.aspx">Contact Us</a></li> 
         <li><a href="http://www.c-sharpcorner.com/privacypolicy.aspx">Privacy Policy</a></li> 
         <li><a href="http://www.c-sharpcorner.com/termsconditions.aspx">Terms</a></li> 
         <li><a href="http://www.c-sharpcorner.com/media/contactus.aspx">Media Kit</a></li> 
         <li><a href="http://www.c-sharpcorner.com/sitemap/">Sitemap</a></li> 
         <li><a href="http://www.c-sharpcorner.com/report-bugs">Report a Bug</a></li> 
         <li><a href="http://www.c-sharpcorner.com/faq">FAQ</a></li> 
        </ul> 
        <p class="footer-copyright"><small>©2017 C# Corner. All contents are copyright of their authors.</small> </p> 
       </div> 
      </div> 
     </div> 
    </div> 
   </footer> 
   <input type="hidden" name="ctl00$hddArticleID" id="hddArticleID" value="6964d5de-97e1-4210-ac2e-b1e89ad499e7"> 
   <input type="hidden" name="ctl00$hddRawUrl" id="hddRawUrl" value="/UploadFile/ff2f08/token-based-authentication-using-Asp-Net-web-api-owin-and-i/"> 
   <input type="hidden" name="ctl00$hiddenFieldReturnUrl" id="hiddenFieldReturnUrl" value="http://www.c-sharpcorner.com/userregistration/logincheck.aspx?returnurl=http://www.c-sharpcorner.com/uploadfile/ff2f08/token-based-authentication-using-asp-net-web-api-owin-and-i/"> 
   <input type="hidden" name="ctl00$hiddenFieldNext" id="ctl00_hiddenFieldNext"> 
   <input type="hidden" name="ctl00$hiddenFieldPrevious" id="ctl00_hiddenFieldPrevious"> 
   <input type="hidden" name="ctl00$HiddenFieldCurrentPageUrl" id="ctl00_HiddenFieldCurrentPageUrl" value="http://www.c-sharpcorner.com/UploadFile/ff2f08/token-based-authentication-using-Asp-Net-web-api-owin"> 
   <input type="hidden" name="ctl00$HiddenArticleCategoryID" id="HiddenArticleCategoryID" value="224"> 
   <input type="hidden" name="ctl00$HiddenRawUrl" id="HiddenRawUrl" value="/UploadFile/ff2f08/token-based-authentication-using-Asp-Net-web-api-owin-and-i/"> 
   <input type="hidden" name="ctl00$HiddenAuthorId" id="HiddenAuthorId" value="ff2f08"> 
   <input type="hidden" name="ctl00$HiddenFiledContentTitle" id="HiddenFiledContentTitle" value="Token Based Authentication Using ASP.Net Web API, OWIN and Identity With Entity Framework"> 
   <input type="hidden" name="ctl00$HiddenContentType" id="HiddenContentType" value="article"> 
   <input type="hidden" name="ctl00$HiddenLoginCheckReturnUrl" id="HiddenLoginCheckReturnUrl" value="article"> 
   <input type="hidden" name="ctl00$HiddenUserRole" id="HiddenUserRole"> 
   <input type="hidden" name="ctl00$HiddenIsContentApproved" id="HiddenIsContentApproved" value="true"> 
   <input type="hidden" name="ctl00$HiddenIsAllowPost" id="HiddenIsAllowPost" value="true"> 
   <input name="ctl00$HiddenContentShortDescription" type="hidden" id="HiddenContentShortDescription" value="This article explains how to use Token Based Authentication using ASP.NET Web API, OWIN and Identity with Entity Framework."> 
   <div class="aspNetHidden"> 
    <input type="hidden" name="__EVENTVALIDATION" id="__EVENTVALIDATION" value="/wEdACM5Rj4zCSs6ZoifYGd58UrAeujwcpkT4wUBbLzdnTokISCn+26ttXTkeDiiWUQqel0GT/axTSgGZsimV9TSccTvubhOq8cZX8UDKAvkNil6gPF1KsWY0FNm45N9CzyjL8g1k7ygti1UWUGJXn7mkJuaBgwGT+q6zajKpFlIQvO1ABA8VR5tYKbaN8RUfZbMGxsUZA7/SiA53L8OlNZnMXRP+oYa+08EsHXMpOuXdjXa3S+r8HzLyZbfE+p34ck+7VPc4NjW4dNlAui8JYsEFc80pkt83SdJhKkWoU7A/T/krP9W7NkgOIFXDmlgzmgjRpYhOU++CXWJYhB8v/bxmygdsXaiBQewCVDYXs/HIESQCe9xgaxoNG2Sx3kLVA20gJqqayJbMiAB2vlW2yy+zpVofVleazCj60/QYA5ON7cLOFiGxoDo7e2I3I01pHuodV9pFxIdejWAPuY2G0I/jhFs6qhP3V9gL7OeiOwa74vDlSs9tie4yN/UniM6QSSSl8qvbcOpc9rurvJw3eKwuAsM1ZWzin+cC+JWRxvHjBEI0TpeUREjG6ev2Y5leWJZ5bcVJ7yP3EjTGVaKEi3cK3O5rHvtEB3K6yMqQs71Z/nljEUzr8BX1JhPWQuMWqwksogafOkkiNKB5HMuyB4V5+NkZCHW8fW2K/05/c48TeTGzBOjbRbP0RJ3+ZeMWBAx26PVyUnXQCiFbhfEdwDT65oX+K5m0s8A+3udf4IvjphiaAI4Fd3vj7ehou0KzUtK35mCVQPp"> 
   </div> 
   <script> var arrInFocus =[{"Title":"Check out available jobs on C# Corner","Url":"http://www.c-sharpcorner.com/jobs/recent-jobs","IsActive":true,"CreatedDate":"2017-09-23T11:28:27.0912334"}]</script>
  </form> 
  <script src="http://csharpcorner.mindcrackerinc.netdna-cdn.com/js/article_details_new?v=M-XmcJuGH87dVFFZ97AwB19sqZeSxCJlWuxK6cfjo5U1"></script>  
 </body>
</html>