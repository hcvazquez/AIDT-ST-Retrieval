<!doctype html>
<html lang="en">
 <head> 
  <link rel="icon" type="image/vnd.microsoft.icon" href="/static/images/monorail.ico"> 
  <link rel="canonical" href="https://bugs.chromium.org/p/v8/issues/detail?id=90"> 
  <script type="text/javascript" nonce="fiqLA46OTWciP0g8XTzltVwQCNVfF6wh">
 
 var CS_env = {
 'absoluteBaseUrl': 'https://bugs.chromium.org',
 'app_version': '11736-19d10b1.404127087738382563',
 'token': '',
 
 'loggedInUserEmail':
 
 null
 ,
 'login_url': 'https://www.google.com/accounts/ServiceLogin?service\x3dah\x26passive\x3dtrue\x26continue\x3dhttps://appengine.google.com/_ah/conflogin%3Fcontinue%3Dhttps://bugs.chromium.org/p/v8/issues/detail%253Fid%253D90',
 'logout_url': 'https://bugs.chromium.org/_ah/logout?continue\x3dhttps://www.google.com/accounts/Logout%3Fcontinue%3Dhttps://appengine.google.com/_ah/logout%253Fcontinue%253Dhttps://bugs.chromium.org/p/v8/issues/detail%25253Fid%25253D90%26service%3Dah',
 'profileUrl':
 
 null
 ,
 'projectName': 'v8',
 };
 </script> 
  <title>
 90 - 
 V8 doesn't stable sort - 
 
 v8 -
 
 
 Monorail
 </title> 
  <meta http-equiv="Content-Type" content="text/html; charset=UTF-8"> 
  <meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1"> 
  <meta name="referrer" content="no-referrer"> 
  <meta name="ROBOTS" content="NOARCHIVE"> 
  <meta name="viewport" content="width=device-width, minimum-scale=1.0"> 
  <link type="text/css" rel="stylesheet" href="/static/css/ph_core.css?version=11736-19d10b1.404127087738382563"> 
  <link type="text/css" rel="stylesheet" href="/static/css/ph_mobile.css?version=11736-19d10b1.404127087738382563"> 
  <link type="text/css" rel="stylesheet" href="/static/css/ph_detail.css?version=11736-19d10b1.404127087738382563"> 
 </head> 
 <body class="t2 "> 
  <script type="text/javascript" nonce="fiqLA46OTWciP0g8XTzltVwQCNVfF6wh">
 function _go(url, newWindow) {
 if (newWindow)
 window.open(url, '_blank');
 else
 document.location = url;
 }
 function $(id) { return document.getElementById(id); }
 var loadQueue = [];
 function runOnLoad(fn) { loadQueue.push(fn); }
 window.onload = function() {
 for (var i = 0; i < loadQueue.length; i++)
 loadQueue[i]();
 delete loadQueue;
 };
</script> 
  <table id="monobar" width="100%" cellpadding="0" cellspacing="0"> 
   <tbody>
    <tr> 
     <th id="thumbnail_box"> <a href="http://www.v8project.org" target="_blank"> <img src="https://storage.googleapis.com/monorail-prod.appspot.com/15/attachments/68d883d2-7f8e-4a08-9365-5e4f0cc35c83-thumbnail?Expires=1505672502&amp;GoogleAccessId=monorail-prod%40appspot.gserviceaccount.com&amp;Signature=kt5aAHtPphpNeoo1uJbC2rVHB%2BmLcjgQG5TDgNRRCzfeAj701DwddMnPnIjZCV%2FNAa66eP40%2FQIKAyivIf1GnZyFVDgxTJsxc%2FPKnfSCJZZKdIlp6AlchCBl1vnhR%2B4UyLbxQEf5ccBcUwjVM6%2Bvj26wQtwvv9Mxktt3UZ%2BwbNQG86ERSykzKZ4ceBhdi4iUM1Vr5JosoboRyf7YMXPfH56ZrPbf7fQDEW7znwgHKNegfttmQ3q3cP7vvKrVhzedksLsbrSBsAweGLUNFTdvr3UeMLaocmZQdaxSZdrffDOdg%2FpRQ2t%2FWvetyzHOSkY0eZboJ8La3GzqmLD%2BJr7Y1g%3D%3D"> </a> </th> 
     <th class="toptabs padded"> <a href="/p/v8/" title="V8 JavaScript Engine" id="projects-dropdown">Project: v8 <small>?</small></a> <a href="/p/v8/issues/list" class="active">Issues</a> <a href="/p/v8/people/list" class="">People</a> <a href="/p/v8/adminIntro" class="">Development process</a> <a href="/p/v8/updates/list" class="">History</a> </th> 
     <td width="100%" id="userbar"> <span style="padding: 0 1em"> <a href="https://www.google.com/accounts/ServiceLogin?service=ah&amp;passive=true&amp;continue=https://appengine.google.com/_ah/conflogin%3Fcontinue%3Dhttps://bugs.chromium.org/p/v8/issues/detail%253Fid%253D90"><u>Sign in</u></a> </span> </td> 
    </tr> 
   </tbody>
  </table> 
  <script type="text/javascript" nonce="fiqLA46OTWciP0g8XTzltVwQCNVfF6wh">
runOnLoad(function() {
 if ($("projects-dropdown"))
 $("projects-dropdown").addEventListener("click", function(event) {
 event.preventDefault();
 });
 if ($("hotlists-dropdown"))
 $("hotlists-dropdown").addEventListener("click", function(event) {
 event.preventDefault();
 });
});
</script> 
  <div class="subt"> 
   <div class="issueDetail"> 
    <div class="isf"> 
     <span class="inIssueEntry" style="margin-right:.4em"> <a class="buttonify" href="https://www.google.com/accounts/ServiceLogin?service=ah&amp;passive=true&amp;continue=https://appengine.google.com/_ah/conflogin%3Fcontinue%3Dhttps://bugs.chromium.org/p/v8/issues/entryafterlogin">New issue</a> </span> 
     <span class="inIssueList" style="margin:0 .4em"> <label for="can">Search</label> 
      <form action="list" method="GET" style="display:inline"> 
       <select id="can" name="can" ignore-dirty> <option disabled>Search within:</option> <option value="1" title="All issues in the project">&nbsp;All issues</option> <option value="2" selected title="All issues except ones with a closed status">&nbsp;Open issues</option> <option value="6" title="[Open issues] status=New">&nbsp;New issues</option> <option value="7" title="[All issues] status=fixed,done">&nbsp;Issues to verify</option> </select> 
       <label for="searchq">for</label> 
       <span id="qq"><input type="text" size="38" id="searchq" name="q" value="" autocomplete="off" ignore-dirty></span> 
       <span id="search_colspec"><input type="hidden" name="colspec" value="ID Type Status Priority Owner Summary HW OS Component Stars"></span> 
       <input type="hidden" name="x" value="priority"> 
       <input type="hidden" name="y" value="owner"> 
       <input type="hidden" name="cells" value="ids"> 
       <input type="submit" value="Search"> 
      </form> </span> 
     <span class="inIssueAdvSearch" style="margin:0 .4em"> <a href="advsearch">Advanced search</a> </span> 
     <span class="inIssueSearchTips" style="margin:0 .4em"> <a href="searchtips">Search tips</a> </span> 
    </div> 
   </div> 
   <script type="text/javascript" nonce="fiqLA46OTWciP0g8XTzltVwQCNVfF6wh">
runOnLoad(function() {
 
 var oldScope = "2";
 function scopeChange() {
 
 }
 if ($("can"))
 $("can").addEventListener("change", scopeChange);
});
</script> 
  </div> 
  <table align="center" border="0" cellspacing="0" cellpadding="0" class="cue"> 
   <tbody>
    <tr>
     <td><span> <b>Note:</b> Color blocks (like <span class="availability_unsure" style="padding:0">?</span> or <span class="availability_never" style="padding:0">?</span>) mean that a user may not be available. Tooltip shows the reason. </span> </td>
    </tr> 
   </tbody>
  </table> 
  <script type="text/javascript" nonce="fiqLA46OTWciP0g8XTzltVwQCNVfF6wh">
runOnLoad(function() {
 var dismissLinks = document.querySelectorAll(".dismiss_cue");
 for (var i = 0; i < dismissLinks.length; ++i) {
 var dismissCue = dismissLinks[i];
 dismissCue.addEventListener("click", function(event) {
 _CS_dismissCue("availibility_msgs");
 if (this.getAttribute("href") === "#")
 event.preventDefault();
 });
 }
});
 </script> 
  <div id="maincol"> 
   <table id="alert-table" align="center" border="0" cellspacing="0" cellpadding="0" style="margin-bottom: 6px;display: none"> 
    <tbody>
     <tr>
      <td class="notice" id="notice"> </td>
     </tr> 
    </tbody>
   </table> 
   <div id="color_control" class="closed_colors"> 
    <table width="100%" cellpadding="0" cellspacing="0" border="0" class="issuepage" id="meta-container"> 
     <tbody class="collapse"> 
      <tr> 
       <td nowrap class="vt" style="width:12em; padding:0" rowspan="3" id="issuemeta"> 
        <div id="meta-float"> 
         <div class="h3 issuemetaheader"> 
          <a href="detail?id=90">Issue 90</a> 
         </div> 
         <div class="issuemetaheader">
           Starred by 47 users 
         </div> 
         <div id="issue_meta_details"> 
          <table cellspacing="0" cellpadding="0"> 
           <tbody>
            <tr>
             <th align="left" style="padding-right:.3em">Status:</th> 
             <td width="100%"> <span title="WorkingAsIntended = [Legacy] We decided to not take action on this issue">WorkingAsIntended</span> </td> 
            </tr> 
            <tr>
             <th align="left" class="vt">Owner:</th>
             <td> ---- </td> 
            </tr> 
            <tr>
             <th align="left" valign="top" style="padding-right:.3em">Closed:</th> 
             <td align="left" valign="top" width="100%"> Apr 2015 </td> 
            </tr> 
            <tr>
             <th class="vt" align="left">Cc:</th>
             <td> 
              <div class="userlink_avail" title="ssamanoori@chromium.org:
Email to this user bounced"> 
               <span class="availability_none">?</span> 
               <a href="/u/ssamanoori@chromium.org/">ssamanoori@chromium.org</a> 
              </div> 
              <div class="userlink_avail" title="adamk@chromium.org"> 
               <a href="/u/adamk@chromium.org/">adamk@chromium.org</a> 
              </div> 
              <div class="userlink_avail" title="arv@chromium.org:
User never visited"> 
               <span class="availability_never">?</span> 
               <a href="/u/arv@chromium.org/">arv@chromium.org</a> 
              </div> </td>
            </tr> 
            <tr>
             <th align="left" valign="top" title="" style="padding-right:.3em">HW:</th> 
             <td align="left" valign="top" width="100%"> ---- </td> 
            </tr> 
            <tr>
             <th align="left" valign="top" title="" style="padding-right:.3em">OS:</th> 
             <td align="left" valign="top" width="100%"> ---- </td> 
            </tr> 
            <tr>
             <th align="left" valign="top" title="" style="padding-right:.3em">Priority:</th> 
             <td align="left" valign="top" width="100%"> ---- </td> 
            </tr> 
            <tr>
             <th align="left" valign="top" title="" style="padding-right:.3em">Type:</th> 
             <td align="left" valign="top" width="100%"> ---- </td> 
            </tr> 
            <tr>
             <td colspan="2" class="widemeta"> </td>
            </tr> 
           </tbody>
          </table> 
          <div class="rel_issues widemeta"> 
           <br> 
           <span id="user-hotlists" style="display:none"> <b>Your hotlists:</b> 
            <div id="user-hotlists-list"> 
             <br> 
            </div> </span> 
          </div> 
          <br>
          <br> 
          <div style="white-space:nowrap">
           <a href="https://www.google.com/accounts/ServiceLogin?service=ah&amp;passive=true&amp;continue=https://appengine.google.com/_ah/conflogin%3Fcontinue%3Dhttps://bugs.chromium.org/p/v8/issues/detail%253Fid%253D90">Sign in</a> to add a comment
          </div> 
          <script type="text/javascript" nonce="fiqLA46OTWciP0g8XTzltVwQCNVfF6wh">
runOnLoad(function() {
 if ($("addacomment")) {
 $("addacomment").addEventListener("click", function(event) {
 _openIssueUpdateForm();
 event.preventDefault();
 });
 }
 
});
</script> 
         </div> 
        </div> </td> 
       <td width="90%" class="vt issueheader" style="border-right: 2px solid white"> <span class="h3" style="padding-left:4px">V8 doesn't stable sort</span> </td> 
       <td class="issueheader"> </td> 
      </tr> 
      <tr> 
       <td class="issueheader" style="padding-left:6px; border-right: 2px solid white"> <span class="role_label">Project Member</span> Reported by <a style="white-space: nowrap" href="/u/brettw@chromium.org/" title="brettw@chromium.org">brettw@chromium.org</a>, <span class="date" title="Wed Sep 24 22:22:59 2008 UTC"> Sep 24 2008 </span> </td> 
       <td align="center" nowrap class="issueheader"> <a href="https://bugs.chromium.org/p/v8/issues/list?cursor=v8%3A90&amp;q=">Back to list</a> </td> 
      </tr> 
      <tr> 
       <td class="vt issuedescription" width="100%" height="100%" id="cursorarea" colspan="2"> 
        <div class="cursor_off vt issuedescription" id="hc0"> 
         <div id="all-descriptions"> 
          <div id="d1"> 
           <pre class="issue_text" tabindex="1">
The WebKit test LayoutTests/fast/js/comparefn-sort-stability.html fails in 
Chrome using V8. The result is:
  FAIL arr[0] should be 2. Was 1.
  FAIL arr[1] should be 1. Was 2.
  ...

It uses === and I can get this to work by reordering the expected objects. 
Apparently SquirrelFish uses stable sorting and V8 and JSC don't. I'm told 
the spec doesn't require stable sorting, but I'm filing this bug to track 
it and any decision about it.
 </pre> 
          </div> 
         </div> 
        </div> 
        <div class=""> 
         <div class="cursor_off vt issuecomment" id="hc1"> 
          <div class="issuecommentheader"> 
           <span class="author"> <a name="c1" id="c_ts1222295468" href="/p/v8/issues/detail?id=90#c1">Comment 1</a> by <a style="white-space: nowrap" href="/u/brettw@chromium.org/" title="brettw@chromium.org">brettw@chromium.org</a></span>, 
           <span class="date" title="Wed Sep 24 22:31:08 2008 UTC"> Sep 24 2008 </span> 
          </div> 
          <div class="issuecommentbody" tabindex="0"> 
           <div style="float:right; margin-right:.3em; text-align:right" class="ichcommands"> 
            <span id="comment-action-loading-1" class="loading" style="display:none;">Processing</span> 
           </div> 
           <pre class="issue_text">
The relevant Mozilla bug on this issue is:
<a href="https://bugzilla.mozilla.org/show_bug.cgi?id=224128" title="" class="" rel="nofollow">https://bugzilla.mozilla.org/show_bug.cgi?id=224128</a>
</pre> 
          </div> 
         </div> 
        </div> 
        <div class=""> 
         <div class="cursor_off vt issuecomment" id="hc2"> 
          <div class="issuecommentheader"> 
           <span class="author"> <a name="c2" id="c_ts1222296435" href="/p/v8/issues/detail?id=90#c2">Comment 2</a> by <a style="white-space: nowrap" href="/u/brettw@chromium.org/" title="brettw@chromium.org">brettw@chromium.org</a></span>, 
           <span class="date" title="Wed Sep 24 22:47:15 2008 UTC"> Sep 24 2008 </span> 
          </div> 
          <div class="issuecommentbody" tabindex="0"> 
           <div style="float:right; margin-right:.3em; text-align:right" class="ichcommands"> 
            <span id="comment-action-loading-2" class="loading" style="display:none;">Processing</span> 
           </div> 
           <pre class="issue_text">
The Mozilla bug says they did it because IE is stable (I didn't verify this). If IE, 
Firefox, and soon Safari will all be stable, V8 should probably be stable.
</pre> 
          </div> 
         </div> 
        </div> 
        <div class=""> 
         <div class="cursor_off vt issuecomment" id="hc3"> 
          <div class="issuecommentheader"> 
           <span class="author"> <a name="c3" id="c_ts1222298171" href="/p/v8/issues/detail?id=90#c3">Comment 3</a> by <a style="white-space: nowrap" href="/u/erikkay@chromium.org/" title="erikkay@chromium.org">erikkay@chromium.org</a></span>, 
           <span class="date" title="Wed Sep 24 23:16:11 2008 UTC"> Sep 24 2008 </span> 
          </div> 
          <div class="issuecommentbody" tabindex="0"> 
           <div style="float:right; margin-right:.3em; text-align:right" class="ichcommands"> 
            <span id="comment-action-loading-3" class="loading" style="display:none;">Processing</span> 
           </div> 
           <pre class="issue_text">
There was some discussion about this earlier today on v8-dev.  The analysis there was 
that IE is *not* stable.
</pre> 
          </div> 
         </div> 
        </div> 
        <div class=""> 
         <div class="cursor_off vt issuecomment" id="hc4"> 
          <div class="issuecommentheader"> 
           <span class="author"> <a name="c4" id="c_ts1222446119" href="/p/v8/issues/detail?id=90#c4">Comment 4</a> by <a style="white-space: nowrap" href="/u/3150743867/" title="nicolas....@gmail.com">nicolas....@gmail.com</a></span>, 
           <span class="date" title="Fri Sep 26 16:21:59 2008 UTC"> Sep 26 2008 </span> 
          </div> 
          <div class="issuecommentbody" tabindex="0"> 
           <div style="float:right; margin-right:.3em; text-align:right" class="ichcommands"> 
            <span id="comment-action-loading-4" class="loading" style="display:none;">Processing</span> 
           </div> 
           <pre class="issue_text">
Leave it non-stable.

Some people in the Mozilla bugtracker wanted it stable so they could do two-pass
sorting to sort by two columns. Doing two-column sorting is possible without two
passes. Just write a comparison function like:
if (a.one == b.one) {
    return a.two &lt; b.two ? -1 : 1;
} else {
    return a.one &lt; b.one ? -1 : 1;
}
</pre> 
          </div> 
         </div> 
        </div> 
        <div class=""> 
         <div class="cursor_off vt issuecomment" id="hc5"> 
          <div class="issuecommentheader"> 
           <span class="author"> <a name="c5" id="c_ts1242712973" href="/p/v8/issues/detail?id=90#c5">Comment 5</a> by <a style="white-space: nowrap" href="/u/3112200856/" title="lasserei...@gmail.com">lasserei...@gmail.com</a></span>, 
           <span class="date" title="Tue May 19 06:02:53 2009 UTC"> May 19 2009 </span> 
          </div> 
          <div class="issuecommentbody" tabindex="0"> 
           <div style="float:right; margin-right:.3em; text-align:right" class="ichcommands"> 
            <span id="comment-action-loading-5" class="loading" style="display:none;">Processing</span> 
           </div> 
           <table class="updates"> 
            <tbody>
             <tr>
              <td class="box-inner"> <b>Status:</b> WorkingAsIntended<br> </td>
             </tr> 
            </tbody>
           </table> 
           <pre class="issue_text">
We'll keep it as-is.
</pre> 
          </div> 
         </div> 
        </div> 
        <div class=""> 
         <div class="cursor_off vt issuecomment" id="hc6"> 
          <div class="issuecommentheader"> 
           <span class="author"> <a name="c6" id="c_ts1250281271" href="/p/v8/issues/detail?id=90#c6">Comment 6</a> by <a style="white-space: nowrap" href="/u/2354372441/" title="erik.co...@gmail.com">erik.co...@gmail.com</a></span>, 
           <span class="date" title="Fri Aug 14 20:21:11 2009 UTC"> Aug 14 2009 </span> 
          </div> 
          <div class="issuecommentbody" tabindex="0"> 
           <div style="float:right; margin-right:.3em; text-align:right" class="ichcommands"> 
            <span id="comment-action-loading-6" class="loading" style="display:none;">Processing</span> 
           </div> 
           <pre class="issue_text">
<a href="/p/v8/issues/detail?id=426" title="sort(x).sort(y) vs. sort(x() || y())" class="closed_ref" rel="nofollow"> Issue 426 </a> has been merged into this issue.
</pre> 
          </div> 
         </div> 
        </div> 
        <div class=""> 
         <div class="cursor_off vt issuecomment" id="hc7"> 
          <div class="issuecommentheader"> 
           <span class="author"> <a name="c7" id="c_ts1252870718" href="/p/v8/issues/detail?id=90#c7">Comment 7</a> by <a style="white-space: nowrap" href="/u/jmittleman+legacy@google.com/" title="jmittleman+legacy@google.com">jmittleman+legacy@google.com</a></span>, 
           <span class="date" title="Sun Sep 13 19:38:38 2009 UTC"> Sep 13 2009 </span> 
          </div> 
          <div class="issuecommentbody" tabindex="0"> 
           <div style="float:right; margin-right:.3em; text-align:right" class="ichcommands"> 
            <span id="comment-action-loading-7" class="loading" style="display:none;">Processing</span> 
           </div> 
           <pre class="issue_text">
I was asked to update this bug.  I have observed that Array.sort is stable in IE6 and 
FF, but not in Chrome.  Here's a test case:

<a href="http://www.corp.google.com/~jmittleman/tests/stablesort.html" title="" class="" rel="nofollow">http://www.corp.google.com/~jmittleman/tests/stablesort.html</a>

It shows an alpha-sorted list of two-letter words.  Click on the list to sort it by 
second letter.  Click again to resort alphabetically.  In Chrome, the order of words 
ending in A (for example) is random.  In IE6 and FF, it is alphabetical.

</pre> 
          </div> 
         </div> 
        </div> 
        <div class=""> 
         <div class="cursor_off vt issuecomment" id="hc8"> 
          <div class="issuecommentheader"> 
           <span class="author"> <a name="c8" id="c_ts1252876824" href="/p/v8/issues/detail?id=90#c8">Comment 8</a> by <a style="white-space: nowrap" href="/u/3112200856/" title="lasserei...@gmail.com">lasserei...@gmail.com</a></span>, 
           <span class="date" title="Sun Sep 13 21:20:24 2009 UTC"> Sep 13 2009 </span> 
          </div> 
          <div class="issuecommentbody" tabindex="0"> 
           <div style="float:right; margin-right:.3em; text-align:right" class="ichcommands"> 
            <span id="comment-action-loading-8" class="loading" style="display:none;">Processing</span> 
           </div> 
           <pre class="issue_text">
A quick tests suggests that Safari's sort is also stable.
</pre> 
          </div> 
         </div> 
        </div> 
        <div class=""> 
         <div class="cursor_off vt issuecomment" id="hc9"> 
          <div class="issuecommentheader"> 
           <span class="author"> <a name="c9" id="c_ts1252877254" href="/p/v8/issues/detail?id=90#c9">Comment 9</a> by <a style="white-space: nowrap" href="/u/3150743867/" title="nicolas....@gmail.com">nicolas....@gmail.com</a></span>, 
           <span class="date" title="Sun Sep 13 21:27:34 2009 UTC"> Sep 13 2009 </span> 
          </div> 
          <div class="issuecommentbody" tabindex="0"> 
           <div style="float:right; margin-right:.3em; text-align:right" class="ichcommands"> 
            <span id="comment-action-loading-9" class="loading" style="display:none;">Processing</span> 
           </div> 
           <pre class="issue_text">
@jmittle: can you put that test case somewhere that non-Google-employees can 
access?
</pre> 
          </div> 
         </div> 
        </div> 
        <div class=""> 
         <div class="cursor_off vt issuecomment" id="hc10"> 
          <div class="issuecommentheader"> 
           <span class="author"> <a name="c10" id="c_ts1279175473" href="/p/v8/issues/detail?id=90#c10">Comment 10</a> by <a style="white-space: nowrap" href="/u/ager@chromium.org/" title="ager@chromium.org">ager@chromium.org</a></span>, 
           <span class="date" title="Thu Jul 15 06:31:13 2010 UTC"> Jul 15 2010 </span> 
          </div> 
          <div class="issuecommentbody" tabindex="0"> 
           <div style="float:right; margin-right:.3em; text-align:right" class="ichcommands"> 
            <span id="comment-action-loading-10" class="loading" style="display:none;">Processing</span> 
           </div> 
           <pre class="issue_text">
<a href="/p/v8/issues/detail?id=779" title="javascript Array.sort() bug" class="closed_ref" rel="nofollow"> Issue 779 </a> has been merged into this issue.
</pre> 
          </div> 
         </div> 
        </div> 
        <div class=""> 
         <div class="cursor_off vt issuecomment" id="hc11"> 
          <div class="issuecommentheader"> 
           <span class="author"> <a name="c11" id="c_ts1279536845" href="/p/v8/issues/detail?id=90#c11">Comment 11</a> by <a style="white-space: nowrap" href="/u/740879872/" title="mark11b...@gmail.com">mark11b...@gmail.com</a></span>, 
           <span class="date" title="Mon Jul 19 10:54:05 2010 UTC"> Jul 19 2010 </span> 
          </div> 
          <div class="issuecommentbody" tabindex="0"> 
           <div style="float:right; margin-right:.3em; text-align:right" class="ichcommands"> 
            <span id="comment-action-loading-11" class="loading" style="display:none;">Processing</span> 
           </div> 
           <pre class="issue_text">
In V8 2.3.0 (possibly earlier) sort seems to be stable. Is this by accident or on purpose?


node&gt; ["Foo", "Bar"].sort(function(){ return 0; });
[ 'Foo', 'Bar' ]

(I ran this in Node v0.1.101 which uses v2.3.0).
</pre> 
          </div> 
         </div> 
        </div> 
        <div class=""> 
         <div class="cursor_off vt issuecomment" id="hc12"> 
          <div class="issuecommentheader"> 
           <span class="author"> <a name="c12" id="c_ts1279592635" href="/p/v8/issues/detail?id=90#c12">Comment 12</a> by <a style="white-space: nowrap" href="/u/3112200856/" title="lasserei...@gmail.com">lasserei...@gmail.com</a></span>, 
           <span class="date" title="Tue Jul 20 02:23:55 2010 UTC"> Jul 20 2010 </span> 
          </div> 
          <div class="issuecommentbody" tabindex="0"> 
           <div style="float:right; margin-right:.3em; text-align:right" class="ichcommands"> 
            <span id="comment-action-loading-12" class="loading" style="display:none;">Processing</span> 
           </div> 
           <pre class="issue_text">
Small arrays are sorted using a simpler algorithm which happens to be stable.
You need a larger array to trigger the quicksort algorithm which is non-stable.
</pre> 
          </div> 
         </div> 
        </div> 
        <div class=""> 
         <div class="cursor_off vt issuecomment" id="hc13"> 
          <div class="issuecommentheader"> 
           <span class="author"> <a name="c13" id="c_ts1315706363" href="/p/v8/issues/detail?id=90#c13">Comment 13</a> by <a style="white-space: nowrap" href="/u/2344617655/" title="macd...@gmail.com">macd...@gmail.com</a></span>, 
           <span class="date" title="Sun Sep 11 01:59:23 2011 UTC"> Sep 11 2011 </span> 
          </div> 
          <div class="issuecommentbody" tabindex="0"> 
           <div style="float:right; margin-right:.3em; text-align:right" class="ichcommands"> 
            <span id="comment-action-loading-13" class="loading" style="display:none;">Processing</span> 
           </div> 
           <pre class="issue_text">
Correct.  IE, FF, Safari (JSC) are all stable.  V8 is the odd man out.
</pre> 
          </div> 
         </div> 
        </div> 
        <div class=""> 
         <div class="cursor_off vt issuecomment" id="hc14"> 
          <div class="issuecommentheader"> 
           <span class="author"> <a name="c14" id="c_ts1315707390" href="/p/v8/issues/detail?id=90#c14">Comment 14</a> by <a style="white-space: nowrap" href="/u/abarth@chromium.org/" title="abarth@chromium.org">abarth@chromium.org</a></span>, 
           <span class="date" title="Sun Sep 11 02:16:30 2011 UTC"> Sep 11 2011 </span> 
          </div> 
          <div class="issuecommentbody" tabindex="0"> 
           <div style="float:right; margin-right:.3em; text-align:right" class="ichcommands"> 
            <span id="comment-action-loading-14" class="loading" style="display:none;">Processing</span> 
           </div> 
           <pre class="issue_text">
It seems like we should re-visit this bug now that new information has come to light.
</pre> 
          </div> 
         </div> 
        </div> 
        <div class=""> 
         <div class="cursor_off vt issuecomment" id="hc15"> 
          <div class="issuecommentheader"> 
           <span class="author"> <a name="c15" id="c_ts1321897302" href="/p/v8/issues/detail?id=90#c15">Comment 15</a> by <a style="white-space: nowrap" href="/u/2644839012/" title="qfo...@gmail.com">qfo...@gmail.com</a></span>, 
           <span class="date" title="Mon Nov 21 17:41:42 2011 UTC"> Nov 21 2011 </span> 
          </div> 
          <div class="issuecommentbody" tabindex="0"> 
           <div style="float:right; margin-right:.3em; text-align:right" class="ichcommands"> 
            <span id="comment-action-loading-15" class="loading" style="display:none;">Processing</span> 
           </div> 
           <pre class="issue_text">
Are you kidding me?

I think it's absolutely unacceptable that sorting is unstable merely due to the size of the array. I have no problem with v8 switching to a different algorithm internally to take on different dimensions of arrays, but I do if that means different results in the generic sense. Especially since there's absolutely no need for sorting to be unstable.

If it's not stable, sacrifice speed to use a slightly slower algorithm that _is_ stable. Developers will assume that large arrays are slower to sort. They will not expect that to cause sorting to fail.
</pre> 
          </div> 
         </div> 
        </div> 
        <div class=""> 
         <div class="cursor_off vt issuecomment" id="hc16"> 
          <div class="issuecommentheader"> 
           <span class="author"> <a name="c16" id="c_ts1321898764" href="/p/v8/issues/detail?id=90#c16">Comment 16</a> by <a style="white-space: nowrap" href="/u/yangguo@chromium.org/" title="yangguo@chromium.org">yangguo@chromium.org</a></span>, 
           <span class="date" title="Mon Nov 21 18:06:04 2011 UTC"> Nov 21 2011 </span> 
          </div> 
          <div class="issuecommentbody" tabindex="0"> 
           <div style="float:right; margin-right:.3em; text-align:right" class="ichcommands"> 
            <span id="comment-action-loading-16" class="loading" style="display:none;">Processing</span> 
           </div> 
           <pre class="issue_text">
@comment #15:
As you can see, this issue is not a new one. As per ECMA-262 spec 15.4.4.11 (Array.prototype.sort), "The sort is not necessarily stable". Relying on something explicitly not required by the spec is risky to begin with. For the use case of sorting a table with multiple columns there is the way of using a custom compare function.

That being said, we certainly are reconsidering how sorting should be implemented.
</pre> 
          </div> 
         </div> 
        </div> 
        <div class=""> 
         <div class="cursor_off vt issuecomment" id="hc17"> 
          <div class="issuecommentheader"> 
           <span class="author"> <a name="c17" id="c_ts1321904718" href="/p/v8/issues/detail?id=90#c17">Comment 17</a> by <a style="white-space: nowrap" href="/u/3625076096/" title="seth.laf...@ridemission.com">seth.laf...@ridemission.com</a></span>, 
           <span class="date" title="Mon Nov 21 19:45:18 2011 UTC"> Nov 21 2011 </span> 
          </div> 
          <div class="issuecommentbody" tabindex="0"> 
           <div style="float:right; margin-right:.3em; text-align:right" class="ichcommands"> 
            <span id="comment-action-loading-17" class="loading" style="display:none;">Processing</span> 
           </div> 
           <pre class="issue_text">
I think the argument being made is that having sort be stable for small arrays and unstable for large arrays is unnecessarily confusing.  It violates the principle of least surprise.  I think using an unstable sort for small arrays as well as large would be better than what we have now.

That said, I'd argue for switching to a stable sort.  There are certainly cases where an unstable sort is not suitable.  Doing a stable sort requires either implementing a stable sort in JS (inefficient) or creating a hacky wrapper (inefficient):
  function stableSort(array, compare) {
    var array2 = array.map(function(v, i) { return { i: i, v: v } });
    array2.sort(function(a, b) {
      var r = compare(a.v, b.v);
      return r == 0 ? a.i - b.i : r;
    });
    return array2.map(function(v) { return v.v });
  }

I can see the value in avoiding making people rely on unspecified behavior, but I think given that all of the other major browsers implement a stable sort and it could present a useful major speedup for code which can assume particular behavior (node.js, browser-sniffing client code), it would be better to switch to a stable sort.
</pre> 
          </div> 
         </div> 
        </div> 
        <div class=""> 
         <div class="cursor_off vt issuecomment" id="hc18"> 
          <div class="issuecommentheader"> 
           <span class="author"> <a name="c18" id="c_ts1321907782" href="/p/v8/issues/detail?id=90#c18">Comment 18</a> by <a style="white-space: nowrap" href="/u/3625076096/" title="seth.laf...@ridemission.com">seth.laf...@ridemission.com</a></span>, 
           <span class="date" title="Mon Nov 21 20:36:22 2011 UTC"> Nov 21 2011 </span> 
          </div> 
          <div class="issuecommentbody" tabindex="0"> 
           <div style="float:right; margin-right:.3em; text-align:right" class="ichcommands"> 
            <span id="comment-action-loading-18" class="loading" style="display:none;">Processing</span> 
           </div> 
           <pre class="issue_text">
For what it's worth, I did a few benchmarks:
  <a href="http://jsperf.com/stable-sort" title="" class="" rel="nofollow">http://jsperf.com/stable-sort</a>
Clearly v8 should switch to whatever sorting algorithm Safari is using - it appears to be 6x faster!
</pre> 
          </div> 
         </div> 
        </div> 
        <div class=""> 
         <div class="cursor_off vt issuecomment" id="hc19"> 
          <div class="issuecommentheader"> 
           <span class="author"> <a name="c19" id="c_ts1321950974" href="/p/v8/issues/detail?id=90#c19">Comment 19</a> by <a style="white-space: nowrap" href="/u/2354372441/" title="erik.co...@gmail.com">erik.co...@gmail.com</a></span>, 
           <span class="date" title="Tue Nov 22 08:36:14 2011 UTC"> Nov 22 2011 </span> 
          </div> 
          <div class="issuecommentbody" tabindex="0"> 
           <div style="float:right; margin-right:.3em; text-align:right" class="ichcommands"> 
            <span id="comment-action-loading-19" class="loading" style="display:none;">Processing</span> 
           </div> 
           <pre class="issue_text">
Array.prototype.sort is always unstable.  You can get lucky with an unstable sort and it can coincidentally leave the results in the same order as an unstable sort would.  It so happens you always get lucky for small arrays.  This does not mean the sort is stable.

As can be seen here <a href="http://en.wikipedia.org/wiki/Sorting_algorithm" title="" class="" rel="nofollow">http://en.wikipedia.org/wiki/Sorting_algorithm</a> there is no sorting algorithm that is O(nlogn) in time, O(1) in space and is also stable.  You have to compromise when choosing your algorithm.  Given that you can get a stable sort using a map (see Seth's jsperf example) when you need it there is no reason to use a worse algorithm in the common case where the sort does not need to be stable.

I made a new version of Seth's test that fixed a small typo (the unstable random test was using the ordered array).

I filed a separate issue on the performance:  <a href="http://code.google.com/p/v8/issues/detail?id=1838" title="" class="" rel="nofollow">http://code.google.com/p/v8/issues/detail?id=1838</a>


</pre> 
          </div> 
         </div> 
        </div> 
        <div class=""> 
         <div class="cursor_off vt issuecomment" id="hc20"> 
          <div class="issuecommentheader"> 
           <span class="author"> <a name="c20" id="c_ts1321951014" href="/p/v8/issues/detail?id=90#c20">Comment 20</a> by <a style="white-space: nowrap" href="/u/2354372441/" title="erik.co...@gmail.com">erik.co...@gmail.com</a></span>, 
           <span class="date" title="Tue Nov 22 08:36:54 2011 UTC"> Nov 22 2011 </span> 
          </div> 
          <div class="issuecommentbody" tabindex="0"> 
           <div style="float:right; margin-right:.3em; text-align:right" class="ichcommands"> 
            <span id="comment-action-loading-20" class="loading" style="display:none;">Processing</span> 
           </div> 
           <pre class="issue_text">
"as an unstable sort would" should of course read "as a stable sort would" in the above comment.
</pre> 
          </div> 
         </div> 
        </div> 
        <div class=""> 
         <div class="cursor_off vt issuecomment" id="hc21"> 
          <div class="issuecommentheader"> 
           <span class="author"> <a name="c21" id="c_ts1321986161" href="/p/v8/issues/detail?id=90#c21">Comment 21</a> by <a style="white-space: nowrap" href="/u/3625076096/" title="seth.laf...@ridemission.com">seth.laf...@ridemission.com</a></span>, 
           <span class="date" title="Tue Nov 22 18:22:41 2011 UTC"> Nov 22 2011 </span> 
          </div> 
          <div class="issuecommentbody" tabindex="0"> 
           <div style="float:right; margin-right:.3em; text-align:right" class="ichcommands"> 
            <span id="comment-action-loading-21" class="loading" style="display:none;">Processing</span> 
           </div> 
           <pre class="issue_text">
"It so happens you always get lucky for small arrays.  This does not mean the sort is stable."

Um, actually that does mean the sort is stable for small arrays.  If you always get lucky, it's not luck.

I decided to find out which browsers do what with sort, since otherwise we're just operating on speculation.  See: <a href="http://ofb.net/~sethml/is-sort-stable.html" title="" class="" rel="nofollow">http://ofb.net/~sethml/is-sort-stable.html</a>

Sort is stable: Firefox 8.0, Safari 5.1.1, IE 6, 7, 8.
Sort is unstable: Opera 11.52, IE 9, Android 2.3 browser.
Sort is stable for length &lt;= 10, unstable for length &gt; 10: Chrome 15..17.

I guess stable sorts are less prevalent than I thought.

I'm done obsessing over this.  I think to avoid misleading people it'd be good to make Chrome's sort consistently unstable or stable.
</pre> 
          </div> 
         </div> 
        </div> 
        <div class=""> 
         <div class="cursor_off vt issuecomment" id="hc22"> 
          <div class="issuecommentheader"> 
           <span class="author"> <a name="c22" id="c_ts1325244839" href="/p/v8/issues/detail?id=90#c22">Comment 22</a> by <a style="white-space: nowrap" href="/u/vegorov@chromium.org/" title="vegorov@chromium.org">vegorov@chromium.org</a></span>, 
           <span class="date" title="Fri Dec 30 11:33:59 2011 UTC"> Dec 30 2011 </span> 
          </div> 
          <div class="issuecommentbody" tabindex="0"> 
           <div style="float:right; margin-right:.3em; text-align:right" class="ichcommands"> 
            <span id="comment-action-loading-22" class="loading" style="display:none;">Processing</span> 
           </div> 
           <pre class="issue_text">
<a href="/p/v8/issues/detail?id=1882" title="Array sorting doesn't work properly" class="closed_ref" rel="nofollow"> Issue 1882 </a> has been merged into this issue.
</pre> 
          </div> 
         </div> 
        </div> 
        <div class=""> 
         <div class="cursor_off vt issuecomment" id="hc23"> 
          <div class="issuecommentheader"> 
           <span class="author"> <a name="c23" id="c_ts1325294740" href="/p/v8/issues/detail?id=90#c23">Comment 23</a> by <a style="white-space: nowrap" href="/u/3239909648/" title="paulpmi...@gmail.com">paulpmi...@gmail.com</a></span>, 
           <span class="date" title="Sat Dec 31 01:25:40 2011 UTC"> Dec 31 2011 </span> 
          </div> 
          <div class="issuecommentbody" tabindex="0"> 
           <div style="float:right; margin-right:.3em; text-align:right" class="ichcommands"> 
            <span id="comment-action-loading-23" class="loading" style="display:none;">Processing</span> 
           </div> 
           <pre class="issue_text">
I don't care if it's stable or not, but IMO it should use one tactics for both small and big arrays. The "feature" confused me much — all tests have been passing normally, I didn't even thought it would behave differently on 11-elem array.
</pre> 
          </div> 
         </div> 
        </div> 
        <div class=""> 
         <div class="cursor_off vt issuecomment" id="hc24"> 
          <div class="issuecommentheader"> 
           <span class="author"> <a name="c24" id="c_ts1325381855" href="/p/v8/issues/detail?id=90#c24">Comment 24</a> by <a style="white-space: nowrap" href="/u/lrn@chromium.org/" title="lrn@chromium.org">lrn@chromium.org</a></span>, 
           <span class="date" title="Sun Jan  1 01:37:35 2012 UTC"> Jan 1 2012 </span> 
          </div> 
          <div class="issuecommentbody" tabindex="0"> 
           <div style="float:right; margin-right:.3em; text-align:right" class="ichcommands"> 
            <span id="comment-action-loading-24" class="loading" style="display:none;">Processing</span> 
           </div> 
           <pre class="issue_text">
The algorithm used is Quicksort, which splits the array into smaller pieces and sorts those recursively, but using Insertion Sort when recursing on small arrays. This is a common implementation of Quicksort, and is used because Insertion Sort has a lower overhead but a worse complexity. I.e., because it's faster than using Quicksort all the way down.
That means that small arrays are sorted using Insertion Sort, but Insertion Sort is also several times during sorting of larger arrays, on smaller element groups.

I.e., it's not because we single out small arrays for special treatment, it just happens that the base case of the Quicksort is also used for arrays that are so short that we don't need to split them at all.

</pre> 
          </div> 
         </div> 
        </div> 
        <div class=""> 
         <div class="cursor_off vt issuecomment" id="hc25"> 
          <div class="issuecommentheader"> 
           <span class="author"> <a name="c25" id="c_ts1355342594" href="/p/v8/issues/detail?id=90#c25">Comment 25</a> by <a style="white-space: nowrap" href="/u/2556057913/" title="jmsa...@gmail.com">jmsa...@gmail.com</a></span>, 
           <span class="date" title="Wed Dec 12 20:03:14 2012 UTC"> Dec 12 2012 </span> 
          </div> 
          <div class="issuecommentbody" tabindex="0"> 
           <div style="float:right; margin-right:.3em; text-align:right" class="ichcommands"> 
            <span id="comment-action-loading-25" class="loading" style="display:none;">Processing</span> 
           </div> 
           <pre class="issue_text">
so if someone wants a browser-independent stable sort then they're out of luck + have to write their own or use someone's Javascript implementation? (which is likely to be much less efficient than a builtin implementation)

Any chance Chrome could provide a stable sort algorithm in whatever implementation-dependent portion of the javascript namespace is appropriate?
</pre> 
          </div> 
         </div> 
        </div> 
        <div class=""> 
         <div class="cursor_off vt issuecomment" id="hc26"> 
          <div class="issuecommentheader"> 
           <span class="author"> <a name="c26" id="c_ts1355343436" href="/p/v8/issues/detail?id=90#c26">Comment 26</a> by <a style="white-space: nowrap" href="/u/3150743867/" title="nicolas....@gmail.com">nicolas....@gmail.com</a></span>, 
           <span class="date" title="Wed Dec 12 20:17:16 2012 UTC"> Dec 12 2012 </span> 
          </div> 
          <div class="issuecommentbody" tabindex="0"> 
           <div style="float:right; margin-right:.3em; text-align:right" class="ichcommands"> 
            <span id="comment-action-loading-26" class="loading" style="display:none;">Processing</span> 
           </div> 
           <pre class="issue_text">
Chrome changes won't help, since Opera and IE9 have unstable sort too. This invalidates the argument of "Chrome's sort should be stable because everybody else's is" that other people mentioned before.

The spec doesn't guarantee stability; don't rely on it. If you want it 'stable', pass a comparison function that never says two elements are equal.
</pre> 
          </div> 
         </div> 
        </div> 
        <div class=""> 
         <div class="cursor_off vt issuecomment" id="hc27"> 
          <div class="issuecommentheader"> 
           <span class="author"> <a name="c27" id="c_ts1355400653" href="/p/v8/issues/detail?id=90#c27">Comment 27</a> by <a style="white-space: nowrap" href="/u/erikcorry@google.com/" title="erikcorry@google.com">erikcorry@google.com</a></span>, 
           <span class="date" title="Thu Dec 13 12:10:53 2012 UTC"> Dec 13 2012 </span> 
          </div> 
          <div class="issuecommentbody" tabindex="0"> 
           <div style="float:right; margin-right:.3em; text-align:right" class="ichcommands"> 
            <span id="comment-action-loading-27" class="loading" style="display:none;">Processing</span> 
           </div> 
           <pre class="issue_text">
The built in implementation is not going to be hugely faster than one you write yourself.  The built in one is written in JavaScript, after all.  Of course there is a cost to being stable.  See <a href="http://jsperf.com/stable-sort/2" title="" class="" rel="nofollow">http://jsperf.com/stable-sort/2</a>

If you want a stable sort in the platform, you should lobby the EcmaScript standardization committee to add it to the standard library.  Then, whenever IE11 is obsolete you will have it available on the web platform.  V8 does not normally add stuff that is not part of the ECMAScript standard.
</pre> 
          </div> 
         </div> 
        </div> 
        <div class=""> 
         <div class="cursor_off vt issuecomment" id="hc28"> 
          <div class="issuecommentheader"> 
           <span class="author"> <a name="c28" id="c_ts1371025461" href="/p/v8/issues/detail?id=90#c28">Comment 28</a> by <a style="white-space: nowrap" href="/u/4055399613/" title="cesiu...@gmail.com">cesiu...@gmail.com</a></span>, 
           <span class="date" title="Wed Jun 12 08:24:21 2013 UTC"> Jun 12 2013 </span> 
          </div> 
          <div class="issuecommentbody" tabindex="0"> 
           <div style="float:right; margin-right:.3em; text-align:right" class="ichcommands"> 
            <span id="comment-action-loading-28" class="loading" style="display:none;">Processing</span> 
           </div> 
           <pre class="issue_text">
The sort is annoying because it takes a sorted array and resorts it in a different order.  When playing Lord of Ultima and opening a Command Overview window and sorting on troop strength, the game redisplays the sorted arrays every second.  Because the sort is unstable, the rows constantly jump around.  Certainly the LoU developers can fix the problem by using a custom sort and sub-sorting on an internal unique identifier field.  But since they won't do that because it isn't a problem on firefox or IE, it would be nice if Chrome would provide a better sort.

Note that a sorted array can be sorted in O(N) time instead of O(NlogN) time.  So the performance of Chrome is going to suck for this case as well.
</pre> 
          </div> 
         </div> 
        </div> 
        <div class=""> 
         <div class="cursor_off vt issuecomment" id="hc29"> 
          <div class="issuecommentheader"> 
           <span class="author"> <a name="c29" id="c_ts1371030678" href="/p/v8/issues/detail?id=90#c29">Comment 29</a> by <a style="white-space: nowrap" href="/u/1932461552/" title="j...@gmx.ch">j...@gmx.ch</a></span>, 
           <span class="date" title="Wed Jun 12 09:51:18 2013 UTC"> Jun 12 2013 </span> 
          </div> 
          <div class="issuecommentbody" tabindex="0"> 
           <div style="float:right; margin-right:.3em; text-align:right" class="ichcommands"> 
            <span id="comment-action-loading-29" class="loading" style="display:none;">Processing</span> 
           </div> 
           <pre class="issue_text">
Can someone maybe disable comments on this issue?  It's been closed in 2009 with WorkingAsIntended.  Which is absolutely correct.

Even if v8 would implement a stable sort, it wouldn't change anything, since developers still couldn't rely on it, because -- as demonstrated -- some other JavaScript engines still don't do the same.  And clearly the specs don't demand a stable sort.  So v8 is not broken.

Anyone's software that relies on a stable sort *IS BROKEN* and needs to be fixed.  Please stop posting about your particular website or game that would benefit from changing v8's sort and contact those developers instead, so they get a chance at fixing their broken software.
</pre> 
          </div> 
         </div> 
        </div> 
        <div class=""> 
         <div class="cursor_off vt issuecomment" id="hc30"> 
          <div class="issuecommentheader"> 
           <span class="author"> <a name="c30" id="c_ts1371032148" href="/p/v8/issues/detail?id=90#c30">Comment 30</a> by <a style="white-space: nowrap" href="/u/4055399613/" title="cesiu...@gmail.com">cesiu...@gmail.com</a></span>, 
           <span class="date" title="Wed Jun 12 10:15:48 2013 UTC"> Jun 12 2013 </span> 
          </div> 
          <div class="issuecommentbody" tabindex="0"> 
           <div style="float:right; margin-right:.3em; text-align:right" class="ichcommands"> 
            <span id="comment-action-loading-30" class="loading" style="display:none;">Processing</span> 
           </div> 
           <pre class="issue_text">
Other developers have been contacted.   Chrome should make it easy for people to use software on chrome instead of turning people away to use other browsers.  Developers frequently do not fix their software.  Chrome looks bad when software works fine on firefox and IE but cannot be used on Chrome.

Note that I raised two new points that were not previously raised.  I raised a performance issue: the sorting of a sorted array is likely to have poor performance, and I raised the issue that sort(sort(A)) != sort(A).

Not listening to the community seems unreasonable.  Disabling comments here will simply force people to create new bugs that need to be marked duplicates of this bug.  Responding to the specific issues raised by the community would be a more mature approach.
</pre> 
          </div> 
         </div> 
        </div> 
        <div class=""> 
         <div class="cursor_off vt issuecomment" id="hc31"> 
          <div class="issuecommentheader"> 
           <span class="author"> <a name="c31" id="c_ts1371036528" href="/p/v8/issues/detail?id=90#c31">Comment 31</a> by <a style="white-space: nowrap" href="/u/1932461552/" title="j...@gmx.ch">j...@gmx.ch</a></span>, 
           <span class="date" title="Wed Jun 12 11:28:48 2013 UTC"> Jun 12 2013 </span> 
          </div> 
          <div class="issuecommentbody" tabindex="0"> 
           <div style="float:right; margin-right:.3em; text-align:right" class="ichcommands"> 
            <span id="comment-action-loading-31" class="loading" style="display:none;">Processing</span> 
           </div> 
           <pre class="issue_text">
There's simply no way to make everyone happy and I believe v8 made a good decision about this.  The v8 developers aren't ignoring the community: Think of all the software developers that *aren't* complaining, because sort()'s performance doesn't suck.  Their opinions count too, right?  A decision had to be made it's been made in favor of performance.  Again, you can't please everyone.  A lot of people are pleased, though.  v8 isn't here to scratch everyone's itch.

sort((sort(A)) != sort(A) is not very convenient, I agree, but it's something you'll have to expect when dealing with an unstable sort.

Chrome doesn't look bad if it has unstable sort.  After all IE9's and Opera's sort are unstable as well.  Software developers that can't code are the ones looking bad.

It's been said already and I'll say it again: Use your own sorting algorithm.  There's absolutely nothing wrong with that.
</pre> 
          </div> 
         </div> 
        </div> 
        <div class=""> 
         <div class="cursor_off vt issuecomment" id="hc32"> 
          <div class="issuecommentheader"> 
           <span class="author"> <a name="c32" id="c_ts1371053381" href="/p/v8/issues/detail?id=90#c32">Comment 32</a> by <a style="white-space: nowrap" href="/u/4055399613/" title="cesiu...@gmail.com">cesiu...@gmail.com</a></span>, 
           <span class="date" title="Wed Jun 12 16:09:41 2013 UTC"> Jun 12 2013 </span> 
          </div> 
          <div class="issuecommentbody" tabindex="0"> 
           <div style="float:right; margin-right:.3em; text-align:right" class="ichcommands"> 
            <span id="comment-action-loading-32" class="loading" style="display:none;">Processing</span> 
           </div> 
           <pre class="issue_text">
The opinions of people who don't complain only count if you poll them.

If the decision was made in favor of performance, then there is an implementation bug.  Sorted and near sorted inputs are common.  Moving data around when it doesn't need to be moved is not the high performance implementation.  If we can't have a stable sort, let's at least make sure that we don't gain performance if we modify the algorithm so that sort(sort(A)) == sort(A).
</pre> 
          </div> 
         </div> 
        </div> 
        <div class=""> 
         <div class="cursor_off vt issuecomment" id="hc33"> 
          <div class="issuecommentheader"> 
           <span class="author"> <a name="c33" id="c_ts1371056677" href="/p/v8/issues/detail?id=90#c33">Comment 33</a> by <a style="white-space: nowrap" href="/u/eseidel@chromium.org/" title="eseidel@chromium.org">eseidel@chromium.org</a></span>, 
           <span class="date" title="Wed Jun 12 17:04:37 2013 UTC"> Jun 12 2013 </span> 
          </div> 
          <div class="issuecommentbody" tabindex="0"> 
           <div style="float:right; margin-right:.3em; text-align:right" class="ichcommands"> 
            <span id="comment-action-loading-33" class="loading" style="display:none;">Processing</span> 
           </div> 
           <pre class="issue_text">
Complaining on this bug I suspect is only going to result in it being closed for comments. :)  (Not my decision, just speculating.)

The original issue tracked by this bug has long since been resolved.  Note that:
<a href="http://trac.webkit.org/export/151505/trunk/LayoutTests/fast/js/comparefn-sort-stability.html" title="" class="" rel="nofollow">http://trac.webkit.org/export/151505/trunk/LayoutTests/fast/js/comparefn-sort-stability.html</a>
now PASSes in Chrome.

As noted in Comment 12, small array sorts are stable.  Only large array sorts are unstable in v8 (or at least were last I knew).

It's possible that the compatibility landscape has changed since this bug was originally filed.

I suspect that *if* all other modern browsers (Firefox, Safari, IE 10) use a stable sort already for large arrays there is an argument that v8 may need to do so for compatibility.  It's not clear in this bug if that's the case.  Instead of adding additional "me too" comments, I suspect it's more useful for someone to write (or find) a comprehensive test of sort stability (for various array sizes) and run it against other modern browsers and report the results.

Since the ECMAScript/JavaScript spec does not require Array.sort to be stable, there is no need for v8's sort to be stable *unless* web compatibility dictates otherwise.  So long as there is at least one other major browser with an unstable sort, I see no reason for v8 to change Array.sort to be stable.  I would personally like Array.sort to be stable or at least for JavaScript to provide an optionally stable sort (as I've run into this bug writing web apps in the past)  But that's a personal preference, not my professional judgement.
</pre> 
          </div> 
         </div> 
        </div> 
        <div class=""> 
         <div class="cursor_off vt issuecomment" id="hc34"> 
          <div class="issuecommentheader"> 
           <span class="author"> <a name="c34" id="c_ts1371065294" href="/p/v8/issues/detail?id=90#c34">Comment 34</a> by <a style="white-space: nowrap" href="/u/4055399613/" title="cesiu...@gmail.com">cesiu...@gmail.com</a></span>, 
           <span class="date" title="Wed Jun 12 19:28:14 2013 UTC"> Jun 12 2013 </span> 
          </div> 
          <div class="issuecommentbody" tabindex="0"> 
           <div style="float:right; margin-right:.3em; text-align:right" class="ichcommands"> 
            <span id="comment-action-loading-34" class="loading" style="display:none;">Processing</span> 
           </div> 
           <pre class="issue_text">
Clarification:  My comment #28 is *not* a "me too" comment.  I specifically included two additional points not previously mentioned relevant to the discussion.
</pre> 
          </div> 
         </div> 
        </div> 
        <div class=""> 
         <div class="cursor_off vt issuecomment" id="hc35"> 
          <div class="issuecommentheader"> 
           <span class="author"> <a name="c35" id="c_ts1371070643" href="/p/v8/issues/detail?id=90#c35">Comment 35</a> by <a style="white-space: nowrap" href="/u/yangguo@chromium.org/" title="yangguo@chromium.org">yangguo@chromium.org</a></span>, 
           <span class="date" title="Wed Jun 12 20:57:23 2013 UTC"> Jun 12 2013 </span> 
          </div> 
          <div class="issuecommentbody" tabindex="0"> 
           <div style="float:right; margin-right:.3em; text-align:right" class="ichcommands"> 
            <span id="comment-action-loading-35" class="loading" style="display:none;">Processing</span> 
           </div> 
           <pre class="issue_text">
In any case, V8 is completely spec compliant on this issue. It implements the spec as performant as possible while maintaining spec compliance. For additional requirements, it's not hard to add your own implementations. Additional javascript libraries exist like sand on the beach as well.

If you want to argue that the specification is incomplete, please involve yourself with the ECMA standard body, for example by posting to es-discuss (<a href="https://mail.mozilla.org/listinfo/es-discuss" title="" class="" rel="nofollow">https://mail.mozilla.org/listinfo/es-discuss</a>). Maybe you can convince the committee to add stable sort the next revision of the specification.

Arguing that moving elements indicates that the algorithm is less performant is a fallacy. Additionally, the average runtime in big-O notation may not even matter. You also want to consider worst case behavior, memory requirements, and fixed overhead. For example, we use insertion sort for arrays below a certain size because it runs faster even at O(n^2).

The V8 implementation of sort is done in javascript. If you can come up with a stable sort that performs equally well or better, we would be very happy to replace the current implementation. We accept patches!
</pre> 
          </div> 
         </div> 
        </div> 
        <div class=""> 
         <div class="cursor_off vt issuecomment" id="hc36"> 
          <div class="issuecommentheader"> 
           <span class="author"> <a name="c36" id="c_ts1371127442" href="/p/v8/issues/detail?id=90#c36">Comment 36</a> by <a style="white-space: nowrap" href="/u/4054927703/" title="math...@qiwi.be">math...@qiwi.be</a></span>, 
           <span class="date" title="Thu Jun 13 12:44:02 2013 UTC"> Jun 13 2013 </span> 
          </div> 
          <div class="issuecommentbody" tabindex="0"> 
           <div style="float:right; margin-right:.3em; text-align:right" class="ichcommands"> 
            <span id="comment-action-loading-36" class="loading" style="display:none;">Processing</span> 
           </div> 
           <pre class="issue_text">
&gt; Instead of adding additional "me too" comments, I suspect it's more useful for
&gt; someone to write (or find) a comprehensive test of sort stability (for various
&gt; array sizes) and run it against other modern browsers and report the results.

Such a test was already posted here in the comments[1]. Is this a good test or not? 

[1] <a href="http://ofb.net/~sethml/is-sort-stable.html" title="" class="" rel="nofollow">http://ofb.net/~sethml/is-sort-stable.html</a>
</pre> 
          </div> 
         </div> 
        </div> 
        <div class=""> 
         <div class="cursor_off vt issuecomment" id="hc37"> 
          <div class="issuecommentheader"> 
           <span class="author"> <a name="c37" id="c_ts1371129374" href="/p/v8/issues/detail?id=90#c37">Comment 37</a> by <a style="white-space: nowrap" href="/u/4054927703/" title="math...@qiwi.be">math...@qiwi.be</a></span>, 
           <span class="date" title="Thu Jun 13 13:16:14 2013 UTC"> Jun 13 2013 </span> 
          </div> 
          <div class="issuecommentbody" tabindex="0"> 
           <div style="float:right; margin-right:.3em; text-align:right" class="ichcommands"> 
            <span id="comment-action-loading-37" class="loading" style="display:none;">Processing</span> 
           </div> 
           <pre class="issue_text">
I’ve re-opened the (old) sorting algorithms discussion on the es-discuss mailing list. Please discuss this issue there instead of in this thread. Thanks!

<a href="https://mail.mozilla.org/pipermail/es-discuss/2013-June/031276.html" title="" class="" rel="nofollow">https://mail.mozilla.org/pipermail/es-discuss/2013-June/031276.html</a>
</pre> 
          </div> 
         </div> 
        </div> 
        <div class=""> 
         <div class="cursor_off vt issuecomment" id="hc38"> 
          <div class="issuecommentheader"> 
           <span class="author"> <a name="c38" id="c_ts1434464469" href="/p/v8/issues/detail?id=90#c38">Comment 38</a> by <a style="white-space: nowrap" href="/u/jkummerow@chromium.org/" title="jkummerow@chromium.org">jkummerow@chromium.org</a></span>, 
           <span class="date" title="Tue Jun 16 14:21:09 2015 UTC"> Jun 16 2015 </span> 
          </div> 
          <div class="issuecommentbody" tabindex="0"> 
           <div style="float:right; margin-right:.3em; text-align:right" class="ichcommands"> 
            <span id="comment-action-loading-38" class="loading" style="display:none;">Processing</span> 
           </div> 
           <table class="updates"> 
            <tbody>
             <tr>
              <td class="box-inner"> <b>Cc:</b> arv@chromium.org<br> </td>
             </tr> 
            </tbody>
           </table> 
           <pre class="issue_text">
<a href="/p/v8/issues/detail?id=4189" title="Chrome/V8 Array.Sort()-Implementation behaves weird (other than IE/FF)  at this testcase " class="closed_ref" rel="nofollow"> Issue 4189 </a> has been merged into this issue.
</pre> 
          </div> 
         </div> 
        </div> 
        <div class=""> 
         <div class="cursor_off vt issuecomment" id="hc39"> 
          <div class="issuecommentheader"> 
           <span class="author"> <a name="c39" id="c_ts1434467631" href="/p/v8/issues/detail?id=90#c39">Comment 39</a> by <a style="white-space: nowrap" href="/u/1603390076/" title="do.wer...@gmail.com">do.wer...@gmail.com</a></span>, 
           <span class="date" title="Tue Jun 16 15:13:51 2015 UTC"> Jun 16 2015 </span> 
          </div> 
          <div class="issuecommentbody" tabindex="0"> 
           <div style="float:right; margin-right:.3em; text-align:right" class="ichcommands"> 
            <span id="comment-action-loading-39" class="loading" style="display:none;">Processing</span> 
           </div> 
           <pre class="issue_text">
well... i am normally not the guy to be polemic and re-raise old issues, but seriously, this is the quintessence i read out of this thread and some mails so-far, and it's sort of weird and unexpected reading this here and not at the ie6-team-forums of 199x: 

"So the standard says there's no need for a stable sort and a qsort is a little faster. But there are some people complaining. Well, ok. Instead of being the ones having the influence to tell the standardizers that their standard lacks reality-compliance (at least acknowledged by nearly all other browsers, definitely the major ones in actual versions), lets do it faster instead of reliable and violate the  principle of least surprise, cause V8 shall not be best, but the fastest engine ever! At least for a count over 10, because being consistent is bad, mhkay...? Let's do our own thing instead of being web-compliant with nearly every other browser out there. lets be these guys! And if you little communityguy really need such weird thing as a stable sorting algorithm, write it yourself, man, you are a bad programmer if you can't write a hack, didn't you work with IE7? Man, THAT was a mess!"


As mentioned, I expected this behaviour from Microsofts ie-team in 199x or so, but definitely not from chrome-v8-devs in 2015. Sorry for the inconvenience. It was just my picture of how the "good" devs and architects work being ruined.

</pre> 
          </div> 
         </div> 
        </div> 
        <div class=""> 
         <div class="cursor_off vt issuecomment" id="hc40"> 
          <div class="issuecommentheader"> 
           <span class="author"> <a name="c40" id="c_ts1434473891" href="/p/v8/issues/detail?id=90#c40">Comment 40</a> by <a style="white-space: nowrap" href="/u/2462776876/" title="arodrig...@bluemessaging.com">arodrig...@bluemessaging.com</a></span>, 
           <span class="date" title="Tue Jun 16 16:58:11 2015 UTC"> Jun 16 2015 </span> 
          </div> 
          <div class="issuecommentbody" tabindex="0"> 
           <div style="float:right; margin-right:.3em; text-align:right" class="ichcommands"> 
            <span id="comment-action-loading-40" class="loading" style="display:none;">Processing</span> 
           </div> 
           <pre class="issue_text">
Please fix this. Last commenter said it best.
</pre> 
          </div> 
         </div> 
        </div> 
        <div class=""> 
         <div class="cursor_off vt issuecomment" id="hc41"> 
          <div class="issuecommentheader"> 
           <span class="author"> <a name="c41" id="c_ts1434531959" href="/p/v8/issues/detail?id=90#c41">Comment 41</a> by <a style="white-space: nowrap" href="/u/erikcorry@chromium.org/" title="erikcorry@chromium.org">erikcorry@chromium.org</a></span>, 
           <span class="date" title="Wed Jun 17 09:05:59 2015 UTC"> Jun 17 2015 </span> 
          </div> 
          <div class="issuecommentbody" tabindex="0"> 
           <div style="float:right; margin-right:.3em; text-align:right" class="ichcommands"> 
            <span id="comment-action-loading-41" class="loading" style="display:none;">Processing</span> 
           </div> 
           <pre class="issue_text">
If "saying it best" is to use the old "you are just as bad as IE" then I'm not impressed.

Take a look at <a href="http://jsperf.com/stable-sort/3" title="" class="" rel="nofollow">http://jsperf.com/stable-sort/3</a>  The stable sorts are almost as fast as the unstable ones, and they are only a few lines.

V8 has always put a lot of weight on speed. This is why the stable sorts are so fast.  Consider the fastest, the stableSortPair.  It is only 23% slower than the unstable sort.  It's that fast because:

* Stable objects have their properties inlined
* The generational GC cleans up the Pair objects very quickly
* Property accesses like .obj are fast
* push() is very optimized.
* Array.prototype.sort is very fast (see what I did there?)

By prioritizing speed, we give you a tool where you can build your own stuff, and it goes fast.  You don't have to beg us for an accelerated library function, you have the freedom to build your own stuff and it will go fast.  In fact sometimes you can go faster than the library functions, because they have all sorts of code to take care of sick edge cases that you don't have in your web pages.  You don't do Array.prototype[2] = "fish" and then expect [,,,,,][2] to be "fish", right?  You don't sort sparse arrays, right?  Of course you don't.

And if everyone uses it, you can ask TC39 to put in the standard library. Just like C++, which has sort and stable_sort.  This will save a tiny bit of download.  Seriously tiny, check out the jsperf link.

By the way there are a lot of JS implementations of merge sort on the net, and they mostly use array shift.  Please don't use them.  array shift is fundamentally slow because it has to shift down all the elements. We optimized the hell out of a common case using a technique that causes cancer in small rodents, but if you try to do it on a large array, performance will collapse.
</pre> 
          </div> 
         </div> 
        </div> 
        <div class=""> 
         <div class="cursor_off vt issuecomment" id="hc42"> 
          <div class="issuecommentheader"> 
           <span class="author"> <a name="c42" id="c_ts1434569410" href="/p/v8/issues/detail?id=90#c42">Comment 42</a> by <a style="white-space: nowrap" href="/u/4055399613/" title="cesiu...@gmail.com">cesiu...@gmail.com</a></span>, 
           <span class="date" title="Wed Jun 17 19:30:10 2015 UTC"> Jun 17 2015 </span> 
          </div> 
          <div class="issuecommentbody" tabindex="0"> 
           <div style="float:right; margin-right:.3em; text-align:right" class="ichcommands"> 
            <span id="comment-action-loading-42" class="loading" style="display:none;">Processing</span> 
           </div> 
           <pre class="issue_text">
Can you provide a link to specific instructions for patching a page to use a different sort?  (The instructions should provide an example of patching the sort with a specific "best" stable sort.)

Why is the benchmark used in <a href="http://jsperf.com/stable-sort/3" title="" class="" rel="nofollow">jsperf.com/stable-sort/3</a> the most representative benchmark?  Is it well known that most arrays use small objects?  Or that most arrays are unsorted most of the time?

"you have the freedom to build your own stuff"...  Poorly argued.  You have the freedom to build your own stuff because you have become an expert on this stuff as part of your job.  We would have to sacrifice time to achieve a similar level of expertise, and we would prefer to use that expertise on other subjects.

Can you point us at the source code for the unstable and stable sorts?  Can you point us at the benchmarks and unittests used to decide which sort should be used as the default sort?
</pre> 
          </div> 
         </div> 
        </div> 
        <div class=""> 
         <div class="cursor_off vt issuecomment" id="hc43"> 
          <div class="issuecommentheader"> 
           <span class="author"> <a name="c43" id="c_ts1434611451" href="/p/v8/issues/detail?id=90#c43">Comment 43</a> by <a style="white-space: nowrap" href="/u/svenpanne@chromium.org/" title="svenpanne@chromium.org">svenpanne@chromium.org</a></span>, 
           <span class="date" title="Thu Jun 18 07:10:51 2015 UTC"> Jun 18 2015 </span> 
          </div> 
          <div class="issuecommentbody" tabindex="0"> 
           <div style="float:right; margin-right:.3em; text-align:right" class="ichcommands"> 
            <span id="comment-action-loading-43" class="loading" style="display:none;">Processing</span> 
           </div> 
           <pre class="issue_text">
This whole discussion is futile: Being stable or not is just one of many properties of a sorting algorithm, see e.g. <a href="https://en.wikipedia.org/wiki/Sorting_algorithm#Comparison_of_algorithms" title="" class="" rel="nofollow">https://en.wikipedia.org/wiki/Sorting_algorithm#Comparison_of_algorithms</a>. Do you care about average performance? Memory? Do you care about worst behavior? Asymptotic complexity or raw speed on "your usual" input sizes (i.e. constant factors)? etc. etc.

Depending on your use case, any of these properties may be mission-critical or totally irrelevant, that's the reason why there are so many sorting algorithms. There is simply no "best" algorithm, so most language/library specifications offer you only a small handful (typically 1 or 2) of them and leave the rest up to application/library/framework writers, who only know what would be "best" for them.

Furthermore, using any kind of language or library is a game: There are strict rules, which you have to follow and on which you can base your assumptions. Everything beyond the rules is wishful thinking, and there are often good reasons for the rules, even if you don't see them. Of course you can rightfully complain about the rules, but those complaints should be directed to the authors of the rules, not to the manufacturers of the game. And if you don't like the rules, there are always other games to play... ;-)
</pre> 
          </div> 
         </div> 
        </div> 
        <div class=""> 
         <div class="cursor_off vt issuecomment" id="hc44"> 
          <div class="issuecommentheader"> 
           <span class="author"> <a name="c44" id="c_ts1434615434" href="/p/v8/issues/detail?id=90#c44">Comment 44</a> by <a style="white-space: nowrap" href="/u/4055399613/" title="cesiu...@gmail.com">cesiu...@gmail.com</a></span>, 
           <span class="date" title="Thu Jun 18 08:17:14 2015 UTC"> Jun 18 2015 </span> 
          </div> 
          <div class="issuecommentbody" tabindex="0"> 
           <div style="float:right; margin-right:.3em; text-align:right" class="ichcommands"> 
            <span id="comment-action-loading-44" class="loading" style="display:none;">Processing</span> 
           </div> 
           <pre class="issue_text">
The makers of the game have a great deal of latitude.  They can provide documentation and advertise it well to make it easier for people to swap in and out different sorting algorithms.  They can provide a collection of algorithms that each target a different segment of the design space, again with good documentation and benchmarks to explain where each algorithm shines the best.  When you say that it is trivial to write, test, and install new sorting algorithms, you are allowed to provide examples that show parts of that, you are allowed to provide pointers to easy to use and relatively complete benchmarks, and you are allowed to make it easier for people to contribute to the collection.
</pre> 
          </div> 
         </div> 
        </div> 
        <div class=""> 
         <div class="cursor_off vt issuecomment" id="hc45"> 
          <div class="issuecommentheader"> 
           <span class="author"> <a name="c45" id="c_ts1434893335" href="/p/v8/issues/detail?id=90#c45">Comment 45</a> by <a style="white-space: nowrap" href="/u/623202032/" title="falsand...@gmail.com">falsand...@gmail.com</a></span>, 
           <span class="date" title="Sun Jun 21 13:28:55 2015 UTC"> Jun 21 2015 </span> 
          </div> 
          <div class="issuecommentbody" tabindex="0"> 
           <div style="float:right; margin-right:.3em; text-align:right" class="ichcommands"> 
            <span id="comment-action-loading-45" class="loading" style="display:none;">Processing</span> 
           </div> 
           <pre class="issue_text">
Sample code.

[1,2,3,4,5,6,7,8,9,10,11].sort(function(){return 0;})
&gt; [6, 1, 3, 4, 5, 2, 7, 8, 9, 10, 11]

This is regrettable in the specifications.
</pre> 
          </div> 
         </div> 
        </div> 
        <div class=""> 
         <div class="cursor_off vt issuecomment" id="hc46"> 
          <div class="issuecommentheader"> 
           <span class="author"> <a name="c46" id="c_ts1434909927" href="/p/v8/issues/detail?id=90#c46">Comment 46</a> by <a style="white-space: nowrap" href="/u/4055399613/" title="cesiu...@gmail.com">cesiu...@gmail.com</a></span>, 
           <span class="date" title="Sun Jun 21 18:05:27 2015 UTC"> Jun 21 2015 </span> 
          </div> 
          <div class="issuecommentbody" tabindex="0"> 
           <div style="float:right; margin-right:.3em; text-align:right" class="ichcommands"> 
            <span id="comment-action-loading-46" class="loading" style="display:none;">Processing</span> 
           </div> 
           <pre class="issue_text">
One of the memes here is that it's so easy to create your own sort that you should.  This is strongly coupled with a meme of: since there are so many different sorting algorithms each optimal in its own niche, you should create your own sort.  This, of course, argues that the default sort should be most useful for those programs that don't want a sort highly optimized for a specific niche.  They want an easy to use sort.  They want a sort that won't produce O(N^2) behavior on some input; they want a sort that is fast on mostly sorted arrays; and they want a stable sort.

If there is a special consideration that is mission critical to an application, then that application should write and install its own sort.  If you're sorting huge arrays, or you know you're sorting certain kinds of data distributions, that's when you're willing to spend more time getting the details just perfect.  When you're doing day-to-day sorts on relatively small arrays with only the hundreds of elements you can display on a web page, then you don't care so much about every last detail and just want something easy-to-use.
</pre> 
          </div> 
         </div> 
        </div> 
        <div class=""> 
         <div class="cursor_off vt issuecomment" id="hc47"> 
          <div class="issuecommentheader"> 
           <span class="author"> <a name="c47" id="c_ts1434958801" href="/p/v8/issues/detail?id=90#c47">Comment 47</a> by <a style="white-space: nowrap" href="/u/svenpanne@google.com/" title="svenpanne@google.com">svenpanne@google.com</a></span>, 
           <span class="date" title="Mon Jun 22 07:40:01 2015 UTC"> Jun 22 2015 </span> 
          </div> 
          <div class="issuecommentbody" tabindex="0"> 
           <div style="float:right; margin-right:.3em; text-align:right" class="ichcommands"> 
            <span id="comment-action-loading-47" class="loading" style="display:none;">Processing</span> 
           </div> 
           <pre class="issue_text">
Re #45: That's not regrettable, that's just what you asked for: Your comparison function just says "I don't care about anything, for me everything looks equal.", and the result is 100% consistent with that egalitarian comparator.

Re #46: Replacing "I" with "they" and thereby defining *your* use case as *the* use case everybody has doesn't really work, but nice try... ;-)

Stable sort is vastly overrated nowadays IMHO (unless you still have to handle magnetic tapes or punch cards and must do multi-phase sorts): If you want to sort in a stable manner, just make this requirement explicit, i.e. make the position in the input part of the sort key. If the position is not directly available from the objects to be compared, temporarily pair them with the positions. Note that it's not possible to do this the other way round: If a stable sorting algorithm using addition O(n) memory would be used, everybody had to pay the additional costs, even if "stable" is not an issue at all.
</pre> 
          </div> 
         </div> 
        </div> 
        <div class=""> 
         <div class="cursor_off vt issuecomment" id="hc48"> 
          <div class="issuecommentheader"> 
           <span class="author"> <a name="c48" id="c_ts1434960453" href="/p/v8/issues/detail?id=90#c48">Comment 48</a> by <a style="white-space: nowrap" href="/u/623202032/" title="falsand...@gmail.com">falsand...@gmail.com</a></span>, 
           <span class="date" title="Mon Jun 22 08:07:33 2015 UTC"> Jun 22 2015 </span> 
          </div> 
          <div class="issuecommentbody" tabindex="0"> 
           <div style="float:right; margin-right:.3em; text-align:right" class="ichcommands"> 
            <span id="comment-action-loading-48" class="loading" style="display:none;">Processing</span> 
           </div> 
           <pre class="issue_text">
If a stable sort and non-stable sort developers can select, and if there is almost no disadvantage, it is my opinion for the future that stable sort is easy to use.
</pre> 
          </div> 
         </div> 
        </div> 
        <div class=""> 
         <div class="cursor_off vt issuecomment" id="hc49"> 
          <div class="issuecommentheader"> 
           <span class="author"> <a name="c49" id="c_ts1435660026" href="/p/v8/issues/detail?id=90#c49">Comment 49</a> by <a style="white-space: nowrap" href="/u/hablich@chromium.org/" title="hablich@chromium.org">hablich@chromium.org</a></span>, 
           <span class="date" title="Tue Jun 30 10:27:06 2015 UTC"> Jun 30 2015 </span> 
          </div> 
          <div class="issuecommentbody" tabindex="0"> 
           <div style="float:right; margin-right:.3em; text-align:right" class="ichcommands"> 
            <span id="comment-action-loading-49" class="loading" style="display:none;">Processing</span> 
           </div> 
           <table class="updates"> 
            <tbody>
             <tr>
              <td class="box-inner"> <b>Cc:</b> ssamanoori@chromium.org<br> </td>
             </tr> 
            </tbody>
           </table> 
           <pre class="issue_text">
<a href="/p/chromium/issues/detail?id=502698" title="Array sort order is broken" class="closed_ref" rel="nofollow"> Issue chromium:502698 </a> has been merged into this issue.
</pre> 
          </div> 
         </div> 
        </div> 
        <div class=""> 
         <div class="cursor_off vt issuecomment" id="hc50"> 
          <div class="issuecommentheader"> 
           <span class="author"> <a name="c50" id="c_ts1439553948" href="/p/v8/issues/detail?id=90#c50">Comment 50</a> by <a style="white-space: nowrap" href="/u/3711668382/" title="juli1.ha...@gmail.com">juli1.ha...@gmail.com</a></span>, 
           <span class="date" title="Fri Aug 14 12:05:48 2015 UTC"> Aug 14 2015 </span> 
          </div> 
          <div class="issuecommentbody" tabindex="0"> 
           <div style="float:right; margin-right:.3em; text-align:right" class="ichcommands"> 
            <span id="comment-action-loading-50" class="loading" style="display:none;">Processing</span> 
           </div> 
           <pre class="issue_text">
#48&gt; performance is the disadvantage. As the number of items in the array grows, stable sorts perform worst and worst for a variety of reasons, from algorithm complexity to memory usage to cache misses depending on which specific algorithm you compare and what criteria you focus on.

Now, given:
1) it is possible to get stable results with an unstable sort, using a good compareFn.
   (that's how it should be done anyway, performing several sorts in a row is inefficient).

2) it is *not* possible to get unstable sort performance with a stable sort.

…then it seems a rather logical choice to provide an unstable sort.

And about developers being surprised… you make a mistake, you realize it, you fix it, you learn and don't do it again. You don't blame the library just because you misread the documentation.
“I tried to use a knife to eat soup and cut myself, let's change knives to they don't cut anymore”. I don't think dumbing down and hampering tools everytime someone trips on them would do any good in the long run.

</pre> 
          </div> 
         </div> 
        </div> 
        <div class=""> 
         <div class="cursor_off vt issuecomment" id="hc51"> 
          <div class="issuecommentheader"> 
           <span class="author"> <a name="c51" id="c_ts1439574811" href="/p/v8/issues/detail?id=90#c51">Comment 51</a> by <a style="white-space: nowrap" href="/u/1603390076/" title="do.wer...@gmail.com">do.wer...@gmail.com</a></span>, 
           <span class="date" title="Fri Aug 14 17:53:31 2015 UTC"> Aug 14 2015 </span> 
          </div> 
          <div class="issuecommentbody" tabindex="0"> 
           <div style="float:right; margin-right:.3em; text-align:right" class="ichcommands"> 
            <span id="comment-action-loading-51" class="loading" style="display:none;">Processing</span> 
           </div> 
           <pre class="issue_text">
#50: Oh cmon, are we at this silly net &lt;-&gt; reality - comparisonlevel now? Pleas don't. 

Or, in your words: "I always used a knive THIS way and I saw in every other family, a knive is used this way. So I tried to use it this way, but I accidentally cut my finger because the knives in THIS house are working the other way round"... 

Sorry, I fixed my problem which kind of resurrected this evergoing discussion in minutes - but I just don't like the mindset of the guys defending nonsense here, so I had to post this.
 
</pre> 
          </div> 
         </div> 
        </div> 
        <div class=""> 
         <div class="cursor_off vt issuecomment" id="hc52"> 
          <div class="issuecommentheader"> 
           <span class="author"> <a name="c52" id="c_ts1439590954" href="/p/v8/issues/detail?id=90#c52">Comment 52</a> by <a style="white-space: nowrap" href="/u/myfonj@gmail.com/" title="myfonj@gmail.com">myfonj@gmail.com</a></span>, 
           <span class="date" title="Fri Aug 14 22:22:34 2015 UTC"> Aug 14 2015 </span> 
          </div> 
          <div class="issuecommentbody" tabindex="0"> 
           <div style="float:right; margin-right:.3em; text-align:right" class="ichcommands"> 
            <span id="comment-action-loading-52" class="loading" style="display:none;">Processing</span> 
           </div> 
           <pre class="issue_text">
Speaking in programming parables, you make a function that reads input and returns output.  Function that does not read anything but its input, especially does nothing random nor time dependent.  So you expect given function to return exactly the same output for given input.  You do repeated tests at all available platforms and all seems well.  Then you make input just slightly bigger and one certain environments begins to behave stochastically.  I assume we all could agree that in general this is not good.

But parables aside, I think that V8 devs made clear statement: (paraphrasing:) "Unless you convince ECMA board to change volatility regarding stable sort in next version of ECMAscript standard, don't bother us, we are covered and we are pushing performance here.  Interoperability is not our concern."

Then well, ECMA is said to value consensus highly (and I think we have one pretty consensus here) so this might be a possibility.
</pre> 
          </div> 
         </div> 
        </div> 
        <div class=""> 
         <div class="cursor_off vt issuecomment" id="hc53"> 
          <div class="issuecommentheader"> 
           <span class="author"> <a name="c53" id="c_ts1439670118" href="/p/v8/issues/detail?id=90#c53">Comment 53</a> by <a style="white-space: nowrap" href="/u/1293244455/" title="impinb...@gmail.com">impinb...@gmail.com</a></span>, 
           <span class="date" title="Sat Aug 15 20:21:58 2015 UTC"> Aug 15 2015 </span> 
          </div> 
          <div class="issuecommentbody" tabindex="0"> 
           <div style="float:right; margin-right:.3em; text-align:right" class="ichcommands"> 
            <span id="comment-action-loading-53" class="loading" style="display:none;">Processing</span> 
           </div> 
           <pre class="issue_text">
Here's an idea: if you want a stable sort implemented, it's not that hard to implement. Array.prototype.sort is implemented in pure JavaScript. 
</pre> 
          </div> 
         </div> 
        </div> 
        <div class=""> 
         <div class="cursor_off vt issuecomment" id="hc54"> 
          <div class="issuecommentheader"> 
           <span class="author"> <a name="c54" id="c_ts1439730251" href="/p/v8/issues/detail?id=90#c54">Comment 54</a> by <a style="white-space: nowrap" href="/u/3711668382/" title="juli1.ha...@gmail.com">juli1.ha...@gmail.com</a></span>, 
           <span class="date" title="Sun Aug 16 13:04:11 2015 UTC"> Aug 16 2015 </span> 
          </div> 
          <div class="issuecommentbody" tabindex="0"> 
           <div style="float:right; margin-right:.3em; text-align:right" class="ichcommands"> 
            <span id="comment-action-loading-54" class="loading" style="display:none;">Processing</span> 
           </div> 
           <pre class="issue_text">
#52&gt; an unstable sort will still output the exact same output for the exact same input. There is nothing random nor stochastic in its behavior. Quite the opposite actually, sorting algorithms are probably among the most studied and formalized algorithms.

The consensus point is a good one though.

...except Internet Explorer sort went unstable since IE9.
...and still is in IE11 (it starts stable, then switches to unstable somewhere between 100 and 1000 items, kind like Chromium does, but with a higher breaking point).
...and Opera's sort is also unstable (since version 11 if I remember well).

This change in IE9 teaches us something btw: even if one had all tests in place and passing, as long as one's assumptions are broken, one's code can still fail because the library one is using is not bound to those broken assumptions, and may be updated in a way that breaks one's code anytime.

That being said, I agree it would be great to have a stable sort available in the norm as well. The point should not be “make sort() stable” though, but “add a stable sort alongside sort()”. They are different tools, with different strengths and limitations.
</pre> 
          </div> 
         </div> 
        </div> 
        <div class=""> 
         <div class="cursor_off vt issuecomment" id="hc55"> 
          <div class="issuecommentheader"> 
           <span class="author"> <a name="c55" id="c_ts1447141839" href="/p/v8/issues/detail?id=90#c55">Comment 55</a> by <a style="white-space: nowrap" href="/u/4247764651/" title="david.ka...@gmail.com">david.ka...@gmail.com</a></span>, 
           <span class="date" title="Tue Nov 10 07:50:39 2015 UTC"> Nov 10 2015 </span> 
          </div> 
          <div class="issuecommentbody" tabindex="0"> 
           <div style="float:right; margin-right:.3em; text-align:right" class="ichcommands"> 
            <span id="comment-action-loading-55" class="loading" style="display:none;">Processing</span> 
           </div> 
           <pre class="issue_text">
My student directed me to this bug report.  I want to correct an important incorrect assertion that may be coloring the discussion.  Comment #19 asserts that "As can be seen here <a href="http://en.wikipedia.org/wiki/Sorting_algorithm" title="" class="" rel="nofollow">http://en.wikipedia.org/wiki/Sorting_algorithm</a> there is no sorting algorithm that is O(nlogn) in time, O(1) in space and is also stable.  You have to compromise when choosing your algorithm. "

This is false.  To see this, consider the sorting implementation (located at <a href="https://code.google.com/p/chromium/codesearch#chromium/src/v8/src/js/array.js&amp;q=Array.prototype.sort&amp;sq=package:chromium&amp;l=910" title="" class="" rel="nofollow">https://code.google.com/p/chromium/codesearch#chromium/src/v8/src/js/array.js&amp;q=Array.prototype.sort&amp;sq=package:chromium&amp;l=910</a> ) .  Notice that any time this implementation compares two items, it knows the indices of the two items in the array.  Therefore, it is easy to natively implement the "wrapper" that Seth mentions in comment #17.  This wrapper is consistent with the original comparison function when the two items differ, but when they compare equal, instead of returning 0, it declares the item with smaller index to be the smaller item.

The important thing is that this wrapper never returns 0.  This means it gives the sorting algorithm no flexibility; there is only one possible output: the one that puts smaller items before larger (ie, consistent with the original comparison order) and also puts items with *equal* values in the order consistent with their original index order (because that's what the modified comparison function demands).  In other words, the result is a stable sort.

This variant uses no more time (asymptotically) or space than the original sorting algorithm.  It is slightly slower because it does an extra comparison of indices given an equality outcome, but this index comparison is negligible compared to the function call overhead associated with the original comparison ( There may be an argument for tolerating instability when you want to maximize performance in a low level language sorting a dense array of numbers, but here the use of a function call for each comparison means this implementation just isn't worrying at that level.)  Also it is clear that the code isn't worried about this kind of extra work on equality, because for example at line 985 of the sorting implementation code that I linked to above, the algorithm does a swap when c02 &gt;= 0 .  This is "wasteful" since you'd get exactly the same outcome if you swapped on c02 &gt; 0, so it obviously isn't worried about the equality case causing a little more work.   Finally, arrays with lots of equalities are going to be the fastest to sort (when you choose a pivot that has a lot of equal keys, all those equal keys are gathered around the pivot (between low_end and high_start in the code) and are not passed in to the recursive subproblems.  This means the recursive subproblems shrink faster so the overall runtime is less.) So it isn't important to optimize performance on equality outcomes.

In fact, the line 985 that does wasted work on equality appears to be the only origin of instability in the sorting algorithm.  As I mentioned above, instability only happens if you (unnecessarily) swap items that are equal.  It is exactly the c02=0 case that causes this to happen: it discovers that two items are equal, and it goes ahead and swaps them anyway.  On my quick skim of the code, it appears that every other swap takes place only when a comparison yields (strict) inequality---never equality.  Such comparisons should never cause instability in sorting.

I may have missed something on my quick skim, but the general principle I explained above still applies: any unstable sorting algorithm can be made stable with just a few small tweaks that don't affect running time or space.

The rest of the argument seems to be built on the idea that since the spec doesn't require stability, providing it would be a snare since it would lead people to rely on it and they would get bugs in other browsers with unstable sorts.  I would argue the opposite: that many programmers are going to assume stable sorting without checking for it, so are likely to write code that is buggy when sorts are unstable.  So you are likely to be protecting a lot of programmers from themselves by providing them with a stable sort.  Firefox has already done so ( <a href="https://bugzilla.mozilla.org/show_bug.cgi?id=224128" title="" class="" rel="nofollow">https://bugzilla.mozilla.org/show_bug.cgi?id=224128</a> ).  And there's hope that other browsers would follow suit and take us to a *de facto* stable sort standard even if the spec doesn't demand it.  A future spec could recognize this de facto standard and adopt it.

</pre> 
          </div> 
         </div> 
        </div> 
        <div class=""> 
         <div class="cursor_off vt issuecomment" id="hc56"> 
          <div class="issuecommentheader"> 
           <span class="author"> <a name="c56" id="c_ts1447167379" href="/p/v8/issues/detail?id=90#c56">Comment 56</a> by <a style="white-space: nowrap" href="/u/jkummerow@chromium.org/" title="jkummerow@chromium.org">jkummerow@chromium.org</a></span>, 
           <span class="date" title="Tue Nov 10 14:56:19 2015 UTC"> Nov 10 2015 </span> 
          </div> 
          <div class="issuecommentbody" tabindex="0"> 
           <div style="float:right; margin-right:.3em; text-align:right" class="ichcommands"> 
            <span id="comment-action-loading-56" class="loading" style="display:none;">Processing</span> 
           </div> 
           <pre class="issue_text">
#55: Thanks for your contribution. Unfortunately it's not that easy :-)

Line 985 only deals with selection of the pivot element (median-of-three). You're right that the condition there could be changed, however doing so doesn't eliminate all sources of instability.

Another source of instability is in lines 1007/1008, where the pivot element is unconditionally stored at the beginning of the range of elements that is to be sorted, to get it out of the way of the later shuffling operations. This can be avoided at the cost of having to keep track of where it originally came from, and where it must go after the partitioning step.

However there's a third source of instability that I believe is inherent to Quicksort: during the partitioning step, the elements are divided into three groups: less-than-pivot, equal-to-pivot, greater-than-pivot. The sizes and, hence, indices of these three groups are not known up front, but are incrementally adjusted as the algorithm progresses. In particular, to avoid moving the middle group back and forth as more space is required for the first and last groups, Quicksort assumes that the equal-to-pivot elements can freely be reordered. In our implementation, this happens in lines 1026/1027, where the last not-greater-than-pivot element is swapped to the current scan position to make room for a newly discovered greater-than-pivot element.

(You could store the equal-to-pivot elements in a separate temporary array, but that would require O(n) memory in the worst case. The wrapper approach in comment #17 solves the problem by using O(n) memory to store the original index of each element.)


Whether it's "a few small tweaks" or a radically different implementation: if you can propose a stable sorting algorithm that's competitive with what we have in terms of speed and memory consumption, I'd love to hear about it (and so would, presumably, the world at large) :-)
</pre> 
          </div> 
         </div> 
        </div> 
        <div class=""> 
         <div class="cursor_off vt issuecomment" id="hc57"> 
          <div class="issuecommentheader"> 
           <span class="author"> <a name="c57" id="c_ts1447179444" href="/p/v8/issues/detail?id=90#c57">Comment 57</a> by <a style="white-space: nowrap" href="/u/4247764651/" title="david.ka...@gmail.com">david.ka...@gmail.com</a></span>, 
           <span class="date" title="Tue Nov 10 18:17:24 2015 UTC"> Nov 10 2015 </span> 
          </div> 
          <div class="issuecommentbody" tabindex="0"> 
           <div style="float:right; margin-right:.3em; text-align:right" class="ichcommands"> 
            <span id="comment-action-loading-57" class="loading" style="display:none;">Processing</span> 
           </div> 
           <pre class="issue_text">
Thanks for your detailed explanation which clarifies the stability problem and exposes the flaw in my own reasoning that an item won't move until you put it into its pivot destination---which I relied on to say that you'd always know an item's original position when you compared it.  I guess this is why firefox switched to mergesort.

I understand the downside of allocating an extra O(n) space to hold location information, with consequences for garbage collection.  Does the same hold true for using O(n) space on the call stack?  Because it's pretty easy to write a recursive pivoting procedure that uses no additional space aside from the stack.

If you think of scanning through the array, then if an element is small (less than or equal to the pivot) then it needs to move to the index equal to the number of small items preceding it, while if it is large, it needs placed just before all the items that follow it and are large.  The former quantity, the number of small items before a given small item, is known when an item is scanned so can be passed in to the recursive call.  The latter quantity, determined by the number of large items following a given large item, can be returned by the recursive call.  In pseudocode:

//Pivot items of a in range including "from" up to but not including "to" given
//that the small items up to but not including position i have been packed into
//the space up to but not including low_end

Pivot_Helper(a, from, to, pivot, i, low_end) {
   var item=a[i]
   if (i==to) {
       return to-1
   }
   if (item &lt;= pivot) {
       a[low_end]=item
       return Pivot_Helper(a, from, to, pivot, i+1, low_end+1)
   } else { //item &gt; pivot
       hi_start = Pivot_Helper(a, from, to, pivot, i+1, low_end)
       a[hi_start] = item
       return hi_start-1
   }
}

Pivot(a, from, to, pivot) {
   Pivot_Helper(a, from, to, pivot, from, from)
}
</pre> 
          </div> 
         </div> 
        </div> 
        <div class=""> 
         <div class="cursor_off vt issuecomment" id="hc58"> 
          <div class="issuecommentheader"> 
           <span class="author"> <a name="c58" id="c_ts1447190360" href="/p/v8/issues/detail?id=90#c58">Comment 58</a> by <a style="white-space: nowrap" href="/u/jkummerow@chromium.org/" title="jkummerow@chromium.org">jkummerow@chromium.org</a></span>, 
           <span class="date" title="Tue Nov 10 21:19:20 2015 UTC"> Nov 10 2015 </span> 
          </div> 
          <div class="issuecommentbody" tabindex="0"> 
           <div style="float:right; margin-right:.3em; text-align:right" class="ichcommands"> 
            <span id="comment-action-loading-58" class="loading" style="display:none;">Processing</span> 
           </div> 
           <pre class="issue_text">
Using O(n) stack space is out of the question, as the stack is way too limited (less than 1 MB). Observe how the existing implementation limits itself to O(log n) stack space even in the worst case (i.e. pathologically unlucky pivot elements) by avoiding the recursive descent into the larger half of the array (lines 1036-1042).
</pre> 
          </div> 
         </div> 
        </div> 
        <div class=""> 
         <div class="cursor_off vt issuecomment" id="hc59"> 
          <div class="issuecommentheader"> 
           <span class="author"> <a name="c59" id="c_ts1461827251" href="/p/v8/issues/detail?id=90#c59">Comment 59</a> by <a style="white-space: nowrap" href="/u/2588384759/" title="a.dasche...@gmail.com">a.dasche...@gmail.com</a></span>, 
           <span class="date" title="Thu Apr 28 07:07:31 2016 UTC"> Apr 28 2016 </span> 
          </div> 
          <div class="issuecommentbody" tabindex="0"> 
           <div style="float:right; margin-right:.3em; text-align:right" class="ichcommands"> 
            <span id="comment-action-loading-59" class="loading" style="display:none;">Processing</span> 
           </div> 
           <pre class="issue_text">
Hi,

Ran into a particular behavior for ES6 where when you provide a comparing function the sort will work up to 10 elements and when passing in more than 10 it will fail.

EG:

myArray.sort((l, r) =&gt; l.toLowerCase() &lt; r.toLowerCase()); // works up to 10 elements but fails for more

Affected Chrome, node v5.10, webdriver chrome

Is this in any way related?

</pre> 
          </div> 
         </div> 
        </div> 
        <div class=""> 
         <div class="cursor_off vt issuecomment" id="hc60"> 
          <div class="issuecommentheader"> 
           <span class="author"> <a name="c60" id="c_ts1461847531" href="/p/v8/issues/detail?id=90#c60">Comment 60</a> by <a style="white-space: nowrap" href="/u/yangguo@chromium.org/" title="yangguo@chromium.org">yangguo@chromium.org</a></span>, 
           <span class="date" title="Thu Apr 28 12:45:31 2016 UTC"> Apr 28 2016 </span> 
          </div> 
          <div class="issuecommentbody" tabindex="0"> 
           <div style="float:right; margin-right:.3em; text-align:right" class="ichcommands"> 
            <span id="comment-action-loading-60" class="loading" style="display:none;">Processing</span> 
           </div> 
           <pre class="issue_text">
Comment #59: this is not related. You are using the sort function wrong. The function needs to return a positive, 0 or negative number. Yours only returns true or false.

Try with (l, r) =&gt; l.toLowerCase() - r.toLowerCase().

Next time please open a new issue and let developers decide whether to merge it with another issue.
</pre> 
          </div> 
         </div> 
        </div> 
        <div class=""> 
         <div class="cursor_off vt issuecomment" id="hc61"> 
          <div class="issuecommentheader"> 
           <span class="author"> <a name="c61" id="c_ts1470852712" href="/p/v8/issues/detail?id=90#c61">Comment 61</a> by <a style="white-space: nowrap" href="/u/adamk@chromium.org/" title="adamk@chromium.org">adamk@chromium.org</a></span>, 
           <span class="date" title="Wed Aug 10 18:11:52 2016 UTC"> Aug 10 2016 </span> 
          </div> 
          <div class="issuecommentbody" tabindex="0"> 
           <div style="float:right; margin-right:.3em; text-align:right" class="ichcommands"> 
            <span id="comment-action-loading-61" class="loading" style="display:none;">Processing</span> 
           </div> 
           <table class="updates"> 
            <tbody>
             <tr>
              <td class="box-inner"> <b>Cc:</b> adamk@chromium.org<br> </td>
             </tr> 
            </tbody>
           </table> 
           <pre class="issue_text">
<a href="/p/chromium/issues/detail?id=632329" title="Incorrect result of works &quot;Array.prototype.sort&quot;  function" class="closed_ref" rel="nofollow"> Issue chromium:632329 </a> has been merged into this issue.
</pre> 
          </div> 
         </div> 
        </div> 
        <div class=""> 
         <div class="cursor_off vt issuecomment" id="hc62"> 
          <div class="issuecommentheader"> 
           <span class="author"> <a name="c62" id="c_ts1486544007" href="/p/v8/issues/detail?id=90#c62">Comment 62</a> by <a style="white-space: nowrap" href="/u/kochi@chromium.org/" title="kochi@chromium.org">kochi@chromium.org</a></span>, 
           <span class="date" title="Wed Feb  8 08:53:27 2017 UTC"> Feb 8 2017 </span> 
          </div> 
          <div class="issuecommentbody" tabindex="0"> 
           <div style="float:right; margin-right:.3em; text-align:right" class="ichcommands"> 
            <span id="comment-action-loading-62" class="loading" style="display:none;">Processing</span> 
           </div> 
           <pre class="issue_text">
<a href="/p/chromium/issues/detail?id=689256" title="Array.sort return a different order even when passing a function that always returns zero" class="closed_ref" rel="nofollow"> Issue chromium:689256 </a> has been merged into this issue.
</pre> 
          </div> 
         </div> 
        </div> 
        <div class=""> 
         <div class="cursor_off vt issuecomment" id="hc63"> 
          <div class="issuecommentheader"> 
           <span class="author"> <a name="c63" id="c_ts1496691400" href="/p/v8/issues/detail?id=90#c63">Comment 63</a> by <a style="white-space: nowrap" href="/u/dglazkov@chromium.org/" title="dglazkov@chromium.org">dglazkov@chromium.org</a></span>, 
           <span class="date" title="Mon Jun  5 19:36:40 2017 UTC"> Jun 5 </span> 
          </div> 
          <div class="issuecommentbody" tabindex="0"> 
           <div style="float:right; margin-right:.3em; text-align:right" class="ichcommands"> 
            <span id="comment-action-loading-63" class="loading" style="display:none;">Processing</span> 
           </div> 
           <pre class="issue_text">
<a href="/p/chromium/issues/detail?id=729468" title="Array.sort() is not working in chrome it's working in IE,Fire Fox..etc." class="closed_ref" rel="nofollow"> Issue chromium:729468 </a> has been merged into this issue.
</pre> 
          </div> 
         </div> 
        </div> </td> 
      </tr> 
      <tr> 
       <td></td> 
       <td class="vt issuecomment"> 
        <div class="issuecommentheader" style="margin-bottom:1em"></div> <span class="indicator">?</span> <a href="https://www.google.com/accounts/ServiceLogin?service=ah&amp;passive=true&amp;continue=https://appengine.google.com/_ah/conflogin%3Fcontinue%3Dhttps://bugs.chromium.org/p/v8/issues/detail%253Fid%253D90">Sign in</a> to add a comment </td> 
      </tr> 
     </tbody> 
    </table> 
    <br> 
    <script type="text/javascript" defer src="/static/js/graveyard/common.js?version=11736-19d10b1.404127087738382563" nonce="fiqLA46OTWciP0g8XTzltVwQCNVfF6wh"></script> 
    <script type="text/javascript" defer src="/static/js/graveyard/listen.js?version=11736-19d10b1.404127087738382563" nonce="fiqLA46OTWciP0g8XTzltVwQCNVfF6wh"></script> 
    <script type="text/javascript" defer src="/static/js/graveyard/xmlhttp.js?version=11736-19d10b1.404127087738382563" nonce="fiqLA46OTWciP0g8XTzltVwQCNVfF6wh"></script> 
    <script type="text/javascript" defer src="/static/js/graveyard/shapes.js?version=11736-19d10b1.404127087738382563" nonce="fiqLA46OTWciP0g8XTzltVwQCNVfF6wh"></script> 
    <script type="text/javascript" defer src="/static/js/graveyard/geom.js?version=11736-19d10b1.404127087738382563" nonce="fiqLA46OTWciP0g8XTzltVwQCNVfF6wh"></script> 
    <script type="text/javascript" defer src="/static/js/graveyard/popup_controller.js?version=11736-19d10b1.404127087738382563" nonce="fiqLA46OTWciP0g8XTzltVwQCNVfF6wh"></script> 
    <script type="text/javascript" defer src="/static/js/framework/framework-ajax.js?version=11736-19d10b1.404127087738382563" nonce="fiqLA46OTWciP0g8XTzltVwQCNVfF6wh"></script> 
    <script type="text/javascript" defer src="/static/js/tracker/externs.js?version=11736-19d10b1.404127087738382563" nonce="fiqLA46OTWciP0g8XTzltVwQCNVfF6wh"></script> 
    <script type="text/javascript" defer src="/static/js/tracker/ac.js?version=11736-19d10b1.404127087738382563" nonce="fiqLA46OTWciP0g8XTzltVwQCNVfF6wh"></script> 
    <script type="text/javascript" defer src="/static/js/tracker/tracker-ac.js?version=11736-19d10b1.404127087738382563" nonce="fiqLA46OTWciP0g8XTzltVwQCNVfF6wh"></script> 
    <script type="text/javascript" defer src="/static/js/tracker/tracker-components.js?version=11736-19d10b1.404127087738382563" nonce="fiqLA46OTWciP0g8XTzltVwQCNVfF6wh"></script> 
    <script type="text/javascript" defer src="/static/js/tracker/tracker-dd.js?version=11736-19d10b1.404127087738382563" nonce="fiqLA46OTWciP0g8XTzltVwQCNVfF6wh"></script> 
    <script type="text/javascript" defer src="/static/js/tracker/tracker-display.js?version=11736-19d10b1.404127087738382563" nonce="fiqLA46OTWciP0g8XTzltVwQCNVfF6wh"></script> 
    <script type="text/javascript" defer src="/static/js/tracker/tracker-editing.js?version=11736-19d10b1.404127087738382563" nonce="fiqLA46OTWciP0g8XTzltVwQCNVfF6wh"></script> 
    <script type="text/javascript" defer src="/static/js/tracker/tracker-fields.js?version=11736-19d10b1.404127087738382563" nonce="fiqLA46OTWciP0g8XTzltVwQCNVfF6wh"></script> 
    <script type="text/javascript" defer src="/static/js/tracker/tracker-keystrokes.js?version=11736-19d10b1.404127087738382563" nonce="fiqLA46OTWciP0g8XTzltVwQCNVfF6wh"></script> 
    <script type="text/javascript" defer src="/static/js/tracker/tracker-nav.js?version=11736-19d10b1.404127087738382563" nonce="fiqLA46OTWciP0g8XTzltVwQCNVfF6wh"></script> 
    <script type="text/javascript" defer src="/static/js/tracker/tracker-util.js?version=11736-19d10b1.404127087738382563" nonce="fiqLA46OTWciP0g8XTzltVwQCNVfF6wh"></script> 
    <script type="text/javascript" defer src="/static/js/tracker/tracker-onload.js?version=11736-19d10b1.404127087738382563" nonce="fiqLA46OTWciP0g8XTzltVwQCNVfF6wh"></script> 
    <script type="text/javascript" defer src="/static/js/tracker/predict.js?version=11736-19d10b1.404127087738382563" nonce="fiqLA46OTWciP0g8XTzltVwQCNVfF6wh"></script> 
    <script type="text/javascript" defer src="/static/js/framework/clientmon.js?version=11736-19d10b1.404127087738382563" nonce="fiqLA46OTWciP0g8XTzltVwQCNVfF6wh"></script> 
   </div> 
   <form name="delcom" action="delComment.do?q=&amp;can=2&amp;groupby=&amp;sort=&amp;colspec=ID+Type+Status+Priority+Owner+Summary+HW+OS+Component+Stars" method="POST"> 
    <input type="hidden" name="sequence_num" value=""> 
    <input type="hidden" name="mode" value=""> 
    <input type="hidden" name="id" value="90"> 
    <input type="hidden" name="token" value=""> 
    <input type="hidden" name="hotlist_id" value=""> 
   </form> 
   <form name="flagcom" action="flagspam.do" method="post"> 
    <input type="hidden" name="comment_id" value=""> 
    <input type="hidden" name="sequence_num" value=""> 
    <input type="hidden" name="spam" value=""> 
    <input type="hidden" name="id" value="90"> 
    <input type="hidden" name="token" value=""> 
   </form> 
   <div id="helparea"></div> 
   <script type="text/javascript" nonce="fiqLA46OTWciP0g8XTzltVwQCNVfF6wh">
runOnLoad(function() {
 _fetchOptions('v8', 'issueOptions',
 CS_env.token, 1488837442);
 _fetchUserProjects(false);
 _onload();
 function showDescription(n, changeSelect) {
 for (var i = 1; i <= descCt; i++)
 $('d' + i).style.display = 'none';
 if (changeSelect)
 $('description-select').selectedIndex = n - 1;
 if (n) {
 $('d' + n).style.display = '';
 getParams.desc = n;
 if (window.history && history.replaceState)
 history.replaceState(
 '', '', makeQueryString(getParams) + window.location.hash);
 }
 }
 
 var descCt = 1;
 
 
 function delComment(sequence_num, delete_mode) {
 var r = true;
 if (delete_mode == 1) {
 r = confirm('Delete this comment?');
 }
 if (!r) {
 return false;
 }
 var f = document.forms["delcom"];
 f.sequence_num.value = sequence_num;
 f.mode.value = delete_mode;
 
 var loading = $('comment-action-loading-' + sequence_num);
 loading.style.display = 'inline';
 TKR_initialFormValues = TKR_currentFormValues();
 f.submit();
 return false;
 }
 _floatMetadata();
 if ($("star"))
 $("star").addEventListener("click", function (event) {
 _TKR_toggleStar($("star"), "v8", 90, null, null, "");
 _TKR_syncStarIcons($("star"), "star2");
 });
 var delCommentElements = document.getElementsByClassName("delComment");
 for (var i = 0; i < delCommentElements.length; ++i) {
 var el = delCommentElements[i];
 el.addEventListener("click", function(event) {
 var sequence = event.target.getAttribute("data-sequence");
 var mode = event.target.getAttribute("data-mode");
 delComment(sequence, mode);
 event.preventDefault();
 });
 }
 function flagComment(comment_id, sequence_num, isSpam) {
 var f = document.forms["flagcom"];
 f.comment_id.value = comment_id;
 f.sequence_num.value = sequence_num;
 f.spam.value = isSpam.toLowerCase() == "false";
 var loading = $('comment-action-loading-' + sequence_num);
 loading.style.display = 'inline';
 TKR_initialFormValues = TKR_currentFormValues();
 f.submit();
 return false;
 }
 var flagCommentElements = document.getElementsByClassName("flagComment");
 for (var i = 0; i < flagCommentElements.length; ++i) {
 var el = flagCommentElements[i];
 el.addEventListener("click", function(event) {
 var id = event.target.getAttribute("data-id");
 var sequence = event.target.getAttribute("data-sequence");
 var isSpam = event.target.getAttribute("data-spam");
 flagComment(id, sequence, isSpam);
 event.preventDefault();
 });
 }
 window.onsubmit = function() {
 TKR_initialFormValues = TKR_currentFormValues();
 };
 window.onbeforeunload = function() {
 if (TKR_isDirty()) {
 // This message is ignored in recent versions of Chrome and Firefox.
 return "You have unsaved changes. Leave this page and discard them?";
 }
 };
});
</script> 
   <script type="text/javascript" defer src="/static/third_party/js/kibbles-1.3.3.comp.js" nonce="fiqLA46OTWciP0g8XTzltVwQCNVfF6wh"></script> 
   <script type="text/javascript" nonce="fiqLA46OTWciP0g8XTzltVwQCNVfF6wh">
runOnLoad(function() {
 _setupKibblesOnDetailPage(
 'https://bugs.chromium.org/p/v8/issues/list?cursor\x3dv8%3A90\x26q\x3d',
 '/p/v8/issues/entry',
 '',
 '',
 'v8', 90,
 false, false, '');
});
</script> 
   <script type="text/javascript" defer src="/static/js/framework/externs.js?version=11736-19d10b1.404127087738382563" nonce="fiqLA46OTWciP0g8XTzltVwQCNVfF6wh"></script> 
   <script type="text/javascript" defer src="/static/js/framework/env.js?version=11736-19d10b1.404127087738382563" nonce="fiqLA46OTWciP0g8XTzltVwQCNVfF6wh"></script> 
   <script type="text/javascript" defer src="/static/js/framework/framework-ajax.js?version=11736-19d10b1.404127087738382563" nonce="fiqLA46OTWciP0g8XTzltVwQCNVfF6wh"></script> 
   <script type="text/javascript" defer src="/static/js/framework/framework-cues.js?version=11736-19d10b1.404127087738382563" nonce="fiqLA46OTWciP0g8XTzltVwQCNVfF6wh"></script> 
   <script type="text/javascript" defer src="/static/js/framework/framework-display.js?version=11736-19d10b1.404127087738382563" nonce="fiqLA46OTWciP0g8XTzltVwQCNVfF6wh"></script> 
   <script type="text/javascript" defer src="/static/js/framework/framework-menu.js?version=11736-19d10b1.404127087738382563" nonce="fiqLA46OTWciP0g8XTzltVwQCNVfF6wh"></script> 
   <script type="text/javascript" defer src="/static/js/framework/framework-myprojects.js?version=11736-19d10b1.404127087738382563" nonce="fiqLA46OTWciP0g8XTzltVwQCNVfF6wh"></script> 
   <script type="text/javascript" defer src="/static/js/framework/framework-myhotlists.js?version=11736-19d10b1.404127087738382563" nonce="fiqLA46OTWciP0g8XTzltVwQCNVfF6wh"></script> 
   <script type="text/javascript" defer src="/static/js/framework/framework-accountmenu.js?version=11736-19d10b1.404127087738382563" nonce="fiqLA46OTWciP0g8XTzltVwQCNVfF6wh"></script> 
   <script type="text/javascript" defer src="/static/js/framework/framework-stars.js?version=11736-19d10b1.404127087738382563" nonce="fiqLA46OTWciP0g8XTzltVwQCNVfF6wh"></script> 
   <script type="text/javascript" defer src="/static/js/framework/project-name-check.js?version=11736-19d10b1.404127087738382563" nonce="fiqLA46OTWciP0g8XTzltVwQCNVfF6wh"></script> 
   <script type="text/javascript" defer src="/static/js/graveyard/xmlhttp.js?version=11736-19d10b1.404127087738382563" nonce="fiqLA46OTWciP0g8XTzltVwQCNVfF6wh"></script> 
   <script type="text/javascript" nonce="fiqLA46OTWciP0g8XTzltVwQCNVfF6wh">
runOnLoad(function() {
 var toggles = document.getElementsByClassName("toggleHidden");
 for (var i = 0; i < toggles.length; ++i) {
 var toggle = toggles[i];
 toggle.addEventListener("click", function (event) {
 _toggleHidden(event.target);
 event.preventDefault();
 });
 }
 toggles = document.getElementsByClassName("toggleCollapse");
 for (var i = 0; i < toggles.length; ++i) {
 var toggle = toggles[i];
 toggle.addEventListener("click", function (event) {
 _toggleCollapse(event.target);
 event.preventDefault();
 });
 }
 
});
 </script> 
  </div> 
  <div id="footer"> 
   <a href="https://bugs.chromium.org/p/monorail/adminIntro" title="Monorail 11736-19d10b1.404127087738382563">About Monorail</a> 
   <a href="https://bugs.chromium.org/p/monorail/issues/entry" target="_blank">Feedback on Monorail</a> 
   <a href="http://www.google.com/policies/terms/">Terms</a> 
   <a href="http://www.google.com/policies/privacy/">Privacy</a> 
  </div> 
  <script type="text/javascript" nonce="fiqLA46OTWciP0g8XTzltVwQCNVfF6wh">
runOnLoad(function() {
 // CrDX Feedback Button
 (function(i,s,o,g,r,a,m){i['CrDXObject']=r;i[r]=i[r]||function(){
 (i[r].q=i[r].q||[]).push(arguments)},a=s.createElement(o),
 m=s.getElementsByTagName(o)[0];a.async=1;a.setAttribute('nonce','fiqLA46OTWciP0g8XTzltVwQCNVfF6wh');
 a.src=g;m.parentNode.insertBefore(a,m)
 })(window,document,'script','https://storage.googleapis.com/crdx-feedback.appspot.com/feedback.js','crdx');
 crdx('setFeedbackButtonLink', 'https://bugs.chromium.org/p/monorail/issues/entry?template=Online%20Feedback');
 // Google Analytics
 (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
 (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
 m=s.getElementsByTagName(o)[0];a.async=1;a.setAttribute('nonce','fiqLA46OTWciP0g8XTzltVwQCNVfF6wh');
 a.src=g;m.parentNode.insertBefore(a,m)
 })(window,document,'script','//www.google-analytics.com/analytics.js','ga');
 ga('create', 'UA-55762617-14', {'siteSpeedSampleRate': 100});
 
 ga('send', 'pageview');
});
</script>   
 </body>
</html>