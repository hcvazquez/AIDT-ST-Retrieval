<!doctype html>
<html lang="en-US">
 <head id="Head">
  <meta content="text/html; charset=UTF-8" http-equiv="Content-Type"> 
  <meta name="REVISIT-AFTER" content="1 DAYS"> 
  <meta name="RATING" content="GENERAL"> 
  <meta name="RESOURCE-TYPE" content="DOCUMENT"> 
  <meta content="text/javascript" http-equiv="Content-Script-Type"> 
  <meta content="text/css" http-equiv="Content-Style-Type"> 
  <title>
	F5 DDoS Protection: Recommended Practices (Volume 1)
</title>
  <meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1"> 
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <meta http-equiv="content-language" content="en">
  <meta id="MetaDescription" name="DESCRIPTION" content="Distributed Denial-of-Service (DDoS) is a top concern for many organizations today, from high-profile  financial industry brands to service providers. Experienced administrators know that F5 equipment is  not only well-suited to...">
  <meta id="MetaRobots" name="ROBOTS" content="INDEX, FOLLOW">
  <link href="https://dmcdn.f5.com/css/portal-f5.css?f5v=157" type="text/css" rel="stylesheet">
  <link href="https://dmcdn.f5.com/dh/7953c7e47459cb641fba9c89c5c6843e.css" type="text/css" rel="stylesheet">
  <script language="javascript" type="text/javascript" src="https://cdn.optimizely.com/js/8430831403.js"></script>
  <script src="https://dmcdn.f5.com/dh/5d29cd03c2ba8b367c2eb597514354e7.js" type="text/javascript"></script>
  <script type="text/javascript">
//<![CDATA[
    var analytics_page_startTime = (new Date()).getTime();
//]]>
</script> 
  <link rel="wlwmanifest" type="application/wlwmanifest+xml" title="windows livewriter manifest" href="https://f5.com:443/desktopmodules/f5/articles/services/metaweblog/wlwmanifest.xml">
  <link type="application/rsd+xml" rel="EditURI" title="RSD" href="https://f5.com:443/desktopmodules/f5/articles/services/metaweblog/rsd.ashx?id=2377&amp;url=https://f5.com/resources/white-papers">
  <link rel="apple-touch-icon" sizes="180x180" href="https://dmcdn.f5.com/apple-touch-icon.png">
  <link rel="icon" type="image/png" href="https://dmcdn.f5.com/favicon-32x32.png" sizes="32x32">
  <link rel="icon" type="image/png" href="https://dmcdn.f5.com/favicon-16x16.png" sizes="16x16">
  <link rel="manifest" href="/manifest.json">
  <meta name="theme-color" content="#ffffff">
  <link rel="x-default" hreflang="en" href="https://f5.com/resources/white-papers/f5-ddos-protection-recommended-practices">
  <link rel="canonical" href="https://f5.com/resources/white-papers/f5-ddos-protection-recommended-practices">
  <meta content="F5 DDoS Protection: Recommended Practices (Volume 1)" property="og:title">
  <meta content="Distributed Denial-of-Service (DDoS) is a top concern for many organizations today, from high-profile  financial industry brands to service providers. Experienced administrators know that F5 equipment is  not only well-suited to..." property="og:description">
  <meta content="en_US" property="og:locale">
  <meta content="https://cdn.f5.com/digital-platforms/images/logo.svg" property="og:image">
  <meta content="Marron Velazquez" property="article:author">
  <meta content="2013-12-29T20:37:00Z" property="article:published_time ">
  <meta property="article:tag"> 
  <!-- Data Layer --> 
  <script>
                            window.dataLayer = window.dataLayer || [];
                            window.dataLayer.push({"application":"F5.com","platform":"D","pagePillarPrimary":"Security","pagePillarSecondary":"","pagePersona":"Architect","pageCustomerExperience":"Awareness","pageRoot":"Resources"});
                            
                            $.ajax({
                             url: (window.f5 && window.f5.cdnDomain || '') + '/js/scripts/f5-munchkin-loader.js?f5v=' + (window.f5 && window.f5v || '0'),
                             dataType: 'script',
                             cache: true,
                             success: function() {
                               Munchkin.init('653-SMC-783', { clickTime : 200, asyncOnly : true });
                             }
                            });
                        </script> 
  <!-- End Data Layer --> 
 </head> 
 <body id="Body" class="L0_Resources L1_White_Papers  Id856 Id684  Level0 Level1 UPR_All_Users cp-None en-US en  unauthenticated"> 
  <script type="text/javascript">
			    window.dataLayer = window.dataLayer || [];
			    (function(w,d,s,l,i){w[l]=w[l]||[];w[l].push({'gtm.start':
			    new Date().getTime(),event:'gtm.js'});var f=d.getElementsByTagName(s)[0],
			    j=d.createElement(s),dl=l!='dataLayer'?'&l='+l:'';j.async=true;j.src=
			    '//www.googletagmanager.com/gtm.js?id='+i+dl;f.parentNode.insertBefore(j,f);
			    })(window,document,'script','dataLayer','GTM-PPZPQ6');
			    </script> 
  <noscript>
   &lt;iframe src="//www.googletagmanager.com/ns.html?id=GTM-PPZPQ6" height="0" width="0" style="display:none;visibility:hidden"&gt;&lt;/iframe&gt;
  </noscript> 
  <form method="post" action="/resources/white-papers/f5-ddos-protection-recommended-practices" id="Form" enctype="multipart/form-data"> 
   <div class="aspNetHidden"> 
    <input type="hidden" name="StylesheetManager_TSSM" id="StylesheetManager_TSSM" value=""> 
    <input type="hidden" name="ScriptManager_TSM" id="ScriptManager_TSM" value=""> 
    <input type="hidden" name="__EVENTTARGET" id="__EVENTTARGET" value=""> 
    <input type="hidden" name="__EVENTARGUMENT" id="__EVENTARGUMENT" value=""> 
    <input type="hidden" name="__LASTFOCUS" id="__LASTFOCUS" value=""> 
    <input type="hidden" name="__VIEWSTATE" id="__VIEWSTATE" value="8K/B2RI/fM+bwIfD4yyY0MyX5YdYLAkT0r6YqQw382WNdzWYOslU5xUXg5F9Nug6F4Jjo/YPtDKddDLDe+HGUC2GIt079PHheCavwpKV/OsDRyw+jDn1UMu328caOl/3D7GNyEp1NmXrOPkKcrfkZ3ystSmn/f+mbtyUiDNd9Nr7Io3JixNIF8yIYzyALFsgdOvZ1lmpy4K5FjxOcmeZyDH6650suZaXye1jP9sWwkktZ0BDiLHwtLO7+ARupFMrDwEb8q0tO9INdM+Jjnn0u7MVEypNd0lTaqiA/yDSsy8b4VZbctEYiB8OVu+vaRkloudRUn7IsPaCfXLDl63vzjeO/xEol9VHSIk5oyU3W06D7Wko8HTGODmMRAzT60bd+YwNmC3e7nos0MMbppC7Xa+NNxMKEKR0ZpxSKz248ZZlulOMJh9ZVRbki+fVuWgkZLwz5f5U1hDq1frNlGUBW7oWph9IhjmvKaR1teIa/Wdn8HjePzyqq3s7B4MoxD8+KQOVTkTRcIXP4WYicFHHZIoCiCkVJYfR2Ju8GoWFzye4BseCmM9oTyqMfU5xrPT0zdGI4SrpZH9ZKQx2en9lbV5Ni4EX9S4mH6cuNsw1lLHIqGDVr4sCOG67m0AucNtyMFTNtN7knip74hcFhs+yMaGG37PU/THsWQ2Zf0qvymQrLJTbdREAPsJghI2syI/Uvr05/t56MeXvn6aIQgkha/jJM7wpSsm5NEnty1DLbTn6RqQiEQen5gMIq+8m4FoGx98maOtxdEZPetF9qzcTJuTiCga+QcitZn14djzVyLHgKdfTp4hgc9npyp5ACoAsx8BSp0BjvDRMblCQ9njDRQazKn+St7O1+7LPgN6KFkgueP0oOAzusFebxS8m68wP7ffVYeODsBNf94mCtY5m84BuXZxQSmTYGj/I3/6gg60hNZnIhUKqqRQ7FHJngg3gu5uMhXAECACD/K080GPHWieSsvFphZC+c2Ek6swcf73zIkRjDea1j4vnYmZKI9H0QFY1FFyC6WBG9lY7pgKOMjQokX/FGngQX68phGOGkAZ7dXut2PvvAX/lJnDZFcJtcEOHSPyTla5nIKbasDUTYPV0xJI7FqoFAewXYZ+quwPrIWflXzFlomK40ibRdbZJ55WEKCRcyLfZLOyvZ0XxZxh0jsUzjg+Tg79DEZFznIKI0owd5Y59I83gYOwLX4btiZKAZ2Pah4imPGwSzkqgE8RKVGaj2iUjnOGFtkqZKzzwl1yQ2o+BymCGOr8XA+Q8BYoI9xMSq0xwo0i/yhGSntl/miQqtpvBr7HXBk2ab2S3CL1v51ldY1V+M0lfcJIjI/OnEcfYZTK5/rWBmPydhXAPdFucgJTqL1WIshiJ+mIxnMCLlCbuf9TyYD+faeOjzFkhVuuKtgIK18SnrfuN1FuNOwvPkgUtJeH6vErWLKbexdcRFxCWQmd1iO2eJIf3NfBajMpGCSN+J6WmRsVr/7Tazyd5EAkxKRPhMcrX3htL/Qevo/Q/knzadrKgeS5k1637j5kz7jYjrfQ1oFOYtNeDG2KmCDCa2kdZXm4KOVuQjUCjNDbtsFlO7koGb8hcUmcS7PuqTA5rvILHiWh7JWsZwezZteHFl3h8KjCVtx2W3fITvYYUfYMIk9DI03E6wF2iiE5A4V+tu6TsxTmJBtz8cOgNvPsLQU/ZU57VZf6M/3cCINyT5q+4kDNLBRzN8Rl1YaqQoW4abpfKwUky5MbIzcNwDdom2tL4NlGbY6tJG8UDvmOR6Ymq+GYcsypjl5SV1vz9598em34DPXUgjS8B3OY="> 
   </div> 
   <script type="text/javascript">
//<![CDATA[
var theForm = document.forms['Form'];
if (!theForm) {
    theForm = document.Form;
}
function __doPostBack(eventTarget, eventArgument) {
    if (!theForm.onsubmit || (theForm.onsubmit() != false)) {
        theForm.__EVENTTARGET.value = eventTarget;
        theForm.__EVENTARGUMENT.value = eventArgument;
        theForm.submit();
    }
}
//]]>
</script> 
   <script src="https://dmcdn.f5.com/WebResource.axd?d=noLaiwcWTQsRgxQbXZNOY0tm-7_AUEqyROXumXZpxR2M2i1THMJtY4UEifkWItEip5Uu-yCxbt5ENZh00&amp;t=635792775671809273" type="text/javascript"></script> 
   <script src="https://dmcdn.f5.com/Telerik.Web.UI.WebResource.axd?_TSM_HiddenField_=ScriptManager_TSM&amp;compress=1&amp;_TSM_CombinedScripts_=%3b%3bSystem.Web.Extensions%2c+Version%3d4.0.0.0%2c+Culture%3dneutral%2c+PublicKeyToken%3d31bf3856ad364e35%3aen-US%3a93a6b8ed-f453-4cc5-9080-8017894b33b0%3aea597d4b%3ab25378d2" type="text/javascript"></script> 
   <div class="aspNetHidden"> 
    <input type="hidden" name="__VIEWSTATEGENERATOR" id="__VIEWSTATEGENERATOR" value="CA0B0334"> 
    <input type="hidden" name="__VIEWSTATEENCRYPTED" id="__VIEWSTATEENCRYPTED" value=""> 
    <input type="hidden" name="__EVENTVALIDATION" id="__EVENTVALIDATION" value="46XiZBCUErIy6E4owTTSDzqS4zdBRBlke2kcXZfvtljrG4UcQmRHRnLKH+75071Lf2IY4R4UZKUysYnz/vGPSvgYVsLpnZg9xaYlwz+RalyebF/2Y4XkOUArqibn3fgl5kLYIPS0rAUBhrsU1UP7lqQxHzc/JuFnLwA7sBfTbmv/bRh6wQn9DF7dkc+Y4HOWI+D5nGgXgnKapaBXGwZR0tTD2beFFWx5hLIbj8tvFA2eWyfnqLzAcraGCw3nrOsjbElAeINU5zgw4uij6UQfjYiAycRwxClhZDu7LOamx2tJ9oviaexmP6vVXzv1eunUtE2KZTQ1h74ALEZMNWfwdXxQqYDGsS7QACHtx4d0BlLvdEuWov2L9KJ3ErQVZsXzMV7EzjtuTkYNT2M37jFGYy3pjh4Le9zdK3Y+Qg=="> 
   </div>
   <script src="https://dmcdn.f5.com/dh/73d7783b349dbb2407ff2121b3268e40.js" type="text/javascript"></script>
   <script type="text/javascript">
//<![CDATA[
Sys.WebForms.PageRequestManager._initialize('ScriptManager', 'Form', [], [], [], 90, '');
//]]>
</script> 
   <!--40Fingers Stylehelper Conditions Return True--> 
   <div id="Wrapper" class="F5 default meta-open"> 
    <header id="Header" role="banner"> 
     <div id="dnn_HeaderModulePane">
      <div class="DnnModule DnnModule-F5ModulesHeader DnnModule-3715">
       <a name="3715"></a> 
       <section class="DNNContainer_noTitle clearfix container-margin-2x"> 
        <span id="dnn_ctr3715_ContentPane">
         <!-- Start_Module_3715 -->
         <div id="dnn_ctr3715_ModuleContent" class="DNNModuleContent ModF5ModulesHeaderC"> 
          <div class="f5-header main-content header-C5 clearfix"> 
           <div class="half-background secondary-content"></div> 
           <div class="container"> 
            <style type="text/css">
          .nav-breadcrumb, .nav-breadcrumb a {
              color: white !important;
          }
    </style> 
            <ol class="nav-breadcrumb"> 
             <li itemprop="child" itemscope itemtype="http://data-vocabulary.org/Breadcrumb"><a href="/" itemprop="url" class="a-breadcrumb" rel="Home">Home</a>&nbsp;</li>
             <li itemprop="child" itemscope itemtype="http://data-vocabulary.org/Breadcrumb"><a href="https://f5.com/resources" itemprop="url" class="a-breadcrumb"><span itemprop="title">Resources</span></a>&nbsp;</li> 
            </ol> 
            <div class="table-row"> 
             <div class="content-box "> 
              <h1 class="header-title" style="color:#ffffff;">White Papers</h1> 
              <div class="message"></div> 
             </div> 
            </div> 
           </div> 
          </div> 
          <script type="text/javascript">
    $(document).ready(function () {
    var imgPath = "/Portals/1/Images/F5/Solutions/",
        mainImageID = "",
		backgroundColor = "adafaf",
		backgroundRepeat = "",
		backgroundPosition = "",
		lowerImageID = "solutions-resources-c5-header-gray.jpg",
		$mainPane = $(".main-content"),
		size = "",
		width = $(window).width();

    if (imgPath.charAt(0) != "/") {
        imgPath = "/" + imgPath;
    }

    if (imgPath.charAt(imgPath.length - 1) != "/") {
        imgPath = imgPath + "/";
    }

    switch (true) {
        case (width > 1200):
            size = "-lg";
            break;
        case (width < 769):
            size = "-xs";
            break;
        case (width < 992):
            size = "-sm";
            break;
        default:
            size = "-md";
    }

    if (mainImageID) {
		var imageExt = mainImageID.split(".").pop();
		var imageFile = mainImageID.replace("." + imageExt, "") + size + "." + imageExt + "?cdv=797";
		$mainPane.css("background-image", "url('" + imgPath + imageFile + "')");
	}

	if (backgroundColor) {
		if (backgroundColor.charAt(0) != "#") {
			backgroundColor = "#" + backgroundColor;
		}

		$mainPane.css("background-color", backgroundColor);
	}

	if (backgroundRepeat) {
		$mainPane.css("background-repeat", backgroundRepeat);
	}

	if (backgroundPosition) {
		$mainPane.css("background-position", backgroundPosition);
	}

	if (lowerImageID) {
		$(".secondary-content").css("background-image", "url('" + imgPath + lowerImageID + "')");
	}
});

</script> 
         </div>
         <!-- End_Module_3715 --></span> 
       </section> 
      </div>
     </div> 
    </header> 
    <span id="dnn_PlainPane" class="DNNEmptyPane"></span> 
    <span id="dnn_FullWidthTopPane" class="DNNEmptyPane"></span> 
    <!-- Page Container --> 
    <section class="container mainSection"> 
     <!-- panes --> 
     <!-- Content Pane --> 
     <div class="clearfix"> 
      <span id="dnn_ContentPane">
       <div class="DnnModule DnnModule-F5ModulesArticles DnnModule-2421">
        <a name="2421"></a> 
        <section class="DNNContainer_noTitle clearfix container-margin-2x"> 
         <span id="dnn_ctr2421_ContentPane">
          <!-- Start_Module_2421 -->
          <div id="dnn_ctr2421_ModuleContent" class="DNNModuleContent ModF5ModulesArticlesC"> 
           <!-- dnn:DnnJsInclude run at="server" FilePath="~/DesktopModules/F5/Articles/Scripts/articles.action.js" / --> 
           <!--CDF(Css|/css/component-legacy-articles.css)--> 
           <div id="article-nav" class="listing-menu clearfix"> 
            <div class="admin-listing-menu"> 
            </div> 
            <a class="btn-primary btn btn-default articleNav article-listings-link" data-nav-key="" href="https://f5.com/resources/white-papers">All White Papers</a> 
           </div> 
           <!--CDF(Javascript|~/resources/shared/components/f5Toolbar/f5.toolbar.action.js)--> 
           <!--CDF(Javascript|/DesktopModules/F5/Articles/Scripts/jquery.bootpag.min.js)--> 
           <!--CDF(Javascript|/DesktopModules/F5/Articles/Scripts/articles.pagination.js)--> 
           <!--CDF(Javascript|/js/f5-toc.min.js)--> 
           <!--CDF(Css|/css/component-toc.css)--> 
           <article class="article whitepaper clearfix" itemscope itemtype="http://schema.org/Article" style="position:relative"> 
            <meta itemprop="inLanguage" content="en-US"> 
            <div class="col-xs-12">
             <p class="content-type">White Paper</p>
            </div> 
            <section class="content"> 
             <header> 
              <h1 class="title">F5 DDoS Protection: Recommended Practices (Volume 1)</h1> 
              <p class="date-small">Updated December 29, 2013</p> 
              <div class="social"> 
               <div class="pull-left"> 
                <p><strong>by David Holmes</strong> <em></em></p> 
               </div> 
               <a class="addthis_button_favorite"><i class="icon-star-full"></i></a> 
               <a class="addthis_button_compact"><i class="icon-share"></i></a> 
               <script src="https://s7.addthis.com/js/300/addthis_widget.js#async=1" type="text/javascript"></script> 
               <script type="text/javascript">
                    // run social button on user interaction.
                    $(document).ready(function () {
                        $('.social').one("mouseenter", function () {
                            addthis.init();
                        });
                    });
                </script> 
               <a class="addthis_button_print"><i class="icon-print"></i></a> 
               <a href="https://f5.com/resources/white-papers/f5-ddos-protection-recommended-practices/mode/pdf" rel="nofollow"><i class="icon-download"></i></a> 
              </div> 
             </header> 
             <div class="article-body block-margin-bot clearfix"> 
              <div class="no-page-break"> 
               <h2>1 Concept</h2> 
               <p>Distributed Denial-of-Service (DDoS) is a top concern for many organizations today, from high-profile financial industry brands to service providers. Experienced administrators know that F5 equipment is not only well-suited to mitigating DDoS attacks, but sometimes is the only equipment that can mitigate certain types of DDoS. What many administrators do not know is that a complete on- premises DDoS solution can be achieved with a complement of F5 products.</p> 
              </div> 
              <p>A DDoS attack can be a stressful engagement where parts of the network will be unresponsive and equipment may be failing all around. That is not the time to be planning a defense—preparing your network applications during "peacetime" will go a long way to helping you mitigate the attack in the future.</p> 
              <p>This guide assumes that you have a F5 networking solution and an optional F5 security solution.</p> 
              <p>All configurations, commands, and platforms are assumed to be TMOS 11.3.0 unless otherwise stated.</p> 
              <p>Even though much of the technical information is specific to F5 equipment, some of the strategies (such as the use of SNAT pools to avoid port exhaustion) may apply to other vendors' devices as well.</p> 
              <div class="no-page-break"> 
               <h2>2 DDoS-Resistant Architecture</h2> 
               <p>It is possible to build an application delivery network that is DDoS-resistant. This section discusses work that can be done prior to an attack to make the network and applications resilient.</p> 
              </div> 
              <div class="no-page-break"> 
               <h3>2.1 F5's Recommended Architecture</h3> 
               <figure>
                <a href="/Portals/1/Images/whitepaper-images/DDoS%20Protection%20RA/images/rp-fig-1wp-fig-1.png"><img alt="diagram" src="/Portals/1/Images/whitepaper-images/DDoS%20Protection%20RA/images/rp-fig-1wp-fig-1.png"></a> 
                <figcaption>
                 Figure 1: F5 recommends a two-tier DDoS approach
                </figcaption> 
               </figure> 
              </div> 
              <p>Many organizations are redesigning their architecture for DDoS resistance. For many customers, F5 recommends a two-tier DDoS solution, where the first (perimeter) tier is composed of layer 3 and 4 network firewalling and simple load-balancing to a second tier of more sophisticated (and also more CPU intensive) services including SSL termination and Web Application Firewalling.</p> 
              <p>There are several benefits of the two-tier approach:</p> 
              <ul> 
               <li>Mitigation can be isolated so that layer 3 and 4 are mitigated at tier 1, with application protection at tier 2.</li> 
               <li>The tiers can be scaled independently of one another. For example, if WAF usage grows, another appliance (or blade) can be added to the second tier without affecting the first tier.</li> 
               <li>The tiers can have different platform types and even different software versions.</li> 
               <li>When new policies are applied at the second tier, the first tier can direct just a portion of traffic to the new policies until they are fully validated.</li> 
              </ul> 
              <figure class="table-responsive"> 
               <table class="table table-bordered"> 
                <tbody> 
                 <tr> 
                 </tr> 
                </tbody> 
                <thead> 
                 <tr> 
                  <th>&nbsp;</th> 
                  <th>Tier 1</th> 
                  <th>Tier 2</th> 
                  <th>DMZ</th> 
                 </tr> 
                </thead> 
                <tbody> 
                 <tr> 
                  <td>F5 Components</td> 
                  <td>AFM + LTM</td> 
                  <td>LTM + ASM</td> 
                  <td>GTM DNS Express</td> 
                 </tr> 
                 <tr> 
                  <td>OSI Model</td> 
                  <td>Layers 3 + 4</td> 
                  <td>Layer 7+</td> 
                  <td>DNS</td> 
                 </tr> 
                 <tr> 
                  <td rowspan="3">Capabilities</td> 
                  <td>Network Firewall</td> 
                  <td>SSL Termination</td> 
                  <td>&nbsp;</td> 
                 </tr> 
                 <tr> 
                  <td>First—Tier Load Balancing</td> 
                  <td>Web Application Firewall</td> 
                  <td>DNS Resolution</td> 
                 </tr> 
                 <tr> 
                  <td>IP Reputation Blacklists</td> 
                  <td>Balancing</td> 
                  <td>&nbsp;</td> 
                 </tr> 
                 <tr> 
                  <td rowspan="5">Attacks Mitigated</td> 
                  <td>SYN Floods</td> 
                  <td>Slowloris</td> 
                  <td>&nbsp;</td> 
                 </tr> 
                 <tr> 
                  <td>ICMP Floods</td> 
                  <td>Slow-post</td> 
                  <td>UDP Floods</td> 
                 </tr> 
                 <tr> 
                  <td>Malformed Packets</td> 
                  <td>Apache Killer</td> 
                  <td>DNS Floods</td> 
                 </tr> 
                 <tr> 
                  <td>TCP Flood</td> 
                  <td>RUDY / Keep Dead</td> 
                  <td>NXDOMAIN Floods</td> 
                 </tr> 
                 <tr> 
                  <td>Known Bad Actors</td> 
                  <td>SSL Renegotiation</td> 
                  <td>DNSSEC</td> 
                 </tr> 
                </tbody> 
               </table> 
              </figure> 
              <div class="no-page-break"> 
               <h3>2.2 Tier 1: Network Defense</h3> 
               <p>The first tier is built around the network firewall. You almost certainly already have a network firewall (it may or may not be F5) and a network firewall team (or at least an administrator). At this tier you will prepare defenses around layer 3 and 4 (IP and TCP). This is where you will mitigate SYN floods, TCP floods, and block source addresses during a DDoS attack.</p> 
              </div> 
              <p>The following sections apply to the equipment at tier 1, whether that is the F5 AFM firewall module or an F5 LTM load-balancer in front of another vendor's network firewall.</p> 
              <figure class="col-sm-4 right gutter-content">
               <a href="/Portals/1/Images/whitepaper-images/DDoS%20Protection%20RA/images/wp-fig-2-rp-fig-2.png"><img alt="diagram" src="/Portals/1/Images/whitepaper-images/DDoS%20Protection%20RA/images/wp-fig-2-rp-fig-2.png"></a>
              </figure> 
              <h4>2.2.1 Choosing Virtual Server Types</h4> 
              <p>Organizations using either the F5 firewall (AFM) or the F5 load-balancer (LTM) at tier 1 have a choice about how to structure their configuration. There are four options for defining a "listening" object. While all of these are valid ways to arrange the configuration, some have different strengths when dealing with DDoS.</p> 
              <ul> 
               <li><strong>Full-Proxy Virtual Servers</strong> are the standard virtual servers in an F5 configuration. These listeners establish a real connection with each incoming client before they initiate a secondary connection to the server. The very act of terminating and validating the client connection provides a broad range of protection before the second tier is even invoked.</li> 
               <li><strong>Forwarding Virtual Servers</strong> perform faster and still protect against SYN floods, but do not provide the broader level as protection that full proxy virtual servers do.</li> 
               <li><strong>Wildcard Virtual Servers</strong> allow the <strong>decoupling of firewall rules from the application virtual server</strong>. This enables the creation of a rule that says "for any address supplying FTP services, apply this ruleset, this mirroring policy, and this source NAT policy."</li> 
               <li><strong>Route Domains</strong>, which isolate duplicate IP subnets into logical, separate routing tables, are common in service provider environments. While route domains provide little or no benefit regarding DDoS in and of themselves, they can be used as pegs on which to hang layer 4 security policies.</li> 
              </ul> 
              <figure>
               <a href="/Portals/1/Images/whitepaper-images/DDoS%20Protection%20RA/images/rp-fig-3.png"><img alt="diagram" src="/Portals/1/Images/whitepaper-images/DDoS%20Protection%20RA/images/rp-fig-3.png"></a> 
               <figcaption>
                Figure 2: Wildcard servers are an option at tier 1
               </figcaption> 
              </figure> 
              <pre>
ltm virtual ws_ftp { 
destination 0.0.0.0:ftp 
ip-protocol tcp 
profiles { ftp { } tcp { } } 
translate-address disabled 
}
</pre> 
              <p>In general, <strong>F5 recommends the use of Full Proxy or Forwarding Virtual Servers</strong> at Tier 1 when DDoS is a top concern.</p> 
              <h4>2.2.2 Mitigate SYN floods at Tier 1</h4> 
              <p>TCP SYN floods are always mitigated by F5. In version 11.5, F5 even migrates SYN floods against Direct server Return (DSR) virtual servers. To verify that your BIG-IP is managing SYN flood protection, you can view SYN flood statistics for each individual virtual server with the simple <strong>show</strong> command.</p> 
              <pre>
% tmsh show ltm virtual vip1
…

SYN Cookies

 Status full-software

 Hardware SYN Cookie Instances 0

 Software SYN Cookie Instances 2

 Current SYN Cache 0

 SYN Cache Overflow 0

 Total Software 432.2K

 Total Software Accepted 0

 Total Software Rejected 0

 Total Hardware 0

 Total Hardware Accepted 0
</pre> 
              <p>Many F5 platforms can mitigate SYN floods in hardware, which allows the main traffic steering CPUs to perform other tasks.</p> 
              <figure class="table-responsive"> 
               <table class="table table-bordered"> 
                <tbody> 
                 <tr> 
                 </tr> 
                </tbody> 
                <thead> 
                 <tr> 
                  <th>Platform</th> 
                  <th>Hardware SYNs per second</th> 
                  <th>Version</th> 
                 </tr> 
                </thead> 
                <tbody> 
                 <tr> 
                  <td>B4300 Blade</td> 
                  <td>80M</td> 
                  <td>11.3</td> 
                 </tr> 
                 <tr> 
                  <td>B2100 Blade</td> 
                  <td>40M</td> 
                  <td>11.3</td> 
                 </tr> 
                 <tr> 
                  <td>10200V</td> 
                  <td>80M</td> 
                  <td>11.3</td> 
                 </tr> 
                 <tr> 
                  <td>10000S</td> 
                  <td>40M</td> 
                  <td>11.4</td> 
                 </tr> 
                 <tr> 
                  <td>7200V</td> 
                  <td>40M</td> 
                  <td>11.4</td> 
                 </tr> 
                 <tr> 
                  <td>7000S</td> 
                  <td>20M</td> 
                  <td>11.4</td> 
                 </tr> 
                 <tr> 
                  <td>5200V</td> 
                  <td>40M</td> 
                  <td>11.4</td> 
                 </tr> 
                 <tr> 
                  <td>5000S</td> 
                  <td>20M</td> 
                  <td>11.4</td> 
                 </tr> 
                 <tr> 
                  <td class="small text-left" colspan="3">*Older platforms including 8800, 8400, 6800 and 6400 also include hardware SYN cookie support; however, those models are not supported by version 11.3, which is the basis for this document.</td> 
                 </tr> 
                </tbody> 
               </table> 
               <figcaption>
                Table 1: SYN Flood Hardware Support Platform List
               </figcaption> 
              </figure> 
              <p>To enable hardware offload for SYN flood mitigation for a specific virtual server, create a tcp profile with a tighter security posture. This example sets two DDoS-related variables. It enables hardware <strong>SYN cookies</strong>. It also sets the <strong>deferred-accept</strong> variable that reduces the impact that "zero-window" TCP attacks can have on the virtual server.</p> 
              <pre>
% tmsh create ltm profile tcp tcp_ddos { hardware-syn-cookie deferred-accept 
enabled zero-window-timeout 10000 }
</pre> 
              <p>Then associate the new tcp profile with the virtual server by replacing the existing "tcp" profile.</p> 
              <pre>
% tmsh list ltm virtual vip1 profiles

% tmsh modify ltm virtual vip1 profiles replace-all-with { tcp_ddos my_ddos1 
http }
</pre> 
              <div class="no-page-break"> 
               <h4>2.2.3 Deny UDP and UDP Floods at Tier 1</h4> 
               <p>UDP floods are a common DDoS vector, because they are easy to generate and can be hard to defend. In general, do not allow UDP traffic to a virtual server unless the application behind it is actively accepting it.</p> 
              </div> 
              <p>Even for applications that accept UDP, a UDP flood can overwhelm the system, and you may find it necessary to temporarily deny UDP traffic to the application's virtual server.</p> 
              <pre>
% tmsh create security firewall rule-list drop_udp { rules add { drop_udp_rule 
{ action drop ip-protocol udp place-after first } } }

% tmsh modify ltm virtual vip1 fw-rules { drop_udp_vip1 { rule-list drop_udp } 
} }
</pre> 
              <p>When the attack has ceased, you can remove the rule from the virtual server.</p> 
              <p>Version 11.5 can monitor and mitigate UDP floods with granular exceptions. This enables a baseline of UDP traffic to pass through a virtual server at tier 1. If the UDP traffic exceeds the thresholds, it is dropped, unless it matches one of eight user-defined port exceptions (for example, RTSP or DNS).</p> 
              <h4>2.2.4 Deny ICMP Floods</h4> 
              <p>ICMP is another common DDoS vector. ICMP fragments are easy to generate and easy to spoof, and can tie up resources on many different types of networking devices.</p> 
              <p>AFM can differentiate between a normal amount of ICMP and an ICMP flood based on traffic pattern analysis. When AFM's network firewall is enabled on a virtual server, it will monitor for an increase in several types of traffic. A normal amount will be allowed, with the rest of the flood prohibited.</p> 
              <figure>
               <a href="/Portals/1/Images/whitepaper-images/DDoS%20Protection%20RA/images/rp-fig-4.jpg"><img alt="screen shot" src="/Portals/1/Images/whitepaper-images/DDoS%20Protection%20RA/images/rp-fig-4.jpg"></a> 
               <figcaption>
                &nbsp;
               </figcaption> 
              </figure> 
              <h4>2.2.5 Use the DDoS Device Profile of AFM</h4> 
              <p>One way that attackers can consume firewall resources is by throwing floods of specially crafted invalid packets. The firewall will need to look at (and log) each packet. F5 has found that suspect combinations of flags (such as PSH+ACK with empty payloads) can be popular one month and then be abandoned in favor of a different combination later.</p> 
              <p>This shifting landscape makes it difficult to be predictive about what L3/L4 attacks are likely to happen. The security administrator (for other vendors' firewalls) should be aware of these attacks and be ready to insert rules to block them, taking care to avoid using more CPU than necessary.</p> 
              <p>F5's approach to this has problem has been to move much of the L3/L4 protocol validation into the custom hardware logic on the TMOS platforms that support it. By default, the AFM module is monitoring for dozens of layer 3 and layer 4 DDoS attack vectors such as floods of Christmas tree packets or LAND attack packets. Nearly all of these packets are discarded regardless of any BIG-IP setting. AFM can send a special log message when a flood of these packets is detected.</p> 
              <p>Table 1 shows which TMOS platforms have support for hardware-assisted L3/L4 protocol validation. These are the same platforms that have SYN flood hardware support.</p> 
              <p>All platforms (including the virtual edition) allow management of the parameters that track these L3/L4 suspect packet floods. The management screen is available from the Security tab of the user interface. Then select <strong>DoS Protection</strong> and <strong>Device Configuration</strong>.</p> 
              <figure>
               <a href="/Portals/1/Images/whitepaper-images/DDoS%20Protection%20RA/images/rp-fig-5.jpg"><img alt="screen shot" src="/Portals/1/Images/whitepaper-images/DDoS%20Protection%20RA/images/rp-fig-5.jpg"></a> 
               <figcaption>
                Figure 3: Network DDoS Configuration Settings
               </figcaption> 
              </figure> 
              <p>These settings are also available via the command-line with the <strong>security dos device-config</strong> command. Also note that these settings are per traffic management microkernel (tmm), not per platform. In the table, the columns map to these values.</p> 
              <ul> 
               <li><strong>Detection Threshold PPS.</strong> This is the number of packets per second (of this attack type) that the BIG-IP system uses to determine if an attack is occurring. When the number of packets per second goes above the threshold amount, the BIG-IP system logs and reports the attack, and then continues to check every second, and marks the threshold as an attack as long as the threshold is exceeded.</li> 
               <li><strong>Detection Threshold Percent.</strong> This is the percentage increase value that specifies an attack is occurring. The BIG-IP system compares the current rate to an average rate from the last hour. For example, if the average rate for the last hour is 1000 packets per second, and you set the percentage increase threshold to 100, an attack is detected at 100 percent above the average, or 2000 packets per second. When the threshold is passed, an attack is logged and reported. The BIG-IP system then automatically institutes a rate limit equal to the average for the last hour, and all packets above that limit are dropped. The BIG-IP system continues to check every second until the incoming packet rate drops below the percentage increase threshold. Rate limiting continues until the rate drops below the specified limit again.</li> 
               <li><strong>Default Internal Rate Limit.</strong> This is the value, in packets per second, that cannot be exceeded by packets of this type. All packets of this type over the threshold are dropped. Rate limiting continues until the rate drops below the specified limit again.</li> 
              </ul> 
              <h4>2.2.6 Mitigate TCP Connection Floods</h4> 
              <p>TCP Connection floods are a layer 4 anomaly and can affect any stateful device on the network, especially firewalls. Often these floods are empty of actual content. LTM or AFM at the first tier can mitigate these by absorbing the connections into high-capacity connection tables.</p> 
              <figure class="table-responsive"> 
               <table class="table table-bordered"> 
                <tbody> 
                 <tr> 
                 </tr> 
                </tbody> 
                <thead> 
                 <tr> 
                  <th>Platform</th> 
                  <th>TCP connection Table Size</th> 
                  <th>SSL connection Table Size</th> 
                 </tr> 
                </thead> 
                <tbody> 
                 <tr> 
                  <td>VIPRION 4480 (4 X B4300)</td> 
                  <td>144 Million</td> 
                  <td>32 Million</td> 
                 </tr> 
                 <tr> 
                  <td>VIPRION 4480 (1 X B4300)</td> 
                  <td>36 Million</td> 
                  <td>8 Million</td> 
                 </tr> 
                 <tr> 
                  <td>VIPRION 4400 (4 X B4200)</td> 
                  <td>48 Million</td> 
                  <td>5 Million</td> 
                 </tr> 
                 <tr> 
                  <td>VIPRION 4400 (1 x B4200)</td> 
                  <td>12 Million</td> 
                  <td>1 Million</td> 
                 </tr> 
                 <tr> 
                  <td>VIPRION 2400 (4 x B2100)</td> 
                  <td>48 Million</td> 
                  <td>10 Million</td> 
                 </tr> 
                 <tr> 
                  <td>VIPRION 2400 (1 x B2100)</td> 
                  <td>12 Million</td> 
                  <td>2.5 Million</td> 
                 </tr> 
                 <tr> 
                  <td>11000 series</td> 
                  <td>24-30 Million</td> 
                  <td>2.64-3.9 Million</td> 
                 </tr> 
                 <tr> 
                  <td>10200 series</td> 
                  <td>36 Million</td> 
                  <td>7 Million</td> 
                 </tr> 
                 <tr> 
                  <td>8900 series</td> 
                  <td>12 Million</td> 
                  <td>2.64 Million</td> 
                 </tr> 
                </tbody> 
               </table> 
              </figure> 
              <figure class="table-responsive"> 
               <table class="table table-bordered"> 
                <thead> 
                 <tr> 
                  <th>Platform</th> 
                  <th>TCP connection Table Size</th> 
                  <th>SSL connection Table Size</th> 
                 </tr> 
                </thead> 
                <tbody> 
                 <tr> 
                  <td>7000 series</td> 
                  <td>24 Million</td> 
                  <td>4 Million</td> 
                 </tr> 
                 <tr> 
                  <td>6900 series</td> 
                  <td>6 Million</td> 
                  <td>660 Thousand</td> 
                 </tr> 
                 <tr> 
                  <td>5000 series</td> 
                  <td>24 Million</td> 
                  <td>4 Million</td> 
                 </tr> 
                 <tr> 
                  <td>4200V series</td> 
                  <td>10 Million</td> 
                  <td>2.4 Million</td> 
                 </tr> 
                 <tr> 
                  <td>3900 series</td> 
                  <td>6 Million</td> 
                  <td>660 Thousand</td> 
                 </tr> 
                 <tr> 
                  <td>Virtual Edition</td> 
                  <td>3 Million</td> 
                  <td>660 Thousand</td> 
                 </tr> 
                </tbody> 
               </table> 
              </figure> 
              <h4>2.2.7 Configure Adaptive Reaping</h4> 
              <p>Even with high-capacity connection tables, there are still settings that can be adjusted to deepen the protection profile against flood attacks.</p> 
              <p>In the event that the BIG-IP connection table does become full, connections will be "reaped" according to the adaptive reaping low-water and high-water settings. These can be adjusted downward from the default values of 85 and 95 in order to begin mitigating a "spiky" DDoS faster, and thus reducing the window during which the initial attack will load the servers.</p> 
              <pre>
% tmsh modify ltm global-settings connection adaptive-reaper-lowater 75
</pre> 
              <h4>2.2.8 Modify Idle Timeouts to Combat Empty Connection Floods</h4> 
              <p>While layer 4 connection floods do not typically pose a high risk to F5 devices, they definitely impact other stateful devices such as other firewalls. Those devices will nearly always collapse long before the F5 state tables fill up (see Table 2 in section 2.2.6). If the connection flood consists primarily of empty connections you can instruct BIG-IP to be more aggressive about closing these empty connections.</p> 
              <p>There are three primary profiles associated with layer 4 on BIG-IP:</p> 
              <ul> 
               <li>fastL4—the hardware assisted, high-performance TCP profile</li> 
               <li>tcp—the standard TCP profile used by the majority of virtual servers</li> 
               <li>udp—the standard UDP profile</li> 
              </ul> 
              <p><strong>Note:</strong> You may see others, such as those associated with WAN optimization, which are based on the tcp or udp profiles.</p> 
              <p>Use the following attributes of these profiles to control how long a connection is idle before it is closed by BIG-IP. During a heavy attack, use smaller and smaller values.</p> 
              <p>For the fastL4 profile, override the <strong>reset-on-timeout</strong> and <strong>idle-timeout</strong> values. The default timeout is 300 seconds, which should be trimmed significantly during an attack.</p> 
              <pre>
 % tmsh create ltm profile fastl4 fastl4_ddos { reset-on-timeout disabled idle- timeout 15 } </pre> 
              <p>For each fastL4 virtual server under attack, replace the fastL4 profile with your new one.</p> 
              <p>For the tcp profile, override the same two values for the same reasons. While you are there, you may also want to adjust the <strong>hardware-syn-cookie</strong> and <strong>zero-window-timeout</strong> values. See section 2.2.2.</p> 
              <p>For the udp profile, reduce only the <strong>idle-timeout</strong> value (the default is 60 seconds).</p> 
              <h4>2.2.9 Control Rate-Shaping</h4> 
              <p>Another defensive technique that can be deployed quickly is rate-shaping. Rate-shaping can limit the rate of ingress traffic at the BIG-IP and may be the easiest way to push back against a volumetric attack. While powerful, rate-shaping is a less-than-ideal technique for defending against DDoS. Because it does not differentiate between good and bad requests, rate-shaping can discard your good traffic as well, which is probably not what you want.</p> 
              <p>You configure rate-shaping profiles manually and then assign them to a virtual server.</p> 
              <p>In this example, the rate-shaping class named "protect_apache" guarantees that at least 1mbs of traffic will reach the target, but that no more than 10mbs will be allowed.</p> 
              <pre>
 net rate-shaping class protect_apache { rate 1mbps ceiling 10mbps } </pre> 
              <p>Then apply this rate-shaping class to each of your targeted virtual servers.</p> 
              <h4>2.2.10 Set the Max ICMP Reject Rate</h4> 
              <p>The <strong>TM.MaxRejectRate</strong> system variable can reduce the effects of a denial of service attack by allowing you to limit the number of TCP RSTs or ICMP unreachable packets that the BIG-IP system sends in response to incoming connections that cannot be matched with virtual server connections. The default value for the <strong>TM.MaxRejectRate</strong> system variable is 250 TCP RSTs or 250 ICMP unreachable packets per second.</p> 
              <p>Dropping the value to 100 can contribute to a reduction in outbound congestion without otherwise affecting network performance.</p> 
              <pre>
 % tmsh modify sys db tm.maxrejectrate value 100 </pre> 
              <h4>2.3 Tier 2—Application Defense</h4> 
              <p>The second tier is where you deploy application-aware, CPU-intensive defense mechanisms like login-walls, web application firewall policy and LTM iRules. Tier 2 is also where SSL termination typically takes place. While some organizations terminate SSL at tier 1, it is less common there due to the sensitivity of SSL keys and policies against keeping them at the security perimeter.</p> 
              <h4>2.3.1 Understand GET Floods</h4> 
              <p>Recursive GETs and POSTs are among today's most pernicious attacks. They can be very hard to distinguish from legitimate traffic.</p> 
              <figure class="col-sm-4 left gutter-content">
               <a href="/Portals/1/Images/whitepaper-images/DDoS%20Protection%20RA/images/wp-fig-3-rp-fig-6.png"><img alt="diagram" src="/Portals/1/Images/whitepaper-images/DDoS%20Protection%20RA/images/wp-fig-3-rp-fig-6.png"></a>
              </figure> 
              <p>GET floods can overwhelm databases and servers. GET Floods can also cause a "reverse full pipe." F5 recorded one attacker that was sending 100Mbs of GET queries into a victim and bringing out 20Gbs of data.</p> 
              <p>If you have a signature-based anti-DDoS solution (from F5 or another vendor) leverage it to protect your application. With LTM and ASM, F5 provides many different ways to mitigate difficult application-layer attacks.</p> 
              <p>Mitigations strategies for GET floods include:</p> 
              <ul> 
               <li>The Login-Wall Defense</li> 
               <li>DDoS Protection Profiles</li> 
               <li>Real Browser Enforcement</li> 
               <li>CAPTCHA</li> 
               <li>Request-Throttling iRules</li> 
               <li>Custom iRule</li> 
              </ul> 
              <h4>2.3.2 Reduce Threat Surface by Configuring a Login-Wall</h4> 
              <p>The most powerful technique to foil application-level attacks is to allow only authenticated users to access the database portions of your application. Creating a login-wall can be delicate work that is much better done during peacetime and not during a hectic DDoS attack. Note that not all applications can rely on registered users and have to process anonymous traffic, but for those that can, login-walls are the defense.</p> 
              <h4>2.3.2.1 Designate a Login-Wall with ASM</h4> 
              <p>ASM offers facilities to do this within the ASM policy through the use of login pages and login enforcement. This feature will enforce that users may not interact with a set of URLs until they have successfully authenticated themselves at one of the login pages.</p> 
              <figure class="col-sm-8 right">
               <a href="/Portals/1/Images/whitepaper-images/DDoS%20Protection%20RA/images/rp-fig-6.jpg"><img alt="screen shot" src="/Portals/1/Images/whitepaper-images/DDoS%20Protection%20RA/images/rp-fig-6.jpg"></a> 
               <a href="/Portals/1/Images/whitepaper-images/DDoS%20Protection%20RA/images/rp-fig-7.jpg"><img alt="screen shot" src="/Portals/1/Images/whitepaper-images/DDoS%20Protection%20RA/images/rp-fig-7.jpg"></a>
              </figure> 
              <p>First define the login pages from the Security ? Application Security ? Sessions and Logins screen.</p> 
              <p>Then use the <strong>Login Enforcement</strong> tab to specify which pages need to be protected. Ideally these will be large objects such as .MP4s and .PDFs, and any database queries that could be used against you in an asymmetric attack.</p> 
              <p>For a full explanation of the Login Enforcement feature, see the section "<a href="//support.f5.com/kb/en-us/products/big-ip_asm/manuals/product/asm-config-11-2-0/asm_security_policy.html#1038794">Creating Login Pages"</a> in the ASM configuration guide.</p> 
              <p><strong>Note:</strong> If you are not sure what resources to protect, youReconnoiter Your Own Applications&gt; can reconnoiter your own applications— see section 3.2.2.</p> 
              <h4>2.3.2.2 Script a Login-Wall</h4> 
              <p>You can make a login-wall with just an LTM iRule by setting a specific cookie at the login page, and then checking that cookie on every other page. Create this iRule, attach it and test it. Then detach it and keep it in your library to be activated as necessary.</p> 
              <p>Here's a link to a <a href="https://devcentral.f5.com/wiki/iRules.Simple-Login-Wall-iRule-Redirect-unauthenticated-users-back-to-login-page.ashx">login-wall iRule</a> on DevCentral.</p> 
              <h4>2.3.2.3 Protect Applications with DoS Protection Profiles</h4> 
              <p>The F5 Web Application Firewall, ASM, includes application-specific "DoS profiles." These powerful profiles detect DoS conditions by monitoring <strong>server latency or http request rates</strong>. ASM can then trigger an optional iRule event as the attack is mitigated.</p> 
              <p>The mitigation options are:</p> 
              <p>Use the following commands to create a DoS profile and attach it to the application:</p> 
              <pre>
% tmsh create security dos profile my_dos_prof { application add { Lrule1 { 
latency-based { url-rate-limiting enabled mode blocking } } } }

% tmsh modify ltm virtual my_vip1 profiles add { my_dos_prof }
</pre> 
              <p>You can access this DoS profile from the Security tab. Then select DoS Protection. From that screen check Application Security and then configure the L7DOS protection parameters.</p> 
              <figure>
               <a href="/Portals/1/Images/whitepaper-images/DDoS%20Protection%20RA/images/rp-fig-8.jpg"><img alt="screen shot" src="/Portals/1/Images/whitepaper-images/DDoS%20Protection%20RA/images/rp-fig-8.jpg"></a> 
               <figcaption>
                Figure 4. Configuration for the ASM Module's comprehensive L7DOS protection
               </figcaption> 
              </figure> 
              <h4>2.3.2.4 Enforce Real Browsers</h4> 
              <p>Besides authentication and tps-based detection (section 2.3.2.3), there are additional ways that F5 devices can separate real web browsers from probable bots.</p> 
              <p>The easiest way, with ASM, is to create a DoS protection profile and turn on the "Source IP-Based Client Side Integrity Defense" option. This will inject a JavaScript redirect into the client stream and verify each connection the first time that source IP address is seen.</p> 
              <figure>
               <img alt="screen shot" src="/Portals/1/Images/whitepaper-images/DDoS%20Protection%20RA/images/rp-fig-9.jpg"> 
               <figcaption>
                Figure 5. Insert a Javascript Redirect to verify a real browser
               </figcaption> 
              </figure> 
              <p>From the command line:</p> 
              <pre>
 % modify security dos profile my_ddos1 application modify { Lrule1 { tps-based { ip-client-side-defense enabled } } } </pre> 
              <div class="no-page-break"> 
               <h4>2.3.2.5 Throttle GET Request Floods via Script</h4> 
               <p>The F5 DevCentral community has developed several powerful iRules that automatically throttle GET requests. Customers are continually refining these to keep up with current attack techniques.</p> 
              </div> 
              <p>Here is one of the iRules that is simple enough to be represented in this document. The live version can be found at this DevCentral page: <a href="https://devcentral.f5.com/wiki/iRules.HTTP-Request-Throttle-version-10-1-and-above.ashx" title="HTTP-Request-Throttle">HTTP-Request-Throttle</a></p> 
              <pre>
when RULE_INIT {

 # Life timer of the subtable object. Defines how long this object exist in the 
subtable

 set static::maxRate 10

 # This defines how long is the sliding window to count the requests.

 # This example allows 10 requests in 3 seconds

 set static::windowSecs 3

 set static::timeout 30

}

when HTTP_REQUEST {

 if { [HTTP::method] eq "GET" } {

 set getCount [table key -count -subtable [IP::client_addr]]

 if { $getCount &lt; $static::maxRate } {

 incr getCount 1

 table set -subtable [IP::client_addr] $getCount "ignore" 
$static::timeout $static::windowSecs

 } else {

 HTTP::respond 501 content "Request blockedExceeded requests/sec 
limit."

 return

 }

 }

}
</pre> 
              <p>Another iRule, which is in fact descended from the above, is an advanced version that also includes a way to manage the banned IPs address from within the iRule itself:</p> 
              <ul> 
               <li>Drop the suspicious connections.</li> 
               <li>Return a JavaScript redirect to the client to enforce that a browser is being used.</li> 
               <li>Rate-limit by client address or URI.</li> 
               <li><a href="https://devcentral.f5.com/wiki/iRules.HTTP-URI-Request-Limiter.ashx%3FNoRedirect%3D1%26NS%3DiRules" title="URI-Request Limiter iRule">URI-Request Limiter iRule</a>—Drops excessive HTTP requests to specific URIs or from an IP</li> 
              </ul> 
              <h4>2.3.2.6 Use CAPTCHAs to Eliminate Bots</h4> 
              <p>Another way to mitigate GET floods is by verifying "humanness" by using a CAPTCHA mechanism. The CAPTCHA mechanism shows pictures of scrambled words to the user, who proves his or her humanity by typing the words into a web-form. CAPTCHAs are still one of the best ways to distinguish humans from computers even though hackers and researchers have been trying to "break" them for more than ten years. Advances in pattern-recognition algorithms seem to bring attackers close to automating the CAPTCHA system. It is F5's experience, though, that the computational work required to "break" a CAPTCHA vastly decreases the asymmetric advantage of a modern DDoS attacker, and this keeps these attacks theoretical for now. This means that CAPTCHAs are still an effective means of repelling botnets.</p> 
              <figure class="col-sm-6 right gutter-content">
               <img alt="screen shot" src="/Portals/1/Images/whitepaper-images/DDoS%20Protection%20RA/images/rp-fig-10.jpg"> 
               <figcaption>
                &nbsp;
               </figcaption> 
              </figure> 
              <p>Google offers the reCAPTCHA service, which performs this function while also decoding ancient texts. There is a Google <a href="https://devcentral.f5.com/errors/ServerError.html" title="ReCAPTCHA iRule">ReCAPTCHA iRule</a> on DevCentral that can be used to provide verification that a human is at the other end of the connection. Download the iRule (approximately 150 lines) and edit it to provide some of the basic information (such as your Google reCAPTCHA key and your DNS server). Make it available on your BIG-IP. Attach it to a virtual server and test it, and then keep it ready for deployment.</p> 
              <h4>2.3.3 Script a Custom Mitigation</h4> 
              <p>If all other techniques must be ruled out, you may find it necessary to write a custom iRule to defend your application from an application layer attack. These custom iRules typically fall into one of two categories: filtering and indiscriminate blocking.</p> 
              <p>While this is perhaps the most "manual" of all the techniques in this document, it is also the most powerful and the most used among agile F5 customers. The extreme programmability of F5 iRules gives an administrator the ability to block nearly any kind of attack provided that he or she can script well enough. Security-related iRules protect many organizations today and are one of F5's real differentiators for application-layer DDoS attacks.</p> 
              <p>If the attack leaves you with some outbound Internet access, search devcentral.f5.com for some of the keywords that might match your attack. You may find that an iRule has already been written for you!</p> 
              <p>To write your own iRule, first dissect the attack traffic and find a feature about the incoming attack traffic that you can use to distinguish bad traffic from good. Then write an iRule that detects that traffic and drops it. If you are not an iRule author, there are iRules scattered throughout this document (and all over <a href="https://devcentral.f5.com/" title="DevCentral">DevCentral</a>) that you can use as examples. Attach your new iRule to the application's virtual server.</p> 
              <p>An example of a simple security iRule is this early <strong>Dirt Jumper</strong> iRule, which keys in on the fact that the malware does not include a // in its referrer field.</p> 
              <pre>
when HTTP_REQUEST {

 if { [HTTP::header exists "Referer"] } {

 if { not ([HTTP::header "Referer"] contains "\x2F\x2F") } {

 drop

 }

 }

}
</pre> 
              <p>If you are not able to easily distinguish good traffic from bad, you can write an iRule that discards traffic based on the object being requested. For example, if the attackers are requesting a particular large PDF or MP4 file, you can use an iRule to drop all requests to that object.</p> 
              <pre>
 ltm data-group internal block_uris { records { /faqs/faq.mp4 { } /locator/locations.pdf { } /cgi-bin { } } type string } </pre> 
              <p>You can also use <a href="http://support.f5.com/kb/en-us/products/big-ip_ltm/manuals/product/tmos-concepts-11-4-0/4.html%3Fsr%3D31777694" title="external data groups">external data groups</a> that are hosted outside the BIG-IP.</p> 
              <p>Then use a simple scrubber iRule to drop requests that request URIs that match the data class.</p> 
              <pre>
ltm data-group internal block_uris {

 records {

 /faqs/faq.mp4 { }

 /locator/locations.pdf { }

 /cgi-bin { }

 }

 type string

}
</pre> 
              <p>This is definitely not the best solution, because it will turn away good traffic as well as bad. It may keep your servers alive, but if you have the time and ability to write a rule like the one above, you can usually find something to distinguish good traffic from bad.</p> 
              <h4>2.3.4 Mitigate SSL DDoS at Tier 2</h4> 
              <p>While it is possible and sometimes preferable to terminate SSL at either tier, F5 recommends a physical (non-virtual) appliance for terminating SSL at tier 2. Many SSL DDoS attacks will be mitigated by the very presence of the SSL acceleration hardware used in F5 physical devices. These include:</p> 
              <ul> 
               <li>SSL protocol attacks</li> 
               <li>SSL replay attacks</li> 
               <li>SSL connection floods <p>Whether hardware is used or not, F5 will also mitigate SSL connection floods with adaptive reaping (see section 2.2.7) and a high-capacity connection table (section 2.2.6).</p> <p>The SSL renegotiation attack can be mitigated in one of two ways. In most cases, you can simply temporarily disable the SSL renegotiation feature at the virtual server's SSL clientssl profile. However, very long-lived connections (such as automatic teller machines or database connections) will still require the ability to renegotiate.</p> <h4>2.3.5 Understand Connection Multiplexing and Port Exhaustion</h4> <p>In general, do not perform functions like connection multiplexing and SNAT at tier 1. These functions and associated extras like the insertion of the X-Forwarded-For header should be processed at tier 2.</p> <h4>2.3.5.1 Connection Multiplexing</h4> <p>A layer 7 DDoS can exhaust back-end resources such as connection tables. One way to combat this effect is by multiplexing the connections through the load balancer. On LTM this feature is called OneConnect and can decrease the number of TCP connections used by an order of magnitude while still maintaining (or even improving) overall requests-per second.</p> <p>The OneConnect feature should be tested with each application prior to being used as DDoS defense. Some applications may rely on separate connections per user.</p> <h4>2.3.5.2 Port Exhaustion</h4> <p>A SNAT supports approximately 64,000 concurrent connections per destination IP. A high volume of requests can exceed the 64,000 connection limit and result in TCP port exhaustion. You can use a SNAT pool to overcome this limitation. Configure and set the appropriate IP address within the SNAT pool to mitigate the exhaustion.</p> <p>For example, if your virtual server <strong>vip1</strong> is using simple automap source address translation, you can change it to use a pool of IP addresses with the following commands. This example uses just three addresses to increase the available ports from 64,000 to 192,000.</p> <pre>
% tmsh create ltm snatpool ddos_snatpool members add { 10.1.20.161 10.1.20.162 
10.1.20.163 }

% tmsh modify ltm virtual vip1 source-address-translation { pool ddos_snatpool }
</pre> <p>For each address added to the SNAT pool, you may want to assign a discrete timeout value (the default is indefinite). With an idle timeout, BIG-IP can close idle connections and help protect upstream stateful firewalls.</p> <pre>
 % tmsh modify ltm snat-translation 10.128.20.161 { ip-idle-timeout 60 } </pre> <p>Repeat this command for each of the addresses in your snatpool (10.1.20.162 and 10.1.20.163 in the example above).</p> 
                <div class="no-page-break"> 
                 <h2>3 More DDoS Recommended Practices</h2> 
                 <h3>3.1 Mitigate DNS DDoS</h3> 
                 <p>DNS is the second-most-targeted service after HTTP. When DNS is disrupted, all external data center services (not just a single application) are affected. This single point of total failure, along with the historically under-provisioned DNS infrastructure, makes DNS a very tempting target for attackers. Even when attackers are not specifically targeting DNS, they often inadvertently do: if the attack clients are all querying for the IP of the target host before launching their floods, the result is an indirect attack against DNS.</p> 
                </div> <p>Because of the relatively simple, UDP-based DNS protocol, a DNS attack has two main characteristics:</p> </li> 
               <li>DNS attacks are easy to generate.</li> 
               <li>DNS attacks are difficult to defend against. 
                <figure class="col-sm-6 right">
                 <a href="/Portals/1/Images/whitepaper-images/DDoS%20Protection%20RA/images/rp-fig-11.png"><img alt="diagram" src="/Portals/1/Images/whitepaper-images/DDoS%20Protection%20RA/images/rp-fig-11.png"></a> 
                 <figcaption>
                  Figure 6: Mitigating DNS DDoS
                 </figcaption> 
                </figure> <p>There are four on-premises strategies for mitigating DNS DDoS attacks:</p> </li> 
               <li>Use Protocol Validation.</li> 
               <li>Detect and prevent DNS floods.</li> 
               <li>Overprovision DNS Services against NXDOMAIN query floods.</li> 
               <li>Blacklist as a last resort. <h3>3.1.1 Consider the Placement of DNS services</h3> <p>You may notice that in Figure 1 the DNS service exists as its own set of devices behind the security perimeter. Often DNS is served from this so-called DMZ in between security tiers. This is done to keep DNS independent of the applications that it serves—for example, if that part of the data center goes dark, DNS can redirect requests to a secondary data center (or the cloud). <strong>F5 recommends this strategy of keeping DNS separate</strong> from the security and application tiers for maximum flexibility and availability.</p> <p>Some large enterprises with multiple data centers will go one step further and serve DNS outside the main security perimeter using a combination of F5's GTM DNS Express and the AFM firewall module. The main benefit of this approach is that the DNS services remain available even in the event that tier 1 firewalls go offline due to DDoS.</p> 
                <figure class="col-sm-XX right">
                 <a href="/Portals/1/Images/whitepaper-images/DDoS%20Protection%20RA/images/rp-fig-12.png"><img alt="diagram" src="/Portals/1/Images/whitepaper-images/DDoS%20Protection%20RA/images/rp-fig-12.png"></a> 
                 <figcaption>
                  Figure 7: Alternate External DNS Architecture
                 </figcaption> 
                </figure> <h4>3.1.2 Use Protocol Validation to Protect DNS Services</h4> <p>Regardless of whether you serve DNS inside or outside the DMZ, you can use either GTM or AFM to validate the DNS requests before they hit the DNS server.</p> <p>If you have GTM performing global server load balancing, it will likely be blocking many DNS DDoS attacks already. You can view the DNS query/response performance from the main dashboard in the GTM GUI. Because GTM is full-proxy for DNS, it will automatically validate every request and discard the invalid ones.</p> <p>However, you may find that your servers are still overwhelmed by valid-looking requests. If you have the F5 firewall module AFM, you can use a <strong>Protocol Security Profile</strong> to further filter only specific types of DNS requests.</p> <p>From the <strong>Security tab</strong>, select <strong>Protocol Security</strong> and then <strong>Security Profiles</strong>. Select <strong>DNS</strong> and press the <strong>Create</strong> button. At this screen you can build a protocol security profile to filter or block different types of requests.</p> 
                <figure class="col-sm-8 right">
                 <a href="/Portals/1/Images/whitepaper-images/DDoS%20Protection%20RA/images/rp-fig-13.jpg"><img alt="screen shot" src="/Portals/1/Images/whitepaper-images/DDoS%20Protection%20RA/images/rp-fig-13.jpg"></a> 
                 <figcaption>
                  Figure 8: DNS Protocol Validation
                 </figcaption> 
                </figure> <h4>3.1.3 Detect DNS Floods</h4> <p>The F5 firewall module AFM has a powerful DNS DDoS function—it can detect DNS floods by record type. From the <strong>Security</strong> tab, select <strong>DoS Protection</strong>, then <strong>DoS Profiles</strong> and finally <strong>create</strong>. From the creation screen click the checkbox for DNS and set and accept the threshold parameters.</p> 
                <figure>
                 <a href="/Portals/1/Images/whitepaper-images/DDoS%20Protection%20RA/images/rp-fig-14.jpg"><img alt="screen shot" src="/Portals/1/Images/whitepaper-images/DDoS%20Protection%20RA/images/rp-fig-14.jpg"></a> 
                 <figcaption>
                  Figure 9: DNS Flood Detection
                 </figcaption> 
                </figure> <p>The Protocol Errors checkbox means that the system detects malicious or malformed DNS queries, and displays, in percentage, how much of an increase in DNS query traffic is legal before the system tracks malformed and malicious DNS queries.</p> <p><strong>Note:</strong> At this time, this firewall feature detects floods but does not drop packets to mitigate them.</p> <h4>3.1.4 Overprovision DNS Services Against Query Floods</h4> <p>DNS services have been historically under-provisioned. Part of the reason for this is that for many organizations the ownership of DNS has not been a positive development for any particular team. Whatever the real reason, a significant percentage of DNS deployments are under-provisioned to the point where they are unable to withstand even small- to medium-size DDoS attacks.</p> <p>DNS Caches have become popular as they can boost the perceived performance of a DNS cache and they have provided some resilience against standard DNS query attacks. Attackers have switched to what is called the "no such domain" (or NXDOMAIN) attacks, which quickly drain the performance benefits provided by the cache.</p> <p>F5's recommended way to remedy this is to front the DNS service with the special, high-performance DNS proxy module called DNS Express. DNS Express acts as an absolute resolver in front of the existing DNS servers. It loads the zone information from the servers then resolves every single request or returns NXDOMAIN. It is not a cache and cannot be emptied via NXDOMAIN query floods.</p> <p>In GTM or DNS Services, DNS Express can serve 250,000 requests per second per CPU and is therefore resistant to all but the most virulent DNS attacks. The DNS servers remain in place to manage the zone data.</p> <h4>3.1.5 Blacklist as a Last Resort</h4> <p>DNS traffic is traditionally UDP, which is easy to generate and easy to spoof. Conventional layer 3 and 4 defenses, such as blacklisting by source IP, are usually ineffective against a DNS flood. In fact, blocking DNS requests by source IP can be downright dangerous. For example, if you unknowingly block requests from a major ISP, you may deny service to many legitimate users without realizing it.</p> <p>See "<a href="http://support.f5.com/kb/en-us/products/big-ip_<a data-cke-saved-href='https://f5.com/products/modules/application-security-manager' href='https://f5.com/products/modules/application-security-manager'><a data-cke-saved-href='https://f5.com/products/modules/application-security-manager' href='https://f5.com/products/modules/application-security-manager'><a href='https://f5.com/products/modules/application-security-manager'><a data-cke-saved-href='https://f5.com/products/modules/application-security-manager' href='https://f5.com/products/modules/application-security-manager'><a href='https://f5.com/products/modules/application-security-manager'><a data-cke-saved-href='https://f5.com/products/modules/application-security-manager' href='https://f5.com/products/modules/application-security-manager'><a href='https://f5.com/products/modules/application-security-manager'><a data-cke-saved-href='https://f5.com/products/modules/application-security-manager' href='https://f5.com/products/modules/application-security-manager'><a href='https://f5.com/products/modules/application-security-manager'>asm</a></a></a></a></a></a></a></a></a>/manuals/product/dns-dos-firewall-implementations-11-4-0.html">BIG-IP Systems: DOS Protection and Protocol Firewall Implementations</a>" (chapter 3—Detecting and Preventing DNS DDoS attacks).</p> <h4>3.1.6 Beware DDoS Attack Participation</h4> <h4>3.1.6.1 Unused Query Types</h4> <p>An attacker can trick a DNS service into bombing a third-party target by sending queries for unused services. Use the AFM screens (see Figure 9 above) to disable query types that you aren't using. Then, when queries come in for these types they will be dropped. No response will be provided, thereby helping to avoid participation in a DDoS attack.</p> <p>This is especially true for MX (mail services) and zone transfers. If your organization does one transfers at known, specific times, keep the IXFR, AXFR and ZXFR types disabled at all other times.</p> <h4>3.1.6.2 DNSSEC</h4> <p>DNSSEC is an important evolution in the global domain name service. Ultimately it will cut down on deceptive practices such as phishing. The picture is more complicated for DNS DDoS. DNSSEC responses are sometimes 10–20 times larger than traditional DNS UDP responses. This means that DNSSEC servers are actually tricked into attacking other computers by inadvertently bombarding them with invalid responses.</p> <p>With GTM, F5 has the highest-performing DNSSEC solution on the market. The capacity of GTM could make for a potent weapon if it were to be used as an attack vector. Therefore, GTM allows you to rate-limit the number of responses to prevent itself from participating in an attack.</p> <pre>
 % tmsh modify sys db dnssec.maxnsec3persec value 10 </pre> <p>The <strong>dnssec.maxnsec3persec</strong> variable controls the upper limit of NSEC3 authoritative NXDOMAIN messages that GTM will send per second. 0 is unlimited and the default. A more restrictive value, such as between 10 and 100 per second, may prevent GTM itself from being used during an attack.</p> <pre>
 % tmsh modify sys db dnssec. signaturecachensec3 value true </pre> <p>Setting the <strong>dnssec.signaturecachensec3</strong> variable to false prevents NXDOMAIN messages from using the GTM cache at all, thus preventing an attacker from filling GTM's cache with "no such domain" responses.</p> <h4>3.2 Additional DDoS Best Practices Preparation Procedures</h4> <p>The time spent preparing for a DDoS attack will increase the effectiveness of your defense. Here are a few more ways that you can prepare your organization for a DDoS attack.</p> <h4>3.2.1 Configure and Verify Logging</h4> <p>During an attack there is a good chance that you will be sending diagnostics and logging anomalies and traffic spikes. High performance is critical when dealing with a large DDoS attack. Instrumentation is important as well, meaning that you will want to use the High-Speed Logging facility of BIG-IP to send this information to a third-party logging device such as Splunk or a SIEM such as ArcSight.</p> <p><strong>Note:</strong> You <strong>MUST</strong> use the High-Speed-Logging facilities of BIG-IP at tier 1 when mitigating a DDoS attack. Do not use the local logging; an intense DDoS attack can overwhelm the local disk- based logging.</p> <h4>3.2.1.1 Set Up High-Speed Logging</h4> 
                <ol> 
                 <li> <p>Create a pool to map to your external log servers (in this case they are syslog). Rewrite as necessary for ArcSight, TrustWave or whichever SIEM solution your environment supports. Then create the log config objects to format and forward the strings properly.</p> <pre>
% tmsh create ltm pool hsl_pool members add { 10.128.10.250:514 }

% tmsh create sys log-config destination remote-high-speed-log log_dest_HSL { 
pool-name hsl_pool }

% tmsh create sys log-config destination remote-syslog log_dest_format { format 
rfc5424 remote-high-speed-log log_dest_HSL }

% tmsh create sys log-config publisher log_pub_ddos { destinations { log_
dest_HSL log_dest_format } }
</pre> </li> 
                 <li> <p>Create a log profile object using the GUI..</p> <p>Access the <strong>Security &gt; Event Logs &gt; Logging Profiles</strong> page. Create a log profile using the following:</p> 
                  <figure> 
                   <table class="table table-bordered"> 
                    <tbody> 
                     <tr> 
                      <td><strong>Profile Name</strong></td> 
                      <td>ddos_log_profile</td> 
                     </tr> 
                     <tr> 
                      <td>Network Firewall</td> 
                      <td>Enabled</td> 
                     </tr> 
                     <tr> 
                      <td><strong>Network Firewall: Publisher</strong></td> 
                      <td>log_pub_ddos</td> 
                     </tr> 
                     <tr> 
                      <td><strong>Log Rule Matches</strong></td> 
                      <td>Accept, Drop, and Reject</td> 
                     </tr> 
                     <tr> 
                      <td><strong>Log IP Errors</strong></td> 
                      <td>Enabled</td> 
                     </tr> 
                     <tr> 
                      <td><strong>Log TCP Errors</strong></td> 
                      <td>Enabled</td> 
                     </tr> 
                     <tr> 
                      <td><strong>Log TCP Events </strong></td> 
                      <td>Enabled</td> 
                     </tr> 
                     <tr> 
                      <td><strong>Storage Format</strong></td> 
                      <td>field-list Select all Available Items and move them to the Selected Items list</td> 
                     </tr> 
                    </tbody> 
                   </table> 
                  </figure> </li> 
                 <li> <p>Associate that log profile object with the virtual servers protecting your application.</p> <pre>
 % tmsh modify /ltm virtual vip1 { security-log-profiles add { ddos_ log_profile } } </pre> <h4>3.2.2 Reconnoiter Your Own Applications</h4> <p>Modern DDoS attackers will reconnoiter an application days or weeks before launching their DDoS attack. They will spider your website and retrieve the <strong>load-time</strong> and <strong>data-size</strong> for each valid URI. By sorting the resulting dataset, they will quickly isolate your most CPU- or database-intensive queries and your largest objects (such as PDFs and MP4s). During the DDoS attack they will repeatedly query for these objects, overwhelming your infrastructure.</p> <p>Though section 3.8 will help you mitigate that attack when it happens, you can help yourself beforehand by reconnoitering your own applications. This will give you advanced visibility into what URIs and subsystems will be likely targets, allowing you to make more informed triage decisions later.</p> <p>Ideally you have a tool like LoadRunner or another performance-monitoring tool that can provide you with the metrics you need. If you lack this capability, perhaps the simplest way to retrieve the basic table of URL, load-time and data-size is to run the wget utility, which is available on most Linux distributions. Run it with the following syntax:</p> <pre>
% wget -r --spider http://10.128.10.150 2&gt;&amp;1 | grep saved

2013-08-25 15:44:29 (2.48 MB/s) - `10.128.1.150/index.html' saved [22304]

2013-08-25 15:44:29 (5.53 MB/s) - `10.128.1.150/index.php' saved [22304]

2013-08-25 15:44:29 (7.06 MB/s) - `10.128.1.150/sell.php' saved [41695]
</pre> <p>The last number (in square brackets) is the data-size of the request. You will have to get the load-time by subtracting the times (second field) from each other.</p> <h4>3.2.3 Validate the Health of Existing BIG-IP Devices with iHealth</h4> <p>F5 provides a cloud-based diagnostics and heuristics service called iHealth. iHealth will examine an F5 device's configuration and make recommendations to keep BIG-IP fast, secure and available. While the majority of the settings may be more applicable to the first two, some of these settings can apply to availability and, by extension, to DDoS-resilience.</p> <p>In this example, iHealth is showing that a SNAT pool has been configured without timeout values. This can be a reminder to a resource-conscious administrator to ensure that the SNAT pool used for their hardened virtual servers should include idle timeouts to keep the number of connections down and prevent an upstream firewall from tipping.</p> 
                  <figure>
                   <a href="/Portals/1/Images/whitepaper-images/DDoS%20Protection%20RA/images/rp-fig-15.jpg"><img alt="screen shot" src="/Portals/1/Images/whitepaper-images/DDoS%20Protection%20RA/images/rp-fig-15.jpg"></a>
                  </figure> <p>See the <a href="https://login.f5.com/resource/login.jsp?ctx=719748">iHealth web site</a> for more information about iHealth.</p> <h4>3.2.4 Prepare a DDoS Playbook</h4> <p>A DDoS Playbook or Runbook is a procedural manual to assist your IT employees in combatting a DDoS attack. A good playbook will help new (and existing) administrators combat a DDoS attack. The Playbook should be kept current with updated whitelists and contact information.</p> <p>A few organizations will perform periodic DDoS drills (or even tests) against themselves to keep current and to test the playbook. Try to have your staff practice the procedures from the playbook when key people are not present—attacks do not always happen at the most convenient schedule.</p> <p>If you do not have a playbook, one is available from F5.</p> <h4>3.2.5 Review Defensive Tactics in the Two-Tier Architecture</h4> <p>Some of the defensive tactics described in the previous sections are worth review, especially for administrators using a non-F5 network firewall.</p> <p>Remember:</p> 
                  <ul> 
                   <li>SNAT pools mitigate port exhaustion at tier 1.</li> 
                   <li>Shape traffic at tier 1.</li> 
                   <li>Aggressively reap TCP connections.</li> 
                   <li>Blacklist DNS only as a last resort.</li> 
                   <li>Implement login-walls and CAPTCHAs at tier 2.</li> 
                   <li>Disable optional CPU-intensive features at tier 2.</li> 
                   <li>Always use high-speed remote logging.</li> 
                  </ul> <p>By implementing the proposed suggestions in this Best Practices guide you will have done a lot to prepare your applications for a DDoS attack.</p> 
                  <div class="no-page-break"> 
                   <h2>4 Conclusion</h2> 
                   <p>Understanding the modern threat spectrum of denial-of-service attacks is important. Understanding how to make use of the defensive equipment that you already have is even more important.</p> 
                  </div> <p>Depending on your resources and need, you may already have redesigned your network for DDoS resilience. If this is something that you are considering, then pay close attention to the recommended multi-tier architecture described in section 2.1. Even if your network security is not completely built from F5 technology, it still makes sense to tackle layer 4 and layer 7 independently for DDoS purposes.</p> 
                  <figure class="col-sm-6 right gutter-content">
                   <a href="/Portals/1/Images/whitepaper-images/DDoS%20Protection%20RA/images/rp-fig-16.png"><img alt="diagram" src="/Portals/1/Images/whitepaper-images/DDoS%20Protection%20RA/images/rp-fig-16.png"></a>
                  </figure> <p>By following the recommended practices, you will be preparing your network, applications and people to be attack-resistant.</p> <p>The final step in F5's recommended practices for DDoS mitigation is to prepare a DDoS playbook. Such a playbook is a real-time procedural guide for mitigating an attack that includes worksheets and logs. F5 can provide you with a template to get started.</p> <p>Experts predict that DDoS will be an issue on the Internet for a long time to come. Soon, being prepared will not just be an option but a requirement.</p> 
                  <div class="no-page-break"> 
                   <h2>Appendix</h2> 
                   <h3>Application Attack Taxonomy and Countermeasures</h3> 
                   <p>The following section recommends mitigations for specific layer 7 attack vectors. Many of these are the "slow-and-low" type of attacks that can be particularly pernicious.</p> 
                  </div> <h4>Contents</h4> 
                  <ul> 
                   <li>Slowloris</li> 
                   <li>Keep Dead</li> 
                   <li>Low Orbit Ion Cannon (LOIC)</li> 
                   <li>Slow-POSTs</li> 
                   <li>Zero Window Attacks</li> 
                   <li>Slow-Read Attack</li> 
                   <li>RUDY</li> 
                   <li>Apache Killer</li> 
                   <li>SSL Renegotiation</li> 
                   <li>Dirt Jumper iRule</li> 
                  </ul> 
                  <div class="no-page-break"> 
                   <h3>Slowloris</h3> 
                   <p>Slowloris is a common HTTP vector where an attacker will send (very slowly) small HTTP headers to keep the HTTP session alive (e.g., "X-a: b" every 299 seconds). If the virtual server is currently load-balancing at layer 4, consider switching it to layer 7. This will add some native protection when the HTTP profile is added.</p> 
                  </div> <pre>
% tmsh list ltm virtual vip1
ltm virtual vip1 { 
destination 10.128.10.141:http 
profiles { 
fastL4 { } 
}
}

% tmsh modify ltm virtual vip1 profiles replace-all-with { tcp http }
</pre> <p>This will cause BIG-IP to absorb the Slowloris connections. If you become concerned that too many are building up and causing problems for other devices (such as a firewall), use the following Slowloris iRule to drop any connection that has not completed after 10 seconds (feel free to adjust this number).</p> <pre>
# Slowloris iRule

when CLIENT_ACCEPTED {

 set hsl [HSL::open -proto UDP -pool hsl_pool]

 set rtimer 0

 after 10000 {

 if { not $rtimer } {

 drop

 HSL::send $hsl "Dropped [IP::client_addr] – connection too 
slow"

 }

 }

}

when HTTP_REQUEST {

 set rtimer 1

}
</pre> 
                  <div class="no-page-break"> 
                   <h3>Keep Dead</h3> 
                   <p>This attack is based on consuming CPU and RAM. By using Keep-Alive and the HTTP HEAD method, it can create a flood of requests without triggering a firewall defense that is based on the number of connections opened to the server.</p> 
                  </div> <p>The ASM module can disallow HEAD requests (which are not typically used by browsers). You can reject HEAD requests by configuring the "Allowed Methods" in the application security policy in question.</p> <p>See <a href="http://support.f5.com/kb/en-us/solutions/public/12000/300/sol12312" title="solution 12312">solution 12312</a> for more information.</p> 
                  <div class="no-page-break"> 
                   <h3>Low Orbit Ion Cannon (LOIC)</h3> 
                   <p>The Low Orbit Ion Cannon is a voluntary botnet tool closely associated with the hacktivist group Anonymous. While the tool uses SYN floods and UDP floods, it is most famous for its layer 7 HTTP floods. Assuming that the SYN and UDP floods have been mitigated (see sections 2.2.2 and 2.2.3), the last step is to mitigate the LOIC GET floods.</p> 
                  </div> <p>Often the fastest way to do this is to filter it on the attack "protest message" included with each LOIC HTTP request. Use Wireshark or tcpdump or another tool to isolate the message, then add that message to a datagroup. Use %20 to represent spaces. The message may change over time and you may need to monitor it for the duration of the attack.</p> <pre>
 ltm data-group anonmsgs { records { Somos%20legi { } U%20dun%20goofed { } } type string } </pre> <p>Note that you can use external data classes that are hosted outside the BIG-IP—see "<strong>help search data-group</strong>" in the tmsh command shell.</p> <p>Then use a simple scrubber iRule to drop requests that contain any payloads in that data class.</p> <pre>
ltm rule loic_defense_rule {

 when CLIENT_ACCEPTED {

 set hsl [HSL::open -proto UDP -pool hsl_pool]

 }

 when HTTP_REQUEST {

 if { [class match [HTTP::uri] contains anonmsgs] } {

 drop 

 HSL::send $hsl "Dropped [IP::client_addr] – suspected Low Orbit Ion Cannon"

 } 

 }

}
</pre> 
                  <div class="no-page-break"> 
                   <h3>Slow-POSTs</h3> 
                   <p>The heart of the Slow-POST attack relies on sending a POST request with given "content-length," which is typically a large number, and then very slowly sending the message body to the server, while keeping the idle time long. The server will leave the connection open as it continues to receive data. If a large number of these requests are executed against a server, there is potential for exhausting the connection table, which would leave the server unable to respond to further requests.</p> 
                  </div> <p>If you have the ASM module, you can mitigate slow posts with two of the variables found in the ASM system variables screen—<strong>Navigate to Security : Options : Application Security : Advanced Configuration : System Variables</strong>—and modify the following variables.</p> <p><strong>slow_transaction_timeout</strong> (defaults to 10 seconds). Lower this value as needed.</p> <p><strong>max_slow_transactions</strong> (defaults to 25 transactions). Lower this value to 5 or less as needed.</p> <p>If you do not have ASM, then see this LTM iRule to mitigate Slow-POST. It can be used with the Slow-read iRule in the next section (just attach them as two separate iRules) because the Slow-read iRule is server-based and the Slow-POST iRule is client-based.</p> 
                  <div class="no-page-break"> 
                   <h3>Zero Window Attacks</h3> 
                   <p>The Zero Window attack is a difficult-to-detect layer 4 attack. It works by establishing a TCP connection to the target, requesting some data, and then setting the TCP window size to zero. This stalls the connection at the server, cache or middleware.</p> 
                  </div> <p>If the attacker is setting a TCP zero window length against a BIG-IP you can use the zero-window- timeout tcp profile value mentioned in section 2.2.2 to mitigate.</p> 
                  <div class="no-page-break"> 
                   <h3>Slow-Read Attack</h3> 
                   <p>The Slow-read attack works by sending legitimate HTTP requests and then reading the HTTP responses very slowly from the buffer, aiming to keep as many connections as possible in an active state on the victim.</p> 
                  </div> <p>In version 11.3.0, the ASM module's low-and-slow prevention works on inbound requests such as a Slow POST. For Slow-read, use the following LTM iRule mitigation:</p> <pre>
when SERVER_CONNECTED {

 TCP::collect

}

when SERVER_DATA {

 set rtimer 0

# Time in milliseconds before HTTP response read is considered slow:

 after 5000 {

 if { not $rtimer} {

 set hsl [HSL::open -proto UDP -pool hsl_pool]

# Slow read detected for this server response. Increment the count by adding a 
table entry:

# Add the client source IP::port to the subtable with a timeout

 table set -subtable "MyApp" "[IP::client_addr]:[TCP::client_port]" 
"ignored" 180

# If we are over the concurrency limit then reject

 if { [table keys -subtable "MyApp" -count] &gt; 5} {

 clientside {reject}

 table delete -subtable "MyApp" "[IP::client_addr]:[TCP::client_
port]"

 HSL::send $hsl "Dropped [IP::client_addr] – reading too slow"

 } 

 }

 }

 TCP::notify response 

 TCP::release

 TCP::collect

}

when USER_RESPONSE {

 set rtimer 1

}

when CLIENT_CLOSED {

 table delete -subtable "MyApp" "[IP::client_addr]:[TCP::client_port]" 

}
</pre> 
                  <div class="no-page-break"> 
                   <h3>RUDY</h3> 
                   <p>R-U-Dead-Yet (RUDY for short) uses Slow-POST and a generic HTTP DoS attack via long-form field submissions.</p> 
                  </div> 
                  <div class="no-page-break"> 
                   <h3>Apache Killer</h3> 
                   <p>The Apache Killer is also known as a Range Attack. When a client browser (such as a mobile handset browser) needs just part of document, it can request a "range" of the data with an HTTP range header. If the client wants just the first 100 bytes, it could say:</p> 
                  </div> <pre>
 Range:bytes=0-100 </pre> <p>The Apache Killer attack works by requesting multiple, overlapping ranges that confuse web servers like Apache:</p> <pre>
 Range:bytes=0-,5-1,5-2,5-3,… </pre> <p>There are three ways to mitigate Apache Killer. You can modify the HTTP profile to simply remove the Range header. For example, if your http profile was named "http_ddos2," you would run this command:</p> <pre>
 % tmsh modify ltm profile http http_ddos2 { header-erase range } </pre> <p>A more surgical way to mitigate Apache Killer is with the following iRule, which only removes range requests when more than five ranges are requested.</p> <pre>
when CLIENT_ACCEPTED {

 set hsl [HSL::open -proto UDP -pool hsl_pool]

}

when HTTP_REQUEST {

 # remove Range requests for CVE-2011-3192 if more than five ranges are 
requested

 if { [HTTP::header "Range"] matches_regex {bytes=(([0-9\- ])+,){5,}} } {

 HTTP::header remove Range

 HSL::send $hsl "Client [IP::client_addr] sent more than 5 ranges. Erasing 
range header."

 }

}
</pre> <p>The third method of mitigation using BIG-IP solutions is to use the following ASM attack signature to detect and act upon an attack using this technique.</p> <pre>
 pcre:"/Range:[\t ]*bytes=(([0-9\- ])+,){5,}/Hi"; </pre> 
                  <div class="no-page-break"> 
                   <h3>SSL Renegotiation</h3> 
                   <p>If you are seeing a lot of renegotiations happening from specific SSL clients, you might be suffering an SSL renegotiation attack. The easiest way to mitigate it is to disable SSL renegotiation from the virtual server's associated clientssl profile. However, if you need to support renegotiation for legitimate clients (such as old "step-up" or server-gated-cryptography browsers) while still mitigating the attack, you can use this iRule, or others like it. This rule closes any connection that attempts more than five renegotiations in a minute:</p> 
                  </div> <pre>
when RULE_INIT { 

 set static::maxquery 5 

 set static::mseconds 60000 

} 

when CLIENT_ACCEPTED { 

 set ssl_hs_reqs 0 

 set hsl [HSL::open –proto UDP –pool hsl_pool]

} 

when CLIENTSSL_HANDSHAKE { 

 incr ssl_hs_reqs 

 after $static::mseconds { if {$ssl_hs_reqs &gt; 0} {incr ssl_hs_reqs -1} } 

 if { $ssl_hs_reqs &gt; $static::maxquery } { 

 after 5000 

 drop

 HSL::send $hsl "Dropped [IP::client_addr] – too many SSL renegotiations"

 } 

}
</pre> 
                  <div class="no-page-break"> 
                   <h3>Dirt Jumper iRule</h3> 
                   <p>Certain versions of the Dirt Jumper tool do not include a // in their referrer field. Here is a simple iRule to detect and drop Dirt Jumper connections.</p> 
                  </div> <pre>
when CLIENT_ACCEPTED {

 set hsl [HSL::open –proto UDP –pool hsl_pool]

} 

when HTTP_REQUEST {

 if { [HTTP::header exists "Referer"] } {

 if { not ([HTTP::header "Referer"] contains "\x2F\x2F") } {

 HSL::send $hsl "DDoS Dirt-Jumper HTTP Header Structure missing x2f x2f 
Referer protocol identifier from [IP::client_addr]"

 drop

 }

 }

}

                   <!--
</pre>
  </li>
 </ol>
 </li>
</ul> -->
</pre> </li> 
                </ol> </li> 
              </ul> 
              <p>&nbsp;</p> 
              <p><a class="internalLink pdf btn btn-default" href="/Portals/1/Premium/Architectures/RA-DDoS-Recommended-Practices-vol-2.pdf" target="_blank">Download Volume 2</a></p> 
             </div> 
             <div class="page-selection pagination"></div>
             <ul class="pagination">
              <li><a class="hidden">&nbsp;</a></li>
              <li><a class="page-view-all" href="#article-page-0">View All</a></li>
              <li><a class="hidden">&nbsp;</a></li>
             </ul> 
            </section> 
            <aside> 
             <div class="sidebar-affix"> 
              <a href="https://f5.com/resources/white-papers/f5-ddos-protection-recommended-practices/mode/pdf" rel="nofollow" class="btn btn-primary btn-lg" target="_blank"> Download as a PDF <i class="icon-doc2"></i></a> 
             </div> 
            </aside> 
           </article> 
           <script type="text/javascript">
        (function() {
            var delimeterCss = 'div[style^="page-break-after: always"]';
            var delimeter = $(delimeterCss)[0];

            $('.section.content .anchorLink').each(function() {
                var anchorSelector = $(this).attr('href');
                var $pageBreak = $(anchorSelector);
                while (!$pageBreak.is(delimeterCss) && $pageBreak[0]) {
                    if ($pageBreak.prev()[0]) {
                        var siblingChildren = $pageBreak.prev().children();
                        var firstSibChild = siblingChildren.first();
                        if (firstSibChild[0] && firstSibChild[0] !== $pageBreak[0]) {
                            $pageBreak = siblingChildren.last();
                        } else {
                            $pageBreak = $pageBreak.prev();
                        }
                    } else {
                        var parentChildren = $pageBreak.parent().children();
                        var firstChild = parentChildren.first();
                        if (firstChild[0] && firstChild[0] !== $pageBreak[0]) {
                            $pageBreak = parentChildren.last();
                        } else {
                            $pageBreak = $pageBreak.parent();
                        }
                    }
                }
                var $allPageBreaks = $(delimeterCss);
                var pg = 1;
                if ($pageBreak[0]) {
                    $allPageBreaks.each(function() {
                        pg++;
                        if (this === $pageBreak[0]) {
                            return false;
                        }
                    });
                }

                $(this).data('pg', pg);
            });

            $(document).on('click', '.anchorLink', function(e) {
                $('a[href="#article-page-' + $(this).data('pg') + '"]').click();
            });

            if (delimeter) {
                paginate(delimeter.outerHTML);
                $('.page-view-all').click(function() {
                    $('.page-selection').trigger("page", 0);
                });
            } else {
                $('.page-view-all').css("display", "none");
            }
        })();
    </script> 
           <script type="text/javascript">
        
        $(function() {

            var codeblocks = $('.article-body pre').filter(function() {
                return !this.className.match(/^brush/);
            });
                
            
            if (codeblocks.length > 0) {
                
                codeblocks.addClass("prettyprint");
                
                var path = "/Resources/Shared/scripts/prettify/",
                    included = /bsh|^c$|cc|cpp|^cs$|csh|cyc|cv|htm|html$|java|js|^m$|mxml|perl|pl|pm|py|rb|sh|xml|tcl|xsl/g,
                    tcl = path + "lang-tcl.js",
                    requestedScripts = {
                        tcl : true
                    };

                $.ajaxSetup({cache: true});
                
                $.getScript(path + "prettify.js", function() {
                    $.getScript(path + "lang-tcl.js");
                
                    codeblocks
                        .each( function() {
                            var lang = $(this).data("lang");
                            if (lang != undefined && !included.test(lang)) {
                                var scriptPath = path + "lang-" + lang + ".js";
                                if (!requestedScripts[scriptPath]) {
                                    requestedScripts[scriptPath] = true;
                                    $.getScript(scriptPath);
                                }
                            }
                        })
                        .promise()
                        .done(function() {
                            prettyPrint();
                        });
                }); 
            }


    });
    </script> 
           <!--CDF(Javascript|/DesktopModules/F5/Articles/Scripts/articles.view.articles.js)--> 
          </div>
          <!-- End_Module_2421 --></span> 
        </section> 
       </div></span> 
     </div> 
     <!-- Social --> 
     <div class="row"> 
      <span id="dnn_LeftSocialPane" class="col-sm-3 DNNEmptyPane"></span> 
      <span id="dnn_CenterSocialPane" class="col-sm-6 DNNEmptyPane"></span> 
      <span id="dnn_RightSocialPane" class="col-sm-3 DNNEmptyPane"></span> 
     </div> 
     <!-- 4 Span3 Panes --> 
     <div class="row"> 
      <span id="dnn_TopSpan3Pane1" class="col-sm-6 col-md-3 DNNEmptyPane"></span> 
      <span id="dnn_TopSpan3Pane2" class="col-sm-6 col-md-3 DNNEmptyPane"></span> 
      <span id="dnn_TopSpan3Pane3" class="col-sm-6 col-md-3 DNNEmptyPane"></span> 
      <span id="dnn_TopSpan3Pane4" class="col-sm-6 col-md-3 DNNEmptyPane"></span> 
     </div> 
     <!-- left sidebar --> 
     <div class="row"> 
      <span id="dnn_LeftSidebar" class="col-sm-4 col-md-3 DNNEmptyPane"></span> 
      <span id="dnn_RightContent" class="col-sm-8 col-md-9 DNNEmptyPane"></span> 
     </div> 
     <!-- left & right sidebar --> 
     <div class="row"> 
      <span id="dnn_LeftSideBar3Col" class="col-sm-3 DNNEmptyPane"></span> 
      <span id="dnn_CenterContent3Col" class="col-sm-6 DNNEmptyPane"></span> 
      <span id="dnn_RightSideBar3Col" class="col-sm-3 DNNEmptyPane"></span> 
     </div> 
     <!-- Halves --> 
     <div class="row"> 
      <span id="dnn_LeftHalfContent" class="col-sm-6 DNNEmptyPane"></span> 
      <span id="dnn_RightHalfSidebar" class="col-sm-6 DNNEmptyPane"></span> 
     </div> 
     <!-- right sidebar --> 
     <div class="row"> 
      <span id="dnn_LeftContent" class="col-sm-8 col-md-9 DNNEmptyPane"></span> 
      <span id="dnn_RightSidebar" class="col-sm-4 col-md-3 DNNEmptyPane"></span> 
     </div> 
     <!-- MiddleFull --> 
     <div class="clearfix"> 
      <span id="dnn_MiddleFull" class="DNNEmptyPane"></span> 
     </div> 
     <!-- Thirds --> 
     <div class="row"> 
      <span id="dnn_LeftThirdPane" class="col-sm-4 DNNEmptyPane"></span> 
      <span id="dnn_CenterThirdPane" class="col-sm-4 DNNEmptyPane"></span> 
      <span id="dnn_RightThirdPane" class="col-sm-4 DNNEmptyPane"></span> 
     </div> 
     <!-- BottomFull --> 
     <div class="clearfix"> 
      <span id="dnn_BottomFull" class="DNNEmptyPane"></span> 
     </div> 
     <!-- /panes --> 
    </section> 
    <!-- / Page Container --> 
    <span id="dnn_FullWidthBottomPane" class="DNNEmptyPane"></span> 
    <footer id="F5-Footer"> 
     <div class="container"> 
      <ul class="links"> 
       <li> <p class="js-toggle-next js-toggle-next-mobile"><span class="visible-xs-inline-block hidden-ie">
          <svg class="svg-icon svg-inverse svg-down" viewbox="0 0 100 100">
           <line id="line-1" class="svg-line" x1="12.5" y1="32.5" x2="49.5" y2="67.5" />
           <line id="line-2" class="svg-line" x1="87.5" y1="33" x2="49.5" y2="67.5" />
          </svg></span>About F5</p> 
        <ul> 
         <li><a data-link-type="nav: footer" href="//f5.com/about-us">Corporate Information</a></li> 
         <li><a data-link-type="nav: footer" href="//f5.com/about-us/news">Newsroom</a></li> 
         <li><a data-link-type="nav: footer" href="//f5.com/about-us/investor-relations">Investor Relations</a></li> 
         <li><a data-link-type="nav: footer" href="//f5.com/careers">Careers</a></li> 
         <li><a data-link-type="nav: footer" href="//f5.com/about-us/contact">Contact Information</a></li> 
        </ul> </li> 
       <li> <p class="js-toggle-next js-toggle-next-mobile"><span class="visible-xs-inline-block hidden-ie">
          <svg class="svg-icon svg-inverse svg-down" viewbox="0 0 100 100">
           <line id="line-1" class="svg-line" x1="12.5" y1="32.5" x2="49.5" y2="67.5" />
           <line id="line-2" class="svg-line" x1="87.5" y1="33" x2="49.5" y2="67.5" />
          </svg></span> Education</p> 
        <ul> 
         <li><a data-link-type="nav: footer" href="//f5.com/education/training">Training</a></li> 
         <li><a data-link-type="nav: footer" href="//f5.com/education/certification">Certification</a></li> 
         <li><a data-link-type="nav: footer" href="//university.f5.com">F5 University</a></li> 
         <li><a data-link-type="nav: footer" href="https://f5.com/education/training/free-courses">Free Online Training</a></li> 
        </ul> </li> 
       <li> <p class="js-toggle-next js-toggle-next-mobile"><span class="visible-xs-inline-block hidden-ie">
          <svg class="svg-icon svg-inverse svg-down" viewbox="0 0 100 100">
           <line id="line-1" class="svg-line" x1="12.5" y1="32.5" x2="49.5" y2="67.5" />
           <line id="line-2" class="svg-line" x1="87.5" y1="33" x2="49.5" y2="67.5" />
          </svg></span> F5 Sites</p> 
        <ul> 
         <li><a data-link-type="nav: footer" href="//f5.com">F5.com</a></li> 
         <li><a data-link-type="nav: footer" href="//DevCentral.f5.com">DevCentral</a></li> 
         <li><a data-link-type="nav: footer" href="//Support.f5.com">Support Portal</a></li> 
         <li><a data-link-type="nav: footer" href="//Partners.f5.com">Partner Central</a></li> 
         <li><a data-link-type="nav: footer" href="//f5.com/labs">F5 Labs</a></li> 
        </ul> </li> 
       <li> <p class="js-toggle-next js-toggle-next-mobile"><span class="visible-xs-inline-block hidden-ie">
          <svg class="svg-icon svg-inverse svg-down" viewbox="0 0 100 100">
           <line id="line-1" class="svg-line" x1="12.5" y1="32.5" x2="49.5" y2="67.5" />
           <line id="line-2" class="svg-line" x1="87.5" y1="33" x2="49.5" y2="67.5" />
          </svg></span> Preferences</p> 
        <ul> 
         <li><a data-link-type="nav: footer" href="https://f5.com/login?returnurl=%2fresources%2fwhite-papers%2ff5-ddos-protection-recommended-practices" rel="nofollow">Login</a></li> 
         <li><a data-link-type="nav: footer" href="//f5.com/about-us/preferences">Email Preferences</a></li> 
        </ul> </li> 
       <li> <p class="js-toggle-next js-toggle-next-mobile"><span class="visible-xs-inline-block hidden-ie">
          <svg class="svg-icon svg-inverse svg-down" viewbox="0 0 100 100">
           <line id="line-1" class="svg-line" x1="12.5" y1="32.5" x2="49.5" y2="67.5" />
           <line id="line-2" class="svg-line" x1="87.5" y1="33" x2="49.5" y2="67.5" />
          </svg></span> Connect With Us</p> 
        <ul class="social-media text-inverse"> 
         <!-- en --> 
         <li><a data-link-type="nav: footer" href="//twitter.com/f5networks" target="_blank" data-name="twitter" data-type="" data-prefix="social" data-utf="E032" title="Twitter">
           <svg class="svg-icon svg-n-twitter" viewbox="0 0 100 100"> 
            <path class="svg-fill" d="M95 23.3s-3.5 5.4-9.2 9C87 57.3 67.8 85 33.3 85 16 85 5 77 5 77s13.6 2.7 27.3-7.2C18.3 69 15 57.5 15 57.5s3.8 1 8.4-.3c-15.6-3.7-15-17.6-15-17.6s4 2.2 8.5 2.2C2.6 31.4 11 18 11 18s12.7 17.2 38 18.7C45.8 17.3 69 8.4 81 20.5c6.2-1 12-4.3 12-4.3s-2 6.6-8.3 9.8c5-.3 10.5-2.7 10.5-2.7z" /> 
           </svg></a> </li> 
         <li><a data-link-type="nav: footer" href="//www.linkedin.com/companies/f5-networks" target="_blank" class="linkedin" title="LinkedIn">
           <svg class="svg-icon svg-n-linkedin" viewbox="0 0 100 100"> 
            <path class="svg-fill" d="M25.3 95H6.5V35h18.7v60zm30.3 0H37V35h18v8c4-6.4 10-9.6 18-9.6 14.7 0 22 8.6 22 25.7v36H76.5V63.6c0-9-3.2-13.5-9.5-13.5-7.6 0-11.4 4.5-11.4 13.4V95z" /> 
            <ellipse class="svg-fill" cx="15.8" cy="15.8" rx="10.8" ry="10.8" /> 
           </svg></a> </li> 
         <li><a data-link-type="nav: footer" href="//www.facebook.com/f5networksinc" target="_blank" class="facebook" title="Facebook">
           <svg class="svg-icon svg-n-facebook" viewbox="0 0 75 100"> 
            <path class="svg-fill" d="M45,95H27.3V53.9H12.5v-16h14.8V26.1c0-6.7,2.1-12,6.3-15.8C37.5,6.8,42.7,5,49.3,5c3.7,0,8.1,0.2,13.2,0.6v14.3h-9.3 c-5.5,0-8.3,2.3-8.3,7v11h16.9l-2.2,16H45V95z" /> 
           </svg> </a></li> 
         <li><a data-link-type="nav: footer" href="//www.youtube.com/f5networksinc" target="_blank" class="youtube" title="YouTube">
           <svg class="svg-icon svg-n-youtube" viewbox="0 0 100 100"> 
            <path class="svg-fill" d="M50 20c26 0 36.2.3 40.3 4.3 3 3 4.7 8.8 4.7 25.7s-1.6 22.8-4.7 25.7C86.3 79.7 76 80 50 80s-36.2-.3-40.3-4.3C6.7 72.7 5 67 5 50s1.6-22.8 4.7-25.7c4-4 14.4-4.3 40.3-4.3zm-9.4 17v24L65 49 40.5 37z" /> 
           </svg> </a> </li> 
         <li><a data-link-type="nav: footer" href="//devcentral.f5.com/" target="_blank" class="devcentral" title="DevCentral">
           <svg class="svg-icon svg-dc" viewbox="0 0 100 100"> 
            <path class="svg-fill" d="M47.8 17.7v63.5h-12l-1-5.5c-2 3.6-6.4 6.6-12 6.6C12.2 82.3 5 76.3 5 60c0-16 7-24.4 18.3-24.4C29 35.6 32 38 34 41h.2V17.6h13.6zm-21 26.8c-4.7 0-7.7 4-7.7 15.3 0 10 3 13.8 8 13.8 6 0 8-5.4 8-14.7 0-11-3-15-8-15zM83 54c-.4-6.4-3.5-8.6-7.3-8.6-4.5 0-8.2 3-8.2 13.4 0 10 3 13.7 8 13.7 4 0 6.4-1.7 7.4-7.6h11c-1.4 13-10 17-19.6 17C59.4 82 53 72 53 59c0-15 8.7-23.7 22.7-23.7 12.6 0 18.3 7.6 19 17.5l-12 1z" /> 
           </svg> </a> </li> 
        </ul> </li> 
      </ul> 
      <div class="back-to-top js-back-to-top">
       <svg class="svg-icon svg-inverse svg-square svg-down up" viewbox="0 0 100 100">
        <line id="line-1" class="svg-line" x1="12.5" y1="32.5" x2="49.5" y2="67.5" />
        <line id="line-2" class="svg-line" x1="87.5" y1="33" x2="49.5" y2="67.5" />
       </svg>
      </div> 
      <script>$(".js-back-to-top").click(function (e) { $("html, body").animate({ scrollTop: 0 }); return false; });</script> 
      <ul class="sub-footer outside hidden-xs"> 
       <li class="dropup"><img src="/images/globe-sm.svg" width="68" height="33" alt="globe" class="hidden-xs"> <span class="hidden-xs text-uppercase"> Language: </span> <a id="Localization-Link" class="dropdown-toggle navbar-link" data-toggle="dropdown" href="#">English 
         <svg class="svg-icon svg-inverse svg-down up" viewbox="0 0 100 100">
          <line id="line-1" class="svg-line" x1="12.5" y1="32.5" x2="49.5" y2="67.5" />
          <line id="line-2" class="svg-line" x1="87.5" y1="33" x2="49.5" y2="67.5" />
         </svg></a> 
        <ul id="Localization-List" class="dropdown-menu dropdown-menu-right"> 
         <select name="dnn$ctl02$ctl00$selectCulture" onchange="javascript:setTimeout('__doPostBack(\'dnn$ctl02$ctl00$selectCulture\',\'\')', 0)" id="dnn_ctl02_ctl00_selectCulture" class="NormalTextBox navbar-link" style="display:none;"> <option selected value="en-US">English (United States)</option> <option value="ja-JP">??? (??)</option> <option value="de-DE">Deutsch (Deutschland)</option> <option value="zh-CN">??(???????)</option> <option value="es-ES">Español (España, Alfabetización Internacional)</option> <option value="it-IT">Italiano (Italia)</option> <option value="ko-KR">???(????)</option> <option value="ru-RU">??????? (??????)</option> <option value="pl-PL">Polski (Polska)</option> <option value="fr-FR">Français (France)</option> </select> 
         <li class="active"><a href="https://f5.com/resources/white-papers" class="langItem" data-lang="en-US">English</a></li>
         <li><a href="https://f5.com/jp/resources/white-papers" class="langItem" data-lang="ja-JP">???</a></li>
         <li><a href="https://f5.com/de/resources/white-papers" class="langItem" data-lang="de-DE">Deutsch</a></li>
         <li><a href="https://f5.com/zh/resources/white-papers" class="langItem" data-lang="zh-CN">??</a></li>
         <li><a href="https://f5.com/es/resources/white-papers" class="langItem" data-lang="es-ES">Español</a></li>
         <li><a href="https://f5.com/fr/resources/white-papers" class="langItem" data-lang="fr-FR">Français</a></li> 
        </ul> 
        <div style="display: none"> 
         <a id="dnn_ctl02_ctl00_lnkConfirm" href="javascript:__doPostBack('dnn$ctl02$ctl00$lnkConfirm','')"></a> 
         <a id="dnn_ctl02_ctl00_lnkCancel" href="javascript:__doPostBack('dnn$ctl02$ctl00$lnkCancel','')"></a> 
        </div> <script type="text/javascript">

    (function ($) {
        if (window.self !== window.top ||
            false ||
            false) return;

        var $selectCulture = $("#dnn_ctl02_ctl00_selectCulture");
        var $lnkConfirm = $('#dnn_ctl02_ctl00_lnkConfirm');
        var $lnkCancel = $('#dnn_ctl02_ctl00_lnkCancel');
        var $localization = $('#Localization-List');
        var $items = $localization.find('.langItem');
        var date = new Date();
        date.setMonth(date.getMonth() + 1);
        $items.each(function(i, item) {
            var $item = $(item);
            var lang = $item.data('lang');
            $item.on('click', function (e) {
                //e.preventDefault();
                $selectCulture.find('option:selected').removeAttr('selected');
                $selectCulture.find('option[value="' + lang + '"]').attr('selected', true);
                $selectCulture.val(lang);
                setCookie('user_lang', lang, date);
                //$selectCulture.trigger('change');

            });
        });

        $lnkConfirm.on('click', function () {
            setCookie('user_lang', $(this).data('lang'), date);
        });

        $lnkCancel.on('click', function() {
            setCookie('user_lang', '-1', date);
        });

        function setCookie(name, value, date) {
            var cookie = escape(value);
            if ((date = new Date(date).toUTCString())) cookie += '; expires=' + date + '; path=/';
            document.cookie = name + "=" + cookie;
        }

        var cookieCulture = unescape((document.cookie.match(/user_lang=([^;]*)/) || [])[1] || '');
        var currentCulture = 'en-US'.toLowerCase();
        var userCulture = 'en-US'.toLowerCase();
        var cookieLang = cookieCulture.split('-')[0];
        var currentLang = currentCulture.split('-')[0];
        var userLang = userCulture.split('-')[0];

        // ignore
        if (cookieCulture === "-1")
            return;

        if (cookieLang.length && cookieLang === currentLang ||
            userLang === currentLang)
            return;

        
        // wait for f5 scripts to load
        $(document).ready(function () {

            // no display on mobile
            if (f5.getBreakpoint() === 'xs') return;

            var notifier = new f5.Notify.Info("Would you like to view this site in English?");
            var $bg = $('<div></div>');
            var timer = -1;
            var times = 4; // total in and out
            var ms = 200; // delay (150 ms for total/fluent transition)

            $localization.css('position', 'relative');

            $bg.css({
                position: 'absolute' 
                ,width: '100%' 
                ,height: '100%'
            });

            $localization.prepend($bg);

            notifier.onshow = function () {
                $bg.addClass('alert alert-info fade');
                fadeIn();
            };
            notifier.onclose = function () {
                setCookie('user_lang', '-1', date);
                $bg.removeClass('in').addClass('out');
                fadeOut();
                clearTimeout(timer);
            };
            notifier.onclick = function () {
                $lnkConfirm.data("lang", "en-US");
                $lnkConfirm[0].click();
            };
            notifier.init();

            function fadeIn() {
                $bg.removeClass('out').addClass('in');
                if (times--)
                    timer = setTimeout(fadeOut, ms);
            }

            function fadeOut() {
                $bg.removeClass('in').addClass('out');
                if (times--)
                    timer = setTimeout(fadeIn, ms);
            }
        });
        

})(jQuery);
</script> </li> 
      </ul> 
      <ul class="sub-footer legal-text"> 
       <li>© 2017 F5 Networks, Inc. All rights reserved</li> 
       <li><a data-link-type="nav: footer-sub footer" href="//f5.com/about-us/policies">Policies</a></li> 
       <li><a data-link-type="nav: footer-sub footer" href="//f5.com/about-us/policies/trademarks">Trademarks</a></li> 
      </ul> 
     </div> 
    </footer> 
   </div> 
   <header id="F5-Header" class="header-f5 meta-open"> 
    <div class="meta-row"> 
     <div class="container"> 
      <ul class="nav piped pull-right"> 
       <li> <a data-link-type="nav: meta" href="https://devcentral.f5.com">DevCentral</a> </li> 
       <li> <a data-link-type="nav: meta" href="https://support.f5.com"> Support </a> </li> 
       <li> <a data-link-type="nav: meta" href="//partners.f5.com"> Partners </a> </li> 
       <li> <a data-link-type="nav: meta" href="//f5.com/careers"> Careers </a> </li> 
      </ul> 
     </div> 
    </div> 
    <div class="main-row"> 
     <div class="container"> 
      <div class="outside"> 
       <div class="brand"> 
        <a class="brand-main" data-link-type="nav: brand" href="//f5.com"> 
         <svg viewbox="0 0 100 88"> 
          <circle r="44" cy="44" cx="44" fill="#E21D38" /> 
          <path stroke="null" d="M43.02 48.22c21.63 1.8 29.95 7.75 29.56 15.88-.4 4.36-4.57 8.52-9.92 8.93-6.34.4-9.33-2.2-11.1-4.97-1.6-2.57-3.38-5.16-5.17-7.94-.4-.8-1.2-.2-1.8.2-1.4 1.2-2.6 2.58-3.8 3.78-.7.78-.5 1.4-.3 1.98 1.2 2.78 2.4 5.56 3.6 8.13 1.9 1.2 10.8 2.8 17.4 2.2 4.6-.4 10.1-2.2 14.9-5.5 4.6-3.6 7.9-8.3 8.5-16.1.2-4.7-.6-9.6-4.78-14.2s-11.3-8.3-25.8-9.3c.8-2.3 1.4-4.5 2.2-6.73 8.75.4 16.5 1 23.04 1.8.6-2.5.8-4.95 1.4-7.36l-1.8-2.1c-3.36-.42-6.55-1.22-10.1-1.62-4.55-.6-9.3-1-14.46-1.2-3.4 9.57-7.4 21.64-11.6 34.3m-5.8-37.1c-1.6 0-3.76.4-7.33 1.2-7.73 2.2-17.24 7.54-18.24 16.45-.2 1.4-.2 3-.4 4.3l-6.13.6C5 35.6 5 37.2 4.8 39c2-.2 3.97-.2 6.15-.4-.4 9.36 0 18.7.8 27.37.2 1.4.2 2.6.2 3.4-.2.82-1.6 1.22-3.57 1.22l2.6 3.1c7.56 1.4 17.1 2.4 27.18 2.6v-3c-5.97-.4-8.7-1.2-9.1-2.4-.4-1-.4-2.4-.6-3.8-.4-9.1-.6-19.1-.4-29.2 3.43 0 6.75 0 10.17-.2 1.8-.8 3.4-1.6 5-2.4v-3.4c-5.17 0-10.13.2-15.1.2l.6-11.9c.2-2.6 1.98-4.4 3.57-4.4 2.77-.2 5.33.98 7.92 2.17 1.4.6 2.8 1.4 4.18 2 .6.2 1.4.4 2-.23.8-.97 1.6-1.97 2.38-2.76.4-.6.2-1 0-1.2l-5.38-4c-1-.8-2.8-.8-4.4-.8-.6-.2-1.2 0-1.8 0" fill="#FFF" /> 
          <text x="87" y="75" font-size="17" fill="#E21D38">
           ®
          </text> 
         </svg> </a> 
       </div> 
       <ul id="MainMenu" data-menu-ver="0" class="main-nav" role="menu" aria-labelledby="dLabel"> 
        <li data-submenu-id="solutions"> <a data-link-type="nav: main" href="//f5.com/solutions"> Solutions <span class="indicator"><span class="arrow-up"></span></span> </a> </li> 
        <li data-submenu-id="products"> <a data-link-type="nav: main" href="//f5.com/products"> Products <span class="indicator"><span class="arrow-up"></span></span> </a> </li> 
        <li data-submenu-id="support"> <a data-link-type="nav: main" href="//f5.com/support"> Support <span class="indicator"><span class="arrow-up"></span></span> </a> </li> 
        <li data-submenu-id="education"> <a data-link-type="nav: main" href="//f5.com/education"> Education <span class="indicator"><span class="arrow-up"></span></span> </a> </li> 
        <li data-submenu-id="how"> <a data-link-type="nav: main" href="//f5.com/products/how-to-buy"> How To Buy <span class="indicator"><span class="arrow-up"></span></span> </a> </li> 
        <li data-submenu-id="about"> <a data-link-type="nav: main" href="//f5.com/about-us"> About F5 <span class="indicator"><span class="arrow-up"></span></span> </a> </li> 
        <li data-submenu-id="resources"> <a data-link-type="nav: main" href="//f5.com/resources"> Resources <span class="indicator"><span class="arrow-up"></span></span> </a> </li> 
       </ul> 
       <nav class="utility-nav"> 
        <ul class="pull-right outside"> 
         <li class="login-link"><a id="dnn_dnnLogin_enhancedLoginLink" title="Login" class="navbar-link stealth" rel="nofollow" data-link-type="nav: utility-login" href="https://f5.com/login?returnurl=%2fresources%2fwhite-papers%2ff5-ddos-protection-recommended-practices">Login</a></li> 
         <li class="user-link"> 
          <ul id="dnn_dnnUser_registerGroup" class=""> 
           <li class="dropdown"> <a id="dnn_dnnUser_enhancedRegisterLink" title="Sign Up" class="avatar-link dropdown-toggle stealth mchNoDecorate" data-toggle="" rel="nofollow" href="https://f5.com/register?returnurl=%2fresources%2fwhite-papers%2ff5-ddos-protection-recommended-practices">Sign Up</a> </li> 
          </ul> </li> 
         <li class="search-icon"> <a title="search [ctrl][shift][F]" href="/search"> 
           <svg class="svg-icon svg-inverse svg-dot svg-search" viewbox="0 0 100 100"> 
            <g class="primary"> 
             <ellipse class="svg-line" cx="43.6" cy="43.6" rx="29.6" ry="29.6" /> 
             <path class="svg-line" d="M64.3,64l22.2,22.5" /> 
            </g> 
            <g class="alt"> 
             <line class="svg-line" x1="5" y1="5" x2="95" y2="95" /> 
             <line class="svg-line" x1="95" y1="5" x2="5" y2="95" /> 
            </g> 
           </svg> </a> </li> 
        </ul> 
       </nav> 
      </div> 
     </div> 
    </div> 
    <div class="search-row"> 
     <div class="container"> 
      <div class="outside search-container"> 
       <div class="input-group" id="Search-Form"> 
        <input type="text" class="form-control" id="MainSearch" placeholder="&nbsp; Search"> 
        <span class="input-group-btn"> <button class="btn reset-search soft-hide" type="button" title="reset">x</button> <button class="btn btn-primary submit-search" type="button" title="submit">
          <svg class="svg-icon svg-inverse svg-search" viewbox="0 0 100 100">
           <ellipse class="svg-line" cx="43.6" cy="43.6" rx="29.6" ry="29.6" />
           <path class="svg-line" d="M64.3,64l22.2,22.5" />
          </svg></button> </span> 
       </div> 
      </div> 
     </div> 
    </div> 
   </header> 
   <div class="search-screen close-search"> 
    <div class="container search-results"> 
     <div id="search-results-box" class="search-results-box row"> 
      <div class="col-sm-3 block-margin-ver block-padding-hor"> 
       <div id="search-facet-container-wrapper" class="search-facet-container-wrapper"></div> 
       <div id="search-recent-searches-wrapper" class="block-margin-bot"></div> 
       <div class="frame frame-lite block-margin-bot">
        Search Shortcut: 
        <strong>ctrl+shift+f</strong>
       </div> 
       <div id="search-results-header" class="search-results-header small"> 
       </div> 
      </div> 
      <div class="col-sm-9 block-margin-ver block-padding-hor" style="border-left:solid 1px white"> 
       <div id="search-results" class="search-results"></div> 
       <div id="search-results-paging" class="search-results-paging"></div> 
      </div> 
     </div> 
    </div> 
   </div> 
   <div id="phone-nav" style="z-index:5000" class="navbar window window-center window-left-slide window-right-slide navbar-fixed-top visible-xs hidden-print" role="navigation"> 
    <div class="navbar-inner"> 
     <div class="container"> 
      <button type="button" class="btn btn-default btn-left" data-toggle="window" data-target="#phone-left">
       <svg class="svg-icon svg-nav" viewbox="0 0 100 100">
        <line class="svg-line" x1="10" y1="17" x2="90" y2="17" />
        <line class="svg-line" x1="10" y1="50" x2="90" y2="50" />
        <line class="svg-line" x1="10" y1="82" x2="90" y2="82" />
       </svg></button> 
      <div class="brand"> 
       <a class="brand-main" href="//f5.com">
        <svg viewbox="0 0 100 88" xmlns="http://www.w3.org/2000/svg"> 
         <circle r="44" cy="44" cx="44" fill="#E21D38" /> 
         <path stroke="null" d="M43.02 48.22c21.63 1.8 29.95 7.75 29.56 15.88-.4 4.36-4.57 8.52-9.92 8.93-6.34.4-9.33-2.2-11.1-4.97-1.6-2.57-3.38-5.16-5.17-7.94-.4-.8-1.2-.2-1.8.2-1.4 1.2-2.6 2.58-3.8 3.78-.7.78-.5 1.4-.3 1.98 1.2 2.78 2.4 5.56 3.6 8.13 1.9 1.2 10.8 2.8 17.4 2.2 4.6-.4 10.1-2.2 14.9-5.5 4.6-3.6 7.9-8.3 8.5-16.1.2-4.7-.6-9.6-4.78-14.2s-11.3-8.3-25.8-9.3c.8-2.3 1.4-4.5 2.2-6.73 8.75.4 16.5 1 23.04 1.8.6-2.5.8-4.95 1.4-7.36l-1.8-2.1c-3.36-.42-6.55-1.22-10.1-1.62-4.55-.6-9.3-1-14.46-1.2-3.4 9.57-7.4 21.64-11.6 34.3m-5.8-37.1c-1.6 0-3.76.4-7.33 1.2-7.73 2.2-17.24 7.54-18.24 16.45-.2 1.4-.2 3-.4 4.3l-6.13.6C5 35.6 5 37.2 4.8 39c2-.2 3.97-.2 6.15-.4-.4 9.36 0 18.7.8 27.37.2 1.4.2 2.6.2 3.4-.2.82-1.6 1.22-3.57 1.22l2.6 3.1c7.56 1.4 17.1 2.4 27.18 2.6v-3c-5.97-.4-8.7-1.2-9.1-2.4-.4-1-.4-2.4-.6-3.8-.4-9.1-.6-19.1-.4-29.2 3.43 0 6.75 0 10.17-.2 1.8-.8 3.4-1.6 5-2.4v-3.4c-5.17 0-10.13.2-15.1.2l.6-11.9c.2-2.6 1.98-4.4 3.57-4.4 2.77-.2 5.33.98 7.92 2.17 1.4.6 2.8 1.4 4.18 2 .6.2 1.4.4 2-.23.8-.97 1.6-1.97 2.38-2.76.4-.6.2-1 0-1.2l-5.38-4c-1-.8-2.8-.8-4.4-.8-.6-.2-1.2 0-1.8 0" fill="#FFF" /> 
         <text x="90" y="75" font-size="17" fill="#E21D38">
          ®
         </text> 
        </svg></a> 
      </div> 
      <button type="button" class="btn btn-default btn-right" data-toggle="window" data-target="#phone-right">
       <svg class="svg-icon svg-nav" viewbox="0 0 100 100">
        <line class="svg-line" x1="10" y1="17" x2="90" y2="17" />
        <line class="svg-line" x1="10" y1="50" x2="90" y2="50" />
        <line class="svg-line" x1="10" y1="82" x2="90" y2="82" />
       </svg></button> 
     </div> 
    </div> 
   </div> 
   <div id="phone-left" class="window window-left" aria-hidden="true"> 
    <div class="contain"> 
     <div class="menu-slider"> 
     </div> 
    </div> 
   </div> 
   <div id="phone-right" class="window window-right" aria-hidden="true"> 
    <div class="contain"> 
     <div class="input-group manual-search-submit" id="mobile-search-form"> 
      <input type="text" class="form-control" id="MobileSearch" placeholder="&nbsp; Search"> 
      <span class="input-group-btn"> <button class="btn btn-primary submit-search" type="button" title="submit">
        <svg class="svg-icon svg-search" viewbox="0 0 100 100">
         <ellipse class="svg-line" cx="43.6" cy="43.6" rx="29.6" ry="29.6" />
         <path class="svg-line" d="M64.3,64l22.2,22.5" />
        </svg></button> </span> 
     </div> 
     <span id="AvatarSpace"></span> 
     <div class="menu-slider"> 
      <span id="MenuSpace"></span> 
     </div> 
    </div> 
   </div> 
   <!-- f5 Scripts --> 
   <script>

    var addthis_config = addthis_config || {
        pubid : 'ra-5095d30f38626622',
        data_ga_property : 'UA-47575237-1',
        data_ga_social : true
    };


    

    var addthis_share = addthis_share || {}
    addthis_share = {
        passthrough: {
            twitter: {
                
                via: "F5Networks"
                
            }
        }
    }
    window.f5 = window.f5 || {};
    $.extend(window.f5, {"enableDebugging":"false","secureMode":false,"readonlyMode":false,"adminMode":false,"editMode":false,"debugMode":false,"popupMode":false,"env":"production","f5v":"157","cdv":"797","cdnEnabled":true,"cdnDomain":"https://dmcdn.f5.com","userCulture":"en-us","currentCulture":"en-us","currentLanguage":"en","urlLanguage":"en","serverAlias":"SE02","portalName":"F5","tabId":684,"portalId":1,"pageLevel":1,"mobileMenuNeeded":false,"breakpoint":"xs","userIp":"152.170.5.222","userInfo":null,"PageID":684,"crm":{"hostVersion":797,"hostEnableCompositeFiles":true,"hostEnableMinifyCss":false,"hostEnableMinifyJs":false,"portalVersion":"940","portalEnableCompositeFiles":false,"portalEnableMinifyCss":false,"portalEnableMinifyJs":false,"portalOverrideDefaultSettings":false},"engine_id":"015798286719081439686%3A3f1hpguhi24","facets":{"Solutions":"/solutions/","Products":"/products/","Support":"/support/","Education":"/education/","News & Events":"/about-us/"}});

    
    $('body').removeClass('dnnEditState'); // prevent drag-bar creation and hoverIntent and dnnHelperTip calls 
    
    
    $.fn.hoverIntent  = (function (org) { return org ? org : $.fn.hover; })($.fn.hoverIntent);
    $.fn.dnnHelperTip = (function (org) { return org ? org : function () { return this; } })($.fn.dnnHelperTip);
    $.fn.jScrollPane  = (function (org) { return org ? org : function () { return this; } })($.fn.jScrollPane);
    

    

        $(window).load(function() {   
            var canonical = $("link[rel='canonical']").attr("href");
            var url = window.location.href.split('?')[0];
        
            if( canonical != url && window.dataLayer != "undefined" )
            {
                window.dataLayer.push({ 
                    'event': 'canonical-mismatch' 
                });
            }
        });

    

</script> 
   <script src="https://dmcdn.f5.com/js/f5-core.min.js?f5v=157"></script> 
   <!--[if IE]>
    <script type="text/javascript">
        (function() {
            if ( typeof f5.Notify == 'function' ) {
                var ieNotify = new f5.Notify.Danger ( "This site no longer supports older versions of Internet Explorer. For the best possible experience please upgrade your browser \u003ca href=\"https://support.microsoft.com/en-us/help/17621/internet-explorer-downloads\"\u003ehere\u003c/a\u003e." );
                    ieNotify.onclick = function ( ) {location.assign ( 'https://support.microsoft.com/en-us/help/17621/internet-explorer-downloads' );}
                    ieNotify.init( );
            } 
        })();
    </script>
<![endif]--> 
   <input name="ScrollTop" type="hidden" id="ScrollTop"> 
   <input name="__dnnVariable" type="hidden" id="__dnnVariable" autocomplete="off" value="`{`__scdoff`:`1`,`sf_siteRoot`:`/`,`sf_tabId`:`684`}"> 
   <input name="__RequestVerificationToken" type="hidden" value="IP3CSBJzeKq69qo7iPhdn2EYzjLwSxV3_7pqHi9CJtVwec-A4f_dgf4heV_rgBPx3hgIQg2">
   <script src="https://dmcdn.f5.com/dh/1ed55197c33ecdd5f78c4176052de34f.js" type="text/javascript"></script> 
   <script type="text/javascript">
//<![CDATA[
(function() {

  var analyticsSettings;
  var initAnalyticsSettings = function (e) {
    analyticsSettings = {
      pageStart: analytics_page_startTime,
      servicesFramework: $.ServicesFramework(-1)
    };
  };
  if(window.addEventListener) {
    window.addEventListener('load', initAnalyticsSettings, false);
  } else {
    window.attachEvent('onload', initAnalyticsSettings);
  };

  var eventName = (window.onpagehide || window.onpagehide === null) ? 'pagehide' : 'unload';
  if (window.addEventListener) {
    window.addEventListener(eventName, function (e) {
      if (analyticsSettings) {
        analyticsSettings.eventSource = 'pagehide';
        if(dnn && dnn.analytics) { dnn.analytics.clientUnloading(e,analyticsSettings); }
      }
    }, false);
  } else {
    window.attachEvent('on' + eventName, function (e) {
      if (analyticsSettings) {
        analyticsSettings.eventSource = 'pagehide';
        if(dnn && dnn.analytics) { dnn.analytics.clientUnloading(e,analyticsSettings); }
      }
    });
  }

})();
//]]>
</script> 
  </form> 
  <!--CDF(Javascript|/js/dnncore.js)-->
  <!--CDF(Javascript|/js/dnn.modalpopup.js)-->
  <!--CDF(Css|/DesktopModules/F5/Articles/module.css)-->
  <!--CDF(Css|/DesktopModules/F5/Articles/module.css)-->
  <!--CDF(Css|/css/component-legacy-articles.css)-->
  <!--CDF(Css|/css/component-toc.css)-->
  <!--CDF(Javascript|/resources/shared/components/f5Toolbar/f5.toolbar.action.js)-->
  <!--CDF(Javascript|/DesktopModules/F5/Articles/Scripts/jquery.bootpag.min.js)-->
  <!--CDF(Javascript|/DesktopModules/F5/Articles/Scripts/articles.pagination.js)-->
  <!--CDF(Javascript|/js/f5-toc.min.js)-->
  <!--CDF(Javascript|/DesktopModules/DNNCorp/EvoqContentLibrary/ClientScripts/dnn.analytics.Injected.js)-->
  <!--CDF(Javascript|/js/dnn.js)-->
  <!--CDF(Javascript|/js/dnn.servicesframework.js)-->
  <!--CDF(Javascript|/Resources/libraries/jQuery/02_02_04/jQuery.min.js)-->  
  <script id="f5_cspm">(function(){var f5_cspm={f5_p:'GMNJHNCPMPBMENAMABLFBHBNEJFJPOBFPPKPGFLPJHGIFPPENNJNLHKDOAONNOCIPMEBJCBPAABFJEBMBOFAGPCAAAKJCLPPNNBFMMLIOGBDEACINJOOCPEMIGKOFNOP',setCharAt:function(str,index,chr){if(index>str.length-1)return str;return str.substr(0,index)+chr+str.substr(index+1);},get_byte:function(str,i){var s=(i/16)|0;i=(i&15);s=s*32;return((str.charCodeAt(i+16+s)-65)<<4)|(str.charCodeAt(i+s)-65);},set_byte:function(str,i,b){var s=(i/16)|0;i=(i&15);s=s*32;str=f5_cspm.setCharAt(str,(i+16+s),String.fromCharCode((b>>4)+65));str=f5_cspm.setCharAt(str,(i+s),String.fromCharCode((b&15)+65));return str;},set_latency:function(str,latency){latency=latency&0xffff;str=f5_cspm.set_byte(str,40,(latency>>8));str=f5_cspm.set_byte(str,41,(latency&0xff));str=f5_cspm.set_byte(str,35,2);return str;},wait_perf_data:function(){try{var wp=window.performance.timing;if(wp.loadEventEnd>0){var res=wp.loadEventEnd-wp.navigationStart;if(res<60001){var cookie_val=f5_cspm.set_latency(f5_cspm.f5_p,res);window.document.cookie='f5avr0935959778aaaaaaaaaaaaaaaa='+encodeURIComponent(cookie_val)+';path=/';}
return;}}
catch(err){return;}
setTimeout(f5_cspm.wait_perf_data,100);return;},go:function(){var chunk=window.document.cookie.split(/\s*;\s*/);for(var i=0;i<chunk.length;++i){var pair=chunk[i].split(/\s*=\s*/);if(pair[0]=='f5_cspm'&&pair[1]=='1234')
{var d=new Date();d.setTime(d.getTime()-1000);window.document.cookie='f5_cspm=;expires='+d.toUTCString()+';path=/;';setTimeout(f5_cspm.wait_perf_data,100);}}}}
f5_cspm.go();}());</script>
 </body>
</html>