<!DOCTYPE html PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN" "http://www.w3.org/TR/html4/loose.dtd">
<!--

    Licensed to the Apache Software Foundation (ASF) under one or more
    contributor license agreements.  See the NOTICE file distributed with
    this work for additional information regarding copyright ownership.
    The ASF licenses this file to You under the Apache License, Version 2.0
    (the "License"); you may not use this file except in compliance with
    the License.  You may obtain a copy of the License at

       http://www.apache.org/licenses/LICENSE-2.0

    Unless required by applicable law or agreed to in writing, software
    distributed under the License is distributed on an "AS IS" BASIS,
    WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
    See the License for the specific language governing permissions and
    limitations under the License.
-->
<html>
 <head> 
  <link href="//camel.apache.org/styles/site.css" rel="stylesheet" type="text/css"> 
  <link href="//camel.apache.org/styles/type-settings.css" rel="stylesheet" type="text/css"> 
  <script src="//camel.apache.org/styles/prototype.js" type="text/javascript"></script> 
  <script src="//camel.apache.org/styles/rico.js" type="text/javascript"></script> 
  <script src="//camel.apache.org/styles/site.js" type="text/javascript"></script> 
  <meta http-equiv="Content-type" content="text/html;charset=UTF-8"> 
  <style type="text/css">
      .maincontent { overflow:hidden; }
    </style> 
  <!--[if IE]>
    <style type="text/css">
      .maincontent { width:100%; }
    </style>
    <![endif]--> 
  <link href="//camel.apache.org/styles/highlighter/styles/shCoreCamel.css" rel="stylesheet" type="text/css"> 
  <link href="//camel.apache.org/styles/highlighter/styles/shThemeCamel.css" rel="stylesheet" type="text/css"> 
  <script src="//camel.apache.org/styles/highlighter/scripts/shCore.js" type="text/javascript"></script> 
  <script src="//camel.apache.org/styles/highlighter/scripts/shBrushJava.js" type="text/javascript"></script> 
  <script src="//camel.apache.org/styles/highlighter/scripts/shBrushXml.js" type="text/javascript"></script> 
  <script src="//camel.apache.org/styles/highlighter/scripts/shBrushPlain.js" type="text/javascript"></script> 
  <script type="text/javascript">
  SyntaxHighlighter.defaults['toolbar'] = false;
  SyntaxHighlighter.all();
  </script> 
  <title>
    Apache Camel: Book DataFormat Appendix
    </title> 
 </head> 
 <body> 
  <div class="white_box"> 
   <div class="header"> 
    <div class="header_l"> 
     <div class="header_r"> 
     </div> 
    </div> 
   </div> 
   <div class="content"> 
    <div class="content_l"> 
     <div class="content_r"> 
      <div> 
       <!-- Banner --> 
       <div id="banner-content">
        <div id="asf_logo"> 
         <div id="activemq_logo" style="height:108px; background:transparent url(banner.data/apache-camel-7.png) no-repeat scroll left top;"> 
          <a shape="rect" style="float:left; width:310px;display:block;text-indent:-5000px;text-decoration:none;line-height:140px; margin-top:20px; margin-left:18px;" href="http://camel.apache.org/">Camel</a> 
          <a shape="rect" style="float:right; width:180px;display:block;text-indent:-5000px;text-decoration:none;line-height:80px; margin-top:45px; margin-right:10px;" href="http://www.apache.org">Apache</a> 
         </div> 
        </div>
       </div> 
       <!-- Banner --> 
       <div class="top_red_bar"> 
        <div id="site-breadcrumbs"> 
         <!-- Breadcrumbs --> 
         <a href="index.html">Apache Camel</a>&nbsp;&gt;&nbsp;
         <a href="site.html">Site</a>&nbsp;&gt;&nbsp;
         <a href="book.html">Book</a>&nbsp;&gt;&nbsp;
         <a href="book-dataformat-appendix.html">Book DataFormat Appendix</a> 
        </div> 
        <!-- Quicklinks --> 
        <div id="site-quicklinks">
         <p><a shape="rect" href="download.html">Download</a> | <a shape="rect" href="javadoc.html">JavaDoc</a> | <a shape="rect" href="source.html">Source</a> | <a shape="rect" class="external-link" href="https://github.com/apache/camel/" rel="nofollow">GitHub</a> | <a shape="rect" class="external-link" href="https://gitter.im/apache/apache-camel" rel="nofollow">Gitter</a> |&nbsp;<a shape="rect" href="support.html">Support</a></p>
        </div> 
        <!-- Quicklinks --> 
       </div> 
       <table border="0"> 
        <tbody> 
         <tr> 
          <td valign="top" width="100%"> 
           <div class="wiki-content maincontent">
            <div class="chapter" id="chapter-dataformat-Appendix"></div> 
            <h1 id="BookDataFormatAppendix-DataFormatAppendix">Data Format Appendix</h1> 
            <h2 id="BookDataFormatAppendix-DataFormat">Data Format</h2> 
            <p>Camel supports a pluggable DataFormat to allow messages to be marshalled to and from binary or text formats to support a kind of <a shape="rect" href="message-translator.html">Message Translator</a>.</p> 
            <p>The following data formats are currently supported:</p> 
            <ul>
             <li>Standard JVM object marshalling
              <ul>
               <li><a shape="rect" href="serialization.html">Serialization</a></li>
               <li><a shape="rect" href="string.html">String</a></li>
              </ul></li>
            </ul>
            <ul>
             <li>Object marshalling
              <ul>
               <li><a shape="rect" href="avro.html">Avro</a></li>
               <li><a shape="rect" href="boon.html">Boon</a></li>
               <li><a shape="rect" href="hessian.html">Hessian</a></li>
               <li><a shape="rect" href="json.html">JSON</a></li>
               <li><a shape="rect" href="protobuf.html">Protobuf</a></li>
               <li><a shape="rect" href="yaml-data-format.html">YAML</a></li>
              </ul></li>
            </ul>
            <ul>
             <li>Object/XML marshalling
              <ul>
               <li><a shape="rect" href="castor.html">Castor</a></li>
               <li><a shape="rect" href="jaxb.html">JAXB</a></li>
               <li><a shape="rect" href="xmlbeans.html">XmlBeans</a></li>
               <li><a shape="rect" href="xstream.html">XStream</a></li>
               <li><a shape="rect" href="jibx.html">JiBX</a></li>
               <li><a shape="rect" href="jackson-xml.html">Jackson XML</a></li>
              </ul></li>
            </ul>
            <ul>
             <li>Object/XML/Webservice marshalling
              <ul>
               <li><a shape="rect" href="soap.html">SOAP</a></li>
              </ul></li>
            </ul>
            <ul>
             <li>Direct JSON / XML marshalling
              <ul>
               <li><a shape="rect" href="xmljson.html">XmlJson</a></li>
              </ul></li>
            </ul>
            <ul>
             <li>Flat data structure marshalling
              <ul>
               <li><a shape="rect" href="beanio.html">BeanIO</a></li>
               <li><a shape="rect" href="bindy.html">Bindy</a></li>
               <li><a shape="rect" href="csv.html">CSV</a></li>
               <li><a shape="rect" href="edi.html">EDI</a></li>
               <li><a shape="rect" href="flatpack-dataformat.html">Flatpack DataFormat</a></li>
               <li><a shape="rect" href="univocity-parsers-formats.html">uniVocity-parsers formats</a></li>
              </ul></li>
            </ul>
            <ul>
             <li>Domain specific marshalling
              <ul>
               <li><a shape="rect" href="hl7-dataformat.html">HL7 DataFormat</a></li>
              </ul></li>
            </ul>
            <ul>
             <li>Compression
              <ul>
               <li><a shape="rect" href="gzip-data-format.html">GZip data format</a></li>
               <li><a shape="rect" href="zip-dataformat.html">Zip DataFormat</a></li>
               <li><a shape="rect" href="zip-file-dataformat.html">Zip File DataFormat</a></li>
               <li><a shape="rect" href="lzf-data-format.html">LZF Data Format</a></li>
               <li><a shape="rect" href="tar-dataformat.html">Tar DataFormat</a></li>
              </ul></li>
            </ul>
            <ul>
             <li>Security
              <ul>
               <li><a shape="rect" href="crypto.html">Crypto</a></li>
               <li><a shape="rect" href="crypto.html">PGP</a></li>
               <li><a shape="rect" href="xmlsecurity-dataformat.html">XMLSecurity DataFormat</a></li>
              </ul></li>
            </ul>
            <ul>
             <li>Misc.
              <ul>
               <li><a shape="rect" href="base64.html">Base64</a></li>
               <li><a shape="rect" href="custom-dataformat.html">Custom DataFormat</a> - to use your own custom implementation</li>
               <li><a shape="rect" href="mime-multipart.html">MIME-Multipart</a></li>
               <li><a shape="rect" href="rss.html">RSS</a></li>
               <li><a shape="rect" href="tidymarkup.html">TidyMarkup</a></li>
               <li><a shape="rect" href="syslog.html">Syslog</a></li>
               <li><a shape="rect" href="ical.html">ICal</a></li>
               <li><a shape="rect" href="barcode-data-format.html">Barcode </a>- to read and generate barcodes (QR-Code, PDF417, ...)</li>
              </ul></li>
            </ul> 
            <p>And related is the following:</p> 
            <ul class="alternate">
             <li><a shape="rect" href="dataformat-component.html">DataFormat Component</a> for working with <a shape="rect" href="data-format.html">Data Format</a>s as if it was a regular <a shape="rect" href="component.html">Component</a> supporting <a shape="rect" href="endpoint.html">Endpoint</a>s and <a shape="rect" href="uris.html">URIs</a>.</li>
             <li><a shape="rect" href="dozer-type-conversion.html">Dozer Type Conversion</a> using Dozer for type converting POJOs</li>
            </ul> 
            <h3 id="BookDataFormatAppendix-Unmarshalling">Unmarshalling</h3> 
            <p>If you receive a message from one of the Camel <a shape="rect" href="components.html">Components</a> such as <a shape="rect" href="file2.html">File</a>, <a shape="rect" href="http.html">HTTP</a> or <a shape="rect" href="jms.html">JMS</a> you often want to unmarshal the payload into some bean so that you can process it using some <a shape="rect" href="bean-integration.html">Bean Integration</a> or perform <a shape="rect" href="predicate.html">Predicate</a> evaluation and so forth. To do this use the <strong>unmarshal</strong> word in the <a shape="rect" href="dsl.html">DSL</a> in Java or the <a shape="rect" href="xml-configuration.html">Xml Configuration</a>.</p> 
            <p>For example</p> 
            <div class="code panel pdl" style="border-width: 1px;">
             <div class="codeContent panelContent pdl"> 
              <script class="brush: java; gutter: false; theme: Default" type="syntaxhighlighter"><![CDATA[
DataFormat jaxb = new JaxbDataFormat(&quot;com.acme.model&quot;);

from(&quot;activemq:My.Queue&quot;).
  unmarshal(jaxb).
  to(&quot;mqseries:Another.Queue&quot;);
]]></script> 
             </div>
            </div> 
            <p>The above uses a named DataFormat of <em>jaxb</em> which is configured with a number of Java package names. You can if you prefer use a named reference to a data format which can then be defined in your <a shape="rect" href="registry.html">Registry</a> such as via your <a shape="rect" href="spring.html">Spring</a> XML file.</p> 
            <p>You can also use the DSL itself to define the data format as you use it. For example the following uses Java serialization to unmarshal a binary file then send it as an ObjectMessage to <a shape="rect" href="activemq.html">ActiveMQ</a></p> 
            <div class="code panel pdl" style="border-width: 1px;">
             <div class="codeContent panelContent pdl"> 
              <script class="brush: java; gutter: false; theme: Default" type="syntaxhighlighter"><![CDATA[
from(&quot;file://foo/bar&quot;).
  unmarshal().serialization().
  to(&quot;activemq:Some.Queue&quot;);
]]></script> 
             </div>
            </div> 
            <h3 id="BookDataFormatAppendix-Marshalling">Marshalling</h3> 
            <p>Marshalling is the opposite of unmarshalling, where a bean is marshalled into some binary or textual format for transmission over some transport via a Camel <a shape="rect" href="component.html">Component</a>. Marshalling is used in the same way as unmarshalling above; in the <a shape="rect" href="dsl.html">DSL</a> you can use a DataFormat instance, you can configure the DataFormat dynamically using the DSL or you can refer to a named instance of the format in the <a shape="rect" href="registry.html">Registry</a>.</p> 
            <p>The following example unmarshals via serialization then marshals using a named JAXB data format to perform a kind of <a shape="rect" href="message-translator.html">Message Translator</a></p> 
            <div class="code panel pdl" style="border-width: 1px;">
             <div class="codeContent panelContent pdl"> 
              <script class="brush: java; gutter: false; theme: Default" type="syntaxhighlighter"><![CDATA[
from(&quot;file://foo/bar&quot;).
  unmarshal().serialization(). 
  marshal(&quot;jaxb&quot;).
  to(&quot;activemq:Some.Queue&quot;);
]]></script> 
             </div>
            </div> 
            <h3 id="BookDataFormatAppendix-UsingSpringXML">Using Spring XML</h3> 
            <p>This example shows how to configure the data type just once and reuse it on multiple routes</p> 
            <div class="code panel pdl" style="border-width: 1px;">
             <div class="codeContent panelContent pdl"> 
              <script class="brush: xml; gutter: false; theme: Default" type="syntaxhighlighter"><![CDATA[
&lt;camelContext id=&quot;camel&quot; xmlns=&quot;http://camel.apache.org/schema/spring&quot;&gt;
  &lt;dataFormats&gt;
    &lt;jaxb id=&quot;myJaxb&quot; prettyPrint=&quot;true&quot; contextPath=&quot;org.apache.camel.example&quot;/&gt;
  &lt;/dataFormats&gt;

  &lt;route&gt;
    &lt;from uri=&quot;direct:start&quot;/&gt;
    &lt;marshal ref=&quot;myJaxb&quot;/&gt;
    &lt;to uri=&quot;direct:marshalled&quot;/&gt;
  &lt;/route&gt;
  &lt;route&gt;
    &lt;from uri=&quot;direct:marshalled&quot;/&gt;
    &lt;unmarshal ref=&quot;myJaxb&quot;/&gt;
    &lt;to uri=&quot;mock:result&quot;/&gt;
  &lt;/route&gt;

&lt;/camelContext&gt;
]]></script> 
             </div>
            </div> 
            <p>You can also define reusable data formats as Spring beans </p> 
            <div class="code panel pdl" style="border-width: 1px;">
             <div class="codeContent panelContent pdl"> 
              <script class="brush: java; gutter: false; theme: Default" type="syntaxhighlighter"><![CDATA[
&lt;bean id=&quot;myJaxb&quot; class=&quot;org.apache.camel.model.dataformat.JaxbDataFormat&quot;&gt;
  &lt;property name=&quot;prettyPrint&quot; value=&quot;true&quot;/&gt;
  &lt;property name=&quot;contextPath&quot; value=&quot;org.apache.camel.example&quot;/&gt;
&lt;/bean&gt;  
]]></script> 
             </div>
            </div> 
            <h2 id="BookDataFormatAppendix-Serialization">Serialization</h2> 
            <p>Serialization is a <a shape="rect" href="data-format.html">Data Format</a> which uses the standard Java Serialization mechanism to unmarshal a binary payload into Java objects or to marshal Java objects into a binary blob.<br clear="none"> For example the following uses Java serialization to unmarshal a binary file then send it as an ObjectMessage to <a shape="rect" href="activemq.html">ActiveMQ</a></p> 
            <div class="code panel pdl" style="border-width: 1px;">
             <div class="codeContent panelContent pdl"> 
              <script class="brush: java; gutter: false; theme: Default" type="syntaxhighlighter"><![CDATA[
from(&quot;file://foo/bar&quot;).
  unmarshal().serialization().
  to(&quot;activemq:Some.Queue&quot;);
]]></script> 
             </div>
            </div> 
            <h3 id="BookDataFormatAppendix-Dependencies">Dependencies</h3> 
            <p>This data format is provided in <strong>camel-core</strong> so no additional dependencies is needed.</p> 
            <h2 id="BookDataFormatAppendix-JAXB">JAXB</h2>
            <p>JAXB is a <a shape="rect" href="data-format.html">Data Format</a> which uses the JAXB2 XML marshalling standard which is included in Java 6 to unmarshal an XML payload into Java objects or to marshal Java objects into an XML payload.</p>
            <h3 id="BookDataFormatAppendix-UsingtheJavaDSL">Using the Java DSL</h3>
            <p>For example the following uses a named DataFormat of <em>jaxb</em> which is configured with a number of Java package names to initialize the <a shape="rect" class="external-link" href="http://java.sun.com/javase/6/docs/api/javax/xml/bind/JAXBContext.html" rel="nofollow">JAXBContext</a>.</p>
            <plain-text-body>
             DataFormat jaxb = new JaxbDataFormat("com.acme.model"); from("activemq:My.Queue"). unmarshal(jaxb). to("mqseries:Another.Queue"); 
            </plain-text-body>
            <p>You can if you prefer use a named reference to a data format which can then be defined in your <a shape="rect" href="registry.html">Registry</a> such as via your <a shape="rect" href="spring.html">Spring</a> XML file. e.g.</p>
            <plain-text-body>
             from("activemq:My.Queue"). unmarshal("myJaxbDataType"). to("mqseries:Another.Queue"); 
            </plain-text-body>
            <h3 id="BookDataFormatAppendix-UsingSpringXML.1">Using Spring XML</h3>
            <p>The following example shows how to use JAXB to unmarshal using <a shape="rect" href="spring.html">Spring</a> configuring the jaxb data type
             <plain-text-body>
              {snippet:id=example|lang=xml|url=camel/trunk/components/camel-jaxb/src/test/resources/org/apache/camel/example/springDataFormat.xml}
             </plain-text-body>This example shows how to configure the data type just once and reuse it on multiple routes.
             <plain-text-body>
              {snippet:id=example|lang=xml|url=camel/trunk/components/camel-jaxb/src/test/resources/org/apache/camel/example/marshalAndUnmarshalWithRef.xml}
             </plain-text-body></p>
            <parameter ac:name="title">
             Multiple context paths
            </parameter>
            <rich-text-body>
             <p>It is possible to use this data format with more than one context path. You can specify context path using <code>:</code> as separator, for example <code>com.mycompany:com.mycompany2</code>. Note that this is handled by JAXB implementation and might change if you use different vendor than RI.</p>
            </rich-text-body>
            <h3 id="BookDataFormatAppendix-Partialmarshalling/unmarshalling">Partial marshalling/unmarshalling</h3>
            <p><strong>This feature is new to Camel 2.2.0.</strong><br clear="none"> JAXB 2 supports marshalling and unmarshalling XML tree fragments. By default JAXB looks for <code>@XmlRootElement</code> annotation on given class to operate on whole XML tree. This is useful but not always - sometimes generated code does not have @XmlRootElement annotation, sometimes you need unmarshall only part of tree.<br clear="none"> In that case you can use partial unmarshalling. To enable this behaviours you need set property <code>partClass</code>. Camel will pass this class to JAXB's unmarshaler.
             <plain-text-body>
              {snippet:id=example|lang=xml|url=camel/trunk/components/camel-jaxb/src/test/resources/org/apache/camel/example/springDataFormatPartial.xml}
             </plain-text-body>For marshalling you have to add <code>partNamespace</code> attribute with QName of destination namespace. Example of Spring DSL you can find above.</p>
            <h3 id="BookDataFormatAppendix-Fragment">Fragment</h3>
            <p><strong>This feature is new to Camel 2.8.0.</strong><br clear="none"> JaxbDataFormat has new property fragment which can set the the <code>Marshaller.JAXB_FRAGMENT</code> encoding property on the JAXB Marshaller. If you don't want the JAXB Marshaller to generate the XML declaration, you can set this option to be true. The default value of this property is false.</p>
            <h3 id="BookDataFormatAppendix-IgnoringtheNonXMLCharacter">Ignoring the NonXML Character</h3>
            <p><strong>This feature is new to Camel 2.2.0.</strong><br clear="none"> JaxbDataFromat supports to ignore the <a shape="rect" class="external-link" href="http://www.w3.org/TR/2004/REC-xml-20040204/#NT-Char" rel="nofollow">NonXML Character</a>, you just need to set the filterNonXmlChars property to be true, JaxbDataFormat will replace the NonXML character with " " when it is marshaling or unmarshaling the message. You can also do it by setting the <a shape="rect" href="exchange.html">Exchange</a> property <code>Exchange.FILTER_NON_XML_CHARS</code>.</p>
            <div class="table-wrap">
             <table class="confluenceTable">
              <tbody>
               <tr>
                <td colspan="1" rowspan="1" class="confluenceTd"><p>&nbsp;</p></td>
                <th colspan="1" rowspan="1" class="confluenceTh"><p>JDK 1.5</p></th>
                <th colspan="1" rowspan="1" class="confluenceTh"><p>JDK 1.6+</p></th>
               </tr>
               <tr>
                <th colspan="1" rowspan="1" class="confluenceTh"><p>Filtering in use</p></th>
                <td colspan="1" rowspan="1" class="confluenceTd"><p>StAX API and implementation</p></td>
                <td colspan="1" rowspan="1" class="confluenceTd"><p>No</p></td>
               </tr>
               <tr>
                <th colspan="1" rowspan="1" class="confluenceTh"><p>Filtering not in use</p></th>
                <td colspan="1" rowspan="1" class="confluenceTd"><p>StAX API only</p></td>
                <td colspan="1" rowspan="1" class="confluenceTd"><p>No</p></td>
               </tr>
              </tbody>
             </table>
            </div>
            <p>This feature has been tested with Woodstox 3.2.9 and Sun JDK 1.6 StAX implementation.</p>
            <p><strong>New for Camel 2.12.1</strong><br clear="none"> JaxbDataFormat now allows you to customize the XMLStreamWriter used to marshal the stream to XML. Using this configuration, you can add your own stream writer to completely remove, escape, or replace non-xml characters.</p>
            <parameter ac:name="language">
             java
            </parameter>
            <plain-text-body>
              JaxbDataFormat customWriterFormat = new JaxbDataFormat("org.apache.camel.foo.bar"); customWriterFormat.setXmlStreamWriterWrapper(new TestXmlStreamWriter()); 
            </plain-text-body>
            <p>The following example shows using the Spring DSL and also enabling Camel's NonXML filtering:</p>
            <parameter ac:name="">
             xml
            </parameter>
            <plain-text-body>
             &lt;bean id="testXmlStreamWriterWrapper" class="org.apache.camel.jaxb.TestXmlStreamWriter"/&gt; &lt;jaxb filterNonXmlChars="true" contextPath="org.apache.camel.foo.bar" xmlStreamWriterWrapper="#testXmlStreamWriterWrapper" /&gt; 
            </plain-text-body>
            <h3 id="BookDataFormatAppendix-WorkingwiththeObjectFactory">Working with the ObjectFactory</h3>
            <p>If you use XJC to create the java class from the schema, you will get an ObjectFactory for you JAXB context. Since the ObjectFactory uses <a shape="rect" class="external-link" href="http://java.sun.com/javase/6/docs/api/javax/xml/bind/JAXBElement.html" rel="nofollow">JAXBElement</a> to hold the reference of the schema and element instance value, jaxbDataformat will ignore the JAXBElement by default and you will get the element instance value instead of the JAXBElement object form the unmarshaled message body. <br clear="none"> If you want to get the JAXBElement object form the unmarshaled message body, you need to set the JaxbDataFormat object's ignoreJAXBElement property to be false.</p>
            <h3 id="BookDataFormatAppendix-Settingencoding">Setting encoding</h3>
            <p>You can set the <strong>encoding</strong> option to use when marshalling. Its the <code>Marshaller.JAXB_ENCODING</code> encoding property on the JAXB Marshaller.<br clear="none"> You can setup which encoding to use when you declare the JAXB data format. You can also provide the encoding in the <a shape="rect" href="exchange.html">Exchange</a> property <code>Exchange.CHARSET_NAME</code>. This property will overrule the encoding set on the JAXB data format.</p>
            <p>In this Spring DSL we have defined to use <code>iso-8859-1</code> as the encoding:
             <plain-text-body>
              {snippet:id=example|lang=xml|url=camel/trunk/components/camel-jaxb/src/test/resources/org/apache/camel/example/springDataFormatWithEncoding.xml}
             </plain-text-body></p>
            <h3 id="BookDataFormatAppendix-Controllingnamespaceprefixmapping">Controlling namespace prefix mapping</h3>
            <p><strong>Available as of Camel 2.11</strong></p>
            <p>When marshalling using <a shape="rect" href="jaxb.html">JAXB</a> or <a shape="rect" href="soap.html">SOAP</a> then the JAXB implementation will automatic assign namespace prefixes, such as ns2, ns3, ns4 etc. To control this mapping, Camel allows you to refer to a map which contains the desired mapping.</p>
            <p>Notice this requires having JAXB-RI 2.1 or better (from SUN) on the classpath, as the mapping functionality is dependent on the implementation of JAXB, whether its supported.</p>
            <p>For example in Spring XML we can define a Map with the mapping. In the mapping file below, we map SOAP to use soap as prefix. While our custom namespace "http://www.mycompany.com/foo/2" is not using any prefix.</p>
            <parameter ac:name="">
             xml
            </parameter>
            <plain-text-body>
              &lt;util:map id="myMap"&gt; &lt;entry key="http://www.w3.org/2003/05/soap-envelope" value="soap"/&gt; &lt;!-- we dont want any prefix for our namespace --&gt; &lt;entry key="http://www.mycompany.com/foo/2" value=""/&gt; &lt;/util:map&gt; 
            </plain-text-body>
            <p>To use this in <a shape="rect" href="jaxb.html">JAXB</a> or <a shape="rect" href="soap.html">SOAP</a> you refer to this map, using the <code>namespacePrefixRef</code> attribute as shown below. Then Camel will lookup in the <a shape="rect" href="registry.html">Registry</a> a <code>java.util.Map</code> with the id "myMap", which was what we defined above.</p>
            <parameter ac:name="">
             xml
            </parameter>
            <plain-text-body>
              &lt;marshal&gt; &lt;soapjaxb version="1.2" contextPath="com.mycompany.foo" namespacePrefixRef="myMap"/&gt; &lt;/marshal&gt; 
            </plain-text-body>
            <h3 id="BookDataFormatAppendix-Schemavalidation">Schema validation</h3>
            <p><strong>Available as of Camel 2.11</strong></p>
            <p>The JAXB <a shape="rect" href="data-format.html">Data Format</a> supports validation by marshalling and unmarshalling from/to XML. Your can use the prefix <strong>classpath:</strong>, <strong>file:* or *http:</strong> to specify how the resource should by resolved. You can separate multiple schema files by using the <strong>','</strong> character.</p>
            <parameter ac:name="title">
             Known issue
            </parameter>
            <rich-text-body>
             <p>Camel 2.11.0 and 2.11.1 has a known issue by validation multiple <code>Exchange</code>'s in parallel. See <a shape="rect" class="external-link" href="https://issues.apache.org/jira/browse/CAMEL-6630">CAMEL-6630</a>. This is fixed with Camel 2.11.2/2.12.0.</p>
            </rich-text-body>
            <p>Using the Java DSL, you can configure it in the following way:</p>
            <parameter ac:name="">
             java
            </parameter>
            <plain-text-body>
             JaxbDataFormat jaxbDataFormat = new JaxbDataFormat(); jaxbDataFormat.setContextPath(Person.class.getPackage().getName()); jaxbDataFormat.setSchema("classpath:person.xsd,classpath:address.xsd"); 
            </plain-text-body>
            <p>You can do the same using the XML DSL:</p>
            <parameter ac:name="">
             xml
            </parameter>
            <plain-text-body>
             &lt;marshal&gt; &lt;jaxb id="jaxb" schema="classpath:person.xsd,classpath:address.xsd"/&gt; &lt;/marshal&gt; 
            </plain-text-body>
            <p>Camel will create and pool the underling <code>SchemaFactory</code> instances on the fly, because the <code>SchemaFactory</code> shipped with the JDK is not thread safe.<br clear="none"> However, if you have a <code>SchemaFactory</code> implementation which is thread safe, you can configure the JAXB data format to use this one:</p>
            <parameter ac:name="">
             java
            </parameter>
            <plain-text-body>
             JaxbDataFormat jaxbDataFormat = new JaxbDataFormat(); jaxbDataFormat.setSchemaFactory(thradSafeSchemaFactory); 
            </plain-text-body>
            <h3 id="BookDataFormatAppendix-SchemaLocation">Schema Location</h3>
            <p><strong>Available as of Camel 2.14</strong></p>
            <p>The JAXB&nbsp;<a shape="rect" href="data-format.html">Data Format</a>&nbsp;supports to specify the SchemaLocation when marshaling the XML.&nbsp;</p>
            <p>Using the Java DSL, you can configure it in the following way:</p>
            <parameter ac:name="">
             java
            </parameter>
            <plain-text-body>
             JaxbDataFormat jaxbDataFormat = new JaxbDataFormat(); jaxbDataFormat.setContextPath(Person.class.getPackage().getName()); jaxbDataFormat.setSchemaLocation("schema/person.xsd"); 
            </plain-text-body>
            <p>You can do the same using the XML DSL:</p>
            <parameter ac:name="">
             xml
            </parameter>
            <plain-text-body>
             &lt;marshal&gt; &lt;jaxb id="jaxb" schemaLocation="schema/person.xsd"/&gt; &lt;/marshal&gt;
            </plain-text-body>
            <h3 id="BookDataFormatAppendix-MarshaldatathatisalreadyXML">Marshal data that is already XML</h3>
            <p><strong>Available as of Camel 2.14.1</strong></p>
            <div>
             The JAXB marshaller requires that the message body is JAXB compatible, eg its a JAXBElement, eg a java instance that has JAXB annotations, or extend JAXBElement. There can be situations where the message body is already in XML, eg from a String type. There is a new option&nbsp;
             <code>mustBeJAXBElement</code> you can set to false, to relax this check, so the JAXB marshaller only attempts to marshal JAXBElements (javax.xml.bind.JAXBIntrospector#isElement returns true). And in those situations the marshaller fallbacks to marshal the message body as-is.
            </div>
            <div>
             <h3 id="BookDataFormatAppendix-XmlRootElementobjects"><span style="color: rgb(51,51,51);">XmlRootElement objects</span></h3>
             <p><strong>Available as of Camel 2.17.2</strong></p>
             <p>The JAXB <a shape="rect" href="data-format.html">Data Format</a> option objectFactory has a default value equals to false. This is related to a performance degrading. For more information look at the issue <a shape="rect" class="external-link" href="https://issues.apache.org/jira/browse/CAMEL-10043">CAMEL-10043</a></p>
             <p>For the marshalling of <span style="color: rgb(51,51,51);">non-XmlRootElement JaxB objects</span> you'll need to <span style="color: rgb(51,51,51);">call JaxbDataFormat#setObjectFactory(true)</span></p>
            </div>
            <h3 id="BookDataFormatAppendix-Dependencies.1">Dependencies</h3>
            <p>To use JAXB in your camel routes you need to add the a dependency on <strong>camel-jaxb</strong> which implements this data format.</p>
            <p>If you use maven you could just add the following to your pom.xml, substituting the version number for the latest &amp; greatest release (see <a shape="rect" href="download.html">the download page for the latest versions</a>).</p>
            <plain-text-body>
             &lt;dependency&gt; &lt;groupId&gt;org.apache.camel&lt;/groupId&gt; &lt;artifactId&gt;camel-jaxb&lt;/artifactId&gt; &lt;version&gt;x.x.x&lt;/version&gt; &lt;/dependency&gt; 
            </plain-text-body> 
            <h2 id="BookDataFormatAppendix-XmlBeans">XmlBeans</h2> 
            <p>XmlBeans is a <a shape="rect" href="data-format.html">Data Format</a> which uses the <a shape="rect" class="external-link" href="http://xmlbeans.apache.org/">XmlBeans library</a> to unmarshal an XML payload into Java objects or to marshal Java objects into an XML payload.</p> 
            <div class="code panel pdl" style="border-width: 1px;">
             <div class="codeContent panelContent pdl"> 
              <script class="brush: java; gutter: false; theme: Default" type="syntaxhighlighter"><![CDATA[
from(&quot;activemq:My.Queue&quot;).
  unmarshal().xmlBeans().
  to(&quot;mqseries:Another.Queue&quot;);
]]></script> 
             </div>
            </div> 
            <h3 id="BookDataFormatAppendix-Dependencies.2">Dependencies</h3> 
            <p>To use XmlBeans in your camel routes you need to add the dependency on <strong>camel-xmlbeans</strong> which implements this data format. </p> 
            <p>If you use maven you could just add the following to your pom.xml, substituting the version number for the latest &amp; greatest release (see <a shape="rect" href="download.html">the download page for the latest versions</a>).</p> 
            <div class="code panel pdl" style="border-width: 1px;">
             <div class="codeContent panelContent pdl"> 
              <script class="brush: java; gutter: false; theme: Default" type="syntaxhighlighter"><![CDATA[
&lt;dependency&gt;
  &lt;groupId&gt;org.apache.camel&lt;/groupId&gt;
  &lt;artifactId&gt;camel-xmlbeans&lt;/artifactId&gt;
  &lt;version&gt;x.x.x&lt;/version&gt;
  &lt;!-- use the same version as your Camel core version --&gt;
&lt;/dependency&gt;
]]></script> 
             </div>
            </div> 
            <h2 id="BookDataFormatAppendix-XStream">XStream</h2>
            <p>XStream is a <a shape="rect" href="data-format.html">Data Format</a> which uses the <a shape="rect" class="external-link" href="http://xstream.codehaus.org/" rel="nofollow">XStream library</a> to marshal and unmarshal Java objects to and from XML.</p>
            <p>To use XStream in your camel routes you need to add the a dependency on&nbsp;<strong>camel-xstream</strong>&nbsp;which implements this data format.</p>
            <p>Maven users will need to add the following dependency to their <code>pom.xml</code>&nbsp;for this component:</p>
            <parameter ac:name="language">
             xml
            </parameter>
            <plain-text-body>
             &lt;dependency&gt; &lt;groupId&gt;org.apache.camel&lt;/groupId&gt; &lt;artifactId&gt;camel-xstream&lt;/artifactId&gt; &lt;version&gt;x.x.x&lt;/version&gt; &lt;!-- use the same version as your Camel core version --&gt; &lt;/dependency&gt; 
            </plain-text-body>
            <h3 id="BookDataFormatAppendix-UsingtheJavaDSL.1">Using the Java DSL</h3>
            <plain-text-body>
             // lets turn Object messages into XML then send to MQSeries from("activemq:My.Queue"). marshal().xstream(). to("mqseries:Another.Queue"); 
            </plain-text-body>
            <p>If you would like to configure the <code>XStream</code> instance used by the Camel for the message transformation, you can simply pass a reference to that instance on the DSL level.</p>
            <plain-text-body>
             XStream xStream = new XStream(); xStream.aliasField("money", PurchaseOrder.class, "cash"); // new Added setModel option since Camel 2.14 xStream.setModel("NO_REFERENCES"); ... from("direct:marshal"). marshal(new XStreamDataFormat(xStream)). to("mock:marshaled"); 
            </plain-text-body>
            <h3 id="BookDataFormatAppendix-XMLInputFactoryandXMLOutputFactory">XMLInputFactory and XMLOutputFactory</h3>
            <p><a shape="rect" class="external-link" href="http://xstream.codehaus.org/" rel="nofollow">The XStream library</a> uses the <code>javax.xml.stream.XMLInputFactory</code> and <code>javax.xml.stream.XMLOutputFactory</code>, you can control which implementation of this factory should be used.</p>
            <p>The Factory is discovered using this algorithm:<br clear="none"> 1. Use the <code>javax.xml.stream.XMLInputFactory</code> , <code>javax.xml.stream.XMLOutputFactory</code> system property.<br clear="none"> 2. Use the <code>lib/xml.stream.properties</code> file in the <code>JRE_HOME</code> directory.<br clear="none"> 3. Use the Services API, if available, to determine the classname by looking in the <code>META-INF/services/javax.xml.stream.XMLInputFactory</code>, <code>META-INF/services/javax.xml.stream.XMLOutputFactory</code> files in jars available to the JRE.<br clear="none"> 4. Use the platform default XMLInputFactory,XMLOutputFactory instance.</p>
            <h3 id="BookDataFormatAppendix-HowtosettheXMLencodinginXstreamDataFormat?">How to set the XML encoding in Xstream DataFormat?</h3>
            <p>From Camel 2.2.0, you can set the encoding of XML in Xstream DataFormat by setting the Exchange's property with the key <code>Exchange.CHARSET_NAME</code>, or setting the encoding property on Xstream from DSL or Spring config.</p>
            <plain-text-body>
             from("activemq:My.Queue"). marshal().xstream("UTF-8"). to("mqseries:Another.Queue"); 
            </plain-text-body>
            <p>
             <plain-text-body>
              {snippet:id=e1|lang=xml|url=camel/trunk/components/camel-xstream/src/test/resources/org/apache/camel/dataformat/xstream/SpringMarshalListTest.xml}
             </plain-text-body></p>
            <h3 id="BookDataFormatAppendix-SettingthetypepermissionsofXstreamDataFormat">Setting the type permissions of Xstream DataFormat</h3>
            <p>In Camel, one can always use its own processing step in the route to filter and block certain XML documents to be routed to the XStream's unmarhall step. From Camel 2.16.1, 2.15.5, you can set&nbsp;<a shape="rect" class="external-link" href="http://x-stream.github.io/security.html" rel="nofollow">XStream's type permissions</a>&nbsp;to automatically allow or deny the instantiation of certain types.</p>
            <p>The default type permissions setting used by Camel denies all types except for those from java.lang and java.util packages. This setting can be changed by setting System property org.apache.camel.xstream.permissions. Its value is a string of comma-separated permission terms, each representing a type being allowed or denied, depending on whether the term is prefixed with '+' (note '+' may be omitted) or with '-', respectively.</p>
            <p>Each term may contain a wildcard character '*'. For example, value "-*,java.lang.*,java.util.*" indicates denying all types except for java.lang.* and java.util.* classes. Setting this value to an empty string "" reverts to the default XStream's type permissions handling which denies certain blacklisted classes and allow others.</p>
            <p>The type permissions setting can be extended at an individual XStream DataFormat instance by setting its type permissions property.</p>
            <plain-text-body>
              &lt;dataFormats&gt; &lt;xstream id="xstream-default" permissions="org.apache.camel.samples.xstream.*"/&gt; ... 
            </plain-text-body> 
            <h2 id="BookDataFormatAppendix-CSV">CSV</h2>
            <p>The CSV <a shape="rect" href="data-format.html">Data Format</a> uses <a shape="rect" class="external-link" href="http://commons.apache.org/proper/commons-csv/">Apache Commons CSV</a> to handle CSV payloads (Comma Separated Values) such as those exported/imported by Excel.</p>
            <p>As of Camel 2.15.0, it now uses the&nbsp;<a shape="rect" class="external-link" href="http://commons.apache.org/proper/commons-csv/archives/1.1/index.html">Apache Commons CSV 1.1</a> which is based on a completely different set of options.</p>
            <h3 id="BookDataFormatAppendix-AvailableoptionsuntilCamel2.15">Available options until Camel 2.15</h3>
            <div class="table-wrap">
             <table class="confluenceTable">
              <tbody>
               <tr>
                <th colspan="1" rowspan="1" class="confluenceTh"><p>Option</p></th>
                <th colspan="1" rowspan="1" class="confluenceTh"><p>Type</p></th>
                <th colspan="1" rowspan="1" class="confluenceTh"><p>Description</p></th>
               </tr>
               <tr>
                <td colspan="1" rowspan="1" class="confluenceTd"><p>config</p></td>
                <td colspan="1" rowspan="1" class="confluenceTd"><p>CSVConfig</p></td>
                <td colspan="1" rowspan="1" class="confluenceTd"><p>Can be used to set a custom <code>CSVConfig</code> object.</p></td>
               </tr>
               <tr>
                <td colspan="1" rowspan="1" class="confluenceTd"><p>strategy</p></td>
                <td colspan="1" rowspan="1" class="confluenceTd"><p>CSVStrategy</p></td>
                <td colspan="1" rowspan="1" class="confluenceTd"><p>Can be used to set a custom <code>CSVStrategy</code>; the default is <code>CSVStrategy.DEFAULT_STRATEGY</code>.</p></td>
               </tr>
               <tr>
                <td colspan="1" rowspan="1" class="confluenceTd"><p>autogenColumns</p></td>
                <td colspan="1" rowspan="1" class="confluenceTd"><p>boolean</p></td>
                <td colspan="1" rowspan="1" class="confluenceTd"><p>Whether or not columns are auto-generated in the resulting CSV. The default value is <code>true</code>; subsequent messages use the previously created columns with new fields being added at the end of the line.</p></td>
               </tr>
               <tr>
                <td colspan="1" rowspan="1" class="confluenceTd"><p>delimiter</p></td>
                <td colspan="1" rowspan="1" class="confluenceTd"><p>String</p></td>
                <td colspan="1" rowspan="1" class="confluenceTd"><p><strong>Camel 2.4:</strong> The column delimiter to use; the default value is "<code>,</code>".</p></td>
               </tr>
               <tr>
                <td colspan="1" rowspan="1" class="confluenceTd"><p>skipFirstLine</p></td>
                <td colspan="1" rowspan="1" class="confluenceTd"><p>boolean</p></td>
                <td colspan="1" rowspan="1" class="confluenceTd"><p><strong>Camel 2.10:</strong> Whether or not to skip the first line of CSV input when unmarshalling (e.g. if the content has headers on the first line); the default value is <code>false</code>.</p></td>
               </tr>
               <tr>
                <td colspan="1" rowspan="1" class="confluenceTd">lazyLoad</td>
                <td colspan="1" rowspan="1" class="confluenceTd">boolean</td>
                <td colspan="1" rowspan="1" class="confluenceTd"><strong>Camel 2.12.2:</strong><span><span>&nbsp;Whether or not to </span></span><span style="line-height: 1.4285715;">Sequential access CSV input through an iterator which could avoid OOM exception when processing huge CSV file; </span><span>the default value is false </span></td>
               </tr>
               <tr>
                <td colspan="1" rowspan="1" class="confluenceTd">useMaps</td>
                <td colspan="1" rowspan="1" class="confluenceTd">boolean</td>
                <td colspan="1" rowspan="1" class="confluenceTd"><strong>Camel 2.13:</strong> Whether to use List&lt;Map&gt; when unmarshalling instead of List&lt;List&gt;.</td>
               </tr>
              </tbody>
             </table>
            </div>
            <h3 id="BookDataFormatAppendix-AvailableoptionsasofCamel2.15">Available options as of Camel 2.15</h3>
            <div class="table-wrap">
             <table class="confluenceTable">
              <tbody>
               <tr>
                <th colspan="1" rowspan="1" class="confluenceTh">Option</th>
                <th colspan="1" rowspan="1" class="confluenceTh">Type</th>
                <th colspan="1" rowspan="1" class="confluenceTh">Description</th>
               </tr>
               <tr>
                <td colspan="1" rowspan="1" class="confluenceTd"><code>format</code></td>
                <td colspan="1" rowspan="1" class="confluenceTd"><code>CSVFormat</code></td>
                <td colspan="1" rowspan="1" class="confluenceTd">The reference format to use, it will be updated with the other format options, the default value is <code>CSVFormat.DEFAULT</code></td>
               </tr>
               <tr>
                <td colspan="1" rowspan="1" class="confluenceTd"><code>commentMarkerDisabled</code></td>
                <td colspan="1" rowspan="1" class="confluenceTd"><code>boolean</code></td>
                <td colspan="1" rowspan="1" class="confluenceTd"><p>Disables the comment marker of the reference format.</p><p>This option is <code>false</code> by default.</p></td>
               </tr>
               <tr>
                <td colspan="1" rowspan="1" class="confluenceTd"><code>commentMarker</code></td>
                <td colspan="1" rowspan="1" class="confluenceTd"><code>Character</code></td>
                <td colspan="1" rowspan="1" class="confluenceTd"><p>Overrides the comment marker of the reference format.</p><p>This option is <code>null</code> by default. When <code>null</code> it keeps the value of the reference format which is <code>null</code> for <code>CSVFormat.DEFAULT</code>.</p></td>
               </tr>
               <tr>
                <td colspan="1" rowspan="1" class="confluenceTd"><code>delimiter</code></td>
                <td colspan="1" rowspan="1" class="confluenceTd"><code>Character</code></td>
                <td colspan="1" rowspan="1" class="confluenceTd"><p>Overrides the delimiter of the reference format.</p><p>This option is <code>null</code> by defaut. <span>When </span><code>null</code><span> it keeps the value of the reference format which is </span><code>','</code><span> for </span><code>CSVFormat.DEFAULT</code><span>.</span></p></td>
               </tr>
               <tr>
                <td colspan="1" rowspan="1" class="confluenceTd"><code>escapeDisabled</code></td>
                <td colspan="1" rowspan="1" class="confluenceTd"><code>boolean</code></td>
                <td colspan="1" rowspan="1" class="confluenceTd"><p>Disables the escape character of the reference format.</p><p>This option is <code>false</code> by default.</p></td>
               </tr>
               <tr>
                <td colspan="1" rowspan="1" class="confluenceTd"><code>escape</code></td>
                <td colspan="1" rowspan="1" class="confluenceTd"><code>Character</code></td>
                <td colspan="1" rowspan="1" class="confluenceTd"><p>Overrides the escape character of the reference format.</p><p>This option is <code>null</code> by default. <span>When </span><code>null</code><span> it keeps the value of the reference format which is </span><code>null</code><span> for </span><code>CSVFormat.DEFAULT</code><span>.</span></p></td>
               </tr>
               <tr>
                <td colspan="1" rowspan="1" class="confluenceTd"><code>headerDisabled</code></td>
                <td colspan="1" rowspan="1" class="confluenceTd"><code>boolean</code></td>
                <td colspan="1" rowspan="1" class="confluenceTd"><p>Disables the header of the reference format.</p><p>This option is <code>false</code> by default.</p></td>
               </tr>
               <tr>
                <td colspan="1" rowspan="1" class="confluenceTd"><code>header</code></td>
                <td colspan="1" rowspan="1" class="confluenceTd"><code>String[]</code></td>
                <td colspan="1" rowspan="1" class="confluenceTd"><p>Overrides the header of the reference format.</p><p>This option is <code>null</code> by default. <span>When </span><code>null</code><span> it keeps the value of the reference format which is </span><code>null</code><span> for </span><code>CSVFormat.DEFAULT</code><span>.</span></p><p>In the XML DSL, this option is configured using children&nbsp;<code>&lt;header&gt;</code>&nbsp;tags:</p>
                 <div class="code panel pdl" style="border-width: 1px;">
                  <div class="codeContent panelContent pdl"> 
                   <script class="brush: xml; gutter: false; theme: Default" type="syntaxhighlighter"><![CDATA[&lt;csv &gt;
    &lt;header&gt;orderId&lt;/header&gt;
    &lt;header&gt;amount&lt;/header&gt;
&lt;/csv&gt;]]></script> 
                  </div>
                 </div></td>
               </tr>
               <tr>
                <td colspan="1" rowspan="1" class="confluenceTd"><code>allowMissingColumnNames</code></td>
                <td colspan="1" rowspan="1" class="confluenceTd"><code>Boolean</code></td>
                <td colspan="1" rowspan="1" class="confluenceTd"><p>Overrides the missing column names behavior of the reference format.</p><p>This option is <code>null</code> by default. <span>When </span><code>null</code><span> it keeps the value of the reference format which is </span><code>false</code><span> for </span><code>CSVFormat.DEFAULT</code><span>.</span></p></td>
               </tr>
               <tr>
                <td colspan="1" rowspan="1" class="confluenceTd"><code>ignoreEmptyLines</code></td>
                <td colspan="1" rowspan="1" class="confluenceTd"><code>Boolean</code></td>
                <td colspan="1" rowspan="1" class="confluenceTd"><p>Overrides the empty line behavior of the reference format.</p><p><span>This option is </span><code>null</code><span> by default. <span>When </span><code>null</code><span> it keeps the value of the reference format which is </span><code>true</code><span> for </span><code>CSVFormat.DEFAULT</code><span>.</span></span></p></td>
               </tr>
               <tr>
                <td colspan="1" rowspan="1" class="confluenceTd"><code>ignoreSurroundingSpaces</code></td>
                <td colspan="1" rowspan="1" class="confluenceTd"><code>Boolean</code></td>
                <td colspan="1" rowspan="1" class="confluenceTd"><p>Overrides the surrounding spaces behavior of the reference format.</p><p><span>This option is </span><code>null</code><span> by default. <span>When </span><code>null</code><span> it keeps the value of the reference format which is </span><code>false</code><span> for </span><code>CSVFormat.DEFAULT</code><span>.</span></span></p></td>
               </tr>
               <tr>
                <td colspan="1" rowspan="1" class="confluenceTd"><code>nullStringDisabled</code></td>
                <td colspan="1" rowspan="1" class="confluenceTd"><code>boolean</code></td>
                <td colspan="1" rowspan="1" class="confluenceTd"><p>Disables the null string representation of the reference format.</p><p>This option is <code>false</code> by default.</p></td>
               </tr>
               <tr>
                <td colspan="1" rowspan="1" class="confluenceTd"><code>nullString</code></td>
                <td colspan="1" rowspan="1" class="confluenceTd"><code>String</code></td>
                <td colspan="1" rowspan="1" class="confluenceTd"><p>Overrides the null string representation of the reference format.</p><p><span>This option is </span><code>null</code><span> by default. <span>When </span><code>null</code><span> it keeps the value of the reference format which is </span><code>null</code><span> for </span><code>CSVFormat.DEFAULT</code><span>.</span></span></p></td>
               </tr>
               <tr>
                <td colspan="1" rowspan="1" class="confluenceTd"><code>quoteDisabled</code></td>
                <td colspan="1" rowspan="1" class="confluenceTd"><code>boolean</code></td>
                <td colspan="1" rowspan="1" class="confluenceTd"><p>Disables the quote of the reference format.</p><p><span>This option is </span><code>false</code><span> by default.</span></p></td>
               </tr>
               <tr>
                <td colspan="1" rowspan="1" class="confluenceTd"><code>quote</code></td>
                <td colspan="1" rowspan="1" class="confluenceTd"><code>Character</code></td>
                <td colspan="1" rowspan="1" class="confluenceTd"><p>Overrides the quote symbol of the reference format.</p><p><span>This option is </span><code>null</code><span> by default. <span>When </span><code>null</code><span> it keeps the value of the reference format which is </span><code>'"'</code><span> (double quote) for </span><code>CSVFormat.DEFAULT</code><span>.</span></span></p></td>
               </tr>
               <tr>
                <td colspan="1" rowspan="1" class="confluenceTd"><code>quoteMode</code></td>
                <td colspan="1" rowspan="1" class="confluenceTd"><code>QuoteMode</code></td>
                <td colspan="1" rowspan="1" class="confluenceTd"><p>Overrides the quote mode of the reference format.</p><p><span>This option is </span><code>null</code><span> by default. <span>When </span><code>null</code><span> it keeps the value of the reference format which is </span><code>null</code><span> for </span><code>CSVFormat.DEFAULT</code><span>.</span></span></p></td>
               </tr>
               <tr>
                <td colspan="1" rowspan="1" class="confluenceTd"><code>recordSeparatorDisabled</code></td>
                <td colspan="1" rowspan="1" class="confluenceTd"><code>boolean</code></td>
                <td colspan="1" rowspan="1" class="confluenceTd"><p>Disables the record separator of the reference format.</p><p><span>This option is </span><code>false</code><span> by default.</span></p></td>
               </tr>
               <tr>
                <td colspan="1" rowspan="1" class="confluenceTd"><code>recordSeparator</code></td>
                <td colspan="1" rowspan="1" class="confluenceTd"><code>String</code></td>
                <td colspan="1" rowspan="1" class="confluenceTd"><p>Overrides the record separator of the reference format.</p><p><span>This option is </span><code>null</code><span> by default. <span>When </span><code>null</code><span> it keeps the value of the reference format which is </span><code>\r\n</code><span> (CRLF) for </span><code>CSVFormat.DEFAULT</code><span>.</span></span></p></td>
               </tr>
               <tr>
                <td colspan="1" rowspan="1" class="confluenceTd"><code>skipHeaderRecord</code></td>
                <td colspan="1" rowspan="1" class="confluenceTd"><code>Boolean</code></td>
                <td colspan="1" rowspan="1" class="confluenceTd"><p>Overrides the header record behavior of the reference format.</p><p><span>This option is </span><code>null</code><span> by default. <span>When </span><code>null</code><span> it keeps the value of the reference format which is </span><code>false</code><span> for </span><code>CSVFormat.DEFAULT</code><span>.</span></span></p></td>
               </tr>
               <tr>
                <td colspan="1" rowspan="1" class="confluenceTd"><code>lazyLoad</code></td>
                <td colspan="1" rowspan="1" class="confluenceTd"><code>boolean</code></td>
                <td colspan="1" rowspan="1" class="confluenceTd"><p>Whether the unmarshalling should produce an iterator that reads the lines on the fly or if all the lines must be read at one.</p><p>This option is&nbsp;<code>false</code>&nbsp;by default.</p></td>
               </tr>
               <tr>
                <td colspan="1" rowspan="1" class="confluenceTd"><code>useMaps</code></td>
                <td colspan="1" rowspan="1" class="confluenceTd"><code>boolean</code></td>
                <td colspan="1" rowspan="1" class="confluenceTd"><p>Whether the unmarshalling should produce maps for the lines values instead of lists. It requires to have header (either defined or collected).</p><p>This options is&nbsp;<code>false</code>&nbsp;by default.</p></td>
               </tr>
               <tr>
                <td colspan="1" rowspan="1" class="confluenceTd"><code>recordConverter</code></td>
                <td colspan="1" rowspan="1" class="confluenceTd"><code>CsvRecordConverter</code></td>
                <td colspan="1" rowspan="1" class="confluenceTd"><p>Sets the record converter to use. If defines the <code>useMaps</code> options is disabled.</p><p><span>This option is </span><code>null</code><span> by default.</span></p></td>
               </tr>
              </tbody>
             </table>
            </div>
            <h3 id="BookDataFormatAppendix-MarshallingaMaptoCSV">Marshalling a Map to CSV</h3>
            <p>The component allows you to marshal a Java Map (or any other message type that can be <a shape="rect" href="type-converter.html">converted</a> in a Map) into a CSV payload.</p>
            <div class="table-wrap">
             <table class="confluenceTable">
              <tbody>
               <tr>
                <td colspan="1" rowspan="1" class="confluenceTd">Considering the following body</td>
                <td colspan="1" rowspan="1" class="confluenceTd">
                 <div class="code panel pdl" style="border-width: 1px;">
                  <div class="codeContent panelContent pdl"> 
                   <script class="brush: java; gutter: false; theme: Default" type="syntaxhighlighter"><![CDATA[Map&lt;String, Object&gt; body = new LinkedHashMap&lt;&gt;();
body.put(&quot;foo&quot;, &quot;abc&quot;);
body.put(&quot;bar&quot;, 123);]]></script> 
                  </div>
                 </div></td>
               </tr>
               <tr>
                <td colspan="1" rowspan="1" class="confluenceTd">and this Java route definition</td>
                <td colspan="1" rowspan="1" class="confluenceTd">
                 <div class="code panel pdl" style="border-width: 1px;">
                  <div class="codeContent panelContent pdl"> 
                   <script class="brush: java; gutter: false; theme: Default" type="syntaxhighlighter"><![CDATA[from(&quot;direct:start&quot;)
    .marshal().csv()
    .to(&quot;mock:result&quot;);]]></script> 
                  </div>
                 </div></td>
               </tr>
               <tr>
                <td colspan="1" rowspan="1" class="confluenceTd">or this XML route definition</td>
                <td colspan="1" rowspan="1" class="confluenceTd">
                 <div class="code panel pdl" style="border-width: 1px;">
                  <div class="codeContent panelContent pdl"> 
                   <script class="brush: xml; gutter: false; theme: Default" type="syntaxhighlighter"><![CDATA[&lt;route&gt;
    &lt;from uri=&quot;direct:start&quot; /&gt;
    &lt;marshal&gt;
        &lt;csv /&gt;
    &lt;/marshal&gt;
    &lt;to uri=&quot;mock:result&quot; /&gt;
&lt;/route&gt;]]></script> 
                  </div>
                 </div></td>
               </tr>
               <tr>
                <td colspan="1" rowspan="1" class="confluenceTd">then it will produce</td>
                <td colspan="1" rowspan="1" class="confluenceTd">
                 <div class="code panel pdl" style="border-width: 1px;">
                  <div class="codeContent panelContent pdl"> 
                   <script class="brush: text; gutter: false; theme: Default" type="syntaxhighlighter"><![CDATA[abc,123]]></script> 
                  </div>
                 </div></td>
               </tr>
              </tbody>
             </table>
            </div>
            <h3 id="BookDataFormatAppendix-UnmarshallingaCSVmessageintoaJavaList"><span style="font-size: 16.0px;line-height: 1.5625;">Unmarshalling a CSV message into a Java List</span></h3>
            <p>Unmarshalling will transform a CSV messsage into a Java List with CSV file lines (containing another List with all the field values).</p>
            <p><span style="line-height: 1.4285715;">An example: we have a CSV file with names of persons, their IQ and their current activity.</span></p>
            <div class="code panel pdl" style="border-width: 1px;">
             <div class="codeContent panelContent pdl"> 
              <script class="brush: text; gutter: false; theme: Default" type="syntaxhighlighter"><![CDATA[Jack Dalton, 115, mad at Averell
Joe Dalton, 105, calming Joe
William Dalton, 105, keeping Joe from killing Averell
Averell Dalton, 80, playing with Rantanplan
Lucky Luke, 120, capturing the Daltons]]></script> 
             </div>
            </div>
            <p>We can now use the CSV component to unmarshal this file:</p>
            <div class="code panel pdl" style="border-width: 1px;">
             <div class="codeContent panelContent pdl"> 
              <script class="brush: java; gutter: false; theme: Default" type="syntaxhighlighter"><![CDATA[from(&quot;file:src/test/resources/?fileName=daltons.csv&amp;noop=true&quot;)
    .unmarshal().csv()
    .to(&quot;mock:daltons&quot;);]]></script> 
             </div>
            </div>
            <p>The resulting message will contain a <code>List&lt;List&lt;String&gt;&gt;</code> like...</p>
            <div class="code panel pdl" style="border-width: 1px;">
             <div class="codeContent panelContent pdl"> 
              <script class="brush: java; gutter: false; theme: Default" type="syntaxhighlighter"><![CDATA[List&lt;List&lt;String&gt;&gt; data = (List&lt;List&lt;String&gt;&gt;) exchange.getIn().getBody();
for (List&lt;String&gt; line : data) {
    LOG.debug(String.format(&quot;%s has an IQ of %s and is currently %s&quot;, line.get(0), line.get(1), line.get(2)));
}]]></script> 
             </div>
            </div>
            <h3 id="BookDataFormatAppendix-MarshallingaList<Map>toCSV">Marshalling a List&lt;Map&gt; to CSV</h3>
            <p><strong>Available as of Camel 2.1</strong></p>
            <p>If you have multiple rows of data you want to be marshalled into CSV format you can now store the message payload as a <code>List&lt;Map&lt;String, Object&gt;&gt;</code> object where the list contains a Map for each row.</p>
            <h3 id="BookDataFormatAppendix-FilePollerofCSV,thenunmarshaling">File Poller of CSV, then unmarshaling</h3>
            <p>Given a bean which can handle the incoming data...</p>
            <div class="code panel pdl" style="border-width: 1px;">
             <div class="codeHeader panelHeader pdl" style="border-bottom-width: 1px;">
              <b>MyCsvHandler.java</b>
             </div>
             <div class="codeContent panelContent pdl"> 
              <script class="brush: java; gutter: false; theme: Default" type="syntaxhighlighter"><![CDATA[// Some comments here
public void doHandleCsvData(List&lt;List&lt;String&gt;&gt; csvData)
{
    // do magic here
}
]]></script> 
             </div>
            </div>
            <p>... your route then looks as follows</p>
            <div class="code panel pdl" style="border-width: 1px;">
             <div class="codeContent panelContent pdl"> 
              <script class="brush: xml; gutter: false; theme: Default" type="syntaxhighlighter"><![CDATA[&lt;route&gt;
        &lt;!-- poll every 10 seconds --&gt;
        &lt;from uri=&quot;file:///some/path/to/pickup/csvfiles?delete=true&amp;amp;consumer.delay=10000&quot; /&gt;
        &lt;unmarshal&gt;&lt;csv /&gt;&lt;/unmarshal&gt;
        &lt;to uri=&quot;bean:myCsvHandler?method=doHandleCsvData&quot; /&gt;
&lt;/route&gt;
]]></script> 
             </div>
            </div>
            <h3 id="BookDataFormatAppendix-Marshalingwithapipeasdelimiter">Marshaling with a pipe as delimiter</h3>
            <p>&nbsp;</p>
            <p>&nbsp;</p>
            <div class="table-wrap">
             <table class="confluenceTable">
              <tbody>
               <tr>
                <td colspan="1" rowspan="1" class="confluenceTd">Considering the following body</td>
                <td colspan="1" rowspan="1" class="confluenceTd">
                 <div class="code panel pdl" style="border-width: 1px;">
                  <div class="codeContent panelContent pdl"> 
                   <script class="brush: java; gutter: false; theme: Default" type="syntaxhighlighter"><![CDATA[Map&lt;String, Object&gt; body = new LinkedHashMap&lt;&gt;();
body.put(&quot;foo&quot;, &quot;abc&quot;);
body.put(&quot;bar&quot;, 123);]]></script> 
                  </div>
                 </div></td>
               </tr>
               <tr>
                <td colspan="1" rowspan="1" class="confluenceTd"><span>and this Java route definition</span></td>
                <td colspan="1" rowspan="1" class="confluenceTd">
                 <div class="code panel pdl" style="border-width: 1px;">
                  <div class="codeContent panelContent pdl"> 
                   <script class="brush: java; gutter: false; theme: Default" type="syntaxhighlighter"><![CDATA[// Camel version &lt; 2.15
CsvDataFormat oldCSV = new CsvDataFormat();
oldCSV.setDelimiter(&quot;|&quot;);
from(&quot;direct:start&quot;)
    .marshal(oldCSV)
    .to(&quot;mock:result&quot;)

// Camel version &gt;= 2.15
from(&quot;direct:start&quot;)
    .marshal(new CsvDataFormat().setDelimiter(&#39;|&#39;))
    .to(&quot;mock:result&quot;)]]></script> 
                  </div>
                 </div></td>
               </tr>
               <tr>
                <td colspan="1" rowspan="1" class="confluenceTd"><span>or this XML route definition</span></td>
                <td colspan="1" rowspan="1" class="confluenceTd">
                 <div class="code panel pdl" style="border-width: 1px;">
                  <div class="codeContent panelContent pdl"> 
                   <script class="brush: java; gutter: false; theme: Default" type="syntaxhighlighter"><![CDATA[&lt;route&gt;
  &lt;from uri=&quot;direct:start&quot; /&gt;
  &lt;marshal&gt;
    &lt;csv delimiter=&quot;|&quot; /&gt;
  &lt;/marshal&gt;
  &lt;to uri=&quot;mock:result&quot; /&gt;
&lt;/route&gt;]]></script> 
                  </div>
                 </div></td>
               </tr>
               <tr>
                <td colspan="1" rowspan="1" class="confluenceTd"><span>then it will produce</span></td>
                <td colspan="1" rowspan="1" class="confluenceTd">
                 <div class="code panel pdl" style="border-width: 1px;">
                  <div class="codeContent panelContent pdl"> 
                   <script class="brush: text; gutter: false; theme: Default" type="syntaxhighlighter"><![CDATA[abc|123]]></script> 
                  </div>
                 </div></td>
               </tr>
              </tbody>
             </table>
            </div>
            <h3 id="BookDataFormatAppendix-UsingautogenColumns,configRefandstrategyRefattributesinsideXMLDSL">Using autogenColumns, configRef and strategyRef attributes inside XML DSL</h3>
            <p><strong>Available as of Camel 2.9.2 / 2.10 and deleted for Camel 2.15</strong></p>
            <p>You can customize the CSV <a shape="rect" href="data-format.html">Data Format</a> to make use of your own <code>CSVConfig</code> and/or <code>CSVStrategy</code>. Also note that the default value of the <code>autogenColumns</code> option is true. The following example should illustrate this customization.</p>
            <div class="code panel pdl" style="border-width: 1px;">
             <div class="codeContent panelContent pdl"> 
              <script class="brush: java; gutter: false; theme: Default" type="syntaxhighlighter"><![CDATA[&lt;route&gt;
  &lt;from uri=&quot;direct:start&quot; /&gt;
  &lt;marshal&gt;
    &lt;!-- make use of a strategy other than the default one which is &#39;org.apache.commons.csv.CSVStrategy.DEFAULT_STRATEGY&#39; --&gt;
    &lt;csv autogenColumns=&quot;false&quot; delimiter=&quot;|&quot; configRef=&quot;csvConfig&quot; strategyRef=&quot;excelStrategy&quot; /&gt;
  &lt;/marshal&gt;
  &lt;convertBodyTo type=&quot;java.lang.String&quot; /&gt;
  &lt;to uri=&quot;mock:result&quot; /&gt;
&lt;/route&gt;

&lt;bean id=&quot;csvConfig&quot; class=&quot;org.apache.commons.csv.writer.CSVConfig&quot;&gt;
  &lt;property name=&quot;fields&quot;&gt;
    &lt;list&gt;
      &lt;bean class=&quot;org.apache.commons.csv.writer.CSVField&quot;&gt;
        &lt;property name=&quot;name&quot; value=&quot;orderId&quot; /&gt;
      &lt;/bean&gt;
      &lt;bean class=&quot;org.apache.commons.csv.writer.CSVField&quot;&gt;
        &lt;property name=&quot;name&quot; value=&quot;amount&quot; /&gt;
      &lt;/bean&gt;
    &lt;/list&gt;
  &lt;/property&gt;
&lt;/bean&gt;

&lt;bean id=&quot;excelStrategy&quot; class=&quot;org.springframework.beans.factory.config.FieldRetrievingFactoryBean&quot;&gt;
  &lt;property name=&quot;staticField&quot; value=&quot;org.apache.commons.csv.CSVStrategy.EXCEL_STRATEGY&quot; /&gt;
&lt;/bean&gt;
]]></script> 
             </div>
            </div>
            <h3 id="BookDataFormatAppendix-UsingskipFirstLineoptionwhileunmarshaling">Using skipFirstLine option while unmarshaling</h3>
            <p><strong>Available as of Camel 2.10 and deleted for Camel 2.15</strong></p>
            <p>You can instruct the CSV <a shape="rect" href="data-format.html">Data Format</a> to skip the first line which contains the CSV headers. Using the Spring/XML DSL:</p>
            <div class="code panel pdl" style="border-width: 1px;">
             <div class="codeContent panelContent pdl"> 
              <script class="brush: java; gutter: false; theme: Default" type="syntaxhighlighter"><![CDATA[&lt;route&gt;
  &lt;from uri=&quot;direct:start&quot; /&gt;
  &lt;unmarshal&gt;
    &lt;csv skipFirstLine=&quot;true&quot; /&gt;
  &lt;/unmarshal&gt;
  &lt;to uri=&quot;bean:myCsvHandler?method=doHandleCsv&quot; /&gt;
&lt;/route&gt;
]]></script> 
             </div>
            </div>
            <p>Or the Java DSL:</p>
            <div class="code panel pdl" style="border-width: 1px;">
             <div class="codeContent panelContent pdl"> 
              <script class="brush: java; gutter: false; theme: Default" type="syntaxhighlighter"><![CDATA[CsvDataFormat csv = new CsvDataFormat();
csv.setSkipFirstLine(true);

from(&quot;direct:start&quot;)
  .unmarshal(csv)
.to(&quot;bean:myCsvHandler?method=doHandleCsv&quot;);
]]></script> 
             </div>
            </div>
            <h3 id="BookDataFormatAppendix-Unmarshalingwithapipeasdelimiter">Unmarshaling with a pipe as delimiter</h3>
            <p>Using the Spring/XML DSL:</p>
            <div class="code panel pdl" style="border-width: 1px;">
             <div class="codeContent panelContent pdl"> 
              <script class="brush: java; gutter: false; theme: Default" type="syntaxhighlighter"><![CDATA[&lt;route&gt;
  &lt;from uri=&quot;direct:start&quot; /&gt;
  &lt;unmarshal&gt;
    &lt;csv delimiter=&quot;|&quot; /&gt;
  &lt;/unmarshal&gt;
  &lt;to uri=&quot;bean:myCsvHandler?method=doHandleCsv&quot; /&gt;
&lt;/route&gt;
]]></script> 
             </div>
            </div>
            <p>Or the Java DSL:</p>
            <div class="code panel pdl" style="border-width: 1px;">
             <div class="codeContent panelContent pdl"> 
              <script class="brush: java; gutter: false; theme: Default" type="syntaxhighlighter"><![CDATA[CsvDataFormat csv = new CsvDataFormat();
CSVStrategy strategy = CSVStrategy.DEFAULT_STRATEGY;
strategy.setDelimiter(&#39;|&#39;);
csv.setStrategy(strategy);

from(&quot;direct:start&quot;)
  .unmarshal(csv)
  .to(&quot;bean:myCsvHandler?method=doHandleCsv&quot;);
]]></script> 
             </div>
            </div>
            <div class="code panel pdl" style="border-width: 1px;">
             <div class="codeContent panelContent pdl"> 
              <script class="brush: java; gutter: false; theme: Default" type="syntaxhighlighter"><![CDATA[CsvDataFormat csv = new CsvDataFormat();
csv.setDelimiter(&quot;|&quot;);

from(&quot;direct:start&quot;)
  .unmarshal(csv)
  .to(&quot;bean:myCsvHandler?method=doHandleCsv&quot;);
]]></script> 
             </div>
            </div>
            <div class="code panel pdl" style="border-width: 1px;">
             <div class="codeContent panelContent pdl"> 
              <script class="brush: java; gutter: false; theme: Default" type="syntaxhighlighter"><![CDATA[CsvDataFormat csv = new CsvDataFormat();
CSVConfig csvConfig = new CSVConfig();
csvConfig.setDelimiter(&quot;;&quot;);
csv.setConfig(csvConfig);

from(&quot;direct:start&quot;)
  .unmarshal(csv)
  .to(&quot;bean:myCsvHandler?method=doHandleCsv&quot;);
]]></script> 
             </div>
            </div>
            <div class="confluence-information-macro confluence-information-macro-information">
             <p class="title">Issue in CSVConfig</p>
             <span class="aui-icon aui-icon-small aui-iconfont-info confluence-information-macro-icon"></span>
             <div class="confluence-information-macro-body">
              <p>It looks like that</p>
              <div class="code panel pdl" style="border-width: 1px;">
               <div class="codeContent panelContent pdl"> 
                <script class="brush: java; gutter: false; theme: Default" type="syntaxhighlighter"><![CDATA[CSVConfig csvConfig = new CSVConfig();
csvConfig.setDelimiter(&#39;;&#39;);
]]></script> 
               </div>
              </div>
              <p>doesn't work. You have to set the delimiter as a String!</p>
             </div>
            </div>
            <h3 id="BookDataFormatAppendix-Dependencies.3">Dependencies</h3>
            <p>To use CSV in your Camel routes you need to add a dependency on <strong>camel-csv</strong>, which implements this data format.</p>
            <p>If you use Maven you can just add the following to your pom.xml, substituting the version number for the latest and greatest release (see <a shape="rect" href="download.html">the download page for the latest versions</a>).</p>
            <div class="code panel pdl" style="border-width: 1px;">
             <div class="codeContent panelContent pdl"> 
              <script class="brush: java; gutter: false; theme: Default" type="syntaxhighlighter"><![CDATA[&lt;dependency&gt;
  &lt;groupId&gt;org.apache.camel&lt;/groupId&gt;
  &lt;artifactId&gt;camel-csv&lt;/artifactId&gt;
  &lt;version&gt;x.x.x&lt;/version&gt;
&lt;/dependency&gt;
]]></script> 
             </div>
            </div> The String 
            <a shape="rect" href="data-format.html">Data Format</a> is a textual based format that supports encoding. 
            <h3 id="BookDataFormatAppendix-Options">Options</h3> 
            <div class="table-wrap">
             <table class="confluenceTable">
              <tbody>
               <tr>
                <th colspan="1" rowspan="1" class="confluenceTh"><p> Option </p></th>
                <th colspan="1" rowspan="1" class="confluenceTh"><p> Default </p></th>
                <th colspan="1" rowspan="1" class="confluenceTh"><p> Description </p></th>
               </tr>
               <tr>
                <td colspan="1" rowspan="1" class="confluenceTd"><p> charset </p></td>
                <td colspan="1" rowspan="1" class="confluenceTd"><p> null </p></td>
                <td colspan="1" rowspan="1" class="confluenceTd"><p> To use a specific charset for encoding. If not provided Camel will use the JVM default charset. </p></td>
               </tr>
              </tbody>
             </table>
            </div> 
            <h3 id="BookDataFormatAppendix-Marshal">Marshal</h3> 
            <p>In this example we marshal the file content to String object in UTF-8 encoding.</p> 
            <div class="code panel pdl" style="border-width: 1px;">
             <div class="codeContent panelContent pdl"> 
              <script class="brush: java; gutter: false; theme: Default" type="syntaxhighlighter"><![CDATA[
from(&quot;file://data.csv&quot;).marshal().string(&quot;UTF-8&quot;).to(&quot;jms://myqueue&quot;);
]]></script> 
             </div>
            </div> 
            <h3 id="BookDataFormatAppendix-Unmarshal">Unmarshal</h3> 
            <p>In this example we unmarshal the payload from the JMS queue to a String object using UTF-8 encoding, before its processed by the newOrder processor. </p> 
            <div class="code panel pdl" style="border-width: 1px;">
             <div class="codeContent panelContent pdl"> 
              <script class="brush: java; gutter: false; theme: Default" type="syntaxhighlighter"><![CDATA[
from(&quot;jms://queue/order&quot;).unmarshal().string(&quot;UTF-8&quot;).processRef(&quot;newOrder&quot;);
]]></script> 
             </div>
            </div> 
            <h3 id="BookDataFormatAppendix-Dependencies.4">Dependencies</h3> 
            <p>This data format is provided in <strong>camel-core</strong> so no additional dependencies is needed.</p> 
            <h3 id="BookDataFormatAppendix-HL7DataFormat">HL7 DataFormat</h3>
            <p>The <a shape="rect" href="hl7.html">HL7</a> component ships with a HL7 data format that can be used to marshal or unmarshal HL7 model objects.</p>
            <ul class="alternate">
             <li><code>marshal</code> = from Message to byte stream (can be used when responding using the HL7 MLLP codec)</li>
             <li><code>unmarshal</code> = from byte stream to Message (can be used when receiving streamed data from the HL7 MLLP</li>
            </ul>
            <p>To use the data format, simply instantiate an instance and invoke the marshal or unmarshal operation in the route builder:</p>
            <div class="code panel pdl" style="border-width: 1px;">
             <div class="codeContent panelContent pdl"> 
              <script class="brush: java; gutter: false; theme: Default" type="syntaxhighlighter"><![CDATA[  DataFormat hl7 = new HL7DataFormat();
  ...
  from(&quot;direct:hl7in&quot;).marshal(hl7).to(&quot;jms:queue:hl7out&quot;);
]]></script> 
             </div>
            </div>
            <p>In the sample above, the HL7 is marshalled from a HAPI Message object to a byte stream and put on a JMS queue.<br clear="none"> The next example is the opposite:</p>
            <div class="code panel pdl" style="border-width: 1px;">
             <div class="codeContent panelContent pdl"> 
              <script class="brush: java; gutter: false; theme: Default" type="syntaxhighlighter"><![CDATA[  DataFormat hl7 = new HL7DataFormat();
  ...
  from(&quot;jms:queue:hl7out&quot;).unmarshal(hl7).to(&quot;patientLookupService&quot;);
]]></script> 
             </div>
            </div>
            <p>Here we unmarshal the byte stream into a HAPI Message object that is passed to our patient lookup service.</p>
            <div class="confluence-information-macro confluence-information-macro-tip">
             <p class="title">Serializable messages</p>
             <span class="aui-icon aui-icon-small aui-iconfont-approve confluence-information-macro-icon"></span>
             <div class="confluence-information-macro-body">
              <p>As of HAPI 2.0 (used by <strong>Camel 2.11</strong>), the HL7v2 model classes are fully serializable. So you can put HL7v2 messages directly into a JMS queue (i.e. without calling <code>marshal()</code> and read them again directly from the queue (i.e. without calling <code>unmarshal()</code>.</p>
             </div>
            </div>
            <div class="confluence-information-macro confluence-information-macro-note">
             <p class="title">Segment separators</p>
             <span class="aui-icon aui-icon-small aui-iconfont-warning confluence-information-macro-icon"></span>
             <div class="confluence-information-macro-body">
              <p>As of <strong>Camel 2.11</strong>, <code>unmarshal</code> does not automatically fix segment separators anymore by converting <code>\n</code> to <code>\r</code>. If you <br clear="none"> need this conversion, <code>org.apache.camel.component.hl7.HL7#convertLFToCR</code> provides a handy <code>Expression</code> for this purpose.</p>
             </div>
            </div>
            <div class="confluence-information-macro confluence-information-macro-note">
             <p class="title">Charset</p>
             <span class="aui-icon aui-icon-small aui-iconfont-warning confluence-information-macro-icon"></span>
             <div class="confluence-information-macro-body">
              <p>As of <strong>Camel 2.14.1</strong>, both <code>marshal and unmarshal</code> evaluate the charset provided in the field&nbsp;<code>MSH-18</code>. If this field is empty, by default the charset contained in the corresponding Camel charset property/header is assumed. You can even change this default behavior by overriding the <code>guessCharsetName</code> method when inheriting from the <code>HL7DataFormat</code> class.</p>
             </div>
            </div>
            <p>&nbsp;</p>
            <p>There is a shorthand syntax in Camel for well-known data formats that are commonly used.<br clear="none"> Then you don't need to create an instance of the <code>HL7DataFormat</code> object:</p>
            <div class="code panel pdl" style="border-width: 1px;">
             <div class="codeContent panelContent pdl"> 
              <script class="brush: java; gutter: false; theme: Default" type="syntaxhighlighter"><![CDATA[  from(&quot;direct:hl7in&quot;).marshal().hl7().to(&quot;jms:queue:hl7out&quot;);
  from(&quot;jms:queue:hl7out&quot;).unmarshal().hl7().to(&quot;patientLookupService&quot;);
]]></script> 
             </div>
            </div>
            <p>&nbsp;</p>
            <p>&nbsp;</p> 
            <h2 id="BookDataFormatAppendix-EDIDataFormat">EDI DataFormat</h2> 
            <p>We encourage end users to look at the <a shape="rect" class="external-link" href="http://milyn.codehaus.org/Home" rel="nofollow">Smooks</a> which supports EDI and Camel natively.</p> 
            <h2 id="BookDataFormatAppendix-FlatpackDataFormat">Flatpack DataFormat</h2> 
            <p>The <a shape="rect" href="flatpack.html">Flatpack</a> component ships with the Flatpack data format that can be used to format between fixed width or delimited text messages to a <code>List</code> of rows as <code>Map</code>. </p> 
            <ul class="alternate">
             <li>marshal = from <code>List&lt;Map&lt;String, Object&gt;&gt;</code> to <code>OutputStream</code> (can be converted to <code>String</code>)</li>
             <li>unmarshal = from <code>java.io.InputStream</code> (such as a <code>File</code> or <code>String</code>) to a <code>java.util.List</code> as an <code>org.apache.camel.component.flatpack.DataSetList</code> instance.<br clear="none"> The result of the operation will contain all the data. If you need to process each row one by one you can split the exchange, using <a shape="rect" href="splitter.html">Splitter</a>.</li>
            </ul> 
            <p><strong>Notice:</strong> The Flatpack library does currently not support header and trailers for the marshal operation.</p> 
            <h3 id="BookDataFormatAppendix-Options.1">Options</h3> 
            <p>The data format has the following options:</p> 
            <div class="table-wrap">
             <table class="confluenceTable">
              <tbody>
               <tr>
                <th colspan="1" rowspan="1" class="confluenceTh"><p> Option </p></th>
                <th colspan="1" rowspan="1" class="confluenceTh"><p> Default </p></th>
                <th colspan="1" rowspan="1" class="confluenceTh"><p> Description </p></th>
               </tr>
               <tr>
                <td colspan="1" rowspan="1" class="confluenceTd"><p> <code>definition</code> </p></td>
                <td colspan="1" rowspan="1" class="confluenceTd"><p> <code>null</code> </p></td>
                <td colspan="1" rowspan="1" class="confluenceTd"><p> The flatpack pzmap configuration file. Can be omitted in simpler situations, but its preferred to use the pzmap. </p></td>
               </tr>
               <tr>
                <td colspan="1" rowspan="1" class="confluenceTd"><p> <code>fixed</code> </p></td>
                <td colspan="1" rowspan="1" class="confluenceTd"><p> <code>false</code> </p></td>
                <td colspan="1" rowspan="1" class="confluenceTd"><p> Delimited or fixed. </p></td>
               </tr>
               <tr>
                <td colspan="1" rowspan="1" class="confluenceTd"><p> <code>ignoreFirstRecord</code> </p></td>
                <td colspan="1" rowspan="1" class="confluenceTd"><p> <code>true</code> </p></td>
                <td colspan="1" rowspan="1" class="confluenceTd"><p> Whether the first line is ignored for delimited files (for the column headers). </p></td>
               </tr>
               <tr>
                <td colspan="1" rowspan="1" class="confluenceTd"><p> <code>textQualifier</code> </p></td>
                <td colspan="1" rowspan="1" class="confluenceTd"><p> <code>"</code> </p></td>
                <td colspan="1" rowspan="1" class="confluenceTd"><p> If the text is qualified with a char such as <code>"</code>. </p></td>
               </tr>
               <tr>
                <td colspan="1" rowspan="1" class="confluenceTd"><p> <code>delimiter</code> </p></td>
                <td colspan="1" rowspan="1" class="confluenceTd"><p> <code>,</code> </p></td>
                <td colspan="1" rowspan="1" class="confluenceTd"><p> The delimiter char (could be <code>;</code> <code>,</code> or similar) </p></td>
               </tr>
               <tr>
                <td colspan="1" rowspan="1" class="confluenceTd"><p> <code>parserFactory</code> </p></td>
                <td colspan="1" rowspan="1" class="confluenceTd"><p> <code>null</code> </p></td>
                <td colspan="1" rowspan="1" class="confluenceTd"><p> Uses the default Flatpack parser factory. </p></td>
               </tr>
               <tr>
                <td colspan="1" rowspan="1" class="confluenceTd"><p> <code>allowShortLines</code> </p></td>
                <td colspan="1" rowspan="1" class="confluenceTd"><p> <code>false</code> </p></td>
                <td colspan="1" rowspan="1" class="confluenceTd"><p> <strong>Camel 2.9.7 and 2.10.5 onwards</strong>: Allows for lines to be shorter than expected and ignores the extra characters. </p></td>
               </tr>
               <tr>
                <td colspan="1" rowspan="1" class="confluenceTd"><p> <code>ignoreExtraColumns</code> </p></td>
                <td colspan="1" rowspan="1" class="confluenceTd"><p> <code>false</code> </p></td>
                <td colspan="1" rowspan="1" class="confluenceTd"><p> <strong>Camel 2.9.7 and 2.10.5 onwards</strong>: Allows for lines to be longer than expected and ignores the extra characters. </p></td>
               </tr>
              </tbody>
             </table>
            </div> 
            <h3 id="BookDataFormatAppendix-Usage">Usage</h3> 
            <p>To use the data format, simply instantiate an instance and invoke the marshal or unmarshal operation in the route builder:</p> 
            <div class="code panel pdl" style="border-width: 1px;">
             <div class="codeContent panelContent pdl"> 
              <script class="brush: java; gutter: false; theme: Default" type="syntaxhighlighter"><![CDATA[
  FlatpackDataFormat fp = new FlatpackDataFormat();
  fp.setDefinition(new ClassPathResource(&quot;INVENTORY-Delimited.pzmap.xml&quot;));
  ...
  from(&quot;file:order/in&quot;).unmarshal(df).to(&quot;seda:queue:neworder&quot;);
]]></script> 
             </div>
            </div> 
            <p>The sample above will read files from the <code>order/in</code> folder and unmarshal the input using the Flatpack configuration file <code>INVENTORY-Delimited.pzmap.xml</code> that configures the structure of the files. The result is a <code>DataSetList</code> object we store on the SEDA queue.</p> 
            <div class="code panel pdl" style="border-width: 1px;">
             <div class="codeContent panelContent pdl"> 
              <script class="brush: java; gutter: false; theme: Default" type="syntaxhighlighter"><![CDATA[
FlatpackDataFormat df = new FlatpackDataFormat();
df.setDefinition(new ClassPathResource(&quot;PEOPLE-FixedLength.pzmap.xml&quot;));
df.setFixed(true);
df.setIgnoreFirstRecord(false);

from(&quot;seda:people&quot;).marshal(df).convertBodyTo(String.class).to(&quot;jms:queue:people&quot;);
]]></script> 
             </div>
            </div> 
            <p>In the code above we marshal the data from a Object representation as a <code>List</code> of rows as <code>Maps</code>. The rows as <code>Map</code> contains the column name as the key, and the the corresponding value. This structure can be created in Java code from e.g. a processor. We marshal the data according to the Flatpack format and convert the result as a <code>String</code> object and store it on a JMS queue.</p> 
            <h3 id="BookDataFormatAppendix-Dependencies.5">Dependencies</h3> 
            <p>To use Flatpack in your camel routes you need to add the a dependency on <strong>camel-flatpack</strong> which implements this data format. </p> 
            <p>If you use maven you could just add the following to your pom.xml, substituting the version number for the latest &amp; greatest release (see <a shape="rect" href="download.html">the download page for the latest versions</a>).</p> 
            <div class="code panel pdl" style="border-width: 1px;">
             <div class="codeContent panelContent pdl"> 
              <script class="brush: java; gutter: false; theme: Default" type="syntaxhighlighter"><![CDATA[
&lt;dependency&gt;
  &lt;groupId&gt;org.apache.camel&lt;/groupId&gt;
  &lt;artifactId&gt;camel-flatpack&lt;/artifactId&gt;
  &lt;version&gt;x.x.x&lt;/version&gt;
&lt;/dependency&gt;
]]></script> 
             </div>
            </div> 
            <h2 id="BookDataFormatAppendix-JSON">JSON</h2>
            <p>JSON is a <a shape="rect" href="data-format.html">Data Format</a> to marshal and unmarshal Java objects to and from <a shape="rect" class="external-link" href="http://www.json.org/" rel="nofollow">JSON</a>.</p>
            <p>For JSON to object marshalling, Camel provides integration with three popular JSON libraries:</p>
            <ul class="alternate">
             <li>The <a shape="rect" class="external-link" href="http://xstream.codehaus.org/" rel="nofollow">XStream library</a> and <a shape="rect" class="external-link" href="http://jettison.codehaus.org/" rel="nofollow">Jettsion </a></li>
             <li>The <a shape="rect" class="external-link" href="https://github.com/FasterXML/jackson" rel="nofollow">Jackson library</a></li>
             <li><strong>Camel 2.10:</strong> The <a shape="rect" class="external-link" href="http://code.google.com/p/google-gson/" rel="nofollow">GSon library</a></li>
            </ul>
            <p>Every library requires adding the special camel component (see "Dependency..." paragraphs further down). By default Camel uses the XStream library.</p>
            <parameter ac:name="title">
             Direct, bi-directional JSON &lt;=&gt; XML conversions
            </parameter>
            <rich-text-body>
             <p>As of Camel 2.10, Camel supports direct, bi-directional JSON &lt;=&gt; XML conversions via the <a shape="rect" href="xmljson.html">camel-xmljson</a> data format, which is documented separately.</p>
            </rich-text-body>
            <h3 id="BookDataFormatAppendix-UsingJSONDataFormatWiththeXStreamLibrary">Using JSON Data Format With the&nbsp;<code>XStream</code> Library</h3>
            <parameter ac:name="language">
             java
            </parameter>
            <plain-text-body>
             // Let's turn Object messages into JSON then send to MQSeries from("activemq:My.Queue") .marshal().json() .to("mqseries:Another.Queue"); 
            </plain-text-body>
            <h3 id="BookDataFormatAppendix-UsingJSONDataFormatWiththeJacksonLibrary">Using JSON Data Format With the&nbsp;<code>Jackson</code> Library</h3>
            <parameter ac:name="language">
             java
            </parameter>
            <plain-text-body>
             // Let's turn Object messages into JSON then send to MQSeries from("activemq:My.Queue") .marshal().json(JsonLibrary.Jackson) .to("mqseries:Another.Queue"); 
            </plain-text-body>
            <h3 id="BookDataFormatAppendix-UsingJSONDataFormatWiththeGSONLibrary">Using JSON Data Format With the GSON Library</h3>
            <parameter ac:name="language">
             java
            </parameter>
            <plain-text-body>
             // Let's turn Object messages into JSON then send to MQSeries from("activemq:My.Queue") .marshal().json(JsonLibrary.Gson) .to("mqseries:Another.Queue"); 
            </plain-text-body>
            <h4 id="BookDataFormatAppendix-UsingJSONinSpringDSL">Using JSON in Spring DSL</h4>
            <p>When using <a shape="rect" href="data-format.html">Data Format</a> in Spring DSL you need to declare the data formats first. This is done in the <strong><code>DataFormats</code></strong> XML tag.</p>
            <parameter ac:name="language">
             xml
            </parameter>
            <plain-text-body>
             &lt;dataFormats&gt; &lt;!-- Here we define a Json data format with the id jack and that it should use the TestPojo as the class type when doing unmarshal. The unmarshalTypeName is optional, if not provided Camel will use a Map as the type. --&gt; &lt;json id="jack" library="Jackson" unmarshalTypeName="org.apache.camel.component.jackson.TestPojo"/&gt; &lt;/dataFormats&gt; 
            </plain-text-body>
            <p>And then you can refer to this id in the route:</p>
            <parameter ac:name="language">
             xml
            </parameter>
            <plain-text-body>
             &lt;route&gt; &lt;from uri="direct:back"/&gt; &lt;unmarshal ref="jack"/&gt; &lt;to uri="mock:reverse"/&gt; &lt;/route&gt; 
            </plain-text-body>
            <h3 id="BookDataFormatAppendix-ExcludingPOJOFieldsFromMarshalling">Excluding POJO Fields From Marshalling</h3>
            <p><strong>As of Camel 2.10</strong><br clear="none"> When marshaling a POJO to JSON you might want to exclude certain fields from the JSON output. With Jackson you can use <a shape="rect" class="external-link" href="http://wiki.fasterxml.com/JacksonJsonViews" rel="nofollow">JSON views</a> to accomplish this.</p>
            <p>First create one or more marker classes:
             <plain-text-body>
              {snippet:id=marker|lang=java|url=camel/trunk/components/camel-jackson/src/test/java/org/apache/camel/component/jackson/Views.java}
             </plain-text-body>Second, use the marker classes with the <strong><code>@JsonView</code></strong> annotation to include/exclude certain fields. The annotation also works on getters:
             <plain-text-body>
              {snippet:id=jsonview|lang=java|url=camel/trunk/components/camel-jackson/src/test/java/org/apache/camel/component/jackson/TestPojoView.java}
             </plain-text-body>Finally, use the Camel <strong><code>JacksonDataFormat</code></strong> to marshal the above POJO to JSON.
             <plain-text-body>
              {snippet:id=format|lang=java|url=camel/trunk/components/camel-jackson/src/test/java/org/apache/camel/component/jackson/JacksonMarshalViewTest.java}
             </plain-text-body><strong>Note</strong>: the height field is missing in the resulting JSON.</p>
            <plain-text-body>
             {"age":30, "weight":70} 
            </plain-text-body>
            <p>The GSON library supports a similar feature through the notion of <a shape="rect" class="external-link" href="http://google-gson.googlecode.com/svn/trunk/gson/docs/javadocs/com/google/gson/ExclusionStrategy.html" rel="nofollow">ExclusionStrategies</a>:
             <plain-text-body>
              {snippet:id=strategy|lang=java|url=camel/trunk/components/camel-gson/src/test/java/org/apache/camel/component/gson/GsonMarshalExclusionTest.java}
             </plain-text-body>The <strong><code>GsonDataFormat</code></strong> accepts an <strong><code>ExclusionStrategy</code></strong> in its constructor:
             <plain-text-body>
              {snippet:id=format|lang=java|url=camel/trunk/components/camel-gson/src/test/java/org/apache/camel/component/gson/GsonMarshalExclusionTest.java}
             </plain-text-body>The line above will exclude fields annotated with <strong><code>@ExcludeAge</code></strong> when marshaling to JSON.</p>
            <h3 id="BookDataFormatAppendix-ConfiguringFieldNamingPolicy">Configuring Field Naming Policy</h3>
            <p><strong>Available as of Camel 2.11</strong></p>
            <p>The GSON library supports specifying policies and strategies for mapping from JSON to POJO fields. A common naming convention is to map JSON fields using lower case with underscores.</p>
            <p>We may have this JSON string</p>
            <plain-text-body>
             { "id" : 123, "first_name" : "Donald" "last_name" : "Duck" } 
            </plain-text-body>
            <p>Which we want to map to a POJO that has getter/setters as:</p>
            <parameter ac:name="language">
             java
            </parameter>
            <parameter ac:name="java:title">
             PersonPojo.java
            </parameter>
            <parameter ac:name="title">
             PersonPojo.java
            </parameter>
            <plain-text-body>
             public class PersonPojo { private int id; private String firstName; private String lastName; public int getId() { return id; } public void setId(int id) { this.id = id; } public String getFirstName() { return firstName; } public void setFirstName(String firstName) { this.firstName = firstName; } public String getLastName() { return lastName; } public void setLastName(String lastName) { this.lastName = lastName; } } 
            </plain-text-body>
            <p>Then we can configure the <strong><code>org.apache.camel.component.gson.GsonDataFormat</code></strong> in a Spring XML files as shown below. Notice we use <strong><code>fieldNamingPolicy</code></strong> property to set the field mapping. This property is an enum from GSon <strong><code>com.google.gson.FieldNamingPolicy</code></strong> which has a number of predefined mappings.</p>
            <p>If you need full control you can use the property <strong><code>FieldNamingStrategy</code></strong> and implement a custom <strong><code>com.google.gson.FieldNamingStrategy</code></strong> where you can control the mapping.</p>
            <parameter ac:name="xml:title">
             Configuring GsonDataFormat in Spring XML file
            </parameter>
            <parameter ac:name="language">
             xml
            </parameter>
            <parameter ac:name="title">
             Configuring GsonDataFromat in Spring XML file
            </parameter>
            <plain-text-body>
             &lt;!-- define the gson data format, where we configure the data format using the properties --&gt; &lt;bean id="gson" class="org.apache.camel.component.gson.GsonDataFormat"&gt; &lt;!-- we want to unmarshal to person pojo --&gt; &lt;property name="unmarshalType" value="org.apache.camel.component.gson.PersonPojo"/&gt; &lt;!-- we want to map fields to use lower case and underscores --&gt; &lt;property name="fieldNamingPolicy" value="LOWER_CASE_WITH_UNDERSCORES"/&gt; &lt;/bean&gt; 
            </plain-text-body>
            <p>And use it in Camel routes by referring to its bean id as shown:</p>
            <parameter ac:name="xml:title">
             Using gson from Camel routes
            </parameter>
            <parameter ac:name="language">
             xml
            </parameter>
            <parameter ac:name="title">
             Using gson from Camel Routes
            </parameter>
            <plain-text-body>
             &lt;camelContext xmlns="http://camel.apache.org/schema/spring"&gt; &lt;route&gt; &lt;from uri="direct:inPojo"/&gt; &lt;marshal ref="gson"/&gt; &lt;/route&gt; &lt;route&gt; &lt;from uri="direct:backPojo"/&gt; &lt;unmarshal ref="gson"/&gt; &lt;/route&gt; &lt;/camelContext&gt; 
            </plain-text-body>
            <h3 id="BookDataFormatAppendix-Include/ExcludeFieldsUsingthejsonViewAttributeWithJacksonDataFormat">Include/Exclude Fields Using the <strong><code>jsonView</code></strong> Attribute With <code>JacksonDataFormat</code></h3>
            <p><strong>Available as of Camel 2.12</strong></p>
            <p>As an example of using this attribute you can instead of:</p>
            <parameter ac:name="language">
             java
            </parameter>
            <plain-text-body>
             JacksonDataFormat ageViewFormat = new JacksonDataFormat(TestPojoView.class, Views.Age.class); from("direct:inPojoAgeView") .marshal(ageViewFormat); 
            </plain-text-body>
            <p>Directly specify your <a shape="rect" class="external-link" href="http://wiki.fasterxml.com/JacksonJsonViews" rel="nofollow">JSON view</a> inside the Java DSL as:</p>
            <parameter ac:name="language">
             java
            </parameter>
            <plain-text-body>
             from("direct:inPojoAgeView") .marshal().json(TestPojoView.class, Views.Age.class); 
            </plain-text-body>
            <p>And the same in XML DSL:</p>
            <parameter ac:name="language">
             xml
            </parameter>
            <plain-text-body>
             &lt;from uri="direct:inPojoAgeView"/&gt; &lt;marshal&gt; &lt;json library="Jackson" unmarshalTypeName="org.apache.camel.component.jackson.TestPojoView" jsonView="org.apache.camel.component.jackson.Views$Age"/&gt; &lt;/marshal&gt; 
            </plain-text-body>
            <h3 id="BookDataFormatAppendix-SettingSerializationIncludeOptionforJacksonMarshal">Setting Serialization Include Option for Jackson Marshal</h3>
            <p><strong>Available as of Camel 2.13.3/2.14</strong></p>
            <p>If you want to marshal a POJO to JSON, and the&nbsp;POJO has some fields with null values. And you want to skip these null values, then you need to set either an annotation on the POJO,&nbsp;</p>
            <parameter ac:name="language">
             java
            </parameter>
            <plain-text-body>
             @JsonInclude(Include.NON_NULL) public class MyPojo { // ... }
            </plain-text-body>
            <p>But this requires you to include that annotation in your&nbsp;POJO source code. You can also configure the Camel&nbsp;<strong><code>JsonDataFormat</code></strong> to set the include option, as shown below:</p>
            <parameter ac:name="language">
             java
            </parameter>
            <plain-text-body>
             JacksonDataFormat format = new JacksonDataFormat(); format.setInclude("NON_NULL");
            </plain-text-body>
            <p>Or from XML DSL you configure this as</p>
            <parameter ac:name="language">
             xml
            </parameter>
            <plain-text-body>
             &lt;dataFormats&gt; &lt;json id="json" library="Jackson" include="NON_NULL"/&gt; &lt;/dataFormats&gt;
            </plain-text-body>
            <h3 id="BookDataFormatAppendix-UnmarshalingfromJSONtoPOJOwithDynamicClassName">Unmarshaling from JSON to POJO with Dynamic Class Name</h3>
            <p><strong>Available as of Camel 2.14</strong></p>
            <p>If you use Jackson to unmarshal JSON to POJO, then you can now specify a header in the message that indicate which class name to unmarshal to.<span style="line-height: 1.4285715;"> The header has key </span><strong><code style="line-height: 1.4285715;">CamelJacksonUnmarshalType</code></strong><span style="line-height: 1.4285715;">&nbsp;if that header is present in the message, then Jackson will use that as FQN for the POJO class to unmarshal the JSON payload as. Notice that behavior is enabled out of the box from <strong>Camel 2.14</strong>.&nbsp;</span></p>
            <p><span style="line-height: 1.4285715;">&nbsp;</span><span style="line-height: 1.4285715;">For JMS end users there is the&nbsp;<strong><code>JMSType</code></strong> header from the JMS spec that indicates that also. To enable support for&nbsp;<span><strong><code>JMSType</code></strong></span> you would need to turn that on, on the Jackson data format as shown:</span></p>
            <parameter ac:name="language">
             java
            </parameter>
            <plain-text-body>
             JacksonDataFormat format = new JacksonDataFormat(); format.setAllowJmsType(true);
            </plain-text-body>
            <p>Or from XML DSL you configure this as</p>
            <parameter ac:name="language">
             xml
            </parameter>
            <plain-text-body>
             &lt;dataFormats&gt; &lt;json id="json" library="Jackson" allowJmsType="true"/&gt; &lt;/dataFormats&gt;
            </plain-text-body>
            <h3 id="BookDataFormatAppendix-UnmarshalingFromJSONtoList<Map>orList<pojo>">Unmarshaling From JSON to&nbsp;<code>List&lt;Map&gt;</code> or&nbsp;<code>List&lt;pojo&gt;</code></h3>
            <p><strong>Available as of Camel 2.14</strong></p>
            <p>If you are using Jackson to unmarshal JSON to a list of map/POJO, you can now specify this by setting&nbsp;<strong><code>useList="true"</code></strong> or use the&nbsp;<strong><code>org.apache.camel.component.jackson.ListJacksonDataFormat</code></strong>.</p>
            <p>For example, with Java you can do as shown below:</p>
            <parameter ac:name="language">
             java
            </parameter>
            <plain-text-body>
             JacksonDataFormat format = new ListJacksonDataFormat(); // or JacksonDataFormat format = new JacksonDataFormat(); format.useList(); // and you can specify the pojo class type also format.setUnmarshalType(MyPojo.class);
            </plain-text-body>
            <p>And if you use XML DSL then you configure to use list using <code>useList</code> attribute as shown below:</p>
            <parameter ac:name="language">
             xml
            </parameter>
            <plain-text-body>
             &lt;dataFormats&gt; &lt;json id="json" library="Jackson" useList="true"/&gt; &lt;/dataFormats&gt;
            </plain-text-body>
            <p>And you can specify the pojo type also</p>
            <parameter ac:name="language">
             xml
            </parameter>
            <plain-text-body>
             &lt;dataFormats&gt; &lt;json id="json" library="Jackson" useList="true" unmarshalTypeName="com.foo.MyPojo"/&gt; &lt;/dataFormats&gt;
            </plain-text-body>
            <h3 id="BookDataFormatAppendix-UsingCustomJackson'sObjectMapper">Using Custom Jackson's <code>ObjectMapper</code></h3>
            <p><strong>Available from Camel 2.17</strong></p>
            <p>You can use custom Jackson&nbsp;<strong><code>ObjectMapper</code></strong> instance, can be configured as shown below.</p>
            <parameter ac:name="language">
             xml
            </parameter>
            <plain-text-body>
             &lt;dataFormats&gt; &lt;json id="json" library="Jackson" objectMapper="myMapper"/&gt; &lt;/dataFormats&gt;
            </plain-text-body>
            <p>Where&nbsp;<strong><code>myMapper</code></strong> is the id of the custom instance that Camel will lookup in the&nbsp;<a shape="rect" href="registry.html">Registry.</a></p>
            <h3 id="BookDataFormatAppendix-UsingCustomJacksonModules">Using Custom Jackson Modules</h3>
            <p><strong>Available as of Camel 2.15</strong></p>
            <p>You can use custom Jackson modules by specifying the class names of those using the&nbsp;<strong><code>moduleClassNames</code></strong> option as shown below.</p>
            <parameter ac:name="language">
             xml
            </parameter>
            <plain-text-body>
             &lt;dataFormats&gt; &lt;json id="json" library="Jackson" useList="true" unmarshalTypeName="com.foo.MyPojo" moduleClassNames="com.foo.MyModule,com.foo.MyOtherModule"/&gt; &lt;/dataFormats&gt;
            </plain-text-body>
            <p>When using&nbsp;<strong><code>moduleClassNames</code></strong> then the custom Jackson modules are not configured, by created using default constructor and used as-is. If a custom module needs any custom configuration, then an instance of the module can be created and configured, and then use&nbsp;<strong><code>modulesRefs</code></strong> to refer to the module as shown below:</p>
            <parameter ac:name="language">
             xml
            </parameter>
            <plain-text-body>
             &lt;bean id="myJacksonModule" class="com.foo.MyModule"&gt; ... // configure the module as you want &lt;/bean&gt; &nbsp; &lt;dataFormats&gt; &lt;json id="json" library="Jackson" useList="true" unmarshalTypeName="com.foo.MyPojo" moduleRefs="myJacksonModule"/&gt; &lt;/dataFormats&gt;
            </plain-text-body>
            <p>&nbsp;Multiple modules can be specified separated by comma, such as <strong><code>moduleRefs="myJacksonModule,myOtherModule"</code></strong>.</p>
            <h3 id="BookDataFormatAppendix-EnablingorDisableFeaturesUsingJackson">Enabling or Disable Features Using Jackson</h3>
            <p><strong>Available as of Camel 2.15</strong></p>
            <p>Jackson has a number of features you can enable or disable, which its&nbsp;<strong><code>ObjectMapper</code></strong> uses. For example to disable failing on unknown properties when marshaling, you can configure this using the <strong><code>disableFeatures</code></strong>:</p>
            <parameter ac:name="language">
             xml
            </parameter>
            <plain-text-body>
             &lt;dataFormats&gt; &lt;json id="json" library="Jackson" unmarshalTypeName="com.foo.MyPojo" disableFeatures="FAIL_ON_UNKNOWN_PROPERTIES"/&gt; &lt;/dataFormats&gt;
            </plain-text-body>
            <p>You can disable multiple features by separating the values using comma. The values for the features must be the name of the enums from Jackson from the following enum classes</p>
            <ul>
             <li><code>com.fasterxml.jackson.databind.SerializationFeature</code></li>
             <li><code>com.fasterxml.jackson.databind.DeserializationFeature</code></li>
             <li><code>com.fasterxml.jackson.databind.MapperFeature</code></li>
            </ul>
            <p>To enable a feature use the&nbsp;<strong><code>enableFeatures</code></strong> options instead.</p>
            <p>From Java code you can use the type safe methods from&nbsp;<strong><code>camel-jackson</code></strong> module:</p>
            <parameter ac:name="language">
             java
            </parameter>
            <plain-text-body>
             JacksonDataFormat df = new JacksonDataFormat(MyPojo.class); df.disableFeature(DeserializationFeature.FAIL_ON_UNKNOWN_PROPERTIES); df.disableFeature(DeserializationFeature.FAIL_ON_NULL_FOR_PRIMITIVES);
            </plain-text-body>
            <h3 id="BookDataFormatAppendix-ConvertingMapstoPOJOUsingJackson">Converting Maps to POJO Using Jackson</h3>
            <p>Available since <strong>Camel 2.16</strong>. Jackson <strong><code>ObjectMapper</code></strong> can be used to convert maps to POJO objects. Jackson component comes with the data converter that can be used to convert <strong><code>java.util.Map</code></strong> instance to non-String, non-primitive and non-Number objects.</p>
            <parameter ac:name="language">
             java
            </parameter>
            <plain-text-body>
             Map&lt;String, Object&gt; invoiceData = new HashMap&lt;String, Object&gt;(); invoiceData.put("netValue", 500); producerTemplate.sendBody("direct:mapToInvoice", invoiceData); ... // Later in the processor Invoice invoice = exchange.getIn().getBody(Invoice.class);
            </plain-text-body>
            <p>If there is a single <strong><code>ObjectMapper</code></strong> instance available in the Camel registry, it will used by the converter to perform the conversion. Otherwise the default mapper will be used. &nbsp;</p>
            <h3 id="BookDataFormatAppendix-FormattedJSONmarshalling(pretty-printing)">Formatted JSON marshalling (pretty-printing)</h3>
            <p><strong>Available as of Camel 2.16</strong></p>
            <p>Using the <strong><code>prettyPrint</code></strong> option&nbsp;one can output a well formatted JSON while marshaling:</p>
            <parameter ac:name="language">
             xml
            </parameter>
            <plain-text-body>
             &lt;dataFormats&gt; &lt;json id="xstream" prettyPrint="true"/&gt; &lt;json id="jackson" prettyPrint="true" library="Jackson"/&gt; &lt;json id="gson" prettyPrint="true" library="Gson"/&gt; &lt;/dataFormats&gt;
            </plain-text-body>
            <p><span style="line-height: 1.5625;">And in Java DSL:</span></p>
            <parameter ac:name="language">
             java
            </parameter>
            <plain-text-body>
             from("direct:inPretty").marshal().json(true); &nbsp; from("direct:inPretty").marshal().json(JsonLibrary.Jackson, true); &nbsp; from("direct:inPretty").marshal().json(JsonLibrary.Gson, true);
            </plain-text-body>
            <p><span style="line-height: 1.5625;">Please note that as of Camel 2.16 there are five different overloaded <strong><code>json()</code></strong> DSL methods which support the <strong><code>prettyPrint</code></strong> option in combination with other settings for <strong><code>JsonLibrary</code></strong>, <strong><code>unmarshalType</code></strong>, <strong><code>jsonView</code></strong> etc.&nbsp;</span></p>
            <h3 id="BookDataFormatAppendix-IntegratingJacksonwithCamel'sTypeConverters"><span style="line-height: 1.5625;">&nbsp;</span>Integrating Jackson with Camel's&nbsp;TypeConverters</h3>
            <h3 id="BookDataFormatAppendix-AvailableasofCamel2.17"><span style="line-height: 1.5625;">&nbsp;</span><strong>Available as of Camel 2.17</strong></h3>
            <p><span style="line-height: 1.5625;">The&nbsp;<strong><code>camel-jackson</code></strong> module allows to integrate Jackson as a&nbsp;<a shape="rect" href="type-converter.html">Type Converter</a> in the Camel registry. This works in similar ways that&nbsp;<strong><code>camel-jaxb</code></strong>&nbsp;integrates with the type converter as well. However&nbsp;<strong><code>camel-jackson</code></strong> must be explicit enabled, which is done by setting some options on the&nbsp;<strong><code>CamelContext</code></strong> properties, as shown below:</span></p>
            <parameter ac:name="language">
             java
            </parameter>
            <plain-text-body>
             // Enable Jackson JSON type converter. getContext().getProperties().put("CamelJacksonEnableTypeConverter", "true"); // Allow Jackson JSON to convert to pojo types also (by default Jackson only converts to String and other simple types). getContext().getProperties().put("CamelJacksonTypeConverterToPojo", "true");
            </plain-text-body>
            <p>The&nbsp;<strong><code>camel-jackson</code></strong> type converter integrates with JAXB which means you can annotate POJO class with&nbsp;JAXB annotations that Jackson can leverage.&nbsp;</p>
            <h3 id="BookDataFormatAppendix-DependenciesforXStream"><span style="line-height: 1.5625;">Dependencies for XStream</span></h3>
            <p>To use JSON in your camel routes you need to add the a dependency on&nbsp;<strong><code>camel-xstream</code></strong> which implements this data format.</p>
            <p>If you use maven you could just add the following to your <strong><code>pom.xml</code></strong>, substituting the version number for the latest &amp; greatest release (see <a shape="rect" href="download.html">the download page for the latest versions</a>).</p>
            <parameter ac:name="language">
             xml
            </parameter>
            <plain-text-body>
             &lt;dependency&gt; &lt;groupId&gt;org.apache.camel&lt;/groupId&gt; &lt;artifactId&gt;camel-xstream&lt;/artifactId&gt; &lt;version&gt;2.9.2&lt;/version&gt; &lt;/dependency&gt; 
            </plain-text-body>
            <h3 id="BookDataFormatAppendix-DependenciesforJackson">Dependencies for Jackson</h3>
            <p>To use JSON in your camel routes you need to add the a dependency on&nbsp;<strong><code>camel-jackson</code></strong> which implements this data format.</p>
            <p>If you use maven you could just add the following to your <strong><code>pom.xml</code></strong>, substituting the version number for the latest &amp; greatest release (see <a shape="rect" href="download.html">the download page for the latest versions</a>).</p>
            <parameter ac:name="language">
             xml
            </parameter>
            <plain-text-body>
             &lt;dependency&gt; &lt;groupId&gt;org.apache.camel&lt;/groupId&gt; &lt;artifactId&gt;camel-jackson&lt;/artifactId&gt; &lt;version&gt;2.9.2&lt;/version&gt; &lt;/dependency&gt; 
            </plain-text-body>
            <h3 id="BookDataFormatAppendix-DependenciesforGSON">Dependencies for GSON</h3>
            <p>To use JSON in your camel routes you need to add the a dependency on&nbsp;<strong><code>camel-gson</code></strong> which implements this data format.</p>
            <p>If you use maven you could just add the following to your <strong><code>pom.xml</code></strong>, substituting the version number for the latest &amp; greatest release (see <a shape="rect" href="download.html">the download page for the latest versions</a>).</p>
            <parameter ac:name="language">
             xml
            </parameter>
            <plain-text-body>
             &lt;dependency&gt; &lt;groupId&gt;org.apache.camel&lt;/groupId&gt; &lt;artifactId&gt;camel-gson&lt;/artifactId&gt; &lt;version&gt;2.10.0&lt;/version&gt; &lt;/dependency&gt; 
            </plain-text-body> The Zip 
            <a shape="rect" href="data-format.html">Data Format</a> is a message compression and de-compression format. Messages marshalled using Zip compression can be unmarshalled using Zip decompression just prior to being consumed at the endpoint. The compression capability is quite useful when you deal with large XML and Text based payloads. It facilitates more optimal use of network bandwidth while incurring a small cost in order to compress and decompress payloads at the endpoint.
            <div class="confluence-information-macro confluence-information-macro-information">
             <p class="title">About using with Files</p>
             <span class="aui-icon aui-icon-small aui-iconfont-info confluence-information-macro-icon"></span>
             <div class="confluence-information-macro-body">
              <p>The Zip data format, does not (yet) have special support for files. Which means that when using big files, the entire file content is loaded into memory.<br clear="none"> This is subject to change in the future, to allow a streaming based solution to have a low memory footprint.</p>
             </div>
            </div>
            <h3 id="BookDataFormatAppendix-Options.2">Options</h3>
            <div class="table-wrap">
             <table class="confluenceTable">
              <tbody>
               <tr>
                <th colspan="1" rowspan="1" class="confluenceTh"><p>Option</p></th>
                <th colspan="1" rowspan="1" class="confluenceTh"><p>Default</p></th>
                <th colspan="1" rowspan="1" class="confluenceTh"><p>Description</p></th>
               </tr>
               <tr>
                <td colspan="1" rowspan="1" class="confluenceTd"><p>compressionLevel</p></td>
                <td colspan="1" rowspan="1" class="confluenceTd"><p>null</p></td>
                <td colspan="1" rowspan="1" class="confluenceTd"><p>To specify a specific compression Level use <code>java.util.zip.Deflater</code> settings. The possible settings are&nbsp; <br clear="none" class="atl-forced-newline"> &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; - <code>Deflater.BEST_SPEED</code> <br clear="none" class="atl-forced-newline"> &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; - <code>Deflater.BEST_COMPRESSION</code> <br clear="none" class="atl-forced-newline"> &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; - <code>Deflater.DEFAULT_COMPRESSION</code> <br clear="none" class="atl-forced-newline"> <br clear="none" class="atl-forced-newline"> If compressionLevel is not explicitly specified the compressionLevel employed is <code>Deflater.DEFAULT_COMPRESSION</code></p></td>
               </tr>
              </tbody>
             </table>
            </div>
            <h3 id="BookDataFormatAppendix-Marshal.1">Marshal</h3>
            <p>In this example we marshal a regular text/XML payload to a compressed payload employing zip compression <code>Deflater.BEST_COMPRESSION</code> and send it an ActiveMQ queue called MY_QUEUE.</p>
            <div class="code panel pdl" style="border-width: 1px;">
             <div class="codeContent panelContent pdl"> 
              <script class="brush: java; gutter: false; theme: Default" type="syntaxhighlighter"><![CDATA[from(&quot;direct:start&quot;).marshal().zip(Deflater.BEST_COMPRESSION).to(&quot;activemq:queue:MY_QUEUE&quot;);
]]></script> 
             </div>
            </div>
            <p>Alternatively if you would like to use the default setting you could send it as</p>
            <div class="code panel pdl" style="border-width: 1px;">
             <div class="codeContent panelContent pdl"> 
              <script class="brush: java; gutter: false; theme: Default" type="syntaxhighlighter"><![CDATA[from(&quot;direct:start&quot;).marshal().zip().to(&quot;activemq:queue:MY_QUEUE&quot;);
]]></script> 
             </div>
            </div>
            <h3 id="BookDataFormatAppendix-Unmarshal.1">Unmarshal</h3>
            <p>In this example we unmarshal&nbsp;a zipped&nbsp;payload from an ActiveMQ queue called MY_QUEUE&nbsp;to its original format,&nbsp;and forward it for&nbsp;processing&nbsp;to the UnZippedMessageProcessor. Note that the compression Level employed during the marshalling should be identical to the one employed during unmarshalling to avoid errors.</p>
            <div class="code panel pdl" style="border-width: 1px;">
             <div class="codeContent panelContent pdl"> 
              <script class="brush: java; gutter: false; theme: Default" type="syntaxhighlighter"><![CDATA[from(&quot;activemq:queue:MY_QUEUE&quot;).unmarshal().zip().process(new UnZippedMessageProcessor());
]]></script> 
             </div>
            </div>
            <h3 id="BookDataFormatAppendix-Dependencies.6">Dependencies</h3>
            <p>This data format is provided in <strong>camel-core</strong> so no additional dependencies are needed.</p> 
            <h2 id="BookDataFormatAppendix-TidyMarkup">TidyMarkup</h2> 
            <p>TidyMarkup is a <a shape="rect" href="data-format.html">Data Format</a> that uses the <a shape="rect" class="external-link" href="http://www.ccil.org/~cowan/XML/tagsoup/" rel="nofollow">TagSoup</a> to tidy up HTML. It can be used to parse ugly HTML and return it as pretty wellformed HTML.</p> 
            <div class="confluence-information-macro confluence-information-macro-tip">
             <p class="title">Camel eats our own -dog food- soap</p>
             <span class="aui-icon aui-icon-small aui-iconfont-approve confluence-information-macro-icon"></span>
             <div class="confluence-information-macro-body"> 
              <p>We had some issues in our pdf <a shape="rect" href="manual.html">Manual</a> where we had some strange symbols. So <a shape="rect" class="external-link" href="http://janstey.blogspot.com/" rel="nofollow">Jonathan</a> used this data format to tidy up the wiki html pages that are used as base for rendering the pdf manuals. And then the mysterious symbols vanished.</p>
             </div>
            </div> 
            <p><a shape="rect" href="tidymarkup.html">TidyMarkup</a> only supports the <strong>unmarshal</strong> operation as we really don't want to turn well formed HTML into ugly HTML <img class="emoticon emoticon-smile" src="https://cwiki.apache.org/confluence/s/en_GB/5997/6f42626d00e36f53fe51440403446ca61552e2a2.1/_/images/icons/emoticons/smile.png" data-emoticon-name="smile" alt="(smile)"></p> 
            <h3 id="BookDataFormatAppendix-JavaDSLExample">Java DSL Example</h3> 
            <p>An example where the consumer provides some HTML</p> 
            <div class="code panel pdl" style="border-width: 1px;">
             <div class="codeContent panelContent pdl"> 
              <script class="brush: java; gutter: false; theme: Default" type="syntaxhighlighter"><![CDATA[
from(&quot;file://site/inbox&quot;).unmarshal().tidyMarkup().to(&quot;file://site/blogs&quot;);
]]></script> 
             </div>
            </div> 
            <h3 id="BookDataFormatAppendix-SpringXMLExample">Spring XML Example</h3> 
            <p>The following example shows how to use <a shape="rect" href="tidymarkup.html">TidyMarkup</a> to unmarshal using Spring</p> 
            <div class="code panel pdl" style="border-width: 1px;">
             <div class="codeContent panelContent pdl"> 
              <script class="brush: java; gutter: false; theme: Default" type="syntaxhighlighter"><![CDATA[
&lt;camelContext id=&quot;camel&quot; xmlns=&quot;http://camel.apache.org/schema/spring&quot;&gt;
  &lt;route&gt;
    &lt;from uri=&quot;file://site/inbox&quot;/&gt;
    &lt;unmarshal&gt;
      &lt;tidyMarkup/&gt;
    &lt;/unmarshal&gt;
    &lt;to uri=&quot;file://site/blogs&quot;/&gt;
  &lt;/route&gt;
&lt;/camelContext&gt;
]]></script> 
             </div>
            </div> 
            <h3 id="BookDataFormatAppendix-Dependencies.7">Dependencies</h3> 
            <p>To use TidyMarkup in your camel routes you need to add the a dependency on <strong>camel-tagsoup</strong> which implements this data format. </p> 
            <p>If you use maven you could just add the following to your pom.xml, substituting the version number for the latest &amp; greatest release (see <a shape="rect" href="download.html">the download page for the latest versions</a>).</p> 
            <div class="code panel pdl" style="border-width: 1px;">
             <div class="codeContent panelContent pdl"> 
              <script class="brush: java; gutter: false; theme: Default" type="syntaxhighlighter"><![CDATA[
&lt;dependency&gt;
  &lt;groupId&gt;org.apache.camel&lt;/groupId&gt;
  &lt;artifactId&gt;camel-tagsoup&lt;/artifactId&gt;
  &lt;version&gt;x.x.x&lt;/version&gt;
&lt;/dependency&gt;
]]></script> 
             </div>
            </div> 
            <h2 id="BookDataFormatAppendix-Bindy">Bindy</h2>
            <p>The goal of this component is to allow the parsing/binding of non-structured data (or to be more precise non-XML data)<br clear="none"> to/from Java Beans that have binding mappings defined with annotations. Using Bindy, you can bind data from sources such as :</p>
            <ul class="alternate">
             <li>CSV records,</li>
             <li>Fixed-length records,</li>
             <li>FIX messages,</li>
             <li>or almost any other non-structured data</li>
            </ul>
            <p>to one or many Plain Old Java Object (POJO). Bindy converts the data according to the type of the java property. POJOs can be linked together with one-to-many relationships available in some cases. Moreover, for data type like Date, Double, Float, Integer, Short, Long and BigDecimal, you can provide the pattern to apply during the formatting of the property.</p>
            <p>For the BigDecimal numbers, you can also define the precision and the decimal or grouping separators.</p>
            <div class="table-wrap">
             <table class="confluenceTable">
              <tbody>
               <tr>
                <th colspan="1" rowspan="1" class="confluenceTh"><p>Type</p></th>
                <th colspan="1" rowspan="1" class="confluenceTh"><p>Format Type</p></th>
                <th colspan="1" rowspan="1" class="confluenceTh"><p>Pattern example</p></th>
                <th colspan="1" rowspan="1" class="confluenceTh"><p>Link</p></th>
               </tr>
               <tr>
                <td colspan="1" rowspan="1" class="confluenceTd"><p>Date</p></td>
                <td colspan="1" rowspan="1" class="confluenceTd"><p>DateFormat</p></td>
                <td colspan="1" rowspan="1" class="confluenceTd"><p>"dd-MM-yyyy"</p></td>
                <td colspan="1" rowspan="1" class="confluenceTd"><p><a shape="rect" class="external-link" href="http://java.sun.com/j2se/1.5.0/docs/api/java/text/SimpleDateFormat.html" rel="nofollow">http://java.sun.com/j2se/1.5.0/docs/api/java/text/SimpleDateFormat.html</a></p></td>
               </tr>
               <tr>
                <td colspan="1" rowspan="1" class="confluenceTd"><p>Decimal*</p></td>
                <td colspan="1" rowspan="1" class="confluenceTd"><p>Decimalformat</p></td>
                <td colspan="1" rowspan="1" class="confluenceTd"><p>"##.###.###"</p></td>
                <td colspan="1" rowspan="1" class="confluenceTd"><p><a shape="rect" class="external-link" href="http://java.sun.com/j2se/1.5.0/docs/api/java/text/DecimalFormat.html" rel="nofollow">http://java.sun.com/j2se/1.5.0/docs/api/java/text/DecimalFormat.html</a></p></td>
               </tr>
              </tbody>
             </table>
            </div>
            <p>Decimal* = Double, Integer, Float, Short, Long</p>
            <div class="confluence-information-macro confluence-information-macro-note">
             <p class="title">Format supported</p>
             <span class="aui-icon aui-icon-small aui-iconfont-warning confluence-information-macro-icon"></span>
             <div class="confluence-information-macro-body">
              <p>This first release only support comma separated values fields and key value pair fields (e.g. : FIX messages).</p>
             </div>
            </div>
            <p>To work with camel-bindy, you must first define your model in a package (e.g. com.acme.model) and for each model class (e.g. Order, Client, Instrument, ...) add the required annotations (described hereafter) to the Class or field.</p>
            <div class="confluence-information-macro confluence-information-macro-note">
             <p class="title">Multiple models</p>
             <span class="aui-icon aui-icon-small aui-iconfont-warning confluence-information-macro-icon"></span>
             <div class="confluence-information-macro-body">
              <p>If you use multiple models, each model has to be placed in it's own package to prevent unpredictable results.</p>
              <p>From <strong>Camel 2.16</strong> onwards this is no longer the case, as you can safely have multiple models in the same package, as you configure bindy using class names instead of package names now.</p>
             </div>
            </div>
            <h2 id="BookDataFormatAppendix-Annotations">Annotations</h2>
            <p>The annotations created allow to map different concept of your model to the POJO like :</p>
            <ul class="alternate">
             <li>Type of record (csv, key value pair (e.g. FIX message), fixed length ...),</li>
             <li>Link (to link object in another object),</li>
             <li>DataField and their properties (int, type, ...),</li>
             <li>KeyValuePairField (for key = value format like we have in FIX financial messages),</li>
             <li>Section (to identify header, body and footer section),</li>
             <li>OneToMany</li>
            </ul>
            <p>This section will describe them :</p>
            <h3 id="BookDataFormatAppendix-1.CsvRecord">1. CsvRecord</h3>
            <p>The CsvRecord annotation is used to identified the root class of the model. It represents a record = a line of a CSV file and can be linked to several children model classes.</p>
            <div class="table-wrap">
             <table class="confluenceTable">
              <tbody>
               <tr>
                <th colspan="1" rowspan="1" class="confluenceTh"><p>Annotation name</p></th>
                <th colspan="1" rowspan="1" class="confluenceTh"><p>Record type</p></th>
                <th colspan="1" rowspan="1" class="confluenceTh"><p>Level</p></th>
               </tr>
               <tr>
                <td colspan="1" rowspan="1" class="confluenceTd"><p><strong>CsvRecord</strong></p></td>
                <td colspan="1" rowspan="1" class="confluenceTd"><p>csv</p></td>
                <td colspan="1" rowspan="1" class="confluenceTd"><p>Class</p></td>
               </tr>
              </tbody>
             </table>
            </div>
            <div class="table-wrap">
             <table class="confluenceTable">
              <tbody>
               <tr>
                <th colspan="1" rowspan="1" class="confluenceTh"><p>Parameter name</p></th>
                <th colspan="1" rowspan="1" class="confluenceTh"><p>type</p></th>
                <th colspan="1" rowspan="1" class="confluenceTh"><p>Info</p></th>
               </tr>
               <tr>
                <td colspan="1" rowspan="1" class="confluenceTd"><p>separator</p></td>
                <td colspan="1" rowspan="1" class="confluenceTd"><p>string</p></td>
                <td colspan="1" rowspan="1" class="confluenceTd"><p>mandatory - can be ',' or ';' or 'anything'. This value is interpreted as a regular expression. If you want to use a sign which has a special meaning in regular expressions, e.g. the '|' sign, than you have to mask it, like ' <br clear="none" class="atl-forced-newline"> |'</p></td>
               </tr>
               <tr>
                <td colspan="1" rowspan="1" class="confluenceTd"><p>skipFirstLine</p></td>
                <td colspan="1" rowspan="1" class="confluenceTd"><p>boolean</p></td>
                <td colspan="1" rowspan="1" class="confluenceTd"><p>optional - default value = false - allow to skip the first line of the CSV file</p></td>
               </tr>
               <tr>
                <td colspan="1" rowspan="1" class="confluenceTd"><p>crlf</p></td>
                <td colspan="1" rowspan="1" class="confluenceTd"><p>string</p></td>
                <td colspan="1" rowspan="1" class="confluenceTd"><p>optional - possible values = WINDOWS,UNIX,MAC, or custom; default value = WINDOWS - allow to define the carriage return character to use. If you specify a value other than the three listed before, the value you enter (custom) will be used as the CRLF character(s)</p></td>
               </tr>
               <tr>
                <td colspan="1" rowspan="1" class="confluenceTd"><p>generateHeaderColumns</p></td>
                <td colspan="1" rowspan="1" class="confluenceTd"><p>boolean</p></td>
                <td colspan="1" rowspan="1" class="confluenceTd"><p>optional - default value = false - uses to generate the header columns of the CSV generates</p></td>
               </tr>
               <tr>
                <td colspan="1" rowspan="1" class="confluenceTd"><p>autospanLine</p></td>
                <td colspan="1" rowspan="1" class="confluenceTd"><p>boolean</p></td>
                <td colspan="1" rowspan="1" class="confluenceTd"><p><strong>Camel 2.13/2.12.2:</strong> optional - default value = false - if enabled then the last column is auto spanned to end of line, for example if its a comment, etc this allows the line to contain all characters, also the delimiter char.</p></td>
               </tr>
               <tr>
                <td colspan="1" rowspan="1" class="confluenceTd"><p>isOrdered</p></td>
                <td colspan="1" rowspan="1" class="confluenceTd"><p>boolean</p></td>
                <td colspan="1" rowspan="1" class="confluenceTd"><p>optional - default value = false - allow to change the order of the fields when CSV is generated</p></td>
               </tr>
               <tr>
                <td colspan="1" rowspan="1" class="confluenceTd"><p>quote</p></td>
                <td colspan="1" rowspan="1" class="confluenceTd"><p>String</p></td>
                <td colspan="1" rowspan="1" class="confluenceTd"><p><strong>Camel 2.8.3/2.9:</strong> option - allow to specify a quote character of the fields when CSV is generated</p></td>
               </tr>
               <tr>
                <td colspan="1" rowspan="1" class="confluenceTd"><p>&nbsp;</p></td>
                <td colspan="1" rowspan="1" class="confluenceTd"><p>&nbsp;</p></td>
                <td colspan="1" rowspan="1" class="confluenceTd"><p>This annotation is associated to the root class of the model and must be declared one time.</p></td>
               </tr>
               <tr>
                <td colspan="1" rowspan="1" class="confluenceTd">quoting</td>
                <td colspan="1" rowspan="1" class="confluenceTd">boolean</td>
                <td colspan="1" rowspan="1" class="confluenceTd"><strong>Camel 2.11:</strong>optional - default value = false -&nbsp;Indicate if the values must be quoted when marshaling when CSV is generated.</td>
               </tr>
              </tbody>
             </table>
            </div>
            <p><strong>case 1 : separator = ','</strong></p>
            <p>The separator used to segregate the fields in the CSV record is ',' :</p>
            <p>10, J, Pauline, M, XD12345678, Fortis Dynamic 15/15, 2500, USD,08-01-2009</p>
            <div class="code panel pdl" style="border-width: 1px;">
             <div class="codeContent panelContent pdl"> 
              <script class="brush: java; gutter: false; theme: Default" type="syntaxhighlighter"><![CDATA[@CsvRecord( separator = &quot;,&quot; )
public Class Order {
...
}
]]></script> 
             </div>
            </div>
            <p><strong>case 2 : separator = ';'</strong></p>
            <p>Compare to the previous case, the separator here is ';' instead of ',' :</p>
            <p>10; J; Pauline; M; XD12345678; Fortis Dynamic 15/15; 2500; USD; 08-01-2009</p>
            <div class="code panel pdl" style="border-width: 1px;">
             <div class="codeContent panelContent pdl"> 
              <script class="brush: java; gutter: false; theme: Default" type="syntaxhighlighter"><![CDATA[@CsvRecord( separator = &quot;;&quot; )
public Class Order {
...
}
]]></script> 
             </div>
            </div>
            <p><strong>case 3 : separator = '|'</strong></p>
            <p>Compare to the previous case, the separator here is '|' instead of ';' :</p>
            <p>10| J| Pauline| M| XD12345678| Fortis Dynamic 15/15| 2500| USD| 08-01-2009</p>
            <div class="code panel pdl" style="border-width: 1px;">
             <div class="codeContent panelContent pdl"> 
              <script class="brush: java; gutter: false; theme: Default" type="syntaxhighlighter"><![CDATA[@CsvRecord( separator = &quot;\\|&quot; )
public Class Order {
...
}
]]></script> 
             </div>
            </div>
            <p><strong>case 4 : separator = '\",\"'</strong><br clear="none"> <strong>Applies for Camel 2.8.2 or older</strong></p>
            <p>When the field to be parsed of the CSV record contains ',' or ';' which is also used as separator, we whould find another strategy<br clear="none"> to tell camel bindy how to handle this case. To define the field containing the data with a comma, you will use simple or double quotes<br clear="none"> as delimiter (e.g : '10', 'Street 10, NY', 'USA' or "10", "Street 10, NY", "USA").<br clear="none"> Remark : In this case, the first and last character of the line which are a simple or double quotes will removed by bindy</p>
            <p>"10","J","Pauline"," M","XD12345678","Fortis Dynamic 15,15" 2500","USD","08-01-2009"</p>
            <div class="code panel pdl" style="border-width: 1px;">
             <div class="codeContent panelContent pdl"> 
              <script class="brush: java; gutter: false; theme: Default" type="syntaxhighlighter"><![CDATA[@CsvRecord( separator = &quot;\&quot;,\&quot;&quot; )
public Class Order {
...
}
]]></script> 
             </div>
            </div>
            <p>From <strong>Camel 2.8.3/2.9 or never</strong> bindy will automatic detect if the record is enclosed with either single or double quotes and automatic remove those quotes when unmarshalling from CSV to Object. Therefore do <strong>not</strong> include the quotes in the separator, but simple do as below:</p>
            <p>"10","J","Pauline"," M","XD12345678","Fortis Dynamic 15,15" 2500","USD","08-01-2009"</p>
            <div class="code panel pdl" style="border-width: 1px;">
             <div class="codeContent panelContent pdl"> 
              <script class="brush: java; gutter: false; theme: Default" type="syntaxhighlighter"><![CDATA[@CsvRecord( separator = &quot;,&quot; )
public Class Order {
...
}
]]></script> 
             </div>
            </div>
            <p>Notice that if you want to marshal from Object to CSV and use quotes, then you need to specify which quote character to use, using the <code>quote</code> attribute on the @CsvRecord as shown below:</p>
            <div class="code panel pdl" style="border-width: 1px;">
             <div class="codeContent panelContent pdl"> 
              <script class="brush: java; gutter: false; theme: Default" type="syntaxhighlighter"><![CDATA[@CsvRecord( separator = &quot;,&quot;, quote = &quot;\&quot;&quot; )
public Class Order {
...
}
]]></script> 
             </div>
            </div>
            <p><strong>case 5 : separator &amp; skipfirstline</strong></p>
            <p>The feature is interesting when the client wants to have in the first line of the file, the name of the data fields :</p>
            <p>order id, client id, first name, last name, isin code, instrument name, quantity, currency, date</p>
            <p>To inform bindy that this first line must be skipped during the parsing process, then we use the attribute :</p>
            <div class="code panel pdl" style="border-width: 1px;">
             <div class="codeContent panelContent pdl"> 
              <script class="brush: java; gutter: false; theme: Default" type="syntaxhighlighter"><![CDATA[@CsvRecord(separator = &quot;,&quot;, skipFirstLine = true)
public Class Order {
...
}
]]></script> 
             </div>
            </div>
            <p><strong>case 6 : generateHeaderColumns</strong></p>
            <p>To add at the first line of the CSV generated, the attribute generateHeaderColumns must be set to true in the annotation like this :</p>
            <div class="code panel pdl" style="border-width: 1px;">
             <div class="codeContent panelContent pdl"> 
              <script class="brush: java; gutter: false; theme: Default" type="syntaxhighlighter"><![CDATA[@CsvRecord( generateHeaderColumns = true )
public Class Order {
...
}
]]></script> 
             </div>
            </div>
            <p>As a result, Bindy during the unmarshaling process will generate CSV like this :</p>
            <p>order id, client id, first name, last name, isin code, instrument name, quantity, currency, date<br clear="none"> 10, J, Pauline, M, XD12345678, Fortis Dynamic 15/15, 2500, USD,08-01-2009</p>
            <p><strong>case 7 : carriage return</strong></p>
            <p>If the platform where camel-bindy will run is not Windows but Macintosh or Unix, than you can change the crlf property like this. Three values are available : WINDOWS, UNIX or MAC</p>
            <div class="code panel pdl" style="border-width: 1px;">
             <div class="codeContent panelContent pdl"> 
              <script class="brush: java; gutter: false; theme: Default" type="syntaxhighlighter"><![CDATA[@CsvRecord(separator = &quot;,&quot;, crlf=&quot;MAC&quot;)
public Class Order {
...
}
]]></script> 
             </div>
            </div>
            <p>Additionally, if for some reason you need to add a different line ending character, you can opt to specify it using the crlf parameter. In the following example, we can end the line with a comma followed by the newline character:</p>
            <div class="code panel pdl" style="border-width: 1px;">
             <div class="codeContent panelContent pdl"> 
              <script class="brush: java; gutter: false; theme: Default" type="syntaxhighlighter"><![CDATA[@CsvRecord(separator = &quot;,&quot;, crlf=&quot;,\n&quot;)
public Class Order {
...
}
]]></script> 
             </div>
            </div>
            <p><strong>case 8 : isOrdered</strong></p>
            <p>Sometimes, the order to follow during the creation of the CSV record from the model is different from the order used during the parsing. Then, in this case, we can use the attribute isOrdered = true to indicate this in combination with attribute 'position' of the DataField annotation.</p>
            <div class="code panel pdl" style="border-width: 1px;">
             <div class="codeContent panelContent pdl"> 
              <script class="brush: java; gutter: false; theme: Default" type="syntaxhighlighter"><![CDATA[@CsvRecord(isOrdered = true)
public Class Order {

   @DataField(pos = 1, position = 11)
   private int orderNr;

   @DataField(pos = 2, position = 10)
   private String clientNr;

...
}
]]></script> 
             </div>
            </div>
            <p>Remark : pos is used to parse the file, stream while positions is used to generate the CSV</p>
            <h3 id="BookDataFormatAppendix-2.Link">2. Link</h3>
            <p>The link annotation will allow to link objects together.</p>
            <div class="table-wrap">
             <table class="confluenceTable">
              <tbody>
               <tr>
                <th colspan="1" rowspan="1" class="confluenceTh"><p>Annotation name</p></th>
                <th colspan="1" rowspan="1" class="confluenceTh"><p>Record type</p></th>
                <th colspan="1" rowspan="1" class="confluenceTh"><p>Level</p></th>
               </tr>
               <tr>
                <td colspan="1" rowspan="1" class="confluenceTd"><p><strong>Link</strong></p></td>
                <td colspan="1" rowspan="1" class="confluenceTd"><p>all</p></td>
                <td colspan="1" rowspan="1" class="confluenceTd"><p>Class &amp; Property</p></td>
               </tr>
              </tbody>
             </table>
            </div>
            <div class="table-wrap">
             <table class="confluenceTable">
              <tbody>
               <tr>
                <th colspan="1" rowspan="1" class="confluenceTh"><p>Parameter name</p></th>
                <th colspan="1" rowspan="1" class="confluenceTh"><p>type</p></th>
                <th colspan="1" rowspan="1" class="confluenceTh"><p>Info</p></th>
               </tr>
               <tr>
                <td colspan="1" rowspan="1" class="confluenceTd"><p>linkType</p></td>
                <td colspan="1" rowspan="1" class="confluenceTd"><p>LinkType</p></td>
                <td colspan="1" rowspan="1" class="confluenceTd"><p>optional - by default the value is LinkType.oneToOne - so you are not obliged to mention it</p></td>
               </tr>
               <tr>
                <td colspan="1" rowspan="1" class="confluenceTd"><p>&nbsp;</p></td>
                <td colspan="1" rowspan="1" class="confluenceTd"><p>&nbsp;</p></td>
                <td colspan="1" rowspan="1" class="confluenceTd"><p>Only one-to-one relation is allowed.</p></td>
               </tr>
              </tbody>
             </table>
            </div>
            <p>e.g : If the model Class Client is linked to the Order class, then use annotation Link in the Order class like this :</p>
            <div class="code panel pdl" style="border-width: 1px;">
             <div class="codeHeader panelHeader pdl" style="border-bottom-width: 1px;">
              <b>Property Link</b>
             </div>
             <div class="codeContent panelContent pdl"> 
              <script class="brush: java; gutter: false; theme: Default" type="syntaxhighlighter"><![CDATA[@CsvRecord(separator = &quot;,&quot;)
public class Order {

    @DataField(pos = 1)
    private int orderNr;

    @Link
    private Client client;
...
]]></script> 
             </div>
            </div>
            <p>AND for the class Client :</p>
            <div class="code panel pdl" style="border-width: 1px;">
             <div class="codeHeader panelHeader pdl" style="border-bottom-width: 1px;">
              <b>Class Link</b>
             </div>
             <div class="codeContent panelContent pdl"> 
              <script class="brush: java; gutter: false; theme: Default" type="syntaxhighlighter"><![CDATA[@Link
public class Client {
...
}
]]></script> 
             </div>
            </div>
            <h3 id="BookDataFormatAppendix-3.DataField">3. DataField</h3>
            <p>The DataField annotation defines the property of the field. Each datafield is identified by its position in the record, a type (string, int, date, ...) and optionally of a pattern</p>
            <div class="table-wrap">
             <table class="confluenceTable">
              <tbody>
               <tr>
                <th colspan="1" rowspan="1" class="confluenceTh"><p>Annotation name</p></th>
                <th colspan="1" rowspan="1" class="confluenceTh"><p>Record type</p></th>
                <th colspan="1" rowspan="1" class="confluenceTh"><p>Level</p></th>
               </tr>
               <tr>
                <td colspan="1" rowspan="1" class="confluenceTd"><p><strong>DataField</strong></p></td>
                <td colspan="1" rowspan="1" class="confluenceTd"><p>all</p></td>
                <td colspan="1" rowspan="1" class="confluenceTd"><p>Property</p></td>
               </tr>
              </tbody>
             </table>
            </div>
            <div class="table-wrap">
             <table class="confluenceTable">
              <tbody>
               <tr>
                <th colspan="1" rowspan="1" class="confluenceTh"><p>Parameter name</p></th>
                <th colspan="1" rowspan="1" class="confluenceTh"><p>type</p></th>
                <th colspan="1" rowspan="1" class="confluenceTh"><p>Info</p></th>
               </tr>
               <tr>
                <td colspan="1" rowspan="1" class="confluenceTd"><p>pos</p></td>
                <td colspan="1" rowspan="1" class="confluenceTd"><p>int</p></td>
                <td colspan="1" rowspan="1" class="confluenceTd"><p>mandatory - The <strong>input</strong> position of the field. digit number starting from 1 to ... - See the position parameter.</p></td>
               </tr>
               <tr>
                <td colspan="1" rowspan="1" class="confluenceTd"><p>pattern</p></td>
                <td colspan="1" rowspan="1" class="confluenceTd"><p>string</p></td>
                <td colspan="1" rowspan="1" class="confluenceTd"><p>optional - default value = "" - will be used to format Decimal, Date, ...</p></td>
               </tr>
               <tr>
                <td colspan="1" rowspan="1" class="confluenceTd"><p>length</p></td>
                <td colspan="1" rowspan="1" class="confluenceTd"><p>int</p></td>
                <td colspan="1" rowspan="1" class="confluenceTd"><p>optional - represents the length of the field for fixed length format</p></td>
               </tr>
               <tr>
                <td colspan="1" rowspan="1" class="confluenceTd"><p>precision</p></td>
                <td colspan="1" rowspan="1" class="confluenceTd"><p>int</p></td>
                <td colspan="1" rowspan="1" class="confluenceTd"><p>optional - represents the precision to be used when the Decimal number will be formatted/parsed</p></td>
               </tr>
               <tr>
                <td colspan="1" rowspan="1" class="confluenceTd"><p>pattern</p></td>
                <td colspan="1" rowspan="1" class="confluenceTd"><p>string</p></td>
                <td colspan="1" rowspan="1" class="confluenceTd"><p>optional - default value = "" - is used by the Java formatter (SimpleDateFormat by example) to format/validate data. If using pattern, then setting locale on bindy data format is recommended. Either set to a known locale such as "us" or use "default" to use platform default locale. Notice that "default" requires Camel 2.14/2.13.3/2.12.5.</p></td>
               </tr>
               <tr>
                <td colspan="1" rowspan="1" class="confluenceTd"><p>position</p></td>
                <td colspan="1" rowspan="1" class="confluenceTd"><p>int</p></td>
                <td colspan="1" rowspan="1" class="confluenceTd"><p>optional - must be used when the position of the field in the CSV generated (output message) must be different compare to input position (pos). See the pos parameter.</p></td>
               </tr>
               <tr>
                <td colspan="1" rowspan="1" class="confluenceTd"><p>required</p></td>
                <td colspan="1" rowspan="1" class="confluenceTd"><p>boolean</p></td>
                <td colspan="1" rowspan="1" class="confluenceTd"><p>optional - default value = "false"</p></td>
               </tr>
               <tr>
                <td colspan="1" rowspan="1" class="confluenceTd"><p>trim</p></td>
                <td colspan="1" rowspan="1" class="confluenceTd"><p>boolean</p></td>
                <td colspan="1" rowspan="1" class="confluenceTd"><p>optional - default value = "false"</p></td>
               </tr>
               <tr>
                <td colspan="1" rowspan="1" class="confluenceTd"><p>defaultValue</p></td>
                <td colspan="1" rowspan="1" class="confluenceTd"><p>string</p></td>
                <td colspan="1" rowspan="1" class="confluenceTd"><p><strong>Camel 2.10:</strong> optional - default value = "" - defines the field's default value when the respective CSV field is empty/not available</p></td>
               </tr>
               <tr>
                <td colspan="1" rowspan="1" class="confluenceTd"><p>impliedDecimalSeparator</p></td>
                <td colspan="1" rowspan="1" class="confluenceTd"><p>boolean</p></td>
                <td colspan="1" rowspan="1" class="confluenceTd"><p><strong>Camel 2.11:</strong> optional - default value = "false" - Indicates if there is a decimal point implied at a specified location</p></td>
               </tr>
               <tr>
                <td colspan="1" rowspan="1" class="confluenceTd"><p>lengthPos</p></td>
                <td colspan="1" rowspan="1" class="confluenceTd"><p>int</p></td>
                <td colspan="1" rowspan="1" class="confluenceTd"><p><strong>Camel 2.11</strong>: optional - can be used to identify&nbsp;a data field in a fixed-length record that defines the fixed length for this field</p></td>
               </tr>
               <tr>
                <td colspan="1" rowspan="1" class="confluenceTd"><p>delimiter</p></td>
                <td colspan="1" rowspan="1" class="confluenceTd"><p>string</p></td>
                <td colspan="1" rowspan="1" class="confluenceTd"><p><strong>Camel 2.11:</strong> optional - can be used to demarcate the end of a variable-length field within a fixed-length record</p></td>
               </tr>
              </tbody>
             </table>
            </div>
            <p><strong>case 1 : pos</strong></p>
            <p>This parameter/attribute represents the position of the field in the csv record</p>
            <div class="code panel pdl" style="border-width: 1px;">
             <div class="codeHeader panelHeader pdl" style="border-bottom-width: 1px;">
              <b>Position</b>
             </div>
             <div class="codeContent panelContent pdl"> 
              <script class="brush: java; gutter: false; theme: Default" type="syntaxhighlighter"><![CDATA[@CsvRecord(separator = &quot;,&quot;)
public class Order {

    @DataField(pos = 1)
    private int orderNr;

    @DataField(pos = 5)
    private String isinCode;

...
}
]]></script> 
             </div>
            </div>
            <p>As you can see in this example the position starts at '1' but continues at '5' in the class Order. The numbers from '2' to '4' are defined in the class Client (see here after).</p>
            <div class="code panel pdl" style="border-width: 1px;">
             <div class="codeHeader panelHeader pdl" style="border-bottom-width: 1px;">
              <b>Position continues in another model class</b>
             </div>
             <div class="codeContent panelContent pdl"> 
              <script class="brush: java; gutter: false; theme: Default" type="syntaxhighlighter"><![CDATA[public class Client {

    @DataField(pos = 2)
    private String clientNr;

    @DataField(pos = 3)
    private String firstName;

    @DataField(pos = 4)
    private String lastName;
...
}
]]></script> 
             </div>
            </div>
            <p><strong>case 2 : pattern</strong></p>
            <p>The pattern allows to enrich or validates the format of your data</p>
            <div class="code panel pdl" style="border-width: 1px;">
             <div class="codeHeader panelHeader pdl" style="border-bottom-width: 1px;">
              <b>Pattern</b>
             </div>
             <div class="codeContent panelContent pdl"> 
              <script class="brush: java; gutter: false; theme: Default" type="syntaxhighlighter"><![CDATA[@CsvRecord(separator = &quot;,&quot;)
public class Order {

    @DataField(pos = 1)
    private int orderNr;

    @DataField(pos = 5)
    private String isinCode;

    @DataField(name = &quot;Name&quot;, pos = 6)
    private String instrumentName;

    @DataField(pos = 7, precision = 2)
    private BigDecimal amount;

    @DataField(pos = 8)
    private String currency;

    @DataField(pos = 9, pattern = &quot;dd-MM-yyyy&quot;) -- pattern used during parsing or when the date is created
    private Date orderDate;
...
}
]]></script> 
             </div>
            </div>
            <p><strong>case 3 : precision</strong></p>
            <p>The precision is helpful when you want to define the decimal part of your number</p>
            <div class="code panel pdl" style="border-width: 1px;">
             <div class="codeHeader panelHeader pdl" style="border-bottom-width: 1px;">
              <b>Precision</b>
             </div>
             <div class="codeContent panelContent pdl"> 
              <script class="brush: java; gutter: false; theme: Default" type="syntaxhighlighter"><![CDATA[@CsvRecord(separator = &quot;,&quot;)
public class Order {

    @DataField(pos = 1)
    private int orderNr;

    @Link
    private Client client;

    @DataField(pos = 5)
    private String isinCode;

    @DataField(name = &quot;Name&quot;, pos = 6)
    private String instrumentName;

    @DataField(pos = 7, precision = 2) -- precision
    private BigDecimal amount;

    @DataField(pos = 8)
    private String currency;

    @DataField(pos = 9, pattern = &quot;dd-MM-yyyy&quot;)
    private Date orderDate;
...
}
]]></script> 
             </div>
            </div>
            <p><strong>case 4 : Position is different in output</strong></p>
            <p>The position attribute will inform bindy how to place the field in the CSV record generated. By default, the position used corresponds to the position defined with the attribute 'pos'. If the position is different (that means that we have an asymetric processus comparing marshaling from unmarshaling) than we can use 'position' to indicate this.</p>
            <p>Here is an example</p>
            <div class="code panel pdl" style="border-width: 1px;">
             <div class="codeHeader panelHeader pdl" style="border-bottom-width: 1px;">
              <b>Position is different in output</b>
             </div>
             <div class="codeContent panelContent pdl"> 
              <script class="brush: java; gutter: false; theme: Default" type="syntaxhighlighter"><![CDATA[@CsvRecord(separator = &quot;,&quot;)
public class Order {
@CsvRecord(separator = &quot;,&quot;, isOrdered = true)
public class Order {

    // Positions of the fields start from 1 and not from 0

    @DataField(pos = 1, position = 11)
    private int orderNr;

    @DataField(pos = 2, position = 10)
    private String clientNr;

    @DataField(pos = 3, position = 9)
    private String firstName;

    @DataField(pos = 4, position = 8)
    private String lastName;

    @DataField(pos = 5, position = 7)
    private String instrumentCode;

    @DataField(pos = 6, position = 6)
    private String instrumentNumber;
...
}
]]></script> 
             </div>
            </div>
            <div class="confluence-information-macro confluence-information-macro-note">
             <span class="aui-icon aui-icon-small aui-iconfont-warning confluence-information-macro-icon"></span>
             <div class="confluence-information-macro-body">
              <p>This attribute of the annotation @DataField must be used in combination with attribute isOrdered = true of the annotation @CsvRecord</p>
             </div>
            </div>
            <p><strong>case 5 : required</strong></p>
            <p>If a field is mandatory, simply use the attribute 'required' setted to true</p>
            <div class="code panel pdl" style="border-width: 1px;">
             <div class="codeHeader panelHeader pdl" style="border-bottom-width: 1px;">
              <b>Required</b>
             </div>
             <div class="codeContent panelContent pdl"> 
              <script class="brush: java; gutter: false; theme: Default" type="syntaxhighlighter"><![CDATA[@CsvRecord(separator = &quot;,&quot;)
public class Order {

    @DataField(pos = 1)
    private int orderNr;

    @DataField(pos = 2, required = true)
    private String clientNr;

    @DataField(pos = 3, required = true)
    private String firstName;

    @DataField(pos = 4, required = true)
    private String lastName;
...
}
]]></script> 
             </div>
            </div>
            <p>If this field is not present in the record, than an error will be raised by the parser with the following information :</p>
            <p>Some fields are missing (optional or mandatory), line :</p>
            <p><strong>case 6 : trim</strong></p>
            <p>If a field has leading and/or trailing spaces which should be removed before they are processed, simply use the attribute 'trim' setted to true</p>
            <div class="code panel pdl" style="border-width: 1px;">
             <div class="codeHeader panelHeader pdl" style="border-bottom-width: 1px;">
              <b>Trim</b>
             </div>
             <div class="codeContent panelContent pdl"> 
              <script class="brush: java; gutter: false; theme: Default" type="syntaxhighlighter"><![CDATA[@CsvRecord(separator = &quot;,&quot;)
public class Order {

    @DataField(pos = 1, trim = true)
    private int orderNr;

    @DataField(pos = 2, trim = true)
    private Integer clientNr;

    @DataField(pos = 3, required = true)
    private String firstName;

    @DataField(pos = 4)
    private String lastName;
...
}
]]></script> 
             </div>
            </div>
            <p><strong>case 7 : defaultValue</strong></p>
            <p>If a field is not defined then uses the value indicated by the defaultValue attribute</p>
            <div class="code panel pdl" style="border-width: 1px;">
             <div class="codeHeader panelHeader pdl" style="border-bottom-width: 1px;">
              <b>Default value</b>
             </div>
             <div class="codeContent panelContent pdl"> 
              <script class="brush: java; gutter: false; theme: Default" type="syntaxhighlighter"><![CDATA[@CsvRecord(separator = &quot;,&quot;)
public class Order {

    @DataField(pos = 1)
    private int orderNr;

    @DataField(pos = 2)
    private Integer clientNr;

    @DataField(pos = 3, required = true)
    private String firstName;

    @DataField(pos = 4, defaultValue = &quot;Barin&quot;)
    private String lastName;
...
}
]]></script> 
             </div>
            </div>
            <div class="confluence-information-macro confluence-information-macro-note">
             <span class="aui-icon aui-icon-small aui-iconfont-warning confluence-information-macro-icon"></span>
             <div class="confluence-information-macro-body">
              <p>This attribute is only applicable to optional fields.</p>
             </div>
            </div>
            <h3 id="BookDataFormatAppendix-4.FixedLengthRecord">4. FixedLengthRecord</h3>
            <p>The FixedLengthRecord annotation is used to identified the root class of the model. It represents a record = a line of a file/message containing data fixed length formatted and can be linked to several children model classes. This format is a bit particular beause data of a field can be aligned to the right or to the left.<br clear="none"> When the size of the data does not fill completely the length of the field, we can then add 'padd' characters.</p>
            <div class="table-wrap">
             <table class="confluenceTable">
              <tbody>
               <tr>
                <th colspan="1" rowspan="1" class="confluenceTh"><p>Annotation name</p></th>
                <th colspan="1" rowspan="1" class="confluenceTh"><p>Record type</p></th>
                <th colspan="1" rowspan="1" class="confluenceTh"><p>Level</p></th>
               </tr>
               <tr>
                <td colspan="1" rowspan="1" class="confluenceTd"><p><strong>FixedLengthRecord</strong></p></td>
                <td colspan="1" rowspan="1" class="confluenceTd"><p>fixed</p></td>
                <td colspan="1" rowspan="1" class="confluenceTd"><p>Class</p></td>
               </tr>
              </tbody>
             </table>
            </div>
            <div class="table-wrap">
             <table class="confluenceTable">
              <tbody>
               <tr>
                <th colspan="1" rowspan="1" class="confluenceTh"><p>Parameter name</p></th>
                <th colspan="1" rowspan="1" class="confluenceTh"><p>type</p></th>
                <th colspan="1" rowspan="1" class="confluenceTh"><p>Info</p></th>
               </tr>
               <tr>
                <td colspan="1" rowspan="1" class="confluenceTd"><p>crlf</p></td>
                <td colspan="1" rowspan="1" class="confluenceTd"><p>string</p></td>
                <td colspan="1" rowspan="1" class="confluenceTd"><p>optional - possible values = WINDOWS,UNIX,MAC, or custom; default value = WINDOWS - allow to define the carriage return character to use. If you specify a value other than the three listed before, the value you enter (custom) will be used as the CRLF character(s)</p></td>
               </tr>
               <tr>
                <td colspan="1" rowspan="1" class="confluenceTd"><p>paddingChar</p></td>
                <td colspan="1" rowspan="1" class="confluenceTd"><p>char</p></td>
                <td colspan="1" rowspan="1" class="confluenceTd"><p>mandatory - default value = ' '</p></td>
               </tr>
               <tr>
                <td colspan="1" rowspan="1" class="confluenceTd"><p>length</p></td>
                <td colspan="1" rowspan="1" class="confluenceTd"><p>int</p></td>
                <td colspan="1" rowspan="1" class="confluenceTd"><p>mandatory = size of the fixed length record</p></td>
               </tr>
               <tr>
                <td colspan="1" rowspan="1" class="confluenceTd"><p>hasHeader</p></td>
                <td colspan="1" rowspan="1" class="confluenceTd"><p>boolean</p></td>
                <td colspan="1" rowspan="1" class="confluenceTd"><p><strong>Camel 2.11</strong> - optional - Indicates that the record(s) of this type may be preceded by a single header record at the beginning of the file / stream</p></td>
               </tr>
               <tr>
                <td colspan="1" rowspan="1" class="confluenceTd"><p>hasFooter</p></td>
                <td colspan="1" rowspan="1" class="confluenceTd"><p>boolean</p></td>
                <td colspan="1" rowspan="1" class="confluenceTd"><p><strong>Camel 2.11</strong> - optional - Indicates that the record(s) of this type may be followed by a single footer record at the end of the file / stream</p></td>
               </tr>
               <tr>
                <td colspan="1" rowspan="1" class="confluenceTd"><p>skipHeader</p></td>
                <td colspan="1" rowspan="1" class="confluenceTd"><p>boolean</p></td>
                <td colspan="1" rowspan="1" class="confluenceTd"><p><strong>Camel 2.11</strong> - optional - Configures the data format to skip marshalling / unmarshalling of the header record. Configure this parameter on the primary record (e.g., not the header or footer).</p></td>
               </tr>
               <tr>
                <td colspan="1" rowspan="1" class="confluenceTd"><p>skipFooter</p></td>
                <td colspan="1" rowspan="1" class="confluenceTd"><p>boolean</p></td>
                <td colspan="1" rowspan="1" class="confluenceTd"><p><strong>Camel 2.11</strong> - optional - Configures the data format to skip marshalling / unmarshalling of the footer record Configure this parameter on the primary record (e.g., not the header or footer)..</p></td>
               </tr>
               <tr>
                <td colspan="1" rowspan="1" class="confluenceTd"><p>isHeader</p></td>
                <td colspan="1" rowspan="1" class="confluenceTd"><p>boolean</p></td>
                <td colspan="1" rowspan="1" class="confluenceTd"><p><strong>Camel 2.11</strong> - optional - Identifies this FixedLengthRecord as a header record</p></td>
               </tr>
               <tr>
                <td colspan="1" rowspan="1" class="confluenceTd"><p>isFooter</p></td>
                <td colspan="1" rowspan="1" class="confluenceTd"><p>boolean</p></td>
                <td colspan="1" rowspan="1" class="confluenceTd"><p><strong>Camel 2.11</strong> - optional - Identifies this FixedLengthRecords as a footer record</p></td>
               </tr>
               <tr>
                <td colspan="1" rowspan="1" class="confluenceTd"><p>ignoreTrailingChars</p></td>
                <td colspan="1" rowspan="1" class="confluenceTd"><p>boolean</p></td>
                <td colspan="1" rowspan="1" class="confluenceTd"><p><strong>Camel 2.11.1</strong> - optional - Indicates that characters beyond the last mapped filed can be ignored when unmarshalling / parsing.</p></td>
               </tr>
               <tr>
                <td colspan="1" rowspan="1" class="confluenceTd"><p>&nbsp;</p></td>
                <td colspan="1" rowspan="1" class="confluenceTd"><p>&nbsp;</p></td>
                <td colspan="1" rowspan="1" class="confluenceTd"><p>This annotation is associated to the root class of the model and must be declared one time.</p></td>
               </tr>
              </tbody>
             </table>
            </div>
            <div class="confluence-information-macro confluence-information-macro-note">
             <span class="aui-icon aui-icon-small aui-iconfont-warning confluence-information-macro-icon"></span>
             <div class="confluence-information-macro-body">
              <p>The hasHeader/hasFooter parameters are mutually exclusive with isHeader/isFooter. A record may not be both a header/footer and a primary fixed-length record.</p>
             </div>
            </div>
            <p><strong>case 1 : Simple fixed length record</strong></p>
            <p>This simple example shows how to design the model to parse/format a fixed message</p>
            <p>10A9PaulineMISINXD12345678BUYShare2500.45USD01-08-2009</p>
            <div class="code panel pdl" style="border-width: 1px;">
             <div class="codeHeader panelHeader pdl" style="border-bottom-width: 1px;">
              <b>Fixed-simple</b>
             </div>
             <div class="codeContent panelContent pdl"> 
              <script class="brush: java; gutter: false; theme: Default" type="syntaxhighlighter"><![CDATA[   @FixedLengthRecord(length=54, paddingChar=&#39; &#39;)
    public static class Order {

        @DataField(pos = 1, length=2)
        private int orderNr;

        @DataField(pos = 3, length=2)
        private String clientNr;

        @DataField(pos = 5, length=7)
        private String firstName;

        @DataField(pos = 12, length=1, align=&quot;L&quot;)
        private String lastName;

        @DataField(pos = 13, length=4)
        private String instrumentCode;

        @DataField(pos = 17, length=10)
        private String instrumentNumber;

        @DataField(pos = 27, length=3)
        private String orderType;

        @DataField(pos = 30, length=5)
        private String instrumentType;

        @DataField(pos = 35, precision = 2, length=7)
        private BigDecimal amount;

        @DataField(pos = 42, length=3)
        private String currency;

        @DataField(pos = 45, length=10, pattern = &quot;dd-MM-yyyy&quot;)
        private Date orderDate;
        ...
]]></script> 
             </div>
            </div>
            <p><strong>case 2 : Fixed length record with alignment and padding</strong></p>
            <p>This more elaborated example show how to define the alignment for a field and how to assign a padding character which is ' ' here''</p>
            <p>10A9 PaulineM ISINXD12345678BUYShare2500.45USD01-08-2009</p>
            <div class="code panel pdl" style="border-width: 1px;">
             <div class="codeHeader panelHeader pdl" style="border-bottom-width: 1px;">
              <b>Fixed-padding-align</b>
             </div>
             <div class="codeContent panelContent pdl"> 
              <script class="brush: java; gutter: false; theme: Default" type="syntaxhighlighter"><![CDATA[   @FixedLengthRecord(length=60, paddingChar=&#39; &#39;)
    public static class Order {

        @DataField(pos = 1, length=2)
        private int orderNr;

        @DataField(pos = 3, length=2)
        private String clientNr;

        @DataField(pos = 5, length=9)
        private String firstName;

        @DataField(pos = 14, length=5, align=&quot;L&quot;)   // align text to the LEFT zone of the block
        private String lastName;

        @DataField(pos = 19, length=4)
        private String instrumentCode;

        @DataField(pos = 23, length=10)
        private String instrumentNumber;

        @DataField(pos = 33, length=3)
        private String orderType;

        @DataField(pos = 36, length=5)
        private String instrumentType;

        @DataField(pos = 41, precision = 2, length=7)
        private BigDecimal amount;

        @DataField(pos = 48, length=3)
        private String currency;

        @DataField(pos = 51, length=10, pattern = &quot;dd-MM-yyyy&quot;)
        private Date orderDate;
        ...
]]></script> 
             </div>
            </div>
            <p><strong>case 3 : Field padding</strong></p>
            <p>Sometimes, the default padding defined for record cannnot be applied to the field as we have a number format where we would like to padd with '0' instead of ' '. In this case, you can use in the model the attribute paddingField to set this value.</p>
            <p>10A9 PaulineM ISINXD12345678BUYShare000002500.45USD01-08-2009</p>
            <div class="code panel pdl" style="border-width: 1px;">
             <div class="codeHeader panelHeader pdl" style="border-bottom-width: 1px;">
              <b>Fixed-padding-field</b>
             </div>
             <div class="codeContent panelContent pdl"> 
              <script class="brush: java; gutter: false; theme: Default" type="syntaxhighlighter"><![CDATA[    @FixedLengthRecord(length = 65, paddingChar = &#39; &#39;)
    public static class Order {

        @DataField(pos = 1, length = 2)
        private int orderNr;

        @DataField(pos = 3, length = 2)
        private String clientNr;

        @DataField(pos = 5, length = 9)
        private String firstName;

        @DataField(pos = 14, length = 5, align = &quot;L&quot;)
        private String lastName;

        @DataField(pos = 19, length = 4)
        private String instrumentCode;

        @DataField(pos = 23, length = 10)
        private String instrumentNumber;

        @DataField(pos = 33, length = 3)
        private String orderType;

        @DataField(pos = 36, length = 5)
        private String instrumentType;

        @DataField(pos = 41, precision = 2, length = 12, paddingChar = &#39;0&#39;)
        private BigDecimal amount;

        @DataField(pos = 53, length = 3)
        private String currency;

        @DataField(pos = 56, length = 10, pattern = &quot;dd-MM-yyyy&quot;)
        private Date orderDate;
        ...
]]></script> 
             </div>
            </div>
            <p><strong>case 4: Fixed length record with delimiter</strong></p>
            <p>Fixed-length records sometimes have delimited content within the record. The firstName and lastName fields are delimited with the '^' character in the following example:</p>
            <p>10A9Pauline^M^ISINXD12345678BUYShare000002500.45USD01-08-2009</p>
            <div class="code panel pdl" style="border-width: 1px;">
             <div class="codeHeader panelHeader pdl" style="border-bottom-width: 1px;">
              <b>Fixed-delimited</b>
             </div>
             <div class="codeContent panelContent pdl"> 
              <script class="brush: java; gutter: false; theme: Default" type="syntaxhighlighter"><![CDATA[    @FixedLengthRecord()
    public static class Order {

        @DataField(pos = 1, length = 2)
        private int orderNr;

        @DataField(pos = 2, length = 2)
        private String clientNr;

        @DataField(pos = 3, delimiter = &quot;^&quot;)
        private String firstName;

        @DataField(pos = 4, delimiter = &quot;^&quot;)
        private String lastName;

        @DataField(pos = 5, length = 4)
        private String instrumentCode;

        @DataField(pos = 6, length = 10)
        private String instrumentNumber;

        @DataField(pos = 7, length = 3)
        private String orderType;

        @DataField(pos = 8, length = 5)
        private String instrumentType;

        @DataField(pos = 9, precision = 2, length = 12, paddingChar = &#39;0&#39;)
        private BigDecimal amount;

        @DataField(pos = 10, length = 3)
        private String currency;

        @DataField(pos = 11, length = 10, pattern = &quot;dd-MM-yyyy&quot;)
        private Date orderDate;
]]></script> 
             </div>
            </div>
            <div class="confluence-information-macro confluence-information-macro-note">
             <span class="aui-icon aui-icon-small aui-iconfont-warning confluence-information-macro-icon"></span>
             <div class="confluence-information-macro-body">
              <p>As of <strong>Camel 2.11</strong> the 'pos' value(s) in a fixed-length record may optionally be defined using ordinal, sequential values instead of precise column numbers.</p>
             </div>
            </div>
            <p><strong>case 5 : Fixed length record with record-defined field length</strong></p>
            <p>Occasionally a fixed-length record may contain a field that define the expected length of another field within the same record. In the following example the length of the instrumentNumber field value is defined by the value of instrumentNumberLen field in the record.</p>
            <p>10A9Pauline^M^ISIN10XD12345678BUYShare000002500.45USD01-08-2009</p>
            <div class="code panel pdl" style="border-width: 1px;">
             <div class="codeHeader panelHeader pdl" style="border-bottom-width: 1px;">
              <b>Fixed-delimited</b>
             </div>
             <div class="codeContent panelContent pdl"> 
              <script class="brush: java; gutter: false; theme: Default" type="syntaxhighlighter"><![CDATA[    @FixedLengthRecord()
    public static class Order {

        @DataField(pos = 1, length = 2)
        private int orderNr;

        @DataField(pos = 2, length = 2)
        private String clientNr;

        @DataField(pos = 3, delimiter = &quot;^&quot;)
        private String firstName;

        @DataField(pos = 4, delimiter = &quot;^&quot;)
        private String lastName;

        @DataField(pos = 5, length = 4)
        private String instrumentCode;

        @DataField(pos = 6, length = 2, align = &quot;R&quot;, paddingChar = &#39;0&#39;)
        private int instrumentNumberLen;
        
        @DataField(pos = 7, lengthPos=6)
        private String instrumentNumber;

        @DataField(pos = 8, length = 3)
        private String orderType;

        @DataField(pos = 9, length = 5)
        private String instrumentType;

        @DataField(pos = 10, precision = 2, length = 12, paddingChar = &#39;0&#39;)
        private BigDecimal amount;

        @DataField(pos = 11, length = 3)
        private String currency;

        @DataField(pos = 12, length = 10, pattern = &quot;dd-MM-yyyy&quot;)
        private Date orderDate;
]]></script> 
             </div>
            </div>
            <p><strong>case 6 : Fixed length record with header and footer</strong></p>
            <p>Bindy will discover fixed-length header and footer records that are configured as part of the model  provided that the annotated classes exist either in the same package as the primary @FixedLengthRecord class, or within one of the configured scan packages. The following text illustrates two fixed-length records that are bracketed by a header record and footer record.</p>
            <p>101-08-2009<br clear="none"> 10A9 PaulineM ISINXD12345678BUYShare000002500.45USD01-08-2009<br clear="none"> 10A9 RichN ISINXD12345678BUYShare000002700.45USD01-08-2009<br clear="none"> 9000000002</p>
            <div class="code panel pdl" style="border-width: 1px;">
             <div class="codeHeader panelHeader pdl" style="border-bottom-width: 1px;">
              <b>Fixed-header-and-footer-main-class</b>
             </div>
             <div class="codeContent panelContent pdl"> 
              <script class="brush: java; gutter: false; theme: Default" type="syntaxhighlighter"><![CDATA[@FixedLengthRecord(hasHeader = true, hasFooter = true)
public class Order {

    @DataField(pos = 1, length = 2)
    private int orderNr;

    @DataField(pos = 2, length = 2)
    private String clientNr;

    @DataField(pos = 3, length = 9)
    private String firstName;

    @DataField(pos = 4, length = 5, align = &quot;L&quot;)
    private String lastName;

    @DataField(pos = 5, length = 4)
    private String instrumentCode;

    @DataField(pos = 6, length = 10)
    private String instrumentNumber;

    @DataField(pos = 7, length = 3)
    private String orderType;

    @DataField(pos = 8, length = 5)
    private String instrumentType;

    @DataField(pos = 9, precision = 2, length = 12, paddingChar = &#39;0&#39;)
    private BigDecimal amount;

    @DataField(pos = 10, length = 3)
    private String currency;

    @DataField(pos = 11, length = 10, pattern = &quot;dd-MM-yyyy&quot;)
    private Date orderDate;
...
}


@FixedLengthRecord(isHeader = true)
public  class OrderHeader {
    @DataField(pos = 1, length = 1)
    private int recordType = 1;
    
    @DataField(pos = 2, length = 10, pattern = &quot;dd-MM-yyyy&quot;)
    private Date recordDate;
    
...
}


@FixedLengthRecord(isFooter = true)
public class OrderFooter {
    
    @DataField(pos = 1, length = 1)
    private int recordType = 9;
    
    @DataField(pos = 2, length = 9, align = &quot;R&quot;, paddingChar = &#39;0&#39;)
    private int numberOfRecordsInTheFile;

...
}

]]></script> 
             </div>
            </div>
            <p><strong>case 7 : Skipping content when parsing a fixed length record. (Camel 2.11.1)</strong></p>
            <p>It is common to integrate with systems that provide fixed-length records containing more information than needed for the target use case. It is useful in this situation to skip the declaration and parsing of those fields that we do not need. To accomodate this, Bindy will skip forward to the next mapped field within a record if the 'pos' value of the next declared field is beyond the cursor position of the last parsed field. Using absolute 'pos' locations for the fields of interest (instead of ordinal values) causes Bindy to skip content between two fields.</p>
            <p>Similarly, it is possible that none of the content beyond some field is of interest. In this case, you can tell Bindy to skip parsing of everything beyond the last mapped field by setting the <strong>ignoreTrailingChars</strong> property on the @FixedLengthRecord declaration.</p>
            <div class="code panel pdl" style="border-width: 1px;">
             <div class="codeContent panelContent pdl"> 
              <script class="brush: java; gutter: false; theme: Default" type="syntaxhighlighter"><![CDATA[@FixedLengthRecord(ignoreTrailingChars = true)
public static class Order {

        @DataField(pos = 1, length = 2)
        private int orderNr;

        @DataField(pos = 3, length = 2)
        private String clientNr;

    ... any characters that appear beyond the last mapped field will be ignored

}
]]></script> 
             </div>
            </div>
            <h3 id="BookDataFormatAppendix-5.Message">5. Message</h3>
            <p>The Message annotation is used to identified the class of your model who will contain key value pairs fields. This kind of format is used mainly in Financial Exchange Protocol Messages (FIX). Nevertheless, this annotation can be used for any other format where data are identified by keys. The key pair values are separated each other by a separator which can be a special character like a tab delimitor (unicode representation : \u0009) or a start of heading (unicode representation : \u0001)</p>
            <div class="confluence-information-macro confluence-information-macro-note">
             <p class="title">"FIX information"</p>
             <span class="aui-icon aui-icon-small aui-iconfont-warning confluence-information-macro-icon"></span>
             <div class="confluence-information-macro-body">
              <p>More information about FIX can be found on this web site : <a shape="rect" class="external-link" href="http://www.fixprotocol.org/" rel="nofollow">http://www.fixprotocol.org/</a>. To work with FIX messages, the model must contain a Header and Trailer classes linked to the root message class which could be a Order class. This is not mandatory but will be very helpful when you will use camel-bindy in combination with camel-fix which is a Fix gateway based on quickFix project <a shape="rect" class="external-link" href="http://www.quickfixj.org/" rel="nofollow">http://www.quickfixj.org/</a>.</p>
             </div>
            </div>
            <div class="table-wrap">
             <table class="confluenceTable">
              <tbody>
               <tr>
                <th colspan="1" rowspan="1" class="confluenceTh"><p>Annotation name</p></th>
                <th colspan="1" rowspan="1" class="confluenceTh"><p>Record type</p></th>
                <th colspan="1" rowspan="1" class="confluenceTh"><p>Level</p></th>
               </tr>
               <tr>
                <td colspan="1" rowspan="1" class="confluenceTd"><p><strong>Message</strong></p></td>
                <td colspan="1" rowspan="1" class="confluenceTd"><p>key value pair</p></td>
                <td colspan="1" rowspan="1" class="confluenceTd"><p>Class</p></td>
               </tr>
              </tbody>
             </table>
            </div>
            <div class="table-wrap">
             <table class="confluenceTable">
              <tbody>
               <tr>
                <th colspan="1" rowspan="1" class="confluenceTh"><p>Parameter name</p></th>
                <th colspan="1" rowspan="1" class="confluenceTh"><p>type</p></th>
                <th colspan="1" rowspan="1" class="confluenceTh"><p>Info</p></th>
               </tr>
               <tr>
                <td colspan="1" rowspan="1" class="confluenceTd"><p>pairSeparator</p></td>
                <td colspan="1" rowspan="1" class="confluenceTd"><p>string</p></td>
                <td colspan="1" rowspan="1" class="confluenceTd"><p>mandatory - can be '=' or ';' or 'anything'</p></td>
               </tr>
               <tr>
                <td colspan="1" rowspan="1" class="confluenceTd"><p>keyValuePairSeparair</p></td>
                <td colspan="1" rowspan="1" class="confluenceTd"><p>string</p></td>
                <td colspan="1" rowspan="1" class="confluenceTd"><p>mandatory - can be '\u0001', '\u0009', '#' or 'anything'</p></td>
               </tr>
               <tr>
                <td colspan="1" rowspan="1" class="confluenceTd"><p>crlf</p></td>
                <td colspan="1" rowspan="1" class="confluenceTd"><p>string</p></td>
                <td colspan="1" rowspan="1" class="confluenceTd"><p>optional - possible values = WINDOWS,UNIX,MAC, or custom; default value = WINDOWS - allow to define the carriage return character to use. If you specify a value other than the three listed before, the value you enter (custom) will be used as the CRLF character(s)</p></td>
               </tr>
               <tr>
                <td colspan="1" rowspan="1" class="confluenceTd"><p>type</p></td>
                <td colspan="1" rowspan="1" class="confluenceTd"><p>string</p></td>
                <td colspan="1" rowspan="1" class="confluenceTd"><p>optional - define the type of message (e.g. FIX, EMX, ...)</p></td>
               </tr>
               <tr>
                <td colspan="1" rowspan="1" class="confluenceTd"><p>version</p></td>
                <td colspan="1" rowspan="1" class="confluenceTd"><p>string</p></td>
                <td colspan="1" rowspan="1" class="confluenceTd"><p>optional - version of the message (e.g. 4.1)</p></td>
               </tr>
               <tr>
                <td colspan="1" rowspan="1" class="confluenceTd"><p>isOrdered</p></td>
                <td colspan="1" rowspan="1" class="confluenceTd"><p>boolean</p></td>
                <td colspan="1" rowspan="1" class="confluenceTd"><p>optional - default value = false - allow to change the order of the fields when FIX message is generated</p></td>
               </tr>
               <tr>
                <td colspan="1" rowspan="1" class="confluenceTd"><p>&nbsp;</p></td>
                <td colspan="1" rowspan="1" class="confluenceTd"><p>&nbsp;</p></td>
                <td colspan="1" rowspan="1" class="confluenceTd"><p>This annotation is associated to the message class of the model and must be declared one time.</p></td>
               </tr>
              </tbody>
             </table>
            </div>
            <p><strong>case 1 : separator = 'u0001'</strong></p>
            <p>The separator used to segregate the key value pair fields in a FIX message is the ASCII '01' character or in unicode format '\u0001'. This character must be escaped a second time to avoid a java runtime error. Here is an example :</p>
            <p>8=FIX.4.1 9=20 34=1 35=0 49=INVMGR 56=BRKR 1=BE.CHM.001 11=CHM0001-01 22=4 ...</p>
            <p>and how to use the annotation</p>
            <div class="code panel pdl" style="border-width: 1px;">
             <div class="codeHeader panelHeader pdl" style="border-bottom-width: 1px;">
              <b>FIX - message</b>
             </div>
             <div class="codeContent panelContent pdl"> 
              <script class="brush: java; gutter: false; theme: Default" type="syntaxhighlighter"><![CDATA[@Message(keyValuePairSeparator = &quot;=&quot;, pairSeparator = &quot;\u0001&quot;, type=&quot;FIX&quot;, version=&quot;4.1&quot;)
public class Order {
...
}
]]></script> 
             </div>
            </div>
            <div class="confluence-information-macro confluence-information-macro-note">
             <p class="title">Look at test cases</p>
             <span class="aui-icon aui-icon-small aui-iconfont-warning confluence-information-macro-icon"></span>
             <div class="confluence-information-macro-body">
              <p>The ASCII character like tab, ... cannot be displayed in WIKI page. So, have a look to the test case of camel-bindy to see exactly how the FIX message looks like (src\test\data\fix\fix.txt) and the Order, Trailer, Header classes (src\test\java\org\apache\camel\dataformat\bindy\model\fix\simple\Order.java)</p>
             </div>
            </div>
            <h3 id="BookDataFormatAppendix-6.KeyValuePairField">6. KeyValuePairField</h3>
            <p>The KeyValuePairField annotation defines the property of a key value pair field. Each KeyValuePairField is identified by a tag (= key) and its value associated, a type (string, int, date, ...), optionaly a pattern and if the field is required</p>
            <div class="table-wrap">
             <table class="confluenceTable">
              <tbody>
               <tr>
                <th colspan="1" rowspan="1" class="confluenceTh"><p>Annotation name</p></th>
                <th colspan="1" rowspan="1" class="confluenceTh"><p>Record type</p></th>
                <th colspan="1" rowspan="1" class="confluenceTh"><p>Level</p></th>
               </tr>
               <tr>
                <td colspan="1" rowspan="1" class="confluenceTd"><p><strong>KeyValuePairField</strong></p></td>
                <td colspan="1" rowspan="1" class="confluenceTd"><p>Key Value Pair - FIX</p></td>
                <td colspan="1" rowspan="1" class="confluenceTd"><p>Property</p></td>
               </tr>
              </tbody>
             </table>
            </div>
            <div class="table-wrap">
             <table class="confluenceTable">
              <tbody>
               <tr>
                <th colspan="1" rowspan="1" class="confluenceTh"><p>Parameter name</p></th>
                <th colspan="1" rowspan="1" class="confluenceTh"><p>type</p></th>
                <th colspan="1" rowspan="1" class="confluenceTh"><p>Info</p></th>
               </tr>
               <tr>
                <td colspan="1" rowspan="1" class="confluenceTd"><p>tag</p></td>
                <td colspan="1" rowspan="1" class="confluenceTd"><p>int</p></td>
                <td colspan="1" rowspan="1" class="confluenceTd"><p>mandatory - digit number identifying the field in the message - must be unique</p></td>
               </tr>
               <tr>
                <td colspan="1" rowspan="1" class="confluenceTd"><p>pattern</p></td>
                <td colspan="1" rowspan="1" class="confluenceTd"><p>string</p></td>
                <td colspan="1" rowspan="1" class="confluenceTd"><p>optional - default value = "" - will be used to format Decimal, Date, ...</p></td>
               </tr>
               <tr>
                <td colspan="1" rowspan="1" class="confluenceTd"><p>precision</p></td>
                <td colspan="1" rowspan="1" class="confluenceTd"><p>int</p></td>
                <td colspan="1" rowspan="1" class="confluenceTd"><p>optional - digit number - represents the precision to be used when the Decimal number will be formatted/parsed</p></td>
               </tr>
               <tr>
                <td colspan="1" rowspan="1" class="confluenceTd"><p>position</p></td>
                <td colspan="1" rowspan="1" class="confluenceTd"><p>int</p></td>
                <td colspan="1" rowspan="1" class="confluenceTd"><p>optional - must be used when the position of the key/tag in the FIX message must be different</p></td>
               </tr>
               <tr>
                <td colspan="1" rowspan="1" class="confluenceTd"><p>required</p></td>
                <td colspan="1" rowspan="1" class="confluenceTd"><p>boolean</p></td>
                <td colspan="1" rowspan="1" class="confluenceTd"><p>optional - default value = "false"</p></td>
               </tr>
               <tr>
                <td colspan="1" rowspan="1" class="confluenceTd"><p>impliedDecimalSeparator</p></td>
                <td colspan="1" rowspan="1" class="confluenceTd"><p>boolean</p></td>
                <td colspan="1" rowspan="1" class="confluenceTd"><p><strong>Camel 2.11:</strong> optional - default value = "false" - Indicates if there is a decimal point implied at a specified location</p></td>
               </tr>
              </tbody>
             </table>
            </div>
            <p><strong>case 1 : tag</strong></p>
            <p>This parameter represents the key of the field in the message</p>
            <div class="code panel pdl" style="border-width: 1px;">
             <div class="codeHeader panelHeader pdl" style="border-bottom-width: 1px;">
              <b>FIX message - Tag</b>
             </div>
             <div class="codeContent panelContent pdl"> 
              <script class="brush: java; gutter: false; theme: Default" type="syntaxhighlighter"><![CDATA[@Message(keyValuePairSeparator = &quot;=&quot;, pairSeparator = &quot;\u0001&quot;, type=&quot;FIX&quot;, version=&quot;4.1&quot;)
public class Order {

    @Link Header header;

    @Link Trailer trailer;

    @KeyValuePairField(tag = 1) // Client reference
    private String Account;

    @KeyValuePairField(tag = 11) // Order reference
    private String ClOrdId;

    @KeyValuePairField(tag = 22) // Fund ID type (Sedol, ISIN, ...)
    private String IDSource;

    @KeyValuePairField(tag = 48) // Fund code
    private String SecurityId;

    @KeyValuePairField(tag = 54) // Movement type ( 1 = Buy, 2 = sell)
    private String Side;

    @KeyValuePairField(tag = 58) // Free text
    private String Text;

...
}
]]></script> 
             </div>
            </div>
            <p><strong>case 2 : Different position in output</strong></p>
            <p>If the tags/keys that we will put in the FIX message must be sorted according to a predefine order, then use the attribute 'position' of the annotation @KeyValuePairField</p>
            <div class="code panel pdl" style="border-width: 1px;">
             <div class="codeHeader panelHeader pdl" style="border-bottom-width: 1px;">
              <b>FIX message - Tag - sort</b>
             </div>
             <div class="codeContent panelContent pdl"> 
              <script class="brush: java; gutter: false; theme: Default" type="syntaxhighlighter"><![CDATA[@Message(keyValuePairSeparator = &quot;=&quot;, pairSeparator = &quot;\\u0001&quot;, type = &quot;FIX&quot;, version = &quot;4.1&quot;, isOrdered = true)
public class Order {

    @Link Header header;

    @Link Trailer trailer;

    @KeyValuePairField(tag = 1, position = 1) // Client reference
    private String account;

    @KeyValuePairField(tag = 11, position = 3) // Order reference
    private String clOrdId;

...
}
]]></script> 
             </div>
            </div>
            <h3 id="BookDataFormatAppendix-7.Section">7. Section</h3>
            <p>In FIX message of fixed length records, it is common to have different sections in the representation of the information : header, body and section. The purpose of the annotation @Section is to inform bindy about which class of the model represents the header (= section 1), body (= section 2) and footer (= section 3)</p>
            <p>Only one attribute/parameter exists for this annotation.</p>
            <div class="table-wrap">
             <table class="confluenceTable">
              <tbody>
               <tr>
                <th colspan="1" rowspan="1" class="confluenceTh"><p>Annotation name</p></th>
                <th colspan="1" rowspan="1" class="confluenceTh"><p>Record type</p></th>
                <th colspan="1" rowspan="1" class="confluenceTh"><p>Level</p></th>
               </tr>
               <tr>
                <td colspan="1" rowspan="1" class="confluenceTd"><p><strong>Section</strong></p></td>
                <td colspan="1" rowspan="1" class="confluenceTd"><p>FIX</p></td>
                <td colspan="1" rowspan="1" class="confluenceTd"><p>Class</p></td>
               </tr>
              </tbody>
             </table>
            </div>
            <div class="table-wrap">
             <table class="confluenceTable">
              <tbody>
               <tr>
                <th colspan="1" rowspan="1" class="confluenceTh"><p>Parameter name</p></th>
                <th colspan="1" rowspan="1" class="confluenceTh"><p>type</p></th>
                <th colspan="1" rowspan="1" class="confluenceTh"><p>Info</p></th>
               </tr>
               <tr>
                <td colspan="1" rowspan="1" class="confluenceTd"><p>number</p></td>
                <td colspan="1" rowspan="1" class="confluenceTd"><p>int</p></td>
                <td colspan="1" rowspan="1" class="confluenceTd"><p>digit number identifying the section position</p></td>
               </tr>
              </tbody>
             </table>
            </div>
            <p><strong>case 1 : Section</strong></p>
            <p>A. Definition of the header section</p>
            <div class="code panel pdl" style="border-width: 1px;">
             <div class="codeHeader panelHeader pdl" style="border-bottom-width: 1px;">
              <b>FIX message - Section - Header</b>
             </div>
             <div class="codeContent panelContent pdl"> 
              <script class="brush: java; gutter: false; theme: Default" type="syntaxhighlighter"><![CDATA[@Section(number = 1)
public class Header {

    @KeyValuePairField(tag = 8, position = 1) // Message Header
    private String beginString;

    @KeyValuePairField(tag = 9, position = 2) // Checksum
    private int bodyLength;
...
}
]]></script> 
             </div>
            </div>
            <p>B. Definition of the body section</p>
            <div class="code panel pdl" style="border-width: 1px;">
             <div class="codeHeader panelHeader pdl" style="border-bottom-width: 1px;">
              <b>FIX message - Section - Body</b>
             </div>
             <div class="codeContent panelContent pdl"> 
              <script class="brush: java; gutter: false; theme: Default" type="syntaxhighlighter"><![CDATA[@Section(number = 2)
@Message(keyValuePairSeparator = &quot;=&quot;, pairSeparator = &quot;\\u0001&quot;, type = &quot;FIX&quot;, version = &quot;4.1&quot;, isOrdered = true)
public class Order {

    @Link Header header;

    @Link Trailer trailer;

    @KeyValuePairField(tag = 1, position = 1) // Client reference
    private String account;

    @KeyValuePairField(tag = 11, position = 3) // Order reference
    private String clOrdId;
]]></script> 
             </div>
            </div>
            <p>C. Definition of the footer section</p>
            <div class="code panel pdl" style="border-width: 1px;">
             <div class="codeHeader panelHeader pdl" style="border-bottom-width: 1px;">
              <b>FIX message - Section - Footer</b>
             </div>
             <div class="codeContent panelContent pdl"> 
              <script class="brush: java; gutter: false; theme: Default" type="syntaxhighlighter"><![CDATA[@Section(number = 3)
public class Trailer {

    @KeyValuePairField(tag = 10, position = 1)
    // CheckSum
    private int checkSum;

    public int getCheckSum() {
        return checkSum;
    }
]]></script> 
             </div>
            </div>
            <h3 id="BookDataFormatAppendix-8.OneToMany">8. OneToMany</h3>
            <p>The purpose of the annotation @OneToMany is to allow to work with a List&lt;?&gt; field defined a POJO class or from a record containing repetitive groups.</p>
            <div class="confluence-information-macro confluence-information-macro-note">
             <p class="title">Restrictions OneToMany</p>
             <span class="aui-icon aui-icon-small aui-iconfont-warning confluence-information-macro-icon"></span>
             <div class="confluence-information-macro-body">
              <p>Be careful, the one to many of bindy does not allow to handle repetitions defined on several levels of the hierarchy</p>
             </div>
            </div>
            <p>The relation OneToMany ONLY WORKS in the following cases :</p>
            <ul class="alternate">
             <li>Reading a FIX message containing repetitive groups (= group of tags/keys)</li>
             <li>Generating a CSV with repetitive data</li>
            </ul>
            <div class="table-wrap">
             <table class="confluenceTable">
              <tbody>
               <tr>
                <th colspan="1" rowspan="1" class="confluenceTh"><p>Annotation name</p></th>
                <th colspan="1" rowspan="1" class="confluenceTh"><p>Record type</p></th>
                <th colspan="1" rowspan="1" class="confluenceTh"><p>Level</p></th>
               </tr>
               <tr>
                <td colspan="1" rowspan="1" class="confluenceTd"><p><strong>OneToMany</strong></p></td>
                <td colspan="1" rowspan="1" class="confluenceTd"><p>all</p></td>
                <td colspan="1" rowspan="1" class="confluenceTd"><p>property</p></td>
               </tr>
              </tbody>
             </table>
            </div>
            <div class="table-wrap">
             <table class="confluenceTable">
              <tbody>
               <tr>
                <th colspan="1" rowspan="1" class="confluenceTh"><p>Parameter name</p></th>
                <th colspan="1" rowspan="1" class="confluenceTh"><p>type</p></th>
                <th colspan="1" rowspan="1" class="confluenceTh"><p>Info</p></th>
               </tr>
               <tr>
                <td colspan="1" rowspan="1" class="confluenceTd"><p>mappedTo</p></td>
                <td colspan="1" rowspan="1" class="confluenceTd"><p>string</p></td>
                <td colspan="1" rowspan="1" class="confluenceTd"><p>optional - string - class name associated to the type of the List&lt;Type of the Class&gt;</p></td>
               </tr>
              </tbody>
             </table>
            </div>
            <p><strong>case 1 : Generating CSV with repetitive data</strong></p>
            <p>Here is the CSV output that we want :</p>
            <p>Claus,Ibsen,Camel in Action 1,2010,35<br clear="none"> Claus,Ibsen,Camel in Action 2,2012,35<br clear="none"> Claus,Ibsen,Camel in Action 3,2013,35<br clear="none"> Claus,Ibsen,Camel in Action 4,2014,35</p>
            <p>Remark : the repetitive data concern the title of the book and its publication date while first, last name and age are common</p>
            <p>and the classes used to modeling this. The Author class contains a List of Book.</p>
            <div class="code panel pdl" style="border-width: 1px;">
             <div class="codeHeader panelHeader pdl" style="border-bottom-width: 1px;">
              <b>Generate CSV with repetitive data</b>
             </div>
             <div class="codeContent panelContent pdl"> 
              <script class="brush: java; gutter: false; theme: Default" type="syntaxhighlighter"><![CDATA[@CsvRecord(separator=&quot;,&quot;)
public class Author {

	@DataField(pos = 1)
	private String firstName;

	@DataField(pos = 2)
	private String lastName;

	@OneToMany
	private List&lt;Book&gt; books;

	@DataField(pos = 5)
	private String Age;
...


public class Book {

	@DataField(pos = 3)
	private String title;

	@DataField(pos = 4)
	private String year;
]]></script> 
             </div>
            </div>
            <p>Very simple isn't it !!!</p>
            <p><strong>case 2 : Reading FIX message containing group of tags/keys</strong></p>
            <p>Here is the message that we would like to process in our model :</p>
            <p>"8=FIX 4.19=2034=135=049=INVMGR56=BRKR"<br clear="none"> "1=BE.CHM.00111=CHM0001-0158=this is a camel - bindy test"<br clear="none"> "22=448=BE000124567854=1"<br clear="none"> "22=548=BE000987654354=2"<br clear="none"> "22=648=BE000999999954=3"<br clear="none"> "10=220"</p>
            <p>tags 22, 48 and 54 are repeated</p>
            <p>and the code</p>
            <div class="code panel pdl" style="border-width: 1px;">
             <div class="codeHeader panelHeader pdl" style="border-bottom-width: 1px;">
              <b>Reading FIX message containing group of tags/keys</b>
             </div>
             <div class="codeContent panelContent pdl"> 
              <script class="brush: java; gutter: false; theme: Default" type="syntaxhighlighter"><![CDATA[public class Order {

    @Link Header header;

    @Link Trailer trailer;

    @KeyValuePairField(tag = 1) // Client reference
    private String account;

    @KeyValuePairField(tag = 11) // Order reference
    private String clOrdId;

    @KeyValuePairField(tag = 58) // Free text
    private String text;

    @OneToMany(mappedTo = &quot;org.apache.camel.dataformat.bindy.model.fix.complex.onetomany.Security&quot;)
    List&lt;Security&gt; securities;
...

public class Security {

    @KeyValuePairField(tag = 22) // Fund ID type (Sedol, ISIN, ...)
    private String idSource;

    @KeyValuePairField(tag = 48) // Fund code
    private String securityCode;

    @KeyValuePairField(tag = 54) // Movement type ( 1 = Buy, 2 = sell)
    private String side;

]]></script> 
             </div>
            </div>
            <h3 id="BookDataFormatAppendix-UsingtheJavaDSL.2">Using the Java DSL</h3>
            <p>The next step consists in instantiating the DataFormat <em>bindy</em> class associated with this record type and providing Java package name(s) as parameter.</p>
            <p>For example the following uses the class <code>BindyCsvDataFormat</code> (who correspond to the class associated with the CSV record type) which is configured with "com.acme.model"<br clear="none"> package name to initialize the model objects configured in this package.</p>
            <div class="code panel pdl" style="border-width: 1px;">
             <div class="codeContent panelContent pdl"> 
              <script class="brush: java; gutter: false; theme: Default" type="syntaxhighlighter"><![CDATA[// Camel 2.15 or older (configure by package name)
DataFormat bindy = new BindyCsvDataFormat(&quot;com.acme.model&quot;);


// Camel 2.16 onwards (configure by class name)
DataFormat bindy = new BindyCsvDataFormat(com.acme.model.MyModel.class);]]></script> 
             </div>
            </div>
            <h4 id="BookDataFormatAppendix-Settinglocale">Setting locale</h4>
            <p>Bindy supports configuring the locale on the dataformat, such as&nbsp;</p>
            <div class="code panel pdl" style="border-width: 1px;">
             <div class="codeContent panelContent pdl"> 
              <script class="brush: java; gutter: false; theme: Default" type="syntaxhighlighter"><![CDATA[// Camel 2.15 or older (configure by package name)
BindyCsvDataFormat bindy = new BindyCsvDataFormat(&quot;com.acme.model&quot;);
// Camel 2.16 onwards (configure by class name)
BindyCsvDataFormat bindy = new BindyCsvDataFormat(com.acme.model.MyModel.class);

bindy.setLocale(&quot;us&quot;);]]></script> 
             </div>
            </div>
            <p>Or to use the platform default locale then use "default" as the locale name. Notice this requires Camel 2.14/2.13.3/2.12.5.</p>
            <div class="code panel pdl" style="border-width: 1px;">
             <div class="codeContent panelContent pdl"> 
              <script class="brush: java; gutter: false; theme: Default" type="syntaxhighlighter"><![CDATA[// Camel 2.15 or older (configure by package name)
BindyCsvDataFormat bindy = new BindyCsvDataFormat(&quot;com.acme.model&quot;);
// Camel 2.16 onwards (configure by class name)
BindyCsvDataFormat bindy = new BindyCsvDataFormat(com.acme.model.MyModel.class);

bindy.setLocale(&quot;default&quot;);]]></script> 
             </div>
            </div>
            <p>for older releases you can set it using Java code as shown</p>
            <div class="code panel pdl" style="border-width: 1px;">
             <div class="codeContent panelContent pdl"> 
              <script class="brush: java; gutter: false; theme: Default" type="syntaxhighlighter"><![CDATA[// Camel 2.15 or older (configure by package name)
BindyCsvDataFormat bindy = new BindyCsvDataFormat(&quot;com.acme.model&quot;);
// Camel 2.16 onwards (configure by class name)
BindyCsvDataFormat bindy = new BindyCsvDataFormat(com.acme.model.MyModel.class);


bindy.setLocale(Locale.getDefault().getISO3Country());]]></script> 
             </div>
            </div>
            <h4 id="BookDataFormatAppendix-Unmarshaling">Unmarshaling</h4>
            <div class="code panel pdl" style="border-width: 1px;">
             <div class="codeContent panelContent pdl"> 
              <script class="brush: java; gutter: false; theme: Default" type="syntaxhighlighter"><![CDATA[from(&quot;file://inbox&quot;)
  .unmarshal(bindy)
  .to(&quot;direct:handleOrders&quot;);
]]></script> 
             </div>
            </div>
            <p>Alternatively, you can use a named reference to a data format which can then be defined in your <a shape="rect" href="registry.html">Registry</a> e.g. your <a shape="rect" href="spring.html">Spring</a> XML file:</p>
            <div class="code panel pdl" style="border-width: 1px;">
             <div class="codeContent panelContent pdl"> 
              <script class="brush: java; gutter: false; theme: Default" type="syntaxhighlighter"><![CDATA[from(&quot;file://inbox&quot;)
  .unmarshal(&quot;myBindyDataFormat&quot;)
  .to(&quot;direct:handleOrders&quot;);
]]></script> 
             </div>
            </div>
            <p>The Camel route will pick-up files in the inbox directory, unmarshall CSV records into a collection of model objects and send the collection<br clear="none"> to the route referenced by 'handleOrders'.</p>
            <p>The collection returned is a <strong>List of Map</strong> objects. Each Map within the list contains the model objects that were marshalled out of each line of the CSV. The reason behind this is that <em>each line can correspond to more than one object</em>. This can be confusing when you simply expect one object to be returned per line.</p>
            <p>Each object can be retrieve using its class name.</p>
            <div class="code panel pdl" style="border-width: 1px;">
             <div class="codeContent panelContent pdl"> 
              <script class="brush: java; gutter: false; theme: Default" type="syntaxhighlighter"><![CDATA[    List&lt;Map&lt;String, Object&gt;&gt; unmarshaledModels = (List&lt;Map&lt;String, Object&gt;&gt;) exchange.getIn().getBody();

    int modelCount = 0;
    for (Map&lt;String, Object&gt; model : unmarshaledModels) {
	  for (String className : model.keySet()) {
	     Object obj = model.get(className);
	     LOG.info(&quot;Count : &quot; + modelCount + &quot;, &quot; + obj.toString());
	  }
	 modelCount++;
    }

    LOG.info(&quot;Total CSV records received by the csv bean : &quot; + modelCount);
]]></script> 
             </div>
            </div>
            <p>Assuming that you want to extract a single Order object from this map for processing in a route, you could use a combination of a <a shape="rect" href="splitter.html">Splitter</a> and a <a shape="rect" href="processor.html">Processor</a> as per the following:</p>
            <div class="code panel pdl" style="border-width: 1px;">
             <div class="codeContent panelContent pdl"> 
              <script class="brush: java; gutter: false; theme: Default" type="syntaxhighlighter"><![CDATA[from(&quot;file://inbox&quot;)
    .unmarshal(bindy)
    .split(body())
        .process(new Processor() {
            public void process(Exchange exchange) throws Exception {
                Message in = exchange.getIn();
                Map&lt;String, Object&gt; modelMap = (Map&lt;String, Object&gt;) in.getBody();
                in.setBody(modelMap.get(Order.class.getCanonicalName()));
            }
        })
        .to(&quot;direct:handleSingleOrder&quot;)
    .end();
]]></script> 
             </div>
            </div>
            <p>Take care of the fact that Bindy uses CHARSET_NAME property or the CHARSET_NAME header as define in the Exchange interface to do a characterset conversion of the inputstream received for unmarshalling. In some producers (e.g. file-endpoint) you can define a characterset. The characterset conversion can already been done by this producer. Sometimes you need to remove this property or header from the exchange before sending it to the unmarshal. If you don't remove it the conversion might be done twice which might lead to unwanted results.</p>
            <div class="code panel pdl" style="border-width: 1px;">
             <div class="codeContent panelContent pdl"> 
              <script class="brush: java; gutter: false; theme: Default" type="syntaxhighlighter"><![CDATA[from(&quot;file://inbox?charset=Cp922&quot;)
  .removeProperty(Exchange.CHARSET_NAME)
  .unmarshal(&quot;myBindyDataFormat&quot;)
  .to(&quot;direct:handleOrders&quot;);]]></script> 
             </div>
            </div>
            <h4 id="BookDataFormatAppendix-Marshaling">Marshaling</h4>
            <p>To generate CSV records from a collection of model objects, you create the following route :</p>
            <div class="code panel pdl" style="border-width: 1px;">
             <div class="codeContent panelContent pdl"> 
              <script class="brush: java; gutter: false; theme: Default" type="syntaxhighlighter"><![CDATA[from(&quot;direct:handleOrders&quot;)
   .marshal(bindy)
   .to(&quot;file://outbox&quot;)
]]></script> 
             </div>
            </div>
            <h3 id="BookDataFormatAppendix-UsingSpringXML.2">Using Spring XML</h3>
            <p>This is really easy to use Spring as your favorite DSL language to declare the routes to be used for camel-bindy. The following example shows two routes where the first will pick-up records from files, unmarshal the content and bind it to their model. The result is then send to a pojo (doing nothing special) and place them into a queue.</p>
            <p>The second route will extract the pojos from the queue and marshal the content to generate a file containing the csv record. The example above is for using Camel 2.16 onwards.</p>
            <div class="code panel pdl" style="border-width: 1px;">
             <div class="codeHeader panelHeader pdl" style="border-bottom-width: 1px;">
              <b>spring dsl</b>
             </div>
             <div class="codeContent panelContent pdl"> 
              <script class="brush: java; gutter: false; theme: Default" type="syntaxhighlighter"><![CDATA[&lt;?xml version=&quot;1.0&quot; encoding=&quot;UTF-8&quot;?&gt;

&lt;beans xmlns=&quot;http://www.springframework.org/schema/beans&quot;
	xmlns:xsi=&quot;http://www.w3.org/2001/XMLSchema-instance&quot;
	xsi:schemaLocation=&quot;
       http://www.springframework.org/schema/beans
       http://www.springframework.org/schema/beans/spring-beans.xsd
       http://camel.apache.org/schema/spring
       http://camel.apache.org/schema/spring/camel-spring.xsd&quot;&gt;

        &lt;!-- Queuing engine - ActiveMq - work locally in mode virtual memory --&gt;
	&lt;bean id=&quot;activemq&quot; class=&quot;org.apache.activemq.camel.component.ActiveMQComponent&quot;&gt;
		&lt;property name=&quot;brokerURL&quot; value=&quot;vm://localhost:61616&quot;/&gt;
	&lt;/bean&gt;


	&lt;camelContext xmlns=&quot;http://camel.apache.org/schema/spring&quot;&gt;


        &lt;dataFormats&gt;
          &lt;bindy id=&quot;bindyDataformat&quot; type=&quot;Csv&quot; classType=&quot;org.apache.camel.bindy.model.Order&quot;/&gt;
        &lt;/dataFormats&gt;

		&lt;route&gt;
			&lt;from uri=&quot;file://src/data/csv/?noop=true&quot; /&gt;
			&lt;unmarshal ref=&quot;bindyDataformat&quot; /&gt;
			&lt;to uri=&quot;bean:csv&quot; /&gt;
			&lt;to uri=&quot;activemq:queue:in&quot; /&gt;
		&lt;/route&gt;

		&lt;route&gt;
			&lt;from uri=&quot;activemq:queue:in&quot; /&gt;
			&lt;marshal ref=&quot;bindyDataformat&quot; /&gt;
			&lt;to uri=&quot;file://src/data/csv/out/&quot; /&gt;
		&lt;/route&gt;
	&lt;/camelContext&gt;
&lt;/beans&gt;
]]></script> 
             </div>
            </div>
            <div class="confluence-information-macro confluence-information-macro-note">
             <p class="title">Be careful</p>
             <span class="aui-icon aui-icon-small aui-iconfont-warning confluence-information-macro-icon"></span>
             <div class="confluence-information-macro-body">
              <p>Please verify that your model classes implements serializable otherwise the queue manager will raise an error</p>
             </div>
            </div>
            <h3 id="BookDataFormatAppendix-Dependencies.8">Dependencies</h3>
            <p>To use Bindy in your camel routes you need to add the a dependency on <strong>camel-bindy</strong> which implements this data format.</p>
            <p>If you use maven you could just add the following to your pom.xml, substituting the version number for the latest &amp; greatest release (see <a shape="rect" href="download.html">the download page for the latest versions</a>).</p>
            <div class="code panel pdl" style="border-width: 1px;">
             <div class="codeContent panelContent pdl"> 
              <script class="brush: java; gutter: false; theme: Default" type="syntaxhighlighter"><![CDATA[&lt;dependency&gt;
  &lt;groupId&gt;org.apache.camel&lt;/groupId&gt;
  &lt;artifactId&gt;camel-bindy&lt;/artifactId&gt;
  &lt;version&gt;x.x.x&lt;/version&gt;
&lt;/dependency&gt;
]]></script> 
             </div>
            </div> 
            <h2 id="BookDataFormatAppendix-XMLSecurityDataFormat">XMLSecurity Data Format</h2>
            <p>The XMLSecurity Data Format facilitates encryption and decryption of XML payloads at the Document, Element, and Element Content levels (including simultaneous multi-node encryption/decryption using XPath). To sign messages using the XML Signature specification, please see the Camel XML Security <a shape="rect" href="xml-security-component.html">component</a>.</p>
            <p>The encryption capability is based on formats supported using the Apache XML Security (Santuario) project. Symmetric encryption/decryption is currently supported using Triple-DES and AES (128, 192, and 256) encryption formats. Additional formats can be easily added later as needed. This capability allows Camel users to encrypt/decrypt payloads while being dispatched or received along a route.</p>
            <p><strong>Available as of Camel 2.9</strong><br clear="none"> The XMLSecurity Data Format supports asymmetric key encryption. In this encryption model a symmetric key is generated and used to perform XML content encryption or decryption. This "content encryption key" is then itself encrypted using an asymmetric encryption algorithm that leverages the recipient's public key as the "key encryption key". Use of an asymmetric key encryption algorithm ensures that only the holder of the recipient's private key can access the generated symmetric encryption key. Thus, only the private key holder can decode the message. The XMLSecurity Data Format handles all of the logic required to encrypt and decrypt the message content and encryption key(s) using asymmetric key encryption.</p>
            <p>The XMLSecurity Data Format also has improved support for namespaces when processing the XPath queries that select content for encryption. A namespace definition mapping can be included as part of the data format configuration. This enables true namespace matching, even if the prefix values in the XPath query and the target xml document are not equivalent strings.</p>
            <h3 id="BookDataFormatAppendix-BasicOptions">Basic Options</h3>
            <div class="table-wrap">
             <table class="confluenceTable">
              <tbody>
               <tr>
                <th colspan="1" rowspan="1" class="confluenceTh"><p>Option</p></th>
                <th colspan="1" rowspan="1" class="confluenceTh"><p>Default</p></th>
                <th colspan="1" rowspan="1" class="confluenceTh"><p>Description</p></th>
               </tr>
               <tr>
                <td colspan="1" rowspan="1" class="confluenceTd"><p><code>secureTag</code></p></td>
                <td colspan="1" rowspan="1" class="confluenceTd"><p><code>null</code></p></td>
                <td colspan="1" rowspan="1" class="confluenceTd"><p>The XPath reference to the XML Element selected for encryption/decryption. If no tag is specified, the entire payload is encrypted/decrypted.</p></td>
               </tr>
               <tr>
                <td colspan="1" rowspan="1" class="confluenceTd"><p><code>secureTagContents</code></p></td>
                <td colspan="1" rowspan="1" class="confluenceTd"><p><code>false</code></p></td>
                <td colspan="1" rowspan="1" class="confluenceTd"><p>A boolean value to specify whether the XML Element is to be encrypted or the contents of the XML Element</p>
                 <ul>
                  <li><code>false</code> = Element Level</li>
                  <li><code>true</code> = Element Content Level</li>
                 </ul></td>
               </tr>
               <tr>
                <td colspan="1" rowspan="1" class="confluenceTd"><p><code>passPhrase</code></p></td>
                <td colspan="1" rowspan="1" class="confluenceTd"><p><code>null</code></p></td>
                <td colspan="1" rowspan="1" class="confluenceTd"><p>A String used as passPhrase to encrypt/decrypt content. The passPhrase has to be provided. If no passPhrase is specified, a default passPhrase is used. The passPhrase needs to be put together in conjunction with the appropriate encryption algorithm. For example using <code>TRIPLEDES</code> the passPhase can be a <code>"Only another 24 Byte key"</code></p></td>
               </tr>
               <tr>
                <td colspan="1" rowspan="1" class="confluenceTd"><p><code>xmlCipherAlgorithm</code></p></td>
                <td colspan="1" rowspan="1" class="confluenceTd"><p><code>TRIPLEDES</code></p></td>
                <td colspan="1" rowspan="1" class="confluenceTd"><p>The cipher algorithm to be used for encryption/decryption of the XML message content. The available choices are:</p>
                 <ul>
                  <li><code>XMLCipher.TRIPLEDES</code></li>
                  <li><code>XMLCipher.AES_128</code></li>
                  <li><code>XMLCipher.AES_128_GCM</code> <strong>Camel 2.12</strong></li>
                  <li><code>XMLCipher.AES_192</code></li>
                  <li><code>XMLCipher.AES_192_GCM</code> <strong>Camel 2.12</strong></li>
                  <li><code>XMLCipher.AES_256</code></li>
                  <li><code>XMLCipher.AES_256_GCM</code> <strong>Camel 2.12</strong></li>
                  <li>XMLCipher.SEED_128 <strong>Camel 2.15</strong></li>
                  <li>XMLCipher.CAMELLIA_128, XMLCipher.CAMELLIA_192, XMLCipher.CAMELLIA_256 <strong>Camel 2.15</strong></li>
                 </ul></td>
               </tr>
               <tr>
                <td colspan="1" rowspan="1" class="confluenceTd"><p><code>namespaces</code></p></td>
                <td colspan="1" rowspan="1" class="confluenceTd"><p><code>null</code></p></td>
                <td colspan="1" rowspan="1" class="confluenceTd"><p>A map of namespace values indexed by prefix. The index values must match the prefixes used in the <code>secureTag</code> XPath query.</p></td>
               </tr>
              </tbody>
             </table>
            </div>
            <h3 id="BookDataFormatAppendix-AsymmetricEncryptionOptions">Asymmetric Encryption Options</h3>
            <p>These options can be applied in addition to relevant the Basic options to use asymmetric key encryption.</p>
            <div class="table-wrap">
             <table class="confluenceTable">
              <tbody>
               <tr>
                <th colspan="1" rowspan="1" class="confluenceTh"><p>Option</p></th>
                <th colspan="1" rowspan="1" class="confluenceTh"><p>Default</p></th>
                <th colspan="1" rowspan="1" class="confluenceTh"><p>Description</p></th>
               </tr>
               <tr>
                <td colspan="1" rowspan="1" class="confluenceTd"><p><code>recipientKeyAlias</code></p></td>
                <td colspan="1" rowspan="1" class="confluenceTd"><p><code>null</code></p></td>
                <td colspan="1" rowspan="1" class="confluenceTd"><p>The key alias to be used when retrieving the recipient's public or private key from a KeyStore when performing asymmetric key encryption or decryption.</p></td>
               </tr>
               <tr>
                <td colspan="1" rowspan="1" class="confluenceTd"><p><code>keyCipherAlgorithm</code></p></td>
                <td colspan="1" rowspan="1" class="confluenceTd"><p><strong>Camel 2.12</strong> <code>XMLCipher.RSA_OAEP</code></p></td>
                <td colspan="1" rowspan="1" class="confluenceTd"><p>The cipher algorithm to be used for encryption/decryption of the asymmetric key. The available choices are:</p>
                 <ul>
                  <li><code>XMLCipher.RSA_v1dot5</code></li>
                  <li><code>XMLCipher.RSA_OAEP</code></li>
                  <li><code>XMLCipher.RSA_OAEP_11</code></li>
                 </ul></td>
               </tr>
               <tr>
                <td colspan="1" rowspan="1" class="confluenceTd"><p><code>keyOrTrustStoreParameters</code></p></td>
                <td colspan="1" rowspan="1" class="confluenceTd"><p><code>null</code></p></td>
                <td colspan="1" rowspan="1" class="confluenceTd"><p>Configuration options for creating and loading a KeyStore instance that represents the sender's trustStore or recipient's keyStore.</p></td>
               </tr>
               <tr>
                <td colspan="1" rowspan="1" class="confluenceTd"><p><code>keyPassword</code></p></td>
                <td colspan="1" rowspan="1" class="confluenceTd"><p><code>null</code></p></td>
                <td colspan="1" rowspan="1" class="confluenceTd"><p><strong>Camel 2.10.2 / 2.11:</strong> The password to be used for retrieving the private key from the KeyStore. This key is used for asymmetric decryption.</p></td>
               </tr>
               <tr>
                <td colspan="1" rowspan="1" class="confluenceTd"><p><code>digestAlgorithm</code></p></td>
                <td colspan="1" rowspan="1" class="confluenceTd"><p>XMLCipher.SHA1</p></td>
                <td colspan="1" rowspan="1" class="confluenceTd"><p><strong>Camel 2.12</strong> The digest algorithm to use with the RSA OAEP algorithm. The available choices are:</p>
                 <ul>
                  <li><code>XMLCipher.SHA1</code></li>
                  <li><code>XMLCipher.SHA256</code></li>
                  <li><code>XMLCipher.SHA512</code></li>
                 </ul></td>
               </tr>
               <tr>
                <td colspan="1" rowspan="1" class="confluenceTd"><p><code>mgfAlgorithm</code></p></td>
                <td colspan="1" rowspan="1" class="confluenceTd"><p>EncryptionConstants.MGF1_SHA1</p></td>
                <td colspan="1" rowspan="1" class="confluenceTd"><p><strong>Camel 2.12</strong> The MGF Algorithm to use with the RSA OAEP algorithm. The available choices are:</p>
                 <ul>
                  <li><code>EncryptionConstants.MGF1_SHA1</code></li>
                  <li><code>EncryptionConstants.MGF1_SHA256</code></li>
                  <li><code>EncryptionConstants.MGF1_SHA512</code></li>
                 </ul></td>
               </tr>
               <tr>
                <td colspan="1" rowspan="1" class="confluenceTd">addKeyValueForEncryptedKey</td>
                <td colspan="1" rowspan="1" class="confluenceTd">true</td>
                <td colspan="1" rowspan="1" class="confluenceTd"><strong>Camel 2.14.1 </strong>Whether to add the public key used to encrypt the session key as a KeyValue in the EncryptedKey structure or not.</td>
               </tr>
              </tbody>
             </table>
            </div>
            <h4 id="BookDataFormatAppendix-KeyCipherAlgorithm">Key Cipher Algorithm</h4>
            <p>As of Camel 2.12.0, the default Key Cipher Algorithm is now XMLCipher.RSA_OAEP instead of XMLCipher.RSA_v1dot5. Usage of XMLCipher.RSA_v1dot5 is discouraged due to various attacks. Requests that use RSA v1.5 as the key cipher algorithm will be rejected unless it has been explicitly configured as the key cipher algorithm.</p>
            <h3 id="BookDataFormatAppendix-Marshal.2">Marshal</h3>
            <p>In order to encrypt the payload, the <code>marshal</code> processor needs to be applied on the route followed by the <strong><code>secureXML()</code></strong> tag.</p>
            <h3 id="BookDataFormatAppendix-Unmarshal.2">Unmarshal</h3>
            <p>In order to decrypt the payload, the <code>unmarshal</code> processor needs to be applied on the route followed by the <strong><code>secureXML()</code></strong> tag.</p>
            <h3 id="BookDataFormatAppendix-Examples">Examples</h3>
            <p>Given below are several examples of how marshalling could be performed at the Document, Element, and Content levels.</p>
            <h4 id="BookDataFormatAppendix-FullPayloadencryption/decryption">Full Payload encryption/decryption</h4>
            <div class="code panel pdl" style="border-width: 1px;">
             <div class="codeContent panelContent pdl"> 
              <script class="brush: java; gutter: false; theme: Default" type="syntaxhighlighter"><![CDATA[from(&quot;direct:start&quot;)
    .marshal().secureXML()
    .unmarshal().secureXML()
    .to(&quot;direct:end&quot;);
]]></script> 
             </div>
            </div>
            <h4 id="BookDataFormatAppendix-PartialPayloadContentOnlyencryption/decryption">Partial Payload Content Only encryption/decryption</h4>
            <div class="code panel pdl" style="border-width: 1px;">
             <div class="codeContent panelContent pdl"> 
              <script class="brush: java; gutter: false; theme: Default" type="syntaxhighlighter"><![CDATA[String tagXPATH = &quot;//cheesesites/italy/cheese&quot;;
boolean secureTagContent = true;
...
from(&quot;direct:start&quot;)
    .marshal().secureXML(tagXPATH, secureTagContent)
    .unmarshal().secureXML(tagXPATH, secureTagContent)
    .to(&quot;direct:end&quot;);
]]></script> 
             </div>
            </div>
            <h4 id="BookDataFormatAppendix-PartialMultiNodePayloadContentOnlyencryption/decryption">Partial Multi Node Payload Content Only encryption/decryption</h4>
            <div class="code panel pdl" style="border-width: 1px;">
             <div class="codeContent panelContent pdl"> 
              <script class="brush: java; gutter: false; theme: Default" type="syntaxhighlighter"><![CDATA[String tagXPATH = &quot;//cheesesites/*/cheese&quot;;
boolean secureTagContent = true;
...
from(&quot;direct:start&quot;)
    .marshal().secureXML(tagXPATH, secureTagContent)
    .unmarshal().secureXML(tagXPATH, secureTagContent)
    .to(&quot;direct:end&quot;);
]]></script> 
             </div>
            </div>
            <h4 id="BookDataFormatAppendix-PartialPayloadContentOnlyencryption/decryptionwithchoiceofpassPhrase(password)">Partial Payload Content Only encryption/decryption with choice of passPhrase(password)</h4>
            <div class="code panel pdl" style="border-width: 1px;">
             <div class="codeContent panelContent pdl"> 
              <script class="brush: java; gutter: false; theme: Default" type="syntaxhighlighter"><![CDATA[String tagXPATH = &quot;//cheesesites/italy/cheese&quot;;
boolean secureTagContent = true;
...
String passPhrase = &quot;Just another 24 Byte key&quot;;
from(&quot;direct:start&quot;)
    .marshal().secureXML(tagXPATH, secureTagContent, passPhrase)
    .unmarshal().secureXML(tagXPATH, secureTagContent, passPhrase)
    .to(&quot;direct:end&quot;);
]]></script> 
             </div>
            </div>
            <h4 id="BookDataFormatAppendix-PartialPayloadContentOnlyencryption/decryptionwithpassPhrase(password)andAlgorithm">Partial Payload Content Only encryption/decryption with passPhrase(password) and Algorithm</h4>
            <div class="code panel pdl" style="border-width: 1px;">
             <div class="codeContent panelContent pdl"> 
              <script class="brush: java; gutter: false; theme: Default" type="syntaxhighlighter"><![CDATA[import org.apache.xml.security.encryption.XMLCipher;
....
String tagXPATH = &quot;//cheesesites/italy/cheese&quot;;
boolean secureTagContent = true;
String passPhrase = &quot;Just another 24 Byte key&quot;;
String algorithm= XMLCipher.TRIPLEDES;
from(&quot;direct:start&quot;)
    .marshal().secureXML(tagXPATH, secureTagContent, passPhrase, algorithm)
    .unmarshal().secureXML(tagXPATH, secureTagContent, passPhrase, algorithm)
    .to(&quot;direct:end&quot;);
]]></script> 
             </div>
            </div>
            <h4 id="BookDataFormatAppendix-PartialPayloadContentwithNamespacesupport">Partial Payload Content with Namespace support</h4>
            <h5 id="BookDataFormatAppendix-JavaDSL">Java DSL</h5>
            <div class="code panel pdl" style="border-width: 1px;">
             <div class="codeContent panelContent pdl"> 
              <script class="brush: java; gutter: false; theme: Default" type="syntaxhighlighter"><![CDATA[final Map&lt;String, String&gt; namespaces = new HashMap&lt;String, String&gt;();
namespaces.put(&quot;cust&quot;, &quot;http://cheese.xmlsecurity.camel.apache.org/&quot;);

final KeyStoreParameters tsParameters = new KeyStoreParameters();
tsParameters.setPassword(&quot;password&quot;);
tsParameters.setResource(&quot;sender.ts&quot;);

context.addRoutes(new RouteBuilder() {
    public void configure() {
        from(&quot;direct:start&quot;)
           .marshal().secureXML(&quot;//cust:cheesesites/italy&quot;, namespaces, true, &quot;recipient&quot;,
                                testCypherAlgorithm, XMLCipher.RSA_v1dot5, tsParameters)
           .to(&quot;mock:encrypted&quot;);
    }
}
]]></script> 
             </div>
            </div>
            <h5 id="BookDataFormatAppendix-SpringXML">Spring XML</h5>
            <p>A namespace prefix that is defined as part of the <code>camelContext</code> definition can be re-used in context within the data format <code>secureTag</code> attribute of the <code>secureXML</code> element.</p>
            <div class="code panel pdl" style="border-width: 1px;">
             <div class="codeContent panelContent pdl"> 
              <script class="brush: java; gutter: false; theme: Default" type="syntaxhighlighter"><![CDATA[&lt;camelContext id=&quot;springXmlSecurityDataFormatTestCamelContext&quot; 
              xmlns=&quot;http://camel.apache.org/schema/spring&quot;
              xmlns:cheese=&quot;http://cheese.xmlsecurity.camel.apache.org/&quot;&gt;        
    &lt;route&gt;
        &lt;from uri=&quot;direct://start&quot;/&gt;
            &lt;marshal&gt;
                &lt;secureXML secureTag=&quot;//cheese:cheesesites/italy&quot;
                           secureTagContents=&quot;true&quot;/&gt;
            &lt;/marshal&gt; 
            ...
]]></script> 
             </div>
            </div>
            <h4 id="BookDataFormatAppendix-AsymmetricKeyEncryption">Asymmetric Key Encryption</h4>
            <h5 id="BookDataFormatAppendix-SpringXMLSender">Spring XML Sender</h5>
            <div class="code panel pdl" style="border-width: 1px;">
             <div class="codeContent panelContent pdl"> 
              <script class="brush: java; gutter: false; theme: Default" type="syntaxhighlighter"><![CDATA[&lt;!--  trust store configuration --&gt;                          
&lt;camel:keyStoreParameters id=&quot;trustStoreParams&quot; resource=&quot;./sender.ts&quot; password=&quot;password&quot;/&gt;

&lt;camelContext id=&quot;springXmlSecurityDataFormatTestCamelContext&quot; 
              xmlns=&quot;http://camel.apache.org/schema/spring&quot;
              xmlns:cheese=&quot;http://cheese.xmlsecurity.camel.apache.org/&quot;&gt;        
    &lt;route&gt;
        &lt;from uri=&quot;direct://start&quot;/&gt;
            &lt;marshal&gt;
                &lt;secureXML secureTag=&quot;//cheese:cheesesites/italy&quot;
                           secureTagContents=&quot;true&quot;
                           xmlCipherAlgorithm=&quot;http://www.w3.org/2001/04/xmlenc#aes128-cbc&quot;       
                           keyCipherAlgorithm=&quot;http://www.w3.org/2001/04/xmlenc#rsa-1_5&quot;
                           recipientKeyAlias=&quot;recipient&quot;
                           keyOrTrustStoreParametersId=&quot;trustStoreParams&quot;/&gt;
            &lt;/marshal&gt; 
            ...
]]></script> 
             </div>
            </div>
            <h5 id="BookDataFormatAppendix-SpringXMLRecipient">Spring XML Recipient</h5>
            <div class="code panel pdl" style="border-width: 1px;">
             <div class="codeContent panelContent pdl"> 
              <script class="brush: java; gutter: false; theme: Default" type="syntaxhighlighter"><![CDATA[ 
&lt;!--  key store configuration --&gt;
&lt;camel:keyStoreParameters id=&quot;keyStoreParams&quot; resource=&quot;./recipient.ks&quot; password=&quot;password&quot; /&gt;

&lt;camelContext id=&quot;springXmlSecurityDataFormatTestCamelContext&quot; 
              xmlns=&quot;http://camel.apache.org/schema/spring&quot;
              xmlns:cheese=&quot;http://cheese.xmlsecurity.camel.apache.org/&quot;&gt;
    &lt;route&gt;    
        &lt;from uri=&quot;direct://encrypted&quot;/&gt;
            &lt;unmarshal&gt;
                &lt;secureXML secureTag=&quot;//cheese:cheesesites/italy&quot;
                           secureTagContents=&quot;true&quot;
                           xmlCipherAlgorithm=&quot;http://www.w3.org/2001/04/xmlenc#aes128-cbc&quot;
                           keyCipherAlgorithm=&quot;http://www.w3.org/2001/04/xmlenc#rsa-1_5&quot;
                           recipientKeyAlias=&quot;recipient&quot;
                           keyOrTrustStoreParametersId=&quot;keyStoreParams&quot;
                           keyPassword=&quot;privateKeyPassword&quot; /&gt;
            &lt;/unmarshal&gt;
            ...
]]></script> 
             </div>
            </div>
            <h3 id="BookDataFormatAppendix-Dependencies.9">Dependencies</h3>
            <p>This data format is provided within the <strong>camel-xmlsecurity</strong> component.</p> The GZip 
            <a shape="rect" href="data-format.html">Data Format</a> is a message compression and de-compression format. It uses the same deflate algorithm that is used in 
            <a shape="rect" href="zip-dataformat.html">Zip DataFormat</a>, although some additional headers are provided. This format is produced by popular 
            <code>gzip</code>/
            <code>gunzip</code> tool. Messages marshalled using GZip compression can be unmarshalled using GZip decompression just prior to being consumed at the endpoint. The compression capability is quite useful when you deal with large XML and Text based payloads or when you read messages previously comressed using 
            <code>gzip</code> tool. 
            <h3 id="BookDataFormatAppendix-Options.3">Options</h3> 
            <p>There are no options provided for this data format.</p> 
            <h3 id="BookDataFormatAppendix-Marshal.3">Marshal</h3> 
            <p>In this example we marshal a regular text/XML payload to a compressed payload employing gzip compression format and send it an ActiveMQ queue called MY_QUEUE.</p> 
            <div class="code panel pdl" style="border-width: 1px;">
             <div class="codeContent panelContent pdl"> 
              <script class="brush: java; gutter: false; theme: Default" type="syntaxhighlighter"><![CDATA[
from(&quot;direct:start&quot;).marshal().gzip().to(&quot;activemq:queue:MY_QUEUE&quot;);
]]></script> 
             </div>
            </div> 
            <h3 id="BookDataFormatAppendix-Unmarshal.3">Unmarshal</h3> 
            <p>In this example we unmarshal&nbsp;a gzipped&nbsp;payload from an ActiveMQ queue called MY_QUEUE&nbsp;to its original format,&nbsp;and forward it for&nbsp;processing&nbsp;to the <code>UnGZippedMessageProcessor</code>. </p> 
            <div class="code panel pdl" style="border-width: 1px;">
             <div class="codeContent panelContent pdl"> 
              <script class="brush: java; gutter: false; theme: Default" type="syntaxhighlighter"><![CDATA[
from(&quot;activemq:queue:MY_QUEUE&quot;).unmarshal().gzip().process(new UnGZippedMessageProcessor()); 
]]></script> 
             </div>
            </div> 
            <h3 id="BookDataFormatAppendix-Dependencies.10">Dependencies</h3> 
            <p>This data format is provided in <strong>camel-core</strong> so no additional dependencies is needed.</p> 
            <h2 id="BookDataFormatAppendix-Castor">Castor</h2> 
            <p><strong>Available as of Camel 2.1</strong></p> 
            <p>Castor is a <a shape="rect" href="data-format.html">Data Format</a> which uses the <a shape="rect" class="external-link" href="http://www.castor.org/" rel="nofollow">Castor XML library</a> to unmarshal an XML payload into Java objects or to marshal Java objects into an XML payload.</p> 
            <p>As usually you can use either Java DSL or Spring XML to work with Castor Data Format. </p> 
            <h3 id="BookDataFormatAppendix-UsingtheJavaDSL.3">Using the Java DSL</h3> 
            <div class="code panel pdl" style="border-width: 1px;">
             <div class="codeContent panelContent pdl"> 
              <script class="brush: java; gutter: false; theme: Default" type="syntaxhighlighter"><![CDATA[
from(&quot;direct:order&quot;).
  marshal().castor().
  to(&quot;activemq:queue:order&quot;);
]]></script> 
             </div>
            </div> 
            <p>For example the following uses a named DataFormat of Castor which uses default Castor data binding features.</p> 
            <div class="code panel pdl" style="border-width: 1px;">
             <div class="codeContent panelContent pdl"> 
              <script class="brush: java; gutter: false; theme: Default" type="syntaxhighlighter"><![CDATA[
CastorDataFormat castor = new CastorDataFormat ();

from(&quot;activemq:My.Queue&quot;).
  unmarshal(castor).
  to(&quot;mqseries:Another.Queue&quot;);
]]></script> 
             </div>
            </div> 
            <p>If you prefer to use a named reference to a data format which can then be defined in your Registry such as via your Spring XML file. e.g.</p> 
            <div class="code panel pdl" style="border-width: 1px;">
             <div class="codeContent panelContent pdl"> 
              <script class="brush: java; gutter: false; theme: Default" type="syntaxhighlighter"><![CDATA[
from(&quot;activemq:My.Queue&quot;).
  unmarshal(&quot;mycastorType&quot;).
  to(&quot;mqseries:Another.Queue&quot;);
]]></script> 
             </div>
            </div> 
            <p>If you want to override default mapping schema by providing a mapping file you can set it as follows.</p> 
            <div class="code panel pdl" style="border-width: 1px;">
             <div class="codeContent panelContent pdl"> 
              <script class="brush: java; gutter: false; theme: Default" type="syntaxhighlighter"><![CDATA[
CastorDataFormat castor = new CastorDataFormat ();
castor.setMappingFile(&quot;mapping.xml&quot;);
]]></script> 
             </div>
            </div> 
            <p>Also if you want to have more control on Castor Marshaller and Unmarshaller you can access them as below.</p> 
            <div class="code panel pdl" style="border-width: 1px;">
             <div class="codeContent panelContent pdl"> 
              <script class="brush: java; gutter: false; theme: Default" type="syntaxhighlighter"><![CDATA[
castor.getMarshaller();
castor.getUnmarshaller();
]]></script> 
             </div>
            </div> 
            <h3 id="BookDataFormatAppendix-UsingSpringXML.3">Using Spring XML</h3> 
            <p>The following example shows how to use Castor to unmarshal using Spring configuring the castor data type</p> 
            <div class="code panel pdl" style="border-width: 1px;">
             <div class="codeContent panelContent pdl"> 
              <script class="brush: java; gutter: false; theme: Default" type="syntaxhighlighter"><![CDATA[
&lt;camelContext id=&quot;camel&quot; xmlns=&quot;http://camel.apache.org/schema/spring&quot;&gt;
  &lt;route&gt;
    &lt;from uri=&quot;direct:start&quot;/&gt;
    &lt;unmarshal&gt;
      &lt;castor validation=&quot;true&quot; /&gt;
    &lt;/unmarshal&gt;
    &lt;to uri=&quot;mock:result&quot;/&gt;
  &lt;/route&gt;
&lt;/camelContext&gt;
]]></script> 
             </div>
            </div> 
            <p>This example shows how to configure the data type just once and reuse it on multiple routes. You have to set the &lt;castor&gt; element directly in &lt;camelContext&gt;.</p> 
            <div class="code panel pdl" style="border-width: 1px;">
             <div class="codeContent panelContent pdl"> 
              <script class="brush: java; gutter: false; theme: Default" type="syntaxhighlighter"><![CDATA[
&lt;camelContext&gt;
&lt;camelContext id=&quot;camel&quot; xmlns=&quot;http://camel.apache.org/schema/spring&quot;&gt;
  &lt;dataFormats&gt;
    &lt;castor id=&quot;myCastor&quot;/&gt;
  &lt;/dataFormats&gt;

  &lt;route&gt;
    &lt;from uri=&quot;direct:start&quot;/&gt;
    &lt;marshal ref=&quot;myCastor&quot;/&gt;
    &lt;to uri=&quot;direct:marshalled&quot;/&gt;
  &lt;/route&gt;
  &lt;route&gt;
    &lt;from uri=&quot;direct:marshalled&quot;/&gt;
    &lt;unmarshal ref=&quot;myCastor&quot;/&gt;
    &lt;to uri=&quot;mock:result&quot;/&gt;
  &lt;/route&gt;

&lt;/camelContext&gt;
]]></script> 
             </div>
            </div> 
            <h3 id="BookDataFormatAppendix-Options.4">Options</h3> 
            <p>Castor supports the following options</p> 
            <div class="table-wrap">
             <table class="confluenceTable">
              <tbody>
               <tr>
                <th colspan="1" rowspan="1" class="confluenceTh"><p> Option </p></th>
                <th colspan="1" rowspan="1" class="confluenceTh"><p> Type </p></th>
                <th colspan="1" rowspan="1" class="confluenceTh"><p> Default </p></th>
                <th colspan="1" rowspan="1" class="confluenceTh"><p> Description </p></th>
               </tr>
               <tr>
                <td colspan="1" rowspan="1" class="confluenceTd"><p> encoding </p></td>
                <td colspan="1" rowspan="1" class="confluenceTd"><p> String </p></td>
                <td colspan="1" rowspan="1" class="confluenceTd"><p> UTF-8 </p></td>
                <td colspan="1" rowspan="1" class="confluenceTd"><p> Encoding to use when marshalling an Object to XML </p></td>
               </tr>
               <tr>
                <td colspan="1" rowspan="1" class="confluenceTd"><p> validation </p></td>
                <td colspan="1" rowspan="1" class="confluenceTd"><p> Boolean </p></td>
                <td colspan="1" rowspan="1" class="confluenceTd"><p> false </p></td>
                <td colspan="1" rowspan="1" class="confluenceTd"><p> Whether validation is turned on or off. </p></td>
               </tr>
               <tr>
                <td colspan="1" rowspan="1" class="confluenceTd"><p> mappingFile </p></td>
                <td colspan="1" rowspan="1" class="confluenceTd"><p> String </p></td>
                <td colspan="1" rowspan="1" class="confluenceTd"><p> null </p></td>
                <td colspan="1" rowspan="1" class="confluenceTd"><p> Path to a Castor mapping file to load from the classpath. </p></td>
               </tr>
               <tr>
                <td colspan="1" rowspan="1" class="confluenceTd"><p> packages </p></td>
                <td colspan="1" rowspan="1" class="confluenceTd"><p> String[] </p></td>
                <td colspan="1" rowspan="1" class="confluenceTd"><p> null </p></td>
                <td colspan="1" rowspan="1" class="confluenceTd"><p> Add additional packages to Castor XmlContext </p></td>
               </tr>
               <tr>
                <td colspan="1" rowspan="1" class="confluenceTd"><p> classNames </p></td>
                <td colspan="1" rowspan="1" class="confluenceTd"><p> String[] </p></td>
                <td colspan="1" rowspan="1" class="confluenceTd"><p> null </p></td>
                <td colspan="1" rowspan="1" class="confluenceTd"><p> Add additional class names to Castor XmlContext </p></td>
               </tr>
              </tbody>
             </table>
            </div> 
            <h3 id="BookDataFormatAppendix-Dependencies.11">Dependencies</h3> 
            <p>To use Castor in your camel routes you need to add the a dependency on <strong>camel-castor</strong> which implements this data format. </p> 
            <p>If you use maven you could just add the following to your pom.xml, substituting the version number for the latest &amp; greatest release (see <a shape="rect" href="download.html">the download page for the latest versions</a>).</p> 
            <div class="code panel pdl" style="border-width: 1px;">
             <div class="codeContent panelContent pdl"> 
              <script class="brush: java; gutter: false; theme: Default" type="syntaxhighlighter"><![CDATA[
&lt;dependency&gt;
  &lt;groupId&gt;org.apache.camel&lt;/groupId&gt;
  &lt;artifactId&gt;camel-castor&lt;/artifactId&gt;
  &lt;version&gt;x.x.x&lt;/version&gt;
&lt;/dependency&gt;
]]></script> 
             </div>
            </div> 
            <h1 id="BookDataFormatAppendix-Protobuf-ProtocolBuffers">Protobuf - Protocol Buffers</h1> 
            <p>"Protocol Buffers - Google's data interchange format"</p> 
            <div class="confluence-information-macro confluence-information-macro-information">
             <span class="aui-icon aui-icon-small aui-iconfont-info confluence-information-macro-icon"></span>
             <div class="confluence-information-macro-body">
              <p>Available from Camel 2.2</p>
             </div>
            </div> 
            <p>Camel provides a <a shape="rect" href="data-format.html">Data Format</a> to serialse between Java and the Protocol Buffer protocol. The project's site details why you may wish to <a shape="rect" class="external-link" href="http://code.google.com/apis/protocolbuffers/docs/overview.html" rel="nofollow">choose this format over xml</a>. Protocol Buffer is language-neutral and platform-neutral, so messages produced by your Camel routes may be consumed by other language implementations.</p> 
            <p><a shape="rect" class="external-link" href="http://code.google.com/apis/protocolbuffers/" rel="nofollow">API Site</a><br clear="none"> <a shape="rect" class="external-link" href="http://code.google.com/p/protobuf/" rel="nofollow">Protobuf Implementation</a><br clear="none"> <a shape="rect" class="external-link" href="http://code.google.com/apis/protocolbuffers/docs/javatutorial.html" rel="nofollow">Protobuf Java Tutorial</a></p> 
            <h2 id="BookDataFormatAppendix-Protobufoverview">Protobuf overview</h2> 
            <p>This quick overview of how to use Protobuf. For more detail see the <a shape="rect" class="external-link" href="http://code.google.com/apis/protocolbuffers/docs/javatutorial.html" rel="nofollow">complete tutorial</a></p> 
            <h3 id="BookDataFormatAppendix-Definingtheprotoformat">Defining the proto format</h3> 
            <p>The first step is to define the format for the body of your exchange. This is defined in a .proto file as so:</p> 
            <div class="code panel pdl" style="border-width: 1px;">
             <div class="codeHeader panelHeader pdl" style="border-bottom-width: 1px;">
              <b>addressbook.proto</b>
             </div>
             <div class="codeContent panelContent pdl"> 
              <script class="brush: java; gutter: false; theme: Default" type="syntaxhighlighter"><![CDATA[

package org.apache.camel.component.protobuf;

option java_package = &quot;org.apache.camel.component.protobuf&quot;;
option java_outer_classname = &quot;AddressBookProtos&quot;;

message Person {
  required string name = 1;
  required int32 id = 2;
  optional string email = 3;

  enum PhoneType {
    MOBILE = 0;
    HOME = 1;
    WORK = 2;
  }

  message PhoneNumber {
    required string number = 1;
    optional PhoneType type = 2 [default = HOME];
  }

  repeated PhoneNumber phone = 4;
}

message AddressBook {
  repeated Person person = 1;
}

]]></script> 
             </div>
            </div> 
            <h3 id="BookDataFormatAppendix-GeneratingJavaclasses">Generating Java classes</h3> 
            <p>The Protobuf SDK provides a compiler which will generate the Java classes for the format we defined in our .proto file. You can run the compiler for any additional supported languages you require.</p> 
            <p><code>protoc --java_out=. ./addressbook.proto</code></p> 
            <p>This will generate a single Java class named AddressBookProtos which contains inner classes for Person and AddressBook. Builders are also implemented for you. The generated classes implement com.google.protobuf.Message which is required by the serialisation mechanism. For this reason it important that only these classes are used in the body of your exchanges. Camel will throw an exception on route creation if you attempt to tell the <a shape="rect" href="data-format.html">Data Format</a> to use a class that does not implement com.google.protobuf.Message. Use the generated builders to translate the data from any of your existing domain classes.</p> 
            <h2 id="BookDataFormatAppendix-JavaDSL.1">Java DSL</h2> 
            <p>You can use create the ProtobufDataFormat instance and pass it to Camel DataFormat marshal and unmarsha API like this.</p> 
            <div class="code panel pdl" style="border-width: 1px;">
             <div class="codeContent panelContent pdl"> 
              <script class="brush: java; gutter: false; theme: Default" type="syntaxhighlighter"><![CDATA[
   ProtobufDataFormat format = new ProtobufDataFormat(Person.getDefaultInstance());

   from(&quot;direct:in&quot;).marshal(format);
   from(&quot;direct:back&quot;).unmarshal(format).to(&quot;mock:reverse&quot;);
]]></script> 
             </div>
            </div> 
            <p>Or use the DSL protobuf() passing the unmarshal default instance or default instance class name like this.</p> 
            <div class="code panel pdl" style="border-width: 1px;">
             <div class="codeContent panelContent pdl"> 
              <script class="brush: java; gutter: false; theme: Default" type="syntaxhighlighter"><![CDATA[
   // You don&#39;t need to specify the default instance for protobuf marshaling               
   from(&quot;direct:marshal&quot;).marshal().protobuf();
   from(&quot;direct:unmarshalA&quot;).unmarshal().
       protobuf(&quot;org.apache.camel.dataformat.protobuf.generated.AddressBookProtos$Person&quot;).
       to (&quot;mock:reverse&quot;);
                
   from(&quot;direct:unmarshalB&quot;).unmarshal().protobuf(Person.getDefaultInstance()).to(&quot;mock:reverse&quot;);
]]></script> 
             </div>
            </div> 
            <h2 id="BookDataFormatAppendix-SpringDSL">Spring DSL</h2> 
            <p>The following example shows how to use Castor to unmarshal using Spring configuring the protobuf data type</p> 
            <div class="code panel pdl" style="border-width: 1px;">
             <div class="codeContent panelContent pdl"> 
              <script class="brush: java; gutter: false; theme: Default" type="syntaxhighlighter"><![CDATA[
&lt;camelContext id=&quot;camel&quot; xmlns=&quot;http://camel.apache.org/schema/spring&quot;&gt;
  &lt;route&gt;
    &lt;from uri=&quot;direct:start&quot;/&gt;
    &lt;unmarshal&gt;
      &lt;protobuf instanceClass=&quot;org.apache.camel.dataformat.protobuf.generated.AddressBookProtos$Person&quot; /&gt;
    &lt;/unmarshal&gt;
    &lt;to uri=&quot;mock:result&quot;/&gt;
  &lt;/route&gt;
&lt;/camelContext&gt;
]]></script> 
             </div>
            </div> 
            <h3 id="BookDataFormatAppendix-Dependencies.12">Dependencies</h3> 
            <p>To use Protobuf in your camel routes you need to add the a dependency on <strong>camel-protobuf</strong> which implements this data format. </p> 
            <p>If you use maven you could just add the following to your pom.xml, substituting the version number for the latest &amp; greatest release (see <a shape="rect" href="download.html">the download page for the latest versions</a>).</p> 
            <div class="code panel pdl" style="border-width: 1px;">
             <div class="codeContent panelContent pdl"> 
              <script class="brush: java; gutter: false; theme: Default" type="syntaxhighlighter"><![CDATA[
&lt;dependency&gt;
  &lt;groupId&gt;org.apache.camel&lt;/groupId&gt;
  &lt;artifactId&gt;camel-protobuf&lt;/artifactId&gt;
  &lt;version&gt;2.2.0&lt;/version&gt;
&lt;/dependency&gt;
]]></script> 
             </div>
            </div> 
            <h2 id="BookDataFormatAppendix-SOAPDataFormat">SOAP DataFormat</h2> 
            <p><strong>Available as of Camel 2.3</strong></p> 
            <p>SOAP is a <a shape="rect" href="data-format.html">Data Format</a> which uses JAXB2 and JAX-WS annotations to marshal and unmarshal SOAP payloads. It provides the basic features of Apache CXF without need for the CXF Stack.</p> 
            <div class="confluence-information-macro confluence-information-macro-information">
             <p class="title">Supported SOAP versions</p>
             <span class="aui-icon aui-icon-small aui-iconfont-info confluence-information-macro-icon"></span>
             <div class="confluence-information-macro-body"> 
              <p>SOAP 1.1 is supported by default. SOAP 1.2 is supported from Camel 2.11 onwards.</p>
             </div>
            </div> 
            <div class="confluence-information-macro confluence-information-macro-tip">
             <p class="title">Namespace prefix mapping</p>
             <span class="aui-icon aui-icon-small aui-iconfont-approve confluence-information-macro-icon"></span>
             <div class="confluence-information-macro-body"> 
              <p>See <a shape="rect" href="jaxb.html">JAXB</a> for details how you can control namespace prefix mappings when marshalling using <a shape="rect" href="soap.html">SOAP</a> data format.</p>
             </div>
            </div> 
            <h3 id="BookDataFormatAppendix-ElementNameStrategy">ElementNameStrategy</h3> 
            <p>An element name strategy is used for two purposes. The first is to find a xml element name for a given object and soap action when marshaling the object into a SOAP message. The second is to find an Exception class for a given soap fault name.</p> 
            <div class="table-wrap">
             <table class="confluenceTable">
              <tbody>
               <tr>
                <th colspan="1" rowspan="1" class="confluenceTh"><p> Strategy </p></th>
                <th colspan="1" rowspan="1" class="confluenceTh"><p> Usage </p></th>
               </tr>
               <tr>
                <td colspan="1" rowspan="1" class="confluenceTd"><p> QNameStrategy </p></td>
                <td colspan="1" rowspan="1" class="confluenceTd"><p> Uses a fixed qName that is configured on instantiation. Exception lookup is not supported </p></td>
               </tr>
               <tr>
                <td colspan="1" rowspan="1" class="confluenceTd"><p> TypeNameStrategy </p></td>
                <td colspan="1" rowspan="1" class="confluenceTd"><p> Uses the name and namespace from the @XMLType annotation of the given type. If no namespace is set then package-info is used. Exception lookup is not supported </p></td>
               </tr>
               <tr>
                <td colspan="1" rowspan="1" class="confluenceTd"><p> ServiceInterfaceStrategy </p></td>
                <td colspan="1" rowspan="1" class="confluenceTd"><p> Uses information from a webservice interface to determine the type name and to find the exception class for a SOAP fault</p></td>
               </tr>
              </tbody>
             </table>
            </div> 
            <p>If you have generated the web service stub code with cxf-codegen or a similar tool then you probably will want to use the ServiceInterfaceStrategy. In the case you have no annotated service interface you should use QNameStrategy or TypeNameStrategy.</p> 
            <h3 id="BookDataFormatAppendix-UsingtheJavaDSL.4">Using the Java DSL</h3> 
            <p>The following example uses a named DataFormat of <em>soap</em> which is configured with the package com.example.customerservice to initialize the <a shape="rect" class="external-link" href="http://java.sun.com/javase/6/docs/api/javax/xml/bind/JAXBContext.html" rel="nofollow">JAXBContext</a>. The second parameter is the ElementNameStrategy. The route is able to marshal normal objects as well as exceptions. (Note the below just sends a SOAP Envelope to a queue. A web service provider would actually need to be listening to the queue for a SOAP call to actually occur, in which case it would be a one way SOAP request. If you need request reply then you should look at the next example.)</p> 
            <div class="code panel pdl" style="border-width: 1px;">
             <div class="codeContent panelContent pdl"> 
              <script class="brush: java; gutter: false; theme: Default" type="syntaxhighlighter"><![CDATA[
SoapJaxbDataFormat soap = new SoapJaxbDataFormat(&quot;com.example.customerservice&quot;, new ServiceInterfaceStrategy(CustomerService.class));
from(&quot;direct:start&quot;)
  .marshal(soap)
  .to(&quot;jms:myQueue&quot;);
]]></script> 
             </div>
            </div> 
            <div class="confluence-information-macro confluence-information-macro-tip">
             <p class="title">See also</p>
             <span class="aui-icon aui-icon-small aui-iconfont-approve confluence-information-macro-icon"></span>
             <div class="confluence-information-macro-body">
              <p>As the SOAP dataformat inherits from the <a shape="rect" href="jaxb.html">JAXB</a> dataformat most settings apply here as well</p>
             </div>
            </div> 
            <h4 id="BookDataFormatAppendix-UsingSOAP1.2">Using SOAP 1.2</h4> 
            <p><strong>Available as of Camel 2.11</strong></p> 
            <div class="code panel pdl" style="border-width: 1px;">
             <div class="codeContent panelContent pdl"> 
              <script class="brush: java; gutter: false; theme: Default" type="syntaxhighlighter"><![CDATA[
SoapJaxbDataFormat soap = new SoapJaxbDataFormat(&quot;com.example.customerservice&quot;, new ServiceInterfaceStrategy(CustomerService.class));
soap.setVersion(&quot;1.2&quot;);
from(&quot;direct:start&quot;)
  .marshal(soap)
  .to(&quot;jms:myQueue&quot;);
]]></script> 
             </div>
            </div> 
            <p>When using XML DSL there is a version attribute you can set on the &lt;soapjaxb&gt; element.</p> 
            <div class="code panel pdl" style="border-width: 1px;">
             <div class="codeContent panelContent pdl"> 
              <script class="brush: java; gutter: false; theme: Default" type="syntaxhighlighter"><![CDATA[
    &lt;!-- Defining a ServiceInterfaceStrategy for retrieving the element name when marshalling --&gt;
    &lt;bean id=&quot;myNameStrategy&quot; class=&quot;org.apache.camel.dataformat.soap.name.ServiceInterfaceStrategy&quot;&gt;
    	&lt;constructor-arg value=&quot;com.example.customerservice.CustomerService&quot;/&gt;
	&lt;constructor-arg value=&quot;true&quot;/&gt;
    &lt;/bean&gt;
]]></script> 
             </div>
            </div> 
            <p>And in the Camel route</p> 
            <div class="code panel pdl" style="border-width: 1px;">
             <div class="codeContent panelContent pdl"> 
              <script class="brush: java; gutter: false; theme: Default" type="syntaxhighlighter"><![CDATA[
&lt;route&gt;
  &lt;from uri=&quot;direct:start&quot;/&gt;
  &lt;marshal&gt;
    &lt;soapjaxb contentPath=&quot;com.example.customerservice&quot; version=&quot;1.2&quot; elementNameStrategyRef=&quot;myNameStrategy&quot;/&gt;
  &lt;/marshal&gt;
  &lt;to uri=&quot;jms:myQueue&quot;/&gt;
&lt;/route&gt;
]]></script> 
             </div>
            </div> 
            <h3 id="BookDataFormatAppendix-Multi-partMessages">Multi-part Messages</h3> 
            <p><strong>Available as of Camel 2.8.1</strong> </p> 
            <p>Multi-part SOAP messages are supported by the ServiceInterfaceStrategy. The ServiceInterfaceStrategy must be initialized with a service interface definition that is annotated in accordance with JAX-WS 2.2 and meets the requirements of the Document Bare style. The target method must meet the following criteria, as per the JAX-WS specification: 1) it must have at most one <code>in</code> or <code>in/out</code> non-header parameter, 2) if it has a return type other than <code>void</code> it must have no <code>in/out</code> or <code>out</code> non-header parameters, 3) if it it has a return type of <code>void</code> it must have at most one <code>in/out</code> or <code>out</code> non-header parameter.</p> 
            <p>The ServiceInterfaceStrategy should be initialized with a boolean parameter that indicates whether the mapping strategy applies to the request parameters or response parameters.</p> 
            <div class="code panel pdl" style="border-width: 1px;">
             <div class="codeContent panelContent pdl"> 
              <script class="brush: java; gutter: false; theme: Default" type="syntaxhighlighter"><![CDATA[
ServiceInterfaceStrategy strat =  new ServiceInterfaceStrategy(com.example.customerservice.multipart.MultiPartCustomerService.class, true);
SoapJaxbDataFormat soapDataFormat = new SoapJaxbDataFormat(&quot;com.example.customerservice.multipart&quot;, strat);
]]></script> 
             </div>
            </div> 
            <h4 id="BookDataFormatAppendix-Multi-partRequest">Multi-part Request</h4> 
            <p>The payload parameters for a multi-part request are initiazlied using a <code>BeanInvocation</code> object that reflects the signature of the target operation. The camel-soap DataFormat maps the content in the <code>BeanInvocation</code> to fields in the SOAP header and body in accordance with the JAX-WS mapping when the <code>marshal()</code> processor is invoked. </p> 
            <div class="code panel pdl" style="border-width: 1px;">
             <div class="codeContent panelContent pdl"> 
              <script class="brush: java; gutter: false; theme: Default" type="syntaxhighlighter"><![CDATA[
BeanInvocation beanInvocation = new BeanInvocation();

// Identify the target method
beanInvocation.setMethod(MultiPartCustomerService.class.getMethod(&quot;getCustomersByName&quot;, 
    GetCustomersByName.class, com.example.customerservice.multipart.Product.class));

// Populate the method arguments
GetCustomersByName getCustomersByName = new GetCustomersByName();
getCustomersByName.setName(&quot;Dr. Multipart&quot;);
                
Product product = new Product();
product.setName(&quot;Multiuse Product&quot;);
product.setDescription(&quot;Useful for lots of things.&quot;);
                
Object[] args = new Object[] {getCustomersByName, product};

// Add the arguments to the bean invocation
beanInvocation.setArgs(args);

// Set the bean invocation object as the message body
exchange.getIn().setBody(beanInvocation); 
]]></script> 
             </div>
            </div> 
            <h4 id="BookDataFormatAppendix-Multi-partResponse">Multi-part Response</h4> 
            <p>A multi-part soap response may include an element in the soap body and will have one or more elements in the soap header. The camel-soap DataFormat will unmarshall the element in the soap body (if it exists) and place it onto the body of the out message in the exchange. Header elements will <strong>not</strong> be marshaled into their JAXB mapped object types. Instead, these elements are placed into the camel out message header <code>org.apache.camel.dataformat.soap.UNMARSHALLED_HEADER_LIST</code>. The elements will appear either as element instance values, or as JAXBElement values, depending upon the setting for the <code>ignoreJAXBElement</code> property. This property is inherited from camel-jaxb.</p> 
            <p>You can also have the camel-soap DataFormate ignore header content all-together by setting the <code>ignoreUnmarshalledHeaders</code> value to <code>true</code>. </p> 
            <h4 id="BookDataFormatAppendix-HolderObjectmapping">Holder Object mapping</h4> 
            <p>JAX-WS specifies the use of a type-parameterized <code>javax.xml.ws.Holder</code> object for <code>In/Out</code> and <code>Out</code> parameters. A <code>Holder</code> object may be used when building the <code>BeanInvocation</code>, or you may use an instance of the parameterized-type directly. The camel-soap DataFormat marshals Holder values in accordance with the JAXB mapping for the class of the <code>Holder</code>'s value. No mapping is provided for <code>Holder</code> objects in an unmarshalled response.</p> 
            <h3 id="BookDataFormatAppendix-Examples.1">Examples</h3> 
            <h4 id="BookDataFormatAppendix-Webserviceclient">Webservice client</h4> 
            <p>The following route supports marshalling the request and unmarshalling a response or fault. </p> 
            <div class="code panel pdl" style="border-width: 1px;">
             <div class="codeContent panelContent pdl"> 
              <script class="brush: java; gutter: false; theme: Default" type="syntaxhighlighter"><![CDATA[
String WS_URI = &quot;cxf://http://myserver/customerservice?serviceClass=com.example.customerservice&amp;dataFormat=MESSAGE&quot;;
SoapJaxbDataFormat soapDF = new SoapJaxbDataFormat(&quot;com.example.customerservice&quot;, new ServiceInterfaceStrategy(CustomerService.class));
from(&quot;direct:customerServiceClient&quot;)
  .onException(Exception.class)
    .handled(true)
    .unmarshal(soapDF)
  .end()
  .marshal(soapDF)
  .to(WS_URI)
  .unmarshal(soapDF);
]]></script> 
             </div>
            </div> 
            <p>The below snippet creates a proxy for the service interface and makes a SOAP call to the above route. </p> 
            <div class="code panel pdl" style="border-width: 1px;">
             <div class="codeContent panelContent pdl"> 
              <script class="brush: java; gutter: false; theme: Default" type="syntaxhighlighter"><![CDATA[
import org.apache.camel.Endpoint;
import org.apache.camel.component.bean.ProxyHelper;
...

Endpoint startEndpoint = context.getEndpoint(&quot;direct:customerServiceClient&quot;);
ClassLoader classLoader = Thread.currentThread().getContextClassLoader();
// CustomerService below is the service endpoint interface, *not* the javax.xml.ws.Service subclass
CustomerService proxy = ProxyHelper.createProxy(startEndpoint, classLoader, CustomerService.class);
GetCustomersByNameResponse response = proxy.getCustomersByName(new GetCustomersByName());
]]></script> 
             </div>
            </div> 
            <h4 id="BookDataFormatAppendix-WebserviceServer">Webservice Server</h4> 
            <p>Using the following route sets up a webservice server that listens on jms queue customerServiceQueue and processes requests using the class CustomerServiceImpl. The customerServiceImpl of course should implement the interface CustomerService. Instead of directly instantiating the server class it could be defined in a spring context as a regular bean.</p> 
            <div class="code panel pdl" style="border-width: 1px;">
             <div class="codeContent panelContent pdl"> 
              <script class="brush: java; gutter: false; theme: Default" type="syntaxhighlighter"><![CDATA[
SoapJaxbDataFormat soapDF = new SoapJaxbDataFormat(&quot;com.example.customerservice&quot;, new ServiceInterfaceStrategy(CustomerService.class));
CustomerService serverBean = new CustomerServiceImpl();
from(&quot;jms://queue:customerServiceQueue&quot;)
  .onException(Exception.class)
    .handled(true)
    .marshal(soapDF)
  .end()
  .unmarshal(soapDF)
  .bean(serverBean)
  .marshal(soapDF);
]]></script> 
             </div>
            </div> 
            <h3 id="BookDataFormatAppendix-Dependencies.13">Dependencies</h3> 
            <p>To use the SOAP dataformat in your camel routes you need to add the following dependency to your pom.</p> 
            <div class="code panel pdl" style="border-width: 1px;">
             <div class="codeContent panelContent pdl"> 
              <script class="brush: java; gutter: false; theme: Default" type="syntaxhighlighter"><![CDATA[
&lt;dependency&gt;
  &lt;groupId&gt;org.apache.camel&lt;/groupId&gt;
  &lt;artifactId&gt;camel-soap&lt;/artifactId&gt;
  &lt;version&gt;2.3.0&lt;/version&gt;
&lt;/dependency&gt;
]]></script> 
             </div>
            </div> 
            <h2 id="BookDataFormatAppendix-Crypto">Crypto</h2>
            <p><strong>Available as of Camel 2.3</strong><br clear="none"> <strong>PGP Available as of Camel 2.9</strong></p>
            <p>The Crypto <a shape="rect" href="data-format.html">Data Format</a> integrates the Java Cryptographic Extension into Camel, allowing simple and flexible encryption and decryption of messages using Camel's familiar marshall and unmarshal formatting mechanism. It assumes marshalling to mean encryption to cyphertext and unmarshalling to mean decryption back to the original plaintext. This data format implements only symmetric (shared-key) encryption and decyption.</p>
            <h3 id="BookDataFormatAppendix-Options.5">Options</h3>
            <div class="table-wrap">
             <table class="confluenceTable">
              <tbody>
               <tr>
                <th colspan="1" rowspan="1" class="confluenceTh"><p>Name</p></th>
                <th colspan="1" rowspan="1" class="confluenceTh"><p>Type</p></th>
                <th colspan="1" rowspan="1" class="confluenceTh"><p>Default</p></th>
                <th colspan="1" rowspan="1" class="confluenceTh"><p>Description</p></th>
               </tr>
               <tr>
                <td colspan="1" rowspan="1" class="confluenceTd"><p><code>algorithm</code></p></td>
                <td colspan="1" rowspan="1" class="confluenceTd"><p><code>String</code></p></td>
                <td colspan="1" rowspan="1" class="confluenceTd"><p><code>DES/CBC/PKCS5Padding</code></p></td>
                <td colspan="1" rowspan="1" class="confluenceTd"><p>The JCE algorithm name indicating the cryptographic algorithm that will be used.</p></td>
               </tr>
               <tr>
                <td colspan="1" rowspan="1" class="confluenceTd"><p><code>algorithmParameterSpec</code></p></td>
                <td colspan="1" rowspan="1" class="confluenceTd"><p><code>java.security.spec.AlgorithmParameterSpec</code></p></td>
                <td colspan="1" rowspan="1" class="confluenceTd"><p><code>null</code></p></td>
                <td colspan="1" rowspan="1" class="confluenceTd"><p>A JCE AlgorithmParameterSpec used to initialize the Cipher.</p></td>
               </tr>
               <tr>
                <td colspan="1" rowspan="1" class="confluenceTd"><p><code>bufferSize</code></p></td>
                <td colspan="1" rowspan="1" class="confluenceTd"><p><code>Integer</code></p></td>
                <td colspan="1" rowspan="1" class="confluenceTd"><p><code>4096</code></p></td>
                <td colspan="1" rowspan="1" class="confluenceTd"><p>the size of the buffer used in the signature process.</p></td>
               </tr>
               <tr>
                <td colspan="1" rowspan="1" class="confluenceTd"><p><code>cryptoProvider</code></p></td>
                <td colspan="1" rowspan="1" class="confluenceTd"><p><code>String</code></p></td>
                <td colspan="1" rowspan="1" class="confluenceTd"><p><code>null</code></p></td>
                <td colspan="1" rowspan="1" class="confluenceTd"><p>The name of the JCE Security Provider that should be used.</p></td>
               </tr>
               <tr>
                <td colspan="1" rowspan="1" class="confluenceTd"><p><code>initializationVector</code></p></td>
                <td colspan="1" rowspan="1" class="confluenceTd"><p><code>byte[]</code></p></td>
                <td colspan="1" rowspan="1" class="confluenceTd"><p><code>null</code></p></td>
                <td colspan="1" rowspan="1" class="confluenceTd"><p>A byte array containing the Initialization Vector that will be used to initialize the Cipher.</p></td>
               </tr>
               <tr>
                <td colspan="1" rowspan="1" class="confluenceTd"><p><code>inline</code></p></td>
                <td colspan="1" rowspan="1" class="confluenceTd"><p><code>boolean</code></p></td>
                <td colspan="1" rowspan="1" class="confluenceTd"><p><code>false</code></p></td>
                <td colspan="1" rowspan="1" class="confluenceTd"><p>Flag indicating that the configured IV should be inlined into the encrypted data stream.</p></td>
               </tr>
               <tr>
                <td colspan="1" rowspan="1" class="confluenceTd"><p><code>macAlgorithm</code></p></td>
                <td colspan="1" rowspan="1" class="confluenceTd"><p><code>String</code></p></td>
                <td colspan="1" rowspan="1" class="confluenceTd"><p><code>null</code></p></td>
                <td colspan="1" rowspan="1" class="confluenceTd"><p>The JCE algorithm name indicating the Message Authentication algorithm.</p></td>
               </tr>
               <tr>
                <td colspan="1" rowspan="1" class="confluenceTd"><p><code>shouldAppendHMAC</code></p></td>
                <td colspan="1" rowspan="1" class="confluenceTd"><p><code>boolean</code></p></td>
                <td colspan="1" rowspan="1" class="confluenceTd"><p><code>null</code></p></td>
                <td colspan="1" rowspan="1" class="confluenceTd"><p>Flag indicating that a Message Authentication Code should be calculated and appended to the encrypted data.</p></td>
               </tr>
              </tbody>
             </table>
            </div>
            <h3 id="BookDataFormatAppendix-BasicUsage">Basic Usage</h3>
            <p>At its most basic all that is required to encrypt/decrypt an exchange is a shared secret key. If one or more instances of the Crypto data format are configured with this key the format can be used to encrypt the payload in one route (or part of one) and decrypted in another. For example, using the Java DSL as follows:
             <plain-text-body>
              {snippet:id=basic|lang=java|url=camel/trunk/components/camel-crypto/src/test/java/org/apache/camel/converter/crypto/CryptoDataFormatTest.java}
             </plain-text-body>In Spring the dataformat is configured first and then used in routes</p>
            <parameter ac:name="lang">
             xml
            </parameter>
            <plain-text-body>
             &lt;camelContext id="camel" xmlns="http://camel.apache.org/schema/spring"&gt; &lt;dataFormats&gt; &lt;crypto id="basic" algorithm="DES" keyRef="desKey" /&gt; &lt;/dataFormats&gt; ... &lt;route&gt; &lt;from uri="direct:basic-encryption" /&gt; &lt;marshal ref="basic" /&gt; &lt;to uri="mock:encrypted" /&gt; &lt;unmarshal ref="basic" /&gt; &lt;to uri="mock:unencrypted" /&gt; &lt;/route&gt; &lt;/camelContext&gt; 
            </plain-text-body>
            <h3 id="BookDataFormatAppendix-SpecifyingtheEncryptionAlgorithm">Specifying the Encryption Algorithm</h3>
            <p>Changing the algorithm is a matter of supplying the JCE algorithm name. If you change the algorithm you will need to use a compatible key.
             <plain-text-body>
              {snippet:id=algorithm|lang=java|url=camel/trunk/components/camel-crypto/src/test/java/org/apache/camel/converter/crypto/CryptoDataFormatTest.java}
             </plain-text-body>A list of the available algorithms in Java 7 is available via the <a shape="rect" class="external-link" href="http://docs.oracle.com/javase/7/docs/technotes/guides/security/StandardNames.html" rel="nofollow">Java Cryptography Architecture Standard Algorithm Name Documentation</a>.</p>
            <h3 id="BookDataFormatAppendix-SpecifyinganInitializationVector">Specifying an Initialization Vector</h3>
            <p>Some crypto algorithms, particularly block algorithms, require configuration with an initial block of data known as an Initialization Vector. In the JCE this is passed as an AlgorithmParameterSpec when the Cipher is initialized. To use such a vector with the CryptoDataFormat you can configure it with a byte[] containing the required data e.g.
             <plain-text-body>
              {snippet:id=init-vector|lang=java|url=camel/trunk/components/camel-crypto/src/test/java/org/apache/camel/converter/crypto/CryptoDataFormatTest.java}
             </plain-text-body>or with spring, suppling a reference to a byte[]
             <plain-text-body>
              {snippet:id=init-vector|lang=xml|url=camel/trunk/components/camel-crypto/src/test/resources/org/apache/camel/component/crypto/SpringCryptoDataFormatTest.xml}
             </plain-text-body>The same vector is required in both the encryption and decryption phases. As it is not necessary to keep the IV a secret, the DataFormat allows for it to be inlined into the encrypted data and subsequently read out in the decryption phase to initialize the Cipher. To inline the IV set the /oinline flag.
             <plain-text-body>
              {snippet:id=inline-init-vector|lang=java|url=camel/trunk/components/camel-crypto/src/test/java/org/apache/camel/converter/crypto/CryptoDataFormatTest.java}
             </plain-text-body>or with spring.
             <plain-text-body>
              {snippet:id=inline|lang=xml|url=camel/trunk/components/camel-crypto/src/test/resources/org/apache/camel/component/crypto/SpringCryptoDataFormatTest.xml}
             </plain-text-body>For more information of the use of Initialization Vectors, consult</p>
            <ul>
             <li><a shape="rect" class="external-link" href="http://en.wikipedia.org/wiki/Initialization_vector" rel="nofollow">http://en.wikipedia.org/wiki/Initialization_vector</a></li>
             <li><a shape="rect" class="external-link" href="http://www.herongyang.com/Cryptography/" rel="nofollow">http://www.herongyang.com/Cryptography/</a></li>
             <li><a shape="rect" class="external-link" href="http://en.wikipedia.org/wiki/Block_cipher_modes_of_operation" rel="nofollow">http://en.wikipedia.org/wiki/Block_cipher_modes_of_operation</a></li>
            </ul>
            <h3 id="BookDataFormatAppendix-HashedMessageAuthenticationCodes(HMAC)">Hashed Message Authentication Codes (HMAC)</h3>
            <p>To avoid attacks against the encrypted data while it is in transit the CryptoDataFormat can also calculate a Message Authentication Code for the encrypted exchange contents based on a configurable MAC algorithm. The calculated HMAC is appended to the stream after encryption. It is separated from the stream in the decryption phase. The MAC is recalculated and verified against the transmitted version to insure nothing was tampered with in transit.For more information on Message Authentication Codes see <a shape="rect" class="external-link" href="http://en.wikipedia.org/wiki/HMAC" rel="nofollow">http://en.wikipedia.org/wiki/HMAC</a>
             <plain-text-body>
              {snippet:id=hmac|lang=java|url=camel/trunk/components/camel-crypto/src/test/java/org/apache/camel/converter/crypto/CryptoDataFormatTest.java}
             </plain-text-body>or with spring.
             <plain-text-body>
              {snippet:id=hmac|lang=xml|url=camel/trunk/components/camel-crypto/src/test/resources/org/apache/camel/component/crypto/SpringCryptoDataFormatTest.xml}
             </plain-text-body>By default the HMAC is calculated using the HmacSHA1 mac algorithm though this can be easily changed by supplying a different algorithm name. See <a shape="rect" class="unresolved" href="#">here</a> for how to check what algorithms are available through the configured security providers
             <plain-text-body>
              {snippet:id=hmac-algorithm|lang=java|url=camel/trunk/components/camel-crypto/src/test/java/org/apache/camel/converter/crypto/CryptoDataFormatTest.java}
             </plain-text-body>or with spring.
             <plain-text-body>
              {snippet:id=hmac-algorithm|lang=xml|url=camel/trunk/components/camel-crypto/src/test/resources/org/apache/camel/component/crypto/SpringCryptoDataFormatTest.xml}
             </plain-text-body></p>
            <h3 id="BookDataFormatAppendix-SupplyingKeysDynamically">Supplying Keys Dynamically</h3>
            <p>When using a Recipient list or similar EIP the recipient of an exchange can vary dynamically. Using the same key across all recipients may neither be feasible or desirable. It would be useful to be able to specify keys dynamically on a per exchange basis. The exchange could then be dynamically enriched with the key of its target recipient before being processed by the data format. To facilitate this the DataFormat allow for keys to be supplied dynamically via the message headers below</p>
            <ul>
             <li><code>CryptoDataFormat.KEY</code> <code>"CamelCryptoKey"</code></li>
            </ul>
            <p>
             <plain-text-body>
              {snippet:id=key-in-header|lang=java|url=camel/trunk/components/camel-crypto/src/test/java/org/apache/camel/converter/crypto/CryptoDataFormatTest.java}
             </plain-text-body>or with spring.
             <plain-text-body>
              {snippet:id=header-key|lang=xml|url=camel/trunk/components/camel-crypto/src/test/resources/org/apache/camel/component/crypto/SpringCryptoDataFormatTest.xml}
             </plain-text-body></p>
            <h3 id="BookDataFormatAppendix-PGPMessage">PGP Message</h3>
            <p>The PGP Data Formater can create and decrypt/verify PGP Messages of the following PGP packet structure (entries in brackets are optional and ellipses indicate repetition, comma represents &nbsp;sequential composition, and vertical bar separates alternatives):</p>
            <p>&nbsp; &nbsp; Public Key Encrypted Session Key ..., Symmetrically Encrypted Data | Sym. Encrypted and Integrity Protected Data, (Compressed Data,) (One Pass Signature ...,)&nbsp;Literal Data, (Signature ...,)</p>
            <p><strong>Since Camel 2.16</strong>.<strong>0</strong> the Compressed Data packet is optional, before it was mandatory.</p>
            <p>&nbsp;</p>
            <h3 id="BookDataFormatAppendix-PGPDataFormatOptions">PGPDataFormat Options</h3>
            <div class="table-wrap">
             <table class="confluenceTable">
              <tbody>
               <tr>
                <th colspan="1" rowspan="1" class="confluenceTh"><p>Name</p></th>
                <th colspan="1" rowspan="1" class="confluenceTh"><p>Type</p></th>
                <th colspan="1" rowspan="1" class="confluenceTh"><p>Default</p></th>
                <th colspan="1" rowspan="1" class="confluenceTh"><p>Description</p></th>
               </tr>
               <tr>
                <td colspan="1" rowspan="1" class="confluenceTd"><p><code>keyUserid</code></p></td>
                <td colspan="1" rowspan="1" class="confluenceTd"><p><code>String</code></p></td>
                <td colspan="1" rowspan="1" class="confluenceTd"><p><code>null</code></p></td>
                <td colspan="1" rowspan="1" class="confluenceTd"><p>The user ID of the key in the PGP keyring used during encryption. See also option <code>keyUserids</code>. Can also be only a part of a user ID. For example, if the user ID is "Test User &lt;test@camel.com&gt;" then you can use the part "Test User" or "&lt;test@camel.com&gt;" to address the user ID.</p></td>
               </tr>
               <tr>
                <td colspan="1" rowspan="1" class="confluenceTd"><p><code>keyUserids</code></p></td>
                <td colspan="1" rowspan="1" class="confluenceTd"><p><code>List&lt;String&gt;</code></p></td>
                <td colspan="1" rowspan="1" class="confluenceTd"><p><code>null</code></p></td>
                <td colspan="1" rowspan="1" class="confluenceTd"><p><strong>Since camel 2.12.2</strong>: PGP allows to encrypt the symmetric key by several asymmetric public receiver keys. You can specify here the User IDs or parts of User IDs of several public keys contained in the PGP keyring. If you just have one User ID, then you can also use the option <code>keyUserid</code>. The User ID specified in <code>keyUserid</code> and the User IDs in <code>keyUserids</code> will be merged together and the corresponding public keys will be used for the encryption.</p></td>
               </tr>
               <tr>
                <td colspan="1" rowspan="1" class="confluenceTd"><p><code>password</code></p></td>
                <td colspan="1" rowspan="1" class="confluenceTd"><p><code>String</code></p></td>
                <td colspan="1" rowspan="1" class="confluenceTd"><p><code>null</code></p></td>
                <td colspan="1" rowspan="1" class="confluenceTd"><p>Password used when opening the private key (not used for encryption).</p></td>
               </tr>
               <tr>
                <td colspan="1" rowspan="1" class="confluenceTd"><p><code>keyFileName</code></p></td>
                <td colspan="1" rowspan="1" class="confluenceTd"><p><code>String</code></p></td>
                <td colspan="1" rowspan="1" class="confluenceTd"><p><code>null</code></p></td>
                <td colspan="1" rowspan="1" class="confluenceTd"><p>Filename of the keyring; must be accessible as a classpath resource (but you can specify a location in the file system by using the "file:" prefix).</p></td>
               </tr>
               <tr>
                <td colspan="1" rowspan="1" class="confluenceTd"><p><code>encryptionKeyRing</code></p></td>
                <td colspan="1" rowspan="1" class="confluenceTd"><p><code>byte[]</code></p></td>
                <td colspan="1" rowspan="1" class="confluenceTd"><p><code>null</code></p></td>
                <td colspan="1" rowspan="1" class="confluenceTd"><p><strong>Since camel 2.12.1</strong>: encryption keyring; you can not set the keyFileName and encryptionKeyRing at the same time.</p></td>
               </tr>
               <tr>
                <td colspan="1" rowspan="1" class="confluenceTd"><p><code>signatureKeyUserid</code></p></td>
                <td colspan="1" rowspan="1" class="confluenceTd"><p><code>String</code></p></td>
                <td colspan="1" rowspan="1" class="confluenceTd"><p><code>null</code></p></td>
                <td colspan="1" rowspan="1" class="confluenceTd"><p><strong>Since Camel 2.11.0</strong>; optional User ID of the key in the PGP keyring used for signing (during encryption) or signature verification (during decryption). During the signature verification process the specified User ID restricts the public keys from the public keyring which can be used for the verification. If no User ID is specified for the signature verficiation then any public key in the public keyring can be used for the verification. Can also be only a part of a user ID. For example, if the user ID is "Test User &lt;test@camel.com&gt;" then you can use the part "Test User" or "&lt;test@camel.com&gt;" to address the User ID.</p></td>
               </tr>
               <tr>
                <td colspan="1" rowspan="1" class="confluenceTd"><p><code>signatureKeyUserids</code></p></td>
                <td colspan="1" rowspan="1" class="confluenceTd"><p><code>List&lt;String&gt;</code></p></td>
                <td colspan="1" rowspan="1" class="confluenceTd"><p><code>null</code></p></td>
                <td colspan="1" rowspan="1" class="confluenceTd"><p><strong>Since Camel 2.12.3</strong>: optional list of User IDs of the key in the PGP keyring used for signing (during encryption) or signature verification (during decryption). You can specify here the User IDs or parts of User IDs of several keys contained in the PGP keyring. If you just have one User ID, then you can also use the option <code>keyUserid</code>. The User ID specified in <code>keyUserid</code> and the User IDs in <code>keyUserids</code> will be merged together and the corresponding keys will be used for the signing or signature verification. If the specified User IDs reference several keys then for each key a signature is added to the PGP result during the encryption-signing process. In the decryption-verifying process the list of User IDs restricts the list of public keys which can be used for signature verification. If the list of User IDs is empty then any public key in the public keyring can be used for the signature verification.</p></td>
               </tr>
               <tr>
                <td colspan="1" rowspan="1" class="confluenceTd"><p><code>signaturePassword</code></p></td>
                <td colspan="1" rowspan="1" class="confluenceTd"><p><code>String</code></p></td>
                <td colspan="1" rowspan="1" class="confluenceTd"><p><code>null</code></p></td>
                <td colspan="1" rowspan="1" class="confluenceTd"><p><strong>Since Camel 2.11.0</strong>: optional password used when opening the private key used for signing (during encryption).</p></td>
               </tr>
               <tr>
                <td colspan="1" rowspan="1" class="confluenceTd"><p><code>signatureKeyFileName</code></p></td>
                <td colspan="1" rowspan="1" class="confluenceTd"><p><code>String</code></p></td>
                <td colspan="1" rowspan="1" class="confluenceTd"><p><code>null</code></p></td>
                <td colspan="1" rowspan="1" class="confluenceTd"><p><strong>Since Camel 2.11.0</strong>: optional filename of the keyring to use for signing (during encryption) or for signature verification (during decryption); must be accessible as a classpath resource (but you can specify a location in the file system by using the "file:" prefix).</p></td>
               </tr>
               <tr>
                <td colspan="1" rowspan="1" class="confluenceTd"><p><code>signatureKeyRing</code></p></td>
                <td colspan="1" rowspan="1" class="confluenceTd"><p><code>byte[]</code></p></td>
                <td colspan="1" rowspan="1" class="confluenceTd"><p><code>null</code></p></td>
                <td colspan="1" rowspan="1" class="confluenceTd"><p><strong>Since camel 2.12.1</strong>: signature keyring; you can not set the signatureKeyFileName and signatureKeyRing at the same time.</p></td>
               </tr>
               <tr>
                <td colspan="1" rowspan="1" class="confluenceTd"><p><code>algorithm</code></p></td>
                <td colspan="1" rowspan="1" class="confluenceTd"><p><code>int</code></p></td>
                <td colspan="1" rowspan="1" class="confluenceTd"><p><code>SymmetricKeyAlgorithmTags.CAST5</code></p></td>
                <td colspan="1" rowspan="1" class="confluenceTd"><p><strong>Since camel 2.12.2</strong>: symmetric key encryption algorithm; possible values are defined in <code>org.bouncycastle.bcpg.SymmetricKeyAlgorithmTags</code>; for example 2 (= TRIPLE DES), 3 (= CAST5), 4 (= BLOWFISH), 6 (= DES), 7 (= AES_128). Only relevant for encrypting.</p></td>
               </tr>
               <tr>
                <td colspan="1" rowspan="1" class="confluenceTd"><p><code>compressionAlgorithm</code></p></td>
                <td colspan="1" rowspan="1" class="confluenceTd"><p><code>int</code></p></td>
                <td colspan="1" rowspan="1" class="confluenceTd"><p><code>CompressionAlgorithmTags.ZIP</code></p></td>
                <td colspan="1" rowspan="1" class="confluenceTd"><p><strong>Since camel 2.12.2</strong>: compression algorithm; possible values are defined in <code>org.bouncycastle.bcpg.CompressionAlgorithmTags</code>; for example 0 (= UNCOMPRESSED), 1 (= ZIP), 2 (= ZLIB), 3 (= BZIP2). Only relevant for encrypting.</p></td>
               </tr>
               <tr>
                <td colspan="1" rowspan="1" class="confluenceTd"><p><code>hashAlgorithm</code></p></td>
                <td colspan="1" rowspan="1" class="confluenceTd"><p><code>int</code></p></td>
                <td colspan="1" rowspan="1" class="confluenceTd"><p><code>HashAlgorithmTags.SHA1</code></p></td>
                <td colspan="1" rowspan="1" class="confluenceTd"><p><strong>Since camel 2.12.2</strong>: signature hash algorithm; possible values are defined in <code>org.bouncycastle.bcpg.HashAlgorithmTags</code>; for example 2 (= SHA1), 8 (= SHA256), 9 (= SHA384), 10 (= SHA512), 11 (=SHA224). Only relevant for signing.</p></td>
               </tr>
               <tr>
                <td colspan="1" rowspan="1" class="confluenceTd"><p><code>armored</code></p></td>
                <td colspan="1" rowspan="1" class="confluenceTd"><p><code>boolean</code></p></td>
                <td colspan="1" rowspan="1" class="confluenceTd"><p><code>false</code></p></td>
                <td colspan="1" rowspan="1" class="confluenceTd"><p>This option will cause PGP to base64 encode the encrypted text, making it available for copy/paste, etc.</p></td>
               </tr>
               <tr>
                <td colspan="1" rowspan="1" class="confluenceTd"><p><code>integrity</code></p></td>
                <td colspan="1" rowspan="1" class="confluenceTd"><p><code>boolean</code></p></td>
                <td colspan="1" rowspan="1" class="confluenceTd"><p><code>true</code></p></td>
                <td colspan="1" rowspan="1" class="confluenceTd"><p>Adds an integrity check/sign into the encryption file.</p></td>
               </tr>
               <tr>
                <td colspan="1" rowspan="1" class="confluenceTd"><p><code>passphraseAccessor</code></p></td>
                <td colspan="1" rowspan="1" class="confluenceTd"><p><code><a shape="rect" class="external-link" href="https://github.com/apache/camel/blob/master/components/camel-crypto/src/main/java/org/apache/camel/converter/crypto/PGPPassphraseAccessor.java" rel="nofollow">PGPPassphraseAccessor</a></code></p></td>
                <td colspan="1" rowspan="1" class="confluenceTd"><p><code>null</code></p></td>
                <td colspan="1" rowspan="1" class="confluenceTd"><p><strong>Since Camel 2.12.2</strong>: provides passphrases corresponding to user Ids. If no passpharase can be found from the option <code>password</code> or <code>signaturePassword</code> and from the headers <code>CamelPGPDataFormatKeyPassword</code> or <code>CamelPGPDataFormatSignatureKeyPassword</code> then the passphrase is fetched from the passphrase accessor. You provide a bean which implements the interface <a shape="rect" class="external-link" href="https://github.com/apache/camel/blob/master/components/camel-crypto/src/main/java/org/apache/camel/converter/crypto/PGPPassphraseAccessor.java" rel="nofollow">PGPPassphraseAccessor</a>. A default implementation is given by <a shape="rect" class="external-link" href="https://github.com/apache/camel/blob/master/components/camel-crypto/src/main/java/org/apache/camel/converter/crypto/DefaultPGPPassphraseAccessor.java" rel="nofollow">DefaultPGPPassphraseAccessor</a>. The passphrase accessor is especially useful in the decrypt case; see chapter 'PGP Decrypting/Verifying of Messages Encrypted/Signed by Different Private/Public Keys' below.</p></td>
               </tr>
               <tr>
                <td colspan="1" rowspan="1" class="confluenceTd"><p><code>signatureVerificationOption</code></p></td>
                <td colspan="1" rowspan="1" class="confluenceTd"><p><code>String</code></p></td>
                <td colspan="1" rowspan="1" class="confluenceTd"><p><code>"optional"</code></p></td>
                <td colspan="1" rowspan="1" class="confluenceTd"><p><strong>Since Camel 2.13.0</strong>: controls the behavior for verifying the signature during unmarshaling. There are three values possible:</p>
                 <ul>
                  <li><code>"optional"</code>: The PGP message may or may not contain signatures; if it does contain signatures, then a signature verification is executed. Use the constant PGPKeyAccessDataFormat.SIGNATURE_VERIFICATION_OPTION_OPTIONAL.</li>
                  <li><code>"required"</code>: The PGP message must contain at least one signature; if this is not the case an exception (PGPException) is thrown. A signature verification is executed. Use the constant PGPKeyAccessDataFormat.SIGNATURE_VERIFICATION_OPTION_REQUIRED.</li>
                  <li><code>"ignore"</code>: Contained signatures in the PGP message are ignored; no signature verification is executed. Use the constant PGPKeyAccessDataFormat.SIGNATURE_VERIFICATION_OPTION_IGNORE.</li>
                  <li><code>"no_signature_allowed"</code>: The PGP message must not contain a signature; otherwise an exception (PGPException) is thrown. Use the constant PGPKeyAccessDataFormat.SIGNATURE_VERIFICATION_OPTION_NO_SIGNATURE_ALLOWED.</li>
                 </ul></td>
               </tr>
               <tr>
                <td colspan="1" rowspan="1" class="confluenceTd"><p><code>FileName</code></p></td>
                <td colspan="1" rowspan="1" class="confluenceTd"><code>String</code></td>
                <td colspan="1" rowspan="1" class="confluenceTd"><code>"_CONSOLE"</code></td>
                <td colspan="1" rowspan="1" class="confluenceTd"><p><strong>Since camel 2.15.0</strong>: Sets the file name for the literal data packet. Can be overwritten by the&nbsp; header {@link Exchange#FILE_NAME}.</p><p>"<code>_CONSOLE</code>" indicates that the message is considered to be "for your eyes only". This advises that the message data is unusually sensitive, and the receiving program should process it more carefully, perhaps avoiding storing the received data to disk, for example.Only used for marshaling.</p></td>
               </tr>
               <tr>
                <td colspan="1" rowspan="1" class="confluenceTd"><p><code>withCompressedDataPacket</code></p></td>
                <td colspan="1" rowspan="1" class="confluenceTd"><p>boolean</p></td>
                <td colspan="1" rowspan="1" class="confluenceTd"><p><code>true</code></p></td>
                <td colspan="1" rowspan="1" class="confluenceTd"><p><strong>Since Camel 2.16.0</strong>: Indicator whether the PGP Message shall be created with or without a Compressed Data packet. If the value is set to false, then no Compressed Data packet is added and the compressionAlgorithm value is ignored. Only used for marshaling.</p></td>
               </tr>
              </tbody>
             </table>
            </div>
            <h3 id="BookDataFormatAppendix-PGPDataFormatMessageHeaders">PGPDataFormat Message Headers</h3>
            <p>You can override the PGPDataFormat options by applying below headers into message dynamically.</p>
            <p>&nbsp;</p>
            <div class="table-wrap">
             <table class="confluenceTable">
              <tbody>
               <tr>
                <th colspan="1" rowspan="1" class="confluenceTh"><p>Name</p></th>
                <th colspan="1" rowspan="1" class="confluenceTh"><p>Type</p></th>
                <th colspan="1" rowspan="1" class="confluenceTh"><p>Description</p></th>
               </tr>
               <tr>
                <td colspan="1" rowspan="1" class="confluenceTd"><p><code>CamelPGPDataFormatKeyFileName</code></p></td>
                <td colspan="1" rowspan="1" class="confluenceTd"><p><code>String</code></p></td>
                <td colspan="1" rowspan="1" class="confluenceTd"><p><strong>Since Camel 2.11.0</strong>; filename of the keyring; will override existing setting directly on the PGPDataFormat.</p></td>
               </tr>
               <tr>
                <td colspan="1" rowspan="1" class="confluenceTd"><p><code>CamelPGPDataFormatEncryptionKeyRing</code></p></td>
                <td colspan="1" rowspan="1" class="confluenceTd"><p><code>byte[]</code></p></td>
                <td colspan="1" rowspan="1" class="confluenceTd"><p><strong>Since Camel 2.12.1</strong>; the encryption keyring; will override existing setting directly on the PGPDataFormat.</p></td>
               </tr>
               <tr>
                <td colspan="1" rowspan="1" class="confluenceTd"><p><code>CamelPGPDataFormatKeyUserid</code></p></td>
                <td colspan="1" rowspan="1" class="confluenceTd"><p><code>String</code></p></td>
                <td colspan="1" rowspan="1" class="confluenceTd"><p><strong>Since Camel 2.11.0</strong>; the User ID of the key in the PGP keyring; will override existing setting directly on the PGPDataFormat.</p></td>
               </tr>
               <tr>
                <td colspan="1" rowspan="1" class="confluenceTd"><p><code>CamelPGPDataFormatKeyUserids</code></p></td>
                <td colspan="1" rowspan="1" class="confluenceTd"><p><code>List&lt;String&gt;</code></p></td>
                <td colspan="1" rowspan="1" class="confluenceTd"><p><strong>Since camel 2.12.2</strong>: the User IDs of the key in the PGP keyring; will override existing setting directly on the PGPDataFormat.</p></td>
               </tr>
               <tr>
                <td colspan="1" rowspan="1" class="confluenceTd"><p><code>CamelPGPDataFormatKeyPassword</code></p></td>
                <td colspan="1" rowspan="1" class="confluenceTd"><p><code>String</code></p></td>
                <td colspan="1" rowspan="1" class="confluenceTd"><p><strong>Since Camel 2.11.0</strong>; password used when opening the private key; will override existing setting directly on the PGPDataFormat.</p></td>
               </tr>
               <tr>
                <td colspan="1" rowspan="1" class="confluenceTd"><p><code>CamelPGPDataFormatSignatureKeyFileName</code></p></td>
                <td colspan="1" rowspan="1" class="confluenceTd"><p><code>String</code></p></td>
                <td colspan="1" rowspan="1" class="confluenceTd"><p><strong>Since Camel 2.11.0</strong>; filename of the signature keyring; will override existing setting directly on the PGPDataFormat.</p></td>
               </tr>
               <tr>
                <td colspan="1" rowspan="1" class="confluenceTd"><p><code>CamelPGPDataFormatSignatureKeyRing</code></p></td>
                <td colspan="1" rowspan="1" class="confluenceTd"><p><code>byte[]</code></p></td>
                <td colspan="1" rowspan="1" class="confluenceTd"><p><strong>Since Camel 2.12.1</strong>; the signature keyring; will override existing setting directly on the PGPDataFormat.</p></td>
               </tr>
               <tr>
                <td colspan="1" rowspan="1" class="confluenceTd"><p><code>CamelPGPDataFormatSignatureKeyUserid</code></p></td>
                <td colspan="1" rowspan="1" class="confluenceTd"><p><code>String</code></p></td>
                <td colspan="1" rowspan="1" class="confluenceTd"><p><strong>Since Camel 2.11.0</strong>; the User ID of the signature key in the PGP keyring; will override existing setting directly on the PGPDataFormat.</p></td>
               </tr>
               <tr>
                <td colspan="1" rowspan="1" class="confluenceTd"><code>CamelPGPDataFormatSignatureKeyUserids</code></td>
                <td colspan="1" rowspan="1" class="confluenceTd"><code>List&lt;String&gt;</code></td>
                <td colspan="1" rowspan="1" class="confluenceTd"><strong>Since Camel 2.12.3</strong>; the User IDs of the signature keys in the PGP keyring; will override existing setting directly on the PGPDataFormat.</td>
               </tr>
               <tr>
                <td colspan="1" rowspan="1" class="confluenceTd"><p><code>CamelPGPDataFormatSignatureKeyPassword</code></p></td>
                <td colspan="1" rowspan="1" class="confluenceTd"><p><code>String</code></p></td>
                <td colspan="1" rowspan="1" class="confluenceTd"><p><strong>Since Camel 2.11.0</strong>; password used when opening the signature private key; will override existing setting directly on the PGPDataFormat.</p></td>
               </tr>
               <tr>
                <td colspan="1" rowspan="1" class="confluenceTd"><p><code>CamelPGPDataFormatEncryptionAlgorithm</code></p></td>
                <td colspan="1" rowspan="1" class="confluenceTd"><p><code>int</code></p></td>
                <td colspan="1" rowspan="1" class="confluenceTd"><p><strong>Since Camel 2.12.2</strong>; symmetric key encryption algorithm; will override existing setting directly on the PGPDataFormat.</p></td>
               </tr>
               <tr>
                <td colspan="1" rowspan="1" class="confluenceTd"><p><code>CamelPGPDataFormatSignatureHashAlgorithm</code></p></td>
                <td colspan="1" rowspan="1" class="confluenceTd"><p><code>int</code></p></td>
                <td colspan="1" rowspan="1" class="confluenceTd"><p><strong>Since Camel 2.12.2</strong>; signature hash algorithm; will override existing setting directly on the PGPDataFormat.</p></td>
               </tr>
               <tr>
                <td colspan="1" rowspan="1" class="confluenceTd"><p><code>CamelPGPDataFormatCompressionAlgorithm</code></p></td>
                <td colspan="1" rowspan="1" class="confluenceTd"><p><code>int</code></p></td>
                <td colspan="1" rowspan="1" class="confluenceTd"><p><strong>Since Camel 2.12.2</strong>; compression algorithm; will override existing setting directly on the PGPDataFormat.</p></td>
               </tr>
               <tr>
                <td colspan="1" rowspan="1" class="confluenceTd"><p><code>CamelPGPDataFormatNumberOfEncryptionKeys</code></p></td>
                <td colspan="1" rowspan="1" class="confluenceTd"><code>Integer</code></td>
                <td colspan="1" rowspan="1" class="confluenceTd"><strong>Since</strong>&nbsp;<strong>Camel 2.12.3;&nbsp; </strong>number of public keys used for encrypting the symmectric key, set by PGPDataFormat during encryptiion process</td>
               </tr>
               <tr>
                <td colspan="1" rowspan="1" class="confluenceTd"><p><code>CamelPGPDataFormatNumberOfSigningKeys</code></p></td>
                <td colspan="1" rowspan="1" class="confluenceTd"><code>Integer</code></td>
                <td colspan="1" rowspan="1" class="confluenceTd"><strong>Since</strong>&nbsp;<strong>Camel 2.12.3;&nbsp; </strong>number of private keys used for creating signatures, set by PGPDataFormat during signing process</td>
               </tr>
              </tbody>
             </table>
            </div>
            <h3 id="BookDataFormatAppendix-EncryptingwithPGPDataFormat">Encrypting with PGPDataFormat</h3>
            <p>The following sample uses the popular PGP format for encrypting/decrypting files using the <a shape="rect" class="external-link" href="http://www.bouncycastle.org/java.html" rel="nofollow">Bouncy Castle Java libraries</a>:
             <plain-text-body>
              {snippet:id=pgp-format|lang=java|url=camel/trunk/components/camel-crypto/src/test/java/org/apache/camel/converter/crypto/PGPDataFormatTest.java}
             </plain-text-body>The following sample performs signing + encryption, and then signature verification + decryption. It uses the same keyring for both signing and encryption, but you can obviously use different keys:
             <plain-text-body>
              {snippet:id=pgp-format-signature|lang=java|url=camel/trunk/components/camel-crypto/src/test/java/org/apache/camel/converter/crypto/PGPDataFormatTest.java}
             </plain-text-body>Or using Spring:
             <plain-text-body>
              {snippet:id=pgp-xml-basic|lang=xml|url=camel/trunk/components/camel-crypto/src/test/resources/org/apache/camel/component/crypto/SpringPGPDataFormatTest.xml}
             </plain-text-body></p>
            <h4 id="BookDataFormatAppendix-Toworkwiththepreviousexampleyouneedthefollowing">To work with the previous example you need the following</h4>
            <ul>
             <li>A public keyring file which contains the public keys used to encrypt the data</li>
             <li>A private keyring file which contains the keys used to decrypt the data</li>
             <li>The keyring password</li>
            </ul>
            <h4 id="BookDataFormatAppendix-Managingyourkeyring">Managing your keyring</h4>
            <p>To manage the keyring, I use the command line tools, I find this to be the simplest approach in managing the keys. There are also Java libraries available from <a shape="rect" class="external-link" href="http://www.bouncycastle.org/java.html" rel="nofollow">http://www.bouncycastle.org/java.html</a> if you would prefer to do it that way.</p>
            <ol>
             <li><p>Install the command line utilities on linux</p>
              <plain-text-body>
               apt-get install gnupg
              </plain-text-body></li>
             <li><p>Create your keyring, entering a secure password</p>
              <plain-text-body>
               gpg --gen-key
              </plain-text-body></li>
             <li><p>If you need to import someone elses public key so that you can encrypt a file for them.</p>
              <plain-text-body>
               gpg --import &lt;filename.key
              </plain-text-body></li>
             <li><p>The following files should now exist and can be used to run the example</p>
              <plain-text-body>
               ls -l ~/.gnupg/pubring.gpg ~/.gnupg/secring.gpg
              </plain-text-body></li>
            </ol>
            <h3 id="BookDataFormatAppendix-PGPDecrypting/VerifyingofMessagesEncrypted/SignedbyDifferentPrivate/PublicKeys">PGP Decrypting/Verifying of Messages Encrypted/Signed by Different Private/Public Keys</h3>
            <p>Since <strong>Camel 2.12.2</strong>.</p>
            <p>A PGP Data Formater can decrypt/verify messages which have been encrypted by different public keys or signed by different private keys. Just, provide the corresponding private keys in the secret keyring, the corresponding public keys in the public keyring, and the passphrases in the passphrase accessor.</p>
            <parameter ac:name="language">
             java
            </parameter>
            <plain-text-body>
             Map&lt;String, String&gt; userId2Passphrase = new HashMap&lt;String, String&gt;(2); // add passphrases of several private keys whose corresponding public keys have been used to encrypt the messages userId2Passphrase.put("UserIdOfKey1","passphrase1"); // you must specify the exact User ID! userId2Passphrase.put("UserIdOfKey2","passphrase2"); PGPPassphraseAccessor passphraseAccessor = new PGPPassphraseAccessorDefault(userId2Passphrase); PGPDataFormat pgpVerifyAndDecrypt = new PGPDataFormat(); pgpVerifyAndDecrypt.setPassphraseAccessor(passphraseAccessor); // the method getSecKeyRing() provides the secret keyring as byte array containing the private keys pgpVerifyAndDecrypt.setEncryptionKeyRing(getSecKeyRing()); // alternatively you can use setKeyFileName(keyfileName) // the method getPublicKeyRing() provides the public keyring as byte array containing the public keys pgpVerifyAndDecrypt.setSignatureKeyRing((getPublicKeyRing()); // alternatively you can use setSignatureKeyFileName(signatgureKeyfileName) // it is not necessary to specify the encryption or signer User Id from("direct:start") ... .unmarshal(pgpVerifyAndDecrypt) // can decrypt/verify messages encrypted/signed by different private/public keys ... 
            </plain-text-body>
            <ul>
             <li>The functionality is especially useful to support the key exchange. If you want to exchange the private key for decrypting you can accept for a period of time messages which are either encrypted with the old or new corresponding public key. Or if the sender wants to exchange his signer private key, you can accept for a period of time, the old or new signer key.</li>
             <li>Technical background: The PGP encrypted data contains a Key ID of the public key which was used to encrypt the data. This Key ID can be used to locate the private key in the secret keyring to decrypt the data. The same mechanism is also used to locate the public key for verifying a signature. Therefore you no longer must specify User IDs for the unmarshaling.</li>
            </ul>
            <h3 id="BookDataFormatAppendix-RestrictingtheSignerIdentitiesduringPGPSignatureVerification">Restricting the Signer Identities during PGP Signature Verification</h3>
            <p>Since&nbsp;<strong>Camel 2.12.3.</strong></p>
            <p>If you verify a signature you not only want to verify the correctness of the signature but you also want check that the signature comes from a certain identity or a specific set of identities. Therefore it is possible to restrict the number of public keys from the public keyring which can be used for the verification of a signature. &nbsp;</p>
            <parameter ac:name="language">
             java
            </parameter>
            <parameter ac:name="title">
             Signature User IDs
            </parameter>
            <plain-text-body>
             // specify the User IDs of the expected signer identities List&lt;String&gt; expectedSigUserIds = new ArrayList&lt;String&gt;(); expectedSigUserIds.add("Trusted company1"); expectedSigUserIds.add("Trusted company2"); &nbsp; PGPDataFormat pgpVerifyWithSpecificKeysAndDecrypt = new PGPDataFormat(); pgpVerifyWithSpecificKeysAndDecrypt.setPassword("my password"); // for decrypting with private key pgpVerifyWithSpecificKeysAndDecrypt.setKeyFileName(keyfileName); pgpVerifyWithSpecificKeysAndDecrypt.setSignatureKeyFileName(signatgureKeyfileName); pgpVerifyWithSpecificKeysAndDecrypt.setSignatureKeyUserids(expectedSigUserIds); // if you have only one signer identity then you can also use setSignatureKeyUserid("expected Signer") &nbsp; from("direct:start") ... .unmarshal(pgpVerifyWithSpecificKeysAndDecrypt) ... 
            </plain-text-body>
            <ul>
             <li>If the PGP content has several signatures the verification is successful as soon as one signature can be verified.</li>
             <li>If you do not want to restrict the signer identities for verification then do not specify the signature key User IDs. In this case all public keys in the public keyring are taken into account.</li>
            </ul>
            <h3 id="BookDataFormatAppendix-SeveralSignaturesinOnePGPDataFormat">Several Signatures in One PGP Data Format</h3>
            <p>Since&nbsp;<strong>Camel 2.12.3.</strong></p>
            <p>The PGP specification allows that one PGP data format can contain several signatures from different keys. Since Camel 2.13.3 it is possible to create such kind of PGP content via specifying signature User IDs which relate to several private keys in the secret keyring.</p>
            <parameter ac:name="language">
             java
            </parameter>
            <parameter ac:name="title">
             Several Signatures
            </parameter>
            <plain-text-body>
              PGPDataFormat pgpSignAndEncryptSeveralSignerKeys = new PGPDataFormat(); pgpSignAndEncryptSeveralSignerKeys.setKeyUserid(keyUserid); // for encrypting, you can also use setKeyUserids if you want to encrypt with several keys pgpSignAndEncryptSeveralSignerKeys.setKeyFileName(keyfileName); pgpSignAndEncryptSeveralSignerKeys.setSignatureKeyFileName(signatgureKeyfileName); pgpSignAndEncryptSeveralSignerKeys.setSignaturePassword("sdude"); // here we assume that all private keys have the same password, if this is not the case then you can use setPassphraseAccessor List&lt;String&gt; signerUserIds = new ArrayList&lt;String&gt;(); signerUserIds.add("company old key"); signerUserIds.add("company new key"); pgpSignAndEncryptSeveralSignerKeys.setSignatureKeyUserids(signerUserIds); &nbsp; from("direct:start") ... .marshal(pgpSignAndEncryptSeveralSignerKeys) ... 
            </plain-text-body>
            <h3 id="BookDataFormatAppendix-SupportofSub-KeysandKeyFlagsinPGPDataFormatMarshaler">Support of Sub-Keys and Key Flags in PGP Data Format Marshaler</h3>
            <p>Since&nbsp;<strong>Camel 2.12.3.<br clear="none"></strong>An <a shape="rect" class="external-link" href="https://tools.ietf.org/html/rfc4880#section-12.1" rel="nofollow">OpenPGP V4 key</a> can have a primary key and sub-keys. The usage of the keys is indicated by the so called <a shape="rect" class="external-link" href="https://tools.ietf.org/html/rfc4880#section-5.2.3.21" rel="nofollow">Key Flags</a>. For example, you can have a primary key with two sub-keys; the primary key shall only be used for certifying other keys (Key Flag 0x01), the first sub-key&nbsp; shall only be used for signing (Key Flag 0x02), and the second sub-key shall only be used for encryption (Key Flag 0x04 or 0x08). The PGP Data Format marshaler takes into account these Key Flags of the primary key and sub-keys in order to determine the right key for signing and encryption. This is necessary because the primary key and its sub-keys have the same User IDs.</p>
            <h3 id="BookDataFormatAppendix-SupportofCustomKeyAccessors">Support of Custom Key Accessors</h3>
            <p>Since <strong>Camel 2.13.0.<br clear="none"></strong>You can implement custom key accessors for encryption/signing. The above PGPDataFormat class selects in a certain predefined way the keys which should be used for signing/encryption or verifying/decryption. If you have special requirements how your keys should be selected you should use the <a shape="rect" class="external-link" href="https://github.com/apache/camel/blob/master/components/camel-crypto/src/main/java/org/apache/camel/converter/crypto/PGPKeyAccessDataFormat.java" rel="nofollow">PGPKeyAccessDataFormat</a> class instead and implement the interfaces <a shape="rect" class="external-link" href="https://github.com/apache/camel/blob/master/components/camel-crypto/src/main/java/org/apache/camel/converter/crypto/PGPPublicKeyAccessor.java" rel="nofollow">PGPPublicKeyAccessor</a> and <a shape="rect" class="external-link" href="https://github.com/apache/camel/blob/master/components/camel-crypto/src/main/java/org/apache/camel/converter/crypto/PGPSecretKeyAccessor.java" rel="nofollow">PGPSecretKeyAccessor</a> as beans. There are default implementations <a shape="rect" class="external-link" href="https://github.com/apache/camel/blob/master/components/camel-crypto/src/main/java/org/apache/camel/converter/crypto/DefaultPGPPublicKeyAccessor.java" rel="nofollow">DefaultPGPPublicKeyAccessor</a> and <a shape="rect" class="external-link" href="https://github.com/apache/camel/blob/master/components/camel-crypto/src/main/java/org/apache/camel/converter/crypto/DefaultPGPSecretKeyAccessor.java" rel="nofollow">DefaultPGPSecretKeyAccessor</a> which cache the keys, so that not every time the keyring is parsed when the processor is called.</p>
            <p>PGPKeyAccessDataFormat has the same options as PGPDataFormat except password, keyFileName, encryptionKeyRing, signaturePassword, signatureKeyFileName, and signatureKeyRing.</p>
            <h3 id="BookDataFormatAppendix-Dependencies.14">Dependencies</h3>
            <p>To use the <a shape="rect" href="crypto.html">Crypto</a> dataformat in your camel routes you need to add the following dependency to your pom.</p>
            <parameter ac:name="">
             xml
            </parameter>
            <plain-text-body>
             &lt;dependency&gt; &lt;groupId&gt;org.apache.camel&lt;/groupId&gt; &lt;artifactId&gt;camel-crypto&lt;/artifactId&gt; &lt;version&gt;x.x.x&lt;/version&gt; &lt;!-- use the same version as your Camel core version --&gt; &lt;/dependency&gt; 
            </plain-text-body>
            <h3 id="BookDataFormatAppendix-SeeAlso">See Also</h3>
            <ul>
             <li><a shape="rect" href="data-format.html">Data Format</a></li>
             <li><a shape="rect" href="crypto-digital-signatures.html">Crypto (Digital Signatures)</a></li>
             <li><a shape="rect" class="external-link" href="http://www.bouncycastle.org/java.html" rel="nofollow">http://www.bouncycastle.org/java.html</a></li>
            </ul> 
            <h2 id="BookDataFormatAppendix-SyslogDataFormat">Syslog DataFormat</h2>
            <p><strong>Available as of Camel 2.6</strong></p>
            <p>The <strong>syslog</strong> dataformat is used for working with <a shape="rect" class="external-link" href="http://www.ietf.org/rfc/rfc3164.txt" rel="nofollow">RFC3164</a>&nbsp;and RFC5424 messages.</p>
            <p>This component supports the following:</p>
            <ul class="alternate">
             <li>UDP consumption of syslog messages</li>
             <li>Agnostic data format using either plain String objects or SyslogMessage model objects.</li>
             <li><a shape="rect" href="type-converter.html">Type Converter</a> from/to SyslogMessage and String</li>
             <li>Integration with the <a shape="rect" href="mina.html">camel-mina</a> component.</li>
             <li>Integration with the <a shape="rect" href="netty.html">camel-netty</a> component.</li>
             <li><strong>Camel 2.14:</strong> Encoder and decoder for the&nbsp;<a shape="rect" href="netty.html">camel-netty</a>&nbsp;component.</li>
             <li><strong>Camel 2.14:</strong>&nbsp;Support for RFC5424 also.</li>
            </ul>
            <p>Maven users will need to add the following dependency to their <code>pom.xml</code> for this component:</p>
            <div class="code panel pdl" style="border-width: 1px;">
             <div class="codeContent panelContent pdl"> 
              <script class="brush: java; gutter: false; theme: Default" type="syntaxhighlighter"><![CDATA[&lt;dependency&gt;
    &lt;groupId&gt;org.apache.camel&lt;/groupId&gt;
    &lt;artifactId&gt;camel-syslog&lt;/artifactId&gt;
    &lt;version&gt;x.x.x&lt;/version&gt;
    &lt;!-- use the same version as your Camel core version --&gt;
&lt;/dependency&gt;
]]></script> 
             </div>
            </div>
            <h3 id="BookDataFormatAppendix-RFC3164Syslogprotocol">RFC3164 Syslog protocol</h3>
            <p>Syslog uses the user datagram protocol (UDP) <a shape="rect" class="unresolved" href="#">1</a> as its underlying transport layer mechanism. <br clear="none"> The UDP port that has been assigned to syslog is 514.</p>
            <p>To expose a Syslog listener service we reuse the existing <a shape="rect" href="mina.html">camel-mina</a> component or <a shape="rect" href="netty.html">camel-netty</a> where we just use the <code>Rfc3164SyslogDataFormat</code> to marshal and unmarshal messages. Notice that from&nbsp;<strong>Camel 2.14</strong> onwards the syslog dataformat is renamed to <code>SyslogDataFormat</code>.</p>
            <h3 id="BookDataFormatAppendix-RFC5424Syslogprotocol">RFC5424 Syslog protocol</h3>
            <p><strong>Available as of Camel 2.14</strong></p>
            <p>To expose a Syslog listener service we reuse the existing&nbsp;<a shape="rect" href="mina.html">camel-mina</a>&nbsp;component or&nbsp;<a shape="rect" href="netty.html">camel-netty</a>&nbsp;where we just use the&nbsp;<code>SyslogDataFormat</code>&nbsp;to marshal and unmarshal messages</p>
            <h4 id="BookDataFormatAppendix-ExposingaSysloglistener">Exposing a Syslog listener</h4>
            <p>In our Spring XML file, we configure an endpoint to listen for udp messages on port 10514, note that in netty we disable the defaultCodec, this <br clear="none"> will allow a fallback to a NettyTypeConverter and delivers the message as an InputStream:</p>
            <div class="code panel pdl" style="border-width: 1px;">
             <div class="codeContent panelContent pdl"> 
              <script class="brush: java; gutter: false; theme: Default" type="syntaxhighlighter"><![CDATA[&lt;camelContext id=&quot;myCamel&quot; xmlns=&quot;http://camel.apache.org/schema/spring&quot;&gt;

    &lt;dataFormats&gt;
          &lt;syslog id=&quot;mySyslog&quot;/&gt;
    &lt;/dataFormats&gt;

    &lt;route&gt;
          &lt;from uri=&quot;netty:udp://localhost:10514?sync=false&amp;amp;allowDefaultCodec=false&quot;/&gt;
          &lt;unmarshal ref=&quot;mySyslog&quot;/&gt;
          &lt;to uri=&quot;mock:stop1&quot;/&gt;
    &lt;/route&gt;

&lt;/camelContext&gt;
]]></script> 
             </div>
            </div>
            <p>The same route using <a shape="rect" href="mina.html">camel-mina</a></p>
            <div class="code panel pdl" style="border-width: 1px;">
             <div class="codeContent panelContent pdl"> 
              <script class="brush: java; gutter: false; theme: Default" type="syntaxhighlighter"><![CDATA[&lt;camelContext id=&quot;myCamel&quot; xmlns=&quot;http://camel.apache.org/schema/spring&quot;&gt;

    &lt;dataFormats&gt;
          &lt;syslog id=&quot;mySyslog&quot;/&gt;
    &lt;/dataFormats&gt;

    &lt;route&gt;
          &lt;from uri=&quot;mina:udp://localhost:10514&quot;/&gt;
          &lt;unmarshal ref=&quot;mySyslog&quot;/&gt;
          &lt;to uri=&quot;mock:stop1&quot;/&gt;
    &lt;/route&gt;

&lt;/camelContext&gt;
]]></script> 
             </div>
            </div>
            <h4 id="BookDataFormatAppendix-Sendingsyslogmessagestoaremotedestination">Sending syslog messages to a remote destination</h4>
            <div class="code panel pdl" style="border-width: 1px;">
             <div class="codeContent panelContent pdl"> 
              <script class="brush: java; gutter: false; theme: Default" type="syntaxhighlighter"><![CDATA[&lt;camelContext id=&quot;myCamel&quot; xmlns=&quot;http://camel.apache.org/schema/spring&quot;&gt;

    &lt;dataFormats&gt;
        &lt;syslog id=&quot;mySyslog&quot;/&gt;
    &lt;/dataFormats&gt;

    &lt;route&gt;
        &lt;from uri=&quot;direct:syslogMessages&quot;/&gt;
        &lt;marshal ref=&quot;mySyslog&quot;/&gt;
        &lt;to uri=&quot;mina:udp://remotehost:10514&quot;/&gt;
    &lt;/route&gt;

&lt;/camelContext&gt;
]]></script> 
             </div>
            </div>
            <p></p>
            <h3 id="BookDataFormatAppendix-SeeAlso.1">See Also</h3> 
            <ul>
             <li><a shape="rect" href="configuring-camel.html">Configuring Camel</a></li>
             <li><a shape="rect" href="component.html">Component</a></li>
             <li><a shape="rect" href="endpoint.html">Endpoint</a></li>
             <li><a shape="rect" href="getting-started.html">Getting Started</a></li>
            </ul>
           </div> </td> 
          <td valign="top"> 
           <div class="navigation"> 
            <div class="navigation_top"> 
             <!-- NavigationBar --> 
             <div class="navigation_bottom" id="navigation_bottom">
              <h3 id="Navigation-Overview"><a shape="rect" href="overview.html">Overview</a></h3>
              <ul class="alternate">
               <li><a shape="rect" href="index.html">Home</a></li>
               <li><a shape="rect" href="download.html">Download</a></li>
               <li><a shape="rect" href="getting-started.html">Getting Started</a></li>
               <li><a shape="rect" href="faq.html">FAQ</a></li>
              </ul>
              <h3 id="Navigation-Documentation"><a shape="rect" href="documentation.html">Documentation</a></h3>
              <ul class="alternate">
               <li><a shape="rect" href="user-guide.html">User Guide</a></li>
               <li><a shape="rect" href="manual.html">Manual</a></li>
               <li><a shape="rect" href="books.html">Books</a></li>
               <li><a shape="rect" href="tutorials.html">Tutorials</a></li>
               <li><a shape="rect" href="examples.html">Examples</a></li>
               <li><a shape="rect" href="cookbook.html">Cookbook</a></li>
               <li><a shape="rect" href="architecture.html">Architecture</a></li>
               <li><a shape="rect" href="enterprise-integration-patterns.html">Enterprise Integration Patterns</a></li>
               <li><a shape="rect" href="dsl.html">DSL</a></li>
               <li><a shape="rect" href="components.html">Components</a></li>
               <li><a shape="rect" href="data-format.html">Data Format</a></li>
               <li><a shape="rect" href="languages.html">Languages</a></li>
               <li><a shape="rect" href="security.html">Security</a></li>
               <li><a shape="rect" href="security-advisories.html">Security Advisories</a></li>
              </ul>
              <h3 id="Navigation-Search">Search</h3>
              <form enctype="application/x-www-form-urlencoded" method="get" id="cse-search-box" action="http://www.google.com/cse"> 
               <div> 
                <input type="hidden" name="cx" value="007878419884033443453:m5nhvy4hmyq"> 
                <input type="hidden" name="ie" value="UTF-8"> 
                <input type="text" name="q" size="21"> 
                <input type="submit" name="sa" value="Search"> 
               </div> 
              </form> 
              <script type="text/javascript" src="http://www.google.com/coop/cse/brand?form=cse-search-box&amp;lang=en"></script>
              <h3 id="Navigation-Community"><a shape="rect" href="community.html">Community</a></h3>
              <ul class="alternate">
               <li><a shape="rect" href="support.html">Support</a></li>
               <li><a shape="rect" href="contributing.html">Contributing</a></li>
               <li><a shape="rect" href="mailing-lists.html">Mailing Lists</a></li>
               <li><a shape="rect" href="irc-room.html">Gitter / IRC Chat</a></li>
               <li><a shape="rect" href="user-stories.html">User Stories</a></li>
               <li><a shape="rect" href="news.html">News</a></li>
               <li><a shape="rect" href="articles.html">Articles</a></li>
               <li><a shape="rect" href="site.html">Site</a></li>
               <li><a shape="rect" href="team.html">Team</a></li>
               <li><a shape="rect" class="external-link" href="http://camel-extra.googlecode.com/" rel="nofollow">Camel Extra</a></li>
              </ul>
              <h3 id="Navigation-Developers"><a shape="rect" href="developers.html">Developers</a></h3>
              <ul class="alternate">
               <li><a shape="rect" href="developers.html">Developer Guide</a></li>
               <li><a shape="rect" href="source.html">Source</a></li>
               <li><a shape="rect" class="external-link" href="https://github.com/apache/camel/" rel="nofollow">Github</a></li>
               <li><a shape="rect" href="building.html">Building</a></li>
               <li><a shape="rect" href="javadoc.html">JavaDoc</a></li>
              </ul>
              <h3 id="Navigation-ApacheSoftwareFoundation">Apache Software Foundation</h3>
              <ul class="alternate">
               <li><a shape="rect" class="external-link" href="http://www.apache.org/licenses/">License</a></li>
               <li><a shape="rect" class="external-link" href="http://www.apache.org/foundation/sponsorship.html">Sponsorship</a></li>
               <li><a shape="rect" class="external-link" href="http://www.apache.org/foundation/thanks.html">Thanks</a></li>
               <li><a shape="rect" class="external-link" href="http://www.apache.org/security/">Security</a></li>
              </ul>
             </div> 
             <!-- NavigationBar --> 
            </div> 
           </div> </td> 
         </tr> 
        </tbody> 
       </table> 
       <div class="bottom_red_bar"></div> 
      </div> 
     </div> 
    </div> 
   </div> 
   <div class="black_box"> 
    <div class="footer"> 
     <div class="footer_l"> 
      <div class="footer_r"> 
       <div> 
        <a href="$base/privacy-policy.html">Privacy Policy</a> - (
        <a href="https://cwiki.apache.org/confluence/pages/editpage.action?pageId=24186021">edit page</a>) (
        <a href="https://cwiki.apache.org/confluence/pages/viewpage.action?pageId=24186021&amp;showComments=true&amp;showCommentArea=true#addcomment">add comment</a>) 
       </div> 
      </div> 
     </div> 
    </div> 
   </div> 
  </div> 
  <div class="design_attribution">
     2004-2015 The Apache Software Foundation. 
   <br> Apache Camel, Camel, Apache, the Apache feather logo, and the Apache Camel project logo are trademarks of The Apache Software Foundation. All other marks mentioned may be trademarks or registered trademarks of their respective owners. 
   <br> 
   <a href="http://hiramchirino.com">Graphic Design By Hiram</a> 
  </div> 
  <!-- Camel committers that would like access to the Analytics, send a note to private@camel.apache.org --> 
  <script type="text/javascript">

  var _gaq = _gaq || [];
  _gaq.push(['_setAccount', 'UA-25976253-1']);
  _gaq.push(['_trackPageview']);

  (function() {
    var ga = document.createElement('script'); ga.type = 'text/javascript'; ga.async = true;
    ga.src = ('https:' == document.location.protocol ? 'https://ssl' : 'http://www') + '.google-analytics.com/ga.js';
    var s = document.getElementsByTagName('script')[0]; s.parentNode.insertBefore(ga, s);
  })();

</script>   
 </body>
</html>