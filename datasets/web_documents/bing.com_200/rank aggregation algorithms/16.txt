<!doctype html>
<html lang="en">
 <head> 
  <meta charset="utf-8"> 
  <link rel="dns-prefetch" href="https://assets-cdn.github.com"> 
  <link rel="dns-prefetch" href="https://avatars0.githubusercontent.com"> 
  <link rel="dns-prefetch" href="https://avatars1.githubusercontent.com"> 
  <link rel="dns-prefetch" href="https://avatars2.githubusercontent.com"> 
  <link rel="dns-prefetch" href="https://avatars3.githubusercontent.com"> 
  <link rel="dns-prefetch" href="https://github-cloud.s3.amazonaws.com"> 
  <link rel="dns-prefetch" href="https://user-images.githubusercontent.com/"> 
  <link crossorigin="anonymous" href="https://assets-cdn.github.com/assets/frameworks-bedfc518345498ab3204d330c1727cde7e733526a09cd7df6867f6a231565091.css" integrity="sha256-vt/FGDRUmKsyBNMwwXJ83n5zNSagnNffaGf2ojFWUJE=" media="all" rel="stylesheet"> 
  <link crossorigin="anonymous" href="https://assets-cdn.github.com/assets/github-86a46fd737fcaf39214a615251ced6da6882e3efd5e45fffd1c5f98a6d58a047.css" integrity="sha256-hqRv1zf8rzkhSmFSUc7W2miC4+/V5F//0cX5im1YoEc=" media="all" rel="stylesheet"> 
  <link crossorigin="anonymous" href="https://assets-cdn.github.com/assets/site-ad6078c20fbb51f757932e8639d4fc4ed7da2efa1864c56e63388de75923d015.css" integrity="sha256-rWB4wg+7UfdXky6GOdT8TtfaLvoYZMVuYziN51kj0BU=" media="all" rel="stylesheet"> 
  <meta name="viewport" content="width=device-width"> 
  <title>Aggregations: Added percentile rank aggregation · elastic/elasticsearch@556a498 · GitHub</title> 
  <link rel="search" type="application/opensearchdescription+xml" href="/opensearch.xml" title="GitHub"> 
  <link rel="fluid-icon" href="https://github.com/fluidicon.png" title="GitHub"> 
  <meta property="fb:app_id" content="1401488693436528"> 
  <meta content="https://avatars2.githubusercontent.com/u/236731?v=4&amp;s=200" property="og:image">
  <meta content="GitHub" property="og:site_name">
  <meta content="object" property="og:type">
  <meta content="Aggregations: Added percentile rank aggregation · elastic/elasticsearch@556a498" property="og:title">
  <meta content="https://github.com/elastic/elasticsearch/commit/556a498bf69193dfcb8b1dd52bfc19be214fd716" property="og:url">
  <meta content="Percentile Rank Aggregation is the reverse of the Percetiles aggregation.  It determines the percentile rank (the proportion of values less than a given value) of the provided array of values.

Clo..." property="og:description">
  <meta content="1403090222" property="og:updated_time"> 
  <link rel="assets" href="https://assets-cdn.github.com/"> 
  <meta name="pjax-timeout" content="1000"> 
  <meta name="request-id" content="DD33:2B97:1915447:28752E9:59D973E7" data-pjax-transient> 
  <meta name="selected-link" value="repo_commits" data-pjax-transient> 
  <meta name="google-site-verification" content="KT5gs8h0wvaagLKAVWq8bbeNwnZZK1r1XQysX3xurLU"> 
  <meta name="google-site-verification" content="ZzhVyEFwb7w3e0-uOTltm8Jsck2F5StVihD0exw2fsA"> 
  <meta name="google-analytics" content="UA-3769691-2"> 
  <meta content="collector.githubapp.com" name="octolytics-host">
  <meta content="github" name="octolytics-app-id">
  <meta content="https://collector.githubapp.com/github-external/browser_event" name="octolytics-event-url">
  <meta content="DD33:2B97:1915447:28752E9:59D973E7" name="octolytics-dimension-request_id">
  <meta content="iad" name="octolytics-dimension-region_edge">
  <meta content="iad" name="octolytics-dimension-region_render"> 
  <meta content="/<user-name>/<repo-name>/commit/show" data-pjax-transient="true" name="analytics-location"> 
  <meta class="js-ga-set" name="dimension1" content="Logged Out"> 
  <meta name="hostname" content="github.com"> 
  <meta name="user-login" content=""> 
  <meta name="expected-hostname" content="github.com"> 
  <meta name="js-proxy-site-detection-payload" content="Yzg4ZTFmMDIxOTJhZjNmNDE0NGI5NDA1Yzc0ZWVmZmU4ZjI0ODI0NzdhNjFjMzdiMjA4NTk0NjVkZmU5ZTM1NHx7InJlbW90ZV9hZGRyZXNzIjoiMTgxLjk1Ljk3LjYzIiwicmVxdWVzdF9pZCI6IkREMzM6MkI5NzoxOTE1NDQ3OjI4NzUyRTk6NTlEOTczRTciLCJ0aW1lc3RhbXAiOjE1MDc0MjMyMDgsImhvc3QiOiJnaXRodWIuY29tIn0="> 
  <meta name="html-safe-nonce" content="233458d283ef786896dd96677e9f2b359d7aa76f"> 
  <meta http-equiv="x-pjax-version" content="8bbb3fd0e5ded14dbffebb88288ec63f"> 
  <link data-pjax-transient="true" href="/elastic/elasticsearch/commit/556a498bf69193dfcb8b1dd52bfc19be214fd716.diff" rel="alternate" type="text/plain+diff"> 
  <link data-pjax-transient="true" href="/elastic/elasticsearch/commit/556a498bf69193dfcb8b1dd52bfc19be214fd716.patch" rel="alternate" type="text/plain+patch"> 
  <meta name="diff-view" content="unified" data-pjax-transient> 
  <link href="https://github.com/elastic/elasticsearch/commits/556a498bf69193dfcb8b1dd52bfc19be214fd716.atom" rel="alternate" title="Recent Commits to elasticsearch:556a498bf69193dfcb8b1dd52bfc19be214fd716" type="application/atom+xml"> 
  <meta name="description" content="elasticsearch - Open Source, Distributed, RESTful Search Engine"> 
  <meta name="go-import" content="github.com/elastic/elasticsearch git https://github.com/elastic/elasticsearch.git"> 
  <meta content="6764390" name="octolytics-dimension-user_id">
  <meta content="elastic" name="octolytics-dimension-user_login">
  <meta content="507775" name="octolytics-dimension-repository_id">
  <meta content="elastic/elasticsearch" name="octolytics-dimension-repository_nwo">
  <meta content="true" name="octolytics-dimension-repository_public">
  <meta content="false" name="octolytics-dimension-repository_is_fork">
  <meta content="507775" name="octolytics-dimension-repository_network_root_id">
  <meta content="elastic/elasticsearch" name="octolytics-dimension-repository_network_root_nwo">
  <meta content="false" name="octolytics-dimension-repository_explore_github_marketplace_ci_cta_shown"> 
  <meta name="browser-stats-url" content="https://api.github.com/_private/browser/stats"> 
  <meta name="browser-errors-url" content="https://api.github.com/_private/browser/errors"> 
  <link rel="mask-icon" href="https://assets-cdn.github.com/pinned-octocat.svg" color="#000000"> 
  <link rel="icon" type="image/x-icon" href="https://assets-cdn.github.com/favicon.ico"> 
  <meta name="theme-color" content="#1e2327"> 
  <meta name="u2f-support" content="true"> 
 </head> 
 <body class="logged-out env-production"> 
  <div class="position-relative js-header-wrapper "> 
   <a href="#start-of-content" tabindex="1" class="px-2 py-4 show-on-focus js-skip-to-content">Skip to content</a> 
   <div id="js-pjax-loader-bar" class="pjax-loader-bar">
    <div class="progress"></div>
   </div> 
   <div class="unsupported-browser"> 
    <div class="container clearfix"> 
     <!-- '"` -->
     <!-- </textarea></xmp> -->
     <form accept-charset="UTF-8" action="/site/dismiss_unsupported_browser" method="post">
      <div style="margin:0;padding:0;display:inline">
       <input name="utf8" type="hidden" value="?">
       <input name="authenticity_token" type="hidden" value="aA1TcBx/v6ZHJwOIOpsJVbCElQ0vmsGfnSKPbktR1cYGhvPwADcJMIFNGwMwl9ieWwNGSkw9nJIAnwx8HFGnVQ==">
      </div> 
      <button type="submit" class="btn btn-danger">Ignore</button> 
     </form> 
     <a href="https://help.github.com/articles/supported-browsers" class="btn">Learn more</a> 
     <h5>Please note that GitHub no longer supports your web browser.</h5> 
     <p>We recommend upgrading to the latest <a href="https://chrome.google.com">Google Chrome</a> or <a href="https://mozilla.org/firefox/">Firefox</a>.</p> 
    </div> 
   </div> 
   <header class="Header header-logged-out  position-relative f4 py-3" role="banner"> 
    <div class="container-lg d-flex px-3"> 
     <div class="d-flex flex-justify-between flex-items-center"> 
      <a class="header-logo-invertocat my-0" href="https://github.com/" aria-label="Homepage" data-ga-click="(Logged out) Header, go to homepage, icon:logo-wordmark"> 
       <svg aria-hidden="true" class="octicon octicon-mark-github" height="32" version="1.1" viewbox="0 0 16 16" width="32">
        <path fill-rule="evenodd" d="M8 0C3.58 0 0 3.58 0 8c0 3.54 2.29 6.53 5.47 7.59.4.07.55-.17.55-.38 0-.19-.01-.82-.01-1.49-2.01.37-2.53-.49-2.69-.94-.09-.23-.48-.94-.82-1.13-.28-.15-.68-.52-.01-.53.63-.01 1.08.58 1.23.82.72 1.21 1.87.87 2.33.66.07-.52.28-.87.51-1.07-1.78-.2-3.64-.89-3.64-3.95 0-.87.31-1.59.82-2.15-.08-.2-.36-1.02.08-2.12 0 0 .67-.21 2.2.82.64-.18 1.32-.27 2-.27.68 0 1.36.09 2 .27 1.53-1.04 2.2-.82 2.2-.82.44 1.1.16 1.92.08 2.12.51.56.82 1.27.82 2.15 0 3.07-1.87 3.75-3.65 3.95.29.25.54.73.54 1.48 0 1.07-.01 1.93-.01 2.2 0 .21.15.46.55.38A8.013 8.013 0 0 0 16 8c0-4.42-3.58-8-8-8z" />
       </svg> </a> 
     </div> 
     <div class="HeaderMenu HeaderMenu--bright d-flex flex-justify-between flex-auto"> 
      <nav class="mt-0"> 
       <ul class="d-flex list-style-none"> 
        <li class="ml-2"> <a href="/features" class="js-selected-navigation-item HeaderNavlink px-0 py-2 m-0" data-ga-click="Header, click, Nav menu - item:features" data-selected-links="/features /features/project-management /features/code-review /features/project-management /features/integrations /features"> Features </a> </li> 
        <li class="ml-4"> <a href="/business" class="js-selected-navigation-item HeaderNavlink px-0 py-2 m-0" data-ga-click="Header, click, Nav menu - item:business" data-selected-links="/business /business/security /business/customers /business"> Business </a> </li> 
        <li class="ml-4"> <a href="/explore" class="js-selected-navigation-item HeaderNavlink px-0 py-2 m-0" data-ga-click="Header, click, Nav menu - item:explore" data-selected-links="/explore /trending /trending/developers /integrations /integrations/feature/code /integrations/feature/collaborate /integrations/feature/ship showcases showcases_search showcases_landing /explore"> Explore </a> </li> 
        <li class="ml-4"> <a href="/marketplace" class="js-selected-navigation-item HeaderNavlink px-0 py-2 m-0" data-ga-click="Header, click, Nav menu - item:marketplace" data-selected-links=" /marketplace"> Marketplace </a> </li> 
        <li class="ml-4"> <a href="/pricing" class="js-selected-navigation-item HeaderNavlink px-0 py-2 m-0" data-ga-click="Header, click, Nav menu - item:pricing" data-selected-links="/pricing /pricing/developer /pricing/team /pricing/business-hosted /pricing/business-enterprise /pricing"> Pricing </a> </li> 
       </ul> 
      </nav> 
      <div class="d-flex"> 
       <div class="d-lg-flex flex-items-center mr-3"> 
        <div class="header-search scoped-search site-scoped-search js-site-search" role="search"> 
         <!-- '"` -->
         <!-- </textarea></xmp> -->
         <form accept-charset="UTF-8" action="/elastic/elasticsearch/search" class="js-site-search-form" data-scoped-search-url="/elastic/elasticsearch/search" data-unscoped-search-url="/search" method="get">
          <div style="margin:0;padding:0;display:inline">
           <input name="utf8" type="hidden" value="?">
          </div> 
          <label class="form-control header-search-wrapper js-chromeless-input-container"> <a href="/elastic/elasticsearch/commit/556a498bf69193dfcb8b1dd52bfc19be214fd716" class="header-search-scope no-underline">This repository</a> <input type="text" class="form-control header-search-input js-site-search-focus js-site-search-field is-clearable" data-hotkey="s" name="q" value="" placeholder="Search" aria-label="Search this repository" data-unscoped-placeholder="Search GitHub" data-scoped-placeholder="Search" autocapitalize="off"> <input type="hidden" class="js-site-search-type-field" name="type"> </label> 
         </form>
        </div> 
       </div> 
       <span class="d-inline-block"> 
        <div class="HeaderNavlink px-0 py-2 m-0"> 
         <a class="text-bold text-white no-underline" href="/login?return_to=%2Felastic%2Felasticsearch%2Fcommit%2F556a498bf69193dfcb8b1dd52bfc19be214fd716" data-ga-click="(Logged out) Header, clicked Sign in, text:sign-in">Sign in</a> 
         <span class="text-gray">or</span> 
         <a class="text-bold text-white no-underline" href="/join?source=header-repo" data-ga-click="(Logged out) Header, clicked Sign up, text:sign-up">Sign up</a> 
        </div> </span> 
      </div> 
     </div> 
    </div> 
   </header> 
  </div> 
  <div id="start-of-content" class="show-on-focus"></div> 
  <div id="js-flash-container"> 
  </div> 
  <div role="main"> 
   <div itemscope itemtype="http://schema.org/SoftwareSourceCode"> 
    <div id="js-repo-pjax-container" data-pjax-container> 
     <div class="pagehead repohead instapaper_ignore readability-menu experiment-repo-nav "> 
      <div class="repohead-details-container clearfix container "> 
       <ul class="pagehead-actions"> 
        <li> <a href="/login?return_to=%2Felastic%2Felasticsearch" class="btn btn-sm btn-with-count tooltipped tooltipped-n" aria-label="You must be signed in to watch a repository" rel="nofollow"> 
          <svg aria-hidden="true" class="octicon octicon-eye" height="16" version="1.1" viewbox="0 0 16 16" width="16">
           <path fill-rule="evenodd" d="M8.06 2C3 2 0 8 0 8s3 6 8.06 6C13 14 16 8 16 8s-3-6-7.94-6zM8 12c-2.2 0-4-1.78-4-4 0-2.2 1.8-4 4-4 2.22 0 4 1.8 4 4 0 2.22-1.78 4-4 4zm2-4c0 1.11-.89 2-2 2-1.11 0-2-.89-2-2 0-1.11.89-2 2-2 1.11 0 2 .89 2 2z" />
          </svg> Watch </a> <a class="social-count" href="/elastic/elasticsearch/watchers" aria-label="2152 users are watching this repository"> 2,152 </a> </li> 
        <li> <a href="/login?return_to=%2Felastic%2Felasticsearch" class="btn btn-sm btn-with-count tooltipped tooltipped-n" aria-label="You must be signed in to star a repository" rel="nofollow"> 
          <svg aria-hidden="true" class="octicon octicon-star" height="16" version="1.1" viewbox="0 0 14 16" width="14">
           <path fill-rule="evenodd" d="M14 6l-4.9-.64L7 1 4.9 5.36 0 6l3.6 3.26L2.67 14 7 11.67 11.33 14l-.93-4.74z" />
          </svg> Star </a> <a class="social-count js-social-count" href="/elastic/elasticsearch/stargazers" aria-label="25592 users starred this repository"> 25,592 </a> </li> 
        <li> <a href="/login?return_to=%2Felastic%2Felasticsearch" class="btn btn-sm btn-with-count tooltipped tooltipped-n" aria-label="You must be signed in to fork a repository" rel="nofollow"> 
          <svg aria-hidden="true" class="octicon octicon-repo-forked" height="16" version="1.1" viewbox="0 0 10 16" width="10">
           <path fill-rule="evenodd" d="M8 1a1.993 1.993 0 0 0-1 3.72V6L5 8 3 6V4.72A1.993 1.993 0 0 0 2 1a1.993 1.993 0 0 0-1 3.72V6.5l3 3v1.78A1.993 1.993 0 0 0 5 15a1.993 1.993 0 0 0 1-3.72V9.5l3-3V4.72A1.993 1.993 0 0 0 8 1zM2 4.2C1.34 4.2.8 3.65.8 3c0-.65.55-1.2 1.2-1.2.65 0 1.2.55 1.2 1.2 0 .65-.55 1.2-1.2 1.2zm3 10c-.66 0-1.2-.55-1.2-1.2 0-.65.55-1.2 1.2-1.2.65 0 1.2.55 1.2 1.2 0 .65-.55 1.2-1.2 1.2zm3-10c-.66 0-1.2-.55-1.2-1.2 0-.65.55-1.2 1.2-1.2.65 0 1.2.55 1.2 1.2 0 .65-.55 1.2-1.2 1.2z" />
          </svg> Fork </a> <a href="/elastic/elasticsearch/network" class="social-count" aria-label="9034 users forked this repository"> 9,034 </a> </li> 
       </ul> 
       <h1 class="public "> 
        <svg aria-hidden="true" class="octicon octicon-repo" height="16" version="1.1" viewbox="0 0 12 16" width="12">
         <path fill-rule="evenodd" d="M4 9H3V8h1v1zm0-3H3v1h1V6zm0-2H3v1h1V4zm0-2H3v1h1V2zm8-1v12c0 .55-.45 1-1 1H6v2l-1.5-1.5L3 16v-2H1c-.55 0-1-.45-1-1V1c0-.55.45-1 1-1h10c.55 0 1 .45 1 1zm-1 10H1v2h2v-1h3v1h5v-2zm0-10H2v9h9V1z" />
        </svg> <span class="author" itemprop="author"><a href="/elastic" class="url fn" rel="author">elastic</a></span>
        <!--
--><span class="path-divider">/</span>
        <!--
--><strong itemprop="name"><a href="/elastic/elasticsearch" data-pjax="#js-repo-pjax-container">elasticsearch</a></strong> </h1> 
      </div> 
      <nav class="reponav js-repo-nav js-sidenav-container-pjax container" itemscope itemtype="http://schema.org/BreadcrumbList" role="navigation" data-pjax="#js-repo-pjax-container"> 
       <span itemscope itemtype="http://schema.org/ListItem" itemprop="itemListElement"> <a href="/elastic/elasticsearch" class="js-selected-navigation-item selected reponav-item" data-hotkey="g c" data-selected-links="repo_source repo_downloads repo_commits repo_releases repo_tags repo_branches /elastic/elasticsearch" itemprop="url"> 
         <svg aria-hidden="true" class="octicon octicon-code" height="16" version="1.1" viewbox="0 0 14 16" width="14">
          <path fill-rule="evenodd" d="M9.5 3L8 4.5 11.5 8 8 11.5 9.5 13 14 8 9.5 3zm-5 0L0 8l4.5 5L6 11.5 2.5 8 6 4.5 4.5 3z" />
         </svg> <span itemprop="name">Code</span> 
         <meta itemprop="position" content="1"> </a> </span> 
       <span itemscope itemtype="http://schema.org/ListItem" itemprop="itemListElement"> <a href="/elastic/elasticsearch/issues" class="js-selected-navigation-item reponav-item" data-hotkey="g i" data-selected-links="repo_issues repo_labels repo_milestones /elastic/elasticsearch/issues" itemprop="url"> 
         <svg aria-hidden="true" class="octicon octicon-issue-opened" height="16" version="1.1" viewbox="0 0 14 16" width="14">
          <path fill-rule="evenodd" d="M7 2.3c3.14 0 5.7 2.56 5.7 5.7s-2.56 5.7-5.7 5.7A5.71 5.71 0 0 1 1.3 8c0-3.14 2.56-5.7 5.7-5.7zM7 1C3.14 1 0 4.14 0 8s3.14 7 7 7 7-3.14 7-7-3.14-7-7-7zm1 3H6v5h2V4zm0 6H6v2h2v-2z" />
         </svg> <span itemprop="name">Issues</span> <span class="Counter">1,197</span> 
         <meta itemprop="position" content="2"> </a> </span> 
       <span itemscope itemtype="http://schema.org/ListItem" itemprop="itemListElement"> <a href="/elastic/elasticsearch/pulls" class="js-selected-navigation-item reponav-item" data-hotkey="g p" data-selected-links="repo_pulls /elastic/elasticsearch/pulls" itemprop="url"> 
         <svg aria-hidden="true" class="octicon octicon-git-pull-request" height="16" version="1.1" viewbox="0 0 12 16" width="12">
          <path fill-rule="evenodd" d="M11 11.28V5c-.03-.78-.34-1.47-.94-2.06C9.46 2.35 8.78 2.03 8 2H7V0L4 3l3 3V4h1c.27.02.48.11.69.31.21.2.3.42.31.69v6.28A1.993 1.993 0 0 0 10 15a1.993 1.993 0 0 0 1-3.72zm-1 2.92c-.66 0-1.2-.55-1.2-1.2 0-.65.55-1.2 1.2-1.2.65 0 1.2.55 1.2 1.2 0 .65-.55 1.2-1.2 1.2zM4 3c0-1.11-.89-2-2-2a1.993 1.993 0 0 0-1 3.72v6.56A1.993 1.993 0 0 0 2 15a1.993 1.993 0 0 0 1-3.72V4.72c.59-.34 1-.98 1-1.72zm-.8 10c0 .66-.55 1.2-1.2 1.2-.65 0-1.2-.55-1.2-1.2 0-.65.55-1.2 1.2-1.2.65 0 1.2.55 1.2 1.2zM2 4.2C1.34 4.2.8 3.65.8 3c0-.65.55-1.2 1.2-1.2.65 0 1.2.55 1.2 1.2 0 .65-.55 1.2-1.2 1.2z" />
         </svg> <span itemprop="name">Pull requests</span> <span class="Counter">120</span> 
         <meta itemprop="position" content="3"> </a> </span> 
       <a href="/elastic/elasticsearch/projects" class="js-selected-navigation-item reponav-item" data-hotkey="g b" data-selected-links="repo_projects new_repo_project repo_project /elastic/elasticsearch/projects"> 
        <svg aria-hidden="true" class="octicon octicon-project" height="16" version="1.1" viewbox="0 0 15 16" width="15">
         <path fill-rule="evenodd" d="M10 12h3V2h-3v10zm-4-2h3V2H6v8zm-4 4h3V2H2v12zm-1 1h13V1H1v14zM14 0H1a1 1 0 0 0-1 1v14a1 1 0 0 0 1 1h13a1 1 0 0 0 1-1V1a1 1 0 0 0-1-1z" />
        </svg> Projects <span class="Counter">1</span> </a> 
       <div class="reponav-dropdown js-menu-container"> 
        <button type="button" class="btn-link reponav-item reponav-dropdown js-menu-target " data-no-toggle aria-expanded="false" aria-haspopup="true"> Insights 
         <svg aria-hidden="true" class="octicon octicon-triangle-down v-align-middle text-gray" height="11" version="1.1" viewbox="0 0 12 16" width="8">
          <path fill-rule="evenodd" d="M0 5l6 6 6-6z" />
         </svg> </button> 
        <div class="dropdown-menu-content js-menu-content"> 
         <div class="dropdown-menu dropdown-menu-sw"> 
          <a class="dropdown-item" href="/elastic/elasticsearch/pulse" data-skip-pjax> 
           <svg aria-hidden="true" class="octicon octicon-pulse" height="16" version="1.1" viewbox="0 0 14 16" width="14">
            <path fill-rule="evenodd" d="M11.5 8L8.8 5.4 6.6 8.5 5.5 1.6 2.38 8H0v2h3.6l.9-1.8.9 5.4L9 8.5l1.6 1.5H14V8z" />
           </svg> Pulse </a> 
          <a class="dropdown-item" href="/elastic/elasticsearch/graphs" data-skip-pjax> 
           <svg aria-hidden="true" class="octicon octicon-graph" height="16" version="1.1" viewbox="0 0 16 16" width="16">
            <path fill-rule="evenodd" d="M16 14v1H0V0h1v14h15zM5 13H3V8h2v5zm4 0H7V3h2v10zm4 0h-2V6h2v7z" />
           </svg> Graphs </a> 
         </div> 
        </div> 
       </div> 
      </nav> 
     </div> 
     <div class="container new-discussion-timeline experiment-repo-nav"> 
      <div class="repository-content"> 
       <a href="/elastic/elasticsearch/commit/556a498bf69193dfcb8b1dd52bfc19be214fd716" class="d-none js-permalink-shortcut" data-hotkey="y">Permalink</a> 
       <include-fragment class="d-none" src="/elastic/elasticsearch/dsrc/556a498bf69193dfcb8b1dd52bfc19be214fd716"></include-fragment> 
       <div class="commit full-commit  "> 
        <a href="/elastic/elasticsearch/tree/556a498bf69193dfcb8b1dd52bfc19be214fd716" class="btn btn-outline float-right" title="Browse the repository at this point in the history" rel="nofollow">Browse files</a> 
        <p class="commit-title"> Aggregations: Added percentile rank aggregation </p> 
        <div class="commit-desc">
         <pre>Percentile Rank Aggregation is the reverse of the Percetiles aggregation.  It determines the percentile rank (the proportion of values less than a given value) of the provided array of values.

<span aria-label="This commit closes issue #6386." class="issue-keyword tooltipped tooltipped-se">Closes</span> <a href="https://github.com/elastic/elasticsearch/issues/6386" class="issue-link js-issue-link" data-error-text="Failed to load issue title" data-id="34839205" data-permission-text="Issue title is private" data-url="https://github.com/elastic/elasticsearch/issues/6386">#6386</a></pre>
        </div> 
        <div class="commit-branches"> 
         <include-fragment src="/elastic/elasticsearch/branch_commits/556a498bf69193dfcb8b1dd52bfc19be214fd716"> 
          <svg aria-hidden="true" class="octicon octicon-git-branch" height="16" version="1.1" viewbox="0 0 10 16" width="10">
           <path fill-rule="evenodd" d="M10 5c0-1.11-.89-2-2-2a1.993 1.993 0 0 0-1 3.72v.3c-.02.52-.23.98-.63 1.38-.4.4-.86.61-1.38.63-.83.02-1.48.16-2 .45V4.72a1.993 1.993 0 0 0-1-3.72C.88 1 0 1.89 0 3a2 2 0 0 0 1 1.72v6.56c-.59.35-1 .99-1 1.72 0 1.11.89 2 2 2 1.11 0 2-.89 2-2 0-.53-.2-1-.53-1.36.09-.06.48-.41.59-.47.25-.11.56-.17.94-.17 1.05-.05 1.95-.45 2.75-1.25S8.95 7.77 9 6.73h-.02C9.59 6.37 10 5.73 10 5zM2 1.8c.66 0 1.2.55 1.2 1.2 0 .65-.55 1.2-1.2 1.2C1.35 4.2.8 3.65.8 3c0-.65.55-1.2 1.2-1.2zm0 12.41c-.66 0-1.2-.55-1.2-1.2 0-.65.55-1.2 1.2-1.2.65 0 1.2.55 1.2 1.2 0 .65-.55 1.2-1.2 1.2zm6-8c-.66 0-1.2-.55-1.2-1.2 0-.65.55-1.2 1.2-1.2.65 0 1.2.55 1.2 1.2 0 .65-.55 1.2-1.2 1.2z" />
          </svg> 
          <ul class="branches-list"> 
           <li class="loading">Loading branch information<span class="animated-ellipsis-container"><span class="animated-ellipsis">...</span></span></li> 
          </ul> 
         </include-fragment> 
        </div> 
        <div class="commit-meta clearfix"> 
         <span class="float-right"> <span class="sha-block" data-pjax> 1 parent <a href="/elastic/elasticsearch/commit/83abc0221bc60aa3273629a6e21aa7962d1ec411" class="sha" data-hotkey="p">83abc02</a> </span> <span class="sha-block">commit <span class="sha user-select-contain">556a498bf69193dfcb8b1dd52bfc19be214fd716</span></span> </span> 
         <span class="commit-author-section"> <img alt="@colings86" class="avatar" height="24" src="https://avatars1.githubusercontent.com/u/236731?v=4&amp;s=48" width="24"> <a href="/colings86" class="user-mention" rel="contributor">colings86</a> committed 
          <relative-time datetime="2014-06-06T14:25:21Z">
           Jun 6, 2014
          </relative-time> </span> 
        </div> 
       </div> 
       <a name="diff-stat"></a> 
       <div id="toc" class="details-collapse table-of-contents js-details-container Details"> 
        <div class="BtnGroup float-right" data-ga-load="Diff, view, Viewed Unified Diff"> 
         <a class="btn btn-sm selected BtnGroup-item" href="https://github.com/elastic/elasticsearch/commit/556a498bf69193dfcb8b1dd52bfc19be214fd716?diff=unified"> Unified </a> 
         <a class="btn btn-sm BtnGroup-item" href="https://github.com/elastic/elasticsearch/commit/556a498bf69193dfcb8b1dd52bfc19be214fd716?diff=split"> Split </a> 
        </div> 
        <div class="toc-diff-stats"> 
         <svg aria-hidden="true" class="octicon octicon-diff" height="16" version="1.1" viewbox="0 0 13 16" width="13">
          <path fill-rule="evenodd" d="M6 7h2v1H6v2H5V8H3V7h2V5h1v2zm-3 6h5v-1H3v1zM7.5 2L11 5.5V15c0 .55-.45 1-1 1H1c-.55 0-1-.45-1-1V3c0-.55.45-1 1-1h6.5zM10 6L7 3H1v12h9V6zM8.5 0H3v1h5l4 4v8h1V4.5L8.5 0z" />
         </svg> Showing 
         <button type="button" class="btn-link js-details-target" aria-expanded="false"> 23 changed files </button> with 
         <strong>1,293 additions</strong> and 
         <strong>284 deletions</strong>. 
        </div> 
        <ol class="content collapse js-transitionable"> 
         <li> <span class="diffstat float-right"> <span class="text-green"> +2 </span> <span class="text-red"> ?0 </span> <a href="#diff-55ff41fedc3c99ac49e5461d5aa33db9" class="tooltipped tooltipped-s" aria-label="2 lines changed"> <span class="block-diff-added"></span><span class="block-diff-added"></span><span class="block-diff-neutral"></span><span class="block-diff-neutral"></span><span class="block-diff-neutral"></span> </a> </span> 
          <svg aria-hidden="true" class="octicon octicon-diff-modified" height="16" title="modified" version="1.1" viewbox="0 0 14 16" width="14">
           <path fill-rule="evenodd" d="M13 1H1c-.55 0-1 .45-1 1v12c0 .55.45 1 1 1h12c.55 0 1-.45 1-1V2c0-.55-.45-1-1-1zm0 13H1V2h12v12zM4 8c0-1.66 1.34-3 3-3s3 1.34 3 3-1.34 3-3 3-3-1.34-3-3z" />
          </svg> <a href="#diff-55ff41fedc3c99ac49e5461d5aa33db9">docs/reference/search/aggregations/metrics.asciidoc</a> </li> 
         <li> <span class="diffstat float-right"> <span class="text-green"> +2 </span> <span class="text-red"> ?0 </span> <a href="#diff-e758b38b8ae200c0659ec5cd9fe95f3b" class="tooltipped tooltipped-s" aria-label="2 lines changed"> <span class="block-diff-added"></span><span class="block-diff-added"></span><span class="block-diff-neutral"></span><span class="block-diff-neutral"></span><span class="block-diff-neutral"></span> </a> </span> 
          <svg aria-hidden="true" class="octicon octicon-diff-modified" height="16" title="modified" version="1.1" viewbox="0 0 14 16" width="14">
           <path fill-rule="evenodd" d="M13 1H1c-.55 0-1 .45-1 1v12c0 .55.45 1 1 1h12c.55 0 1-.45 1-1V2c0-.55-.45-1-1-1zm0 13H1V2h12v12zM4 8c0-1.66 1.34-3 3-3s3 1.34 3 3-1.34 3-3 3-3-1.34-3-3z" />
          </svg> <a href="#diff-e758b38b8ae200c0659ec5cd9fe95f3b">docs/reference/search/aggregations/metrics/percentile-aggregation.asciidoc</a> </li> 
         <li> <span class="diffstat float-right"> <span class="text-green"> +95 </span> <span class="text-red"> ?0 </span> <a href="#diff-94134cfad429926be8c7975c0fe56ea0" class="tooltipped tooltipped-s" aria-label="95 lines changed"> <span class="block-diff-added"></span><span class="block-diff-added"></span><span class="block-diff-added"></span><span class="block-diff-added"></span><span class="block-diff-added"></span> </a> </span> 
          <svg aria-hidden="true" class="octicon octicon-diff-added" height="16" title="added" version="1.1" viewbox="0 0 14 16" width="14">
           <path fill-rule="evenodd" d="M13 1H1c-.55 0-1 .45-1 1v12c0 .55.45 1 1 1h12c.55 0 1-.45 1-1V2c0-.55-.45-1-1-1zm0 13H1V2h12v12zM6 9H3V7h3V4h2v3h3v2H8v3H6V9z" />
          </svg> <a href="#diff-94134cfad429926be8c7975c0fe56ea0">docs/reference/search/aggregations/metrics/percentile-rank-aggregation.asciidoc</a> </li> 
         <li> <span class="diffstat float-right"> <span class="text-green"> +5 </span> <span class="text-red"> ?0 </span> <a href="#diff-d3b5613c2d3549daff99db56ec04099a" class="tooltipped tooltipped-s" aria-label="5 lines changed"> <span class="block-diff-added"></span><span class="block-diff-added"></span><span class="block-diff-added"></span><span class="block-diff-added"></span><span class="block-diff-added"></span> </a> </span> 
          <svg aria-hidden="true" class="octicon octicon-diff-modified" height="16" title="modified" version="1.1" viewbox="0 0 14 16" width="14">
           <path fill-rule="evenodd" d="M13 1H1c-.55 0-1 .45-1 1v12c0 .55.45 1 1 1h12c.55 0 1-.45 1-1V2c0-.55-.45-1-1-1zm0 13H1V2h12v12zM4 8c0-1.66 1.34-3 3-3s3 1.34 3 3-1.34 3-3 3-3-1.34-3-3z" />
          </svg> <a href="#diff-d3b5613c2d3549daff99db56ec04099a">src/main/java/org/elasticsearch/search/aggregations/AggregationBuilders.java</a> </li> 
         <li> <span class="diffstat float-right"> <span class="text-green"> +2 </span> <span class="text-red"> ?0 </span> <a href="#diff-1fccde4e89e3ff33fbbf0825d5fbbf35" class="tooltipped tooltipped-s" aria-label="2 lines changed"> <span class="block-diff-added"></span><span class="block-diff-added"></span><span class="block-diff-neutral"></span><span class="block-diff-neutral"></span><span class="block-diff-neutral"></span> </a> </span> 
          <svg aria-hidden="true" class="octicon octicon-diff-modified" height="16" title="modified" version="1.1" viewbox="0 0 14 16" width="14">
           <path fill-rule="evenodd" d="M13 1H1c-.55 0-1 .45-1 1v12c0 .55.45 1 1 1h12c.55 0 1-.45 1-1V2c0-.55-.45-1-1-1zm0 13H1V2h12v12zM4 8c0-1.66 1.34-3 3-3s3 1.34 3 3-1.34 3-3 3-3-1.34-3-3z" />
          </svg> <a href="#diff-1fccde4e89e3ff33fbbf0825d5fbbf35">src/main/java/org/elasticsearch/search/aggregations/AggregationModule.java</a> </li> 
         <li> <span class="diffstat float-right"> <span class="text-green"> +2 </span> <span class="text-red"> ?0 </span> <a href="#diff-b5da67c31971943f632bdbc8b6b3f0a6" class="tooltipped tooltipped-s" aria-label="2 lines changed"> <span class="block-diff-added"></span><span class="block-diff-added"></span><span class="block-diff-neutral"></span><span class="block-diff-neutral"></span><span class="block-diff-neutral"></span> </a> </span> 
          <svg aria-hidden="true" class="octicon octicon-diff-modified" height="16" title="modified" version="1.1" viewbox="0 0 14 16" width="14">
           <path fill-rule="evenodd" d="M13 1H1c-.55 0-1 .45-1 1v12c0 .55.45 1 1 1h12c.55 0 1-.45 1-1V2c0-.55-.45-1-1-1zm0 13H1V2h12v12zM4 8c0-1.66 1.34-3 3-3s3 1.34 3 3-1.34 3-3 3-3-1.34-3-3z" />
          </svg> <a href="#diff-b5da67c31971943f632bdbc8b6b3f0a6">src/main/java/org/elasticsearch/search/aggregations/TransportAggregationModule.java</a> </li> 
         <li> <span class="diffstat float-right"> <span class="text-green"> +137 </span> <span class="text-red"> ?0 </span> <a href="#diff-959f740e9f05de066c413e58d304c511" class="tooltipped tooltipped-s" aria-label="137 lines changed"> <span class="block-diff-added"></span><span class="block-diff-added"></span><span class="block-diff-added"></span><span class="block-diff-added"></span><span class="block-diff-added"></span> </a> </span> 
          <svg aria-hidden="true" class="octicon octicon-diff-added" height="16" title="added" version="1.1" viewbox="0 0 14 16" width="14">
           <path fill-rule="evenodd" d="M13 1H1c-.55 0-1 .45-1 1v12c0 .55.45 1 1 1h12c.55 0 1-.45 1-1V2c0-.55-.45-1-1-1zm0 13H1V2h12v12zM6 9H3V7h3V4h2v3h3v2H8v3H6V9z" />
          </svg> <a href="#diff-959f740e9f05de066c413e58d304c511">...n/java/org/elasticsearch/search/aggregations/metrics/percentiles/AbstractInternalPercentiles.java</a> </li> 
         <li> <span class="diffstat float-right"> <span class="text-green"> +102 </span> <span class="text-red"> ?0 </span> <a href="#diff-7aa25f1c0f6e61285ad445c3c572c01e" class="tooltipped tooltipped-s" aria-label="102 lines changed"> <span class="block-diff-added"></span><span class="block-diff-added"></span><span class="block-diff-added"></span><span class="block-diff-added"></span><span class="block-diff-added"></span> </a> </span> 
          <svg aria-hidden="true" class="octicon octicon-diff-added" height="16" title="added" version="1.1" viewbox="0 0 14 16" width="14">
           <path fill-rule="evenodd" d="M13 1H1c-.55 0-1 .45-1 1v12c0 .55.45 1 1 1h12c.55 0 1-.45 1-1V2c0-.55-.45-1-1-1zm0 13H1V2h12v12zM6 9H3V7h3V4h2v3h3v2H8v3H6V9z" />
          </svg> <a href="#diff-7aa25f1c0f6e61285ad445c3c572c01e">...java/org/elasticsearch/search/aggregations/metrics/percentiles/AbstractPercentilesAggregator.java</a> </li> 
         <li> <span class="diffstat float-right"> <span class="text-green"> +96 </span> <span class="text-red"> ?0 </span> <a href="#diff-e2ca42c7d5a5c65c06a2e1a7b2cd1f6e" class="tooltipped tooltipped-s" aria-label="96 lines changed"> <span class="block-diff-added"></span><span class="block-diff-added"></span><span class="block-diff-added"></span><span class="block-diff-added"></span><span class="block-diff-added"></span> </a> </span> 
          <svg aria-hidden="true" class="octicon octicon-diff-added" height="16" title="added" version="1.1" viewbox="0 0 14 16" width="14">
           <path fill-rule="evenodd" d="M13 1H1c-.55 0-1 .45-1 1v12c0 .55.45 1 1 1h12c.55 0 1-.45 1-1V2c0-.55-.45-1-1-1zm0 13H1V2h12v12zM6 9H3V7h3V4h2v3h3v2H8v3H6V9z" />
          </svg> <a href="#diff-e2ca42c7d5a5c65c06a2e1a7b2cd1f6e">...ain/java/org/elasticsearch/search/aggregations/metrics/percentiles/AbstractPercentilesParser.java</a> </li> 
         <li> <span class="diffstat float-right"> <span class="text-green"> +41 </span> <span class="text-red"> ?0 </span> <a href="#diff-2bb88cc42479f80f0a07c294f7da847c" class="tooltipped tooltipped-s" aria-label="41 lines changed"> <span class="block-diff-added"></span><span class="block-diff-added"></span><span class="block-diff-added"></span><span class="block-diff-added"></span><span class="block-diff-added"></span> </a> </span> 
          <svg aria-hidden="true" class="octicon octicon-diff-added" height="16" title="added" version="1.1" viewbox="0 0 14 16" width="14">
           <path fill-rule="evenodd" d="M13 1H1c-.55 0-1 .45-1 1v12c0 .55.45 1 1 1h12c.55 0 1-.45 1-1V2c0-.55-.45-1-1-1zm0 13H1V2h12v12zM6 9H3V7h3V4h2v3h3v2H8v3H6V9z" />
          </svg> <a href="#diff-2bb88cc42479f80f0a07c294f7da847c">src/main/java/org/elasticsearch/search/aggregations/metrics/percentiles/InternalPercentile.java</a> </li> 
         <li> <span class="diffstat float-right"> <span class="text-green"> +114 </span> <span class="text-red"> ?0 </span> <a href="#diff-cbfcb6f1640aae010f42a1067cc8f0da" class="tooltipped tooltipped-s" aria-label="114 lines changed"> <span class="block-diff-added"></span><span class="block-diff-added"></span><span class="block-diff-added"></span><span class="block-diff-added"></span><span class="block-diff-added"></span> </a> </span> 
          <svg aria-hidden="true" class="octicon octicon-diff-added" height="16" title="added" version="1.1" viewbox="0 0 14 16" width="14">
           <path fill-rule="evenodd" d="M13 1H1c-.55 0-1 .45-1 1v12c0 .55.45 1 1 1h12c.55 0 1-.45 1-1V2c0-.55-.45-1-1-1zm0 13H1V2h12v12zM6 9H3V7h3V4h2v3h3v2H8v3H6V9z" />
          </svg> <a href="#diff-cbfcb6f1640aae010f42a1067cc8f0da">src/main/java/org/elasticsearch/search/aggregations/metrics/percentiles/InternalPercentileRanks.java</a> </li> 
         <li> <span class="diffstat float-right"> <span class="text-green"> +13 </span> <span class="text-red"> ?122 </span> <a href="#diff-414d5f8d03c095eb1424d3d4a7357bd2" class="tooltipped tooltipped-s" aria-label="135 lines changed"> <span class="block-diff-deleted"></span><span class="block-diff-deleted"></span><span class="block-diff-deleted"></span><span class="block-diff-deleted"></span><span class="block-diff-neutral"></span> </a> </span> 
          <svg aria-hidden="true" class="octicon octicon-diff-modified" height="16" title="modified" version="1.1" viewbox="0 0 14 16" width="14">
           <path fill-rule="evenodd" d="M13 1H1c-.55 0-1 .45-1 1v12c0 .55.45 1 1 1h12c.55 0 1-.45 1-1V2c0-.55-.45-1-1-1zm0 13H1V2h12v12zM4 8c0-1.66 1.34-3 3-3s3 1.34 3 3-1.34 3-3 3-3-1.34-3-3z" />
          </svg> <a href="#diff-414d5f8d03c095eb1424d3d4a7357bd2">src/main/java/org/elasticsearch/search/aggregations/metrics/percentiles/InternalPercentiles.java</a> </li> 
         <li> <span class="diffstat float-right"> <span class="text-green"> +28 </span> <span class="text-red"> ?0 </span> <a href="#diff-b596a848b567fae54edc7ebc695410d5" class="tooltipped tooltipped-s" aria-label="28 lines changed"> <span class="block-diff-added"></span><span class="block-diff-added"></span><span class="block-diff-added"></span><span class="block-diff-added"></span><span class="block-diff-added"></span> </a> </span> 
          <svg aria-hidden="true" class="octicon octicon-diff-added" height="16" title="added" version="1.1" viewbox="0 0 14 16" width="14">
           <path fill-rule="evenodd" d="M13 1H1c-.55 0-1 .45-1 1v12c0 .55.45 1 1 1h12c.55 0 1-.45 1-1V2c0-.55-.45-1-1-1zm0 13H1V2h12v12zM6 9H3V7h3V4h2v3h3v2H8v3H6V9z" />
          </svg> <a href="#diff-b596a848b567fae54edc7ebc695410d5">src/main/java/org/elasticsearch/search/aggregations/metrics/percentiles/Percentile.java</a> </li> 
         <li> <span class="diffstat float-right"> <span class="text-green"> +27 </span> <span class="text-red"> ?0 </span> <a href="#diff-4760fa7db90d752631b9bfcd0a9b2703" class="tooltipped tooltipped-s" aria-label="27 lines changed"> <span class="block-diff-added"></span><span class="block-diff-added"></span><span class="block-diff-added"></span><span class="block-diff-added"></span><span class="block-diff-added"></span> </a> </span> 
          <svg aria-hidden="true" class="octicon octicon-diff-added" height="16" title="added" version="1.1" viewbox="0 0 14 16" width="14">
           <path fill-rule="evenodd" d="M13 1H1c-.55 0-1 .45-1 1v12c0 .55.45 1 1 1h12c.55 0 1-.45 1-1V2c0-.55-.45-1-1-1zm0 13H1V2h12v12zM6 9H3V7h3V4h2v3h3v2H8v3H6V9z" />
          </svg> <a href="#diff-4760fa7db90d752631b9bfcd0a9b2703">src/main/java/org/elasticsearch/search/aggregations/metrics/percentiles/PercentileRanks.java</a> </li> 
         <li> <span class="diffstat float-right"> <span class="text-green"> +86 </span> <span class="text-red"> ?0 </span> <a href="#diff-543f2d9050f08967ebfdbff34c5e45c8" class="tooltipped tooltipped-s" aria-label="86 lines changed"> <span class="block-diff-added"></span><span class="block-diff-added"></span><span class="block-diff-added"></span><span class="block-diff-added"></span><span class="block-diff-added"></span> </a> </span> 
          <svg aria-hidden="true" class="octicon octicon-diff-added" height="16" title="added" version="1.1" viewbox="0 0 14 16" width="14">
           <path fill-rule="evenodd" d="M13 1H1c-.55 0-1 .45-1 1v12c0 .55.45 1 1 1h12c.55 0 1-.45 1-1V2c0-.55-.45-1-1-1zm0 13H1V2h12v12zM6 9H3V7h3V4h2v3h3v2H8v3H6V9z" />
          </svg> <a href="#diff-543f2d9050f08967ebfdbff34c5e45c8">...ain/java/org/elasticsearch/search/aggregations/metrics/percentiles/PercentileRanksAggregator.java</a> </li> 
         <li> <span class="diffstat float-right"> <span class="text-green"> +60 </span> <span class="text-red"> ?0 </span> <a href="#diff-e969597fda2a8b2fc6750886ede7d13c" class="tooltipped tooltipped-s" aria-label="60 lines changed"> <span class="block-diff-added"></span><span class="block-diff-added"></span><span class="block-diff-added"></span><span class="block-diff-added"></span><span class="block-diff-added"></span> </a> </span> 
          <svg aria-hidden="true" class="octicon octicon-diff-added" height="16" title="added" version="1.1" viewbox="0 0 14 16" width="14">
           <path fill-rule="evenodd" d="M13 1H1c-.55 0-1 .45-1 1v12c0 .55.45 1 1 1h12c.55 0 1-.45 1-1V2c0-.55-.45-1-1-1zm0 13H1V2h12v12zM6 9H3V7h3V4h2v3h3v2H8v3H6V9z" />
          </svg> <a href="#diff-e969597fda2a8b2fc6750886ede7d13c">src/main/java/org/elasticsearch/search/aggregations/metrics/percentiles/PercentileRanksBuilder.java</a> </li> 
         <li> <span class="diffstat float-right"> <span class="text-green"> +48 </span> <span class="text-red"> ?0 </span> <a href="#diff-8ad2b36102e4b03bcf038efb2eb306ce" class="tooltipped tooltipped-s" aria-label="48 lines changed"> <span class="block-diff-added"></span><span class="block-diff-added"></span><span class="block-diff-added"></span><span class="block-diff-added"></span><span class="block-diff-added"></span> </a> </span> 
          <svg aria-hidden="true" class="octicon octicon-diff-added" height="16" title="added" version="1.1" viewbox="0 0 14 16" width="14">
           <path fill-rule="evenodd" d="M13 1H1c-.55 0-1 .45-1 1v12c0 .55.45 1 1 1h12c.55 0 1-.45 1-1V2c0-.55-.45-1-1-1zm0 13H1V2h12v12zM6 9H3V7h3V4h2v3h3v2H8v3H6V9z" />
          </svg> <a href="#diff-8ad2b36102e4b03bcf038efb2eb306ce">src/main/java/org/elasticsearch/search/aggregations/metrics/percentiles/PercentileRanksParser.java</a> </li> 
         <li> <span class="diffstat float-right"> <span class="text-green"> +1 </span> <span class="text-red"> ?9 </span> <a href="#diff-cdf50925fa9fce428ba235090a190bb3" class="tooltipped tooltipped-s" aria-label="10 lines changed"> <span class="block-diff-deleted"></span><span class="block-diff-deleted"></span><span class="block-diff-deleted"></span><span class="block-diff-deleted"></span><span class="block-diff-neutral"></span> </a> </span> 
          <svg aria-hidden="true" class="octicon octicon-diff-modified" height="16" title="modified" version="1.1" viewbox="0 0 14 16" width="14">
           <path fill-rule="evenodd" d="M13 1H1c-.55 0-1 .45-1 1v12c0 .55.45 1 1 1h12c.55 0 1-.45 1-1V2c0-.55-.45-1-1-1zm0 13H1V2h12v12zM4 8c0-1.66 1.34-3 3-3s3 1.34 3 3-1.34 3-3 3-3-1.34-3-3z" />
          </svg> <a href="#diff-cdf50925fa9fce428ba235090a190bb3">src/main/java/org/elasticsearch/search/aggregations/metrics/percentiles/Percentiles.java</a> </li> 
         <li> <span class="diffstat float-right"> <span class="text-green"> +13 </span> <span class="text-red"> ?85 </span> <a href="#diff-386d91edcae197ae8e9e46fa03fa0ab9" class="tooltipped tooltipped-s" aria-label="98 lines changed"> <span class="block-diff-deleted"></span><span class="block-diff-deleted"></span><span class="block-diff-deleted"></span><span class="block-diff-deleted"></span><span class="block-diff-neutral"></span> </a> </span> 
          <svg aria-hidden="true" class="octicon octicon-diff-modified" height="16" title="modified" version="1.1" viewbox="0 0 14 16" width="14">
           <path fill-rule="evenodd" d="M13 1H1c-.55 0-1 .45-1 1v12c0 .55.45 1 1 1h12c.55 0 1-.45 1-1V2c0-.55-.45-1-1-1zm0 13H1V2h12v12zM4 8c0-1.66 1.34-3 3-3s3 1.34 3 3-1.34 3-3 3-3-1.34-3-3z" />
          </svg> <a href="#diff-386d91edcae197ae8e9e46fa03fa0ab9">src/main/java/org/elasticsearch/search/aggregations/metrics/percentiles/PercentilesAggregator.java</a> </li> 
         <li> <span class="diffstat float-right"> <span class="text-green"> +11 </span> <span class="text-red"> ?66 </span> <a href="#diff-f4eaef2d4186e3d5192ef3fda1e45ba9" class="tooltipped tooltipped-s" aria-label="77 lines changed"> <span class="block-diff-deleted"></span><span class="block-diff-deleted"></span><span class="block-diff-deleted"></span><span class="block-diff-deleted"></span><span class="block-diff-neutral"></span> </a> </span> 
          <svg aria-hidden="true" class="octicon octicon-diff-modified" height="16" title="modified" version="1.1" viewbox="0 0 14 16" width="14">
           <path fill-rule="evenodd" d="M13 1H1c-.55 0-1 .45-1 1v12c0 .55.45 1 1 1h12c.55 0 1-.45 1-1V2c0-.55-.45-1-1-1zm0 13H1V2h12v12zM4 8c0-1.66 1.34-3 3-3s3 1.34 3 3-1.34 3-3 3-3-1.34-3-3z" />
          </svg> <a href="#diff-f4eaef2d4186e3d5192ef3fda1e45ba9">src/main/java/org/elasticsearch/search/aggregations/metrics/percentiles/PercentilesParser.java</a> </li> 
         <li> <span class="diffstat float-right"> <span class="text-green"> +2 </span> <span class="text-red"> ?1 </span> <a href="#diff-b1d1f816af2720c7f03fdac7f1987fe3" class="tooltipped tooltipped-s" aria-label="3 lines changed"> <span class="block-diff-added"></span><span class="block-diff-added"></span><span class="block-diff-deleted"></span><span class="block-diff-neutral"></span><span class="block-diff-neutral"></span> </a> </span> 
          <svg aria-hidden="true" class="octicon octicon-diff-modified" height="16" title="modified" version="1.1" viewbox="0 0 14 16" width="14">
           <path fill-rule="evenodd" d="M13 1H1c-.55 0-1 .45-1 1v12c0 .55.45 1 1 1h12c.55 0 1-.45 1-1V2c0-.55-.45-1-1-1zm0 13H1V2h12v12zM4 8c0-1.66 1.34-3 3-3s3 1.34 3 3-1.34 3-3 3-3-1.34-3-3z" />
          </svg> <a href="#diff-b1d1f816af2720c7f03fdac7f1987fe3">...t/java/org/elasticsearch/benchmark/search/aggregations/PercentilesAggregationSearchBenchmark.java</a> </li> 
         <li> <span class="diffstat float-right"> <span class="text-green"> +405 </span> <span class="text-red"> ?0 </span> <a href="#diff-e6ad31fc58af56e3e8468fd978ed5d52" class="tooltipped tooltipped-s" aria-label="405 lines changed"> <span class="block-diff-added"></span><span class="block-diff-added"></span><span class="block-diff-added"></span><span class="block-diff-added"></span><span class="block-diff-added"></span> </a> </span> 
          <svg aria-hidden="true" class="octicon octicon-diff-added" height="16" title="added" version="1.1" viewbox="0 0 14 16" width="14">
           <path fill-rule="evenodd" d="M13 1H1c-.55 0-1 .45-1 1v12c0 .55.45 1 1 1h12c.55 0 1-.45 1-1V2c0-.55-.45-1-1-1zm0 13H1V2h12v12zM6 9H3V7h3V4h2v3h3v2H8v3H6V9z" />
          </svg> <a href="#diff-e6ad31fc58af56e3e8468fd978ed5d52">src/test/java/org/elasticsearch/search/aggregations/metrics/PercentileRanksTests.java</a> </li> 
         <li> <span class="diffstat float-right"> <span class="text-green"> +1 </span> <span class="text-red"> ?1 </span> <a href="#diff-a9890fe6ee53748b95342dc471bc357c" class="tooltipped tooltipped-s" aria-label="2 lines changed"> <span class="block-diff-added"></span><span class="block-diff-deleted"></span><span class="block-diff-neutral"></span><span class="block-diff-neutral"></span><span class="block-diff-neutral"></span> </a> </span> 
          <svg aria-hidden="true" class="octicon octicon-diff-modified" height="16" title="modified" version="1.1" viewbox="0 0 14 16" width="14">
           <path fill-rule="evenodd" d="M13 1H1c-.55 0-1 .45-1 1v12c0 .55.45 1 1 1h12c.55 0 1-.45 1-1V2c0-.55-.45-1-1-1zm0 13H1V2h12v12zM4 8c0-1.66 1.34-3 3-3s3 1.34 3 3-1.34 3-3 3-3-1.34-3-3z" />
          </svg> <a href="#diff-a9890fe6ee53748b95342dc471bc357c">src/test/java/org/elasticsearch/search/aggregations/metrics/PercentilesTests.java</a> </li> 
        </ol> 
       </div> 
       <div id="files" class="diff-view "> 
        <div class="js-diff-progressive-container"> 
         <a name="diff-55ff41fedc3c99ac49e5461d5aa33db9"></a> 
         <div id="diff-0" class="file js-file js-details-container Details
              soft-wrap
              file-type-prose
             
             
             
              show-inline-notes
           "> 
          <div class="file-header js-file-header" data-path="docs/reference/search/aggregations/metrics.asciidoc" data-short-path="55ff41f" data-anchor="diff-55ff41fedc3c99ac49e5461d5aa33db9"> 
           <div class="file-actions"> 
            <span class="show-file-notes pt-1"> <label> <input type="checkbox" checked class="js-toggle-file-notes"> Show comments </label> </span> 
            <span class="BtnGroup"> 
             <!-- '"` -->
             <!-- </textarea></xmp> -->
             <form accept-charset="UTF-8" action="/elastic/elasticsearch/diffs/0?commit=556a498bf69193dfcb8b1dd52bfc19be214fd716&amp;sha1=83abc0221bc60aa3273629a6e21aa7962d1ec411&amp;sha2=556a498bf69193dfcb8b1dd52bfc19be214fd716" class="BtnGroup-form js-prose-diff-toggle-form" method="get">
              <div style="margin:0;padding:0;display:inline">
               <input name="utf8" type="hidden" value="?">
              </div> 
              <button class="btn btn-sm BtnGroup-item tooltipped tooltipped tooltipped-n source js-source selected" aria-label="Display the source diff" type="submit" data-disable-with> 
               <svg aria-hidden="true" class="octicon octicon-code" height="16" version="1.1" viewbox="0 0 14 16" width="14">
                <path fill-rule="evenodd" d="M9.5 3L8 4.5 11.5 8 8 11.5 9.5 13 14 8 9.5 3zm-5 0L0 8l4.5 5L6 11.5 2.5 8 6 4.5 4.5 3z" />
               </svg> </button> 
             </form> 
             <!-- '"` -->
             <!-- </textarea></xmp> -->
             <form accept-charset="UTF-8" action="/elastic/elasticsearch/diffs/0?commit=556a498bf69193dfcb8b1dd52bfc19be214fd716&amp;sha1=83abc0221bc60aa3273629a6e21aa7962d1ec411&amp;sha2=556a498bf69193dfcb8b1dd52bfc19be214fd716&amp;short_path=55ff41f" class="BtnGroup-form js-prose-diff-toggle-form" method="get">
              <div style="margin:0;padding:0;display:inline">
               <input name="utf8" type="hidden" value="?">
              </div> 
              <button class="btn btn-sm BtnGroup-item tooltipped tooltipped tooltipped-n rendered js-rendered" aria-label="Display the rich diff" type="submit" data-disable-with> 
               <svg aria-hidden="true" class="octicon octicon-file-text" height="16" version="1.1" viewbox="0 0 12 16" width="12">
                <path d="M6 5H2V4h4v1zM2 8h7V7H2v1zm0 2h7V9H2v1zm0 2h7v-1H2v1zm10-7.5V14c0 .55-.45 1-1 1H1c-.55 0-1-.45-1-1V2c0-.55.45-1 1-1h7.5L12 4.5zM11 5L8 2H1v12h10V5z" />
               </svg> </button> 
             </form> </span> 
            <a href="/elastic/elasticsearch/blob/556a498bf69193dfcb8b1dd52bfc19be214fd716/docs/reference/search/aggregations/metrics.asciidoc" class="btn btn-sm tooltipped tooltipped-nw" rel="nofollow" aria-label="View the whole file at version 556a498 ">View</a> 
            <button type="button" class="btn-octicon p-1 pr-2 js-details-target" aria-label="Toggle diff text" aria-expanded="true"> 
             <svg aria-hidden="true" class="octicon octicon-chevron-down Details-content--shown" height="16" version="1.1" viewbox="0 0 10 16" width="10">
              <path fill-rule="evenodd" d="M5 11L0 6l1.5-1.5L5 8.25 8.5 4.5 10 6z" />
             </svg> 
             <svg aria-hidden="true" class="octicon octicon-chevron-up Details-content--hidden" height="16" version="1.1" viewbox="0 0 10 16" width="10">
              <path fill-rule="evenodd" d="M10 10l-1.5 1.5L5 7.75 1.5 11.5 0 10l5-5z" />
             </svg> </button> 
           </div> 
           <div class="file-info"> 
            <span class="diffstat tooltipped tooltipped-e" aria-label="2 additions &amp; 0 deletions">2 <span class="block-diff-added"></span><span class="block-diff-added"></span><span class="block-diff-neutral"></span><span class="block-diff-neutral"></span><span class="block-diff-neutral"></span></span> 
            <a href="#diff-55ff41fedc3c99ac49e5461d5aa33db9" class="link-gray-dark" title="docs/reference/search/aggregations/metrics.asciidoc">docs/reference/search/aggregations/metrics.asciidoc</a> 
           </div> 
          </div> 
          <div class="js-file-content Details-content--shown"> 
           <div class="data highlight blob-wrapper"> 
            <table class="diff-table tab-size  " data-tab-size="8"> 
             <colgroup> 
              <col width="40"> 
              <col width="40"> 
              <col> 
             </colgroup> 
             <tbody>
              <tr class="js-expandable-line" data-position="0"> 
               <td class="blob-num blob-num-expandable" colspan="2"> <a href="#diff-55ff41fedc3c99ac49e5461d5aa33db9" class="diff-expander js-expand" title="Expand" aria-label="Expand" data-url="/elastic/elasticsearch/blob_excerpt/7fcc6fce24cdb55d4146b57393d8c94b32933fc8?diff=unified&amp;in_wiki_context=&amp;left_hunk_size=6&amp;mode=100644&amp;next_line_num_left=16&amp;next_line_num_right=16&amp;path=docs%2Freference%2Fsearch%2Faggregations%2Fmetrics.asciidoc&amp;prev_line_num_left=&amp;prev_line_num_right=&amp;right_hunk_size=8" data-left-range="1-15" data-right-range="1-15"> 
                 <svg aria-hidden="true" class="octicon octicon-unfold" height="16" version="1.1" viewbox="0 0 14 16" width="14">
                  <path fill-rule="evenodd" d="M11.5 7.5L14 10c0 .55-.45 1-1 1H9v-1h3.5l-2-2h-7l-2 2H5v1H1c-.55 0-1-.45-1-1l2.5-2.5L0 5c0-.55.45-1 1-1h4v1H1.5l2 2h7l2-2H9V4h4c.55 0 1 .45 1 1l-2.5 2.5zM6 6h2V3h2L7 0 4 3h2v3zm2 3H6v3H4l3 3 3-3H8V9z" />
                 </svg> </a> </td> 
               <td class="blob-code blob-code-inner blob-code-hunk">@@ -16,6 +16,8 @@ include::metrics/valuecount-aggregation.asciidoc[]</td> 
              </tr> 
              <tr> 
               <td id="diff-55ff41fedc3c99ac49e5461d5aa33db9L16" data-line-number="16" class="blob-num blob-num-context js-linkable-line-number"></td> 
               <td id="diff-55ff41fedc3c99ac49e5461d5aa33db9R16" data-line-number="16" class="blob-num blob-num-context js-linkable-line-number"></td> 
               <td class="blob-code blob-code-context"> <span class="blob-code-inner"> </span> </td> 
              </tr> 
              <tr> 
               <td id="diff-55ff41fedc3c99ac49e5461d5aa33db9L17" data-line-number="17" class="blob-num blob-num-context js-linkable-line-number"></td> 
               <td id="diff-55ff41fedc3c99ac49e5461d5aa33db9R17" data-line-number="17" class="blob-num blob-num-context js-linkable-line-number"></td> 
               <td class="blob-code blob-code-context"> <span class="blob-code-inner"> <span class="pl-s">include::metrics/percentile-aggregation.asciidoc[]</span></span> </td> 
              </tr> 
              <tr> 
               <td id="diff-55ff41fedc3c99ac49e5461d5aa33db9L18" data-line-number="18" class="blob-num blob-num-context js-linkable-line-number"></td> 
               <td id="diff-55ff41fedc3c99ac49e5461d5aa33db9R18" data-line-number="18" class="blob-num blob-num-context js-linkable-line-number"></td> 
               <td class="blob-code blob-code-context"> <span class="blob-code-inner"> </span> </td> 
              </tr> 
              <tr> 
               <td class="blob-num blob-num-addition empty-cell"></td> 
               <td id="diff-55ff41fedc3c99ac49e5461d5aa33db9R19" data-line-number="19" class="blob-num blob-num-addition js-linkable-line-number"></td> 
               <td class="blob-code blob-code-addition"> <span class="blob-code-inner">+<span class="pl-s">include::metrics/percentile-rank-aggregation.asciidoc[]</span></span> </td> 
              </tr> 
              <tr> 
               <td class="blob-num blob-num-addition empty-cell"></td> 
               <td id="diff-55ff41fedc3c99ac49e5461d5aa33db9R20" data-line-number="20" class="blob-num blob-num-addition js-linkable-line-number"></td> 
               <td class="blob-code blob-code-addition"> <span class="blob-code-inner">+</span> </td> 
              </tr> 
              <tr> 
               <td id="diff-55ff41fedc3c99ac49e5461d5aa33db9L19" data-line-number="19" class="blob-num blob-num-context js-linkable-line-number"></td> 
               <td id="diff-55ff41fedc3c99ac49e5461d5aa33db9R21" data-line-number="21" class="blob-num blob-num-context js-linkable-line-number"></td> 
               <td class="blob-code blob-code-context"> <span class="blob-code-inner"> <span class="pl-s">include::metrics/cardinality-aggregation.asciidoc[]</span></span> </td> 
              </tr> 
              <tr> 
               <td id="diff-55ff41fedc3c99ac49e5461d5aa33db9L20" data-line-number="20" class="blob-num blob-num-context js-linkable-line-number"></td> 
               <td id="diff-55ff41fedc3c99ac49e5461d5aa33db9R22" data-line-number="22" class="blob-num blob-num-context js-linkable-line-number"></td> 
               <td class="blob-code blob-code-context"> <span class="blob-code-inner"> </span> </td> 
              </tr> 
              <tr> 
               <td id="diff-55ff41fedc3c99ac49e5461d5aa33db9L21" data-line-number="21" class="blob-num blob-num-context js-linkable-line-number"></td> 
               <td id="diff-55ff41fedc3c99ac49e5461d5aa33db9R23" data-line-number="23" class="blob-num blob-num-context js-linkable-line-number"></td> 
               <td class="blob-code blob-code-context"> <span class="blob-code-inner"> <span class="pl-s">include::metrics/geobounds-aggregation.asciidoc[]</span></span> </td> 
              </tr> 
              <tr class="js-expandable-line"> 
               <td class="blob-num blob-num-expandable" colspan="2"> <a href="#diff-55ff41fedc3c99ac49e5461d5aa33db9" class="diff-expander js-expand" title="Expand" aria-label="Expand" data-url="/elastic/elasticsearch/blob_excerpt/7fcc6fce24cdb55d4146b57393d8c94b32933fc8?diff=unified&amp;in_wiki_context=&amp;mode=100644&amp;path=docs%2Freference%2Fsearch%2Faggregations%2Fmetrics.asciidoc&amp;prev_line_num_left=21&amp;prev_line_num_right=23" data-left-range="22-25" data-right-range="24-25"> 
                 <svg aria-hidden="true" class="octicon octicon-unfold" height="16" version="1.1" viewbox="0 0 14 16" width="14">
                  <path fill-rule="evenodd" d="M11.5 7.5L14 10c0 .55-.45 1-1 1H9v-1h3.5l-2-2h-7l-2 2H5v1H1c-.55 0-1-.45-1-1l2.5-2.5L0 5c0-.55.45-1 1-1h4v1H1.5l2 2h7l2-2H9V4h4c.55 0 1 .45 1 1l-2.5 2.5zM6 6h2V3h2L7 0 4 3h2v3zm2 3H6v3H4l3 3 3-3H8V9z" />
                 </svg> </a> </td> 
               <td class="blob-code blob-code-expandable"></td> 
              </tr> 
             </tbody>
            </table> 
           </div> 
          </div> 
         </div> 
         <a name="diff-e758b38b8ae200c0659ec5cd9fe95f3b"></a> 
         <div id="diff-1" class="file js-file js-details-container Details
              soft-wrap
              file-type-prose
             
             
             
              show-inline-notes
           "> 
          <div class="file-header js-file-header" data-path="docs/reference/search/aggregations/metrics/percentile-aggregation.asciidoc" data-short-path="e758b38" data-anchor="diff-e758b38b8ae200c0659ec5cd9fe95f3b"> 
           <div class="file-actions"> 
            <span class="show-file-notes pt-1"> <label> <input type="checkbox" checked class="js-toggle-file-notes"> Show comments </label> </span> 
            <span class="BtnGroup"> 
             <!-- '"` -->
             <!-- </textarea></xmp> -->
             <form accept-charset="UTF-8" action="/elastic/elasticsearch/diffs/1?commit=556a498bf69193dfcb8b1dd52bfc19be214fd716&amp;sha1=83abc0221bc60aa3273629a6e21aa7962d1ec411&amp;sha2=556a498bf69193dfcb8b1dd52bfc19be214fd716" class="BtnGroup-form js-prose-diff-toggle-form" method="get">
              <div style="margin:0;padding:0;display:inline">
               <input name="utf8" type="hidden" value="?">
              </div> 
              <button class="btn btn-sm BtnGroup-item tooltipped tooltipped tooltipped-n source js-source selected" aria-label="Display the source diff" type="submit" data-disable-with> 
               <svg aria-hidden="true" class="octicon octicon-code" height="16" version="1.1" viewbox="0 0 14 16" width="14">
                <path fill-rule="evenodd" d="M9.5 3L8 4.5 11.5 8 8 11.5 9.5 13 14 8 9.5 3zm-5 0L0 8l4.5 5L6 11.5 2.5 8 6 4.5 4.5 3z" />
               </svg> </button> 
             </form> 
             <!-- '"` -->
             <!-- </textarea></xmp> -->
             <form accept-charset="UTF-8" action="/elastic/elasticsearch/diffs/1?commit=556a498bf69193dfcb8b1dd52bfc19be214fd716&amp;sha1=83abc0221bc60aa3273629a6e21aa7962d1ec411&amp;sha2=556a498bf69193dfcb8b1dd52bfc19be214fd716&amp;short_path=e758b38" class="BtnGroup-form js-prose-diff-toggle-form" method="get">
              <div style="margin:0;padding:0;display:inline">
               <input name="utf8" type="hidden" value="?">
              </div> 
              <button class="btn btn-sm BtnGroup-item tooltipped tooltipped tooltipped-n rendered js-rendered" aria-label="Display the rich diff" type="submit" data-disable-with> 
               <svg aria-hidden="true" class="octicon octicon-file-text" height="16" version="1.1" viewbox="0 0 12 16" width="12">
                <path d="M6 5H2V4h4v1zM2 8h7V7H2v1zm0 2h7V9H2v1zm0 2h7v-1H2v1zm10-7.5V14c0 .55-.45 1-1 1H1c-.55 0-1-.45-1-1V2c0-.55.45-1 1-1h7.5L12 4.5zM11 5L8 2H1v12h10V5z" />
               </svg> </button> 
             </form> </span> 
            <a href="/elastic/elasticsearch/blob/556a498bf69193dfcb8b1dd52bfc19be214fd716/docs/reference/search/aggregations/metrics/percentile-aggregation.asciidoc" class="btn btn-sm tooltipped tooltipped-nw" rel="nofollow" aria-label="View the whole file at version 556a498 ">View</a> 
            <button type="button" class="btn-octicon p-1 pr-2 js-details-target" aria-label="Toggle diff text" aria-expanded="true"> 
             <svg aria-hidden="true" class="octicon octicon-chevron-down Details-content--shown" height="16" version="1.1" viewbox="0 0 10 16" width="10">
              <path fill-rule="evenodd" d="M5 11L0 6l1.5-1.5L5 8.25 8.5 4.5 10 6z" />
             </svg> 
             <svg aria-hidden="true" class="octicon octicon-chevron-up Details-content--hidden" height="16" version="1.1" viewbox="0 0 10 16" width="10">
              <path fill-rule="evenodd" d="M10 10l-1.5 1.5L5 7.75 1.5 11.5 0 10l5-5z" />
             </svg> </button> 
           </div> 
           <div class="file-info"> 
            <span class="diffstat tooltipped tooltipped-e" aria-label="2 additions &amp; 0 deletions">2 <span class="block-diff-added"></span><span class="block-diff-added"></span><span class="block-diff-neutral"></span><span class="block-diff-neutral"></span><span class="block-diff-neutral"></span></span> 
            <a href="#diff-e758b38b8ae200c0659ec5cd9fe95f3b" class="link-gray-dark" title="docs/reference/search/aggregations/metrics/percentile-aggregation.asciidoc">docs/reference/search/aggregations/metrics/percentile-aggregation.asciidoc</a> 
           </div> 
          </div> 
          <div class="js-file-content Details-content--shown"> 
           <div class="data highlight blob-wrapper"> 
            <table class="diff-table tab-size  " data-tab-size="8"> 
             <colgroup> 
              <col width="44"> 
              <col width="44"> 
              <col> 
             </colgroup> 
             <tbody>
              <tr class="js-expandable-line" data-position="0"> 
               <td class="blob-num blob-num-expandable" colspan="2"> <a href="#diff-e758b38b8ae200c0659ec5cd9fe95f3b" class="diff-expander js-expand" title="Expand" aria-label="Expand" data-url="/elastic/elasticsearch/blob_excerpt/64b7277241ffd67a0735d0db5f00756f173aed5d?diff=unified&amp;in_wiki_context=&amp;left_hunk_size=6&amp;mode=100644&amp;next_line_num_left=125&amp;next_line_num_right=125&amp;path=docs%2Freference%2Fsearch%2Faggregations%2Fmetrics%2Fpercentile-aggregation.asciidoc&amp;prev_line_num_left=&amp;prev_line_num_right=&amp;right_hunk_size=7" data-left-range="1-124" data-right-range="1-124"> 
                 <svg aria-hidden="true" class="octicon octicon-unfold" height="16" version="1.1" viewbox="0 0 14 16" width="14">
                  <path fill-rule="evenodd" d="M11.5 7.5L14 10c0 .55-.45 1-1 1H9v-1h3.5l-2-2h-7l-2 2H5v1H1c-.55 0-1-.45-1-1l2.5-2.5L0 5c0-.55.45-1 1-1h4v1H1.5l2 2h7l2-2H9V4h4c.55 0 1 .45 1 1l-2.5 2.5zM6 6h2V3h2L7 0 4 3h2v3zm2 3H6v3H4l3 3 3-3H8V9z" />
                 </svg> </a> </td> 
               <td class="blob-code blob-code-inner blob-code-hunk">@@ -125,6 +125,7 @@ a script to convert them on-the-fly:</td> 
              </tr> 
              <tr> 
               <td id="diff-e758b38b8ae200c0659ec5cd9fe95f3bL125" data-line-number="125" class="blob-num blob-num-context js-linkable-line-number"></td> 
               <td id="diff-e758b38b8ae200c0659ec5cd9fe95f3bR125" data-line-number="125" class="blob-num blob-num-context js-linkable-line-number"></td> 
               <td class="blob-code blob-code-context"> <span class="blob-code-inner"> script to generate values which percentiles are calculated on</span> </td> 
              </tr> 
              <tr> 
               <td id="diff-e758b38b8ae200c0659ec5cd9fe95f3bL126" data-line-number="126" class="blob-num blob-num-context js-linkable-line-number"></td> 
               <td id="diff-e758b38b8ae200c0659ec5cd9fe95f3bR126" data-line-number="126" class="blob-num blob-num-context js-linkable-line-number"></td> 
               <td class="blob-code blob-code-context"> <span class="blob-code-inner"> &lt;2&gt; Scripting supports parameterized input just like any other script</span> </td> 
              </tr> 
              <tr> 
               <td id="diff-e758b38b8ae200c0659ec5cd9fe95f3bL127" data-line-number="127" class="blob-num blob-num-context js-linkable-line-number"></td> 
               <td id="diff-e758b38b8ae200c0659ec5cd9fe95f3bR127" data-line-number="127" class="blob-num blob-num-context js-linkable-line-number"></td> 
               <td class="blob-code blob-code-context"> <span class="blob-code-inner"> </span> </td> 
              </tr> 
              <tr> 
               <td class="blob-num blob-num-addition empty-cell"></td> 
               <td id="diff-e758b38b8ae200c0659ec5cd9fe95f3bR128" data-line-number="128" class="blob-num blob-num-addition js-linkable-line-number"></td> 
               <td class="blob-code blob-code-addition"> <span class="blob-code-inner">+[[search-aggregations-metrics-percentile-aggregation-approximation]]</span> </td> 
              </tr> 
              <tr> 
               <td id="diff-e758b38b8ae200c0659ec5cd9fe95f3bL128" data-line-number="128" class="blob-num blob-num-context js-linkable-line-number"></td> 
               <td id="diff-e758b38b8ae200c0659ec5cd9fe95f3bR129" data-line-number="129" class="blob-num blob-num-context js-linkable-line-number"></td> 
               <td class="blob-code blob-code-context"> <span class="blob-code-inner"> ==== Percentiles are (usually) approximate</span> </td> 
              </tr> 
              <tr> 
               <td id="diff-e758b38b8ae200c0659ec5cd9fe95f3bL129" data-line-number="129" class="blob-num blob-num-context js-linkable-line-number"></td> 
               <td id="diff-e758b38b8ae200c0659ec5cd9fe95f3bR130" data-line-number="130" class="blob-num blob-num-context js-linkable-line-number"></td> 
               <td class="blob-code blob-code-context"> <span class="blob-code-inner"> </span> </td> 
              </tr> 
              <tr> 
               <td id="diff-e758b38b8ae200c0659ec5cd9fe95f3bL130" data-line-number="130" class="blob-num blob-num-context js-linkable-line-number"></td> 
               <td id="diff-e758b38b8ae200c0659ec5cd9fe95f3bR131" data-line-number="131" class="blob-num blob-num-context js-linkable-line-number"></td> 
               <td class="blob-code blob-code-context"> <span class="blob-code-inner"> There are many different algorithms to calculate percentiles. The naive</span> </td> 
              </tr> 
              <tr class="js-expandable-line" data-position="8"> 
               <td class="blob-num blob-num-expandable" colspan="2"> <a href="#diff-e758b38b8ae200c0659ec5cd9fe95f3b" class="diff-expander js-expand" title="Expand" aria-label="Expand" data-url="/elastic/elasticsearch/blob_excerpt/64b7277241ffd67a0735d0db5f00756f173aed5d?diff=unified&amp;in_wiki_context=&amp;left_hunk_size=6&amp;mode=100644&amp;next_line_num_left=161&amp;next_line_num_right=162&amp;path=docs%2Freference%2Fsearch%2Faggregations%2Fmetrics%2Fpercentile-aggregation.asciidoc&amp;prev_line_num_left=130&amp;prev_line_num_right=131&amp;right_hunk_size=7" data-left-range="131-160" data-right-range="132-161"> 
                 <svg aria-hidden="true" class="octicon octicon-unfold" height="16" version="1.1" viewbox="0 0 14 16" width="14">
                  <path fill-rule="evenodd" d="M11.5 7.5L14 10c0 .55-.45 1-1 1H9v-1h3.5l-2-2h-7l-2 2H5v1H1c-.55 0-1-.45-1-1l2.5-2.5L0 5c0-.55.45-1 1-1h4v1H1.5l2 2h7l2-2H9V4h4c.55 0 1 .45 1 1l-2.5 2.5zM6 6h2V3h2L7 0 4 3h2v3zm2 3H6v3H4l3 3 3-3H8V9z" />
                 </svg> </a> </td> 
               <td class="blob-code blob-code-inner blob-code-hunk">@@ -161,6 +162,7 @@ for large number of values is that the law of large numbers makes the distributi</td> 
              </tr> 
              <tr> 
               <td id="diff-e758b38b8ae200c0659ec5cd9fe95f3bL161" data-line-number="161" class="blob-num blob-num-context js-linkable-line-number"></td> 
               <td id="diff-e758b38b8ae200c0659ec5cd9fe95f3bR162" data-line-number="162" class="blob-num blob-num-context js-linkable-line-number"></td> 
               <td class="blob-code blob-code-context"> <span class="blob-code-inner"> values more and more uniform and the t-digest tree can do a better job at summarizing</span> </td> 
              </tr> 
              <tr> 
               <td id="diff-e758b38b8ae200c0659ec5cd9fe95f3bL162" data-line-number="162" class="blob-num blob-num-context js-linkable-line-number"></td> 
               <td id="diff-e758b38b8ae200c0659ec5cd9fe95f3bR163" data-line-number="163" class="blob-num blob-num-context js-linkable-line-number"></td> 
               <td class="blob-code blob-code-context"> <span class="blob-code-inner"> it. It would not be the case on more skewed distributions.</span> </td> 
              </tr> 
              <tr> 
               <td id="diff-e758b38b8ae200c0659ec5cd9fe95f3bL163" data-line-number="163" class="blob-num blob-num-context js-linkable-line-number"></td> 
               <td id="diff-e758b38b8ae200c0659ec5cd9fe95f3bR164" data-line-number="164" class="blob-num blob-num-context js-linkable-line-number"></td> 
               <td class="blob-code blob-code-context"> <span class="blob-code-inner"> </span> </td> 
              </tr> 
              <tr> 
               <td class="blob-num blob-num-addition empty-cell"></td> 
               <td id="diff-e758b38b8ae200c0659ec5cd9fe95f3bR165" data-line-number="165" class="blob-num blob-num-addition js-linkable-line-number"></td> 
               <td class="blob-code blob-code-addition"> <span class="blob-code-inner">+[[search-aggregations-metrics-percentile-aggregation-compression]]</span> </td> 
              </tr> 
              <tr> 
               <td id="diff-e758b38b8ae200c0659ec5cd9fe95f3bL164" data-line-number="164" class="blob-num blob-num-context js-linkable-line-number"></td> 
               <td id="diff-e758b38b8ae200c0659ec5cd9fe95f3bR166" data-line-number="166" class="blob-num blob-num-context js-linkable-line-number"></td> 
               <td class="blob-code blob-code-context"> <span class="blob-code-inner"> ==== Compression</span> </td> 
              </tr> 
              <tr> 
               <td id="diff-e758b38b8ae200c0659ec5cd9fe95f3bL165" data-line-number="165" class="blob-num blob-num-context js-linkable-line-number"></td> 
               <td id="diff-e758b38b8ae200c0659ec5cd9fe95f3bR167" data-line-number="167" class="blob-num blob-num-context js-linkable-line-number"></td> 
               <td class="blob-code blob-code-context"> <span class="blob-code-inner"> </span> </td> 
              </tr> 
              <tr> 
               <td id="diff-e758b38b8ae200c0659ec5cd9fe95f3bL166" data-line-number="166" class="blob-num blob-num-context js-linkable-line-number"></td> 
               <td id="diff-e758b38b8ae200c0659ec5cd9fe95f3bR168" data-line-number="168" class="blob-num blob-num-context js-linkable-line-number"></td> 
               <td class="blob-code blob-code-context"> <span class="blob-code-inner"> Approximate algorithms must balance memory utilization with estimation accuracy.</span> </td> 
              </tr> 
              <tr class="js-expandable-line"> 
               <td class="blob-num blob-num-expandable" colspan="2"> <a href="#diff-e758b38b8ae200c0659ec5cd9fe95f3b" class="diff-expander js-expand" title="Expand" aria-label="Expand" data-url="/elastic/elasticsearch/blob_excerpt/64b7277241ffd67a0735d0db5f00756f173aed5d?diff=unified&amp;in_wiki_context=&amp;mode=100644&amp;path=docs%2Freference%2Fsearch%2Faggregations%2Fmetrics%2Fpercentile-aggregation.asciidoc&amp;prev_line_num_left=166&amp;prev_line_num_right=168" data-left-range="167-200" data-right-range="169-200"> 
                 <svg aria-hidden="true" class="octicon octicon-unfold" height="16" version="1.1" viewbox="0 0 14 16" width="14">
                  <path fill-rule="evenodd" d="M11.5 7.5L14 10c0 .55-.45 1-1 1H9v-1h3.5l-2-2h-7l-2 2H5v1H1c-.55 0-1-.45-1-1l2.5-2.5L0 5c0-.55.45-1 1-1h4v1H1.5l2 2h7l2-2H9V4h4c.55 0 1 .45 1 1l-2.5 2.5zM6 6h2V3h2L7 0 4 3h2v3zm2 3H6v3H4l3 3 3-3H8V9z" />
                 </svg> </a> </td> 
               <td class="blob-code blob-code-expandable"></td> 
              </tr> 
             </tbody>
            </table> 
           </div> 
          </div> 
         </div> 
         <a name="diff-94134cfad429926be8c7975c0fe56ea0"></a> 
         <div id="diff-2" class="file js-file js-details-container Details
              soft-wrap
              file-type-prose
             
             
             
              show-inline-notes
           "> 
          <div class="file-header js-file-header" data-path="docs/reference/search/aggregations/metrics/percentile-rank-aggregation.asciidoc" data-short-path="94134cf" data-anchor="diff-94134cfad429926be8c7975c0fe56ea0"> 
           <div class="file-actions"> 
            <span class="show-file-notes pt-1"> <label> <input type="checkbox" checked class="js-toggle-file-notes"> Show comments </label> </span> 
            <span class="BtnGroup"> 
             <!-- '"` -->
             <!-- </textarea></xmp> -->
             <form accept-charset="UTF-8" action="/elastic/elasticsearch/diffs/2?commit=556a498bf69193dfcb8b1dd52bfc19be214fd716&amp;sha1=83abc0221bc60aa3273629a6e21aa7962d1ec411&amp;sha2=556a498bf69193dfcb8b1dd52bfc19be214fd716" class="BtnGroup-form js-prose-diff-toggle-form" method="get">
              <div style="margin:0;padding:0;display:inline">
               <input name="utf8" type="hidden" value="?">
              </div> 
              <button class="btn btn-sm BtnGroup-item tooltipped tooltipped tooltipped-n source js-source selected" aria-label="Display the source diff" type="submit" data-disable-with> 
               <svg aria-hidden="true" class="octicon octicon-code" height="16" version="1.1" viewbox="0 0 14 16" width="14">
                <path fill-rule="evenodd" d="M9.5 3L8 4.5 11.5 8 8 11.5 9.5 13 14 8 9.5 3zm-5 0L0 8l4.5 5L6 11.5 2.5 8 6 4.5 4.5 3z" />
               </svg> </button> 
             </form> 
             <!-- '"` -->
             <!-- </textarea></xmp> -->
             <form accept-charset="UTF-8" action="/elastic/elasticsearch/diffs/2?commit=556a498bf69193dfcb8b1dd52bfc19be214fd716&amp;sha1=83abc0221bc60aa3273629a6e21aa7962d1ec411&amp;sha2=556a498bf69193dfcb8b1dd52bfc19be214fd716&amp;short_path=94134cf" class="BtnGroup-form js-prose-diff-toggle-form" method="get">
              <div style="margin:0;padding:0;display:inline">
               <input name="utf8" type="hidden" value="?">
              </div> 
              <button class="btn btn-sm BtnGroup-item tooltipped tooltipped tooltipped-n rendered js-rendered" aria-label="Display the rich diff" type="submit" data-disable-with> 
               <svg aria-hidden="true" class="octicon octicon-file-text" height="16" version="1.1" viewbox="0 0 12 16" width="12">
                <path d="M6 5H2V4h4v1zM2 8h7V7H2v1zm0 2h7V9H2v1zm0 2h7v-1H2v1zm10-7.5V14c0 .55-.45 1-1 1H1c-.55 0-1-.45-1-1V2c0-.55.45-1 1-1h7.5L12 4.5zM11 5L8 2H1v12h10V5z" />
               </svg> </button> 
             </form> </span> 
            <a href="/elastic/elasticsearch/blob/556a498bf69193dfcb8b1dd52bfc19be214fd716/docs/reference/search/aggregations/metrics/percentile-rank-aggregation.asciidoc" class="btn btn-sm tooltipped tooltipped-nw" rel="nofollow" aria-label="View the whole file at version 556a498 ">View</a> 
            <button type="button" class="btn-octicon p-1 pr-2 js-details-target" aria-label="Toggle diff text" aria-expanded="true"> 
             <svg aria-hidden="true" class="octicon octicon-chevron-down Details-content--shown" height="16" version="1.1" viewbox="0 0 10 16" width="10">
              <path fill-rule="evenodd" d="M5 11L0 6l1.5-1.5L5 8.25 8.5 4.5 10 6z" />
             </svg> 
             <svg aria-hidden="true" class="octicon octicon-chevron-up Details-content--hidden" height="16" version="1.1" viewbox="0 0 10 16" width="10">
              <path fill-rule="evenodd" d="M10 10l-1.5 1.5L5 7.75 1.5 11.5 0 10l5-5z" />
             </svg> </button> 
           </div> 
           <div class="file-info"> 
            <span class="diffstat tooltipped tooltipped-e" aria-label="95 additions &amp; 0 deletions">95 <span class="block-diff-added"></span><span class="block-diff-added"></span><span class="block-diff-added"></span><span class="block-diff-added"></span><span class="block-diff-added"></span></span> 
            <a href="#diff-94134cfad429926be8c7975c0fe56ea0" class="link-gray-dark" title="docs/reference/search/aggregations/metrics/percentile-rank-aggregation.asciidoc">docs/reference/search/aggregations/metrics/percentile-rank-aggregation.asciidoc</a> 
           </div> 
          </div> 
          <div class="js-file-content Details-content--shown"> 
           <div class="data highlight blob-wrapper"> 
            <table class="diff-table tab-size  " data-tab-size="8"> 
             <colgroup> 
              <col width="40"> 
              <col width="40"> 
              <col> 
             </colgroup> 
             <tbody>
              <tr data-position="0"> 
               <td id="diff-94134cfad429926be8c7975c0fe56ea0L-1" class="blob-num blob-num-hunk non-expandable" data-line-number="..."></td> 
               <td id="diff-94134cfad429926be8c7975c0fe56ea0R0" class="blob-num blob-num-hunk non-expandable" data-line-number="..."></td> 
               <td class="blob-code blob-code-inner blob-code-hunk">@@ -0,0 +1,95 @@</td> 
              </tr> 
              <tr> 
               <td class="blob-num blob-num-addition empty-cell"></td> 
               <td id="diff-94134cfad429926be8c7975c0fe56ea0R1" data-line-number="1" class="blob-num blob-num-addition js-linkable-line-number"></td> 
               <td class="blob-code blob-code-addition"> <span class="blob-code-inner">+<span class="pl-mh">[[search-aggregations-metrics-percentile-rank-aggregation]]</span></span> </td> 
              </tr> 
              <tr> 
               <td class="blob-num blob-num-addition empty-cell"></td> 
               <td id="diff-94134cfad429926be8c7975c0fe56ea0R2" data-line-number="2" class="blob-num blob-num-addition js-linkable-line-number"></td> 
               <td class="blob-code blob-code-addition"> <span class="blob-code-inner">+<span class="pl-mh">=== <span class="pl-en">Percentile Ranks Aggregation</span></span></span> </td> 
              </tr> 
              <tr> 
               <td class="blob-num blob-num-addition empty-cell"></td> 
               <td id="diff-94134cfad429926be8c7975c0fe56ea0R3" data-line-number="3" class="blob-num blob-num-addition js-linkable-line-number"></td> 
               <td class="blob-code blob-code-addition"> <span class="blob-code-inner">+</span> </td> 
              </tr> 
              <tr> 
               <td class="blob-num blob-num-addition empty-cell"></td> 
               <td id="diff-94134cfad429926be8c7975c0fe56ea0R4" data-line-number="4" class="blob-num blob-num-addition js-linkable-line-number"></td> 
               <td class="blob-code blob-code-addition"> <span class="blob-code-inner">+coming[1.3.0]</span> </td> 
              </tr> 
              <tr> 
               <td class="blob-num blob-num-addition empty-cell"></td> 
               <td id="diff-94134cfad429926be8c7975c0fe56ea0R5" data-line-number="5" class="blob-num blob-num-addition js-linkable-line-number"></td> 
               <td class="blob-code blob-code-addition"> <span class="blob-code-inner">+</span> </td> 
              </tr> 
              <tr> 
               <td class="blob-num blob-num-addition empty-cell"></td> 
               <td id="diff-94134cfad429926be8c7975c0fe56ea0R6" data-line-number="6" class="blob-num blob-num-addition js-linkable-line-number"></td> 
               <td class="blob-code blob-code-addition"> <span class="blob-code-inner">+A `multi-value` metrics aggregation that calculates one or more percentile ranks</span> </td> 
              </tr> 
              <tr> 
               <td class="blob-num blob-num-addition empty-cell"></td> 
               <td id="diff-94134cfad429926be8c7975c0fe56ea0R7" data-line-number="7" class="blob-num blob-num-addition js-linkable-line-number"></td> 
               <td class="blob-code blob-code-addition"> <span class="blob-code-inner">+over numeric values extracted from the aggregated documents. These values</span> </td> 
              </tr> 
              <tr> 
               <td class="blob-num blob-num-addition empty-cell"></td> 
               <td id="diff-94134cfad429926be8c7975c0fe56ea0R8" data-line-number="8" class="blob-num blob-num-addition js-linkable-line-number"></td> 
               <td class="blob-code blob-code-addition"> <span class="blob-code-inner">+can be extracted either from specific numeric fields in the documents, or</span> </td> 
              </tr> 
              <tr> 
               <td class="blob-num blob-num-addition empty-cell"></td> 
               <td id="diff-94134cfad429926be8c7975c0fe56ea0R9" data-line-number="9" class="blob-num blob-num-addition js-linkable-line-number"></td> 
               <td class="blob-code blob-code-addition"> <span class="blob-code-inner">+be generated by a provided script.</span> </td> 
              </tr> 
              <tr> 
               <td class="blob-num blob-num-addition empty-cell"></td> 
               <td id="diff-94134cfad429926be8c7975c0fe56ea0R10" data-line-number="10" class="blob-num blob-num-addition js-linkable-line-number"></td> 
               <td class="blob-code blob-code-addition"> <span class="blob-code-inner">+</span> </td> 
              </tr> 
              <tr> 
               <td class="blob-num blob-num-addition empty-cell"></td> 
               <td id="diff-94134cfad429926be8c7975c0fe56ea0R11" data-line-number="11" class="blob-num blob-num-addition js-linkable-line-number"></td> 
               <td class="blob-code blob-code-addition"> <span class="blob-code-inner">+<span class="pl-mh">.Experimental!</span></span> </td> 
              </tr> 
              <tr> 
               <td class="blob-num blob-num-addition empty-cell"></td> 
               <td id="diff-94134cfad429926be8c7975c0fe56ea0R12" data-line-number="12" class="blob-num blob-num-addition js-linkable-line-number"></td> 
               <td class="blob-code blob-code-addition"> <span class="blob-code-inner">+[IMPORTANT]</span> </td> 
              </tr> 
              <tr> 
               <td class="blob-num blob-num-addition empty-cell"></td> 
               <td id="diff-94134cfad429926be8c7975c0fe56ea0R13" data-line-number="13" class="blob-num blob-num-addition js-linkable-line-number"></td> 
               <td class="blob-code blob-code-addition"> <span class="blob-code-inner">+<span class="pl-c">=====</span></span> </td> 
              </tr> 
              <tr> 
               <td class="blob-num blob-num-addition empty-cell"></td> 
               <td id="diff-94134cfad429926be8c7975c0fe56ea0R14" data-line-number="14" class="blob-num blob-num-addition js-linkable-line-number"></td> 
               <td class="blob-code blob-code-addition"> <span class="blob-code-inner">+<span class="pl-c">This feature is marked as experimental, and may be subject to change in the</span></span> </td> 
              </tr> 
              <tr> 
               <td class="blob-num blob-num-addition empty-cell"></td> 
               <td id="diff-94134cfad429926be8c7975c0fe56ea0R15" data-line-number="15" class="blob-num blob-num-addition js-linkable-line-number"></td> 
               <td class="blob-code blob-code-addition"> <span class="blob-code-inner">+<span class="pl-c">future. If you use this feature, please let us know your experience with it!</span></span> </td> 
              </tr> 
              <tr> 
               <td class="blob-num blob-num-addition empty-cell"></td> 
               <td id="diff-94134cfad429926be8c7975c0fe56ea0R16" data-line-number="16" class="blob-num blob-num-addition js-linkable-line-number"></td> 
               <td class="blob-code blob-code-addition"> <span class="blob-code-inner">+<span class="pl-c">=====</span></span> </td> 
              </tr> 
              <tr> 
               <td class="blob-num blob-num-addition empty-cell"></td> 
               <td id="diff-94134cfad429926be8c7975c0fe56ea0R17" data-line-number="17" class="blob-num blob-num-addition js-linkable-line-number"></td> 
               <td class="blob-code blob-code-addition"> <span class="blob-code-inner">+</span> </td> 
              </tr> 
              <tr> 
               <td class="blob-num blob-num-addition empty-cell"></td> 
               <td id="diff-94134cfad429926be8c7975c0fe56ea0R18" data-line-number="18" class="blob-num blob-num-addition js-linkable-line-number"></td> 
               <td class="blob-code blob-code-addition"> <span class="blob-code-inner">+[NOTE]</span> </td> 
              </tr> 
              <tr> 
               <td class="blob-num blob-num-addition empty-cell"></td> 
               <td id="diff-94134cfad429926be8c7975c0fe56ea0R19" data-line-number="19" class="blob-num blob-num-addition js-linkable-line-number"></td> 
               <td class="blob-code blob-code-addition"> <span class="blob-code-inner">+<span class="pl-c">==================================================</span></span> </td> 
              </tr> 
              <tr> 
               <td class="blob-num blob-num-addition empty-cell"></td> 
               <td id="diff-94134cfad429926be8c7975c0fe56ea0R20" data-line-number="20" class="blob-num blob-num-addition js-linkable-line-number"></td> 
               <td class="blob-code blob-code-addition"> <span class="blob-code-inner">+<span class="pl-c">Please see &lt;&lt;search-aggregations-metrics-percentile-aggregation-approximation&gt;&gt; </span></span> </td> 
              </tr> 
              <tr> 
               <td class="blob-num blob-num-addition empty-cell"></td> 
               <td id="diff-94134cfad429926be8c7975c0fe56ea0R21" data-line-number="21" class="blob-num blob-num-addition js-linkable-line-number"></td> 
               <td class="blob-code blob-code-addition"> <span class="blob-code-inner">+<span class="pl-c">and &lt;&lt;search-aggregations-metrics-percentile-aggregation-compression&gt;&gt; for advice </span></span> </td> 
              </tr> 
              <tr> 
               <td class="blob-num blob-num-addition empty-cell"></td> 
               <td id="diff-94134cfad429926be8c7975c0fe56ea0R22" data-line-number="22" class="blob-num blob-num-addition js-linkable-line-number"></td> 
               <td class="blob-code blob-code-addition"> <span class="blob-code-inner">+<span class="pl-c">regarding approximation and memory use of the percentile ranks aggregation</span></span> </td> 
              </tr> 
              <tr> 
               <td class="blob-num blob-num-addition empty-cell"></td> 
               <td id="diff-94134cfad429926be8c7975c0fe56ea0R23" data-line-number="23" class="blob-num blob-num-addition js-linkable-line-number"></td> 
               <td class="blob-code blob-code-addition"> <span class="blob-code-inner">+<span class="pl-c">==================================================</span></span> </td> 
              </tr> 
              <tr> 
               <td class="blob-num blob-num-addition empty-cell"></td> 
               <td id="diff-94134cfad429926be8c7975c0fe56ea0R24" data-line-number="24" class="blob-num blob-num-addition js-linkable-line-number"></td> 
               <td class="blob-code blob-code-addition"> <span class="blob-code-inner">+</span> </td> 
              </tr> 
              <tr> 
               <td class="blob-num blob-num-addition empty-cell"></td> 
               <td id="diff-94134cfad429926be8c7975c0fe56ea0R25" data-line-number="25" class="blob-num blob-num-addition js-linkable-line-number"></td> 
               <td class="blob-code blob-code-addition"> <span class="blob-code-inner">+Percentile rank show the percentage of observed values which are below certain </span> </td> 
              </tr> 
              <tr> 
               <td class="blob-num blob-num-addition empty-cell"></td> 
               <td id="diff-94134cfad429926be8c7975c0fe56ea0R26" data-line-number="26" class="blob-num blob-num-addition js-linkable-line-number"></td> 
               <td class="blob-code blob-code-addition"> <span class="blob-code-inner">+value. For example, if a value is greater than or equal to 95% of the observed values</span> </td> 
              </tr> 
              <tr> 
               <td class="blob-num blob-num-addition empty-cell"></td> 
               <td id="diff-94134cfad429926be8c7975c0fe56ea0R27" data-line-number="27" class="blob-num blob-num-addition js-linkable-line-number"></td> 
               <td class="blob-code blob-code-addition"> <span class="blob-code-inner">+it is said to be at the 95th percentile rank.</span> </td> 
              </tr> 
              <tr> 
               <td class="blob-num blob-num-addition empty-cell"></td> 
               <td id="diff-94134cfad429926be8c7975c0fe56ea0R28" data-line-number="28" class="blob-num blob-num-addition js-linkable-line-number"></td> 
               <td class="blob-code blob-code-addition"> <span class="blob-code-inner">+</span> </td> 
              </tr> 
              <tr> 
               <td class="blob-num blob-num-addition empty-cell"></td> 
               <td id="diff-94134cfad429926be8c7975c0fe56ea0R29" data-line-number="29" class="blob-num blob-num-addition js-linkable-line-number"></td> 
               <td class="blob-code blob-code-addition"> <span class="blob-code-inner">+Assume your data consists of website load times. You may have a service agreement that </span> </td> 
              </tr> 
              <tr> 
               <td class="blob-num blob-num-addition empty-cell"></td> 
               <td id="diff-94134cfad429926be8c7975c0fe56ea0R30" data-line-number="30" class="blob-num blob-num-addition js-linkable-line-number"></td> 
               <td class="blob-code blob-code-addition"> <span class="blob-code-inner">+95% of page loads completely within 15ms and 99% of page loads complete within 30ms.</span> </td> 
              </tr> 
              <tr> 
               <td class="blob-num blob-num-addition empty-cell"></td> 
               <td id="diff-94134cfad429926be8c7975c0fe56ea0R31" data-line-number="31" class="blob-num blob-num-addition js-linkable-line-number"></td> 
               <td class="blob-code blob-code-addition"> <span class="blob-code-inner">+</span> </td> 
              </tr> 
              <tr> 
               <td class="blob-num blob-num-addition empty-cell"></td> 
               <td id="diff-94134cfad429926be8c7975c0fe56ea0R32" data-line-number="32" class="blob-num blob-num-addition js-linkable-line-number"></td> 
               <td class="blob-code blob-code-addition"> <span class="blob-code-inner">+Let's look at a range of percentiles representing load time:</span> </td> 
              </tr> 
              <tr> 
               <td class="blob-num blob-num-addition empty-cell"></td> 
               <td id="diff-94134cfad429926be8c7975c0fe56ea0R33" data-line-number="33" class="blob-num blob-num-addition js-linkable-line-number"></td> 
               <td class="blob-code blob-code-addition"> <span class="blob-code-inner">+</span> </td> 
              </tr> 
              <tr> 
               <td class="blob-num blob-num-addition empty-cell"></td> 
               <td id="diff-94134cfad429926be8c7975c0fe56ea0R34" data-line-number="34" class="blob-num blob-num-addition js-linkable-line-number"></td> 
               <td class="blob-code blob-code-addition"> <span class="blob-code-inner">+[source,js]</span> </td> 
              </tr> 
              <tr> 
               <td class="blob-num blob-num-addition empty-cell"></td> 
               <td id="diff-94134cfad429926be8c7975c0fe56ea0R35" data-line-number="35" class="blob-num blob-num-addition js-linkable-line-number"></td> 
               <td class="blob-code blob-code-addition"> <span class="blob-code-inner">+<span class="pl-c">--------------------------------------------------</span></span> </td> 
              </tr> 
              <tr> 
               <td class="blob-num blob-num-addition empty-cell"></td> 
               <td id="diff-94134cfad429926be8c7975c0fe56ea0R36" data-line-number="36" class="blob-num blob-num-addition js-linkable-line-number"></td> 
               <td class="blob-code blob-code-addition"> <span class="blob-code-inner">+<span class="pl-c">{</span></span> </td> 
              </tr> 
              <tr> 
               <td class="blob-num blob-num-addition empty-cell"></td> 
               <td id="diff-94134cfad429926be8c7975c0fe56ea0R37" data-line-number="37" class="blob-num blob-num-addition js-linkable-line-number"></td> 
               <td class="blob-code blob-code-addition"> <span class="blob-code-inner">+<span class="pl-c"> "aggs" : {</span></span> </td> 
              </tr> 
              <tr> 
               <td class="blob-num blob-num-addition empty-cell"></td> 
               <td id="diff-94134cfad429926be8c7975c0fe56ea0R38" data-line-number="38" class="blob-num blob-num-addition js-linkable-line-number"></td> 
               <td class="blob-code blob-code-addition"> <span class="blob-code-inner">+<span class="pl-c"> "load_time_outlier" : {</span></span> </td> 
              </tr> 
              <tr> 
               <td class="blob-num blob-num-addition empty-cell"></td> 
               <td id="diff-94134cfad429926be8c7975c0fe56ea0R39" data-line-number="39" class="blob-num blob-num-addition js-linkable-line-number"></td> 
               <td class="blob-code blob-code-addition"> <span class="blob-code-inner">+<span class="pl-c"> "percentile_ranks" : {</span></span> </td> 
              </tr> 
              <tr> 
               <td class="blob-num blob-num-addition empty-cell"></td> 
               <td id="diff-94134cfad429926be8c7975c0fe56ea0R40" data-line-number="40" class="blob-num blob-num-addition js-linkable-line-number"></td> 
               <td class="blob-code blob-code-addition"> <span class="blob-code-inner">+<span class="pl-c"> "field" : "load_time" &lt;1&gt;</span></span> </td> 
              </tr> 
              <tr> 
               <td class="blob-num blob-num-addition empty-cell"></td> 
               <td id="diff-94134cfad429926be8c7975c0fe56ea0R41" data-line-number="41" class="blob-num blob-num-addition js-linkable-line-number"></td> 
               <td class="blob-code blob-code-addition"> <span class="blob-code-inner">+<span class="pl-c"> "values" : [15, 30]</span></span> </td> 
              </tr> 
              <tr> 
               <td class="blob-num blob-num-addition empty-cell"></td> 
               <td id="diff-94134cfad429926be8c7975c0fe56ea0R42" data-line-number="42" class="blob-num blob-num-addition js-linkable-line-number"></td> 
               <td class="blob-code blob-code-addition"> <span class="blob-code-inner">+<span class="pl-c"> }</span></span> </td> 
              </tr> 
              <tr> 
               <td class="blob-num blob-num-addition empty-cell"></td> 
               <td id="diff-94134cfad429926be8c7975c0fe56ea0R43" data-line-number="43" class="blob-num blob-num-addition js-linkable-line-number"></td> 
               <td class="blob-code blob-code-addition"> <span class="blob-code-inner">+<span class="pl-c"> }</span></span> </td> 
              </tr> 
              <tr> 
               <td class="blob-num blob-num-addition empty-cell"></td> 
               <td id="diff-94134cfad429926be8c7975c0fe56ea0R44" data-line-number="44" class="blob-num blob-num-addition js-linkable-line-number"></td> 
               <td class="blob-code blob-code-addition"> <span class="blob-code-inner">+<span class="pl-c"> }</span></span> </td> 
              </tr> 
              <tr> 
               <td class="blob-num blob-num-addition empty-cell"></td> 
               <td id="diff-94134cfad429926be8c7975c0fe56ea0R45" data-line-number="45" class="blob-num blob-num-addition js-linkable-line-number"></td> 
               <td class="blob-code blob-code-addition"> <span class="blob-code-inner">+<span class="pl-c">}</span></span> </td> 
              </tr> 
              <tr> 
               <td class="blob-num blob-num-addition empty-cell"></td> 
               <td id="diff-94134cfad429926be8c7975c0fe56ea0R46" data-line-number="46" class="blob-num blob-num-addition js-linkable-line-number"></td> 
               <td class="blob-code blob-code-addition"> <span class="blob-code-inner">+<span class="pl-c">--------------------------------------------------</span></span> </td> 
              </tr> 
              <tr> 
               <td class="blob-num blob-num-addition empty-cell"></td> 
               <td id="diff-94134cfad429926be8c7975c0fe56ea0R47" data-line-number="47" class="blob-num blob-num-addition js-linkable-line-number"></td> 
               <td class="blob-code blob-code-addition"> <span class="blob-code-inner">+&lt;1&gt; The field `load_time` must be a numeric field</span> </td> 
              </tr> 
              <tr> 
               <td class="blob-num blob-num-addition empty-cell"></td> 
               <td id="diff-94134cfad429926be8c7975c0fe56ea0R48" data-line-number="48" class="blob-num blob-num-addition js-linkable-line-number"></td> 
               <td class="blob-code blob-code-addition"> <span class="blob-code-inner">+</span> </td> 
              </tr> 
              <tr> 
               <td class="blob-num blob-num-addition empty-cell"></td> 
               <td id="diff-94134cfad429926be8c7975c0fe56ea0R49" data-line-number="49" class="blob-num blob-num-addition js-linkable-line-number"></td> 
               <td class="blob-code blob-code-addition"> <span class="blob-code-inner">+The response will look like this:</span> </td> 
              </tr> 
              <tr> 
               <td class="blob-num blob-num-addition empty-cell"></td> 
               <td id="diff-94134cfad429926be8c7975c0fe56ea0R50" data-line-number="50" class="blob-num blob-num-addition js-linkable-line-number"></td> 
               <td class="blob-code blob-code-addition"> <span class="blob-code-inner">+</span> </td> 
              </tr> 
              <tr> 
               <td class="blob-num blob-num-addition empty-cell"></td> 
               <td id="diff-94134cfad429926be8c7975c0fe56ea0R51" data-line-number="51" class="blob-num blob-num-addition js-linkable-line-number"></td> 
               <td class="blob-code blob-code-addition"> <span class="blob-code-inner">+[source,js]</span> </td> 
              </tr> 
              <tr> 
               <td class="blob-num blob-num-addition empty-cell"></td> 
               <td id="diff-94134cfad429926be8c7975c0fe56ea0R52" data-line-number="52" class="blob-num blob-num-addition js-linkable-line-number"></td> 
               <td class="blob-code blob-code-addition"> <span class="blob-code-inner">+<span class="pl-c">--------------------------------------------------</span></span> </td> 
              </tr> 
              <tr> 
               <td class="blob-num blob-num-addition empty-cell"></td> 
               <td id="diff-94134cfad429926be8c7975c0fe56ea0R53" data-line-number="53" class="blob-num blob-num-addition js-linkable-line-number"></td> 
               <td class="blob-code blob-code-addition"> <span class="blob-code-inner">+<span class="pl-c">{</span></span> </td> 
              </tr> 
              <tr> 
               <td class="blob-num blob-num-addition empty-cell"></td> 
               <td id="diff-94134cfad429926be8c7975c0fe56ea0R54" data-line-number="54" class="blob-num blob-num-addition js-linkable-line-number"></td> 
               <td class="blob-code blob-code-addition"> <span class="blob-code-inner">+<span class="pl-c"> ...</span></span> </td> 
              </tr> 
              <tr> 
               <td class="blob-num blob-num-addition empty-cell"></td> 
               <td id="diff-94134cfad429926be8c7975c0fe56ea0R55" data-line-number="55" class="blob-num blob-num-addition js-linkable-line-number"></td> 
               <td class="blob-code blob-code-addition"> <span class="blob-code-inner">+<span class="pl-c"></span></span> </td> 
              </tr> 
              <tr> 
               <td class="blob-num blob-num-addition empty-cell"></td> 
               <td id="diff-94134cfad429926be8c7975c0fe56ea0R56" data-line-number="56" class="blob-num blob-num-addition js-linkable-line-number"></td> 
               <td class="blob-code blob-code-addition"> <span class="blob-code-inner">+<span class="pl-c"> "aggregations": {</span></span> </td> 
              </tr> 
              <tr> 
               <td class="blob-num blob-num-addition empty-cell"></td> 
               <td id="diff-94134cfad429926be8c7975c0fe56ea0R57" data-line-number="57" class="blob-num blob-num-addition js-linkable-line-number"></td> 
               <td class="blob-code blob-code-addition"> <span class="blob-code-inner">+<span class="pl-c"> "load_time_outlier": {</span></span> </td> 
              </tr> 
              <tr> 
               <td class="blob-num blob-num-addition empty-cell"></td> 
               <td id="diff-94134cfad429926be8c7975c0fe56ea0R58" data-line-number="58" class="blob-num blob-num-addition js-linkable-line-number"></td> 
               <td class="blob-code blob-code-addition"> <span class="blob-code-inner">+<span class="pl-c"> "values" : {</span></span> </td> 
              </tr> 
              <tr> 
               <td class="blob-num blob-num-addition empty-cell"></td> 
               <td id="diff-94134cfad429926be8c7975c0fe56ea0R59" data-line-number="59" class="blob-num blob-num-addition js-linkable-line-number"></td> 
               <td class="blob-code blob-code-addition"> <span class="blob-code-inner">+<span class="pl-c"> "15": 92,</span></span> </td> 
              </tr> 
              <tr> 
               <td class="blob-num blob-num-addition empty-cell"></td> 
               <td id="diff-94134cfad429926be8c7975c0fe56ea0R60" data-line-number="60" class="blob-num blob-num-addition js-linkable-line-number"></td> 
               <td class="blob-code blob-code-addition"> <span class="blob-code-inner">+<span class="pl-c"> "30": 100</span></span> </td> 
              </tr> 
              <tr> 
               <td class="blob-num blob-num-addition empty-cell"></td> 
               <td id="diff-94134cfad429926be8c7975c0fe56ea0R61" data-line-number="61" class="blob-num blob-num-addition js-linkable-line-number"></td> 
               <td class="blob-code blob-code-addition"> <span class="blob-code-inner">+<span class="pl-c"> }</span></span> </td> 
              </tr> 
              <tr> 
               <td class="blob-num blob-num-addition empty-cell"></td> 
               <td id="diff-94134cfad429926be8c7975c0fe56ea0R62" data-line-number="62" class="blob-num blob-num-addition js-linkable-line-number"></td> 
               <td class="blob-code blob-code-addition"> <span class="blob-code-inner">+<span class="pl-c"> }</span></span> </td> 
              </tr> 
              <tr> 
               <td class="blob-num blob-num-addition empty-cell"></td> 
               <td id="diff-94134cfad429926be8c7975c0fe56ea0R63" data-line-number="63" class="blob-num blob-num-addition js-linkable-line-number"></td> 
               <td class="blob-code blob-code-addition"> <span class="blob-code-inner">+<span class="pl-c"> }</span></span> </td> 
              </tr> 
              <tr> 
               <td class="blob-num blob-num-addition empty-cell"></td> 
               <td id="diff-94134cfad429926be8c7975c0fe56ea0R64" data-line-number="64" class="blob-num blob-num-addition js-linkable-line-number"></td> 
               <td class="blob-code blob-code-addition"> <span class="blob-code-inner">+<span class="pl-c">}</span></span> </td> 
              </tr> 
              <tr> 
               <td class="blob-num blob-num-addition empty-cell"></td> 
               <td id="diff-94134cfad429926be8c7975c0fe56ea0R65" data-line-number="65" class="blob-num blob-num-addition js-linkable-line-number"></td> 
               <td class="blob-code blob-code-addition"> <span class="blob-code-inner">+<span class="pl-c">--------------------------------------------------</span></span> </td> 
              </tr> 
              <tr> 
               <td class="blob-num blob-num-addition empty-cell"></td> 
               <td id="diff-94134cfad429926be8c7975c0fe56ea0R66" data-line-number="66" class="blob-num blob-num-addition js-linkable-line-number"></td> 
               <td class="blob-code blob-code-addition"> <span class="blob-code-inner">+</span> </td> 
              </tr> 
              <tr> 
               <td class="blob-num blob-num-addition empty-cell"></td> 
               <td id="diff-94134cfad429926be8c7975c0fe56ea0R67" data-line-number="67" class="blob-num blob-num-addition js-linkable-line-number"></td> 
               <td class="blob-code blob-code-addition"> <span class="blob-code-inner">+From this information you can determine you are hitting the 99% load time target but not quite </span> </td> 
              </tr> 
              <tr> 
               <td class="blob-num blob-num-addition empty-cell"></td> 
               <td id="diff-94134cfad429926be8c7975c0fe56ea0R68" data-line-number="68" class="blob-num blob-num-addition js-linkable-line-number"></td> 
               <td class="blob-code blob-code-addition"> <span class="blob-code-inner">+hitting the 95% load time target</span> </td> 
              </tr> 
              <tr> 
               <td class="blob-num blob-num-addition empty-cell"></td> 
               <td id="diff-94134cfad429926be8c7975c0fe56ea0R69" data-line-number="69" class="blob-num blob-num-addition js-linkable-line-number"></td> 
               <td class="blob-code blob-code-addition"> <span class="blob-code-inner">+</span> </td> 
              </tr> 
              <tr> 
               <td class="blob-num blob-num-addition empty-cell"></td> 
               <td id="diff-94134cfad429926be8c7975c0fe56ea0R70" data-line-number="70" class="blob-num blob-num-addition js-linkable-line-number"></td> 
               <td class="blob-code blob-code-addition"> <span class="blob-code-inner">+</span> </td> 
              </tr> 
              <tr> 
               <td class="blob-num blob-num-addition empty-cell"></td> 
               <td id="diff-94134cfad429926be8c7975c0fe56ea0R71" data-line-number="71" class="blob-num blob-num-addition js-linkable-line-number"></td> 
               <td class="blob-code blob-code-addition"> <span class="blob-code-inner">+==== Script</span> </td> 
              </tr> 
              <tr> 
               <td class="blob-num blob-num-addition empty-cell"></td> 
               <td id="diff-94134cfad429926be8c7975c0fe56ea0R72" data-line-number="72" class="blob-num blob-num-addition js-linkable-line-number"></td> 
               <td class="blob-code blob-code-addition"> <span class="blob-code-inner">+</span> </td> 
              </tr> 
              <tr> 
               <td class="blob-num blob-num-addition empty-cell"></td> 
               <td id="diff-94134cfad429926be8c7975c0fe56ea0R73" data-line-number="73" class="blob-num blob-num-addition js-linkable-line-number"></td> 
               <td class="blob-code blob-code-addition"> <span class="blob-code-inner">+The percentile rank metric supports scripting. For example, if our load times</span> </td> 
              </tr> 
              <tr> 
               <td class="blob-num blob-num-addition empty-cell"></td> 
               <td id="diff-94134cfad429926be8c7975c0fe56ea0R74" data-line-number="74" class="blob-num blob-num-addition js-linkable-line-number"></td> 
               <td class="blob-code blob-code-addition"> <span class="blob-code-inner">+are in milliseconds but we want to specify values in seconds, we could use</span> </td> 
              </tr> 
              <tr> 
               <td class="blob-num blob-num-addition empty-cell"></td> 
               <td id="diff-94134cfad429926be8c7975c0fe56ea0R75" data-line-number="75" class="blob-num blob-num-addition js-linkable-line-number"></td> 
               <td class="blob-code blob-code-addition"> <span class="blob-code-inner">+a script to convert them on-the-fly:</span> </td> 
              </tr> 
              <tr> 
               <td class="blob-num blob-num-addition empty-cell"></td> 
               <td id="diff-94134cfad429926be8c7975c0fe56ea0R76" data-line-number="76" class="blob-num blob-num-addition js-linkable-line-number"></td> 
               <td class="blob-code blob-code-addition"> <span class="blob-code-inner">+</span> </td> 
              </tr> 
              <tr> 
               <td class="blob-num blob-num-addition empty-cell"></td> 
               <td id="diff-94134cfad429926be8c7975c0fe56ea0R77" data-line-number="77" class="blob-num blob-num-addition js-linkable-line-number"></td> 
               <td class="blob-code blob-code-addition"> <span class="blob-code-inner">+[source,js]</span> </td> 
              </tr> 
              <tr> 
               <td class="blob-num blob-num-addition empty-cell"></td> 
               <td id="diff-94134cfad429926be8c7975c0fe56ea0R78" data-line-number="78" class="blob-num blob-num-addition js-linkable-line-number"></td> 
               <td class="blob-code blob-code-addition"> <span class="blob-code-inner">+<span class="pl-c">--------------------------------------------------</span></span> </td> 
              </tr> 
              <tr> 
               <td class="blob-num blob-num-addition empty-cell"></td> 
               <td id="diff-94134cfad429926be8c7975c0fe56ea0R79" data-line-number="79" class="blob-num blob-num-addition js-linkable-line-number"></td> 
               <td class="blob-code blob-code-addition"> <span class="blob-code-inner">+<span class="pl-c">{</span></span> </td> 
              </tr> 
              <tr> 
               <td class="blob-num blob-num-addition empty-cell"></td> 
               <td id="diff-94134cfad429926be8c7975c0fe56ea0R80" data-line-number="80" class="blob-num blob-num-addition js-linkable-line-number"></td> 
               <td class="blob-code blob-code-addition"> <span class="blob-code-inner">+<span class="pl-c"> "aggs" : {</span></span> </td> 
              </tr> 
              <tr> 
               <td class="blob-num blob-num-addition empty-cell"></td> 
               <td id="diff-94134cfad429926be8c7975c0fe56ea0R81" data-line-number="81" class="blob-num blob-num-addition js-linkable-line-number"></td> 
               <td class="blob-code blob-code-addition"> <span class="blob-code-inner">+<span class="pl-c"> "load_time_outlier" : {</span></span> </td> 
              </tr> 
              <tr> 
               <td class="blob-num blob-num-addition empty-cell"></td> 
               <td id="diff-94134cfad429926be8c7975c0fe56ea0R82" data-line-number="82" class="blob-num blob-num-addition js-linkable-line-number"></td> 
               <td class="blob-code blob-code-addition"> <span class="blob-code-inner">+<span class="pl-c"> "percentile_ranks" : {</span></span> </td> 
              </tr> 
              <tr> 
               <td class="blob-num blob-num-addition empty-cell"></td> 
               <td id="diff-94134cfad429926be8c7975c0fe56ea0R83" data-line-number="83" class="blob-num blob-num-addition js-linkable-line-number"></td> 
               <td class="blob-code blob-code-addition"> <span class="blob-code-inner">+<span class="pl-c"> "values" : [3, 5],</span></span> </td> 
              </tr> 
              <tr> 
               <td class="blob-num blob-num-addition empty-cell"></td> 
               <td id="diff-94134cfad429926be8c7975c0fe56ea0R84" data-line-number="84" class="blob-num blob-num-addition js-linkable-line-number"></td> 
               <td class="blob-code blob-code-addition"> <span class="blob-code-inner">+<span class="pl-c"> "script" : "doc['load_time'].value / timeUnit", &lt;1&gt;</span></span> </td> 
              </tr> 
              <tr> 
               <td class="blob-num blob-num-addition empty-cell"></td> 
               <td id="diff-94134cfad429926be8c7975c0fe56ea0R85" data-line-number="85" class="blob-num blob-num-addition js-linkable-line-number"></td> 
               <td class="blob-code blob-code-addition"> <span class="blob-code-inner">+<span class="pl-c"> "params" : {</span></span> </td> 
              </tr> 
              <tr> 
               <td class="blob-num blob-num-addition empty-cell"></td> 
               <td id="diff-94134cfad429926be8c7975c0fe56ea0R86" data-line-number="86" class="blob-num blob-num-addition js-linkable-line-number"></td> 
               <td class="blob-code blob-code-addition"> <span class="blob-code-inner">+<span class="pl-c"> "timeUnit" : 1000 &lt;2&gt;</span></span> </td> 
              </tr> 
              <tr> 
               <td class="blob-num blob-num-addition empty-cell"></td> 
               <td id="diff-94134cfad429926be8c7975c0fe56ea0R87" data-line-number="87" class="blob-num blob-num-addition js-linkable-line-number"></td> 
               <td class="blob-code blob-code-addition"> <span class="blob-code-inner">+<span class="pl-c"> }</span></span> </td> 
              </tr> 
              <tr> 
               <td class="blob-num blob-num-addition empty-cell"></td> 
               <td id="diff-94134cfad429926be8c7975c0fe56ea0R88" data-line-number="88" class="blob-num blob-num-addition js-linkable-line-number"></td> 
               <td class="blob-code blob-code-addition"> <span class="blob-code-inner">+<span class="pl-c"> }</span></span> </td> 
              </tr> 
              <tr> 
               <td class="blob-num blob-num-addition empty-cell"></td> 
               <td id="diff-94134cfad429926be8c7975c0fe56ea0R89" data-line-number="89" class="blob-num blob-num-addition js-linkable-line-number"></td> 
               <td class="blob-code blob-code-addition"> <span class="blob-code-inner">+<span class="pl-c"> }</span></span> </td> 
              </tr> 
              <tr> 
               <td class="blob-num blob-num-addition empty-cell"></td> 
               <td id="diff-94134cfad429926be8c7975c0fe56ea0R90" data-line-number="90" class="blob-num blob-num-addition js-linkable-line-number"></td> 
               <td class="blob-code blob-code-addition"> <span class="blob-code-inner">+<span class="pl-c"> }</span></span> </td> 
              </tr> 
              <tr> 
               <td class="blob-num blob-num-addition empty-cell"></td> 
               <td id="diff-94134cfad429926be8c7975c0fe56ea0R91" data-line-number="91" class="blob-num blob-num-addition js-linkable-line-number"></td> 
               <td class="blob-code blob-code-addition"> <span class="blob-code-inner">+<span class="pl-c">}</span></span> </td> 
              </tr> 
              <tr> 
               <td class="blob-num blob-num-addition empty-cell"></td> 
               <td id="diff-94134cfad429926be8c7975c0fe56ea0R92" data-line-number="92" class="blob-num blob-num-addition js-linkable-line-number"></td> 
               <td class="blob-code blob-code-addition"> <span class="blob-code-inner">+<span class="pl-c">--------------------------------------------------</span></span> </td> 
              </tr> 
              <tr> 
               <td class="blob-num blob-num-addition empty-cell"></td> 
               <td id="diff-94134cfad429926be8c7975c0fe56ea0R93" data-line-number="93" class="blob-num blob-num-addition js-linkable-line-number"></td> 
               <td class="blob-code blob-code-addition"> <span class="blob-code-inner">+&lt;1&gt; The `field` parameter is replaced with a `script` parameter, which uses the</span> </td> 
              </tr> 
              <tr> 
               <td class="blob-num blob-num-addition empty-cell"></td> 
               <td id="diff-94134cfad429926be8c7975c0fe56ea0R94" data-line-number="94" class="blob-num blob-num-addition js-linkable-line-number"></td> 
               <td class="blob-code blob-code-addition"> <span class="blob-code-inner">+script to generate values which percentile ranks are calculated on</span> </td> 
              </tr> 
              <tr> 
               <td class="blob-num blob-num-addition empty-cell"></td> 
               <td id="diff-94134cfad429926be8c7975c0fe56ea0R95" data-line-number="95" class="blob-num blob-num-addition js-linkable-line-number"></td> 
               <td class="blob-code blob-code-addition"> <span class="blob-code-inner">+&lt;2&gt; Scripting supports parameterized input just like any other script</span> </td> 
              </tr> 
             </tbody>
            </table> 
           </div> 
          </div> 
         </div> 
         <a name="diff-d3b5613c2d3549daff99db56ec04099a"></a> 
         <div id="diff-3" class="file js-file js-details-container Details
             
             
             
             
             
              show-inline-notes
           "> 
          <div class="file-header js-file-header" data-path="src/main/java/org/elasticsearch/search/aggregations/AggregationBuilders.java" data-short-path="d3b5613" data-anchor="diff-d3b5613c2d3549daff99db56ec04099a"> 
           <div class="file-actions"> 
            <span class="show-file-notes pt-1"> <label> <input type="checkbox" checked class="js-toggle-file-notes"> Show comments </label> </span> 
            <a href="/elastic/elasticsearch/blob/556a498bf69193dfcb8b1dd52bfc19be214fd716/src/main/java/org/elasticsearch/search/aggregations/AggregationBuilders.java" class="btn btn-sm tooltipped tooltipped-nw" rel="nofollow" aria-label="View the whole file at version 556a498 ">View</a> 
            <button type="button" class="btn-octicon p-1 pr-2 js-details-target" aria-label="Toggle diff text" aria-expanded="true"> 
             <svg aria-hidden="true" class="octicon octicon-chevron-down Details-content--shown" height="16" version="1.1" viewbox="0 0 10 16" width="10">
              <path fill-rule="evenodd" d="M5 11L0 6l1.5-1.5L5 8.25 8.5 4.5 10 6z" />
             </svg> 
             <svg aria-hidden="true" class="octicon octicon-chevron-up Details-content--hidden" height="16" version="1.1" viewbox="0 0 10 16" width="10">
              <path fill-rule="evenodd" d="M10 10l-1.5 1.5L5 7.75 1.5 11.5 0 10l5-5z" />
             </svg> </button> 
           </div> 
           <div class="file-info"> 
            <span class="diffstat tooltipped tooltipped-e" aria-label="5 additions &amp; 0 deletions">5 <span class="block-diff-added"></span><span class="block-diff-added"></span><span class="block-diff-added"></span><span class="block-diff-added"></span><span class="block-diff-added"></span></span> 
            <a href="#diff-d3b5613c2d3549daff99db56ec04099a" class="link-gray-dark" title="src/main/java/org/elasticsearch/search/aggregations/AggregationBuilders.java">src/main/java/org/elasticsearch/search/aggregations/AggregationBuilders.java</a> 
           </div> 
          </div> 
          <div class="js-file-content Details-content--shown"> 
           <div class="data highlight blob-wrapper"> 
            <table class="diff-table tab-size  " data-tab-size="8"> 
             <tbody>
              <tr class="js-expandable-line" data-position="0"> 
               <td class="blob-num blob-num-expandable" colspan="2"> <a href="#diff-d3b5613c2d3549daff99db56ec04099a" class="diff-expander js-expand" title="Expand" aria-label="Expand" data-url="/elastic/elasticsearch/blob_excerpt/6449ddbe0d219a8353614fef49f85037aeedbce2?diff=unified&amp;in_wiki_context=&amp;left_hunk_size=6&amp;mode=100644&amp;next_line_num_left=39&amp;next_line_num_right=39&amp;path=src%2Fmain%2Fjava%2Forg%2Felasticsearch%2Fsearch%2Faggregations%2FAggregationBuilders.java&amp;prev_line_num_left=&amp;prev_line_num_right=&amp;right_hunk_size=7" data-left-range="1-38" data-right-range="1-38"> 
                 <svg aria-hidden="true" class="octicon octicon-unfold" height="16" version="1.1" viewbox="0 0 14 16" width="14">
                  <path fill-rule="evenodd" d="M11.5 7.5L14 10c0 .55-.45 1-1 1H9v-1h3.5l-2-2h-7l-2 2H5v1H1c-.55 0-1-.45-1-1l2.5-2.5L0 5c0-.55.45-1 1-1h4v1H1.5l2 2h7l2-2H9V4h4c.55 0 1 .45 1 1l-2.5 2.5zM6 6h2V3h2L7 0 4 3h2v3zm2 3H6v3H4l3 3 3-3H8V9z" />
                 </svg> </a> </td> 
               <td class="blob-code blob-code-inner blob-code-hunk">@@ -39,6 +39,7 @@</td> 
              </tr> 
              <tr> 
               <td id="diff-d3b5613c2d3549daff99db56ec04099aL39" data-line-number="39" class="blob-num blob-num-context js-linkable-line-number"></td> 
               <td id="diff-d3b5613c2d3549daff99db56ec04099aR39" data-line-number="39" class="blob-num blob-num-context js-linkable-line-number"></td> 
               <td class="blob-code blob-code-context"> <span class="blob-code-inner"> <span class="pl-k">import</span> <span class="pl-smi">org.elasticsearch.search.aggregations.metrics.max.MaxBuilder</span>;</span> </td> 
              </tr> 
              <tr> 
               <td id="diff-d3b5613c2d3549daff99db56ec04099aL40" data-line-number="40" class="blob-num blob-num-context js-linkable-line-number"></td> 
               <td id="diff-d3b5613c2d3549daff99db56ec04099aR40" data-line-number="40" class="blob-num blob-num-context js-linkable-line-number"></td> 
               <td class="blob-code blob-code-context"> <span class="blob-code-inner"> <span class="pl-k">import</span> <span class="pl-smi">org.elasticsearch.search.aggregations.metrics.min.MinBuilder</span>;</span> </td> 
              </tr> 
              <tr> 
               <td id="diff-d3b5613c2d3549daff99db56ec04099aL41" data-line-number="41" class="blob-num blob-num-context js-linkable-line-number"></td> 
               <td id="diff-d3b5613c2d3549daff99db56ec04099aR41" data-line-number="41" class="blob-num blob-num-context js-linkable-line-number"></td> 
               <td class="blob-code blob-code-context"> <span class="blob-code-inner"> <span class="pl-k">import</span> <span class="pl-smi">org.elasticsearch.search.aggregations.metrics.percentiles.PercentilesBuilder</span>;</span> </td> 
              </tr> 
              <tr> 
               <td class="blob-num blob-num-addition empty-cell"></td> 
               <td id="diff-d3b5613c2d3549daff99db56ec04099aR42" data-line-number="42" class="blob-num blob-num-addition js-linkable-line-number"></td> 
               <td class="blob-code blob-code-addition"> <span class="blob-code-inner">+<span class="pl-k">import</span> <span class="pl-smi">org.elasticsearch.search.aggregations.metrics.percentiles.PercentileRanksBuilder</span>;</span> </td> 
              </tr> 
              <tr> 
               <td id="diff-d3b5613c2d3549daff99db56ec04099aL42" data-line-number="42" class="blob-num blob-num-context js-linkable-line-number"></td> 
               <td id="diff-d3b5613c2d3549daff99db56ec04099aR43" data-line-number="43" class="blob-num blob-num-context js-linkable-line-number"></td> 
               <td class="blob-code blob-code-context"> <span class="blob-code-inner"> <span class="pl-k">import</span> <span class="pl-smi">org.elasticsearch.search.aggregations.metrics.stats.StatsBuilder</span>;</span> </td> 
              </tr> 
              <tr> 
               <td id="diff-d3b5613c2d3549daff99db56ec04099aL43" data-line-number="43" class="blob-num blob-num-context js-linkable-line-number"></td> 
               <td id="diff-d3b5613c2d3549daff99db56ec04099aR44" data-line-number="44" class="blob-num blob-num-context js-linkable-line-number"></td> 
               <td class="blob-code blob-code-context"> <span class="blob-code-inner"> <span class="pl-k">import</span> <span class="pl-smi">org.elasticsearch.search.aggregations.metrics.stats.extended.ExtendedStatsBuilder</span>;</span> </td> 
              </tr> 
              <tr> 
               <td id="diff-d3b5613c2d3549daff99db56ec04099aL44" data-line-number="44" class="blob-num blob-num-context js-linkable-line-number"></td> 
               <td id="diff-d3b5613c2d3549daff99db56ec04099aR45" data-line-number="45" class="blob-num blob-num-context js-linkable-line-number"></td> 
               <td class="blob-code blob-code-context"> <span class="blob-code-inner"> <span class="pl-k">import</span> <span class="pl-smi">org.elasticsearch.search.aggregations.metrics.sum.SumBuilder</span>;</span> </td> 
              </tr> 
              <tr class="js-expandable-line" data-position="8"> 
               <td class="blob-num blob-num-expandable" colspan="2"> <a href="#diff-d3b5613c2d3549daff99db56ec04099a" class="diff-expander js-expand" title="Expand" aria-label="Expand" data-url="/elastic/elasticsearch/blob_excerpt/6449ddbe0d219a8353614fef49f85037aeedbce2?diff=unified&amp;in_wiki_context=&amp;left_hunk_size=6&amp;mode=100644&amp;next_line_num_left=140&amp;next_line_num_right=141&amp;path=src%2Fmain%2Fjava%2Forg%2Felasticsearch%2Fsearch%2Faggregations%2FAggregationBuilders.java&amp;prev_line_num_left=44&amp;prev_line_num_right=45&amp;right_hunk_size=10" data-left-range="45-139" data-right-range="46-140"> 
                 <svg aria-hidden="true" class="octicon octicon-unfold" height="16" version="1.1" viewbox="0 0 14 16" width="14">
                  <path fill-rule="evenodd" d="M11.5 7.5L14 10c0 .55-.45 1-1 1H9v-1h3.5l-2-2h-7l-2 2H5v1H1c-.55 0-1-.45-1-1l2.5-2.5L0 5c0-.55.45-1 1-1h4v1H1.5l2 2h7l2-2H9V4h4c.55 0 1 .45 1 1l-2.5 2.5zM6 6h2V3h2L7 0 4 3h2v3zm2 3H6v3H4l3 3 3-3H8V9z" />
                 </svg> </a> </td> 
               <td class="blob-code blob-code-inner blob-code-hunk">@@ -140,6 +141,10 @@ public static PercentilesBuilder percentiles(String name) {</td> 
              </tr> 
              <tr> 
               <td id="diff-d3b5613c2d3549daff99db56ec04099aL140" data-line-number="140" class="blob-num blob-num-context js-linkable-line-number"></td> 
               <td id="diff-d3b5613c2d3549daff99db56ec04099aR141" data-line-number="141" class="blob-num blob-num-context js-linkable-line-number"></td> 
               <td class="blob-code blob-code-context"> <span class="blob-code-inner"> <span class="pl-k">return</span> <span class="pl-k">new</span> <span class="pl-smi">PercentilesBuilder</span>(name);</span> </td> 
              </tr> 
              <tr> 
               <td id="diff-d3b5613c2d3549daff99db56ec04099aL141" data-line-number="141" class="blob-num blob-num-context js-linkable-line-number"></td> 
               <td id="diff-d3b5613c2d3549daff99db56ec04099aR142" data-line-number="142" class="blob-num blob-num-context js-linkable-line-number"></td> 
               <td class="blob-code blob-code-context"> <span class="blob-code-inner"> }</span> </td> 
              </tr> 
              <tr> 
               <td id="diff-d3b5613c2d3549daff99db56ec04099aL142" data-line-number="142" class="blob-num blob-num-context js-linkable-line-number"></td> 
               <td id="diff-d3b5613c2d3549daff99db56ec04099aR143" data-line-number="143" class="blob-num blob-num-context js-linkable-line-number"></td> 
               <td class="blob-code blob-code-context"> <span class="blob-code-inner"> </span> </td> 
              </tr> 
              <tr> 
               <td class="blob-num blob-num-addition empty-cell"></td> 
               <td id="diff-d3b5613c2d3549daff99db56ec04099aR144" data-line-number="144" class="blob-num blob-num-addition js-linkable-line-number"></td> 
               <td class="blob-code blob-code-addition"> <span class="blob-code-inner">+ <span class="pl-k">public</span> <span class="pl-k">static</span> <span class="pl-smi">PercentileRanksBuilder</span> <span class="pl-en">percentileRanks</span>(<span class="pl-smi">String</span> <span class="pl-v">name</span>) {</span> </td> 
              </tr> 
              <tr> 
               <td class="blob-num blob-num-addition empty-cell"></td> 
               <td id="diff-d3b5613c2d3549daff99db56ec04099aR145" data-line-number="145" class="blob-num blob-num-addition js-linkable-line-number"></td> 
               <td class="blob-code blob-code-addition"> <span class="blob-code-inner">+ <span class="pl-k">return</span> <span class="pl-k">new</span> <span class="pl-smi">PercentileRanksBuilder</span>(name);</span> </td> 
              </tr> 
              <tr> 
               <td class="blob-num blob-num-addition empty-cell"></td> 
               <td id="diff-d3b5613c2d3549daff99db56ec04099aR146" data-line-number="146" class="blob-num blob-num-addition js-linkable-line-number"></td> 
               <td class="blob-code blob-code-addition"> <span class="blob-code-inner">+ }</span> </td> 
              </tr> 
              <tr> 
               <td class="blob-num blob-num-addition empty-cell"></td> 
               <td id="diff-d3b5613c2d3549daff99db56ec04099aR147" data-line-number="147" class="blob-num blob-num-addition js-linkable-line-number"></td> 
               <td class="blob-code blob-code-addition"> <span class="blob-code-inner">+</span> </td> 
              </tr> 
              <tr> 
               <td id="diff-d3b5613c2d3549daff99db56ec04099aL143" data-line-number="143" class="blob-num blob-num-context js-linkable-line-number"></td> 
               <td id="diff-d3b5613c2d3549daff99db56ec04099aR148" data-line-number="148" class="blob-num blob-num-context js-linkable-line-number"></td> 
               <td class="blob-code blob-code-context"> <span class="blob-code-inner"> <span class="pl-k">public</span> <span class="pl-k">static</span> <span class="pl-smi">CardinalityBuilder</span> <span class="pl-en">cardinality</span>(<span class="pl-smi">String</span> <span class="pl-v">name</span>) {</span> </td> 
              </tr> 
              <tr> 
               <td id="diff-d3b5613c2d3549daff99db56ec04099aL144" data-line-number="144" class="blob-num blob-num-context js-linkable-line-number"></td> 
               <td id="diff-d3b5613c2d3549daff99db56ec04099aR149" data-line-number="149" class="blob-num blob-num-context js-linkable-line-number"></td> 
               <td class="blob-code blob-code-context"> <span class="blob-code-inner"> <span class="pl-k">return</span> <span class="pl-k">new</span> <span class="pl-smi">CardinalityBuilder</span>(name);</span> </td> 
              </tr> 
              <tr> 
               <td id="diff-d3b5613c2d3549daff99db56ec04099aL145" data-line-number="145" class="blob-num blob-num-context js-linkable-line-number"></td> 
               <td id="diff-d3b5613c2d3549daff99db56ec04099aR150" data-line-number="150" class="blob-num blob-num-context js-linkable-line-number"></td> 
               <td class="blob-code blob-code-context"> <span class="blob-code-inner"> }</span> </td> 
              </tr> 
              <tr class="js-expandable-line"> 
               <td class="blob-num blob-num-expandable" colspan="2"> <a href="#diff-d3b5613c2d3549daff99db56ec04099a" class="diff-expander js-expand" title="Expand" aria-label="Expand" data-url="/elastic/elasticsearch/blob_excerpt/6449ddbe0d219a8353614fef49f85037aeedbce2?diff=unified&amp;in_wiki_context=&amp;mode=100644&amp;path=src%2Fmain%2Fjava%2Forg%2Felasticsearch%2Fsearch%2Faggregations%2FAggregationBuilders.java&amp;prev_line_num_left=145&amp;prev_line_num_right=150" data-left-range="146-159" data-right-range="151-159"> 
                 <svg aria-hidden="true" class="octicon octicon-unfold" height="16" version="1.1" viewbox="0 0 14 16" width="14">
                  <path fill-rule="evenodd" d="M11.5 7.5L14 10c0 .55-.45 1-1 1H9v-1h3.5l-2-2h-7l-2 2H5v1H1c-.55 0-1-.45-1-1l2.5-2.5L0 5c0-.55.45-1 1-1h4v1H1.5l2 2h7l2-2H9V4h4c.55 0 1 .45 1 1l-2.5 2.5zM6 6h2V3h2L7 0 4 3h2v3zm2 3H6v3H4l3 3 3-3H8V9z" />
                 </svg> </a> </td> 
               <td class="blob-code blob-code-expandable"></td> 
              </tr> 
             </tbody>
            </table> 
           </div> 
          </div> 
         </div> 
         <a name="diff-1fccde4e89e3ff33fbbf0825d5fbbf35"></a> 
         <div id="diff-4" class="file js-file js-details-container Details
             
             
             
             
             
              show-inline-notes
           "> 
          <div class="file-header js-file-header" data-path="src/main/java/org/elasticsearch/search/aggregations/AggregationModule.java" data-short-path="1fccde4" data-anchor="diff-1fccde4e89e3ff33fbbf0825d5fbbf35"> 
           <div class="file-actions"> 
            <span class="show-file-notes pt-1"> <label> <input type="checkbox" checked class="js-toggle-file-notes"> Show comments </label> </span> 
            <a href="/elastic/elasticsearch/blob/556a498bf69193dfcb8b1dd52bfc19be214fd716/src/main/java/org/elasticsearch/search/aggregations/AggregationModule.java" class="btn btn-sm tooltipped tooltipped-nw" rel="nofollow" aria-label="View the whole file at version 556a498 ">View</a> 
            <button type="button" class="btn-octicon p-1 pr-2 js-details-target" aria-label="Toggle diff text" aria-expanded="true"> 
             <svg aria-hidden="true" class="octicon octicon-chevron-down Details-content--shown" height="16" version="1.1" viewbox="0 0 10 16" width="10">
              <path fill-rule="evenodd" d="M5 11L0 6l1.5-1.5L5 8.25 8.5 4.5 10 6z" />
             </svg> 
             <svg aria-hidden="true" class="octicon octicon-chevron-up Details-content--hidden" height="16" version="1.1" viewbox="0 0 10 16" width="10">
              <path fill-rule="evenodd" d="M10 10l-1.5 1.5L5 7.75 1.5 11.5 0 10l5-5z" />
             </svg> </button> 
           </div> 
           <div class="file-info"> 
            <span class="diffstat tooltipped tooltipped-e" aria-label="2 additions &amp; 0 deletions">2 <span class="block-diff-added"></span><span class="block-diff-added"></span><span class="block-diff-neutral"></span><span class="block-diff-neutral"></span><span class="block-diff-neutral"></span></span> 
            <a href="#diff-1fccde4e89e3ff33fbbf0825d5fbbf35" class="link-gray-dark" title="src/main/java/org/elasticsearch/search/aggregations/AggregationModule.java">src/main/java/org/elasticsearch/search/aggregations/AggregationModule.java</a> 
           </div> 
          </div> 
          <div class="js-file-content Details-content--shown"> 
           <div class="data highlight blob-wrapper"> 
            <table class="diff-table tab-size  " data-tab-size="8"> 
             <tbody>
              <tr class="js-expandable-line" data-position="0"> 
               <td class="blob-num blob-num-expandable" colspan="2"> <a href="#diff-1fccde4e89e3ff33fbbf0825d5fbbf35" class="diff-expander js-expand" title="Expand" aria-label="Expand" data-url="/elastic/elasticsearch/blob_excerpt/6af5c320a2a0864ccc5232fe34def20797557554?diff=unified&amp;in_wiki_context=&amp;left_hunk_size=6&amp;mode=100644&amp;next_line_num_left=42&amp;next_line_num_right=42&amp;path=src%2Fmain%2Fjava%2Forg%2Felasticsearch%2Fsearch%2Faggregations%2FAggregationModule.java&amp;prev_line_num_left=&amp;prev_line_num_right=&amp;right_hunk_size=7" data-left-range="1-41" data-right-range="1-41"> 
                 <svg aria-hidden="true" class="octicon octicon-unfold" height="16" version="1.1" viewbox="0 0 14 16" width="14">
                  <path fill-rule="evenodd" d="M11.5 7.5L14 10c0 .55-.45 1-1 1H9v-1h3.5l-2-2h-7l-2 2H5v1H1c-.55 0-1-.45-1-1l2.5-2.5L0 5c0-.55.45-1 1-1h4v1H1.5l2 2h7l2-2H9V4h4c.55 0 1 .45 1 1l-2.5 2.5zM6 6h2V3h2L7 0 4 3h2v3zm2 3H6v3H4l3 3 3-3H8V9z" />
                 </svg> </a> </td> 
               <td class="blob-code blob-code-inner blob-code-hunk">@@ -42,6 +42,7 @@</td> 
              </tr> 
              <tr> 
               <td id="diff-1fccde4e89e3ff33fbbf0825d5fbbf35L42" data-line-number="42" class="blob-num blob-num-context js-linkable-line-number"></td> 
               <td id="diff-1fccde4e89e3ff33fbbf0825d5fbbf35R42" data-line-number="42" class="blob-num blob-num-context js-linkable-line-number"></td> 
               <td class="blob-code blob-code-context"> <span class="blob-code-inner"> <span class="pl-k">import</span> <span class="pl-smi">org.elasticsearch.search.aggregations.metrics.max.MaxParser</span>;</span> </td> 
              </tr> 
              <tr> 
               <td id="diff-1fccde4e89e3ff33fbbf0825d5fbbf35L43" data-line-number="43" class="blob-num blob-num-context js-linkable-line-number"></td> 
               <td id="diff-1fccde4e89e3ff33fbbf0825d5fbbf35R43" data-line-number="43" class="blob-num blob-num-context js-linkable-line-number"></td> 
               <td class="blob-code blob-code-context"> <span class="blob-code-inner"> <span class="pl-k">import</span> <span class="pl-smi">org.elasticsearch.search.aggregations.metrics.min.MinParser</span>;</span> </td> 
              </tr> 
              <tr> 
               <td id="diff-1fccde4e89e3ff33fbbf0825d5fbbf35L44" data-line-number="44" class="blob-num blob-num-context js-linkable-line-number"></td> 
               <td id="diff-1fccde4e89e3ff33fbbf0825d5fbbf35R44" data-line-number="44" class="blob-num blob-num-context js-linkable-line-number"></td> 
               <td class="blob-code blob-code-context"> <span class="blob-code-inner"> <span class="pl-k">import</span> <span class="pl-smi">org.elasticsearch.search.aggregations.metrics.percentiles.PercentilesParser</span>;</span> </td> 
              </tr> 
              <tr> 
               <td class="blob-num blob-num-addition empty-cell"></td> 
               <td id="diff-1fccde4e89e3ff33fbbf0825d5fbbf35R45" data-line-number="45" class="blob-num blob-num-addition js-linkable-line-number"></td> 
               <td class="blob-code blob-code-addition"> <span class="blob-code-inner">+<span class="pl-k">import</span> <span class="pl-smi">org.elasticsearch.search.aggregations.metrics.percentiles.PercentileRanksParser</span>;</span> </td> 
              </tr> 
              <tr> 
               <td id="diff-1fccde4e89e3ff33fbbf0825d5fbbf35L45" data-line-number="45" class="blob-num blob-num-context js-linkable-line-number"></td> 
               <td id="diff-1fccde4e89e3ff33fbbf0825d5fbbf35R46" data-line-number="46" class="blob-num blob-num-context js-linkable-line-number"></td> 
               <td class="blob-code blob-code-context"> <span class="blob-code-inner"> <span class="pl-k">import</span> <span class="pl-smi">org.elasticsearch.search.aggregations.metrics.stats.StatsParser</span>;</span> </td> 
              </tr> 
              <tr> 
               <td id="diff-1fccde4e89e3ff33fbbf0825d5fbbf35L46" data-line-number="46" class="blob-num blob-num-context js-linkable-line-number"></td> 
               <td id="diff-1fccde4e89e3ff33fbbf0825d5fbbf35R47" data-line-number="47" class="blob-num blob-num-context js-linkable-line-number"></td> 
               <td class="blob-code blob-code-context"> <span class="blob-code-inner"> <span class="pl-k">import</span> <span class="pl-smi">org.elasticsearch.search.aggregations.metrics.stats.extended.ExtendedStatsParser</span>;</span> </td> 
              </tr> 
              <tr> 
               <td id="diff-1fccde4e89e3ff33fbbf0825d5fbbf35L47" data-line-number="47" class="blob-num blob-num-context js-linkable-line-number"></td> 
               <td id="diff-1fccde4e89e3ff33fbbf0825d5fbbf35R48" data-line-number="48" class="blob-num blob-num-context js-linkable-line-number"></td> 
               <td class="blob-code blob-code-context"> <span class="blob-code-inner"> <span class="pl-k">import</span> <span class="pl-smi">org.elasticsearch.search.aggregations.metrics.sum.SumParser</span>;</span> </td> 
              </tr> 
              <tr class="js-expandable-line" data-position="8"> 
               <td class="blob-num blob-num-expandable" colspan="2"> <a href="#diff-1fccde4e89e3ff33fbbf0825d5fbbf35" class="diff-expander js-expand" title="Expand" aria-label="Expand" data-url="/elastic/elasticsearch/blob_excerpt/6af5c320a2a0864ccc5232fe34def20797557554?diff=unified&amp;in_wiki_context=&amp;left_hunk_size=6&amp;mode=100644&amp;next_line_num_left=65&amp;next_line_num_right=66&amp;path=src%2Fmain%2Fjava%2Forg%2Felasticsearch%2Fsearch%2Faggregations%2FAggregationModule.java&amp;prev_line_num_left=47&amp;prev_line_num_right=48&amp;right_hunk_size=7" data-left-range="48-64" data-right-range="49-65"> 
                 <svg aria-hidden="true" class="octicon octicon-unfold" height="16" version="1.1" viewbox="0 0 14 16" width="14">
                  <path fill-rule="evenodd" d="M11.5 7.5L14 10c0 .55-.45 1-1 1H9v-1h3.5l-2-2h-7l-2 2H5v1H1c-.55 0-1-.45-1-1l2.5-2.5L0 5c0-.55.45-1 1-1h4v1H1.5l2 2h7l2-2H9V4h4c.55 0 1 .45 1 1l-2.5 2.5zM6 6h2V3h2L7 0 4 3h2v3zm2 3H6v3H4l3 3 3-3H8V9z" />
                 </svg> </a> </td> 
               <td class="blob-code blob-code-inner blob-code-hunk">@@ -65,6 +66,7 @@ public AggregationModule() {</td> 
              </tr> 
              <tr> 
               <td id="diff-1fccde4e89e3ff33fbbf0825d5fbbf35L65" data-line-number="65" class="blob-num blob-num-context js-linkable-line-number"></td> 
               <td id="diff-1fccde4e89e3ff33fbbf0825d5fbbf35R66" data-line-number="66" class="blob-num blob-num-context js-linkable-line-number"></td> 
               <td class="blob-code blob-code-context"> <span class="blob-code-inner"> parsers<span class="pl-k">.</span>add(<span class="pl-smi">ExtendedStatsParser</span><span class="pl-k">.</span>class);</span> </td> 
              </tr> 
              <tr> 
               <td id="diff-1fccde4e89e3ff33fbbf0825d5fbbf35L66" data-line-number="66" class="blob-num blob-num-context js-linkable-line-number"></td> 
               <td id="diff-1fccde4e89e3ff33fbbf0825d5fbbf35R67" data-line-number="67" class="blob-num blob-num-context js-linkable-line-number"></td> 
               <td class="blob-code blob-code-context"> <span class="blob-code-inner"> parsers<span class="pl-k">.</span>add(<span class="pl-smi">ValueCountParser</span><span class="pl-k">.</span>class);</span> </td> 
              </tr> 
              <tr> 
               <td id="diff-1fccde4e89e3ff33fbbf0825d5fbbf35L67" data-line-number="67" class="blob-num blob-num-context js-linkable-line-number"></td> 
               <td id="diff-1fccde4e89e3ff33fbbf0825d5fbbf35R68" data-line-number="68" class="blob-num blob-num-context js-linkable-line-number"></td> 
               <td class="blob-code blob-code-context"> <span class="blob-code-inner"> parsers<span class="pl-k">.</span>add(<span class="pl-smi">PercentilesParser</span><span class="pl-k">.</span>class);</span> </td> 
              </tr> 
              <tr> 
               <td class="blob-num blob-num-addition empty-cell"></td> 
               <td id="diff-1fccde4e89e3ff33fbbf0825d5fbbf35R69" data-line-number="69" class="blob-num blob-num-addition js-linkable-line-number"></td> 
               <td class="blob-code blob-code-addition"> <span class="blob-code-inner">+ parsers<span class="pl-k">.</span>add(<span class="pl-smi">PercentileRanksParser</span><span class="pl-k">.</span>class);</span> </td> 
              </tr> 
              <tr> 
               <td id="diff-1fccde4e89e3ff33fbbf0825d5fbbf35L68" data-line-number="68" class="blob-num blob-num-context js-linkable-line-number"></td> 
               <td id="diff-1fccde4e89e3ff33fbbf0825d5fbbf35R70" data-line-number="70" class="blob-num blob-num-context js-linkable-line-number"></td> 
               <td class="blob-code blob-code-context"> <span class="blob-code-inner"> parsers<span class="pl-k">.</span>add(<span class="pl-smi">CardinalityParser</span><span class="pl-k">.</span>class);</span> </td> 
              </tr> 
              <tr> 
               <td id="diff-1fccde4e89e3ff33fbbf0825d5fbbf35L69" data-line-number="69" class="blob-num blob-num-context js-linkable-line-number"></td> 
               <td id="diff-1fccde4e89e3ff33fbbf0825d5fbbf35R71" data-line-number="71" class="blob-num blob-num-context js-linkable-line-number"></td> 
               <td class="blob-code blob-code-context"> <span class="blob-code-inner"> </span> </td> 
              </tr> 
              <tr> 
               <td id="diff-1fccde4e89e3ff33fbbf0825d5fbbf35L70" data-line-number="70" class="blob-num blob-num-context js-linkable-line-number"></td> 
               <td id="diff-1fccde4e89e3ff33fbbf0825d5fbbf35R72" data-line-number="72" class="blob-num blob-num-context js-linkable-line-number"></td> 
               <td class="blob-code blob-code-context"> <span class="blob-code-inner"> parsers<span class="pl-k">.</span>add(<span class="pl-smi">GlobalParser</span><span class="pl-k">.</span>class);</span> </td> 
              </tr> 
              <tr class="js-expandable-line"> 
               <td class="blob-num blob-num-expandable" colspan="2"> <a href="#diff-1fccde4e89e3ff33fbbf0825d5fbbf35" class="diff-expander js-expand" title="Expand" aria-label="Expand" data-url="/elastic/elasticsearch/blob_excerpt/6af5c320a2a0864ccc5232fe34def20797557554?diff=unified&amp;in_wiki_context=&amp;mode=100644&amp;path=src%2Fmain%2Fjava%2Forg%2Felasticsearch%2Fsearch%2Faggregations%2FAggregationModule.java&amp;prev_line_num_left=70&amp;prev_line_num_right=72" data-left-range="71-110" data-right-range="73-110"> 
                 <svg aria-hidden="true" class="octicon octicon-unfold" height="16" version="1.1" viewbox="0 0 14 16" width="14">
                  <path fill-rule="evenodd" d="M11.5 7.5L14 10c0 .55-.45 1-1 1H9v-1h3.5l-2-2h-7l-2 2H5v1H1c-.55 0-1-.45-1-1l2.5-2.5L0 5c0-.55.45-1 1-1h4v1H1.5l2 2h7l2-2H9V4h4c.55 0 1 .45 1 1l-2.5 2.5zM6 6h2V3h2L7 0 4 3h2v3zm2 3H6v3H4l3 3 3-3H8V9z" />
                 </svg> </a> </td> 
               <td class="blob-code blob-code-expandable"></td> 
              </tr> 
             </tbody>
            </table> 
           </div> 
          </div> 
         </div> 
         <a name="diff-b5da67c31971943f632bdbc8b6b3f0a6"></a> 
         <div id="diff-5" class="file js-file js-details-container Details
             
             
             
             
             
              show-inline-notes
           "> 
          <div class="file-header js-file-header" data-path="src/main/java/org/elasticsearch/search/aggregations/TransportAggregationModule.java" data-short-path="b5da67c" data-anchor="diff-b5da67c31971943f632bdbc8b6b3f0a6"> 
           <div class="file-actions"> 
            <span class="show-file-notes pt-1"> <label> <input type="checkbox" checked class="js-toggle-file-notes"> Show comments </label> </span> 
            <a href="/elastic/elasticsearch/blob/556a498bf69193dfcb8b1dd52bfc19be214fd716/src/main/java/org/elasticsearch/search/aggregations/TransportAggregationModule.java" class="btn btn-sm tooltipped tooltipped-nw" rel="nofollow" aria-label="View the whole file at version 556a498 ">View</a> 
            <button type="button" class="btn-octicon p-1 pr-2 js-details-target" aria-label="Toggle diff text" aria-expanded="true"> 
             <svg aria-hidden="true" class="octicon octicon-chevron-down Details-content--shown" height="16" version="1.1" viewbox="0 0 10 16" width="10">
              <path fill-rule="evenodd" d="M5 11L0 6l1.5-1.5L5 8.25 8.5 4.5 10 6z" />
             </svg> 
             <svg aria-hidden="true" class="octicon octicon-chevron-up Details-content--hidden" height="16" version="1.1" viewbox="0 0 10 16" width="10">
              <path fill-rule="evenodd" d="M10 10l-1.5 1.5L5 7.75 1.5 11.5 0 10l5-5z" />
             </svg> </button> 
           </div> 
           <div class="file-info"> 
            <span class="diffstat tooltipped tooltipped-e" aria-label="2 additions &amp; 0 deletions">2 <span class="block-diff-added"></span><span class="block-diff-added"></span><span class="block-diff-neutral"></span><span class="block-diff-neutral"></span><span class="block-diff-neutral"></span></span> 
            <a href="#diff-b5da67c31971943f632bdbc8b6b3f0a6" class="link-gray-dark" title="src/main/java/org/elasticsearch/search/aggregations/TransportAggregationModule.java">src/main/java/org/elasticsearch/search/aggregations/TransportAggregationModule.java</a> 
           </div> 
          </div> 
          <div class="js-file-content Details-content--shown"> 
           <div class="data highlight blob-wrapper"> 
            <table class="diff-table tab-size  " data-tab-size="8"> 
             <tbody>
              <tr class="js-expandable-line" data-position="0"> 
               <td class="blob-num blob-num-expandable" colspan="2"> <a href="#diff-b5da67c31971943f632bdbc8b6b3f0a6" class="diff-expander js-expand" title="Expand" aria-label="Expand" data-url="/elastic/elasticsearch/blob_excerpt/abc39e70f035b8786d29eaeb8d624e94a2b61350?diff=unified&amp;in_wiki_context=&amp;left_hunk_size=6&amp;mode=100644&amp;next_line_num_left=45&amp;next_line_num_right=45&amp;path=src%2Fmain%2Fjava%2Forg%2Felasticsearch%2Fsearch%2Faggregations%2FTransportAggregationModule.java&amp;prev_line_num_left=&amp;prev_line_num_right=&amp;right_hunk_size=7" data-left-range="1-44" data-right-range="1-44"> 
                 <svg aria-hidden="true" class="octicon octicon-unfold" height="16" version="1.1" viewbox="0 0 14 16" width="14">
                  <path fill-rule="evenodd" d="M11.5 7.5L14 10c0 .55-.45 1-1 1H9v-1h3.5l-2-2h-7l-2 2H5v1H1c-.55 0-1-.45-1-1l2.5-2.5L0 5c0-.55.45-1 1-1h4v1H1.5l2 2h7l2-2H9V4h4c.55 0 1 .45 1 1l-2.5 2.5zM6 6h2V3h2L7 0 4 3h2v3zm2 3H6v3H4l3 3 3-3H8V9z" />
                 </svg> </a> </td> 
               <td class="blob-code blob-code-inner blob-code-hunk">@@ -45,6 +45,7 @@</td> 
              </tr> 
              <tr> 
               <td id="diff-b5da67c31971943f632bdbc8b6b3f0a6L45" data-line-number="45" class="blob-num blob-num-context js-linkable-line-number"></td> 
               <td id="diff-b5da67c31971943f632bdbc8b6b3f0a6R45" data-line-number="45" class="blob-num blob-num-context js-linkable-line-number"></td> 
               <td class="blob-code blob-code-context"> <span class="blob-code-inner"> <span class="pl-k">import</span> <span class="pl-smi">org.elasticsearch.search.aggregations.metrics.max.InternalMax</span>;</span> </td> 
              </tr> 
              <tr> 
               <td id="diff-b5da67c31971943f632bdbc8b6b3f0a6L46" data-line-number="46" class="blob-num blob-num-context js-linkable-line-number"></td> 
               <td id="diff-b5da67c31971943f632bdbc8b6b3f0a6R46" data-line-number="46" class="blob-num blob-num-context js-linkable-line-number"></td> 
               <td class="blob-code blob-code-context"> <span class="blob-code-inner"> <span class="pl-k">import</span> <span class="pl-smi">org.elasticsearch.search.aggregations.metrics.min.InternalMin</span>;</span> </td> 
              </tr> 
              <tr> 
               <td id="diff-b5da67c31971943f632bdbc8b6b3f0a6L47" data-line-number="47" class="blob-num blob-num-context js-linkable-line-number"></td> 
               <td id="diff-b5da67c31971943f632bdbc8b6b3f0a6R47" data-line-number="47" class="blob-num blob-num-context js-linkable-line-number"></td> 
               <td class="blob-code blob-code-context"> <span class="blob-code-inner"> <span class="pl-k">import</span> <span class="pl-smi">org.elasticsearch.search.aggregations.metrics.percentiles.InternalPercentiles</span>;</span> </td> 
              </tr> 
              <tr> 
               <td class="blob-num blob-num-addition empty-cell"></td> 
               <td id="diff-b5da67c31971943f632bdbc8b6b3f0a6R48" data-line-number="48" class="blob-num blob-num-addition js-linkable-line-number"></td> 
               <td class="blob-code blob-code-addition"> <span class="blob-code-inner">+<span class="pl-k">import</span> <span class="pl-smi">org.elasticsearch.search.aggregations.metrics.percentiles.InternalPercentileRanks</span>;</span> </td> 
              </tr> 
              <tr> 
               <td id="diff-b5da67c31971943f632bdbc8b6b3f0a6L48" data-line-number="48" class="blob-num blob-num-context js-linkable-line-number"></td> 
               <td id="diff-b5da67c31971943f632bdbc8b6b3f0a6R49" data-line-number="49" class="blob-num blob-num-context js-linkable-line-number"></td> 
               <td class="blob-code blob-code-context"> <span class="blob-code-inner"> <span class="pl-k">import</span> <span class="pl-smi">org.elasticsearch.search.aggregations.metrics.stats.InternalStats</span>;</span> </td> 
              </tr> 
              <tr> 
               <td id="diff-b5da67c31971943f632bdbc8b6b3f0a6L49" data-line-number="49" class="blob-num blob-num-context js-linkable-line-number"></td> 
               <td id="diff-b5da67c31971943f632bdbc8b6b3f0a6R50" data-line-number="50" class="blob-num blob-num-context js-linkable-line-number"></td> 
               <td class="blob-code blob-code-context"> <span class="blob-code-inner"> <span class="pl-k">import</span> <span class="pl-smi">org.elasticsearch.search.aggregations.metrics.stats.extended.InternalExtendedStats</span>;</span> </td> 
              </tr> 
              <tr> 
               <td id="diff-b5da67c31971943f632bdbc8b6b3f0a6L50" data-line-number="50" class="blob-num blob-num-context js-linkable-line-number"></td> 
               <td id="diff-b5da67c31971943f632bdbc8b6b3f0a6R51" data-line-number="51" class="blob-num blob-num-context js-linkable-line-number"></td> 
               <td class="blob-code blob-code-context"> <span class="blob-code-inner"> <span class="pl-k">import</span> <span class="pl-smi">org.elasticsearch.search.aggregations.metrics.sum.InternalSum</span>;</span> </td> 
              </tr> 
              <tr class="js-expandable-line" data-position="8"> 
               <td class="blob-num blob-num-expandable" colspan="2"> <a href="#diff-b5da67c31971943f632bdbc8b6b3f0a6" class="diff-expander js-expand" title="Expand" aria-label="Expand" data-url="/elastic/elasticsearch/blob_excerpt/abc39e70f035b8786d29eaeb8d624e94a2b61350?diff=unified&amp;in_wiki_context=&amp;left_hunk_size=6&amp;mode=100644&amp;next_line_num_left=67&amp;next_line_num_right=68&amp;path=src%2Fmain%2Fjava%2Forg%2Felasticsearch%2Fsearch%2Faggregations%2FTransportAggregationModule.java&amp;prev_line_num_left=50&amp;prev_line_num_right=51&amp;right_hunk_size=7" data-left-range="51-66" data-right-range="52-67"> 
                 <svg aria-hidden="true" class="octicon octicon-unfold" height="16" version="1.1" viewbox="0 0 14 16" width="14">
                  <path fill-rule="evenodd" d="M11.5 7.5L14 10c0 .55-.45 1-1 1H9v-1h3.5l-2-2h-7l-2 2H5v1H1c-.55 0-1-.45-1-1l2.5-2.5L0 5c0-.55.45-1 1-1h4v1H1.5l2 2h7l2-2H9V4h4c.55 0 1 .45 1 1l-2.5 2.5zM6 6h2V3h2L7 0 4 3h2v3zm2 3H6v3H4l3 3 3-3H8V9z" />
                 </svg> </a> </td> 
               <td class="blob-code blob-code-inner blob-code-hunk">@@ -67,6 +68,7 @@ protected void configure() {</td> 
              </tr> 
              <tr> 
               <td id="diff-b5da67c31971943f632bdbc8b6b3f0a6L67" data-line-number="67" class="blob-num blob-num-context js-linkable-line-number"></td> 
               <td id="diff-b5da67c31971943f632bdbc8b6b3f0a6R68" data-line-number="68" class="blob-num blob-num-context js-linkable-line-number"></td> 
               <td class="blob-code blob-code-context"> <span class="blob-code-inner"> <span class="pl-smi">InternalExtendedStats</span><span class="pl-k">.</span>registerStreams();</span> </td> 
              </tr> 
              <tr> 
               <td id="diff-b5da67c31971943f632bdbc8b6b3f0a6L68" data-line-number="68" class="blob-num blob-num-context js-linkable-line-number"></td> 
               <td id="diff-b5da67c31971943f632bdbc8b6b3f0a6R69" data-line-number="69" class="blob-num blob-num-context js-linkable-line-number"></td> 
               <td class="blob-code blob-code-context"> <span class="blob-code-inner"> <span class="pl-smi">InternalValueCount</span><span class="pl-k">.</span>registerStreams();</span> </td> 
              </tr> 
              <tr> 
               <td id="diff-b5da67c31971943f632bdbc8b6b3f0a6L69" data-line-number="69" class="blob-num blob-num-context js-linkable-line-number"></td> 
               <td id="diff-b5da67c31971943f632bdbc8b6b3f0a6R70" data-line-number="70" class="blob-num blob-num-context js-linkable-line-number"></td> 
               <td class="blob-code blob-code-context"> <span class="blob-code-inner"> <span class="pl-smi">InternalPercentiles</span><span class="pl-k">.</span>registerStreams();</span> </td> 
              </tr> 
              <tr> 
               <td class="blob-num blob-num-addition empty-cell"></td> 
               <td id="diff-b5da67c31971943f632bdbc8b6b3f0a6R71" data-line-number="71" class="blob-num blob-num-addition js-linkable-line-number"></td> 
               <td class="blob-code blob-code-addition"> <span class="blob-code-inner">+ <span class="pl-smi">InternalPercentileRanks</span><span class="pl-k">.</span>registerStreams();</span> </td> 
              </tr> 
              <tr> 
               <td id="diff-b5da67c31971943f632bdbc8b6b3f0a6L70" data-line-number="70" class="blob-num blob-num-context js-linkable-line-number"></td> 
               <td id="diff-b5da67c31971943f632bdbc8b6b3f0a6R72" data-line-number="72" class="blob-num blob-num-context js-linkable-line-number"></td> 
               <td class="blob-code blob-code-context"> <span class="blob-code-inner"> <span class="pl-smi">InternalCardinality</span><span class="pl-k">.</span>registerStreams();</span> </td> 
              </tr> 
              <tr> 
               <td id="diff-b5da67c31971943f632bdbc8b6b3f0a6L71" data-line-number="71" class="blob-num blob-num-context js-linkable-line-number"></td> 
               <td id="diff-b5da67c31971943f632bdbc8b6b3f0a6R73" data-line-number="73" class="blob-num blob-num-context js-linkable-line-number"></td> 
               <td class="blob-code blob-code-context"> <span class="blob-code-inner"> </span> </td> 
              </tr> 
              <tr> 
               <td id="diff-b5da67c31971943f632bdbc8b6b3f0a6L72" data-line-number="72" class="blob-num blob-num-context js-linkable-line-number"></td> 
               <td id="diff-b5da67c31971943f632bdbc8b6b3f0a6R74" data-line-number="74" class="blob-num blob-num-context js-linkable-line-number"></td> 
               <td class="blob-code blob-code-context"> <span class="blob-code-inner"> <span class="pl-c"><span class="pl-c">//</span> buckets</span></span> </td> 
              </tr> 
              <tr class="js-expandable-line"> 
               <td class="blob-num blob-num-expandable" colspan="2"> <a href="#diff-b5da67c31971943f632bdbc8b6b3f0a6" class="diff-expander js-expand" title="Expand" aria-label="Expand" data-url="/elastic/elasticsearch/blob_excerpt/abc39e70f035b8786d29eaeb8d624e94a2b61350?diff=unified&amp;in_wiki_context=&amp;mode=100644&amp;path=src%2Fmain%2Fjava%2Forg%2Felasticsearch%2Fsearch%2Faggregations%2FTransportAggregationModule.java&amp;prev_line_num_left=72&amp;prev_line_num_right=74" data-left-range="73-97" data-right-range="75-97"> 
                 <svg aria-hidden="true" class="octicon octicon-unfold" height="16" version="1.1" viewbox="0 0 14 16" width="14">
                  <path fill-rule="evenodd" d="M11.5 7.5L14 10c0 .55-.45 1-1 1H9v-1h3.5l-2-2h-7l-2 2H5v1H1c-.55 0-1-.45-1-1l2.5-2.5L0 5c0-.55.45-1 1-1h4v1H1.5l2 2h7l2-2H9V4h4c.55 0 1 .45 1 1l-2.5 2.5zM6 6h2V3h2L7 0 4 3h2v3zm2 3H6v3H4l3 3 3-3H8V9z" />
                 </svg> </a> </td> 
               <td class="blob-code blob-code-expandable"></td> 
              </tr> 
             </tbody>
            </table> 
           </div> 
          </div> 
         </div> 
         <a name="diff-959f740e9f05de066c413e58d304c511"></a> 
         <div id="diff-6" class="file js-file js-details-container Details
             
             
             
             
             
              show-inline-notes
           "> 
          <div class="file-header js-file-header" data-path="src/main/java/org/elasticsearch/search/aggregations/metrics/percentiles/AbstractInternalPercentiles.java" data-short-path="959f740" data-anchor="diff-959f740e9f05de066c413e58d304c511"> 
           <div class="file-actions"> 
            <span class="show-file-notes pt-1"> <label> <input type="checkbox" checked class="js-toggle-file-notes"> Show comments </label> </span> 
            <a href="/elastic/elasticsearch/blob/556a498bf69193dfcb8b1dd52bfc19be214fd716/src/main/java/org/elasticsearch/search/aggregations/metrics/percentiles/AbstractInternalPercentiles.java" class="btn btn-sm tooltipped tooltipped-nw" rel="nofollow" aria-label="View the whole file at version 556a498 ">View</a> 
            <button type="button" class="btn-octicon p-1 pr-2 js-details-target" aria-label="Toggle diff text" aria-expanded="true"> 
             <svg aria-hidden="true" class="octicon octicon-chevron-down Details-content--shown" height="16" version="1.1" viewbox="0 0 10 16" width="10">
              <path fill-rule="evenodd" d="M5 11L0 6l1.5-1.5L5 8.25 8.5 4.5 10 6z" />
             </svg> 
             <svg aria-hidden="true" class="octicon octicon-chevron-up Details-content--hidden" height="16" version="1.1" viewbox="0 0 10 16" width="10">
              <path fill-rule="evenodd" d="M10 10l-1.5 1.5L5 7.75 1.5 11.5 0 10l5-5z" />
             </svg> </button> 
           </div> 
           <div class="file-info"> 
            <span class="diffstat tooltipped tooltipped-e" aria-label="137 additions &amp; 0 deletions">137 <span class="block-diff-added"></span><span class="block-diff-added"></span><span class="block-diff-added"></span><span class="block-diff-added"></span><span class="block-diff-added"></span></span> 
            <a href="#diff-959f740e9f05de066c413e58d304c511" class="link-gray-dark" title="src/main/java/org/elasticsearch/search/aggregations/metrics/percentiles/AbstractInternalPercentiles.java">...rg/elasticsearch/search/aggregations/metrics/percentiles/AbstractInternalPercentiles.java</a> 
           </div> 
          </div> 
          <div class="js-file-content Details-content--shown"> 
           <div class="data highlight blob-wrapper"> 
            <table class="diff-table tab-size  " data-tab-size="8"> 
             <tbody>
              <tr data-position="0"> 
               <td id="diff-959f740e9f05de066c413e58d304c511L-1" class="blob-num blob-num-hunk non-expandable" data-line-number="..."></td> 
               <td id="diff-959f740e9f05de066c413e58d304c511R0" class="blob-num blob-num-hunk non-expandable" data-line-number="..."></td> 
               <td class="blob-code blob-code-inner blob-code-hunk">@@ -0,0 +1,137 @@</td> 
              </tr> 
              <tr> 
               <td class="blob-num blob-num-addition empty-cell"></td> 
               <td id="diff-959f740e9f05de066c413e58d304c511R1" data-line-number="1" class="blob-num blob-num-addition js-linkable-line-number"></td> 
               <td class="blob-code blob-code-addition"> <span class="blob-code-inner">+<span class="pl-c"><span class="pl-c">/*</span></span></span> </td> 
              </tr> 
              <tr> 
               <td class="blob-num blob-num-addition empty-cell"></td> 
               <td id="diff-959f740e9f05de066c413e58d304c511R2" data-line-number="2" class="blob-num blob-num-addition js-linkable-line-number"></td> 
               <td class="blob-code blob-code-addition"> <span class="blob-code-inner">+<span class="pl-c"> * Licensed to Elasticsearch under one or more contributor</span></span> </td> 
              </tr> 
              <tr> 
               <td class="blob-num blob-num-addition empty-cell"></td> 
               <td id="diff-959f740e9f05de066c413e58d304c511R3" data-line-number="3" class="blob-num blob-num-addition js-linkable-line-number"></td> 
               <td class="blob-code blob-code-addition"> <span class="blob-code-inner">+<span class="pl-c"> * license agreements. See the NOTICE file distributed with</span></span> </td> 
              </tr> 
              <tr> 
               <td class="blob-num blob-num-addition empty-cell"></td> 
               <td id="diff-959f740e9f05de066c413e58d304c511R4" data-line-number="4" class="blob-num blob-num-addition js-linkable-line-number"></td> 
               <td class="blob-code blob-code-addition"> <span class="blob-code-inner">+<span class="pl-c"> * this work for additional information regarding copyright</span></span> </td> 
              </tr> 
              <tr> 
               <td class="blob-num blob-num-addition empty-cell"></td> 
               <td id="diff-959f740e9f05de066c413e58d304c511R5" data-line-number="5" class="blob-num blob-num-addition js-linkable-line-number"></td> 
               <td class="blob-code blob-code-addition"> <span class="blob-code-inner">+<span class="pl-c"> * ownership. Elasticsearch licenses this file to you under</span></span> </td> 
              </tr> 
              <tr> 
               <td class="blob-num blob-num-addition empty-cell"></td> 
               <td id="diff-959f740e9f05de066c413e58d304c511R6" data-line-number="6" class="blob-num blob-num-addition js-linkable-line-number"></td> 
               <td class="blob-code blob-code-addition"> <span class="blob-code-inner">+<span class="pl-c"> * the Apache License, Version 2.0 (the "License"); you may</span></span> </td> 
              </tr> 
              <tr> 
               <td class="blob-num blob-num-addition empty-cell"></td> 
               <td id="diff-959f740e9f05de066c413e58d304c511R7" data-line-number="7" class="blob-num blob-num-addition js-linkable-line-number"></td> 
               <td class="blob-code blob-code-addition"> <span class="blob-code-inner">+<span class="pl-c"> * not use this file except in compliance with the License.</span></span> </td> 
              </tr> 
              <tr> 
               <td class="blob-num blob-num-addition empty-cell"></td> 
               <td id="diff-959f740e9f05de066c413e58d304c511R8" data-line-number="8" class="blob-num blob-num-addition js-linkable-line-number"></td> 
               <td class="blob-code blob-code-addition"> <span class="blob-code-inner">+<span class="pl-c"> * You may obtain a copy of the License at</span></span> </td> 
              </tr> 
              <tr> 
               <td class="blob-num blob-num-addition empty-cell"></td> 
               <td id="diff-959f740e9f05de066c413e58d304c511R9" data-line-number="9" class="blob-num blob-num-addition js-linkable-line-number"></td> 
               <td class="blob-code blob-code-addition"> <span class="blob-code-inner">+<span class="pl-c"> *</span></span> </td> 
              </tr> 
              <tr> 
               <td class="blob-num blob-num-addition empty-cell"></td> 
               <td id="diff-959f740e9f05de066c413e58d304c511R10" data-line-number="10" class="blob-num blob-num-addition js-linkable-line-number"></td> 
               <td class="blob-code blob-code-addition"> <span class="blob-code-inner">+<span class="pl-c"> * http://www.apache.org/licenses/LICENSE-2.0</span></span> </td> 
              </tr> 
              <tr> 
               <td class="blob-num blob-num-addition empty-cell"></td> 
               <td id="diff-959f740e9f05de066c413e58d304c511R11" data-line-number="11" class="blob-num blob-num-addition js-linkable-line-number"></td> 
               <td class="blob-code blob-code-addition"> <span class="blob-code-inner">+<span class="pl-c"> *</span></span> </td> 
              </tr> 
              <tr> 
               <td class="blob-num blob-num-addition empty-cell"></td> 
               <td id="diff-959f740e9f05de066c413e58d304c511R12" data-line-number="12" class="blob-num blob-num-addition js-linkable-line-number"></td> 
               <td class="blob-code blob-code-addition"> <span class="blob-code-inner">+<span class="pl-c"> * Unless required by applicable law or agreed to in writing,</span></span> </td> 
              </tr> 
              <tr> 
               <td class="blob-num blob-num-addition empty-cell"></td> 
               <td id="diff-959f740e9f05de066c413e58d304c511R13" data-line-number="13" class="blob-num blob-num-addition js-linkable-line-number"></td> 
               <td class="blob-code blob-code-addition"> <span class="blob-code-inner">+<span class="pl-c"> * software distributed under the License is distributed on an</span></span> </td> 
              </tr> 
              <tr> 
               <td class="blob-num blob-num-addition empty-cell"></td> 
               <td id="diff-959f740e9f05de066c413e58d304c511R14" data-line-number="14" class="blob-num blob-num-addition js-linkable-line-number"></td> 
               <td class="blob-code blob-code-addition"> <span class="blob-code-inner">+<span class="pl-c"> * "AS IS" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY</span></span> </td> 
              </tr> 
              <tr> 
               <td class="blob-num blob-num-addition empty-cell"></td> 
               <td id="diff-959f740e9f05de066c413e58d304c511R15" data-line-number="15" class="blob-num blob-num-addition js-linkable-line-number"></td> 
               <td class="blob-code blob-code-addition"> <span class="blob-code-inner">+<span class="pl-c"> * KIND, either express or implied. See the License for the</span></span> </td> 
              </tr> 
              <tr> 
               <td class="blob-num blob-num-addition empty-cell"></td> 
               <td id="diff-959f740e9f05de066c413e58d304c511R16" data-line-number="16" class="blob-num blob-num-addition js-linkable-line-number"></td> 
               <td class="blob-code blob-code-addition"> <span class="blob-code-inner">+<span class="pl-c"> * specific language governing permissions and limitations</span></span> </td> 
              </tr> 
              <tr> 
               <td class="blob-num blob-num-addition empty-cell"></td> 
               <td id="diff-959f740e9f05de066c413e58d304c511R17" data-line-number="17" class="blob-num blob-num-addition js-linkable-line-number"></td> 
               <td class="blob-code blob-code-addition"> <span class="blob-code-inner">+<span class="pl-c"> * under the License.</span></span> </td> 
              </tr> 
              <tr> 
               <td class="blob-num blob-num-addition empty-cell"></td> 
               <td id="diff-959f740e9f05de066c413e58d304c511R18" data-line-number="18" class="blob-num blob-num-addition js-linkable-line-number"></td> 
               <td class="blob-code blob-code-addition"> <span class="blob-code-inner">+<span class="pl-c"> <span class="pl-c">*/</span></span></span> </td> 
              </tr> 
              <tr> 
               <td class="blob-num blob-num-addition empty-cell"></td> 
               <td id="diff-959f740e9f05de066c413e58d304c511R19" data-line-number="19" class="blob-num blob-num-addition js-linkable-line-number"></td> 
               <td class="blob-code blob-code-addition"> <span class="blob-code-inner">+</span> </td> 
              </tr> 
              <tr> 
               <td class="blob-num blob-num-addition empty-cell"></td> 
               <td id="diff-959f740e9f05de066c413e58d304c511R20" data-line-number="20" class="blob-num blob-num-addition js-linkable-line-number"></td> 
               <td class="blob-code blob-code-addition"> <span class="blob-code-inner">+<span class="pl-k">package</span> <span class="pl-smi">org.elasticsearch.search.aggregations.metrics.percentiles</span>;</span> </td> 
              </tr> 
              <tr> 
               <td class="blob-num blob-num-addition empty-cell"></td> 
               <td id="diff-959f740e9f05de066c413e58d304c511R21" data-line-number="21" class="blob-num blob-num-addition js-linkable-line-number"></td> 
               <td class="blob-code blob-code-addition"> <span class="blob-code-inner">+</span> </td> 
              </tr> 
              <tr> 
               <td class="blob-num blob-num-addition empty-cell"></td> 
               <td id="diff-959f740e9f05de066c413e58d304c511R22" data-line-number="22" class="blob-num blob-num-addition js-linkable-line-number"></td> 
               <td class="blob-code blob-code-addition"> <span class="blob-code-inner">+<span class="pl-k">import</span> <span class="pl-smi">org.elasticsearch.ElasticsearchIllegalArgumentException</span>;</span> </td> 
              </tr> 
              <tr> 
               <td class="blob-num blob-num-addition empty-cell"></td> 
               <td id="diff-959f740e9f05de066c413e58d304c511R23" data-line-number="23" class="blob-num blob-num-addition js-linkable-line-number"></td> 
               <td class="blob-code blob-code-addition"> <span class="blob-code-inner">+<span class="pl-k">import</span> <span class="pl-smi">org.elasticsearch.Version</span>;</span> </td> 
              </tr> 
              <tr> 
               <td class="blob-num blob-num-addition empty-cell"></td> 
               <td id="diff-959f740e9f05de066c413e58d304c511R24" data-line-number="24" class="blob-num blob-num-addition js-linkable-line-number"></td> 
               <td class="blob-code blob-code-addition"> <span class="blob-code-inner">+<span class="pl-k">import</span> <span class="pl-smi">org.elasticsearch.common.io.stream.StreamInput</span>;</span> </td> 
              </tr> 
              <tr> 
               <td class="blob-num blob-num-addition empty-cell"></td> 
               <td id="diff-959f740e9f05de066c413e58d304c511R25" data-line-number="25" class="blob-num blob-num-addition js-linkable-line-number"></td> 
               <td class="blob-code blob-code-addition"> <span class="blob-code-inner">+<span class="pl-k">import</span> <span class="pl-smi">org.elasticsearch.common.io.stream.StreamOutput</span>;</span> </td> 
              </tr> 
              <tr> 
               <td class="blob-num blob-num-addition empty-cell"></td> 
               <td id="diff-959f740e9f05de066c413e58d304c511R26" data-line-number="26" class="blob-num blob-num-addition js-linkable-line-number"></td> 
               <td class="blob-code blob-code-addition"> <span class="blob-code-inner">+<span class="pl-k">import</span> <span class="pl-smi">org.elasticsearch.common.xcontent.XContentBuilder</span>;</span> </td> 
              </tr> 
              <tr> 
               <td class="blob-num blob-num-addition empty-cell"></td> 
               <td id="diff-959f740e9f05de066c413e58d304c511R27" data-line-number="27" class="blob-num blob-num-addition js-linkable-line-number"></td> 
               <td class="blob-code blob-code-addition"> <span class="blob-code-inner">+<span class="pl-k">import</span> <span class="pl-smi">org.elasticsearch.search.aggregations.InternalAggregation</span>;</span> </td> 
              </tr> 
              <tr> 
               <td class="blob-num blob-num-addition empty-cell"></td> 
               <td id="diff-959f740e9f05de066c413e58d304c511R28" data-line-number="28" class="blob-num blob-num-addition js-linkable-line-number"></td> 
               <td class="blob-code blob-code-addition"> <span class="blob-code-inner">+<span class="pl-k">import</span> <span class="pl-smi">org.elasticsearch.search.aggregations.metrics.InternalNumericMetricsAggregation</span>;</span> </td> 
              </tr> 
              <tr> 
               <td class="blob-num blob-num-addition empty-cell"></td> 
               <td id="diff-959f740e9f05de066c413e58d304c511R29" data-line-number="29" class="blob-num blob-num-addition js-linkable-line-number"></td> 
               <td class="blob-code blob-code-addition"> <span class="blob-code-inner">+<span class="pl-k">import</span> <span class="pl-smi">org.elasticsearch.search.aggregations.metrics.percentiles.tdigest.TDigestState</span>;</span> </td> 
              </tr> 
              <tr> 
               <td class="blob-num blob-num-addition empty-cell"></td> 
               <td id="diff-959f740e9f05de066c413e58d304c511R30" data-line-number="30" class="blob-num blob-num-addition js-linkable-line-number"></td> 
               <td class="blob-code blob-code-addition"> <span class="blob-code-inner">+<span class="pl-k">import</span> <span class="pl-smi">org.elasticsearch.search.aggregations.support.format.ValueFormatterStreams</span>;</span> </td> 
              </tr> 
              <tr> 
               <td class="blob-num blob-num-addition empty-cell"></td> 
               <td id="diff-959f740e9f05de066c413e58d304c511R31" data-line-number="31" class="blob-num blob-num-addition js-linkable-line-number"></td> 
               <td class="blob-code blob-code-addition"> <span class="blob-code-inner">+</span> </td> 
              </tr> 
              <tr> 
               <td class="blob-num blob-num-addition empty-cell"></td> 
               <td id="diff-959f740e9f05de066c413e58d304c511R32" data-line-number="32" class="blob-num blob-num-addition js-linkable-line-number"></td> 
               <td class="blob-code blob-code-addition"> <span class="blob-code-inner">+<span class="pl-k">import</span> <span class="pl-smi">java.io.IOException</span>;</span> </td> 
              </tr> 
              <tr> 
               <td class="blob-num blob-num-addition empty-cell"></td> 
               <td id="diff-959f740e9f05de066c413e58d304c511R33" data-line-number="33" class="blob-num blob-num-addition js-linkable-line-number"></td> 
               <td class="blob-code blob-code-addition"> <span class="blob-code-inner">+<span class="pl-k">import</span> <span class="pl-smi">java.util.List</span>;</span> </td> 
              </tr> 
              <tr> 
               <td class="blob-num blob-num-addition empty-cell"></td> 
               <td id="diff-959f740e9f05de066c413e58d304c511R34" data-line-number="34" class="blob-num blob-num-addition js-linkable-line-number"></td> 
               <td class="blob-code blob-code-addition"> <span class="blob-code-inner">+</span> </td> 
              </tr> 
              <tr> 
               <td class="blob-num blob-num-addition empty-cell"></td> 
               <td id="diff-959f740e9f05de066c413e58d304c511R35" data-line-number="35" class="blob-num blob-num-addition js-linkable-line-number"></td> 
               <td class="blob-code blob-code-addition"> <span class="blob-code-inner">+<span class="pl-k">abstract</span> <span class="pl-k">class</span> <span class="pl-en">AbstractInternalPercentiles</span> <span class="pl-k">extends</span> <span class="pl-e">InternalNumericMetricsAggregation</span>.<span class="pl-e">MultiValue</span> {</span> </td> 
              </tr> 
              <tr> 
               <td class="blob-num blob-num-addition empty-cell"></td> 
               <td id="diff-959f740e9f05de066c413e58d304c511R36" data-line-number="36" class="blob-num blob-num-addition js-linkable-line-number"></td> 
               <td class="blob-code blob-code-addition"> <span class="blob-code-inner">+</span> </td> 
              </tr> 
              <tr> 
               <td class="blob-num blob-num-addition empty-cell"></td> 
               <td id="diff-959f740e9f05de066c413e58d304c511R37" data-line-number="37" class="blob-num blob-num-addition js-linkable-line-number"></td> 
               <td class="blob-code blob-code-addition"> <span class="blob-code-inner">+ <span class="pl-k">protected</span> <span class="pl-k">double</span>[] keys;</span> </td> 
              </tr> 
              <tr> 
               <td class="blob-num blob-num-addition empty-cell"></td> 
               <td id="diff-959f740e9f05de066c413e58d304c511R38" data-line-number="38" class="blob-num blob-num-addition js-linkable-line-number"></td> 
               <td class="blob-code blob-code-addition"> <span class="blob-code-inner">+ <span class="pl-k">protected</span> <span class="pl-smi">TDigestState</span> state;</span> </td> 
              </tr> 
              <tr> 
               <td class="blob-num blob-num-addition empty-cell"></td> 
               <td id="diff-959f740e9f05de066c413e58d304c511R39" data-line-number="39" class="blob-num blob-num-addition js-linkable-line-number"></td> 
               <td class="blob-code blob-code-addition"> <span class="blob-code-inner">+ <span class="pl-k">private</span> <span class="pl-k">boolean</span> keyed;</span> </td> 
              </tr> 
              <tr> 
               <td class="blob-num blob-num-addition empty-cell"></td> 
               <td id="diff-959f740e9f05de066c413e58d304c511R40" data-line-number="40" class="blob-num blob-num-addition js-linkable-line-number"></td> 
               <td class="blob-code blob-code-addition"> <span class="blob-code-inner">+</span> </td> 
              </tr> 
              <tr> 
               <td class="blob-num blob-num-addition empty-cell"></td> 
               <td id="diff-959f740e9f05de066c413e58d304c511R41" data-line-number="41" class="blob-num blob-num-addition js-linkable-line-number"></td> 
               <td class="blob-code blob-code-addition"> <span class="blob-code-inner">+ <span class="pl-en">AbstractInternalPercentiles</span>() {} <span class="pl-c"><span class="pl-c">//</span> for serialization</span></span> </td> 
              </tr> 
              <tr> 
               <td class="blob-num blob-num-addition empty-cell"></td> 
               <td id="diff-959f740e9f05de066c413e58d304c511R42" data-line-number="42" class="blob-num blob-num-addition js-linkable-line-number"></td> 
               <td class="blob-code blob-code-addition"> <span class="blob-code-inner">+</span> </td> 
              </tr> 
              <tr> 
               <td class="blob-num blob-num-addition empty-cell"></td> 
               <td id="diff-959f740e9f05de066c413e58d304c511R43" data-line-number="43" class="blob-num blob-num-addition js-linkable-line-number"></td> 
               <td class="blob-code blob-code-addition"> <span class="blob-code-inner">+ <span class="pl-k">public</span> <span class="pl-en">AbstractInternalPercentiles</span>(<span class="pl-smi">String</span> <span class="pl-v">name</span>, <span class="pl-k">double</span>[] <span class="pl-v">keys</span>, <span class="pl-smi">TDigestState</span> <span class="pl-v">state</span>, <span class="pl-k">boolean</span> <span class="pl-v">keyed</span>) {</span> </td> 
              </tr> 
              <tr> 
               <td class="blob-num blob-num-addition empty-cell"></td> 
               <td id="diff-959f740e9f05de066c413e58d304c511R44" data-line-number="44" class="blob-num blob-num-addition js-linkable-line-number"></td> 
               <td class="blob-code blob-code-addition"> <span class="blob-code-inner">+ <span class="pl-c1">super</span>(name);</span> </td> 
              </tr> 
              <tr> 
               <td class="blob-num blob-num-addition empty-cell"></td> 
               <td id="diff-959f740e9f05de066c413e58d304c511R45" data-line-number="45" class="blob-num blob-num-addition js-linkable-line-number"></td> 
               <td class="blob-code blob-code-addition"> <span class="blob-code-inner">+ <span class="pl-c1">this</span><span class="pl-k">.</span>keys <span class="pl-k">=</span> keys;</span> </td> 
              </tr> 
              <tr> 
               <td class="blob-num blob-num-addition empty-cell"></td> 
               <td id="diff-959f740e9f05de066c413e58d304c511R46" data-line-number="46" class="blob-num blob-num-addition js-linkable-line-number"></td> 
               <td class="blob-code blob-code-addition"> <span class="blob-code-inner">+ <span class="pl-c1">this</span><span class="pl-k">.</span>state <span class="pl-k">=</span> state;</span> </td> 
              </tr> 
              <tr> 
               <td class="blob-num blob-num-addition empty-cell"></td> 
               <td id="diff-959f740e9f05de066c413e58d304c511R47" data-line-number="47" class="blob-num blob-num-addition js-linkable-line-number"></td> 
               <td class="blob-code blob-code-addition"> <span class="blob-code-inner">+ <span class="pl-c1">this</span><span class="pl-k">.</span>keyed <span class="pl-k">=</span> keyed;</span> </td> 
              </tr> 
              <tr> 
               <td class="blob-num blob-num-addition empty-cell"></td> 
               <td id="diff-959f740e9f05de066c413e58d304c511R48" data-line-number="48" class="blob-num blob-num-addition js-linkable-line-number"></td> 
               <td class="blob-code blob-code-addition"> <span class="blob-code-inner">+ }</span> </td> 
              </tr> 
              <tr> 
               <td class="blob-num blob-num-addition empty-cell"></td> 
               <td id="diff-959f740e9f05de066c413e58d304c511R49" data-line-number="49" class="blob-num blob-num-addition js-linkable-line-number"></td> 
               <td class="blob-code blob-code-addition"> <span class="blob-code-inner">+</span> </td> 
              </tr> 
              <tr> 
               <td class="blob-num blob-num-addition empty-cell"></td> 
               <td id="diff-959f740e9f05de066c413e58d304c511R50" data-line-number="50" class="blob-num blob-num-addition js-linkable-line-number"></td> 
               <td class="blob-code blob-code-addition"> <span class="blob-code-inner">+ <span class="pl-k">@Override</span></span> </td> 
              </tr> 
              <tr> 
               <td class="blob-num blob-num-addition empty-cell"></td> 
               <td id="diff-959f740e9f05de066c413e58d304c511R51" data-line-number="51" class="blob-num blob-num-addition js-linkable-line-number"></td> 
               <td class="blob-code blob-code-addition"> <span class="blob-code-inner">+ <span class="pl-k">public</span> <span class="pl-k">double</span> <span class="pl-en">value</span>(<span class="pl-smi">String</span> <span class="pl-v">name</span>) {</span> </td> 
              </tr> 
              <tr> 
               <td class="blob-num blob-num-addition empty-cell"></td> 
               <td id="diff-959f740e9f05de066c413e58d304c511R52" data-line-number="52" class="blob-num blob-num-addition js-linkable-line-number"></td> 
               <td class="blob-code blob-code-addition"> <span class="blob-code-inner">+ <span class="pl-k">return</span> value(<span class="pl-smi">Double</span><span class="pl-k">.</span>parseDouble(name));</span> </td> 
              </tr> 
              <tr> 
               <td class="blob-num blob-num-addition empty-cell"></td> 
               <td id="diff-959f740e9f05de066c413e58d304c511R53" data-line-number="53" class="blob-num blob-num-addition js-linkable-line-number"></td> 
               <td class="blob-code blob-code-addition"> <span class="blob-code-inner">+ }</span> </td> 
              </tr> 
              <tr> 
               <td class="blob-num blob-num-addition empty-cell"></td> 
               <td id="diff-959f740e9f05de066c413e58d304c511R54" data-line-number="54" class="blob-num blob-num-addition js-linkable-line-number"></td> 
               <td class="blob-code blob-code-addition"> <span class="blob-code-inner">+ </span> </td> 
              </tr> 
              <tr> 
               <td class="blob-num blob-num-addition empty-cell"></td> 
               <td id="diff-959f740e9f05de066c413e58d304c511R55" data-line-number="55" class="blob-num blob-num-addition js-linkable-line-number"></td> 
               <td class="blob-code blob-code-addition"> <span class="blob-code-inner">+ <span class="pl-k">public</span> <span class="pl-k">abstract</span> <span class="pl-k">double</span> <span class="pl-en">value</span>(<span class="pl-k">double</span> <span class="pl-v">key</span>);</span> </td> 
              </tr> 
              <tr> 
               <td class="blob-num blob-num-addition empty-cell"></td> 
               <td id="diff-959f740e9f05de066c413e58d304c511R56" data-line-number="56" class="blob-num blob-num-addition js-linkable-line-number"></td> 
               <td class="blob-code blob-code-addition"> <span class="blob-code-inner">+</span> </td> 
              </tr> 
              <tr> 
               <td class="blob-num blob-num-addition empty-cell"></td> 
               <td id="diff-959f740e9f05de066c413e58d304c511R57" data-line-number="57" class="blob-num blob-num-addition js-linkable-line-number"></td> 
               <td class="blob-code blob-code-addition"> <span class="blob-code-inner">+ <span class="pl-k">@Override</span></span> </td> 
              </tr> 
              <tr> 
               <td class="blob-num blob-num-addition empty-cell"></td> 
               <td id="diff-959f740e9f05de066c413e58d304c511R58" data-line-number="58" class="blob-num blob-num-addition js-linkable-line-number"></td> 
               <td class="blob-code blob-code-addition"> <span class="blob-code-inner">+ <span class="pl-k">public</span> <span class="pl-smi">AbstractInternalPercentiles</span> <span class="pl-en">reduce</span>(<span class="pl-smi">ReduceContext</span> <span class="pl-v">reduceContext</span>) {</span> </td> 
              </tr> 
              <tr> 
               <td class="blob-num blob-num-addition empty-cell"></td> 
               <td id="diff-959f740e9f05de066c413e58d304c511R59" data-line-number="59" class="blob-num blob-num-addition js-linkable-line-number"></td> 
               <td class="blob-code blob-code-addition"> <span class="blob-code-inner">+ <span class="pl-k">List&lt;<span class="pl-smi">InternalAggregation</span>&gt;</span> aggregations <span class="pl-k">=</span> reduceContext<span class="pl-k">.</span>aggregations();</span> </td> 
              </tr> 
              <tr> 
               <td class="blob-num blob-num-addition empty-cell"></td> 
               <td id="diff-959f740e9f05de066c413e58d304c511R60" data-line-number="60" class="blob-num blob-num-addition js-linkable-line-number"></td> 
               <td class="blob-code blob-code-addition"> <span class="blob-code-inner">+ <span class="pl-smi">TDigestState</span> merged <span class="pl-k">=</span> <span class="pl-c1">null</span>;</span> </td> 
              </tr> 
              <tr> 
               <td class="blob-num blob-num-addition empty-cell"></td> 
               <td id="diff-959f740e9f05de066c413e58d304c511R61" data-line-number="61" class="blob-num blob-num-addition js-linkable-line-number"></td> 
               <td class="blob-code blob-code-addition"> <span class="blob-code-inner">+ <span class="pl-k">for</span> (<span class="pl-smi">InternalAggregation</span> aggregation <span class="pl-k">:</span> aggregations) {</span> </td> 
              </tr> 
              <tr> 
               <td class="blob-num blob-num-addition empty-cell"></td> 
               <td id="diff-959f740e9f05de066c413e58d304c511R62" data-line-number="62" class="blob-num blob-num-addition js-linkable-line-number"></td> 
               <td class="blob-code blob-code-addition"> <span class="blob-code-inner">+ <span class="pl-k">final</span> <span class="pl-smi">AbstractInternalPercentiles</span> percentiles <span class="pl-k">=</span> (<span class="pl-smi">AbstractInternalPercentiles</span>) aggregation;</span> </td> 
              </tr> 
              <tr> 
               <td class="blob-num blob-num-addition empty-cell"></td> 
               <td id="diff-959f740e9f05de066c413e58d304c511R63" data-line-number="63" class="blob-num blob-num-addition js-linkable-line-number"></td> 
               <td class="blob-code blob-code-addition"> <span class="blob-code-inner">+ <span class="pl-k">if</span> (merged <span class="pl-k">==</span> <span class="pl-c1">null</span>) {</span> </td> 
              </tr> 
              <tr> 
               <td class="blob-num blob-num-addition empty-cell"></td> 
               <td id="diff-959f740e9f05de066c413e58d304c511R64" data-line-number="64" class="blob-num blob-num-addition js-linkable-line-number"></td> 
               <td class="blob-code blob-code-addition"> <span class="blob-code-inner">+ merged <span class="pl-k">=</span> <span class="pl-k">new</span> <span class="pl-smi">TDigestState</span>(percentiles<span class="pl-k">.</span>state<span class="pl-k">.</span>compression());</span> </td> 
              </tr> 
              <tr> 
               <td class="blob-num blob-num-addition empty-cell"></td> 
               <td id="diff-959f740e9f05de066c413e58d304c511R65" data-line-number="65" class="blob-num blob-num-addition js-linkable-line-number"></td> 
               <td class="blob-code blob-code-addition"> <span class="blob-code-inner">+ }</span> </td> 
              </tr> 
              <tr> 
               <td class="blob-num blob-num-addition empty-cell"></td> 
               <td id="diff-959f740e9f05de066c413e58d304c511R66" data-line-number="66" class="blob-num blob-num-addition js-linkable-line-number"></td> 
               <td class="blob-code blob-code-addition"> <span class="blob-code-inner">+ merged<span class="pl-k">.</span>add(percentiles<span class="pl-k">.</span>state);</span> </td> 
              </tr> 
              <tr> 
               <td class="blob-num blob-num-addition empty-cell"></td> 
               <td id="diff-959f740e9f05de066c413e58d304c511R67" data-line-number="67" class="blob-num blob-num-addition js-linkable-line-number"></td> 
               <td class="blob-code blob-code-addition"> <span class="blob-code-inner">+ }</span> </td> 
              </tr> 
              <tr> 
               <td class="blob-num blob-num-addition empty-cell"></td> 
               <td id="diff-959f740e9f05de066c413e58d304c511R68" data-line-number="68" class="blob-num blob-num-addition js-linkable-line-number"></td> 
               <td class="blob-code blob-code-addition"> <span class="blob-code-inner">+ <span class="pl-k">return</span> createReduced(getName(), keys, merged, keyed);</span> </td> 
              </tr> 
              <tr> 
               <td class="blob-num blob-num-addition empty-cell"></td> 
               <td id="diff-959f740e9f05de066c413e58d304c511R69" data-line-number="69" class="blob-num blob-num-addition js-linkable-line-number"></td> 
               <td class="blob-code blob-code-addition"> <span class="blob-code-inner">+ }</span> </td> 
              </tr> 
              <tr> 
               <td class="blob-num blob-num-addition empty-cell"></td> 
               <td id="diff-959f740e9f05de066c413e58d304c511R70" data-line-number="70" class="blob-num blob-num-addition js-linkable-line-number"></td> 
               <td class="blob-code blob-code-addition"> <span class="blob-code-inner">+</span> </td> 
              </tr> 
              <tr> 
               <td class="blob-num blob-num-addition empty-cell"></td> 
               <td id="diff-959f740e9f05de066c413e58d304c511R71" data-line-number="71" class="blob-num blob-num-addition js-linkable-line-number"></td> 
               <td class="blob-code blob-code-addition"> <span class="blob-code-inner">+ <span class="pl-k">protected</span> <span class="pl-k">abstract</span> <span class="pl-smi">AbstractInternalPercentiles</span> <span class="pl-en">createReduced</span>(<span class="pl-smi">String</span> <span class="pl-v">name</span>, <span class="pl-k">double</span>[] <span class="pl-v">keys</span>, <span class="pl-smi">TDigestState</span> <span class="pl-v">merged</span>, <span class="pl-k">boolean</span> <span class="pl-v">keyed</span>);</span> </td> 
              </tr> 
              <tr> 
               <td class="blob-num blob-num-addition empty-cell"></td> 
               <td id="diff-959f740e9f05de066c413e58d304c511R72" data-line-number="72" class="blob-num blob-num-addition js-linkable-line-number"></td> 
               <td class="blob-code blob-code-addition"> <span class="blob-code-inner">+</span> </td> 
              </tr> 
              <tr> 
               <td class="blob-num blob-num-addition empty-cell"></td> 
               <td id="diff-959f740e9f05de066c413e58d304c511R73" data-line-number="73" class="blob-num blob-num-addition js-linkable-line-number"></td> 
               <td class="blob-code blob-code-addition"> <span class="blob-code-inner">+ <span class="pl-k">@Override</span></span> </td> 
              </tr> 
              <tr> 
               <td class="blob-num blob-num-addition empty-cell"></td> 
               <td id="diff-959f740e9f05de066c413e58d304c511R74" data-line-number="74" class="blob-num blob-num-addition js-linkable-line-number"></td> 
               <td class="blob-code blob-code-addition"> <span class="blob-code-inner">+ <span class="pl-k">public</span> <span class="pl-k">void</span> <span class="pl-en">readFrom</span>(<span class="pl-smi">StreamInput</span> <span class="pl-v">in</span>) <span class="pl-k">throws</span> <span class="pl-smi">IOException</span> {</span> </td> 
              </tr> 
              <tr> 
               <td class="blob-num blob-num-addition empty-cell"></td> 
               <td id="diff-959f740e9f05de066c413e58d304c511R75" data-line-number="75" class="blob-num blob-num-addition js-linkable-line-number"></td> 
               <td class="blob-code blob-code-addition"> <span class="blob-code-inner">+ name <span class="pl-k">=</span> in<span class="pl-k">.</span>readString();</span> </td> 
              </tr> 
              <tr> 
               <td class="blob-num blob-num-addition empty-cell"></td> 
               <td id="diff-959f740e9f05de066c413e58d304c511R76" data-line-number="76" class="blob-num blob-num-addition js-linkable-line-number"></td> 
               <td class="blob-code blob-code-addition"> <span class="blob-code-inner">+ valueFormatter <span class="pl-k">=</span> <span class="pl-smi">ValueFormatterStreams</span><span class="pl-k">.</span>readOptional(in);</span> </td> 
              </tr> 
              <tr> 
               <td class="blob-num blob-num-addition empty-cell"></td> 
               <td id="diff-959f740e9f05de066c413e58d304c511R77" data-line-number="77" class="blob-num blob-num-addition js-linkable-line-number"></td> 
               <td class="blob-code blob-code-addition"> <span class="blob-code-inner">+ <span class="pl-k">if</span> (in<span class="pl-k">.</span>getVersion()<span class="pl-k">.</span>before(<span class="pl-smi">Version</span><span class="pl-c1"><span class="pl-k">.</span>V_1_2_0</span>)) {</span> </td> 
              </tr> 
              <tr> 
               <td class="blob-num blob-num-addition empty-cell"></td> 
               <td id="diff-959f740e9f05de066c413e58d304c511R78" data-line-number="78" class="blob-num blob-num-addition js-linkable-line-number"></td> 
               <td class="blob-code blob-code-addition"> <span class="blob-code-inner">+ <span class="pl-k">final</span> <span class="pl-k">byte</span> id <span class="pl-k">=</span> in<span class="pl-k">.</span>readByte();</span> </td> 
              </tr> 
              <tr> 
               <td class="blob-num blob-num-addition empty-cell"></td> 
               <td id="diff-959f740e9f05de066c413e58d304c511R79" data-line-number="79" class="blob-num blob-num-addition js-linkable-line-number"></td> 
               <td class="blob-code blob-code-addition"> <span class="blob-code-inner">+ <span class="pl-k">if</span> (id <span class="pl-k">!=</span> <span class="pl-c1">0</span>) {</span> </td> 
              </tr> 
              <tr> 
               <td class="blob-num blob-num-addition empty-cell"></td> 
               <td id="diff-959f740e9f05de066c413e58d304c511R80" data-line-number="80" class="blob-num blob-num-addition js-linkable-line-number"></td> 
               <td class="blob-code blob-code-addition"> <span class="blob-code-inner">+ <span class="pl-k">throw</span> <span class="pl-k">new</span> <span class="pl-smi">ElasticsearchIllegalArgumentException</span>(<span class="pl-s"><span class="pl-pds">"</span>Unexpected percentiles aggregator id [<span class="pl-pds">"</span></span> <span class="pl-k">+</span> id <span class="pl-k">+</span> <span class="pl-s"><span class="pl-pds">"</span>]<span class="pl-pds">"</span></span>);</span> </td> 
              </tr> 
              <tr> 
               <td class="blob-num blob-num-addition empty-cell"></td> 
               <td id="diff-959f740e9f05de066c413e58d304c511R81" data-line-number="81" class="blob-num blob-num-addition js-linkable-line-number"></td> 
               <td class="blob-code blob-code-addition"> <span class="blob-code-inner">+ }</span> </td> 
              </tr> 
              <tr> 
               <td class="blob-num blob-num-addition empty-cell"></td> 
               <td id="diff-959f740e9f05de066c413e58d304c511R82" data-line-number="82" class="blob-num blob-num-addition js-linkable-line-number"></td> 
               <td class="blob-code blob-code-addition"> <span class="blob-code-inner">+ }</span> </td> 
              </tr> 
              <tr> 
               <td class="blob-num blob-num-addition empty-cell"></td> 
               <td id="diff-959f740e9f05de066c413e58d304c511R83" data-line-number="83" class="blob-num blob-num-addition js-linkable-line-number"></td> 
               <td class="blob-code blob-code-addition"> <span class="blob-code-inner">+ keys <span class="pl-k">=</span> <span class="pl-k">new</span> <span class="pl-smi">double</span>[in<span class="pl-k">.</span>readInt()];</span> </td> 
              </tr> 
              <tr> 
               <td class="blob-num blob-num-addition empty-cell"></td> 
               <td id="diff-959f740e9f05de066c413e58d304c511R84" data-line-number="84" class="blob-num blob-num-addition js-linkable-line-number"></td> 
               <td class="blob-code blob-code-addition"> <span class="blob-code-inner">+ <span class="pl-k">for</span> (<span class="pl-k">int</span> i <span class="pl-k">=</span> <span class="pl-c1">0</span>; i <span class="pl-k">&lt;</span> keys<span class="pl-k">.</span>length; <span class="pl-k">++</span>i) {</span> </td> 
              </tr> 
              <tr> 
               <td class="blob-num blob-num-addition empty-cell"></td> 
               <td id="diff-959f740e9f05de066c413e58d304c511R85" data-line-number="85" class="blob-num blob-num-addition js-linkable-line-number"></td> 
               <td class="blob-code blob-code-addition"> <span class="blob-code-inner">+ keys[i] <span class="pl-k">=</span> in<span class="pl-k">.</span>readDouble();</span> </td> 
              </tr> 
              <tr> 
               <td class="blob-num blob-num-addition empty-cell"></td> 
               <td id="diff-959f740e9f05de066c413e58d304c511R86" data-line-number="86" class="blob-num blob-num-addition js-linkable-line-number"></td> 
               <td class="blob-code blob-code-addition"> <span class="blob-code-inner">+ }</span> </td> 
              </tr> 
              <tr> 
               <td class="blob-num blob-num-addition empty-cell"></td> 
               <td id="diff-959f740e9f05de066c413e58d304c511R87" data-line-number="87" class="blob-num blob-num-addition js-linkable-line-number"></td> 
               <td class="blob-code blob-code-addition"> <span class="blob-code-inner">+ state <span class="pl-k">=</span> <span class="pl-smi">TDigestState</span><span class="pl-k">.</span>read(in);</span> </td> 
              </tr> 
              <tr> 
               <td class="blob-num blob-num-addition empty-cell"></td> 
               <td id="diff-959f740e9f05de066c413e58d304c511R88" data-line-number="88" class="blob-num blob-num-addition js-linkable-line-number"></td> 
               <td class="blob-code blob-code-addition"> <span class="blob-code-inner">+ keyed <span class="pl-k">=</span> in<span class="pl-k">.</span>readBoolean();</span> </td> 
              </tr> 
              <tr> 
               <td class="blob-num blob-num-addition empty-cell"></td> 
               <td id="diff-959f740e9f05de066c413e58d304c511R89" data-line-number="89" class="blob-num blob-num-addition js-linkable-line-number"></td> 
               <td class="blob-code blob-code-addition"> <span class="blob-code-inner">+ }</span> </td> 
              </tr> 
              <tr> 
               <td class="blob-num blob-num-addition empty-cell"></td> 
               <td id="diff-959f740e9f05de066c413e58d304c511R90" data-line-number="90" class="blob-num blob-num-addition js-linkable-line-number"></td> 
               <td class="blob-code blob-code-addition"> <span class="blob-code-inner">+</span> </td> 
              </tr> 
              <tr> 
               <td class="blob-num blob-num-addition empty-cell"></td> 
               <td id="diff-959f740e9f05de066c413e58d304c511R91" data-line-number="91" class="blob-num blob-num-addition js-linkable-line-number"></td> 
               <td class="blob-code blob-code-addition"> <span class="blob-code-inner">+ <span class="pl-k">@Override</span></span> </td> 
              </tr> 
              <tr> 
               <td class="blob-num blob-num-addition empty-cell"></td> 
               <td id="diff-959f740e9f05de066c413e58d304c511R92" data-line-number="92" class="blob-num blob-num-addition js-linkable-line-number"></td> 
               <td class="blob-code blob-code-addition"> <span class="blob-code-inner">+ <span class="pl-k">public</span> <span class="pl-k">void</span> <span class="pl-en">writeTo</span>(<span class="pl-smi">StreamOutput</span> <span class="pl-v">out</span>) <span class="pl-k">throws</span> <span class="pl-smi">IOException</span> {</span> </td> 
              </tr> 
              <tr> 
               <td class="blob-num blob-num-addition empty-cell"></td> 
               <td id="diff-959f740e9f05de066c413e58d304c511R93" data-line-number="93" class="blob-num blob-num-addition js-linkable-line-number"></td> 
               <td class="blob-code blob-code-addition"> <span class="blob-code-inner">+ out<span class="pl-k">.</span>writeString(name);</span> </td> 
              </tr> 
              <tr> 
               <td class="blob-num blob-num-addition empty-cell"></td> 
               <td id="diff-959f740e9f05de066c413e58d304c511R94" data-line-number="94" class="blob-num blob-num-addition js-linkable-line-number"></td> 
               <td class="blob-code blob-code-addition"> <span class="blob-code-inner">+ <span class="pl-smi">ValueFormatterStreams</span><span class="pl-k">.</span>writeOptional(valueFormatter, out);</span> </td> 
              </tr> 
              <tr> 
               <td class="blob-num blob-num-addition empty-cell"></td> 
               <td id="diff-959f740e9f05de066c413e58d304c511R95" data-line-number="95" class="blob-num blob-num-addition js-linkable-line-number"></td> 
               <td class="blob-code blob-code-addition"> <span class="blob-code-inner">+ <span class="pl-k">if</span> (out<span class="pl-k">.</span>getVersion()<span class="pl-k">.</span>before(<span class="pl-smi">Version</span><span class="pl-c1"><span class="pl-k">.</span>V_1_2_0</span>)) {</span> </td> 
              </tr> 
              <tr> 
               <td class="blob-num blob-num-addition empty-cell"></td> 
               <td id="diff-959f740e9f05de066c413e58d304c511R96" data-line-number="96" class="blob-num blob-num-addition js-linkable-line-number"></td> 
               <td class="blob-code blob-code-addition"> <span class="blob-code-inner">+ out<span class="pl-k">.</span>writeByte((<span class="pl-k">byte</span>) <span class="pl-c1">0</span>);</span> </td> 
              </tr> 
              <tr> 
               <td class="blob-num blob-num-addition empty-cell"></td> 
               <td id="diff-959f740e9f05de066c413e58d304c511R97" data-line-number="97" class="blob-num blob-num-addition js-linkable-line-number"></td> 
               <td class="blob-code blob-code-addition"> <span class="blob-code-inner">+ }</span> </td> 
              </tr> 
              <tr> 
               <td class="blob-num blob-num-addition empty-cell"></td> 
               <td id="diff-959f740e9f05de066c413e58d304c511R98" data-line-number="98" class="blob-num blob-num-addition js-linkable-line-number"></td> 
               <td class="blob-code blob-code-addition"> <span class="blob-code-inner">+ out<span class="pl-k">.</span>writeInt(keys<span class="pl-k">.</span>length);</span> </td> 
              </tr> 
              <tr> 
               <td class="blob-num blob-num-addition empty-cell"></td> 
               <td id="diff-959f740e9f05de066c413e58d304c511R99" data-line-number="99" class="blob-num blob-num-addition js-linkable-line-number"></td> 
               <td class="blob-code blob-code-addition"> <span class="blob-code-inner">+ <span class="pl-k">for</span> (<span class="pl-k">int</span> i <span class="pl-k">=</span> <span class="pl-c1">0</span> ; i <span class="pl-k">&lt;</span> keys<span class="pl-k">.</span>length; <span class="pl-k">++</span>i) {</span> </td> 
              </tr> 
              <tr> 
               <td class="blob-num blob-num-addition empty-cell"></td> 
               <td id="diff-959f740e9f05de066c413e58d304c511R100" data-line-number="100" class="blob-num blob-num-addition js-linkable-line-number"></td> 
               <td class="blob-code blob-code-addition"> <span class="blob-code-inner">+ out<span class="pl-k">.</span>writeDouble(keys[i]);</span> </td> 
              </tr> 
              <tr> 
               <td class="blob-num blob-num-addition empty-cell"></td> 
               <td id="diff-959f740e9f05de066c413e58d304c511R101" data-line-number="101" class="blob-num blob-num-addition js-linkable-line-number"></td> 
               <td class="blob-code blob-code-addition"> <span class="blob-code-inner">+ }</span> </td> 
              </tr> 
              <tr> 
               <td class="blob-num blob-num-addition empty-cell"></td> 
               <td id="diff-959f740e9f05de066c413e58d304c511R102" data-line-number="102" class="blob-num blob-num-addition js-linkable-line-number"></td> 
               <td class="blob-code blob-code-addition"> <span class="blob-code-inner">+ <span class="pl-smi">TDigestState</span><span class="pl-k">.</span>write(state, out);</span> </td> 
              </tr> 
              <tr> 
               <td class="blob-num blob-num-addition empty-cell"></td> 
               <td id="diff-959f740e9f05de066c413e58d304c511R103" data-line-number="103" class="blob-num blob-num-addition js-linkable-line-number"></td> 
               <td class="blob-code blob-code-addition"> <span class="blob-code-inner">+ out<span class="pl-k">.</span>writeBoolean(keyed);</span> </td> 
              </tr> 
              <tr> 
               <td class="blob-num blob-num-addition empty-cell"></td> 
               <td id="diff-959f740e9f05de066c413e58d304c511R104" data-line-number="104" class="blob-num blob-num-addition js-linkable-line-number"></td> 
               <td class="blob-code blob-code-addition"> <span class="blob-code-inner">+ }</span> </td> 
              </tr> 
              <tr> 
               <td class="blob-num blob-num-addition empty-cell"></td> 
               <td id="diff-959f740e9f05de066c413e58d304c511R105" data-line-number="105" class="blob-num blob-num-addition js-linkable-line-number"></td> 
               <td class="blob-code blob-code-addition"> <span class="blob-code-inner">+</span> </td> 
              </tr> 
              <tr> 
               <td class="blob-num blob-num-addition empty-cell"></td> 
               <td id="diff-959f740e9f05de066c413e58d304c511R106" data-line-number="106" class="blob-num blob-num-addition js-linkable-line-number"></td> 
               <td class="blob-code blob-code-addition"> <span class="blob-code-inner">+ <span class="pl-k">@Override</span></span> </td> 
              </tr> 
              <tr> 
               <td class="blob-num blob-num-addition empty-cell"></td> 
               <td id="diff-959f740e9f05de066c413e58d304c511R107" data-line-number="107" class="blob-num blob-num-addition js-linkable-line-number"></td> 
               <td class="blob-code blob-code-addition"> <span class="blob-code-inner">+ <span class="pl-k">public</span> <span class="pl-smi">XContentBuilder</span> <span class="pl-en">toXContent</span>(<span class="pl-smi">XContentBuilder</span> <span class="pl-v">builder</span>, <span class="pl-smi">Params</span> <span class="pl-v">params</span>) <span class="pl-k">throws</span> <span class="pl-smi">IOException</span> {</span> </td> 
              </tr> 
              <tr> 
               <td class="blob-num blob-num-addition empty-cell"></td> 
               <td id="diff-959f740e9f05de066c413e58d304c511R108" data-line-number="108" class="blob-num blob-num-addition js-linkable-line-number"></td> 
               <td class="blob-code blob-code-addition"> <span class="blob-code-inner">+ builder<span class="pl-k">.</span>startObject(name);</span> </td> 
              </tr> 
              <tr> 
               <td class="blob-num blob-num-addition empty-cell"></td> 
               <td id="diff-959f740e9f05de066c413e58d304c511R109" data-line-number="109" class="blob-num blob-num-addition js-linkable-line-number"></td> 
               <td class="blob-code blob-code-addition"> <span class="blob-code-inner">+ <span class="pl-k">if</span> (keyed) {</span> </td> 
              </tr> 
              <tr> 
               <td class="blob-num blob-num-addition empty-cell"></td> 
               <td id="diff-959f740e9f05de066c413e58d304c511R110" data-line-number="110" class="blob-num blob-num-addition js-linkable-line-number"></td> 
               <td class="blob-code blob-code-addition"> <span class="blob-code-inner">+ builder<span class="pl-k">.</span>startObject(<span class="pl-smi">CommonFields</span><span class="pl-c1"><span class="pl-k">.</span>VALUES</span>);</span> </td> 
              </tr> 
              <tr> 
               <td class="blob-num blob-num-addition empty-cell"></td> 
               <td id="diff-959f740e9f05de066c413e58d304c511R111" data-line-number="111" class="blob-num blob-num-addition js-linkable-line-number"></td> 
               <td class="blob-code blob-code-addition"> <span class="blob-code-inner">+ <span class="pl-k">for</span>(<span class="pl-k">int</span> i <span class="pl-k">=</span> <span class="pl-c1">0</span>; i <span class="pl-k">&lt;</span> keys<span class="pl-k">.</span>length; <span class="pl-k">++</span>i) {</span> </td> 
              </tr> 
              <tr> 
               <td class="blob-num blob-num-addition empty-cell"></td> 
               <td id="diff-959f740e9f05de066c413e58d304c511R112" data-line-number="112" class="blob-num blob-num-addition js-linkable-line-number"></td> 
               <td class="blob-code blob-code-addition"> <span class="blob-code-inner">+ <span class="pl-smi">String</span> key <span class="pl-k">=</span> <span class="pl-smi">String</span><span class="pl-k">.</span>valueOf(keys[i]);</span> </td> 
              </tr> 
              <tr> 
               <td class="blob-num blob-num-addition empty-cell"></td> 
               <td id="diff-959f740e9f05de066c413e58d304c511R113" data-line-number="113" class="blob-num blob-num-addition js-linkable-line-number"></td> 
               <td class="blob-code blob-code-addition"> <span class="blob-code-inner">+ <span class="pl-k">double</span> value <span class="pl-k">=</span> value(keys[i]);</span> </td> 
              </tr> 
              <tr> 
               <td class="blob-num blob-num-addition empty-cell"></td> 
               <td id="diff-959f740e9f05de066c413e58d304c511R114" data-line-number="114" class="blob-num blob-num-addition js-linkable-line-number"></td> 
               <td class="blob-code blob-code-addition"> <span class="blob-code-inner">+ builder<span class="pl-k">.</span>field(key, value);</span> </td> 
              </tr> 
              <tr> 
               <td class="blob-num blob-num-addition empty-cell"></td> 
               <td id="diff-959f740e9f05de066c413e58d304c511R115" data-line-number="115" class="blob-num blob-num-addition js-linkable-line-number"></td> 
               <td class="blob-code blob-code-addition"> <span class="blob-code-inner">+ <span class="pl-k">if</span> (valueFormatter <span class="pl-k">!=</span> <span class="pl-c1">null</span>) {</span> </td> 
              </tr> 
              <tr> 
               <td class="blob-num blob-num-addition empty-cell"></td> 
               <td id="diff-959f740e9f05de066c413e58d304c511R116" data-line-number="116" class="blob-num blob-num-addition js-linkable-line-number"></td> 
               <td class="blob-code blob-code-addition"> <span class="blob-code-inner">+ builder<span class="pl-k">.</span>field(key <span class="pl-k">+</span> <span class="pl-s"><span class="pl-pds">"</span>_as_string<span class="pl-pds">"</span></span>, valueFormatter<span class="pl-k">.</span>format(value));</span> </td> 
              </tr> 
              <tr> 
               <td class="blob-num blob-num-addition empty-cell"></td> 
               <td id="diff-959f740e9f05de066c413e58d304c511R117" data-line-number="117" class="blob-num blob-num-addition js-linkable-line-number"></td> 
               <td class="blob-code blob-code-addition"> <span class="blob-code-inner">+ }</span> </td> 
              </tr> 
              <tr> 
               <td class="blob-num blob-num-addition empty-cell"></td> 
               <td id="diff-959f740e9f05de066c413e58d304c511R118" data-line-number="118" class="blob-num blob-num-addition js-linkable-line-number"></td> 
               <td class="blob-code blob-code-addition"> <span class="blob-code-inner">+ }</span> </td> 
              </tr> 
              <tr> 
               <td class="blob-num blob-num-addition empty-cell"></td> 
               <td id="diff-959f740e9f05de066c413e58d304c511R119" data-line-number="119" class="blob-num blob-num-addition js-linkable-line-number"></td> 
               <td class="blob-code blob-code-addition"> <span class="blob-code-inner">+ builder<span class="pl-k">.</span>endObject();</span> </td> 
              </tr> 
              <tr> 
               <td class="blob-num blob-num-addition empty-cell"></td> 
               <td id="diff-959f740e9f05de066c413e58d304c511R120" data-line-number="120" class="blob-num blob-num-addition js-linkable-line-number"></td> 
               <td class="blob-code blob-code-addition"> <span class="blob-code-inner">+ } <span class="pl-k">else</span> {</span> </td> 
              </tr> 
              <tr> 
               <td class="blob-num blob-num-addition empty-cell"></td> 
               <td id="diff-959f740e9f05de066c413e58d304c511R121" data-line-number="121" class="blob-num blob-num-addition js-linkable-line-number"></td> 
               <td class="blob-code blob-code-addition"> <span class="blob-code-inner">+ builder<span class="pl-k">.</span>startArray(<span class="pl-smi">CommonFields</span><span class="pl-c1"><span class="pl-k">.</span>VALUES</span>);</span> </td> 
              </tr> 
              <tr> 
               <td class="blob-num blob-num-addition empty-cell"></td> 
               <td id="diff-959f740e9f05de066c413e58d304c511R122" data-line-number="122" class="blob-num blob-num-addition js-linkable-line-number"></td> 
               <td class="blob-code blob-code-addition"> <span class="blob-code-inner">+ <span class="pl-k">for</span> (<span class="pl-k">int</span> i <span class="pl-k">=</span> <span class="pl-c1">0</span>; i <span class="pl-k">&lt;</span> keys<span class="pl-k">.</span>length; i<span class="pl-k">++</span>) {</span> </td> 
              </tr> 
              <tr> 
               <td class="blob-num blob-num-addition empty-cell"></td> 
               <td id="diff-959f740e9f05de066c413e58d304c511R123" data-line-number="123" class="blob-num blob-num-addition js-linkable-line-number"></td> 
               <td class="blob-code blob-code-addition"> <span class="blob-code-inner">+ <span class="pl-k">double</span> value <span class="pl-k">=</span> value(keys[i]);</span> </td> 
              </tr> 
              <tr> 
               <td class="blob-num blob-num-addition empty-cell"></td> 
               <td id="diff-959f740e9f05de066c413e58d304c511R124" data-line-number="124" class="blob-num blob-num-addition js-linkable-line-number"></td> 
               <td class="blob-code blob-code-addition"> <span class="blob-code-inner">+ builder<span class="pl-k">.</span>startObject();</span> </td> 
              </tr> 
              <tr> 
               <td class="blob-num blob-num-addition empty-cell"></td> 
               <td id="diff-959f740e9f05de066c413e58d304c511R125" data-line-number="125" class="blob-num blob-num-addition js-linkable-line-number"></td> 
               <td class="blob-code blob-code-addition"> <span class="blob-code-inner">+ builder<span class="pl-k">.</span>field(<span class="pl-smi">CommonFields</span><span class="pl-c1"><span class="pl-k">.</span>KEY</span>, keys[i]);</span> </td> 
              </tr> 
              <tr> 
               <td class="blob-num blob-num-addition empty-cell"></td> 
               <td id="diff-959f740e9f05de066c413e58d304c511R126" data-line-number="126" class="blob-num blob-num-addition js-linkable-line-number"></td> 
               <td class="blob-code blob-code-addition"> <span class="blob-code-inner">+ builder<span class="pl-k">.</span>field(<span class="pl-smi">CommonFields</span><span class="pl-c1"><span class="pl-k">.</span>VALUE</span>, value);</span> </td> 
              </tr> 
              <tr> 
               <td class="blob-num blob-num-addition empty-cell"></td> 
               <td id="diff-959f740e9f05de066c413e58d304c511R127" data-line-number="127" class="blob-num blob-num-addition js-linkable-line-number"></td> 
               <td class="blob-code blob-code-addition"> <span class="blob-code-inner">+ <span class="pl-k">if</span> (valueFormatter <span class="pl-k">!=</span> <span class="pl-c1">null</span>) {</span> </td> 
              </tr> 
              <tr> 
               <td class="blob-num blob-num-addition empty-cell"></td> 
               <td id="diff-959f740e9f05de066c413e58d304c511R128" data-line-number="128" class="blob-num blob-num-addition js-linkable-line-number"></td> 
               <td class="blob-code blob-code-addition"> <span class="blob-code-inner">+ builder<span class="pl-k">.</span>field(<span class="pl-smi">CommonFields</span><span class="pl-c1"><span class="pl-k">.</span>VALUE_AS_STRING</span>, valueFormatter<span class="pl-k">.</span>format(value));</span> </td> 
              </tr> 
              <tr> 
               <td class="blob-num blob-num-addition empty-cell"></td> 
               <td id="diff-959f740e9f05de066c413e58d304c511R129" data-line-number="129" class="blob-num blob-num-addition js-linkable-line-number"></td> 
               <td class="blob-code blob-code-addition"> <span class="blob-code-inner">+ }</span> </td> 
              </tr> 
              <tr> 
               <td class="blob-num blob-num-addition empty-cell"></td> 
               <td id="diff-959f740e9f05de066c413e58d304c511R130" data-line-number="130" class="blob-num blob-num-addition js-linkable-line-number"></td> 
               <td class="blob-code blob-code-addition"> <span class="blob-code-inner">+ builder<span class="pl-k">.</span>endObject();</span> </td> 
              </tr> 
              <tr> 
               <td class="blob-num blob-num-addition empty-cell"></td> 
               <td id="diff-959f740e9f05de066c413e58d304c511R131" data-line-number="131" class="blob-num blob-num-addition js-linkable-line-number"></td> 
               <td class="blob-code blob-code-addition"> <span class="blob-code-inner">+ }</span> </td> 
              </tr> 
              <tr> 
               <td class="blob-num blob-num-addition empty-cell"></td> 
               <td id="diff-959f740e9f05de066c413e58d304c511R132" data-line-number="132" class="blob-num blob-num-addition js-linkable-line-number"></td> 
               <td class="blob-code blob-code-addition"> <span class="blob-code-inner">+ builder<span class="pl-k">.</span>endArray();</span> </td> 
              </tr> 
              <tr> 
               <td class="blob-num blob-num-addition empty-cell"></td> 
               <td id="diff-959f740e9f05de066c413e58d304c511R133" data-line-number="133" class="blob-num blob-num-addition js-linkable-line-number"></td> 
               <td class="blob-code blob-code-addition"> <span class="blob-code-inner">+ }</span> </td> 
              </tr> 
              <tr> 
               <td class="blob-num blob-num-addition empty-cell"></td> 
               <td id="diff-959f740e9f05de066c413e58d304c511R134" data-line-number="134" class="blob-num blob-num-addition js-linkable-line-number"></td> 
               <td class="blob-code blob-code-addition"> <span class="blob-code-inner">+ builder<span class="pl-k">.</span>endObject();</span> </td> 
              </tr> 
              <tr> 
               <td class="blob-num blob-num-addition empty-cell"></td> 
               <td id="diff-959f740e9f05de066c413e58d304c511R135" data-line-number="135" class="blob-num blob-num-addition js-linkable-line-number"></td> 
               <td class="blob-code blob-code-addition"> <span class="blob-code-inner">+ <span class="pl-k">return</span> builder;</span> </td> 
              </tr> 
              <tr> 
               <td class="blob-num blob-num-addition empty-cell"></td> 
               <td id="diff-959f740e9f05de066c413e58d304c511R136" data-line-number="136" class="blob-num blob-num-addition js-linkable-line-number"></td> 
               <td class="blob-code blob-code-addition"> <span class="blob-code-inner">+ }</span> </td> 
              </tr> 
              <tr> 
               <td class="blob-num blob-num-addition empty-cell"></td> 
               <td id="diff-959f740e9f05de066c413e58d304c511R137" data-line-number="137" class="blob-num blob-num-addition js-linkable-line-number"></td> 
               <td class="blob-code blob-code-addition"> <span class="blob-code-inner">+}</span> </td> 
              </tr> 
             </tbody>
            </table> 
           </div> 
          </div> 
         </div> 
        </div> 
        <div class="js-diff-progressive-container"> 
         <include-fragment src="/elastic/elasticsearch/diffs?bytes=12370&amp;commit=556a498bf69193dfcb8b1dd52bfc19be214fd716&amp;lines=310&amp;sha1=83abc0221bc60aa3273629a6e21aa7962d1ec411&amp;sha2=556a498bf69193dfcb8b1dd52bfc19be214fd716&amp;start_entry=7" class="diff-progressive-loader js-diff-progressive-loader mb-4 d-flex flex-items-center flex-justify-center"> 
          <img alt="" class="js-diff-progressive-spinner" height="64" src="https://assets-cdn.github.com/images/spinners/octocat-spinner-128.gif" width="64"> 
          <div class="js-diff-progressive-retry d-none"> 
           <svg aria-hidden="true" class="octicon octicon-alert text-red mr-1" height="16" version="1.1" viewbox="0 0 16 16" width="16">
            <path fill-rule="evenodd" d="M8.865 1.52c-.18-.31-.51-.5-.87-.5s-.69.19-.87.5L.275 13.5c-.18.31-.18.69 0 1 .19.31.52.5.87.5h13.7c.36 0 .69-.19.86-.5.17-.31.18-.69.01-1L8.865 1.52zM8.995 13h-2v-2h2v2zm0-3h-2V6h2v4z" />
           </svg> Oops, something went wrong. 
           <button type="button" class="btn-link js-retry-button">Retry</button> 
          </div> 
         </include-fragment> 
        </div> 
       </div> 
       <button type="button" class="js-toggle-all-file-notes" data-hotkey="i" style="display:none">Toggle all file notes</button> 
       <svg aria-hidden="true" width="340px" height="84px" viewbox="0 0 340 84" version="1.1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" class="diff-placeholder-svg position-absolute bottom-0"> 
        <defs> 
         <clippath id="diff-placeholder"> 
          <rect x="0" y="0" width="67.0175439" height="11.9298746" rx="2"></rect> 
          <rect x="18.9473684" y="47.7194983" width="100.701754" height="11.9298746" rx="2"></rect> 
          <rect x="0" y="71.930126" width="37.8947368" height="11.9298746" rx="2"></rect> 
          <rect x="127.017544" y="48.0703769" width="53.3333333" height="11.9298746" rx="2"></rect> 
          <rect x="187.719298" y="48.0703769" width="72.9824561" height="11.9298746" rx="2"></rect> 
          <rect x="76.8421053" y="0" width="140.350877" height="11.9298746" rx="2"></rect> 
          <rect x="17.8947368" y="23.8597491" width="140.350877" height="11.9298746" rx="2"></rect> 
          <rect x="166.315789" y="23.8597491" width="173.684211" height="11.9298746" rx="2"></rect> 
         </clippath> 
         <lineargradient id="animated-diff-gradient" x1="0" x2="0" y1="0" y2="1" spreadmethod="reflect"> 
          <stop offset="0" stop-color="#eee"></stop> 
          <stop offset="0.2" stop-color="#eee"></stop> 
          <stop offset="0.5" stop-color="#ddd"></stop> 
          <stop offset="0.8" stop-color="#eee"></stop> 
          <stop offset="1" stop-color="#eee"></stop> 
          <animatetransform attributename="y1" values="0%; 100%; 0" dur="1s" repeatcount="3"></animatetransform> 
          <animatetransform attributename="y2" values="100%; 200%; 0" dur="1s" repeatcount="3"></animatetransform> 
         </lineargradient> 
        </defs> 
       </svg> 
       <div id="all_commit_comments" class="js-quote-selection-container "> 
        <div class="commit-comments-heading"> 
         <div id="partial-visible-comments-header"> 
          <span class="float-right"> </span> 
          <h4 class="commit-comment-count"> 0 comments on commit <code class="commit-sha">556a498</code> </h4> 
         </div> 
        </div> 
        <div id="comments" class="comment-holder"> 
         <!-- Rendered timeline since 2014-06-18 04:17:02 --> 
         <div id="partial-timeline-marker" class="js-timeline-marker js-socket-channel js-updatable-content" data-channel="repo:507775:commit:556a498bf69193dfcb8b1dd52bfc19be214fd716" data-url="/elastic/elasticsearch/commit/556a498bf69193dfcb8b1dd52bfc19be214fd716/show_partial?partial=commit%2Ftimeline_marker&amp;since=1403090222" data-last-modified="Wed, 18 Jun 2014 11:17:02 GMT"> 
         </div> 
        </div> Please 
        <a href="/login?return_to=https%3A%2F%2Fgithub.com%2Felastic%2Felasticsearch%2Fcommit%2F556a498bf69193dfcb8b1dd52bfc19be214fd716" rel="nofollow">sign in</a> to comment. 
       </div> 
      </div> 
      <div class="modal-backdrop js-touch-events"></div> 
     </div> 
    </div> 
   </div> 
  </div> 
  <div class="footer container-lg px-3" role="contentinfo"> 
   <div class="position-relative d-flex flex-justify-between py-6 mt-6 f6 text-gray border-top border-gray-light "> 
    <ul class="list-style-none d-flex flex-wrap "> 
     <li class="mr-3">© 2017 <span title="0.45147s from unicorn-3805733355-f4h08">GitHub</span>, Inc.</li> 
     <li class="mr-3"><a href="https://github.com/site/terms" data-ga-click="Footer, go to terms, text:terms">Terms</a></li> 
     <li class="mr-3"><a href="https://github.com/site/privacy" data-ga-click="Footer, go to privacy, text:privacy">Privacy</a></li> 
     <li class="mr-3"><a href="https://github.com/security" data-ga-click="Footer, go to security, text:security">Security</a></li> 
     <li class="mr-3"><a href="https://status.github.com/" data-ga-click="Footer, go to status, text:status">Status</a></li> 
     <li><a href="https://help.github.com" data-ga-click="Footer, go to help, text:help">Help</a></li> 
    </ul> 
    <a href="https://github.com" aria-label="Homepage" class="footer-octicon" title="GitHub"> 
     <svg aria-hidden="true" class="octicon octicon-mark-github" height="24" version="1.1" viewbox="0 0 16 16" width="24">
      <path fill-rule="evenodd" d="M8 0C3.58 0 0 3.58 0 8c0 3.54 2.29 6.53 5.47 7.59.4.07.55-.17.55-.38 0-.19-.01-.82-.01-1.49-2.01.37-2.53-.49-2.69-.94-.09-.23-.48-.94-.82-1.13-.28-.15-.68-.52-.01-.53.63-.01 1.08.58 1.23.82.72 1.21 1.87.87 2.33.66.07-.52.28-.87.51-1.07-1.78-.2-3.64-.89-3.64-3.95 0-.87.31-1.59.82-2.15-.08-.2-.36-1.02.08-2.12 0 0 .67-.21 2.2.82.64-.18 1.32-.27 2-.27.68 0 1.36.09 2 .27 1.53-1.04 2.2-.82 2.2-.82.44 1.1.16 1.92.08 2.12.51.56.82 1.27.82 2.15 0 3.07-1.87 3.75-3.65 3.95.29.25.54.73.54 1.48 0 1.07-.01 1.93-.01 2.2 0 .21.15.46.55.38A8.013 8.013 0 0 0 16 8c0-4.42-3.58-8-8-8z" />
     </svg> </a> 
    <ul class="list-style-none d-flex flex-wrap "> 
     <li class="mr-3"><a href="https://github.com/contact" data-ga-click="Footer, go to contact, text:contact">Contact GitHub</a></li> 
     <li class="mr-3"><a href="https://developer.github.com" data-ga-click="Footer, go to api, text:api">API</a></li> 
     <li class="mr-3"><a href="https://training.github.com" data-ga-click="Footer, go to training, text:training">Training</a></li> 
     <li class="mr-3"><a href="https://shop.github.com" data-ga-click="Footer, go to shop, text:shop">Shop</a></li> 
     <li class="mr-3"><a href="https://github.com/blog" data-ga-click="Footer, go to blog, text:blog">Blog</a></li> 
     <li><a href="https://github.com/about" data-ga-click="Footer, go to about, text:about">About</a></li> 
    </ul> 
   </div> 
  </div> 
  <div id="ajax-error-message" class="ajax-error-message flash flash-error"> 
   <svg aria-hidden="true" class="octicon octicon-alert" height="16" version="1.1" viewbox="0 0 16 16" width="16">
    <path fill-rule="evenodd" d="M8.865 1.52c-.18-.31-.51-.5-.87-.5s-.69.19-.87.5L.275 13.5c-.18.31-.18.69 0 1 .19.31.52.5.87.5h13.7c.36 0 .69-.19.86-.5.17-.31.18-.69.01-1L8.865 1.52zM8.995 13h-2v-2h2v2zm0-3h-2V6h2v4z" />
   </svg> 
   <button type="button" class="flash-close js-flash-close js-ajax-error-dismiss" aria-label="Dismiss error"> 
    <svg aria-hidden="true" class="octicon octicon-x" height="16" version="1.1" viewbox="0 0 12 16" width="12">
     <path fill-rule="evenodd" d="M7.48 8l3.75 3.75-1.48 1.48L6 9.48l-3.75 3.75-1.48-1.48L4.52 8 .77 4.25l1.48-1.48L6 6.52l3.75-3.75 1.48 1.48z" />
    </svg> </button> You can't perform that action at this time. 
  </div> 
  <div class="js-stale-session-flash stale-session-flash flash flash-warn flash-banner d-none"> 
   <svg aria-hidden="true" class="octicon octicon-alert" height="16" version="1.1" viewbox="0 0 16 16" width="16">
    <path fill-rule="evenodd" d="M8.865 1.52c-.18-.31-.51-.5-.87-.5s-.69.19-.87.5L.275 13.5c-.18.31-.18.69 0 1 .19.31.52.5.87.5h13.7c.36 0 .69-.19.86-.5.17-.31.18-.69.01-1L8.865 1.52zM8.995 13h-2v-2h2v2zm0-3h-2V6h2v4z" />
   </svg> 
   <span class="signed-in-tab-flash">You signed in with another tab or window. <a href="">Reload</a> to refresh your session.</span> 
   <span class="signed-out-tab-flash">You signed out in another tab or window. <a href="">Reload</a> to refresh your session.</span> 
  </div> 
  <div class="facebox" id="facebox" style="display:none;"> 
   <div class="facebox-popup"> 
    <div class="facebox-content" role="dialog" aria-labelledby="facebox-header" aria-describedby="facebox-description"> 
    </div> 
    <button type="button" class="facebox-close js-facebox-close" aria-label="Close modal"> 
     <svg aria-hidden="true" class="octicon octicon-x" height="16" version="1.1" viewbox="0 0 12 16" width="12">
      <path fill-rule="evenodd" d="M7.48 8l3.75 3.75-1.48 1.48L6 9.48l-3.75 3.75-1.48-1.48L4.52 8 .77 4.25l1.48-1.48L6 6.52l3.75-3.75 1.48 1.48z" />
     </svg> </button> 
   </div> 
  </div>   
 </body>
</html>