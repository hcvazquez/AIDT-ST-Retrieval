<!doctype html>
<html lang="en">
 <head> 
  <meta charset="utf-8"> 
  <meta http-equiv="X-UA-Compatible" content="IE=edge"> 
  <meta name="viewport" content="width=device-width, initial-scale=1"> 
  <meta content="text/html; charset=utf-8" http-equiv="Content-Type"> 
  <link rel="shortcut icon" type="image/png" href="/img/favicon.png"> 
  <title>The Quicksort algorithm - Ben's Blog</title> 
  <meta name="description" content="About the #sorting-algorithms series

The #sorting-algorithms series is a collection of posts about reimplemented sorting algorithms in JavaScript.

If you are not familiar with sorting algorithms, a quick introduction and the full list of reimplemented sorting algorithms can be found in the introduction post of the series on sorting algorithms in JavaScript.

If you feel comfortable with the concept of each sorting algorithm and only want to see the code, have a look at the summary post of the series. It removes all explanations and contains only the JavaScript code for all sorting algorithms discussed in the series.

Get the code on Github

Of course, all the code can also be found on Github in the repository sorting-algorithms-in-javascript.

A good way to compare all of them

Unlike the data structures, all sorting algorithms have the same goal and they can all take the same input data. So, for every sorting algorithms of the series, we are going sort an array of 10 numbers from 1 to 10.

By doing so we will be able to compare the different sorting algorithms more easily. Sorting algorithms are very sensitive to the input data so we will also try different input data to see how they affect the performances.

"> 
  <meta property="og:description" content="About the #sorting-algorithms series

The #sorting-algorithms series is a collection of posts about reimplemented sorting algorithms in JavaScript.

If you are not familiar with sorting algorithms, a quick introduction and the full list of reimplemented sorting algorithms can be found in the introduction post of the series on sorting algorithms in JavaScript.

If you feel comfortable with the concept of each sorting algorithm and only want to see the code, have a look at the summary post of the series. It removes all explanations and contains only the JavaScript code for all sorting algorithms discussed in the series.

Get the code on Github

Of course, all the code can also be found on Github in the repository sorting-algorithms-in-javascript.

A good way to compare all of them

Unlike the data structures, all sorting algorithms have the same goal and they can all take the same input data. So, for every sorting algorithms of the series, we are going sort an array of 10 numbers from 1 to 10.

By doing so we will be able to compare the different sorting algorithms more easily. Sorting algorithms are very sensitive to the input data so we will also try different input data to see how they affect the performances.

"> 
  <meta name="author" content="Benoit VALLON"> 
  <meta property="og:locale" content="en_US"> 
  <meta property="og:site_name" content="Ben's Blog"> 
  <meta property="og:type" content="website"> 
  <meta property="og:title" content="The Quicksort algorithm"> 
  <meta property="og:image" content="http://blog.benoitvallon.com/img/2016-03-18-the-quicksort-algorithm/post-the-quicksort-algorithm.jpg"> 
  <meta property="og:url" content="http://blog.benoitvallon.com/sorting-algorithms-in-javascript/the-quicksort-algorithm/"> 
  <meta name="google-site-verification" content="702z24ksUQH2oG6USnrPutOqAgBgNmvqe8hI9_qgvPk"> 
  <link rel="canonical" href="http://blog.benoitvallon.com/sorting-algorithms-in-javascript/the-quicksort-algorithm/"> 
  <!-- CSS --> 
  <link rel="stylesheet" href="/css/main.css"> 
  <!-- Font Awesome --> 
  <link href="//maxcdn.bootstrapcdn.com/font-awesome/4.6.0/css/font-awesome.min.css" rel="stylesheet" type="text/css"> 
  <!-- Google Fonts --> 
  <link href="//fonts.googleapis.com/css?family=Lora:400,700,400italic,700italic|Oxygen:300italic,400italic,600italic,700italic,800italic,400,300,600,700,800" rel="stylesheet" type="text/css"> 
  <!-- HTML5 Shim and Respond.js IE8 support of HTML5 elements and media queries --> 
  <!-- WARNING: Respond.js doesn't work if you view the page via file:// --> 
  <!--[if lt IE 9]>
        <script src="https://oss.maxcdn.com/libs/html5shiv/3.7.0/html5shiv.js"></script>
        <script src="https://oss.maxcdn.com/libs/respond.js/1.4.2/respond.min.js"></script>
    <![endif]--> 
 </head> 
 <body> 
  <!-- Navigation --> 
  <nav class="navbar navbar-default navbar-custom navbar-fixed-top"> 
   <div class="container-fluid"> 
    <!-- Brand and toggle get grouped for better mobile display --> 
    <div class="navbar-header page-scroll"> 
     <button type="button" class="navbar-toggle" data-toggle="collapse" data-target="#bs-example-navbar-collapse-1"> <span class="sr-only">Toggle navigation</span> <span class="icon-bar"></span> <span class="icon-bar"></span> <span class="icon-bar"></span> </button> 
     <a class="navbar-brand" href="/">Home</a> 
    </div> 
    <!-- Collect the nav links, forms, and other content for toggling --> 
    <div class="collapse navbar-collapse" id="bs-example-navbar-collapse-1"> 
     <ul class="nav navbar-nav navbar-right"> 
      <li><a href="/about/">About</a></li> 
      <li><a href="/contact/">Contact</a></li> 
     </ul> 
    </div> 
    <!-- /.navbar-collapse --> 
   </div> 
   <!-- /.container --> 
  </nav> 
  <!-- Post Header --> 
  <header class="intro-header" style="background-image: url('/img/2016-03-18-the-quicksort-algorithm/post-the-quicksort-algorithm.jpg')"> 
   <div class="container"> 
    <div class="row"> 
     <div class="col-lg-8 col-lg-offset-2 col-md-10 col-md-offset-1"> 
      <div class="post-heading "> 
       <h1>The Quicksort algorithm</h1> 
       <h2 class="subheading">#sorting-algorithms series</h2> 
       <span class="meta">Posted on March 18, 2016</span> 
      </div> 
     </div> 
    </div> 
   </div> 
  </header> 
  <!-- Post Content --> 
  <article> 
   <div class="container"> 
    <div class="row"> 
     <div class="col-lg-8 col-lg-offset-2 col-md-10 col-md-offset-1"> 
      <h1 id="about-the-sorting-algorithms-series">About the #sorting-algorithms series</h1> 
      <p>The <a href="/category/sorting-algorithms-in-javascript">#sorting-algorithms series</a> is a collection of posts about reimplemented sorting algorithms in JavaScript.</p> 
      <p>If you are not familiar with sorting algorithms, a quick introduction and the full list of reimplemented sorting algorithms can be found in the <a href="/sorting-algorithms-in-javascript/sorting-algorithms-in-javascript">introduction post of the series on sorting algorithms in JavaScript</a>.</p> 
      <p>If you feel comfortable with the concept of each sorting algorithm and only want to see the code, have a look at the summary post of the series. It removes all explanations and contains only the <a href="/sorting-algorithms-in-javascript/sorting-algorithms-in-javascript-all-the-code">JavaScript code for all sorting algorithms</a> discussed in the series.</p> 
      <h2 id="get-the-code-on-github">Get the code on Github</h2> 
      <p>Of course, all the code can also be found on Github in the repository <a href="https://github.com/benoitvallon/computer-science-in-javascript/tree/master/sorting-algorithms-in-javascript">sorting-algorithms-in-javascript</a>.</p> 
      <h2 id="a-good-way-to-compare-all-of-them">A good way to compare all of them</h2> 
      <p>Unlike the <a href="/data-structures-in-javascript/data-structures-in-javascript/">data structures</a>, all <a href="/sorting-algorithms-in-javascript/sorting-algorithms-in-javascript">sorting algorithms</a> have the same goal and they can all take the same input data. So, for every sorting algorithms of the series, we are going sort an <code class="highlighter-rouge">array</code> of 10 numbers from 1 to 10.</p> 
      <p>By doing so we will be able to compare the different sorting algorithms more easily. Sorting algorithms are very sensitive to the input data so we will also try different input data to see how they affect the performances.</p> 
      <h1 id="the-quicksort-algorithm">The Quicksort algorithm</h1> 
      <h2 id="definition">Definition</h2> 
      <blockquote> 
       <p>Quicksort is a divide and conquer algorithm. Quicksort first divides a large array into two smaller sub-arrays: the low elements and the high elements. Quicksort can then recursively sort the sub-arrays. <strong>From <a href="https://en.wikipedia.org/wiki/Quicksort">Wikipedia</a></strong></p> 
      </blockquote> 
      <h2 id="visualization">Visualization</h2> 
      <p>If you want to have a nice visualization of the algorithm, the <a href="http://visualgo.net/sorting.html">visualgo.net website</a> is a nice resource. You can play with many parameters and see which part of the algorithm is doing what.</p> 
      <h2 id="complexity">Complexity</h2> 
      <table> 
       <thead> 
        <tr> 
         <th>Time complexity</th> 
         <th>&nbsp;</th> 
         <th>&nbsp;</th> 
        </tr> 
       </thead> 
       <tbody> 
        <tr> 
         <td>Best</td> 
         <td>Average</td> 
         <td>Worst</td> 
        </tr> 
        <tr> 
         <td>O(n log(n))</td> 
         <td>O(n log(n))</td> 
         <td>O(n^2)</td> 
        </tr> 
       </tbody> 
      </table> 
      <p>To get a full overview of the time and space complexity of the Merge sort algorithm, have a look to this excellent <a href="http://bigocheatsheet.com/">Big O cheat sheet</a>.</p> 
      <h2 id="the-code">The code</h2> 
      <p>For each sorting algorithm, we are going to look at 2 versions of the code. The first one is the final/clean version, the one that you should remember. The second one implements some counters in order to demonstrate the different time complexities depending of the inputs.</p> 
      <h3 id="clean-version">Clean version</h3> 
      <div class="language-js highlighter-rouge">
       <pre class="highlight"><code><span class="c1">// array to sort</span>
<span class="kd">var</span> <span class="nx">array</span> <span class="o">=</span> <span class="p">[</span><span class="mi">9</span><span class="p">,</span> <span class="mi">2</span><span class="p">,</span> <span class="mi">5</span><span class="p">,</span> <span class="mi">6</span><span class="p">,</span> <span class="mi">4</span><span class="p">,</span> <span class="mi">3</span><span class="p">,</span> <span class="mi">7</span><span class="p">,</span> <span class="mi">10</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">8</span><span class="p">];</span>

<span class="c1">// basic implementation (pivot is the first element of the array)</span>
<span class="kd">function</span> <span class="nx">quicksortBasic</span><span class="p">(</span><span class="nx">array</span><span class="p">)</span> <span class="p">{</span>
  <span class="k">if</span><span class="p">(</span><span class="nx">array</span><span class="p">.</span><span class="nx">length</span> <span class="o">&lt;</span> <span class="mi">2</span><span class="p">)</span> <span class="p">{</span>
    <span class="k">return</span> <span class="nx">array</span><span class="p">;</span>
  <span class="p">}</span>

  <span class="kd">var</span> <span class="nx">pivot</span> <span class="o">=</span> <span class="nx">array</span><span class="p">[</span><span class="mi">0</span><span class="p">];</span>
  <span class="kd">var</span> <span class="nx">lesser</span> <span class="o">=</span> <span class="p">[];</span>
  <span class="kd">var</span> <span class="nx">greater</span> <span class="o">=</span> <span class="p">[];</span>

  <span class="k">for</span><span class="p">(</span><span class="kd">var</span> <span class="nx">i</span> <span class="o">=</span> <span class="mi">1</span><span class="p">;</span> <span class="nx">i</span> <span class="o">&lt;</span> <span class="nx">array</span><span class="p">.</span><span class="nx">length</span><span class="p">;</span> <span class="nx">i</span><span class="o">++</span><span class="p">)</span> <span class="p">{</span>
    <span class="k">if</span><span class="p">(</span><span class="nx">array</span><span class="p">[</span><span class="nx">i</span><span class="p">]</span> <span class="o">&lt;</span> <span class="nx">pivot</span><span class="p">)</span> <span class="p">{</span>
      <span class="nx">lesser</span><span class="p">.</span><span class="nx">push</span><span class="p">(</span><span class="nx">array</span><span class="p">[</span><span class="nx">i</span><span class="p">]);</span>
    <span class="p">}</span> <span class="k">else</span> <span class="p">{</span>
      <span class="nx">greater</span><span class="p">.</span><span class="nx">push</span><span class="p">(</span><span class="nx">array</span><span class="p">[</span><span class="nx">i</span><span class="p">]);</span>
    <span class="p">}</span>
  <span class="p">}</span>

  <span class="k">return</span> <span class="nx">quicksortBasic</span><span class="p">(</span><span class="nx">lesser</span><span class="p">).</span><span class="nx">concat</span><span class="p">(</span><span class="nx">pivot</span><span class="p">,</span> <span class="nx">quicksortBasic</span><span class="p">(</span><span class="nx">greater</span><span class="p">));</span>
<span class="p">}</span>

<span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="nx">quicksortBasic</span><span class="p">(</span><span class="nx">array</span><span class="p">.</span><span class="nx">slice</span><span class="p">()));</span> <span class="c1">// =&gt; [ 1, 2, 3, 4, 5, 6, 7, 8, 9, 10 ]</span>

<span class="c1">// swap function helper</span>
<span class="kd">function</span> <span class="nx">swap</span><span class="p">(</span><span class="nx">array</span><span class="p">,</span> <span class="nx">i</span><span class="p">,</span> <span class="nx">j</span><span class="p">)</span> <span class="p">{</span>
  <span class="kd">var</span> <span class="nx">temp</span> <span class="o">=</span> <span class="nx">array</span><span class="p">[</span><span class="nx">i</span><span class="p">];</span>
  <span class="nx">array</span><span class="p">[</span><span class="nx">i</span><span class="p">]</span> <span class="o">=</span> <span class="nx">array</span><span class="p">[</span><span class="nx">j</span><span class="p">];</span>
  <span class="nx">array</span><span class="p">[</span><span class="nx">j</span><span class="p">]</span> <span class="o">=</span> <span class="nx">temp</span><span class="p">;</span>
<span class="p">}</span>

<span class="c1">// classic implementation (with Hoare or Lomuto partition scheme, you can comment either one method or the other to see the difference)</span>
<span class="kd">function</span> <span class="nx">quicksort</span><span class="p">(</span><span class="nx">array</span><span class="p">,</span> <span class="nx">left</span><span class="p">,</span> <span class="nx">right</span><span class="p">)</span> <span class="p">{</span>
  <span class="nx">left</span> <span class="o">=</span> <span class="nx">left</span> <span class="o">||</span> <span class="mi">0</span><span class="p">;</span>
  <span class="nx">right</span> <span class="o">=</span> <span class="nx">right</span> <span class="o">||</span> <span class="nx">array</span><span class="p">.</span><span class="nx">length</span> <span class="o">-</span> <span class="mi">1</span><span class="p">;</span>

  <span class="c1">// var pivot = partitionLomuto(array, left, right); // you can play with both partition</span>
  <span class="kd">var</span> <span class="nx">pivot</span> <span class="o">=</span> <span class="nx">partitionHoare</span><span class="p">(</span><span class="nx">array</span><span class="p">,</span> <span class="nx">left</span><span class="p">,</span> <span class="nx">right</span><span class="p">);</span> <span class="c1">// you can play with both partition</span>

  <span class="k">if</span><span class="p">(</span><span class="nx">left</span> <span class="o">&lt;</span> <span class="nx">pivot</span> <span class="o">-</span> <span class="mi">1</span><span class="p">)</span> <span class="p">{</span>
    <span class="nx">quicksort</span><span class="p">(</span><span class="nx">array</span><span class="p">,</span> <span class="nx">left</span><span class="p">,</span> <span class="nx">pivot</span> <span class="o">-</span> <span class="mi">1</span><span class="p">);</span>
  <span class="p">}</span>
  <span class="k">if</span><span class="p">(</span><span class="nx">right</span> <span class="o">&gt;</span> <span class="nx">pivot</span><span class="p">)</span> <span class="p">{</span>
    <span class="nx">quicksort</span><span class="p">(</span><span class="nx">array</span><span class="p">,</span> <span class="nx">pivot</span><span class="p">,</span> <span class="nx">right</span><span class="p">);</span>
  <span class="p">}</span>
  <span class="k">return</span> <span class="nx">array</span><span class="p">;</span>
<span class="p">}</span>
<span class="c1">// Lomuto partition scheme, it is less efficient than the Hoare partition scheme</span>
<span class="kd">function</span> <span class="nx">partitionLomuto</span><span class="p">(</span><span class="nx">array</span><span class="p">,</span> <span class="nx">left</span><span class="p">,</span> <span class="nx">right</span><span class="p">)</span> <span class="p">{</span>
  <span class="kd">var</span> <span class="nx">pivot</span> <span class="o">=</span> <span class="nx">right</span><span class="p">;</span>
  <span class="kd">var</span> <span class="nx">i</span> <span class="o">=</span> <span class="nx">left</span><span class="p">;</span>

  <span class="k">for</span><span class="p">(</span><span class="kd">var</span> <span class="nx">j</span> <span class="o">=</span> <span class="nx">left</span><span class="p">;</span> <span class="nx">j</span> <span class="o">&lt;</span> <span class="nx">right</span><span class="p">;</span> <span class="nx">j</span><span class="o">++</span><span class="p">)</span> <span class="p">{</span>
    <span class="k">if</span><span class="p">(</span><span class="nx">array</span><span class="p">[</span><span class="nx">j</span><span class="p">]</span> <span class="o">&lt;=</span> <span class="nx">array</span><span class="p">[</span><span class="nx">pivot</span><span class="p">])</span> <span class="p">{</span>
      <span class="nx">swap</span><span class="p">(</span><span class="nx">array</span><span class="p">,</span> <span class="nx">i</span> <span class="p">,</span> <span class="nx">j</span><span class="p">);</span>
      <span class="nx">i</span> <span class="o">=</span> <span class="nx">i</span> <span class="o">+</span> <span class="mi">1</span><span class="p">;</span>
    <span class="p">}</span>
  <span class="p">}</span>
  <span class="nx">swap</span><span class="p">(</span><span class="nx">array</span><span class="p">,</span> <span class="nx">i</span><span class="p">,</span> <span class="nx">j</span><span class="p">);</span>
  <span class="k">return</span> <span class="nx">i</span><span class="p">;</span>
<span class="p">}</span>
<span class="c1">// Hoare partition scheme, it is more efficient than the Lomuto partition scheme because it does three times fewer swaps on average</span>
<span class="kd">function</span> <span class="nx">partitionHoare</span><span class="p">(</span><span class="nx">array</span><span class="p">,</span> <span class="nx">left</span><span class="p">,</span> <span class="nx">right</span><span class="p">)</span> <span class="p">{</span>
  <span class="kd">var</span> <span class="nx">pivot</span> <span class="o">=</span> <span class="nb">Math</span><span class="p">.</span><span class="nx">floor</span><span class="p">((</span><span class="nx">left</span> <span class="o">+</span> <span class="nx">right</span><span class="p">)</span> <span class="o">/</span> <span class="mi">2</span> <span class="p">);</span>

  <span class="k">while</span><span class="p">(</span><span class="nx">left</span> <span class="o">&lt;=</span> <span class="nx">right</span><span class="p">)</span> <span class="p">{</span>
    <span class="k">while</span><span class="p">(</span><span class="nx">array</span><span class="p">[</span><span class="nx">left</span><span class="p">]</span> <span class="o">&lt;</span> <span class="nx">array</span><span class="p">[</span><span class="nx">pivot</span><span class="p">])</span> <span class="p">{</span>
      <span class="nx">left</span><span class="o">++</span><span class="p">;</span>
    <span class="p">}</span>
    <span class="k">while</span><span class="p">(</span><span class="nx">array</span><span class="p">[</span><span class="nx">right</span><span class="p">]</span> <span class="o">&gt;</span> <span class="nx">array</span><span class="p">[</span><span class="nx">pivot</span><span class="p">])</span> <span class="p">{</span>
      <span class="nx">right</span><span class="o">--</span><span class="p">;</span>
    <span class="p">}</span>
    <span class="k">if</span><span class="p">(</span><span class="nx">left</span> <span class="o">&lt;=</span> <span class="nx">right</span><span class="p">)</span> <span class="p">{</span>
      <span class="nx">swap</span><span class="p">(</span><span class="nx">array</span><span class="p">,</span> <span class="nx">left</span><span class="p">,</span> <span class="nx">right</span><span class="p">);</span>
      <span class="nx">left</span><span class="o">++</span><span class="p">;</span>
      <span class="nx">right</span><span class="o">--</span><span class="p">;</span>
    <span class="p">}</span>
  <span class="p">}</span>
  <span class="k">return</span> <span class="nx">left</span><span class="p">;</span>
<span class="p">}</span>

<span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="nx">quicksort</span><span class="p">(</span><span class="nx">array</span><span class="p">.</span><span class="nx">slice</span><span class="p">()));</span> <span class="c1">// =&gt; [ 1, 2, 3, 4, 5, 6, 7, 8, 9, 10 ]</span>
</code></pre> 
      </div> 
      <h3 id="version-with-counters">Version with counters</h3> 
      <div class="language-js highlighter-rouge">
       <pre class="highlight"><code><span class="c1">// sample of arrays to sort</span>
<span class="kd">var</span> <span class="nx">arrayRandom</span> <span class="o">=</span> <span class="p">[</span><span class="mi">9</span><span class="p">,</span> <span class="mi">2</span><span class="p">,</span> <span class="mi">5</span><span class="p">,</span> <span class="mi">6</span><span class="p">,</span> <span class="mi">4</span><span class="p">,</span> <span class="mi">3</span><span class="p">,</span> <span class="mi">7</span><span class="p">,</span> <span class="mi">10</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">8</span><span class="p">];</span>
<span class="kd">var</span> <span class="nx">arrayOrdered</span> <span class="o">=</span> <span class="p">[</span><span class="mi">1</span><span class="p">,</span> <span class="mi">2</span><span class="p">,</span> <span class="mi">3</span><span class="p">,</span> <span class="mi">4</span><span class="p">,</span> <span class="mi">5</span><span class="p">,</span> <span class="mi">6</span><span class="p">,</span> <span class="mi">7</span><span class="p">,</span> <span class="mi">8</span><span class="p">,</span> <span class="mi">9</span><span class="p">,</span> <span class="mi">10</span><span class="p">];</span>
<span class="kd">var</span> <span class="nx">arrayReversed</span> <span class="o">=</span> <span class="p">[</span><span class="mi">10</span><span class="p">,</span> <span class="mi">9</span><span class="p">,</span> <span class="mi">8</span><span class="p">,</span> <span class="mi">7</span><span class="p">,</span> <span class="mi">6</span><span class="p">,</span> <span class="mi">5</span><span class="p">,</span> <span class="mi">4</span><span class="p">,</span> <span class="mi">3</span><span class="p">,</span> <span class="mi">2</span><span class="p">,</span> <span class="mi">1</span><span class="p">];</span>

<span class="kd">var</span> <span class="nx">countOuter</span> <span class="o">=</span> <span class="mi">0</span><span class="p">;</span>
<span class="kd">var</span> <span class="nx">countInner</span> <span class="o">=</span> <span class="mi">0</span><span class="p">;</span>
<span class="kd">var</span> <span class="nx">countSwap</span> <span class="o">=</span> <span class="mi">0</span><span class="p">;</span>

<span class="kd">function</span> <span class="nx">resetCounters</span><span class="p">()</span> <span class="p">{</span>
  <span class="nx">countOuter</span> <span class="o">=</span> <span class="mi">0</span><span class="p">;</span>
  <span class="nx">countInner</span> <span class="o">=</span> <span class="mi">0</span><span class="p">;</span>
  <span class="nx">countSwap</span> <span class="o">=</span> <span class="mi">0</span><span class="p">;</span>
<span class="p">}</span>

<span class="c1">// basic implementation (pivot is the first element of the array)</span>
<span class="kd">function</span> <span class="nx">quicksortBasic</span><span class="p">(</span><span class="nx">array</span><span class="p">)</span> <span class="p">{</span>
  <span class="nx">countOuter</span><span class="o">++</span><span class="p">;</span>
  <span class="k">if</span><span class="p">(</span><span class="nx">array</span><span class="p">.</span><span class="nx">length</span> <span class="o">&lt;</span> <span class="mi">2</span><span class="p">)</span> <span class="p">{</span>
    <span class="k">return</span> <span class="nx">array</span><span class="p">;</span>
  <span class="p">}</span>

  <span class="kd">var</span> <span class="nx">pivot</span> <span class="o">=</span> <span class="nx">array</span><span class="p">[</span><span class="mi">0</span><span class="p">];</span>
  <span class="kd">var</span> <span class="nx">lesser</span> <span class="o">=</span> <span class="p">[];</span>
  <span class="kd">var</span> <span class="nx">greater</span> <span class="o">=</span> <span class="p">[];</span>

  <span class="k">for</span><span class="p">(</span><span class="kd">var</span> <span class="nx">i</span> <span class="o">=</span> <span class="mi">1</span><span class="p">;</span> <span class="nx">i</span> <span class="o">&lt;</span> <span class="nx">array</span><span class="p">.</span><span class="nx">length</span><span class="p">;</span> <span class="nx">i</span><span class="o">++</span><span class="p">)</span> <span class="p">{</span>
    <span class="nx">countInner</span><span class="o">++</span><span class="p">;</span>
    <span class="k">if</span><span class="p">(</span><span class="nx">array</span><span class="p">[</span><span class="nx">i</span><span class="p">]</span> <span class="o">&lt;</span> <span class="nx">pivot</span><span class="p">)</span> <span class="p">{</span>
      <span class="nx">lesser</span><span class="p">.</span><span class="nx">push</span><span class="p">(</span><span class="nx">array</span><span class="p">[</span><span class="nx">i</span><span class="p">]);</span>
    <span class="p">}</span> <span class="k">else</span> <span class="p">{</span>
      <span class="nx">greater</span><span class="p">.</span><span class="nx">push</span><span class="p">(</span><span class="nx">array</span><span class="p">[</span><span class="nx">i</span><span class="p">]);</span>
    <span class="p">}</span>
  <span class="p">}</span>

  <span class="k">return</span> <span class="nx">quicksortBasic</span><span class="p">(</span><span class="nx">lesser</span><span class="p">).</span><span class="nx">concat</span><span class="p">(</span><span class="nx">pivot</span><span class="p">,</span> <span class="nx">quicksortBasic</span><span class="p">(</span><span class="nx">greater</span><span class="p">));</span>
<span class="p">}</span>

<span class="nx">quicksortBasic</span><span class="p">(</span><span class="nx">arrayRandom</span><span class="p">.</span><span class="nx">slice</span><span class="p">());</span> <span class="c1">// =&gt; outer: 13 inner: 25 swap: 0</span>
<span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="s1">'outer:'</span><span class="p">,</span> <span class="nx">countOuter</span><span class="p">,</span> <span class="s1">'inner:'</span><span class="p">,</span> <span class="nx">countInner</span><span class="p">,</span> <span class="s1">'swap:'</span><span class="p">,</span> <span class="nx">countSwap</span><span class="p">);</span>
<span class="nx">resetCounters</span><span class="p">();</span>

<span class="nx">quicksortBasic</span><span class="p">(</span><span class="nx">arrayOrdered</span><span class="p">.</span><span class="nx">slice</span><span class="p">());</span> <span class="c1">// =&gt; outer: 19 inner: 45 swap: 0</span>
<span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="s1">'outer:'</span><span class="p">,</span> <span class="nx">countOuter</span><span class="p">,</span> <span class="s1">'inner:'</span><span class="p">,</span> <span class="nx">countInner</span><span class="p">,</span> <span class="s1">'swap:'</span><span class="p">,</span> <span class="nx">countSwap</span><span class="p">);</span>
<span class="nx">resetCounters</span><span class="p">();</span>

<span class="nx">quicksortBasic</span><span class="p">(</span><span class="nx">arrayReversed</span><span class="p">.</span><span class="nx">slice</span><span class="p">());</span> <span class="c1">// =&gt; outer: 19 inner: 45 swap: 0</span>
<span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="s1">'outer:'</span><span class="p">,</span> <span class="nx">countOuter</span><span class="p">,</span> <span class="s1">'inner:'</span><span class="p">,</span> <span class="nx">countInner</span><span class="p">,</span> <span class="s1">'swap:'</span><span class="p">,</span> <span class="nx">countSwap</span><span class="p">);</span>
<span class="nx">resetCounters</span><span class="p">();</span>

<span class="c1">// swap function helper</span>
<span class="kd">function</span> <span class="nx">swap</span><span class="p">(</span><span class="nx">array</span><span class="p">,</span> <span class="nx">i</span><span class="p">,</span> <span class="nx">j</span><span class="p">)</span> <span class="p">{</span>
  <span class="kd">var</span> <span class="nx">temp</span> <span class="o">=</span> <span class="nx">array</span><span class="p">[</span><span class="nx">i</span><span class="p">];</span>
  <span class="nx">array</span><span class="p">[</span><span class="nx">i</span><span class="p">]</span> <span class="o">=</span> <span class="nx">array</span><span class="p">[</span><span class="nx">j</span><span class="p">];</span>
  <span class="nx">array</span><span class="p">[</span><span class="nx">j</span><span class="p">]</span> <span class="o">=</span> <span class="nx">temp</span><span class="p">;</span>
<span class="p">}</span>

<span class="c1">// classic implementation (with Hoare or Lomuto partition scheme, you can comment either one method or the other to see the difference)</span>
<span class="kd">function</span> <span class="nx">quicksort</span><span class="p">(</span><span class="nx">array</span><span class="p">,</span> <span class="nx">left</span><span class="p">,</span> <span class="nx">right</span><span class="p">)</span> <span class="p">{</span>
  <span class="nx">countOuter</span><span class="o">++</span><span class="p">;</span>
  <span class="nx">left</span> <span class="o">=</span> <span class="nx">left</span> <span class="o">||</span> <span class="mi">0</span><span class="p">;</span>
  <span class="nx">right</span> <span class="o">=</span> <span class="nx">right</span> <span class="o">||</span> <span class="nx">array</span><span class="p">.</span><span class="nx">length</span> <span class="o">-</span> <span class="mi">1</span><span class="p">;</span>

  <span class="c1">// var pivot = partitionLomuto(array, left, right); // you can play with both partition</span>
  <span class="kd">var</span> <span class="nx">pivot</span> <span class="o">=</span> <span class="nx">partitionHoare</span><span class="p">(</span><span class="nx">array</span><span class="p">,</span> <span class="nx">left</span><span class="p">,</span> <span class="nx">right</span><span class="p">);</span> <span class="c1">// you can play with both partition</span>

  <span class="k">if</span><span class="p">(</span><span class="nx">left</span> <span class="o">&lt;</span> <span class="nx">pivot</span> <span class="o">-</span> <span class="mi">1</span><span class="p">)</span> <span class="p">{</span>
    <span class="nx">quicksort</span><span class="p">(</span><span class="nx">array</span><span class="p">,</span> <span class="nx">left</span><span class="p">,</span> <span class="nx">pivot</span> <span class="o">-</span> <span class="mi">1</span><span class="p">);</span>
  <span class="p">}</span>
  <span class="k">if</span><span class="p">(</span><span class="nx">right</span> <span class="o">&gt;</span> <span class="nx">pivot</span><span class="p">)</span> <span class="p">{</span>
    <span class="nx">quicksort</span><span class="p">(</span><span class="nx">array</span><span class="p">,</span> <span class="nx">pivot</span><span class="p">,</span> <span class="nx">right</span><span class="p">);</span>
  <span class="p">}</span>
  <span class="k">return</span> <span class="nx">array</span><span class="p">;</span>
<span class="p">}</span>
<span class="c1">// Lomuto partition scheme, it is less efficient than the Hoare partition scheme</span>
<span class="kd">function</span> <span class="nx">partitionLomuto</span><span class="p">(</span><span class="nx">array</span><span class="p">,</span> <span class="nx">left</span><span class="p">,</span> <span class="nx">right</span><span class="p">)</span> <span class="p">{</span>
  <span class="kd">var</span> <span class="nx">pivot</span> <span class="o">=</span> <span class="nx">right</span><span class="p">;</span>
  <span class="kd">var</span> <span class="nx">i</span> <span class="o">=</span> <span class="nx">left</span><span class="p">;</span>

  <span class="k">for</span><span class="p">(</span><span class="kd">var</span> <span class="nx">j</span> <span class="o">=</span> <span class="nx">left</span><span class="p">;</span> <span class="nx">j</span> <span class="o">&lt;</span> <span class="nx">right</span><span class="p">;</span> <span class="nx">j</span><span class="o">++</span><span class="p">)</span> <span class="p">{</span>
    <span class="nx">countInner</span><span class="o">++</span><span class="p">;</span>
    <span class="k">if</span><span class="p">(</span><span class="nx">array</span><span class="p">[</span><span class="nx">j</span><span class="p">]</span> <span class="o">&lt;=</span> <span class="nx">array</span><span class="p">[</span><span class="nx">pivot</span><span class="p">])</span> <span class="p">{</span>
      <span class="nx">countSwap</span><span class="o">++</span><span class="p">;</span>
      <span class="nx">swap</span><span class="p">(</span><span class="nx">array</span><span class="p">,</span> <span class="nx">i</span> <span class="p">,</span> <span class="nx">j</span><span class="p">);</span>
      <span class="nx">i</span> <span class="o">=</span> <span class="nx">i</span> <span class="o">+</span> <span class="mi">1</span><span class="p">;</span>
    <span class="p">}</span>
  <span class="p">}</span>
  <span class="nx">countSwap</span><span class="o">++</span><span class="p">;</span>
  <span class="nx">swap</span><span class="p">(</span><span class="nx">array</span><span class="p">,</span> <span class="nx">i</span><span class="p">,</span> <span class="nx">j</span><span class="p">);</span>
  <span class="k">return</span> <span class="nx">i</span><span class="p">;</span>
<span class="p">}</span>
<span class="c1">// Hoare partition scheme, it is more efficient than the Lomuto partition scheme because it does three times fewer swaps on average</span>
<span class="kd">function</span> <span class="nx">partitionHoare</span><span class="p">(</span><span class="nx">array</span><span class="p">,</span> <span class="nx">left</span><span class="p">,</span> <span class="nx">right</span><span class="p">)</span> <span class="p">{</span>
  <span class="kd">var</span> <span class="nx">pivot</span> <span class="o">=</span> <span class="nb">Math</span><span class="p">.</span><span class="nx">floor</span><span class="p">((</span><span class="nx">left</span> <span class="o">+</span> <span class="nx">right</span><span class="p">)</span> <span class="o">/</span> <span class="mi">2</span> <span class="p">);</span>

  <span class="k">while</span><span class="p">(</span><span class="nx">left</span> <span class="o">&lt;=</span> <span class="nx">right</span><span class="p">)</span> <span class="p">{</span>
    <span class="nx">countInner</span><span class="o">++</span><span class="p">;</span>
    <span class="k">while</span><span class="p">(</span><span class="nx">array</span><span class="p">[</span><span class="nx">left</span><span class="p">]</span> <span class="o">&lt;</span> <span class="nx">array</span><span class="p">[</span><span class="nx">pivot</span><span class="p">])</span> <span class="p">{</span>
      <span class="nx">left</span><span class="o">++</span><span class="p">;</span>
    <span class="p">}</span>
    <span class="k">while</span><span class="p">(</span><span class="nx">array</span><span class="p">[</span><span class="nx">right</span><span class="p">]</span> <span class="o">&gt;</span> <span class="nx">array</span><span class="p">[</span><span class="nx">pivot</span><span class="p">])</span> <span class="p">{</span>
      <span class="nx">right</span><span class="o">--</span><span class="p">;</span>
    <span class="p">}</span>
    <span class="k">if</span><span class="p">(</span><span class="nx">left</span> <span class="o">&lt;=</span> <span class="nx">right</span><span class="p">)</span> <span class="p">{</span>
      <span class="nx">countSwap</span><span class="o">++</span><span class="p">;</span>
      <span class="nx">swap</span><span class="p">(</span><span class="nx">array</span><span class="p">,</span> <span class="nx">left</span><span class="p">,</span> <span class="nx">right</span><span class="p">);</span>
      <span class="nx">left</span><span class="o">++</span><span class="p">;</span>
      <span class="nx">right</span><span class="o">--</span><span class="p">;</span>
    <span class="p">}</span>
  <span class="p">}</span>
  <span class="k">return</span> <span class="nx">left</span><span class="p">;</span>
<span class="p">}</span>

<span class="nx">quicksort</span><span class="p">(</span><span class="nx">arrayRandom</span><span class="p">.</span><span class="nx">slice</span><span class="p">());</span>
<span class="c1">// =&gt; Hoare: outer: 9 inner: 12 swap: 12 - Lomuto: outer: 10 inner: 35 swap: 28</span>
<span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="s1">'outer:'</span><span class="p">,</span> <span class="nx">countOuter</span><span class="p">,</span> <span class="s1">'inner:'</span><span class="p">,</span> <span class="nx">countInner</span><span class="p">,</span> <span class="s1">'swap:'</span><span class="p">,</span> <span class="nx">countSwap</span><span class="p">);</span>
<span class="nx">resetCounters</span><span class="p">();</span>

<span class="nx">quicksort</span><span class="p">(</span><span class="nx">arrayOrdered</span><span class="p">.</span><span class="nx">slice</span><span class="p">());</span>
<span class="c1">// =&gt; Hoare: outer: 9 inner: 9 swap: 9 - Lomuto: outer: 9 inner: 45 swap: 54</span>
<span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="s1">'outer:'</span><span class="p">,</span> <span class="nx">countOuter</span><span class="p">,</span> <span class="s1">'inner:'</span><span class="p">,</span> <span class="nx">countInner</span><span class="p">,</span> <span class="s1">'swap:'</span><span class="p">,</span> <span class="nx">countSwap</span><span class="p">);</span>
<span class="nx">resetCounters</span><span class="p">();</span>

<span class="nx">quicksort</span><span class="p">(</span><span class="nx">arrayReversed</span><span class="p">.</span><span class="nx">slice</span><span class="p">());</span>
<span class="c1">// =&gt; Hoare: outer: 9 inner: 13 swap: 13 - Lomuto: outer: 10 inner: 54 swap: 39</span>
<span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="s1">'outer:'</span><span class="p">,</span> <span class="nx">countOuter</span><span class="p">,</span> <span class="s1">'inner:'</span><span class="p">,</span> <span class="nx">countInner</span><span class="p">,</span> <span class="s1">'swap:'</span><span class="p">,</span> <span class="nx">countSwap</span><span class="p">);</span>
<span class="nx">resetCounters</span><span class="p">();</span>
</code></pre> 
      </div> 
      <hr> 
      <script>!function(d,s,id){var js,fjs=d.getElementsByTagName(s)[0],p=/^http:/.test(d.location)?'http':'https';if(!d.getElementById(id)){js=d.createElement(s);js.id=id;js.src=p+'://platform.twitter.com/widgets.js';fjs.parentNode.insertBefore(js,fjs);}}(document, 'script', 'twitter-wjs');</script> 
      <div class="share-buttons clearfix"> 
       <ul> 
        <li> <a href="https://twitter.com/intent/tweet?text=%22The Quicksort algorithm%22%20by%20%40benoitvallon%20http://blog.benoitvallon.com/sorting-algorithms-in-javascript/the-quicksort-algorithm/" class="twitter" title="Share on Twitter"><i class="fa fa-twitter" aria-hidden="true"></i><span>Twitter</span></a> </li> 
        <li> <a href="https://www.facebook.com/sharer/sharer.php?u=http://blog.benoitvallon.com/sorting-algorithms-in-javascript/the-quicksort-algorithm/" class="facebook" title="Share on Facebook"><i class="fa fa-facebook" aria-hidden="true"></i><span>Facebook</span></a> </li> 
        <li> <a href="https://plus.google.com/share?url=http://blog.benoitvallon.com/sorting-algorithms-in-javascript/the-quicksort-algorithm/" class="google-plus" title="Share on Google Plus"><i class="fa fa-google-plus" aria-hidden="true"></i><span>Google+</span></a> </li> 
        <li> <a href="https://www.linkedin.com/shareArticle?url=http://blog.benoitvallon.com/sorting-algorithms-in-javascript/the-quicksort-algorithm/" class="linkedin" title="Share on Linkedin"><i class="fa fa-linkedin" aria-hidden="true"></i><span>Linkedin</span></a> </li> 
       </ul> 
      </div> 
      <hr> 
      <div class="related-posts"> 
       <div class="related-posts-heading">
        Hungry for more?
       </div> 
       <ul> 
        <li> <a class="post-link" href="/tips/flattening-arrays-in-javascript/">Flattening arrays in JavaScript</a> in <span class="related-category"> <a href="/category/tips/">tips</a> </span> </li> 
        <li> <a class="post-link" href="/tips/getting-started-with-spring-boot/">Getting started with Spring Boot</a> in <span class="related-category"> <a href="/category/tips/">tips</a> </span> </li> 
        <li> <a class="post-link" href="/sorting-algorithms-in-javascript/the-merge-sort-algorithm/">The Merge sort algorithm</a> in <span class="related-category"> <a href="/category/sorting-algorithms-in-javascript/">sorting algorithms in javascript</a> </span> </li> 
        <li> <a class="post-link" href="/sorting-algorithms-in-javascript/the-shellsort-algorithm/">The Shellsort algorithm</a> in <span class="related-category"> <a href="/category/sorting-algorithms-in-javascript/">sorting algorithms in javascript</a> </span> </li> 
        <li> <a class="post-link" href="/sorting-algorithms-in-javascript/the-insertion-sort-algorithm/">The Insertion sort algorithm</a> in <span class="related-category"> <a href="/category/sorting-algorithms-in-javascript/">sorting algorithms in javascript</a> </span> </li> 
       </ul> 
      </div> 
      <hr> 
      <div id="disqus_thread"></div> 
      <script type="text/javascript">
    /* * * CONFIGURATION VARIABLES * * */
    var disqus_shortname = 'benoitvallon';

    /* * * DON'T EDIT BELOW THIS LINE * * */
    (function() {
        var dsq = document.createElement('script'); dsq.type = 'text/javascript'; dsq.async = true;
        dsq.src = '//' + disqus_shortname + '.disqus.com/embed.js';
        (document.getElementsByTagName('head')[0] || document.getElementsByTagName('body')[0]).appendChild(dsq);
    })();
</script> 
      <noscript>
       Please enable JavaScript to view the 
       <a href="https://disqus.com/?ref_noscript" rel="nofollow">comments powered by Disqus.</a>
      </noscript> 
     </div> 
    </div> 
   </div> 
  </article> 
  <hr> 
  <!-- Footer --> 
  <footer> 
   <div class="container"> 
    <div class="row"> 
     <div class="col-lg-8 col-lg-offset-2 col-md-10 col-md-offset-1"> 
      <ul class="list-inline text-center"> 
       <li> <a href="/feed.xml"> <span class="fa-stack fa-lg"> <i class="fa fa-circle fa-stack-2x"></i> <i class="fa fa-rss fa-stack-1x fa-inverse"></i> </span> </a> </li> 
       <li> <a href="https://twitter.com/benoitvallon"> <span class="fa-stack fa-lg"> <i class="fa fa-circle fa-stack-2x"></i> <i class="fa fa-twitter fa-stack-1x fa-inverse"></i> </span> </a> </li> 
       <li> <a href="https://github.com/benoitvallon"> <span class="fa-stack fa-lg"> <i class="fa fa-circle fa-stack-2x"></i> <i class="fa fa-github fa-stack-1x fa-inverse"></i> </span> </a> </li> 
       <li> <a href="https://www.linkedin.com/in/benoitvallon"> <span class="fa-stack fa-lg"> <i class="fa fa-circle fa-stack-2x"></i> <i class="fa fa-linkedin fa-stack-1x fa-inverse"></i> </span> </a> </li> 
      </ul> 
      <p class="copyright text-muted">Copyright © Ben's Blog 2016</p> 
     </div> 
    </div> 
   </div> 
  </footer> 
  <script src="/js/main.js "></script> 
  <!-- Google Analytics --> 
  <script>
      (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
      (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
      m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
      })(window,document,'script','//www.google-analytics.com/analytics.js','ga');

      ga('create', 'UA-63129957-1', 'auto');
      ga('send', 'pageview');

    </script> 
  <!-- End Google Analytics -->   
 </body>
</html>