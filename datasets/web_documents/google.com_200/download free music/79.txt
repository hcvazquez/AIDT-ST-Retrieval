<!doctype html>
<html>
 <head> 
  <script type="text/javascript">window.NREUM||(NREUM={});NREUM.info={"beacon":"bam.nr-data.net","errorBeacon":"bam.nr-data.net","licenseKey":"6292180984","applicationID":"11379187","transactionName":"cw5XTUYJVV5WRhsBWEUTSlxHSUpaXEM=","queueTime":0,"applicationTime":26,"agent":""}</script> 
  <script type="text/javascript">window.NREUM||(NREUM={}),__nr_require=function(e,n,t){function r(t){if(!n[t]){var o=n[t]={exports:{}};e[t][0].call(o.exports,function(n){var o=e[t][1][n];return r(o||n)},o,o.exports)}return n[t].exports}if("function"==typeof __nr_require)return __nr_require;for(var o=0;o<t.length;o++)r(t[o]);return r}({1:[function(e,n,t){function r(){}function o(e,n,t){return function(){return i(e,[c.now()].concat(u(arguments)),n?null:this,t),n?void 0:this}}var i=e("handle"),a=e(2),u=e(3),f=e("ee").get("tracer"),c=e("loader"),s=NREUM;"undefined"==typeof window.newrelic&&(newrelic=s);var p=["setPageViewName","setCustomAttribute","setErrorHandler","finished","addToTrace","inlineHit","addRelease"],d="api-",l=d+"ixn-";a(p,function(e,n){s[n]=o(d+n,!0,"api")}),s.addPageAction=o(d+"addPageAction",!0),s.setCurrentRouteName=o(d+"routeName",!0),n.exports=newrelic,s.interaction=function(){return(new r).get()};var m=r.prototype={createTracer:function(e,n){var t={},r=this,o="function"==typeof n;return i(l+"tracer",[c.now(),e,t],r),function(){if(f.emit((o?"":"no-")+"fn-start",[c.now(),r,o],t),o)try{return n.apply(this,arguments)}finally{f.emit("fn-end",[c.now()],t)}}}};a("setName,setAttribute,save,ignore,onEnd,getContext,end,get".split(","),function(e,n){m[n]=o(l+n)}),newrelic.noticeError=function(e){"string"==typeof e&&(e=new Error(e)),i("err",[e,c.now()])}},{}],2:[function(e,n,t){function r(e,n){var t=[],r="",i=0;for(r in e)o.call(e,r)&&(t[i]=n(r,e[r]),i+=1);return t}var o=Object.prototype.hasOwnProperty;n.exports=r},{}],3:[function(e,n,t){function r(e,n,t){n||(n=0),"undefined"==typeof t&&(t=e?e.length:0);for(var r=-1,o=t-n||0,i=Array(o<0?0:o);++r<o;)i[r]=e[n+r];return i}n.exports=r},{}],4:[function(e,n,t){n.exports={exists:"undefined"!=typeof window.performance&&window.performance.timing&&"undefined"!=typeof window.performance.timing.navigationStart}},{}],ee:[function(e,n,t){function r(){}function o(e){function n(e){return e&&e instanceof r?e:e?f(e,u,i):i()}function t(t,r,o,i){if(!d.aborted||i){e&&e(t,r,o);for(var a=n(o),u=m(t),f=u.length,c=0;c<f;c++)u[c].apply(a,r);var p=s[y[t]];return p&&p.push([b,t,r,a]),a}}function l(e,n){v[e]=m(e).concat(n)}function m(e){return v[e]||[]}function w(e){return p[e]=p[e]||o(t)}function g(e,n){c(e,function(e,t){n=n||"feature",y[t]=n,n in s||(s[n]=[])})}var v={},y={},b={on:l,emit:t,get:w,listeners:m,context:n,buffer:g,abort:a,aborted:!1};return b}function i(){return new r}function a(){(s.api||s.feature)&&(d.aborted=!0,s=d.backlog={})}var u="nr@context",f=e("gos"),c=e(2),s={},p={},d=n.exports=o();d.backlog=s},{}],gos:[function(e,n,t){function r(e,n,t){if(o.call(e,n))return e[n];var r=t();if(Object.defineProperty&&Object.keys)try{return Object.defineProperty(e,n,{value:r,writable:!0,enumerable:!1}),r}catch(i){}return e[n]=r,r}var o=Object.prototype.hasOwnProperty;n.exports=r},{}],handle:[function(e,n,t){function r(e,n,t,r){o.buffer([e],r),o.emit(e,n,t)}var o=e("ee").get("handle");n.exports=r,r.ee=o},{}],id:[function(e,n,t){function r(e){var n=typeof e;return!e||"object"!==n&&"function"!==n?-1:e===window?0:a(e,i,function(){return o++})}var o=1,i="nr@id",a=e("gos");n.exports=r},{}],loader:[function(e,n,t){function r(){if(!x++){var e=h.info=NREUM.info,n=d.getElementsByTagName("script")[0];if(setTimeout(s.abort,3e4),!(e&&e.licenseKey&&e.applicationID&&n))return s.abort();c(y,function(n,t){e[n]||(e[n]=t)}),f("mark",["onload",a()+h.offset],null,"api");var t=d.createElement("script");t.src="https://"+e.agent,n.parentNode.insertBefore(t,n)}}function o(){"complete"===d.readyState&&i()}function i(){f("mark",["domContent",a()+h.offset],null,"api")}function a(){return E.exists&&performance.now?Math.round(performance.now()):(u=Math.max((new Date).getTime(),u))-h.offset}var u=(new Date).getTime(),f=e("handle"),c=e(2),s=e("ee"),p=window,d=p.document,l="addEventListener",m="attachEvent",w=p.XMLHttpRequest,g=w&&w.prototype;NREUM.o={ST:setTimeout,SI:p.setImmediate,CT:clearTimeout,XHR:w,REQ:p.Request,EV:p.Event,PR:p.Promise,MO:p.MutationObserver};var v=""+location,y={beacon:"bam.nr-data.net",errorBeacon:"bam.nr-data.net",agent:"js-agent.newrelic.com/nr-1044.min.js"},b=w&&g&&g[l]&&!/CriOS/.test(navigator.userAgent),h=n.exports={offset:u,now:a,origin:v,features:{},xhrWrappable:b};e(1),d[l]?(d[l]("DOMContentLoaded",i,!1),p[l]("load",r,!1)):(d[m]("onreadystatechange",o),p[m]("onload",r)),f("mark",["firstbyte",u],null,"api");var x=0,E=e(4)},{}]},{},["loader"]);</script> 
  <script type="text/javascript">
  !function(){var analytics=window.analytics=window.analytics||[];if(!analytics.initialize)if(analytics.invoked)window.console&&console.error&&console.error("Segment snippet included twice.");else{analytics.invoked=!0;analytics.methods=["trackSubmit","trackClick","trackLink","trackForm","pageview","identify","reset","group","track","ready","alias","page","once","off","on"];analytics.factory=function(t){return function(){var e=Array.prototype.slice.call(arguments);e.unshift(t);analytics.push(e);return analytics}};for(var t=0;t<analytics.methods.length;t++){var e=analytics.methods[t];analytics[e]=analytics.factory(e)}analytics.load=function(t){var e=document.createElement("script");e.type="text/javascript";e.async=!0;e.src=("https:"===document.location.protocol?"https://":"http://")+"cdn.segment.com/analytics.js/v1/"+t+"/analytics.min.js";var n=document.getElementsByTagName("script")[0];n.parentNode.insertBefore(e,n)};analytics.SNIPPET_VERSION="3.1.0";
  analytics.load('qHRg9TsCUu2kVgBDoycamjAYbe7fkprw');
  }}();window.stripePubKey='pk_live_2vJQ3CFTUejIVZsmF5G2JkAt';
  </script> 
  <title>Mastering the Ionic Framework: Learn to Build &amp; Deploy Native Speed HTML5 Based Apps - Thinkster</title> 
  <meta name="viewport" content="width=device-width, initial-scale=1"> 
  <link href="https://thinkster.io/ionic-framework-tutorial" rel="canonical"> 
  <meta name="description" content="In this tutorial you'll learn how to use AngularJS and the Ionic Framework to build robust, silky smooth hybrid mobile apps."> 
  <meta name="og:title" content="Mastering the Ionic Framework: Learn to Build &amp; Deploy Native Speed HTML5 Based Apps - Thinkster"> 
  <meta name="og:type" content="website"> 
  <meta name="og:url" content="https://thinkster.io/ionic-framework-tutorial"> 
  <meta name="og:image" content="https://thinkster.io/assets/icon-b5f9e5bd1767dfe0b6f6d19df5f5ff3764aaf28bace674d55621163e2a92165c.png"> 
  <meta name="og:description" content="In this tutorial you'll learn how to use AngularJS and the Ionic Framework to build robust, silky smooth hybrid mobile apps."> 
  <meta name="twitter:card" content="summary"> 
  <meta name="twitter:image" content="https://thinkster.io/assets/icon-b5f9e5bd1767dfe0b6f6d19df5f5ff3764aaf28bace674d55621163e2a92165c.png"> 
  <meta name="twitter:site" content="@GoThinkster"> 
  <meta name="twitter:title" content="Mastering the Ionic Framework: Learn to Build &amp; Deploy Native Speed HTML5 Based Apps - Thinkster"> 
  <meta name="twitter:description" content="In this tutorial you'll learn how to use AngularJS and the Ionic Framework to build robust, silky smooth hybrid mobile apps."> 
  <link rel="icon" type="image/png" href="/assets/favicon-84701580c3bdb2834ecc0160e756cb0cc894fcb8750b2c7221efb735b6fcfd81.png"> 
  <link rel="apple-touch-icon" href="/assets/icon-b5f9e5bd1767dfe0b6f6d19df5f5ff3764aaf28bace674d55621163e2a92165c.png"> 
  <link rel="stylesheet" media="all" href="/assets/application-95dd61d0104738bdacf051ccdf28ef7f1dc119d943ce84e4ac9e43e4742ae4a7.css" data-turbolinks-track="reload"> 
  <link href="https://cdnjs.cloudflare.com/ajax/libs/ionicons/2.0.1/css/ionicons.min.css" rel="stylesheet" type="text/css"> 
  <link href="https://fonts.googleapis.com/css?family=Lato:400,700,400italic,300,300italic|Roboto:400,300,500|Merriweather:300,300italic,400,400i,700,700i" rel="stylesheet" type="text/css"> 
  <script src="/assets/application-3d6f9db3524ae5a2f362dfbaa853036f1e9df5485c4e1c4fe2ca841bb0f3734e.js" data-turbolinks-track="reload"></script> 
 </head> 
 <body> 
  <script type="text/javascript">
  analytics.page();
</script> 
  <div class="js-react-on-rails-component" style="display:none" data-component-name="Header" data-props="{&quot;logo&quot;:&quot;/assets/logo_white-8fe7a91217289bda01394dc37f2c6afd544f17d4e17825803805630294bee76a.png&quot;}" data-trace="false" data-dom-id="Header-react-component-15630b2e-4029-46c1-a993-b5206ec60d71"></div> 
  <div id="Header-react-component-15630b2e-4029-46c1-a993-b5206ec60d71">
   <div class="app-header" data-reactroot="" data-reactid="1" data-react-checksum="333008638">
    <div class="contain" data-reactid="2">
     <div class="item" data-reactid="3">
      <a href="/" class="branding" data-reactid="4"><img src="/assets/logo_white-8fe7a91217289bda01394dc37f2c6afd544f17d4e17825803805630294bee76a.png" style="border:0;" class="logo" alt="Thinkster" data-reactid="5"></a>
     </div>
     <div class="hold-right" data-reactid="6">
      <div class="item hide-on-mobile" data-reactid="7">
       <a href="/#start-learning" data-reactid="8">Topics</a>
      </div>
      <div class="item hide-on-mobile" data-reactid="9">
       <a href="/pro" data-reactid="10">Pro</a>
      </div>
      <div class="item hide-on-mobile" data-reactid="11">
       <a href="/about" data-reactid="12">About</a>
      </div>
      <div class="login" data-reactid="13">
       <div class="sso-box" data-reactid="14">
        <div class="sso-btn" data-reactid="15">
         <i class="ion-social-github" data-reactid="16"></i>
         <span data-reactid="17">Sign in with Github</span>
        </div>
        <a href="/login" class="email-opt" data-reactid="18">or via email</a>
       </div>
      </div>
     </div>
    </div>
   </div>
  </div> 
  <div class="header-push"></div> 
  <div class="coursepage"> 
   <div class="splash"> 
    <div class="container"> 
     <h1>Mastering the Ionic Framework: Learn to Build &amp; Deploy Native Speed HTML5 Based Apps</h1> 
    </div> 
    <div class="preview" style="background-image: url('/assets/ionic-header-cca9648782a2c63eb7e4cd0c157085c3d348ec49e2f19110eed117e523ca7699.png')"></div> 
    <div class="course-info"> 
     <div class="wrapper"> 
      <div id="nl-subscribe-top" class="sect nl-subscribe"> 
       <div id="js-react-on-rails-context" style="display:none" data-rails-context="{&quot;inMailer&quot;:false,&quot;i18nLocale&quot;:&quot;en&quot;,&quot;i18nDefaultLocale&quot;:&quot;en&quot;,&quot;href&quot;:&quot;https://thinkster.io/ionic-framework-tutorial&quot;,&quot;location&quot;:&quot;/ionic-framework-tutorial&quot;,&quot;scheme&quot;:&quot;https&quot;,&quot;host&quot;:&quot;thinkster.io&quot;,&quot;port&quot;:null,&quot;pathname&quot;:&quot;/ionic-framework-tutorial&quot;,&quot;search&quot;:null,&quot;httpAcceptLanguage&quot;:null,&quot;serverSide&quot;:false}"></div> 
       <div class="js-react-on-rails-component" style="display:none" data-component-name="EmailCapture" data-props="{}" data-trace="false" data-dom-id="EmailCapture-react-component-369d5eb9-74fe-4603-8582-e9ce1804f52d"></div> 
       <div id="EmailCapture-react-component-369d5eb9-74fe-4603-8582-e9ce1804f52d"></div> 
      </div> 
      <div class="sect author"> 
       <a href="https://twitter.com/ericsimons40" target="_blank"> <img src="https://twitter.com/ericsimons40/profile_image?size=mini"> <span>Eric Simons</span> </a> 
      </div> 
      <div class="sect graph-tags"> 
       <img border="0" title="Knowledge Graph" src="/assets/network2-0ab3510a356bc3d015cae9e66a2b7c43d6cf5b433250e20cd2f8e399a058d099.png" alt="Network2"> 
       <a href="/topics/ionic">Ionic</a> 
       <a href="/topics/angular">AngularJS</a> 
      </div> 
      <div class="js-react-on-rails-component" style="display:none" data-component-name="Download" data-props="{&quot;courseSlug&quot;:&quot;ionic-framework-tutorial&quot;}" data-trace="false" data-dom-id="Download-react-component-3d5f141b-df59-4e83-afc7-fbefa1eb5c82"></div> 
      <div id="Download-react-component-3d5f141b-df59-4e83-afc7-fbefa1eb5c82"></div> 
     </div> 
    </div> 
   </div> 
   <div class="chrome"> 
    <div class="toc"> 
     <div class="js-react-on-rails-component" style="display:none" data-component-name="Sidebar" data-props="{&quot;toc&quot;:[[{&quot;slug&quot;:&quot;a-phoenix-arises&quot;,&quot;title&quot;:&quot;A Phoenix Arises&quot;},[{&quot;slug&quot;:&quot;introducing-ionic&quot;,&quot;title&quot;:&quot;Introducing Ionic.&quot;},{&quot;slug&quot;:&quot;what-we-re-going-to-build&quot;,&quot;title&quot;:&quot;What we're going to build&quot;},{&quot;slug&quot;:&quot;prerequisites&quot;,&quot;title&quot;:&quot;Prerequisites&quot;},{&quot;slug&quot;:&quot;recommendations-for-completing-this-course&quot;,&quot;title&quot;:&quot;Recommendations for completing this course&quot;}]],[{&quot;slug&quot;:&quot;starting-our-project&quot;,&quot;title&quot;:&quot;Starting our project&quot;},[{&quot;slug&quot;:&quot;the-guts-of-an-ionic-application&quot;,&quot;title&quot;:&quot;The guts of an Ionic application&quot;}]],[{&quot;slug&quot;:&quot;building-interface-functionality&quot;,&quot;title&quot;:&quot;Building interface functionality&quot;},[{&quot;slug&quot;:&quot;using-animations&quot;,&quot;title&quot;:&quot;Using animations&quot;},{&quot;slug&quot;:&quot;adding-removing-and-retrieving-favorited-songs&quot;,&quot;title&quot;:&quot;Adding, Removing and Retrieving Favorited Songs&quot;}]],[{&quot;slug&quot;:&quot;wiring-up-to-a-server&quot;,&quot;title&quot;:&quot;Wiring Up to A Server&quot;}],[{&quot;slug&quot;:&quot;playing-managing-audio&quot;,&quot;title&quot;:&quot;Playing \u0026 managing audio&quot;}],[{&quot;slug&quot;:&quot;wrapping-up-the-ui-and-core-functionality&quot;,&quot;title&quot;:&quot;Wrapping up the UI and core functionality&quot;},[{&quot;slug&quot;:&quot;adding-badges-to-the-tab-bar&quot;,&quot;title&quot;:&quot;Adding badges to the tab bar&quot;}]],[{&quot;slug&quot;:&quot;creating-and-persisting-user-data&quot;,&quot;title&quot;:&quot;Creating and persisting user data&quot;},[{&quot;slug&quot;:&quot;some-ionic-challenges-for-those-hungry-for-more&quot;,&quot;title&quot;:&quot;Some Ionic challenges for those hungry for more&quot;}]],[{&quot;slug&quot;:&quot;deploying-to-the-emulator-devices-and-app-stores&quot;,&quot;title&quot;:&quot;Deploying to the emulator, devices and App Stores&quot;},[{&quot;slug&quot;:&quot;setting-up-our-project-for-cordova&quot;,&quot;title&quot;:&quot;Setting up our project for Cordova&quot;},{&quot;slug&quot;:&quot;running-apps-in-the-emulator&quot;,&quot;title&quot;:&quot;Running apps in the emulator&quot;},{&quot;slug&quot;:&quot;running-the-application-on-your-device&quot;,&quot;title&quot;:&quot;Running the application on your device&quot;},{&quot;slug&quot;:&quot;debugging-on-ios-android&quot;,&quot;title&quot;:&quot;Debugging on iOS/Android&quot;},{&quot;slug&quot;:&quot;deploying-to-app-stores&quot;,&quot;title&quot;:&quot;Deploying to App Stores&quot;}]],[{&quot;slug&quot;:&quot;app-development-is-a-journey-not-a-destination&quot;,&quot;title&quot;:&quot;App development is a journey, not a destination&quot;}]],&quot;courseSlug&quot;:&quot;ionic-framework-tutorial&quot;}" data-trace="false" data-dom-id="Sidebar-react-component-f52f6a3e-de1f-4714-8ed6-b210151f256c"></div> 
     <div id="Sidebar-react-component-f52f6a3e-de1f-4714-8ed6-b210151f256c"></div> 
    </div> 
    <div class="content"> 
     <div class="wrap" id="course-wrapper"> 
      <div class="course-section" id="a-phoenix-arises">
       <h1>A Phoenix Arises</h1>
       <p>Web development technologies have evolved at an incredible clip over the past few years. We've gone from rudimentary DOM manipulation with libraries like jQuery to supercharged web applications organized &amp; powered by elegant MV* based frameworks like AngularJS. Pair this with significant increases in browser rendering speeds, and it is now easier than ever before to build production quality applications on top of Javascript, HTML5, and CSS3.</p>
       <p>While these advances have been incredible, they are only just starting to affect the clear platform of the future: mobile. For years, mobile rendering speeds were atrocious, and the MVC frameworks &amp; UI libraries provided by iOS and Android were far superior to writing mobile apps using web technologies. There were also some very public failures -- Facebook famously wrote their first iOS app in 2011 using HTML5 but ended up scrapping it due to terrible performance.</p>
       <p>For years now, hybrid apps have been mocked and jeered by native app developers for being clunky and ugly, having subpar performance, and having no advantages over native apps. While these may have been valid reasons in 2011, they are now virtually baseless, thanks to a collection of new technologies that have emerged over the past two years. With these technologies, you can design, build, and deploy robust mobile apps faster than you could with native technologies, all while incurring little to no app performance penalties. This is thanks in large part to super fast mobile browser rendering speeds and better JavaScript performance. This course is designed to teach you how to effectively use these new technologies to build insanely great mobile apps.</p>
       <p>Without further ado, we'd like to welcome you to the future of mobile app development, freed from the shackles of native languages &amp; frameworks. Let's learn what the new mobile stack consists of and how it works.</p> 
       <h2 id="introducing-ionic">Introducing Ionic.</h2> 
       <div class="js-react-on-rails-component" style="display:none" data-component-name="Video" data-props="{&quot;slug&quot;:&quot;completed-songhop-demo&quot;,&quot;provider&quot;:&quot;youtube&quot;,&quot;courseSlug&quot;:&quot;ionic-framework-tutorial&quot;,&quot;pro&quot;:false,&quot;thumbnailUrl&quot;:null,&quot;video&quot;:{&quot;id&quot;:84,&quot;provider_name&quot;:&quot;youtube&quot;,&quot;provider_id&quot;:&quot;jTS9ZaDo1W8&quot;,&quot;slug&quot;:&quot;completed-songhop-demo&quot;,&quot;pro&quot;:false,&quot;course_id&quot;:62,&quot;created_at&quot;:&quot;2015-09-20T08:52:26.946Z&quot;,&quot;updated_at&quot;:&quot;2015-09-20T08:52:26.946Z&quot;,&quot;thumbnail_url&quot;:null}}" data-trace="true" data-dom-id="Video-react-component-96a0a90f-32e4-4bfe-8ab2-7c466b09d379"></div> 
       <div id="Video-react-component-96a0a90f-32e4-4bfe-8ab2-7c466b09d379"></div> 
       <p>Before, building hybrid apps was a chore -- not because it was hard to build web pages, but because it was hard to build full-fledged web applications. With AngularJS, that has changed. As a result, Angular became the core innovation that made hybrid apps possible. The bright folks at Drifty were some of the first to realize this and subsequently created the <a href="http://ionicframework.com/" target="_blank">Ionic Framework</a> to bridge the gap between AngularJS web apps and hybrid mobile apps. Since launching a little over a year ago, the Ionic Framework has <a href="http://www.google.com/trends/explore?hl=en-US&amp;q=ionic+framework&amp;cmpt=q&amp;tz&amp;tz&amp;content=1" target="_blank">quickly grown in popularity amongst developers</a> and their <a href="https://github.com/driftyco/ionic" target="_blank">main Github repo</a> has over 13K stars as of this writing.</p>
       <p>Ionic provides similar functionality for AngularJS that <a href="https://developer.apple.com/library/ios/documentation/UIKit/Reference/UIKit_Framework/" target="_blank">iOS UIKit</a> provides for Obj-C/Swift, and that <a href="http://developer.android.com/guide/topics/ui/overview.html" target="_blank">Android UI elements</a> provides for Java. Core mobile UI paradigms are available to developers out of the box, which means that developers can focus on building apps, instead of common user interface elements. Some examples of these include <a href="http://ionicframework.com/docs/api/directive/ionList/" target="_blank">list views</a>, <a href="http://ionicframework.com/docs/api/directive/ionNavView/" target="_blank">stateful navigation</a>, <a href="http://ionicframework.com/docs/nightly/api/directive/ionTabs/" target="_blank">tab bars</a>, <a href="http://ionicframework.com/docs/api/service/$ionicActionSheet/" target="_blank">action sheets</a>, and <a href="http://ionicframework.com/docs/nightly/api/" target="_blank">so much more</a>.</p>
       <div class="js-react-on-rails-component" style="display:none" data-component-name="Checkbox" data-props="{&quot;checkboxSlug&quot;:&quot;where-ionic-fits&quot;,&quot;courseSlug&quot;:&quot;ionic-framework-tutorial&quot;,&quot;content&quot;:&quot;For a more in-depth view of where Ionic fits into our hybrid app stack, \u003ca href=\&quot;http://ionicframework.com/blog/where-does-the-ionic-framework-fit-in/\&quot; target=\&quot;_blank\&quot;\u003eread this blog post\u003c/a\u003e from one of Ionic\u0026#39;s core developers and \u003ca href=\&quot;http://ionicframework.com/docs/overview/\&quot; target=\&quot;_blank\&quot;\u003eread the \u0026quot;Overview\u0026quot; section\u003c/a\u003e on their About page.&quot;,&quot;isFirst&quot;:true}" data-trace="true" data-dom-id="Checkbox-react-component-149eafdf-e8cd-4af1-84e9-52cc532b7d51"></div> 
       <div id="Checkbox-react-component-149eafdf-e8cd-4af1-84e9-52cc532b7d51"></div> 
       <p>Ionic is a great solution for creating both mobile web apps and native apps. The first sections of this course will go over structuring Ionic apps that can run on the web. Then we will cover packaging that same exact code into a native app. We will be using a build tool called Cordova for packaging our app. For those unfamiliar with Cordova, it is the open source core of Adobe's proprietary PhoneGap build system. Adobe describes it with this analogy: Cordova is to PhoneGap as Blink is to Chrome. Basically, PhoneGap is Cordova plus a whole bunch of other Adobe stuff.</p>
       <div class="js-react-on-rails-component" style="display:none" data-component-name="Checkbox" data-props="{&quot;checkboxSlug&quot;:&quot;cordova-vs-phonegap&quot;,&quot;courseSlug&quot;:&quot;ionic-framework-tutorial&quot;,&quot;content&quot;:&quot;\u003ca href=\&quot;http://ionicframework.com/blog/what-is-cordova-phonegap/\&quot; target=\&quot;_blank\&quot;\u003eRead this post for a more in depth understanding of the differences between Cordova and PhoneGap\u003c/a\u003e&quot;}" data-trace="true" data-dom-id="Checkbox-react-component-9972e274-b4ce-4cae-b50c-4568f2c8637e"></div> 
       <div id="Checkbox-react-component-9972e274-b4ce-4cae-b50c-4568f2c8637e"></div> 
       <p>The folks at Ionic have done a fantastic job of making Cordova super easy to use by directly wrapping it in their 'ionic' command line tool (don't worry, we'll cover this later). Just remember that Cordova is something that is running under the hood of your hybrid app that you will rarely need to worry about, but we will cover some common interactions with it in this course.</p> 
       <h2 id="what-we-re-going-to-build">What we're going to build</h2> 
       <p>We will be building an app called Songhop, a "Tinder for music" app that allows you to listen to 30-second song samples and favorite the ones you like. This is based on a real Ionic/Cordova powered app we built that exists on the <a href="https://itunes.apple.com/us/app/songhop/id899245239?mt=8" target="_blank">iOS App Store</a> -- feel free to download it to get a feeling for what Ionic is capable of (and rate it 5 stars :). It's also worth noting that it only took us a month to build the Songhop app that's on the App Store, so that should give you an idea of how fast you can build &amp; iterate using Ionic / Cordova.</p>
       <p><strong>You can also see a <a href="https://ionic-songhop.herokuapp.com" target="_blank">live demo of the completed application we'll be building here</a> (resize your browser window to the size of a phone for the best experience).</strong></p>
       <p>We'll be covering a wide variety of topics in this course: scaffolding a new application, testing it in the emulator, installing native plugins for manipulating audio &amp; files, swipe gestures for our interface, installing the app on your own device, deploying to the iOS &amp; Android app stores, and so much more.</p> 
       <h2 id="prerequisites">Prerequisites</h2> 
       <div class="js-react-on-rails-component" style="display:none" data-component-name="Checkbox" data-props="{&quot;checkboxSlug&quot;:&quot;javascript-prereq&quot;,&quot;courseSlug&quot;:&quot;ionic-framework-tutorial&quot;,&quot;content&quot;:&quot;\u003cstrong\u003eBasic programming / JavaScript knowledge.\u003c/strong\u003e If you don\u0026#39;t know JavaScript, \u003ca href=\&quot;http://sivers.org/learn-js\&quot; target=\&quot;_blank\&quot;\u003ethis guide is a good place to start\u003c/a\u003e.&quot;}" data-trace="true" data-dom-id="Checkbox-react-component-f137833b-1646-42d0-b154-b9aaeeee3e13"></div> 
       <div id="Checkbox-react-component-f137833b-1646-42d0-b154-b9aaeeee3e13"></div> 
       <div class="js-react-on-rails-component" style="display:none" data-component-name="Checkbox" data-props="{&quot;checkboxSlug&quot;:&quot;angular-prereq&quot;,&quot;courseSlug&quot;:&quot;ionic-framework-tutorial&quot;,&quot;content&quot;:&quot;\u003cstrong\u003eFamiliarity with AngularJS.\u003c/strong\u003e We will be using AngularJS for much of our app logic. If you aren\u0026#39;t familiar with AngularJS, we highly recommend going through the course \u003ca href=\&quot;https://thinkster.io/a-better-way-to-learn-angularjs/\&quot; target=\&quot;_blank\&quot;\u003e\u0026quot;A Better Way to Learn AngularJS\u0026quot;\u003c/a\u003e.&quot;}" data-trace="true" data-dom-id="Checkbox-react-component-f66eaf01-19eb-4eec-a166-3620931b3d05"></div> 
       <div id="Checkbox-react-component-f66eaf01-19eb-4eec-a166-3620931b3d05"></div> 
       <p>In addition, you should be comfortable with basic web application concepts including <a href="http://www.restapitutorial.com/lessons/whatisrest.html" target="_blank">REST</a> and <a href="http://en.wikipedia.org/wiki/Create,_read,_update_and_delete" target="_blank">CRUD</a>.</p>
       <p>It's best to have either a Linux based OS or Mac to complete this tutorial. While it's certainly possible to develop on Windows, we won't be covering the specifics of running, debugging, and troubleshooting for Windows based systems.</p>
       <div class="js-react-on-rails-component" style="display:none" data-component-name="Checkbox" data-props="{&quot;checkboxSlug&quot;:&quot;install-node&quot;,&quot;courseSlug&quot;:&quot;ionic-framework-tutorial&quot;,&quot;content&quot;:&quot; \u003cstrong\u003eInstall Node.js\u003c/strong\u003e. Since you will need to install various packages for Node.js, we recommend that you follow \u003ca href=\&quot;https://github.com/joyent/node/wiki/Installing-Node.js-via-package-manager\&quot; target=\&quot;_blank\&quot;\u003ethese installation instructions\u003c/a\u003e which use \u003ca href=\&quot;https://www.npmjs.com/\&quot; target=\&quot;_blank\&quot;\u003enpm\u003c/a\u003e.&quot;}" data-trace="true" data-dom-id="Checkbox-react-component-d23e62b5-7d2a-40dd-b157-71f1b6820390"></div> 
       <div id="Checkbox-react-component-d23e62b5-7d2a-40dd-b157-71f1b6820390"></div> 
       <div class="js-react-on-rails-component" style="display:none" data-component-name="Checkbox" data-props="{&quot;checkboxSlug&quot;:&quot;install-ionic-cli&quot;,&quot;courseSlug&quot;:&quot;ionic-framework-tutorial&quot;,&quot;content&quot;:&quot;\u003cstrong\u003eInstall the \u003ca href=\&quot;http://ionicframework.com/docs/cli/install.html\&quot; target=\&quot;_blank\&quot;\u003eIonic CLI\u003c/a\u003e\u003c/strong\u003e through npm by running \u003ccode\u003enpm install -g ionic\u003c/code\u003e. We\u0026#39;ll be using it to develop and test our app in a web browser, and later for packaging our app into native binaries for mobile devices.&quot;}" data-trace="true" data-dom-id="Checkbox-react-component-8db99896-bfdd-4ab7-868d-187498eb0d50"></div> 
       <div id="Checkbox-react-component-8db99896-bfdd-4ab7-868d-187498eb0d50"></div> 
       <h2 id="recommendations-for-completing-this-course">Recommendations for completing this course</h2> 
       <p>We have structured this course to accommodate folks who are interested in Ionic for building mobile websites as well as those who are interested in building hybrid apps. The first chapters of this course will exclusively cover the JS &amp; CSS portions of the Ionic framework (the only knowledge necessary for building mobile websites), and in the last few chapters we will learn how to package &amp; deploy our application natively for iOS and/or Android.</p>
       <p>Throughout this course, links to additional concepts and information will be included. You can use these links as supplementary material that can help you gain insight into the stack and its various components. As always, if you have any questions, Google and Stackoverflow are your best bet, but if you're unsure about something specific to this course, <strong>feel free to tweet me <a href="https://twitter.com/ericsimons40" target="_blank">@ericsimons40</a></strong>.</p>
       <p>We're firm believers in actually writing code while learning a new language or framework. Therefore, we strongly encourage you to type out all the code instead of copy+pasting it.</p>
      </div>
      <div class="course-section" id="starting-our-project">
       <h1>Starting our project</h1>
       <p>When you want to <a href="http://ionicframework.com/docs/cli/start.html" target="_blank">start a new Ionic project</a>, typically all you need to do is run <code>ionic start myApp blank</code>, and it will scaffold a new application for you. However, for simplicity's sake, we've created a starter project specifically for this course that includes all the base HTML/CSS/JS files we'll be using.</p>
       <div class="js-react-on-rails-component" style="display:none" data-component-name="Checkbox" data-props="{&quot;checkboxSlug&quot;:&quot;fork-app-from-gh&quot;,&quot;courseSlug&quot;:&quot;ionic-framework-tutorial&quot;,&quot;content&quot;:&quot;\u003ca href=\&quot;https://github.com/EricSimons/ionic-course\&quot; target=\&quot;_blank\&quot;\u003eClone the repo for this course\u003c/a\u003e, navigate to the /code/ folder, and then run the command \u003ccode\u003enpm install\u003c/code\u003e.&quot;}" data-trace="true" data-dom-id="Checkbox-react-component-f687b814-827e-41e6-b094-b7bd8f8d1e8f"></div> 
       <div id="Checkbox-react-component-f687b814-827e-41e6-b094-b7bd8f8d1e8f"></div> 
       <p>Now that we have the Songhop project downloaded to our computer, let's get it running in our browser! To do this, we will use the Ionic CLI's command 'serve'. This command starts a local web server with live reload enabled, then opens your browser directly to your application. As you develop your app, it will automatically refresh your web browser every time you save a file. <em>You can learn more about how the ionic serve command works &amp; various configuration options available <a href="http://ionicframework.com/docs/cli/test.html" target="_blank">here</a>.</em></p>
       <div class="js-react-on-rails-component" style="display:none" data-component-name="Checkbox" data-props="{&quot;checkboxSlug&quot;:&quot;run-ionic-serve&quot;,&quot;courseSlug&quot;:&quot;ionic-framework-tutorial&quot;,&quot;content&quot;:&quot;In your terminal, head into the ionic-songhop-app folder and run \u003ccode\u003eionic serve\u003c/code\u003e.&quot;}" data-trace="true" data-dom-id="Checkbox-react-component-d91b6207-b6dd-472d-a686-d16c6bd1418f"></div> 
       <div id="Checkbox-react-component-d91b6207-b6dd-472d-a686-d16c6bd1418f"></div> 
       <p>If all went well, you should be seeing this in your browser window (be sure to resize your browser to be about the size of a phone, or use your browser's phone emulation tools): <img src="images/0.png" alt="The boilerplate songhop template"></p> 
       <h2 id="the-guts-of-an-ionic-application">The guts of an Ionic application</h2> 
       <p>When you scaffold a new application using the Ionic CLI, it automatically creates a handful of files to be used as the baseboard for your hybrid app development. <a href="ionic-app-structure/" target="_blank">This post</a> walks through all of these files and what purposes they serve. The www folder is where you'll be spending most of your time, as that's where you will be writing your JavaScript, HTML and CSS for the Songhop app. Lets explore the different files in /www and see how they're connected to each other.</p>
       <p>The www/index.html file is where your application starts: it loads the JavaScript &amp; CSS files you write (from www/js and www/css), the JavaScript &amp; CSS files that your application depends on, and sets up HTML elements for your AngularJS app to bind to.</p>
       <p>Open up app/index.html in your code editor and look over its structure. Notice that we're attaching our AngularJS application to the body element <code>&lt;body ng-app="songhop"&gt;</code> and all of our views are being rendered in an <a href="http://ionicframework.com/docs/api/directive/ionNavView/" target="_blank">ion-nav-view</a> (and notice the <a href="http://ionicframework.com/docs/api/directive/ionNavBackButton/" target="_blank">ion-nav-back-button</a> too):</p>
       <div class="highlight">
        <pre class=""><code>  <span class="nt">&lt;body</span> <span class="na">ng-app=</span><span class="s">"songhop"</span><span class="nt">&gt;</span>
    <span class="c">&lt;!-- The nav bar that will be updated as we navigate between views. --&gt;</span>
    <span class="nt">&lt;ion-nav-bar</span> <span class="na">class=</span><span class="s">"bar-stable"</span><span class="nt">&gt;</span>
      <span class="nt">&lt;ion-nav-back-button&gt;</span>
      <span class="nt">&lt;/ion-nav-back-button&gt;</span>
    <span class="nt">&lt;/ion-nav-bar&gt;</span>
    <span class="c">&lt;!-- The views will be rendered in the &lt;ion-nav-view&gt; directive below Templates are in the /templates folder (but you could also have templates inline in this html file if you'd like). --&gt;</span>
    <span class="nt">&lt;ion-nav-view&gt;&lt;/ion-nav-view&gt;</span>
  <span class="nt">&lt;/body&gt;</span>
</code></pre>
       </div>
       <p>As we navigate through our app, Ionic uses the <a href="https://github.com/angular-ui/ui-router" target="_blank">AngularUI Router</a> to populate ion-nav-view's with necessary templates and controllers. At this point, you might be wondering, how do we tell an ion-nav-view which templates to display? If you open up /www/js/app.js, in the config block, it defines the states of our application. There are three states currently defined for our app: an <a href="https://github.com/angular-ui/ui-router/wiki/Nested-States-%26-Nested-Views#abstract-states" target="_blank">abstract state</a> called 'tab' that displays templates/tabs.html, and two tab states ('tab.discover', 'tab.favorites') for our Discover and Favorites pages, respectively.</p>
       <p>You may have noticed that our <code>tab.discover</code> and <code>tab.favorites</code> states specify views to be displayed in (in this case, tab.discover is asking to be displayed in a view titled 'tab-discover'):</p>
       <div class="highlight">
        <pre class=""><code>  <span class="p">.</span><span class="nx">state</span><span class="p">(</span><span class="s1">'tab.discover'</span><span class="p">,</span> <span class="p">{</span>
    <span class="na">url</span><span class="p">:</span> <span class="s1">'/discover'</span><span class="p">,</span>
    <span class="na">views</span><span class="p">:</span> <span class="p">{</span>
      <span class="s1">'tab-discover'</span><span class="p">:</span> <span class="p">{</span>
        <span class="na">templateUrl</span><span class="p">:</span> <span class="s1">'templates/discover.html'</span><span class="p">,</span>
        <span class="na">controller</span><span class="p">:</span> <span class="s1">'DiscoverCtrl'</span>
      <span class="p">}</span>
    <span class="p">}</span>
  <span class="p">})</span>
</code></pre>
       </div>
       <p>If you open up templates/tabs.html, you'll see that there are two ion-nav-view elements wrapped inside their respective <a href="http://ionicframework.com/docs/api/directive/ionTabs/" target="_blank">ion-tab</a>. This allows us to programmatically display our templates into a specified tab, with the added benefit of each tab having its own navigation history.</p>
       <p>Finally, let's take a look at the templates of our Discover and Favorites pages. Our templates/discover.html file contains an Ionic <a href="http://ionicframework.com/docs/components/#card-showcase" target="_blank">Card Image</a> containing the song information along with favorite/skip buttons, and templates/favorites.html contains an <a href="http://ionicframework.com/docs/api/directive/ionList/" target="_blank">ion-list</a> of our favorite songs. You'll notice that both pages are wrapped in an <a href="http://ionicframework.com/docs/api/directive/ionView/" target="_blank">ion-view</a> for navigation and header bar purposes, and then an <a href="http://ionicframework.com/docs/api/directive/ionContent/" target="_blank">ion-content</a> where we place all of our content.</p>
       <p>We've used a couple of Ionic's <a href="http://ionicframework.com/docs/components/" target="_blank">CSS Components</a> and <a href="http://ionicframework.com/docs/api/" target="_blank">AngularJS Extensions</a> in this base application, and we strongly recommend checking out other components and extensions that Ionic can do out of the box. Knowing what Ionic can do for you will allow you to build applications quickly, as you can lean on Ionic's pre-built components &amp; extensions instead of writing your own hand-rolled solutions.</p>
       <p>Now that we've explored our base application structure and how everything is wired together, lets start building out the functionality our application!</p>
      </div>
      <div class="course-section" id="building-interface-functionality">
       <h1>Building interface functionality</h1>
       <p>Lets start with our main interface, "Discover", where the user will be presented with songs to "favorite" or "skip".In a few chapters we will retrieve these songs from a server, but for now we'll add some mock data to the discover controller to prototype with.</p>
       <div class="js-react-on-rails-component" style="display:none" data-component-name="Video" data-props="{&quot;slug&quot;:&quot;initial-discover-interface&quot;,&quot;provider&quot;:&quot;wistia&quot;,&quot;courseSlug&quot;:&quot;ionic-framework-tutorial&quot;,&quot;pro&quot;:false,&quot;thumbnailUrl&quot;:&quot;https://embed-ssl.wistia.com/deliveries/3bf8a3af00babdf6b247b855c92472d1da20a142.jpg&quot;}" data-trace="true" data-dom-id="Video-react-component-3b64871d-71c9-4de1-9127-fe6c31c9f38c"></div> 
       <div id="Video-react-component-3b64871d-71c9-4de1-9127-fe6c31c9f38c"></div> 
       <div class="js-react-on-rails-component" style="display:none" data-component-name="Checkbox" data-props="{&quot;checkboxSlug&quot;:&quot;add-mock-data&quot;,&quot;courseSlug&quot;:&quot;ionic-framework-tutorial&quot;,&quot;content&quot;:&quot;Add the \u003ccode\u003e$scope.songs\u003c/code\u003e array to your discover controller (feel free to copy and paste)&quot;}" data-trace="true" data-dom-id="Checkbox-react-component-bf06d1c0-9840-4c36-b4cf-59e1327aced1"></div> 
       <div id="Checkbox-react-component-bf06d1c0-9840-4c36-b4cf-59e1327aced1"></div> 
       <div class="highlight">
        <pre class=""><code><span class="p">.</span><span class="nx">controller</span><span class="p">(</span><span class="s1">'DiscoverCtrl'</span><span class="p">,</span> <span class="kd">function</span><span class="p">(</span><span class="nx">$scope</span><span class="p">)</span> <span class="p">{</span>
  <span class="c1">// our first three songs</span>
  <span class="nx">$scope</span><span class="p">.</span><span class="nx">songs</span> <span class="o">=</span> <span class="p">[</span>
     <span class="p">{</span>
        <span class="s2">"title"</span><span class="p">:</span><span class="s2">"Stealing Cinderella"</span><span class="p">,</span>
        <span class="s2">"artist"</span><span class="p">:</span><span class="s2">"Chuck Wicks"</span><span class="p">,</span>
        <span class="s2">"image_small"</span><span class="p">:</span><span class="s2">"https://i.scdn.co/image/d1f58701179fe768cff26a77a46c56f291343d68"</span><span class="p">,</span>
        <span class="s2">"image_large"</span><span class="p">:</span><span class="s2">"https://i.scdn.co/image/9ce5ea93acd3048312978d1eb5f6d297ff93375d"</span>
     <span class="p">},</span>
     <span class="p">{</span>
        <span class="s2">"title"</span><span class="p">:</span><span class="s2">"Venom - Original Mix"</span><span class="p">,</span>
        <span class="s2">"artist"</span><span class="p">:</span><span class="s2">"Ziggy"</span><span class="p">,</span>
        <span class="s2">"image_small"</span><span class="p">:</span><span class="s2">"https://i.scdn.co/image/1a4ba26961c4606c316e10d5d3d20b736e3e7d27"</span><span class="p">,</span>
        <span class="s2">"image_large"</span><span class="p">:</span><span class="s2">"https://i.scdn.co/image/91a396948e8fc2cf170c781c93dd08b866812f3a"</span>
     <span class="p">},</span>
     <span class="p">{</span>
        <span class="s2">"title"</span><span class="p">:</span><span class="s2">"Do It"</span><span class="p">,</span>
        <span class="s2">"artist"</span><span class="p">:</span><span class="s2">"Rootkit"</span><span class="p">,</span>
        <span class="s2">"image_small"</span><span class="p">:</span><span class="s2">"https://i.scdn.co/image/398df9a33a6019c0e95e3be05fbaf19be0e91138"</span><span class="p">,</span>
        <span class="s2">"image_large"</span><span class="p">:</span><span class="s2">"https://i.scdn.co/image/4e47ee3f6214fabbbed2092a21e62ee2a830058a"</span>
     <span class="p">}</span>
  <span class="p">];</span>
</code></pre>
       </div>
       <p>When a user is on the discover page, at any given time there will be a song that's currently playing. Since we'll need to display the song's metadata in the template (song name, artist, etc), lets create a scope variable called <code>currentSong</code> that will hold all of the current song's information.</p>
       <div class="js-react-on-rails-component" style="display:none" data-component-name="Checkbox" data-props="{&quot;checkboxSlug&quot;:&quot;create-scope.currentSong&quot;,&quot;courseSlug&quot;:&quot;ionic-framework-tutorial&quot;,&quot;content&quot;:&quot;When we first initialize the discover controller, lets set \u003ccode\u003ecurrentSong\u003c/code\u003e to the first song in our songs array: \u003ccode\u003ejavascript   // initialize the current song   $scope.currentSong = angular.copy($scope.songs[0]); \u003c/code\u003e You\u0026#39;ll notice that we used \u003ca href=\&quot;https://docs.angularjs.org/api/ng/function/angular.copy\&quot; target=\&quot;_blank\&quot;\u003eangular.copy()\u003c/a\u003e, which makes a deep copy of the object, instead of creating a reference to the object in our songs array. If you\u0026#39;re unfamiliar with how \u003ccode\u003eangular.copy()\u003c/code\u003e works, you can learn more by \u003ca href=\&quot;https://thinkster.io/egghead/angular-copy\&quot; target=\&quot;_blank\&quot;\u003ewatching this video\u003c/a\u003e.&quot;}" data-trace="true" data-dom-id="Checkbox-react-component-089308a1-f8ea-45e4-a227-a0a6c1e79066"></div> 
       <div id="Checkbox-react-component-089308a1-f8ea-45e4-a227-a0a6c1e79066"></div> 
       <p>Now that the current song is being exposed to the scope, we can wire up our template to the <code>currentSong</code> object.</p>
       <div class="js-react-on-rails-component" style="display:none" data-component-name="Checkbox" data-props="{&quot;checkboxSlug&quot;:&quot;show-song-metadata&quot;,&quot;courseSlug&quot;:&quot;ionic-framework-tutorial&quot;,&quot;content&quot;:&quot;Update our discover.html template to show the current song:&quot;}" data-trace="true" data-dom-id="Checkbox-react-component-047510a7-21b9-4b60-b97c-bd5bbfcb1d5a"></div> 
       <div id="Checkbox-react-component-047510a7-21b9-4b60-b97c-bd5bbfcb1d5a"></div> 
       <div class="highlight">
        <pre class=""><code>      <span class="nt">&lt;div</span> <span class="na">class=</span><span class="s">"item item-image"</span><span class="nt">&gt;</span>
        <span class="nt">&lt;img</span> <span class="na">ng-src=</span><span class="s">"{{ currentSong.image_large }}"</span><span class="nt">&gt;</span>
      <span class="nt">&lt;/div&gt;</span>

      <span class="nt">&lt;div</span> <span class="na">class=</span><span class="s">"item"</span><span class="nt">&gt;</span>
        <span class="nt">&lt;h2&gt;</span>{{ currentSong.title }}<span class="nt">&lt;/h2&gt;</span>
        <span class="nt">&lt;p&gt;</span>{{ currentSong.artist }}<span class="nt">&lt;/p&gt;</span>
      <span class="nt">&lt;/div&gt;</span>
</code></pre>
       </div>
       <p>At this point you should be seeing the album art, artist name, and title of the first song: "Stealing Cinderella" by Chuck Wicks. If you're feeling unmotivated right now, go listen to this song on Spotify, because it totally sucks, and you'll want to hit the skip button out of sheer spite. So for everyone's sanity, let's make that skip button work (as well as the favorite button).</p>
       <p>In our discover controller, let's create a scope method calledl <code>sendFeedback()</code> that is fired when the skip and favorite buttons are pressed. This method will accept one argument: a boolean where true = the song was favorited, and false = the song was skipped.</p>
       <div class="js-react-on-rails-component" style="display:none" data-component-name="Checkbox" data-props="{&quot;checkboxSlug&quot;:&quot;create-sendfeedback-method&quot;,&quot;courseSlug&quot;:&quot;ionic-framework-tutorial&quot;,&quot;content&quot;:&quot;Create the \u003ccode\u003esendFeedback()\u003c/code\u003e method, which (for now) just changes the \u003ccode\u003ecurrentSong\u003c/code\u003e to a random song in our \u003ccode\u003esongs\u003c/code\u003e array. (For those wondering about the unused \u003ccode\u003ebool\u003c/code\u003e argument, don\u0026#39;t worry - we\u0026#39;ll be using it very soon).&quot;}" data-trace="true" data-dom-id="Checkbox-react-component-26184cbd-ae69-4384-8c5d-10f159909530"></div> 
       <div id="Checkbox-react-component-26184cbd-ae69-4384-8c5d-10f159909530"></div> 
       <div class="highlight">
        <pre class=""><code>  <span class="c1">// fired when we favorite / skip a song.</span>
  <span class="nx">$scope</span><span class="p">.</span><span class="nx">sendFeedback</span> <span class="o">=</span> <span class="kd">function</span> <span class="p">(</span><span class="nx">bool</span><span class="p">)</span> <span class="p">{</span>

    <span class="c1">// set the current song to one of our three songs</span>
    <span class="kd">var</span> <span class="nx">randomSong</span> <span class="o">=</span> <span class="nb">Math</span><span class="p">.</span><span class="nx">round</span><span class="p">(</span><span class="nb">Math</span><span class="p">.</span><span class="nx">random</span><span class="p">()</span> <span class="o">*</span> <span class="p">(</span><span class="nx">$scope</span><span class="p">.</span><span class="nx">songs</span><span class="p">.</span><span class="nx">length</span> <span class="o">-</span> <span class="mi">1</span><span class="p">));</span>

    <span class="c1">// update current song in scope</span>
    <span class="nx">$scope</span><span class="p">.</span><span class="nx">currentSong</span> <span class="o">=</span> <span class="nx">angular</span><span class="p">.</span><span class="nx">copy</span><span class="p">(</span><span class="nx">$scope</span><span class="p">.</span><span class="nx">songs</span><span class="p">[</span><span class="nx">randomSong</span><span class="p">]);</span>

  <span class="p">}</span>
</code></pre>
       </div>
       <div class="js-react-on-rails-component" style="display:none" data-component-name="Checkbox" data-props="{&quot;checkboxSlug&quot;:&quot;wireup-feedback-btns&quot;,&quot;courseSlug&quot;:&quot;ionic-framework-tutorial&quot;,&quot;content&quot;:&quot;Now, wire up the skip \u0026amp; feedback buttons to fire the \u003ccode\u003esendFeedback()\u003c/code\u003e method, with \u003ccode\u003efalse\u003c/code\u003e and \u003ccode\u003etrue\u003c/code\u003e as the argument respectively:&quot;}" data-trace="true" data-dom-id="Checkbox-react-component-2aafc7d7-bc86-4a69-8b67-37f9c7cf4f48"></div> 
       <div id="Checkbox-react-component-2aafc7d7-bc86-4a69-8b67-37f9c7cf4f48"></div> 
       <div class="highlight">
        <pre class=""><code>      <span class="nt">&lt;div</span> <span class="na">class=</span><span class="s">"item tabs tabs-secondary tabs-icon-left"</span><span class="nt">&gt;</span>
        <span class="nt">&lt;a</span> <span class="na">class=</span><span class="s">"tab-item"</span> <span class="na">ng-click=</span><span class="s">"sendFeedback(false)"</span><span class="nt">&gt;</span>
          <span class="nt">&lt;i</span> <span class="na">class=</span><span class="s">"icon ion-close"</span><span class="nt">&gt;&lt;/i&gt;</span>
          Skip
        <span class="nt">&lt;/a&gt;</span>
        <span class="nt">&lt;a</span> <span class="na">class=</span><span class="s">"tab-item"</span> <span class="na">ng-click=</span><span class="s">"sendFeedback(true)"</span><span class="nt">&gt;</span>
          <span class="nt">&lt;i</span> <span class="na">class=</span><span class="s">"icon ion-heart"</span><span class="nt">&gt;&lt;/i&gt;</span>
          Favorite
        <span class="nt">&lt;/a&gt;</span>
      <span class="nt">&lt;/div&gt;</span>
</code></pre>
       </div>
       <p>Now, when you hit skip or favorite, you will proceed to a new song!</p> 
       <h2 id="using-animations">Using animations</h2> 
       <div class="js-react-on-rails-component" style="display:none" data-component-name="Video" data-props="{&quot;slug&quot;:&quot;using-animations&quot;,&quot;provider&quot;:&quot;wistia&quot;,&quot;courseSlug&quot;:&quot;ionic-framework-tutorial&quot;,&quot;pro&quot;:false,&quot;thumbnailUrl&quot;:&quot;https://embed-ssl.wistia.com/deliveries/57bf11c85657025f36cb9539d804ce79110e6256.jpg&quot;}" data-trace="true" data-dom-id="Video-react-component-be030ca7-59ad-4a0c-9718-9950fe4ab819"></div> 
       <div id="Video-react-component-be030ca7-59ad-4a0c-9718-9950fe4ab819"></div> 
       <p>Having the song information change is cool, but it would be <em>super</em> cool if the entire card animated left or right if the user skipped or favorited, respectively. We can do this by using <a href="https://docs.angularjs.org/guide/animations" target="_blank">angular animations</a>; open up css/style.css and you can see the <code>ng-hide</code> styles associated with <code>.discover-page .current-song</code>. We've also defined separate animations for <code>.current-song.skipped.ng-hide</code> and <code>.current-song.favorited.ng-hide</code> - this means we will have to add the CSS class <code>.skipped</code> or <code>.favorited</code> to our current song div, depending if the user skips or favorites.</p>
       <div class="js-react-on-rails-component" style="display:none" data-component-name="Checkbox" data-props="{&quot;checkboxSlug&quot;:&quot;sendFeedback-method-animations&quot;,&quot;courseSlug&quot;:&quot;ionic-framework-tutorial&quot;,&quot;content&quot;:&quot;First, let\u0026#39;s update our \u003ccode\u003esendFeedback()\u003c/code\u003e method to enable animations. \u003ccode\u003ecurrentSong.rated\u003c/code\u003e will tell the scope whether the current song was favorited (true) or skipped (false). We will also tell the current card to hide itself with \u003ccode\u003ecurrentSong.hide()\u003c/code\u003e.&quot;}" data-trace="true" data-dom-id="Checkbox-react-component-0051300f-d307-47ff-befc-fc37bd9ae957"></div> 
       <div id="Checkbox-react-component-0051300f-d307-47ff-befc-fc37bd9ae957"></div> 
       <div class="highlight">
        <pre class=""><code>  <span class="nx">$scope</span><span class="p">.</span><span class="nx">sendFeedback</span> <span class="o">=</span> <span class="kd">function</span> <span class="p">(</span><span class="nx">bool</span><span class="p">)</span> <span class="p">{</span>

    <span class="c1">// set variable for the correct animation sequence</span>
    <span class="nx">$scope</span><span class="p">.</span><span class="nx">currentSong</span><span class="p">.</span><span class="nx">rated</span> <span class="o">=</span> <span class="nx">bool</span><span class="p">;</span>
    <span class="nx">$scope</span><span class="p">.</span><span class="nx">currentSong</span><span class="p">.</span><span class="nx">hide</span> <span class="o">=</span> <span class="kc">true</span><span class="p">;</span>

    <span class="nx">$timeout</span><span class="p">(</span><span class="kd">function</span><span class="p">()</span> <span class="p">{</span>
      <span class="c1">// $timeout to allow animation to complete before changing to next song</span>
      <span class="c1">// set the current song to one of our three songs</span>
      <span class="kd">var</span> <span class="nx">randomSong</span> <span class="o">=</span> <span class="nb">Math</span><span class="p">.</span><span class="nx">round</span><span class="p">(</span><span class="nb">Math</span><span class="p">.</span><span class="nx">random</span><span class="p">()</span> <span class="o">*</span> <span class="p">(</span><span class="nx">$scope</span><span class="p">.</span><span class="nx">songs</span><span class="p">.</span><span class="nx">length</span> <span class="o">-</span> <span class="mi">1</span><span class="p">));</span>

      <span class="c1">// update current song in scope</span>
      <span class="nx">$scope</span><span class="p">.</span><span class="nx">currentSong</span> <span class="o">=</span> <span class="nx">angular</span><span class="p">.</span><span class="nx">copy</span><span class="p">(</span><span class="nx">$scope</span><span class="p">.</span><span class="nx">songs</span><span class="p">[</span><span class="nx">randomSong</span><span class="p">]);</span>

    <span class="p">},</span> <span class="mi">250</span><span class="p">);</span>
  <span class="p">}</span>
</code></pre>
       </div>
       <div class="js-react-on-rails-component" style="display:none" data-component-name="Checkbox" data-props="{&quot;checkboxSlug&quot;:&quot;inject-timeout-discover&quot;,&quot;courseSlug&quot;:&quot;ionic-framework-tutorial&quot;,&quot;content&quot;:&quot;Since we\u0026#39;re using $timeout, we\u0026#39;ll need to inject it into our discover controller:&quot;}" data-trace="true" data-dom-id="Checkbox-react-component-be6bfd18-8fbd-460e-a551-a6fae73ab0ca"></div> 
       <div id="Checkbox-react-component-be6bfd18-8fbd-460e-a551-a6fae73ab0ca"></div> 
       <div class="highlight">
        <pre class=""><code><span class="p">.</span><span class="nx">controller</span><span class="p">(</span><span class="s1">'DiscoverCtrl'</span><span class="p">,</span> <span class="kd">function</span><span class="p">(</span><span class="nx">$scope</span><span class="p">,</span> <span class="nx">$timeout</span><span class="p">)</span> <span class="p">{</span>
</code></pre>
       </div>
       <div class="js-react-on-rails-component" style="display:none" data-component-name="Checkbox" data-props="{&quot;checkboxSlug&quot;:&quot;add-ngclass-animation&quot;,&quot;courseSlug&quot;:&quot;ionic-framework-tutorial&quot;,&quot;content&quot;:&quot;Now open up discover.html and wire these two variables up to our CSS animation classes.&quot;}" data-trace="true" data-dom-id="Checkbox-react-component-0aca4e92-5273-41e2-9590-4edd84bdcfa6"></div> 
       <div id="Checkbox-react-component-0aca4e92-5273-41e2-9590-4edd84bdcfa6"></div> 
       <div class="highlight">
        <pre class=""><code>    <span class="nt">&lt;div</span> <span class="na">class=</span><span class="s">"list card current-song"</span>
          <span class="na">ng-class=</span><span class="s">"{skipped: currentSong.rated == false, favorited: currentSong.rated == true}"</span>
          <span class="na">ng-show=</span><span class="s">"currentSong &amp;&amp; !currentSong.hide"</span><span class="nt">&gt;</span>
</code></pre>
       </div>
       <p>Now, our sexy skip and favorite animations should work!</p> 
       <h2 id="adding-removing-and-retrieving-favorited-songs">Adding, Removing and Retrieving Favorited Songs</h2> 
       <p>Right now, nothing happens when we favorite a song - but it should actually appear over in our favorites tab. To do that, we need to create a service that will add, remove, and retrieve the songs we've favorited.</p>
       <div class="js-react-on-rails-component" style="display:none" data-component-name="Video" data-props="{&quot;slug&quot;:&quot;favorites-crud-service&quot;,&quot;provider&quot;:&quot;wistia&quot;,&quot;courseSlug&quot;:&quot;ionic-framework-tutorial&quot;,&quot;pro&quot;:false,&quot;thumbnailUrl&quot;:&quot;https://embed-ssl.wistia.com/deliveries/416b7c2354befaf4a70b93dfc3bb186b93510b18.jpg&quot;}" data-trace="true" data-dom-id="Video-react-component-a4c653ba-7f7c-4a19-a90c-13a856f79bbb"></div> 
       <div id="Video-react-component-a4c653ba-7f7c-4a19-a90c-13a856f79bbb"></div> 
       <div class="js-react-on-rails-component" style="display:none" data-component-name="Checkbox" data-props="{&quot;checkboxSlug&quot;:&quot;create-user-svc&quot;,&quot;courseSlug&quot;:&quot;ionic-framework-tutorial&quot;,&quot;content&quot;:&quot;Let\u0026#39;s create a User \u003ca href=\&quot;https://docs.angularjs.org/guide/providers\&quot; target=\&quot;_blank\&quot;\u003efactory\u003c/a\u003e in services.js, which we\u0026#39;ll use to store an array of our favorite songs:&quot;}" data-trace="true" data-dom-id="Checkbox-react-component-b8862468-2f29-4708-8137-4b6b4bafc071"></div> 
       <div id="Checkbox-react-component-b8862468-2f29-4708-8137-4b6b4bafc071"></div> 
       <div class="highlight">
        <pre class=""><code><span class="nx">angular</span><span class="p">.</span><span class="nx">module</span><span class="p">(</span><span class="s1">'songhop.services'</span><span class="p">,</span> <span class="p">[])</span>
<span class="p">.</span><span class="nx">factory</span><span class="p">(</span><span class="s1">'User'</span><span class="p">,</span> <span class="kd">function</span><span class="p">()</span> <span class="p">{</span>

  <span class="kd">var</span> <span class="nx">o</span> <span class="o">=</span> <span class="p">{</span>
    <span class="na">favorites</span><span class="p">:</span> <span class="p">[]</span>
  <span class="p">}</span>

  <span class="k">return</span> <span class="nx">o</span><span class="p">;</span>
<span class="p">});</span>
</code></pre>
       </div>
       <div class="js-react-on-rails-component" style="display:none" data-component-name="Checkbox" data-props="{&quot;checkboxSlug&quot;:&quot;add-fav-svc&quot;,&quot;courseSlug&quot;:&quot;ionic-framework-tutorial&quot;,&quot;content&quot;:&quot;Now, create a method for adding songs to the \u003ccode\u003efavorites\u003c/code\u003e array:&quot;}" data-trace="true" data-dom-id="Checkbox-react-component-956fe59d-fe73-4f4f-98ce-096a5687d363"></div> 
       <div id="Checkbox-react-component-956fe59d-fe73-4f4f-98ce-096a5687d363"></div> 
       <div class="highlight">
        <pre class=""><code>  <span class="nx">o</span><span class="p">.</span><span class="nx">addSongToFavorites</span> <span class="o">=</span> <span class="kd">function</span><span class="p">(</span><span class="nx">song</span><span class="p">)</span> <span class="p">{</span>
    <span class="c1">// make sure there's a song to add</span>
    <span class="k">if</span> <span class="p">(</span><span class="o">!</span><span class="nx">song</span><span class="p">)</span> <span class="k">return</span> <span class="kc">false</span><span class="p">;</span>

    <span class="c1">// add to favorites array</span>
    <span class="nx">o</span><span class="p">.</span><span class="nx">favorites</span><span class="p">.</span><span class="nx">unshift</span><span class="p">(</span><span class="nx">song</span><span class="p">);</span>
  <span class="p">}</span>
</code></pre>
       </div>
       <div class="js-react-on-rails-component" style="display:none" data-component-name="Checkbox" data-props="{&quot;checkboxSlug&quot;:&quot;favorites-\u0026gt;ctrl&quot;,&quot;courseSlug&quot;:&quot;ionic-framework-tutorial&quot;,&quot;content&quot;:&quot;We\u0026#39;ll need to be able to display this on our favorites page, so crack open our favorites controller and drag down our list of favorites into scope:&quot;}" data-trace="true" data-dom-id="Checkbox-react-component-6cd47aaf-17bc-4dad-ba3e-5a2af324fe28"></div> 
       <div id="Checkbox-react-component-6cd47aaf-17bc-4dad-ba3e-5a2af324fe28"></div> 
       <div class="highlight">
        <pre class=""><code><span class="p">.</span><span class="nx">controller</span><span class="p">(</span><span class="s1">'FavoritesCtrl'</span><span class="p">,</span> <span class="kd">function</span><span class="p">(</span><span class="nx">$scope</span><span class="p">,</span> <span class="nx">User</span><span class="p">)</span> <span class="p">{</span>
  <span class="c1">// get the list of our favorites from the user service</span>
  <span class="nx">$scope</span><span class="p">.</span><span class="nx">favorites</span> <span class="o">=</span> <span class="nx">User</span><span class="p">.</span><span class="nx">favorites</span><span class="p">;</span>
<span class="p">})</span>
</code></pre>
       </div>
       <div class="js-react-on-rails-component" style="display:none" data-component-name="Checkbox" data-props="{&quot;checkboxSlug&quot;:&quot;ngrepeat-favs&quot;,&quot;courseSlug&quot;:&quot;ionic-framework-tutorial&quot;,&quot;content&quot;:&quot;Now, open up favorites.html and have our \u003ccode\u003e\u0026lt;ion-list\u0026gt;\u003c/code\u003e repeat through our list of favorites:&quot;}" data-trace="true" data-dom-id="Checkbox-react-component-57fac5bd-cac1-4564-9b38-fcd91b6b10dd"></div> 
       <div id="Checkbox-react-component-57fac5bd-cac1-4564-9b38-fcd91b6b10dd"></div> 
       <div class="highlight">
        <pre class=""><code>      <span class="nt">&lt;ion-item</span> <span class="na">ng-repeat=</span><span class="s">"song in favorites"</span> <span class="na">class=</span><span class="s">"item-avatar"</span><span class="nt">&gt;</span>
        <span class="nt">&lt;img</span> <span class="na">ng-src=</span><span class="s">"{{ song.image_small }}"</span><span class="nt">&gt;</span>
        <span class="nt">&lt;h2&gt;</span>{{ song.title }}<span class="nt">&lt;/h2&gt;</span>
        <span class="nt">&lt;p&gt;</span>{{ song.artist }}<span class="nt">&lt;/p&gt;</span>
      <span class="nt">&lt;/ion-item&gt;</span>
</code></pre>
       </div>
       <p>Finally, let's add songs to our favorites when the user hits the favorite button.</p>
       <div class="js-react-on-rails-component" style="display:none" data-component-name="Checkbox" data-props="{&quot;checkboxSlug&quot;:&quot;discover-inject-user&quot;,&quot;courseSlug&quot;:&quot;ionic-framework-tutorial&quot;,&quot;content&quot;:&quot;In our discover controller, inject User as a dependency:&quot;}" data-trace="true" data-dom-id="Checkbox-react-component-4edd08f0-1b00-4f7e-9891-6fc24c3405f1"></div> 
       <div id="Checkbox-react-component-4edd08f0-1b00-4f7e-9891-6fc24c3405f1"></div> 
       <div class="highlight">
        <pre class=""><code><span class="p">.</span><span class="nx">controller</span><span class="p">(</span><span class="s1">'DiscoverCtrl'</span><span class="p">,</span> <span class="kd">function</span><span class="p">(</span><span class="nx">$scope</span><span class="p">,</span> <span class="nx">$timeout</span><span class="p">,</span> <span class="nx">User</span><span class="p">)</span> <span class="p">{</span>
</code></pre>
       </div>
       <div class="js-react-on-rails-component" style="display:none" data-component-name="Checkbox" data-props="{&quot;checkboxSlug&quot;:&quot;save-fav-in-sendfeedback&quot;,&quot;courseSlug&quot;:&quot;ionic-framework-tutorial&quot;,&quot;content&quot;:&quot;And then add the current song to our favorites at the beginning line of our \u003ccode\u003esendFeedback()\u003c/code\u003e method:&quot;}" data-trace="true" data-dom-id="Checkbox-react-component-96fbee88-3521-483c-93c9-0059337e3b9b"></div> 
       <div id="Checkbox-react-component-96fbee88-3521-483c-93c9-0059337e3b9b"></div> 
       <div class="highlight">
        <pre class=""><code>    <span class="c1">// first, add to favorites if they favorited</span>
    <span class="k">if</span> <span class="p">(</span><span class="nx">bool</span><span class="p">)</span> <span class="nx">User</span><span class="p">.</span><span class="nx">addSongToFavorites</span><span class="p">(</span><span class="nx">$scope</span><span class="p">.</span><span class="nx">currentSong</span><span class="p">);</span>
</code></pre>
       </div>
       <p>Go ahead and favorite a couple of songs, then go to the favorites page -- all of our songs now show up!</p>
       <p>But what if we want to remove a song from our favorites?</p>
       <div class="js-react-on-rails-component" style="display:none" data-component-name="Checkbox" data-props="{&quot;checkboxSlug&quot;:&quot;remove-song-svc&quot;,&quot;courseSlug&quot;:&quot;ionic-framework-tutorial&quot;,&quot;content&quot;:&quot;Let\u0026#39;s add a method in our User service to do that:&quot;}" data-trace="true" data-dom-id="Checkbox-react-component-c5ab9b43-51f9-4136-a556-6da9239221e8"></div> 
       <div id="Checkbox-react-component-c5ab9b43-51f9-4136-a556-6da9239221e8"></div> 
       <div class="highlight">
        <pre class=""><code>  <span class="nx">o</span><span class="p">.</span><span class="nx">removeSongFromFavorites</span> <span class="o">=</span> <span class="kd">function</span><span class="p">(</span><span class="nx">song</span><span class="p">,</span> <span class="nx">index</span><span class="p">)</span> <span class="p">{</span>
    <span class="c1">// make sure there's a song to add</span>
    <span class="k">if</span> <span class="p">(</span><span class="o">!</span><span class="nx">song</span><span class="p">)</span> <span class="k">return</span> <span class="kc">false</span><span class="p">;</span>

    <span class="c1">// add to favorites array</span>
    <span class="nx">o</span><span class="p">.</span><span class="nx">favorites</span><span class="p">.</span><span class="nx">splice</span><span class="p">(</span><span class="nx">index</span><span class="p">,</span> <span class="mi">1</span><span class="p">);</span>
  <span class="p">}</span>
</code></pre>
       </div>
       <div class="js-react-on-rails-component" style="display:none" data-component-name="Checkbox" data-props="{&quot;checkboxSlug&quot;:&quot;remove-song-ctrl&quot;,&quot;courseSlug&quot;:&quot;ionic-framework-tutorial&quot;,&quot;content&quot;:&quot;In our favorites controller, expose a method that will fire the \u003ccode\u003eremoveSongFromFavorites()\u003c/code\u003e User method:&quot;}" data-trace="true" data-dom-id="Checkbox-react-component-2838e6f0-6e4b-47fd-8599-eda9833c3e70"></div> 
       <div id="Checkbox-react-component-2838e6f0-6e4b-47fd-8599-eda9833c3e70"></div> 
       <div class="highlight">
        <pre class=""><code>  <span class="nx">$scope</span><span class="p">.</span><span class="nx">removeSong</span> <span class="o">=</span> <span class="kd">function</span><span class="p">(</span><span class="nx">song</span><span class="p">,</span> <span class="nx">index</span><span class="p">)</span> <span class="p">{</span>
    <span class="nx">User</span><span class="p">.</span><span class="nx">removeSongFromFavorites</span><span class="p">(</span><span class="nx">song</span><span class="p">,</span> <span class="nx">index</span><span class="p">);</span>
  <span class="p">}</span>
</code></pre>
       </div>
       <p>{info} You could just write <code>$scope.removeSong = User.removeSongFromFavorites</code>, but if we ever want to have a success message or perform other scope related activities when a song is removed, we need to do it this way.</p>
       <div class="js-react-on-rails-component" style="display:none" data-component-name="Checkbox" data-props="{&quot;checkboxSlug&quot;:&quot;add-ion-option-btn&quot;,&quot;courseSlug&quot;:&quot;ionic-framework-tutorial&quot;,&quot;content&quot;:&quot;Finally, let\u0026#39;s add an \u003ca href=\&quot;http://ionicframework.com/docs/api/directive/ionOptionButton/\&quot; target=\&quot;_blank\&quot;\u003e\u003cion-option-button\u003e\u003c/a\u003e for deleting the song from the \u003ca href=\&quot;http://ionicframework.com/docs/api/directive/ionItem/\&quot; target=\&quot;_blank\&quot;\u003e\u003cion-item\u003e\u003c/a\u003e \u003ccode\u003eng-repeat\u003c/code\u003e in favorites.html:&quot;}" data-trace="true" data-dom-id="Checkbox-react-component-cccda146-792d-4e88-aeab-ab3c9ec3d68d"></div> 
       <div id="Checkbox-react-component-cccda146-792d-4e88-aeab-ab3c9ec3d68d"></div> 
       <div class="highlight">
        <pre class=""><code>    <span class="nt">&lt;ion-list&gt;</span>
      <span class="nt">&lt;ion-item</span> <span class="na">ng-repeat=</span><span class="s">"song in favorites"</span> <span class="na">class=</span><span class="s">"item-avatar"</span><span class="nt">&gt;</span>
        <span class="nt">&lt;img</span> <span class="na">ng-src=</span><span class="s">"{{ song.image_small }}"</span><span class="nt">&gt;</span>
        <span class="nt">&lt;h2&gt;</span>{{ song.title }}<span class="nt">&lt;/h2&gt;</span>
        <span class="nt">&lt;p&gt;</span>{{ song.artist }}<span class="nt">&lt;/p&gt;</span>

        <span class="nt">&lt;ion-option-button</span> <span class="na">class=</span><span class="s">"button-assertive"</span>
                       <span class="na">ng-click=</span><span class="s">"removeSong(song, $index)"</span><span class="nt">&gt;</span>
          <span class="nt">&lt;i</span> <span class="na">class=</span><span class="s">"ion-minus-circled"</span><span class="nt">&gt;&lt;/i&gt;</span>
        <span class="nt">&lt;/ion-option-button&gt;</span>
      <span class="nt">&lt;/ion-item&gt;</span>
    <span class="nt">&lt;/ion-list&gt;</span>
</code></pre>
       </div>
       <p>Now, you can swipe a song to the right, hit the delete button, and the song will disappear - pretty neat!</p>
       <p>Our base interface functionality is complete. In the next section, we'll start wiring our app up to data retrieved from a server.</p>
      </div>
      <div class="course-section" id="wiring-up-to-a-server">
       <h1>Wiring Up to A Server</h1>
       <p>For this course, we've created a node.js server with which our app will be interacting. There is a publicly accessible version of this server available on Heroku at <code>https://ionic-songhop.herokuapp.com</code>. Very soon, we will be releasing a version of this server that you can run locally, but until then, you can just use the Heroku server.</p>
       <p>You'll notice in app.js that we've defined a constant called <code>SERVER</code> that has a url attribute:</p>
       <div class="highlight">
        <pre class=""><code><span class="p">.</span><span class="nx">constant</span><span class="p">(</span><span class="s1">'SERVER'</span><span class="p">,</span> <span class="p">{</span>
  <span class="c1">// if using local server</span>
  <span class="c1">//url: 'http://localhost:3000'</span>

  <span class="c1">// if using our public heroku server</span>
  <span class="na">url</span><span class="p">:</span> <span class="s1">'https://ionic-songhop.herokuapp.com'</span>
<span class="p">});</span>
</code></pre>
       </div>
       <p>This allows us to easily swap our backend out with just one line of code. For now, you'll be using the hosted version we're providing for you over at <code>https://ionic-songhop.herokuapp.com</code>, but in the future, it will be trivial use a local server instead.</p>
       <p>The first thing we'll wire up is actual song recommendations instead of using the mock data. To do this, let's create a "Recommendations" service that will handle retrieving, storing, and manipulating our queue of song recommendations.</p>
       <div class="js-react-on-rails-component" style="display:none" data-component-name="Video" data-props="{&quot;slug&quot;:&quot;create-recommendations-service&quot;,&quot;provider&quot;:&quot;wistia&quot;,&quot;courseSlug&quot;:&quot;ionic-framework-tutorial&quot;,&quot;pro&quot;:false,&quot;thumbnailUrl&quot;:&quot;https://embed-ssl.wistia.com/deliveries/d9705c3c5cb68fe32be5bd236fc89c7d6bd362f6.jpg&quot;}" data-trace="true" data-dom-id="Video-react-component-984c674d-34c6-4a42-a476-e31f73b2ca08"></div> 
       <div id="Video-react-component-984c674d-34c6-4a42-a476-e31f73b2ca08"></div> 
       <div class="js-react-on-rails-component" style="display:none" data-component-name="Checkbox" data-props="{&quot;checkboxSlug&quot;:&quot;create-rec-svc&quot;,&quot;courseSlug&quot;:&quot;ionic-framework-tutorial&quot;,&quot;content&quot;:&quot;In services.js, create a new factory called \u003ccode\u003eRecommendations\u003c/code\u003e that returns a object containing an array (named \u003ccode\u003equeue\u003c/code\u003e) of our current recommendations. Since this factory will be interacting with our server, be sure to inject \u003ccode\u003e$http\u003c/code\u003e and our \u003ccode\u003eSERVER\u003c/code\u003e constant:&quot;}" data-trace="true" data-dom-id="Checkbox-react-component-74e44fb2-18e2-4e29-b625-472dc6790339"></div> 
       <div id="Checkbox-react-component-74e44fb2-18e2-4e29-b625-472dc6790339"></div> 
       <div class="highlight">
        <pre class=""><code><span class="p">.</span><span class="nx">factory</span><span class="p">(</span><span class="s1">'Recommendations'</span><span class="p">,</span> <span class="kd">function</span><span class="p">(</span><span class="nx">$http</span><span class="p">,</span> <span class="nx">SERVER</span><span class="p">)</span> <span class="p">{</span>
  <span class="kd">var</span> <span class="nx">o</span> <span class="o">=</span> <span class="p">{</span>
    <span class="na">queue</span><span class="p">:</span> <span class="p">[]</span>
  <span class="p">};</span>

  <span class="k">return</span> <span class="nx">o</span><span class="p">;</span>
<span class="p">})</span>
</code></pre>
       </div>
       <p>Our recommendations queue will be empty until we retrieve songs from our server. The server route we need to hit to retrieve new song recommendations is a GET request to http://SERVER-URL/recommendations. It will return an array of ten random songs, which you can see in action here: <a href="https://ionic-songhop.herokuapp.com/recommendations" target="_blank">https://ionic-songhop.herokuapp.com/recommendations</a>.</p>
       <div class="js-react-on-rails-component" style="display:none" data-component-name="Checkbox" data-props="{&quot;checkboxSlug&quot;:&quot;create-getnextsongs&quot;,&quot;courseSlug&quot;:&quot;ionic-framework-tutorial&quot;,&quot;content&quot;:&quot;Create the \u003ccode\u003egetNextSongs()\u003c/code\u003e method that makes a \u003ca href=\&quot;https://docs.angularjs.org/api/ng/service/$http\&quot; target=\&quot;_blank\&quot;\u003e$http\u003c/a\u003e GET request to /recommendations. The \u003ccode\u003esuccess()\u003c/code\u003e function will add the new songs to our \u003ccode\u003equeue\u003c/code\u003e array:&quot;}" data-trace="true" data-dom-id="Checkbox-react-component-1d59d20f-ab5d-4b8b-bc65-35112f91ec2e"></div> 
       <div id="Checkbox-react-component-1d59d20f-ab5d-4b8b-bc65-35112f91ec2e"></div> 
       <div class="highlight">
        <pre class=""><code>  <span class="nx">o</span><span class="p">.</span><span class="nx">getNextSongs</span> <span class="o">=</span> <span class="kd">function</span><span class="p">()</span> <span class="p">{</span>
    <span class="k">return</span> <span class="nx">$http</span><span class="p">({</span>
      <span class="na">method</span><span class="p">:</span> <span class="s1">'GET'</span><span class="p">,</span>
      <span class="na">url</span><span class="p">:</span> <span class="nx">SERVER</span><span class="p">.</span><span class="nx">url</span> <span class="o">+</span> <span class="s1">'/recommendations'</span>
    <span class="p">}).</span><span class="nx">success</span><span class="p">(</span><span class="kd">function</span><span class="p">(</span><span class="nx">data</span><span class="p">){</span>
      <span class="c1">// merge data into the queue</span>
      <span class="nx">o</span><span class="p">.</span><span class="nx">queue</span> <span class="o">=</span> <span class="nx">o</span><span class="p">.</span><span class="nx">queue</span><span class="p">.</span><span class="nx">concat</span><span class="p">(</span><span class="nx">data</span><span class="p">);</span>
    <span class="p">});</span>
  <span class="p">}</span>
</code></pre>
       </div>
       <p>When our app first loads up, we'll want to fire a function to initialize our first set of songs. In our <code>DiscoverCtrl</code>, we can just fire <code>Recommendations.getNextSongs()</code>. When it returns successfully, we'll set the current song to be the first one in our queue (aka <code>Recommendations.queue[0]</code>). The song at index 0 of <code>Recommendations.queue</code> should always be the current song.</p>
       <div class="js-react-on-rails-component" style="display:none" data-component-name="Checkbox" data-props="{&quot;checkboxSlug&quot;:&quot;getnextsongs-discoverctrl&quot;,&quot;courseSlug&quot;:&quot;ionic-framework-tutorial&quot;,&quot;content&quot;:&quot;Inject \u003ccode\u003eRecommendations\u003c/code\u003e into \u003ccode\u003eDiscoverCtrl\u003c/code\u003e, remove \u003ccode\u003e$scope.songs\u003c/code\u003e and \u003ccode\u003e$scope.currentSong\u003c/code\u003e, and replace with \u003ccode\u003egetNextSongs()\u003c/code\u003e w/ callback&quot;}" data-trace="true" data-dom-id="Checkbox-react-component-2e5ad10d-4d5f-4404-a214-b9e2613e7fa7"></div> 
       <div id="Checkbox-react-component-2e5ad10d-4d5f-4404-a214-b9e2613e7fa7"></div> 
       <div class="highlight">
        <pre class=""><code><span class="p">.</span><span class="nx">controller</span><span class="p">(</span><span class="s1">'DiscoverCtrl'</span><span class="p">,</span> <span class="kd">function</span><span class="p">(</span><span class="nx">$scope</span><span class="p">,</span> <span class="nx">$timeout</span><span class="p">,</span> <span class="nx">User</span><span class="p">,</span> <span class="nx">Recommendations</span><span class="p">)</span> <span class="p">{</span>
  <span class="c1">// get our first songs</span>
  <span class="nx">Recommendations</span><span class="p">.</span><span class="nx">getNextSongs</span><span class="p">()</span>
    <span class="p">.</span><span class="nx">then</span><span class="p">(</span><span class="kd">function</span><span class="p">(){</span>
      <span class="nx">$scope</span><span class="p">.</span><span class="nx">currentSong</span> <span class="o">=</span> <span class="nx">Recommendations</span><span class="p">.</span><span class="nx">queue</span><span class="p">[</span><span class="mi">0</span><span class="p">];</span>
    <span class="p">});</span>
</code></pre>
       </div>
       <p>Our favorite and skip buttons no longer work, as our <code>sendFeedback()</code> method isn't wired up to our <code>Recommendations</code> service. We need to create a method in our <code>Recommendations</code> service that allows us to remove the current song from the queue and proceed to the next one. At the same time we'll check to see if the queue is low on songs, and if it is, we'll fire <code>getNextSongs()</code>. This ensures our users will never run out of songs to sample.</p>
       <div class="js-react-on-rails-component" style="display:none" data-component-name="Checkbox" data-props="{&quot;checkboxSlug&quot;:&quot;rec-nxtsong&quot;,&quot;courseSlug&quot;:&quot;ionic-framework-tutorial&quot;,&quot;content&quot;:&quot;Create a \u003ccode\u003enextSong()\u003c/code\u003e method that pops the first array element off of our \u003ccode\u003equeue\u003c/code\u003e and fires \u003ccode\u003egetNextSongs()\u003c/code\u003e if necessary:&quot;}" data-trace="true" data-dom-id="Checkbox-react-component-f19590ed-facf-43a2-967e-e60e0ec3ae15"></div> 
       <div id="Checkbox-react-component-f19590ed-facf-43a2-967e-e60e0ec3ae15"></div> 
       <div class="highlight">
        <pre class=""><code>  <span class="nx">o</span><span class="p">.</span><span class="nx">nextSong</span> <span class="o">=</span> <span class="kd">function</span><span class="p">()</span> <span class="p">{</span>
    <span class="c1">// pop the index 0 off</span>
    <span class="nx">o</span><span class="p">.</span><span class="nx">queue</span><span class="p">.</span><span class="nx">shift</span><span class="p">();</span>

    <span class="c1">// low on the queue? lets fill it up</span>
    <span class="k">if</span> <span class="p">(</span><span class="nx">o</span><span class="p">.</span><span class="nx">queue</span><span class="p">.</span><span class="nx">length</span> <span class="o">&lt;=</span> <span class="mi">3</span><span class="p">)</span> <span class="p">{</span>
      <span class="nx">o</span><span class="p">.</span><span class="nx">getNextSongs</span><span class="p">();</span>
    <span class="p">}</span>

  <span class="p">}</span>
</code></pre>
       </div>
       <p>In the <code>sendFeedback</code> method, fire <code>Recommendations.nextSong()</code> and update <code>$scope.currentSong</code> accordingly:</p>
       <div class="highlight">
        <pre class=""><code>    <span class="c1">// prepare the next song</span>
    <span class="nx">Recommendations</span><span class="p">.</span><span class="nx">nextSong</span><span class="p">();</span>

    <span class="nx">$timeout</span><span class="p">(</span><span class="kd">function</span><span class="p">()</span> <span class="p">{</span>
      <span class="c1">// $timeout to allow animation to complete</span>
      <span class="nx">$scope</span><span class="p">.</span><span class="nx">currentSong</span> <span class="o">=</span> <span class="nx">Recommendations</span><span class="p">.</span><span class="nx">queue</span><span class="p">[</span><span class="mi">0</span><span class="p">];</span>
    <span class="p">},</span> <span class="mi">250</span><span class="p">);</span>
</code></pre>
       </div>
       <p>Cool, now favoriting and skipping works again. Skip a few songs quickly though and you might notice that the images are taking a long time to load, especially if you're on a slow internet connection (which is often the case on mobile). The way to solve this is by caching the image for the next song in the queue - but what's the best way of doing that in a hybrid app?</p>
       <div class="js-react-on-rails-component" style="display:none" data-component-name="Video" data-props="{&quot;slug&quot;:&quot;image-cache-hack&quot;,&quot;provider&quot;:&quot;wistia&quot;,&quot;courseSlug&quot;:&quot;ionic-framework-tutorial&quot;,&quot;pro&quot;:false,&quot;thumbnailUrl&quot;:&quot;https://embed-ssl.wistia.com/deliveries/a08f61ebf7e1e5a6cdc664400d421e98936e2a67.jpg&quot;}" data-trace="true" data-dom-id="Video-react-component-06d17356-f5e3-4317-8f37-bb24d93c2ad2"></div> 
       <div id="Video-react-component-06d17356-f5e3-4317-8f37-bb24d93c2ad2"></div> 
       <blockquote> 
        <p>"You have to learn the rules of the game. And then you have to play better than anyone else." - <em>Albert Einstein</em></p>
       </blockquote> 
       <p>When we were building the original Songhop app, we originally planned to download the next image to the device and then provide a link to the local file in cache. This would've required us to use native plugins as well as added a good amount of code to our app. This would also be the only solution to use if you were developing this app in a native language, like Swift/Obj-C or Java. However, we have a killer advantage over native apps: we can lean on the web browser for common tasks, like caching. Just by creating <code>&lt;img src="hello.jpg" /&gt;</code>, we can place an image in the web browser's cache.</p>
       <p>Now, imagine if we had an image tag with an <a href="https://docs.angularjs.org/api/ng/directive/ngSrc" target="_blank">ng-src</a> always pointed at the image url for <code>Recommendations.queue[1]</code> (aka the next song in the queue). We can make this image nearly invisible with CSS: 1px tall and 1px wide, with an opacity of 0.01 - yet the browser will still download it and place it in cache. Perfect!</p>
       <div class="js-react-on-rails-component" style="display:none" data-component-name="Checkbox" data-props="{&quot;checkboxSlug&quot;:&quot;nextalbumimg-method&quot;,&quot;courseSlug&quot;:&quot;ionic-framework-tutorial&quot;,&quot;content&quot;:&quot;In our Discover controller, create a method called \u003ccode\u003enextAlbumImg()\u003c/code\u003e that will return the next album\u0026#39;s image:&quot;}" data-trace="true" data-dom-id="Checkbox-react-component-1f7adf6a-5655-4fc7-a6b1-5ea39aa4ac88"></div> 
       <div id="Checkbox-react-component-1f7adf6a-5655-4fc7-a6b1-5ea39aa4ac88"></div> 
       <div class="highlight">
        <pre class=""><code>  <span class="c1">// used for retrieving the next album image.</span>
  <span class="c1">// if there isn't an album image available next, return empty string.</span>
  <span class="nx">$scope</span><span class="p">.</span><span class="nx">nextAlbumImg</span> <span class="o">=</span> <span class="kd">function</span><span class="p">()</span> <span class="p">{</span>
    <span class="k">if</span> <span class="p">(</span><span class="nx">Recommendations</span><span class="p">.</span><span class="nx">queue</span><span class="p">.</span><span class="nx">length</span> <span class="o">&gt;</span> <span class="mi">1</span><span class="p">)</span> <span class="p">{</span>
      <span class="k">return</span> <span class="nx">Recommendations</span><span class="p">.</span><span class="nx">queue</span><span class="p">[</span><span class="mi">1</span><span class="p">].</span><span class="nx">image_large</span><span class="p">;</span>
    <span class="p">}</span>

    <span class="k">return</span> <span class="s1">''</span><span class="p">;</span>
  <span class="p">}</span>
</code></pre>
       </div>
       <div class="js-react-on-rails-component" style="display:none" data-component-name="Checkbox" data-props="{&quot;checkboxSlug&quot;:&quot;nextimg-tag&quot;,&quot;courseSlug&quot;:&quot;ionic-framework-tutorial&quot;,&quot;content&quot;:&quot;Then in the discover.html template, add a div with the class \u003ccode\u003eimg-lookahead\u003c/code\u003e that contains a nested image tag:&quot;}" data-trace="true" data-dom-id="Checkbox-react-component-027caf87-e7da-4fbf-84b2-d61d3a2dced3"></div> 
       <div id="Checkbox-react-component-027caf87-e7da-4fbf-84b2-d61d3a2dced3"></div> 
       <div class="highlight">
        <pre class=""><code>    <span class="nt">&lt;div</span> <span class="na">class=</span><span class="s">"img-lookahead"</span><span class="nt">&gt;</span>
      <span class="nt">&lt;img</span> <span class="na">ng-src=</span><span class="s">"{{ nextAlbumImg() }}"</span> <span class="nt">/&gt;</span>
    <span class="nt">&lt;/div&gt;</span>
</code></pre>
       </div>
       <p>Even if you skip songs as fast as you can, the images are almost always preloaded into the image tag in our img-lookahead div - with no extra code to download them and keep track of their location in cache. This is a great example of how building hybrid apps can often be easier than building native apps.</p>
       <div class="js-react-on-rails-component" style="display:none" data-component-name="Checkbox" data-props="{&quot;checkboxSlug&quot;:&quot;dont-be-afraid&quot;,&quot;courseSlug&quot;:&quot;ionic-framework-tutorial&quot;,&quot;content&quot;:&quot;Remember - don\u0026#39;t be afraid to use the unique features web browsers provide to your advantage! With great power comes great responsibility, and your responsibility when building hybrid apps is to create code that native app developers would drool over.&quot;}" data-trace="true" data-dom-id="Checkbox-react-component-e2f1cf0a-8edd-4486-a39e-c617185cbecb"></div> 
       <div id="Checkbox-react-component-e2f1cf0a-8edd-4486-a39e-c617185cbecb"></div> 
      </div>
      <div class="course-section" id="playing-managing-audio">
       <h1>Playing &amp; managing audio</h1>
       <p>The key functionality of our app is the ability to quickly sample songs, but getting the proper licensing rights to play song clips is exceptionally difficult. For months we dug around various APIs trying to find a reasonable solution, but to no avail. That was until the summer of 2014, when Spotify made waves by releasing <a href="https://developer.spotify.com/web-api/" target="_blank">a new set of APIs</a> for interacting with their platform. Their new API provides us with the key bit of functionality for our app: 30 second song previews, as well as album art and other relevant song metadata.</p>
       <p>For this course, our node.js server will be handling all of the interactions with the Spotify API, which means that we can just focus on playing the song data that is returned to our Ionic client. All you need to know is that the data being returned to us from the /recommendations endpoint is actually being powered by the amazing people at Spotify, so <a href="https://twitter.com/SpotifyPlatform" target="_blank">show them some love on Twitter!</a></p>
       <p>{info} If you're interested in learning how to use the Spotify API, make sure you enter your email into the subscription box at the top or bottom of this page or tweet me [@ericsimons40](https://twitter.com/ericsimons40]. We're releasing another tutorial on how we created the node.js server for this course soon!</p>
       <p>Let's figure out how we can play Spotify's 30 second song previews. Every song that is returned to us by the /recommendations endpoint contains the following attributes:</p>
       <div class="highlight">
        <pre class=""><code><span class="p">{</span>
    <span class="s2">"title"</span><span class="p">:</span><span class="s2">"Blood Brothers"</span><span class="p">,</span>
    <span class="s2">"artist"</span><span class="p">:</span><span class="s2">"Luke Bryan"</span><span class="p">,</span>
    <span class="s2">"preview_url"</span><span class="p">:</span><span class="s2">"https://p.scdn.co/mp3-preview/b92a1dc3c0420d8c6fe1bab6ae15c181bf63926d"</span><span class="p">,</span>
    <span class="s2">"image_small"</span><span class="p">:</span><span class="s2">"https://i.scdn.co/image/082645c420a3ea4fb58a2b325c191df1a19cc8c7"</span><span class="p">,</span>
    <span class="s2">"image_medium"</span><span class="p">:</span><span class="s2">"https://i.scdn.co/image/beac04c66c73fdb1765ba645bcad6a73e5e9ba90"</span><span class="p">,</span>
    <span class="s2">"image_large"</span><span class="p">:</span><span class="s2">"https://i.scdn.co/image/ca93252350b8819ac51252783e1431af9dabd59f"</span><span class="p">,</span>
    <span class="s2">"open_url"</span><span class="p">:</span><span class="s2">"https://open.spotify.com/track/4ggPIxXwOWReIBfyCVW8QI"</span><span class="p">,</span>
    <span class="s2">"song_id"</span><span class="p">:</span><span class="s2">"54d3f75eb9fd644f061b3c40"</span>
<span class="p">}</span>
</code></pre>
       </div>
       <p>The attribute <code>preview_url</code> contains the URL for this song's mp3 preview clip. You can verify this by visiting the URL in your browser and it will start playing an mp3 stream.</p>
       <p>Since modern browsers can play mp3 files without installing any extra stuff, for our app we can simply use the <a href="https://developer.mozilla.org/en-US/docs/Web/API/HTMLAudioElement" target="_blank">HTMLAudioElement</a> for playing 30 second song previews. Instead of cluttering our discover controller with the logic to play &amp; pause songs, let's create methods in our <code>Recommendations</code> service that will allow us to easily invoke these actions from any controller.</p>
       <div class="js-react-on-rails-component" style="display:none" data-component-name="Video" data-props="{&quot;slug&quot;:&quot;enable-audio-playback&quot;,&quot;provider&quot;:&quot;wistia&quot;,&quot;courseSlug&quot;:&quot;ionic-framework-tutorial&quot;,&quot;pro&quot;:false,&quot;thumbnailUrl&quot;:&quot;https://embed-ssl.wistia.com/deliveries/6f1f58bfcd1f407ed30e14da708457e85a16cf0b.jpg&quot;}" data-trace="true" data-dom-id="Video-react-component-b3942ffa-2d0f-46d0-b0ee-bfa74e6c2fd4"></div> 
       <div id="Video-react-component-b3942ffa-2d0f-46d0-b0ee-bfa74e6c2fd4"></div> 
       <div class="js-react-on-rails-component" style="display:none" data-component-name="Checkbox" data-props="{&quot;checkboxSlug&quot;:&quot;init-media-var&quot;,&quot;courseSlug&quot;:&quot;ionic-framework-tutorial&quot;,&quot;content&quot;:&quot;At the top of the \u003ccode\u003eRecommendations\u003c/code\u003e service, initialize a variable called \u003ccode\u003emedia\u003c/code\u003e that we\u0026#39;ll use for our HTMLAudioElement:&quot;}" data-trace="true" data-dom-id="Checkbox-react-component-f4f851e3-7916-407d-a92b-5e834665a8dc"></div> 
       <div id="Checkbox-react-component-f4f851e3-7916-407d-a92b-5e834665a8dc"></div> 
       <div class="highlight">
        <pre class=""><code><span class="kd">var</span> <span class="nx">media</span><span class="p">;</span>
</code></pre>
       </div>
       <p>We don't allow the user to manipulate audio playback other than playing and pausing (when navigating to our favorites page).</p>
       <div class="js-react-on-rails-component" style="display:none" data-component-name="Checkbox" data-props="{&quot;checkboxSlug&quot;:&quot;play+halt-methods&quot;,&quot;courseSlug&quot;:&quot;ionic-framework-tutorial&quot;,&quot;content&quot;:&quot;Create methods for playing and halting the current song preview:&quot;}" data-trace="true" data-dom-id="Checkbox-react-component-d8686a79-7ef9-4ef1-a3a7-114a6ce8d74d"></div> 
       <div id="Checkbox-react-component-d8686a79-7ef9-4ef1-a3a7-114a6ce8d74d"></div> 
       <div class="highlight">
        <pre class=""><code>  <span class="nx">o</span><span class="p">.</span><span class="nx">playCurrentSong</span> <span class="o">=</span> <span class="kd">function</span><span class="p">()</span> <span class="p">{</span>
    <span class="kd">var</span> <span class="nx">defer</span> <span class="o">=</span> <span class="nx">$q</span><span class="p">.</span><span class="nx">defer</span><span class="p">();</span>

    <span class="c1">// play the current song's preview</span>
    <span class="nx">media</span> <span class="o">=</span> <span class="k">new</span> <span class="nx">Audio</span><span class="p">(</span><span class="nx">o</span><span class="p">.</span><span class="nx">queue</span><span class="p">[</span><span class="mi">0</span><span class="p">].</span><span class="nx">preview_url</span><span class="p">);</span>

    <span class="c1">// when song loaded, resolve the promise to let controller know.</span>
    <span class="nx">media</span><span class="p">.</span><span class="nx">addEventListener</span><span class="p">(</span><span class="s2">"loadeddata"</span><span class="p">,</span> <span class="kd">function</span><span class="p">()</span> <span class="p">{</span>
      <span class="nx">defer</span><span class="p">.</span><span class="nx">resolve</span><span class="p">();</span>
    <span class="p">});</span>

    <span class="nx">media</span><span class="p">.</span><span class="nx">play</span><span class="p">();</span>

    <span class="k">return</span> <span class="nx">defer</span><span class="p">.</span><span class="nx">promise</span><span class="p">;</span>
  <span class="p">}</span>

  <span class="c1">// used when switching to favorites tab</span>
  <span class="nx">o</span><span class="p">.</span><span class="nx">haltAudio</span> <span class="o">=</span> <span class="kd">function</span><span class="p">()</span> <span class="p">{</span>
    <span class="k">if</span> <span class="p">(</span><span class="nx">media</span><span class="p">)</span> <span class="nx">media</span><span class="p">.</span><span class="nx">pause</span><span class="p">();</span>
  <span class="p">}</span>
</code></pre>
       </div>
       <p>{info} This code uses promises so don't forget to inject the <a href="https://docs.angularjs.org/api/ng/service/$q" target="_blank">$q</a> service into the <code>Recommendations</code> service!</p>
       <div class="js-react-on-rails-component" style="display:none" data-component-name="Checkbox" data-props="{&quot;checkboxSlug&quot;:&quot;haltaudio-nextsong&quot;,&quot;courseSlug&quot;:&quot;ionic-framework-tutorial&quot;,&quot;content&quot;:&quot;Next, let\u0026#39;s modify the \u003ccode\u003enextSong()\u003c/code\u003e method to halt the current audio clip:&quot;}" data-trace="true" data-dom-id="Checkbox-react-component-9b00e810-0559-48a1-9ada-7e2d16dff8ff"></div> 
       <div id="Checkbox-react-component-9b00e810-0559-48a1-9ada-7e2d16dff8ff"></div> 
       <div class="highlight">
        <pre class=""><code>  <span class="nx">o</span><span class="p">.</span><span class="nx">nextSong</span> <span class="o">=</span> <span class="kd">function</span><span class="p">()</span> <span class="p">{</span>
    <span class="c1">// pop the index 0 off</span>
    <span class="nx">o</span><span class="p">.</span><span class="nx">queue</span><span class="p">.</span><span class="nx">shift</span><span class="p">();</span>

    <span class="c1">// end the song</span>
    <span class="nx">o</span><span class="p">.</span><span class="nx">haltAudio</span><span class="p">();</span>

    <span class="c1">// low on the queue? let's fill it up</span>
    <span class="k">if</span> <span class="p">(</span><span class="nx">o</span><span class="p">.</span><span class="nx">queue</span><span class="p">.</span><span class="nx">length</span> <span class="o">&lt;=</span> <span class="mi">3</span><span class="p">)</span> <span class="p">{</span>
      <span class="nx">o</span><span class="p">.</span><span class="nx">getNextSongs</span><span class="p">();</span>
    <span class="p">}</span>
  <span class="p">}</span>
</code></pre>
       </div>
       <div class="js-react-on-rails-component" style="display:none" data-component-name="Checkbox" data-props="{&quot;checkboxSlug&quot;:&quot;playCurrentSong-discoverctrl&quot;,&quot;courseSlug&quot;:&quot;ionic-framework-tutorial&quot;,&quot;content&quot;:&quot;Now in our \u003ccode\u003eDiscoverCtrl\u003c/code\u003e, fire \u003ccode\u003eRecommendations.playCurrentSong()\u003c/code\u003e when the promise returned from \u003ccode\u003eRecommendations.getNextSongs()\u003c/code\u003e resolves successfully:&quot;}" data-trace="true" data-dom-id="Checkbox-react-component-e768eec1-87d2-4c87-bdc7-a9a4d8068862"></div> 
       <div id="Checkbox-react-component-e768eec1-87d2-4c87-bdc7-a9a4d8068862"></div> 
       <div class="highlight">
        <pre class=""><code>  <span class="nx">Recommendations</span><span class="p">.</span><span class="nx">getNextSongs</span><span class="p">()</span>
    <span class="p">.</span><span class="nx">then</span><span class="p">(</span><span class="kd">function</span><span class="p">(){</span>
      <span class="nx">$scope</span><span class="p">.</span><span class="nx">currentSong</span> <span class="o">=</span> <span class="nx">Recommendations</span><span class="p">.</span><span class="nx">queue</span><span class="p">[</span><span class="mi">0</span><span class="p">];</span>
      <span class="nx">Recommendations</span><span class="p">.</span><span class="nx">playCurrentSong</span><span class="p">();</span>
    <span class="p">});</span>
</code></pre>
       </div>
       <p>This will cause the song to begin playing when the Discover page is first loaded.</p>
       <div class="js-react-on-rails-component" style="display:none" data-component-name="Checkbox" data-props="{&quot;checkboxSlug&quot;:&quot;playCurrentSong-next-song&quot;,&quot;courseSlug&quot;:&quot;ionic-framework-tutorial&quot;,&quot;content&quot;:&quot;Finally, we need to add a call to \u003ccode\u003eRecommendations.playCurrentSong()\u003c/code\u003e after we set a new song in \u003ccode\u003esendFeedback()\u003c/code\u003e:&quot;}" data-trace="true" data-dom-id="Checkbox-react-component-cee2db40-bb08-4cca-b962-d9a4394e4498"></div> 
       <div id="Checkbox-react-component-cee2db40-bb08-4cca-b962-d9a4394e4498"></div> 
       <div class="highlight">
        <pre class=""><code>    <span class="nx">$timeout</span><span class="p">(</span><span class="kd">function</span><span class="p">()</span> <span class="p">{</span>
      <span class="c1">// $timeout to allow animation to complete</span>
      <span class="nx">$scope</span><span class="p">.</span><span class="nx">currentSong</span> <span class="o">=</span> <span class="nx">Recommendations</span><span class="p">.</span><span class="nx">queue</span><span class="p">[</span><span class="mi">0</span><span class="p">];</span>
    <span class="p">},</span> <span class="mi">250</span><span class="p">);</span>

    <span class="nx">Recommendations</span><span class="p">.</span><span class="nx">playCurrentSong</span><span class="p">();</span>
</code></pre>
       </div>
       <p>Epic, each song's preview now plays as we skip/favorite the songs in the queue. There's only one problem: if you go to the favorites page, the song being previewed continues to play. We'll need to somehow fire the <code>haltAudio()</code> method in our <code>Recommendations</code> service when we're navigating to the favorites page, and resume playback of the song when navigating back to the discover page.</p>
       <p>If you look at the documentation for <a href="http://ionicframework.com/docs/api/directive/ionTab/" target="_blank">ion-tab</a>, you'll see that there are API events for when a tab is being selected (<code>on-select</code>) and when it is being deselected (<code>on-deselect</code>). For our favorites tab, we want to pause audio when it is being selected, and we want to play audio when it's being deselected (which means we're going back to the Discover page).</p>
       <div class="js-react-on-rails-component" style="display:none" data-component-name="Video" data-props="{&quot;slug&quot;:&quot;iontab-select-playback&quot;,&quot;provider&quot;:&quot;wistia&quot;,&quot;courseSlug&quot;:&quot;ionic-framework-tutorial&quot;,&quot;pro&quot;:false,&quot;thumbnailUrl&quot;:&quot;https://embed-ssl.wistia.com/deliveries/9c228c44eba2e28607b653d519848689e059de30.jpg&quot;}" data-trace="true" data-dom-id="Video-react-component-00eb776b-c5a5-40e6-bdcf-20c6dfc3d602"></div> 
       <div id="Video-react-component-00eb776b-c5a5-40e6-bdcf-20c6dfc3d602"></div> 
       <div class="js-react-on-rails-component" style="display:none" data-component-name="Checkbox" data-props="{&quot;checkboxSlug&quot;:&quot;create-enteringFavorites&quot;,&quot;courseSlug&quot;:&quot;ionic-framework-tutorial&quot;,&quot;content&quot;:&quot;Create an enteringFavorites method in TabsCtrl that halts the current song\u0026#39;s audio:&quot;}" data-trace="true" data-dom-id="Checkbox-react-component-664361b7-4460-4f7b-aa22-ebea50aaf02c"></div> 
       <div id="Checkbox-react-component-664361b7-4460-4f7b-aa22-ebea50aaf02c"></div> 
       <div class="highlight">
        <pre class=""><code><span class="p">.</span><span class="nx">controller</span><span class="p">(</span><span class="s1">'TabsCtrl'</span><span class="p">,</span> <span class="kd">function</span><span class="p">(</span><span class="nx">$scope</span><span class="p">,</span> <span class="nx">Recommendations</span><span class="p">)</span> <span class="p">{</span>
  <span class="c1">// stop audio when going to favorites page</span>
  <span class="nx">$scope</span><span class="p">.</span><span class="nx">enteringFavorites</span> <span class="o">=</span> <span class="kd">function</span><span class="p">()</span> <span class="p">{</span>
    <span class="nx">Recommendations</span><span class="p">.</span><span class="nx">haltAudio</span><span class="p">();</span>
  <span class="p">}</span>

<span class="p">});</span>
</code></pre>
       </div>
       <div class="js-react-on-rails-component" style="display:none" data-component-name="Checkbox" data-props="{&quot;checkboxSlug&quot;:&quot;enteringFavorites-onselect&quot;,&quot;courseSlug&quot;:&quot;ionic-framework-tutorial&quot;,&quot;content&quot;:&quot;Open tabs.html and set \u003ccode\u003eenteringFavorites\u003c/code\u003e as the expression that on-select will evaluate:&quot;}" data-trace="true" data-dom-id="Checkbox-react-component-f4c5c0cb-1846-4a4e-842f-67d120cb8609"></div> 
       <div id="Checkbox-react-component-f4c5c0cb-1846-4a4e-842f-67d120cb8609"></div> 
       <div class="highlight">
        <pre class=""><code><span class="nt">&lt;ion-tab</span> <span class="na">title=</span><span class="s">"Favorites"</span> <span class="na">icon-off=</span><span class="s">"ion-music-note"</span> <span class="na">icon-on=</span><span class="s">"ion-music-note"</span> <span class="na">on-select=</span><span class="s">"enteringFavorites()"</span> <span class="na">href=</span><span class="s">"#/tab/favorites"</span><span class="nt">&gt;</span>
</code></pre>
       </div>
       <p>When you tap on the favorites page, the current song will now pause. But when you go back to the discover page, the song won't resume. We could just fire <code>Recommendations.playCurrentSong()</code> for on-deselect, but that method assumes that there is at least one song in our queue, which is not a good assumption. For example, what if the user is on the favorites page, refreshes, and then goes to the Discover page? playCurrentSong would throw an error trying to call play() on a nonexistent audio object.</p>
       <p>We'll need to refactor some code to make this work. Specifically, we need to create an init function that will either retrieve songs (if there aren't any in the queue) or play the current song (if there's at least one song in the queue).</p>
       <div class="js-react-on-rails-component" style="display:none" data-component-name="Checkbox" data-props="{&quot;checkboxSlug&quot;:&quot;create-init-recs&quot;,&quot;courseSlug&quot;:&quot;ionic-framework-tutorial&quot;,&quot;content&quot;:&quot;Create an \u003ccode\u003einit()\u003c/code\u003e method in the \u003ccode\u003eRecommendations\u003c/code\u003e service that will either get the next songs or play the current song:&quot;}" data-trace="true" data-dom-id="Checkbox-react-component-43f7a543-639a-4992-ada3-57f0b009bee6"></div> 
       <div id="Checkbox-react-component-43f7a543-639a-4992-ada3-57f0b009bee6"></div> 
       <div class="highlight">
        <pre class=""><code>  <span class="nx">o</span><span class="p">.</span><span class="nx">init</span> <span class="o">=</span> <span class="kd">function</span><span class="p">()</span> <span class="p">{</span>
    <span class="k">if</span> <span class="p">(</span><span class="nx">o</span><span class="p">.</span><span class="nx">queue</span><span class="p">.</span><span class="nx">length</span> <span class="o">===</span> <span class="mi">0</span><span class="p">)</span> <span class="p">{</span>
      <span class="c1">// if there's nothing in the queue, fill it.</span>
      <span class="c1">// this also means that this is the first call of init.</span>
      <span class="k">return</span> <span class="nx">o</span><span class="p">.</span><span class="nx">getNextSongs</span><span class="p">();</span>

    <span class="p">}</span> <span class="k">else</span> <span class="p">{</span>
      <span class="c1">// otherwise, play the current song</span>
      <span class="k">return</span> <span class="nx">o</span><span class="p">.</span><span class="nx">playCurrentSong</span><span class="p">();</span>
    <span class="p">}</span>
  <span class="p">}</span>
</code></pre>
       </div>
       <div class="js-react-on-rails-component" style="display:none" data-component-name="Checkbox" data-props="{&quot;checkboxSlug&quot;:&quot;discoverctrl-use-init&quot;,&quot;courseSlug&quot;:&quot;ionic-framework-tutorial&quot;,&quot;content&quot;:&quot;In DiscoverCtrl, change \u003ccode\u003egetNextSongs()\u003c/code\u003e to \u003ccode\u003einit()\u003c/code\u003e:&quot;}" data-trace="true" data-dom-id="Checkbox-react-component-afeb00a1-59c4-47e8-9747-5d59f913517a"></div> 
       <div id="Checkbox-react-component-afeb00a1-59c4-47e8-9747-5d59f913517a"></div> 
       <div class="highlight">
        <pre class=""><code>  <span class="nx">Recommendations</span><span class="p">.</span><span class="nx">init</span><span class="p">()</span>
    <span class="p">.</span><span class="nx">then</span><span class="p">(</span><span class="kd">function</span><span class="p">(){</span>
      <span class="nx">$scope</span><span class="p">.</span><span class="nx">currentSong</span> <span class="o">=</span> <span class="nx">Recommendations</span><span class="p">.</span><span class="nx">queue</span><span class="p">[</span><span class="mi">0</span><span class="p">];</span>
      <span class="nx">Recommendations</span><span class="p">.</span><span class="nx">playCurrentSong</span><span class="p">();</span>
    <span class="p">});</span>
</code></pre>
       </div>
       <div class="js-react-on-rails-component" style="display:none" data-component-name="Checkbox" data-props="{&quot;checkboxSlug&quot;:&quot;leavingFavorites-use-init&quot;,&quot;courseSlug&quot;:&quot;ionic-framework-tutorial&quot;,&quot;content&quot;:&quot;Now, create a scope method in TabsCtrl that will fire \u003ccode\u003eRecommendations.init()\u003c/code\u003e when called by on-deselect:&quot;}" data-trace="true" data-dom-id="Checkbox-react-component-728ff143-26f6-4fe8-a7f4-1f089366b2a6"></div> 
       <div id="Checkbox-react-component-728ff143-26f6-4fe8-a7f4-1f089366b2a6"></div> 
       <div class="highlight">
        <pre class=""><code>  <span class="nx">$scope</span><span class="p">.</span><span class="nx">leavingFavorites</span> <span class="o">=</span> <span class="kd">function</span><span class="p">()</span> <span class="p">{</span>
    <span class="nx">Recommendations</span><span class="p">.</span><span class="nx">init</span><span class="p">();</span>
  <span class="p">}</span>
</code></pre>
       </div>
       <div class="js-react-on-rails-component" style="display:none" data-component-name="Checkbox" data-props="{&quot;checkboxSlug&quot;:&quot;ondeselect-leavefavorites&quot;,&quot;courseSlug&quot;:&quot;ionic-framework-tutorial&quot;,&quot;content&quot;:&quot;Finally, invoke the \u003ccode\u003eleavingFavorites()\u003c/code\u003e method \u003ccode\u003eon-deselect\u003c/code\u003e in tabs.html:&quot;}" data-trace="true" data-dom-id="Checkbox-react-component-0bd36d84-f588-443d-8a4a-0884b198ea67"></div> 
       <div id="Checkbox-react-component-0bd36d84-f588-443d-8a4a-0884b198ea67"></div> 
       <div class="highlight">
        <pre class=""><code>  <span class="nt">&lt;ion-tab</span> <span class="na">title=</span><span class="s">"Favorites"</span> <span class="na">icon-off=</span><span class="s">"ion-music-note"</span> <span class="na">icon-on=</span><span class="s">"ion-music-note"</span> <span class="na">on-select=</span><span class="s">"enteringFavorites()"</span> <span class="na">on-deselect=</span><span class="s">"leavingFavorites()"</span> <span class="na">href=</span><span class="s">"#/tab/favorites"</span><span class="nt">&gt;</span>
</code></pre>
       </div>
       <p>You should now be able to switch between the discover and favorites pages with automatic playing &amp; pausing of audio. Pretty neat!</p>
      </div>
      <div class="course-section" id="wrapping-up-the-ui-and-core-functionality">
       <h1>Wrapping up the UI and core functionality</h1>
       <p>When our app is retrieving data from a server, it's important that we give the user some sort of visual indicator while the app is waiting for the server's response. This especially relevant for the music sampling experience, so let's set up some loading indicators on the Discover page.</p>
       <div class="js-react-on-rails-component" style="display:none" data-component-name="Video" data-props="{&quot;slug&quot;:&quot;adding-loading-indicators&quot;,&quot;provider&quot;:&quot;wistia&quot;,&quot;courseSlug&quot;:&quot;ionic-framework-tutorial&quot;,&quot;pro&quot;:false,&quot;thumbnailUrl&quot;:&quot;https://embed-ssl.wistia.com/deliveries/6df510aa2bf880d03320005fbea916e10542db62.jpg&quot;}" data-trace="true" data-dom-id="Video-react-component-2c0cad64-1ceb-47d8-b6c7-f45d2ee65eeb"></div> 
       <div id="Video-react-component-2c0cad64-1ceb-47d8-b6c7-f45d2ee65eeb"></div> 
       <p>When the application first boots up and requests the first set of song recommendations, we'll want to display a large loading indicator that ideally will block further user input until the loading completes. Ionic just happens to have a fantastic <a href="http://ionicframework.com/docs/api/service/$ionicLoading/" target="_blank">$ionicLoading</a> extension that does exactly this, so let's use it!</p>
       <div class="js-react-on-rails-component" style="display:none" data-component-name="Checkbox" data-props="{&quot;checkboxSlug&quot;:&quot;ionicloading-wrapper-funcs&quot;,&quot;courseSlug&quot;:&quot;ionic-framework-tutorial&quot;,&quot;content&quot;:&quot;At the top of \u003ccode\u003eDiscoverCtrl\u003c/code\u003e, create methods for showing and hiding the \u003ccode\u003e$ionicLoading\u003c/code\u003e overlay, and then fire the \u003ccode\u003eshowLoading()\u003c/code\u003e function (this only happens when the controller is first initialized aka the first time the app is loaded). We\u0026#39;ll also need to inject \u003ccode\u003e$ionicLoading\u003c/code\u003e into \u003ccode\u003eDiscoverCtrl\u003c/code\u003e:&quot;}" data-trace="true" data-dom-id="Checkbox-react-component-265f1024-b6ad-4a4a-83d5-2ac7bf975556"></div> 
       <div id="Checkbox-react-component-265f1024-b6ad-4a4a-83d5-2ac7bf975556"></div> 
       <div class="highlight">
        <pre class=""><code><span class="p">.</span><span class="nx">controller</span><span class="p">(</span><span class="s1">'DiscoverCtrl'</span><span class="p">,</span> <span class="kd">function</span><span class="p">(</span><span class="nx">$scope</span><span class="p">,</span> <span class="nx">$ionicLoading</span><span class="p">,</span> <span class="nx">$timeout</span><span class="p">,</span> <span class="nx">User</span><span class="p">,</span> <span class="nx">Recommendations</span><span class="p">)</span> <span class="p">{</span>
  <span class="c1">// helper functions for loading</span>
  <span class="kd">var</span> <span class="nx">showLoading</span> <span class="o">=</span> <span class="kd">function</span><span class="p">()</span> <span class="p">{</span>
    <span class="nx">$ionicLoading</span><span class="p">.</span><span class="nx">show</span><span class="p">({</span>
      <span class="na">template</span><span class="p">:</span> <span class="s1">'&lt;i class="ion-loading-c"&gt;&lt;/i&gt;'</span><span class="p">,</span>
      <span class="na">noBackdrop</span><span class="p">:</span> <span class="kc">true</span>
    <span class="p">});</span>
  <span class="p">}</span>

  <span class="kd">var</span> <span class="nx">hideLoading</span> <span class="o">=</span> <span class="kd">function</span><span class="p">()</span> <span class="p">{</span>
    <span class="nx">$ionicLoading</span><span class="p">.</span><span class="nx">hide</span><span class="p">();</span>
  <span class="p">}</span>

  <span class="c1">// set loading to true first time while we retrieve songs from server.</span>
  <span class="nx">showLoading</span><span class="p">();</span>
</code></pre>
       </div>
       <div class="js-react-on-rails-component" style="display:none" data-component-name="Checkbox" data-props="{&quot;checkboxSlug&quot;:&quot;add-hideloading&quot;,&quot;courseSlug&quot;:&quot;ionic-framework-tutorial&quot;,&quot;content&quot;:&quot;Add \u003ccode\u003ehideLoading()\u003c/code\u003e to the \u003ccode\u003eRecommendations.init()\u003c/code\u003e success function in \u003ccode\u003eDiscoverCtrl\u003c/code\u003e, as we want to hide the loading indicator once the songs have been retrieved.&quot;}" data-trace="true" data-dom-id="Checkbox-react-component-00348007-e31a-471a-9865-7cec3d7a08d6"></div> 
       <div id="Checkbox-react-component-00348007-e31a-471a-9865-7cec3d7a08d6"></div> 
       <p>{info} If you're running the server locally, you probably won't see the $ionicLoading overlay due to how fast the init promise is resolved. If you shut down your server and refresh the Songhop app, you should be able to see the $ionicLoading overlay.</p>
       <p>Our loading indicator works really well! But wait a second - we should let the user know when the song's MP3 has finished loading when we skip/favorite through songs. Instead of having a blocking loading indicator like $ionicLoading, this time we'll have a loading icon next to the title of the song.</p>
       <div class="js-react-on-rails-component" style="display:none" data-component-name="Checkbox" data-props="{&quot;checkboxSlug&quot;:&quot;add-ionloadingc-icon&quot;,&quot;courseSlug&quot;:&quot;ionic-framework-tutorial&quot;,&quot;content&quot;:&quot;In discover.html, add an \u003ccode\u003e.ion-loading-c\u003c/code\u003e \u003ca href=\&quot;http://ionicons.com/\&quot; target=\&quot;_blank\&quot;\u003eionicon\u003c/a\u003e next to the title that will \u003ccode\u003eng-hide\u003c/code\u003e when \u003ccode\u003e$scope.currentSong.loaded == true\u003c/code\u003e:&quot;}" data-trace="true" data-dom-id="Checkbox-react-component-eb624172-f0a1-42bf-b57a-bf36e2f86c19"></div> 
       <div id="Checkbox-react-component-eb624172-f0a1-42bf-b57a-bf36e2f86c19"></div> 
       <div class="highlight">
        <pre class=""><code>      <span class="nt">&lt;div</span> <span class="na">class=</span><span class="s">"item"</span><span class="nt">&gt;</span>
        <span class="nt">&lt;h2&gt;</span>{{ currentSong.title }} <span class="nt">&lt;span</span> <span class="na">ng-hide=</span><span class="s">"currentSong.loaded"</span><span class="nt">&gt;&lt;i</span> <span class="na">class=</span><span class="s">"ion-loading-c"</span><span class="nt">&gt;&lt;/i&gt;&lt;/span&gt;&lt;/h2&gt;</span>
        <span class="nt">&lt;p&gt;</span>{{ currentSong.artist }}<span class="nt">&lt;/p&gt;</span>
      <span class="nt">&lt;/div&gt;</span>
</code></pre>
       </div>
       <div class="js-react-on-rails-component" style="display:none" data-component-name="Checkbox" data-props="{&quot;checkboxSlug&quot;:&quot;modify-init-songloaded&quot;,&quot;courseSlug&quot;:&quot;ionic-framework-tutorial&quot;,&quot;content&quot;:&quot;We\u0026#39;ll want to modify the \u003ccode\u003einit()\u003c/code\u003e resolve to set \u003ccode\u003e$scope.currentSong.loaded\u003c/code\u003e to \u003ccode\u003etrue\u003c/code\u003e when \u003ccode\u003eRecommendations.playCurrentSong()\u003c/code\u003e resolves successfully:&quot;}" data-trace="true" data-dom-id="Checkbox-react-component-90057e77-951a-4386-a088-c7c6d6518216"></div> 
       <div id="Checkbox-react-component-90057e77-951a-4386-a088-c7c6d6518216"></div> 
       <div class="highlight">
        <pre class=""><code>  <span class="nx">Recommendations</span><span class="p">.</span><span class="nx">init</span><span class="p">()</span>
    <span class="p">.</span><span class="nx">then</span><span class="p">(</span><span class="kd">function</span><span class="p">(){</span>

      <span class="nx">$scope</span><span class="p">.</span><span class="nx">currentSong</span> <span class="o">=</span> <span class="nx">Recommendations</span><span class="p">.</span><span class="nx">queue</span><span class="p">[</span><span class="mi">0</span><span class="p">];</span>

      <span class="k">return</span> <span class="nx">Recommendations</span><span class="p">.</span><span class="nx">playCurrentSong</span><span class="p">();</span>

    <span class="p">})</span>
    <span class="p">.</span><span class="nx">then</span><span class="p">(</span><span class="kd">function</span><span class="p">(){</span>
      <span class="c1">// turn loading off</span>
      <span class="nx">hideLoading</span><span class="p">();</span>
      <span class="nx">$scope</span><span class="p">.</span><span class="nx">currentSong</span><span class="p">.</span><span class="nx">loaded</span> <span class="o">=</span> <span class="kc">true</span><span class="p">;</span>
    <span class="p">});</span>
</code></pre>
       </div>
       <div class="js-react-on-rails-component" style="display:none" data-component-name="Checkbox" data-props="{&quot;checkboxSlug&quot;:&quot;modify-sendfeedback-songloaded&quot;,&quot;courseSlug&quot;:&quot;ionic-framework-tutorial&quot;,&quot;content&quot;:&quot;Then modify \u003ccode\u003esendFeedback\u003c/code\u003e to set the new song\u0026#39;s loading status to \u003ccode\u003efalse\u003c/code\u003e, but will set it to \u003ccode\u003etrue\u003c/code\u003e after \u003ccode\u003eRecommendations.playCurrentSong\u003c/code\u003e resolves successfully:&quot;}" data-trace="true" data-dom-id="Checkbox-react-component-8b15003c-d4e7-462b-91e7-e5208abab190"></div> 
       <div id="Checkbox-react-component-8b15003c-d4e7-462b-91e7-e5208abab190"></div> 
       <div class="highlight">
        <pre class=""><code>  <span class="c1">// fired when we favorite / skip a song.</span>
  <span class="nx">$scope</span><span class="p">.</span><span class="nx">sendFeedback</span> <span class="o">=</span> <span class="kd">function</span> <span class="p">(</span><span class="nx">bool</span><span class="p">)</span> <span class="p">{</span>

    <span class="c1">// first, add to favorites if they favorited</span>
    <span class="k">if</span> <span class="p">(</span><span class="nx">bool</span><span class="p">)</span> <span class="nx">User</span><span class="p">.</span><span class="nx">addSongToFavorites</span><span class="p">(</span><span class="nx">$scope</span><span class="p">.</span><span class="nx">currentSong</span><span class="p">);</span>

    <span class="c1">// set variable for the correct animation sequence</span>
    <span class="nx">$scope</span><span class="p">.</span><span class="nx">currentSong</span><span class="p">.</span><span class="nx">rated</span> <span class="o">=</span> <span class="nx">bool</span><span class="p">;</span>
    <span class="nx">$scope</span><span class="p">.</span><span class="nx">currentSong</span><span class="p">.</span><span class="nx">hide</span> <span class="o">=</span> <span class="kc">true</span><span class="p">;</span>

    <span class="c1">// prepare the next song</span>
    <span class="nx">Recommendations</span><span class="p">.</span><span class="nx">nextSong</span><span class="p">();</span>

    <span class="c1">// update current song in scope, timeout to allow animation to complete</span>
    <span class="nx">$timeout</span><span class="p">(</span><span class="kd">function</span><span class="p">()</span> <span class="p">{</span>
      <span class="nx">$scope</span><span class="p">.</span><span class="nx">currentSong</span> <span class="o">=</span> <span class="nx">Recommendations</span><span class="p">.</span><span class="nx">queue</span><span class="p">[</span><span class="mi">0</span><span class="p">];</span>
      <span class="nx">$scope</span><span class="p">.</span><span class="nx">currentSong</span><span class="p">.</span><span class="nx">loaded</span> <span class="o">=</span> <span class="kc">false</span><span class="p">;</span>
    <span class="p">},</span> <span class="mi">250</span><span class="p">);</span>

    <span class="nx">Recommendations</span><span class="p">.</span><span class="nx">playCurrentSong</span><span class="p">().</span><span class="nx">then</span><span class="p">(</span><span class="kd">function</span><span class="p">()</span> <span class="p">{</span>
      <span class="nx">$scope</span><span class="p">.</span><span class="nx">currentSong</span><span class="p">.</span><span class="nx">loaded</span> <span class="o">=</span> <span class="kc">true</span><span class="p">;</span>
    <span class="p">});</span>

  <span class="p">}</span>
</code></pre>
       </div>
       <p>Sick, now loading indicators work!</p> 
       <h2 id="adding-badges-to-the-tab-bar">Adding badges to the tab bar</h2> 
       <p>As we add songs to our favorites, it would be really nice if there was some sort of visual indicator of how many new favorites we've added. This will also encourage our users to visit their favorites and review their songs.</p>
       <p>You may have noticed in the <a href="http://ionicframework.com/docs/api/directive/ionTab/" target="_blank">documentation for ion-tab</a> that you can display badges on a given tab. This is exactly what we need!</p>
       <div class="js-react-on-rails-component" style="display:none" data-component-name="Video" data-props="{&quot;slug&quot;:&quot;tab-badges-and-open-song&quot;,&quot;provider&quot;:&quot;wistia&quot;,&quot;courseSlug&quot;:&quot;ionic-framework-tutorial&quot;,&quot;pro&quot;:false,&quot;thumbnailUrl&quot;:&quot;https://embed-ssl.wistia.com/deliveries/7dc42d255eee9103afeb50e12a025c6eae3461ea.jpg&quot;}" data-trace="true" data-dom-id="Video-react-component-ee4e73b7-e3ec-43dd-b5ff-c55d96dab922"></div> 
       <div id="Video-react-component-ee4e73b7-e3ec-43dd-b5ff-c55d96dab922"></div> 
       <p>First, we need to modify our user service to keep track of how many new favorites we have.</p>
       <div class="js-react-on-rails-component" style="display:none" data-component-name="Checkbox" data-props="{&quot;checkboxSlug&quot;:&quot;create-newFavorites&quot;,&quot;courseSlug&quot;:&quot;ionic-framework-tutorial&quot;,&quot;content&quot;:&quot;Attach a new variable \u003ccode\u003enewFavorites\u003c/code\u003e to the User return object:&quot;}" data-trace="true" data-dom-id="Checkbox-react-component-aa6708fd-42af-409d-a888-edfe0b618af6"></div> 
       <div id="Checkbox-react-component-aa6708fd-42af-409d-a888-edfe0b618af6"></div> 
       <div class="highlight">
        <pre class=""><code>  <span class="kd">var</span> <span class="nx">o</span> <span class="o">=</span> <span class="p">{</span>
    <span class="na">favorites</span><span class="p">:</span> <span class="p">[],</span>
    <span class="na">newFavorites</span><span class="p">:</span> <span class="mi">0</span>
  <span class="p">}</span>
</code></pre>
       </div>
       <div class="js-react-on-rails-component" style="display:none" data-component-name="Checkbox" data-props="{&quot;checkboxSlug&quot;:&quot;increase-newFavorites&quot;,&quot;courseSlug&quot;:&quot;ionic-framework-tutorial&quot;,&quot;content&quot;:&quot;When a user favorites a song via \u003ccode\u003eaddSongToFavorites()\u003c/code\u003e, we\u0026#39;ll increase the \u003ccode\u003enewFavorites\u003c/code\u003e count:&quot;}" data-trace="true" data-dom-id="Checkbox-react-component-664c8281-bbd3-4d3d-8920-ef01fa80dd3d"></div> 
       <div id="Checkbox-react-component-664c8281-bbd3-4d3d-8920-ef01fa80dd3d"></div> 
       <div class="highlight">
        <pre class=""><code>  <span class="nx">o</span><span class="p">.</span><span class="nx">addSongToFavorites</span> <span class="o">=</span> <span class="kd">function</span><span class="p">(</span><span class="nx">song</span><span class="p">)</span> <span class="p">{</span>
    <span class="c1">// make sure there's a song to add</span>
    <span class="k">if</span> <span class="p">(</span><span class="o">!</span><span class="nx">song</span><span class="p">)</span> <span class="k">return</span> <span class="kc">false</span><span class="p">;</span>

    <span class="c1">// add to favorites array</span>
    <span class="nx">o</span><span class="p">.</span><span class="nx">favorites</span><span class="p">.</span><span class="nx">unshift</span><span class="p">(</span><span class="nx">song</span><span class="p">);</span>
    <span class="nx">o</span><span class="p">.</span><span class="nx">newFavorites</span><span class="o">++</span><span class="p">;</span>
  <span class="p">}</span>
</code></pre>
       </div>
       <div class="js-react-on-rails-component" style="display:none" data-component-name="Checkbox" data-props="{&quot;checkboxSlug&quot;:&quot;create-favoriteCount&quot;,&quot;courseSlug&quot;:&quot;ionic-framework-tutorial&quot;,&quot;content&quot;:&quot;Create a new method that returns the total number of new favorites the user has:&quot;}" data-trace="true" data-dom-id="Checkbox-react-component-52e3e13c-8660-40e6-a841-f68df33ba0bd"></div> 
       <div id="Checkbox-react-component-52e3e13c-8660-40e6-a841-f68df33ba0bd"></div> 
       <div class="highlight">
        <pre class=""><code>  <span class="nx">o</span><span class="p">.</span><span class="nx">favoriteCount</span> <span class="o">=</span> <span class="kd">function</span><span class="p">()</span> <span class="p">{</span>
    <span class="k">return</span> <span class="nx">o</span><span class="p">.</span><span class="nx">newFavorites</span><span class="p">;</span>
  <span class="p">}</span>
</code></pre>
       </div>
       <div class="js-react-on-rails-component" style="display:none" data-component-name="Checkbox" data-props="{&quot;checkboxSlug&quot;:&quot;favCount-scope-var&quot;,&quot;courseSlug&quot;:&quot;ionic-framework-tutorial&quot;,&quot;content&quot;:&quot;Expose the \u003ccode\u003eUser.favoriteCount()\u003c/code\u003e method to the \u003ccode\u003eTabsCtrl\u003c/code\u003e scope (don\u0026#39;t forget to inject the User service):&quot;}" data-trace="true" data-dom-id="Checkbox-react-component-c084e5c4-aabb-42bc-951b-97785bdda367"></div> 
       <div id="Checkbox-react-component-c084e5c4-aabb-42bc-951b-97785bdda367"></div> 
       <div class="highlight">
        <pre class=""><code><span class="p">.</span><span class="nx">controller</span><span class="p">(</span><span class="s1">'TabsCtrl'</span><span class="p">,</span> <span class="kd">function</span><span class="p">(</span><span class="nx">$scope</span><span class="p">,</span> <span class="nx">User</span><span class="p">,</span> <span class="nx">Recommendations</span><span class="p">)</span> <span class="p">{</span>
  <span class="c1">// expose the number of new favorites to the scope</span>
  <span class="nx">$scope</span><span class="p">.</span><span class="nx">favCount</span> <span class="o">=</span> <span class="nx">User</span><span class="p">.</span><span class="nx">favoriteCount</span><span class="p">;</span>

  <span class="p">...</span>
<span class="p">}</span>
</code></pre>
       </div>
       <div class="js-react-on-rails-component" style="display:none" data-component-name="Checkbox" data-props="{&quot;checkboxSlug&quot;:&quot;zero-out-newFavorites&quot;,&quot;courseSlug&quot;:&quot;ionic-framework-tutorial&quot;,&quot;content&quot;:&quot;When the user taps on the favorites tab, we want to zero out \u003ccode\u003eUser.newFavorites\u003c/code\u003e. Lets update our \u003ccode\u003eenteringFavorites()\u003c/code\u003e method to do this:&quot;}" data-trace="true" data-dom-id="Checkbox-react-component-f4a68aa9-456a-43f2-88c5-a4bc2a504d79"></div> 
       <div id="Checkbox-react-component-f4a68aa9-456a-43f2-88c5-a4bc2a504d79"></div> 
       <div class="highlight">
        <pre class=""><code>  <span class="c1">// method to reset new favorites to 0 when we click the fav tab</span>
  <span class="nx">$scope</span><span class="p">.</span><span class="nx">enteringFavorites</span> <span class="o">=</span> <span class="kd">function</span><span class="p">()</span> <span class="p">{</span>
    <span class="nx">User</span><span class="p">.</span><span class="nx">newFavorites</span> <span class="o">=</span> <span class="mi">0</span><span class="p">;</span>
    <span class="nx">Recommendations</span><span class="p">.</span><span class="nx">haltAudio</span><span class="p">();</span>
  <span class="p">}</span>
</code></pre>
       </div>
       <div class="js-react-on-rails-component" style="display:none" data-component-name="Checkbox" data-props="{&quot;checkboxSlug&quot;:&quot;create-badge&quot;,&quot;courseSlug&quot;:&quot;ionic-framework-tutorial&quot;,&quot;content&quot;:&quot;The final step is to set up our badge in tabs.html. Set the badge type to badge-assertive with the badge content displaying \u003ccode\u003efavCount()\u003c/code\u003e:&quot;}" data-trace="true" data-dom-id="Checkbox-react-component-19571dd6-9b0e-4edf-8c6e-b076c513a4a6"></div> 
       <div id="Checkbox-react-component-19571dd6-9b0e-4edf-8c6e-b076c513a4a6"></div> 
       <div class="highlight">
        <pre class=""><code><span class="nt">&lt;ion-tab</span> <span class="na">title=</span><span class="s">"Favorites"</span> <span class="na">icon-off=</span><span class="s">"ion-music-note"</span> <span class="na">icon-on=</span><span class="s">"ion-music-note"</span> <span class="na">badge=</span><span class="s">"favCount()"</span> <span class="na">badge-style=</span><span class="s">"badge-assertive"</span> <span class="na">on-select=</span><span class="s">"enteringFavorites()"</span> <span class="na">on-deselect=</span><span class="s">"leavingFavorites()"</span> <span class="na">href=</span><span class="s">"#/tab/favorites"</span><span class="nt">&gt;</span>
</code></pre>
       </div>
       <p>Now when we favorite songs the number of new favorites show up in the tab bar, but disappears when we navigate to the favorites page. Cool!</p>
       <p>The last piece of core functionality missing from our app is the ability to access our favorite songs directly on Spotify website/app. Since Spotify gives us a web URL for every song, we can just open a new browser window pointed at the song's <code>open_url</code> attribute.</p>
       <div class="js-react-on-rails-component" style="display:none" data-component-name="Checkbox" data-props="{&quot;checkboxSlug&quot;:&quot;opensong-favoriteshtml&quot;,&quot;courseSlug&quot;:&quot;ionic-framework-tutorial&quot;,&quot;content&quot;:&quot;In favorites.html, fire a scope method called \u003ccode\u003eopenSong()\u003c/code\u003e on ng-click that takes the song as an argument:&quot;}" data-trace="true" data-dom-id="Checkbox-react-component-f6c08b85-5a04-4366-bf53-1ef0afb24d9e"></div> 
       <div id="Checkbox-react-component-f6c08b85-5a04-4366-bf53-1ef0afb24d9e"></div> 
       <div class="highlight">
        <pre class=""><code><span class="nt">&lt;ion-item</span> <span class="na">ng-repeat=</span><span class="s">"song in favorites"</span> <span class="na">class=</span><span class="s">"item-avatar"</span> <span class="na">ng-click=</span><span class="s">"openSong(song)"</span><span class="nt">&gt;</span>
</code></pre>
       </div>
       <div class="js-react-on-rails-component" style="display:none" data-component-name="Checkbox" data-props="{&quot;checkboxSlug&quot;:&quot;opensong-favoritesctrl&quot;,&quot;courseSlug&quot;:&quot;ionic-framework-tutorial&quot;,&quot;content&quot;:&quot;Then create the open song method in our favorites controller (be sure to inject \u003ccode\u003e$window\u003c/code\u003e into \u003ccode\u003eFavoritesCtrl\u003c/code\u003e):&quot;}" data-trace="true" data-dom-id="Checkbox-react-component-443ab85a-efb0-452d-be91-9b2fd3e99c85"></div> 
       <div id="Checkbox-react-component-443ab85a-efb0-452d-be91-9b2fd3e99c85"></div> 
       <div class="highlight">
        <pre class=""><code>  <span class="nx">$scope</span><span class="p">.</span><span class="nx">openSong</span> <span class="o">=</span> <span class="kd">function</span><span class="p">(</span><span class="nx">song</span><span class="p">)</span> <span class="p">{</span>
    <span class="nx">$window</span><span class="p">.</span><span class="nx">open</span><span class="p">(</span><span class="nx">song</span><span class="p">.</span><span class="nx">open_url</span><span class="p">,</span> <span class="s2">"_system"</span><span class="p">);</span>
  <span class="p">}</span>
</code></pre>
       </div>
       <p>Now we're done! In the next section, we're going to cover authentication &amp; persisting user sessions between app uses.</p>
      </div>
      <div class="course-section" id="creating-and-persisting-user-data">
       <h1>Creating and persisting user data</h1>
       <p>When an Ionic application needs to authenticate with a server, it's usually done with token based session management instead of cookies. It's easier to store an access token on the device than to ensure a browser cookie persists across app usages. For this course, we're going to use an insanely simple implementation of token based authentication. If you're planning on implementing token based authentication in a real app, we recommend <a href="https://auth0.com/blog/2014/01/07/angularjs-authentication-with-cookies-vs-token/" target="_blank">reading this post</a> on the topic as well as taking a look at <a href="https://github.com/sean-hill/ionic-user-auth-express" target="_blank">this Github repo</a> of an Ionic app that performs user authentication using bearer tokens, as specified by <a href="http://tools.ietf.org/html/rfc6750" target="_blank">RFC 6750</a>.</p>
       <p>Before we jump into authentication with our server, first, we will need to create a page for users to sign in/sign up. For this app, we will only require a username to sign up and sign in (in the real world you'd normally require a password along with the username, but since this isn't the real world, we're keeping it simple).</p>
       <p>{info} Because other people will be using the same Heroku server for this course, use <em>very</em> unique usernames to ensure your accounts aren't colliding with others!</p>
       <div class="js-react-on-rails-component" style="display:none" data-component-name="Video" data-props="{&quot;slug&quot;:&quot;server-authentication&quot;,&quot;provider&quot;:&quot;wistia&quot;,&quot;courseSlug&quot;:&quot;ionic-framework-tutorial&quot;,&quot;pro&quot;:false,&quot;thumbnailUrl&quot;:&quot;https://embed-ssl.wistia.com/deliveries/b96744a238bfa9e5060f0307dbb237e8e564aa28.jpg&quot;}" data-trace="true" data-dom-id="Video-react-component-c4b8c1ee-aca4-4e56-a6f3-7508798dba8b"></div> 
       <div id="Video-react-component-c4b8c1ee-aca4-4e56-a6f3-7508798dba8b"></div> 
       <div class="js-react-on-rails-component" style="display:none" data-component-name="Checkbox" data-props="{&quot;checkboxSlug&quot;:&quot;create-splash-state&quot;,&quot;courseSlug&quot;:&quot;ionic-framework-tutorial&quot;,&quot;content&quot;:&quot;In app.js, create a new state called \u003ccode\u003esplash\u003c/code\u003e at the route \u0026#39;/\u0026#39;. Being the root route means that it will be the first page loaded when the app initializes. We also want to update \u003ccode\u003e$urlRouterProvider.otherwise()\u003c/code\u003e to point at \u0026#39;/\u0026#39; from now on, instead of the discover page.&quot;}" data-trace="true" data-dom-id="Checkbox-react-component-769e125b-3bd3-44e3-b6fe-162d077779c7"></div> 
       <div id="Checkbox-react-component-769e125b-3bd3-44e3-b6fe-162d077779c7"></div> 
       <div class="highlight">
        <pre class=""><code>  <span class="c1">// splash page</span>
  <span class="p">.</span><span class="nx">state</span><span class="p">(</span><span class="s1">'splash'</span><span class="p">,</span> <span class="p">{</span>
    <span class="na">url</span><span class="p">:</span> <span class="s1">'/'</span><span class="p">,</span>
    <span class="na">templateUrl</span><span class="p">:</span> <span class="s1">'templates/splash.html'</span><span class="p">,</span>
    <span class="na">controller</span><span class="p">:</span> <span class="s1">'SplashCtrl'</span>
  <span class="p">})</span>
</code></pre>
       </div>
       <div class="highlight">
        <pre class=""><code><span class="nx">$urlRouterProvider</span><span class="p">.</span><span class="nx">otherwise</span><span class="p">(</span><span class="s1">'/'</span><span class="p">);</span>
</code></pre>
       </div>
       <div class="js-react-on-rails-component" style="display:none" data-component-name="Checkbox" data-props="{&quot;checkboxSlug&quot;:&quot;create-SplashCtrl&quot;,&quot;courseSlug&quot;:&quot;ionic-framework-tutorial&quot;,&quot;content&quot;:&quot;We told UI-Router that the \u003ccode\u003esplash\u003c/code\u003e state will use a controller called \u003ccode\u003eSplashCtrl\u003c/code\u003e, so lets create it in controllers.js:&quot;}" data-trace="true" data-dom-id="Checkbox-react-component-e177bf46-b924-43d5-811c-11b14d6384b5"></div> 
       <div id="Checkbox-react-component-e177bf46-b924-43d5-811c-11b14d6384b5"></div> 
       <div class="highlight">
        <pre class=""><code><span class="p">.</span><span class="nx">controller</span><span class="p">(</span><span class="s1">'SplashCtrl'</span><span class="p">,</span> <span class="kd">function</span><span class="p">(</span><span class="nx">$scope</span><span class="p">)</span> <span class="p">{</span>
<span class="p">});</span>
</code></pre>
       </div>
       <div class="js-react-on-rails-component" style="display:none" data-component-name="Checkbox" data-props="{&quot;checkboxSlug&quot;:&quot;create-splash.html&quot;,&quot;courseSlug&quot;:&quot;ionic-framework-tutorial&quot;,&quot;content&quot;:&quot;Create the splash.html file defined in the \u003ccode\u003esplash\u003c/code\u003e state inside the templates/ directory, and paste the following HTML into it:&quot;}" data-trace="true" data-dom-id="Checkbox-react-component-fc50ed64-1f57-45f4-acf8-643cdbc7cae1"></div> 
       <div id="Checkbox-react-component-fc50ed64-1f57-45f4-acf8-643cdbc7cae1"></div> 
       <div class="highlight">
        <pre class=""><code><span class="nt">&lt;ion-view</span> <span class="na">view-title=</span><span class="s">"Songhop"</span> <span class="na">hide-nav-bar=</span><span class="s">"true"</span> <span class="na">class=</span><span class="s">"splash-page"</span><span class="nt">&gt;</span>
  <span class="nt">&lt;ion-content</span> <span class="na">scroll=</span><span class="s">"false"</span><span class="nt">&gt;</span>

    <span class="nt">&lt;div</span> <span class="na">class=</span><span class="s">"padding logo"</span><span class="nt">&gt;</span>
      <span class="nt">&lt;h1&gt;</span>songhop<span class="nt">&lt;/h1&gt;</span>
    <span class="nt">&lt;/div&gt;</span>


    <span class="nt">&lt;div</span> <span class="na">class=</span><span class="s">"login-form"</span><span class="nt">&gt;</span>
      <span class="nt">&lt;div</span> <span class="na">class=</span><span class="s">"card"</span><span class="nt">&gt;</span>
        <span class="nt">&lt;div</span> <span class="na">class=</span><span class="s">"list"</span><span class="nt">&gt;</span>
          <span class="nt">&lt;label</span> <span class="na">class=</span><span class="s">"item item-input"</span><span class="nt">&gt;</span>
            <span class="nt">&lt;input</span> <span class="na">type=</span><span class="s">"text"</span> <span class="na">ng-model=</span><span class="s">"form.username"</span> <span class="na">placeholder=</span><span class="s">"Enter your {{ form.signingUp ? 'desired' : 'songhop' }} username"</span><span class="nt">&gt;</span>
          <span class="nt">&lt;/label&gt;</span>
        <span class="nt">&lt;/div&gt;</span>
      <span class="nt">&lt;/div&gt;</span>

      <span class="nt">&lt;div</span> <span class="na">class=</span><span class="s">"padding-left padding-right"</span><span class="nt">&gt;</span>
        <span class="nt">&lt;button</span> <span class="na">class=</span><span class="s">"button button-block action-button"</span> <span class="na">ng-class=</span><span class="s">"{'button-positive': !form.signingUp, 'button-balanced': form.signingUp}"</span> <span class="na">ng-click=</span><span class="s">"submitForm(form.username, form.signingUp)"</span><span class="nt">&gt;</span>
          {{ form.signingUp ? 'Sign up' : 'Sign in' }}
        <span class="nt">&lt;/button&gt;</span>
      <span class="nt">&lt;/div&gt;</span>
    <span class="nt">&lt;/div&gt;</span>


    <span class="nt">&lt;div</span> <span class="na">class=</span><span class="s">"padding signup-opt"</span> <span class="na">ng-click=</span><span class="s">"form.signingUp = !form.signingUp"</span><span class="nt">&gt;</span>
      {{ form.signingUp ? 'Have an account? Sign in!' : 'Need an account? Sign up!' }}
    <span class="nt">&lt;/div&gt;</span>

  <span class="nt">&lt;/ion-content&gt;</span>
<span class="nt">&lt;/ion-view&gt;</span>
</code></pre>
       </div>
       <p>Take a quick glance at what's in our template, as there are a few things worth noting. First, our form is submitted through a scope method: <code>submitForm(form.username, form.signingUp)</code>. We pass along the username from the input field, along with a boolean if we're signing up (false means we're logging in). Also note that in our ion-view we request to hide the nav bar with <code>hide-nav-bar="true"</code> (since there's no places to navigate to/from on this page).</p>
       <p>We need a place to store the session token ID and other data we receive back from the server. Since this is information is related to our user, it seems a natural choice to store this in the User service.</p>
       <div class="js-react-on-rails-component" style="display:none" data-component-name="Checkbox" data-props="{&quot;checkboxSlug&quot;:&quot;session-in-user-return-obj&quot;,&quot;courseSlug&quot;:&quot;ionic-framework-tutorial&quot;,&quot;content&quot;:&quot;We\u0026#39;ll be storing \u003ccode\u003eusername\u003c/code\u003e and \u003ccode\u003esession_id\u003c/code\u003e in the \u003ccode\u003eUser\u003c/code\u003e service, so let\u0026#39;s define them in our return object:&quot;}" data-trace="true" data-dom-id="Checkbox-react-component-0320d9f4-e40b-4463-9327-34bf84bb433a"></div> 
       <div id="Checkbox-react-component-0320d9f4-e40b-4463-9327-34bf84bb433a"></div> 
       <div class="highlight">
        <pre class=""><code>  <span class="kd">var</span> <span class="nx">o</span> <span class="o">=</span> <span class="p">{</span>
    <span class="na">username</span><span class="p">:</span> <span class="kc">false</span><span class="p">,</span>
    <span class="na">session_id</span><span class="p">:</span> <span class="kc">false</span><span class="p">,</span>
    <span class="na">favorites</span><span class="p">:</span> <span class="p">[],</span>
    <span class="na">newFavorites</span><span class="p">:</span> <span class="mi">0</span>
  <span class="p">}</span>
</code></pre>
       </div>
       <p>In our User service, we need a method that will send a username to the server for attempting login or signup and handling the result properly.</p>
       <div class="js-react-on-rails-component" style="display:none" data-component-name="Checkbox" data-props="{&quot;checkboxSlug&quot;:&quot;create-user-svc-auth&quot;,&quot;courseSlug&quot;:&quot;ionic-framework-tutorial&quot;,&quot;content&quot;:&quot;First, inject \u003ccode\u003e$http\u003c/code\u003e and \u003ccode\u003eSERVER\u003c/code\u003e into the User service, as we\u0026#39;ll need them for communicating with the server. Then create the \u003ccode\u003eauth()\u003c/code\u003e method that return a \u003ccode\u003e$http\u003c/code\u003e promise. Note that the routes for login and signup are /login and /signup and require a \u003ccode\u003eusername\u003c/code\u003e field in the post request:&quot;}" data-trace="true" data-dom-id="Checkbox-react-component-f4e73fd1-c3e9-4818-9984-c70af302f72c"></div> 
       <div id="Checkbox-react-component-f4e73fd1-c3e9-4818-9984-c70af302f72c"></div> 
       <div class="highlight">
        <pre class=""><code><span class="p">.</span><span class="nx">factory</span><span class="p">(</span><span class="s1">'User'</span><span class="p">,</span> <span class="kd">function</span><span class="p">(</span><span class="nx">$http</span><span class="p">,</span> <span class="nx">SERVER</span><span class="p">)</span> <span class="p">{</span>
</code></pre>
       </div>
       <div class="highlight">
        <pre class=""><code>  <span class="c1">// attempt login or signup</span>
  <span class="nx">o</span><span class="p">.</span><span class="nx">auth</span> <span class="o">=</span> <span class="kd">function</span><span class="p">(</span><span class="nx">username</span><span class="p">,</span> <span class="nx">signingUp</span><span class="p">)</span> <span class="p">{</span>

    <span class="kd">var</span> <span class="nx">authRoute</span><span class="p">;</span>

    <span class="k">if</span> <span class="p">(</span><span class="nx">signingUp</span><span class="p">)</span> <span class="p">{</span>
      <span class="nx">authRoute</span> <span class="o">=</span> <span class="s1">'signup'</span><span class="p">;</span>
    <span class="p">}</span> <span class="k">else</span> <span class="p">{</span>
      <span class="nx">authRoute</span> <span class="o">=</span> <span class="s1">'login'</span>
    <span class="p">}</span>

    <span class="k">return</span> <span class="nx">$http</span><span class="p">.</span><span class="nx">post</span><span class="p">(</span><span class="nx">SERVER</span><span class="p">.</span><span class="nx">url</span> <span class="o">+</span> <span class="s1">'/'</span> <span class="o">+</span> <span class="nx">authRoute</span><span class="p">,</span> <span class="p">{</span><span class="na">username</span><span class="p">:</span> <span class="nx">username</span><span class="p">});</span>
  <span class="p">}</span>
</code></pre>
       </div>
       <div class="js-react-on-rails-component" style="display:none" data-component-name="Checkbox" data-props="{&quot;checkboxSlug&quot;:&quot;create-submitForm&quot;,&quot;courseSlug&quot;:&quot;ionic-framework-tutorial&quot;,&quot;content&quot;:&quot;In \u003ccode\u003eSplashCtrl\u003c/code\u003e, create the method \u003ccode\u003esubmitForm()\u003c/code\u003e that calls the \u003ccode\u003eUser.auth()\u003c/code\u003e method (be sure to inject the \u003ccode\u003eUser\u003c/code\u003e and \u003ccode\u003e$state\u003c/code\u003e service):&quot;}" data-trace="true" data-dom-id="Checkbox-react-component-45b2b3e5-4daf-4cc1-9b4d-8cdcb74497a9"></div> 
       <div id="Checkbox-react-component-45b2b3e5-4daf-4cc1-9b4d-8cdcb74497a9"></div> 
       <div class="highlight">
        <pre class=""><code><span class="p">.</span><span class="nx">controller</span><span class="p">(</span><span class="s1">'SplashCtrl'</span><span class="p">,</span> <span class="kd">function</span><span class="p">(</span><span class="nx">$scope</span><span class="p">,</span> <span class="nx">$state</span><span class="p">,</span> <span class="nx">User</span><span class="p">)</span> <span class="p">{</span>

  <span class="c1">// attempt to signup/login via User.auth</span>
  <span class="nx">$scope</span><span class="p">.</span><span class="nx">submitForm</span> <span class="o">=</span> <span class="kd">function</span><span class="p">(</span><span class="nx">username</span><span class="p">,</span> <span class="nx">signingUp</span><span class="p">)</span> <span class="p">{</span>
    <span class="nx">User</span><span class="p">.</span><span class="nx">auth</span><span class="p">(</span><span class="nx">username</span><span class="p">,</span> <span class="nx">signingUp</span><span class="p">).</span><span class="nx">then</span><span class="p">(</span><span class="kd">function</span><span class="p">(){</span>
      <span class="c1">// session is now set, so lets redirect to discover page</span>
      <span class="nx">$state</span><span class="p">.</span><span class="nx">go</span><span class="p">(</span><span class="s1">'tab.discover'</span><span class="p">);</span>

    <span class="p">},</span> <span class="kd">function</span><span class="p">()</span> <span class="p">{</span>
      <span class="c1">// error handling here</span>
      <span class="nx">alert</span><span class="p">(</span><span class="s1">'Hmm... try another username.'</span><span class="p">);</span>

    <span class="p">});</span>
  <span class="p">}</span>

<span class="p">});</span>
</code></pre>
       </div>
       <p>Part of the data we need to retrieve on authentication success is our list of favorite songs. The only problem is that our methods for adding, removing, and retrieving favorites aren't wired up to the server...yet! Let's quickly take care of that.</p>
       <p>Adding, removing, and retrieving favorites are actions that are tied to a specific user account. This means that we need to pass along our <code>session_id</code> with all of these requests in order to attach the desired request with the correct user.</p>
       <div class="js-react-on-rails-component" style="display:none" data-component-name="Checkbox" data-props="{&quot;checkboxSlug&quot;:&quot;add-server-addSongToFavorites&quot;,&quot;courseSlug&quot;:&quot;ionic-framework-tutorial&quot;,&quot;content&quot;:&quot;Have \u003ccode\u003eaddSongToFavorites()\u003c/code\u003e return an \u003ccode\u003e$http\u003c/code\u003e POST request to /favorites with the ID of the song we favorited, along with our user\u0026#39;s \u003ccode\u003esession_id\u003c/code\u003e:&quot;}" data-trace="true" data-dom-id="Checkbox-react-component-b8b6acce-1f1d-4d41-9d1b-2a658d95b9c1"></div> 
       <div id="Checkbox-react-component-b8b6acce-1f1d-4d41-9d1b-2a658d95b9c1"></div> 
       <div class="highlight">
        <pre class=""><code>  <span class="nx">o</span><span class="p">.</span><span class="nx">addSongToFavorites</span> <span class="o">=</span> <span class="kd">function</span><span class="p">(</span><span class="nx">song</span><span class="p">)</span> <span class="p">{</span>
    <span class="c1">// make sure there's a song to add</span>
    <span class="k">if</span> <span class="p">(</span><span class="o">!</span><span class="nx">song</span><span class="p">)</span> <span class="k">return</span> <span class="kc">false</span><span class="p">;</span>

    <span class="c1">// add to favorites array</span>
    <span class="nx">o</span><span class="p">.</span><span class="nx">favorites</span><span class="p">.</span><span class="nx">unshift</span><span class="p">(</span><span class="nx">song</span><span class="p">);</span>
    <span class="nx">o</span><span class="p">.</span><span class="nx">newFavorites</span><span class="o">++</span><span class="p">;</span>

    <span class="c1">// persist this to the server</span>
    <span class="k">return</span> <span class="nx">$http</span><span class="p">.</span><span class="nx">post</span><span class="p">(</span><span class="nx">SERVER</span><span class="p">.</span><span class="nx">url</span> <span class="o">+</span> <span class="s1">'/favorites'</span><span class="p">,</span> <span class="p">{</span><span class="na">session_id</span><span class="p">:</span> <span class="nx">o</span><span class="p">.</span><span class="nx">session_id</span><span class="p">,</span> <span class="na">song_id</span><span class="p">:</span><span class="nx">song</span><span class="p">.</span><span class="nx">song_id</span> <span class="p">});</span>
  <span class="p">}</span>
</code></pre>
       </div>
       <div class="js-react-on-rails-component" style="display:none" data-component-name="Checkbox" data-props="{&quot;checkboxSlug&quot;:&quot;add-server-removeSongFromFavorites&quot;,&quot;courseSlug&quot;:&quot;ionic-framework-tutorial&quot;,&quot;content&quot;:&quot;Have \u003ccode\u003eremoveSongFromFavorites()\u003c/code\u003e return an \u003ccode\u003e$http\u003c/code\u003e DELETE request to /favorites with the ID of the song we favorited, along with our user\u0026#39;s \u003ccode\u003esession_id\u003c/code\u003e:&quot;}" data-trace="true" data-dom-id="Checkbox-react-component-613ef00d-92a1-48e8-9a45-539e81f0ea49"></div> 
       <div id="Checkbox-react-component-613ef00d-92a1-48e8-9a45-539e81f0ea49"></div> 
       <div class="highlight">
        <pre class=""><code>  <span class="nx">o</span><span class="p">.</span><span class="nx">removeSongFromFavorites</span> <span class="o">=</span> <span class="kd">function</span><span class="p">(</span><span class="nx">song</span><span class="p">,</span> <span class="nx">index</span><span class="p">)</span> <span class="p">{</span>
    <span class="c1">// make sure there's a song to add</span>
    <span class="k">if</span> <span class="p">(</span><span class="o">!</span><span class="nx">song</span><span class="p">)</span> <span class="k">return</span> <span class="kc">false</span><span class="p">;</span>

    <span class="c1">// add to favorites array</span>
    <span class="nx">o</span><span class="p">.</span><span class="nx">favorites</span><span class="p">.</span><span class="nx">splice</span><span class="p">(</span><span class="nx">index</span><span class="p">,</span> <span class="mi">1</span><span class="p">);</span>

    <span class="c1">// persist this to the server</span>
    <span class="k">return</span> <span class="nx">$http</span><span class="p">({</span>
      <span class="na">method</span><span class="p">:</span> <span class="s1">'DELETE'</span><span class="p">,</span>
      <span class="na">url</span><span class="p">:</span> <span class="nx">SERVER</span><span class="p">.</span><span class="nx">url</span> <span class="o">+</span> <span class="s1">'/favorites'</span><span class="p">,</span>
      <span class="na">params</span><span class="p">:</span> <span class="p">{</span> <span class="na">session_id</span><span class="p">:</span> <span class="nx">o</span><span class="p">.</span><span class="nx">session_id</span><span class="p">,</span> <span class="na">song_id</span><span class="p">:</span><span class="nx">song</span><span class="p">.</span><span class="nx">song_id</span> <span class="p">}</span>
    <span class="p">});</span>

  <span class="p">}</span>
</code></pre>
       </div>
       <div class="js-react-on-rails-component" style="display:none" data-component-name="Checkbox" data-props="{&quot;checkboxSlug&quot;:&quot;create-populateFavorites&quot;,&quot;courseSlug&quot;:&quot;ionic-framework-tutorial&quot;,&quot;content&quot;:&quot;Finally, we\u0026#39;ll need to request our list of favorites from the server on load. Let\u0026#39;s create a method called \u003ccode\u003epopulateFavorites()\u003c/code\u003e that will do this by sending an \u003ccode\u003e$http\u003c/code\u003e GET request to /favorites:&quot;}" data-trace="true" data-dom-id="Checkbox-react-component-0ab860ef-06d4-4f16-b856-cd4d249e59b5"></div> 
       <div id="Checkbox-react-component-0ab860ef-06d4-4f16-b856-cd4d249e59b5"></div> 
       <div class="highlight">
        <pre class=""><code>  <span class="c1">// gets the entire list of this user's favs from server</span>
  <span class="nx">o</span><span class="p">.</span><span class="nx">populateFavorites</span> <span class="o">=</span> <span class="kd">function</span><span class="p">()</span> <span class="p">{</span>
    <span class="k">return</span> <span class="nx">$http</span><span class="p">({</span>
      <span class="na">method</span><span class="p">:</span> <span class="s1">'GET'</span><span class="p">,</span>
      <span class="na">url</span><span class="p">:</span> <span class="nx">SERVER</span><span class="p">.</span><span class="nx">url</span> <span class="o">+</span> <span class="s1">'/favorites'</span><span class="p">,</span>
      <span class="na">params</span><span class="p">:</span> <span class="p">{</span> <span class="na">session_id</span><span class="p">:</span> <span class="nx">o</span><span class="p">.</span><span class="nx">session_id</span> <span class="p">}</span>
    <span class="p">}).</span><span class="nx">success</span><span class="p">(</span><span class="kd">function</span><span class="p">(</span><span class="nx">data</span><span class="p">){</span>
      <span class="c1">// merge data into the queue</span>
      <span class="nx">o</span><span class="p">.</span><span class="nx">favorites</span> <span class="o">=</span> <span class="nx">data</span><span class="p">;</span>
    <span class="p">});</span>
  <span class="p">}</span>
</code></pre>
       </div>
       <p>Right now, our sessions only persist if the browser doesn't reload. This isn't expected functionality, especially if we want to deploy this app natively. We need some way of storing a user's session ID and username across app uses that won't be cleared from cache automatically.</p>
       <div class="js-react-on-rails-component" style="display:none" data-component-name="Video" data-props="{&quot;slug&quot;:&quot;persistent-authentication&quot;,&quot;provider&quot;:&quot;wistia&quot;,&quot;courseSlug&quot;:&quot;ionic-framework-tutorial&quot;,&quot;pro&quot;:false,&quot;thumbnailUrl&quot;:&quot;https://embed-ssl.wistia.com/deliveries/221a94780ea9ea563f550c17a1fe0f15acfe0d11.jpg&quot;}" data-trace="true" data-dom-id="Video-react-component-99939452-0af5-42a4-9b06-1f0d03083bdb"></div> 
       <div id="Video-react-component-99939452-0af5-42a4-9b06-1f0d03083bdb"></div> 
       <p>To solve this problem, <a href="http://diveintohtml5.info/storage.html" target="_blank">local storage</a> is an ideal solution. In js/utils.js, you can see a service called <code>$localstorage</code> that wraps the native browser's local storage API for our convenience. This was actually taken from an <a href="http://learn.ionicframework.com/formulas/localstorage/" target="_blank">Ionic formula</a> created by <a href="https://twitter.com/maxlynch" target="_blank">Max Lynch</a>, a cofounder of the company behind the Ionic Framework.</p>
       <div class="js-react-on-rails-component" style="display:none" data-component-name="Checkbox" data-props="{&quot;checkboxSlug&quot;:&quot;require-utils&quot;,&quot;courseSlug&quot;:&quot;ionic-framework-tutorial&quot;,&quot;content&quot;:&quot;First, we need to require \u003ccode\u003eionic.utils\u003c/code\u003e in our services module. Then, require \u003ccode\u003e$localstorage\u003c/code\u003e and \u003ccode\u003e$q\u003c/code\u003e in the User service:&quot;}" data-trace="true" data-dom-id="Checkbox-react-component-2fbdc30c-ae29-4421-91ab-4feb7de63255"></div> 
       <div id="Checkbox-react-component-2fbdc30c-ae29-4421-91ab-4feb7de63255"></div> 
       <div class="highlight">
        <pre class=""><code><span class="nx">angular</span><span class="p">.</span><span class="nx">module</span><span class="p">(</span><span class="s1">'songhop.services'</span><span class="p">,</span> <span class="p">[</span><span class="s1">'ionic.utils'</span><span class="p">])</span>
</code></pre>
       </div>
       <div class="highlight">
        <pre class=""><code><span class="p">.</span><span class="nx">factory</span><span class="p">(</span><span class="s1">'User'</span><span class="p">,</span> <span class="kd">function</span><span class="p">(</span><span class="nx">$http</span><span class="p">,</span> <span class="nx">$q</span><span class="p">,</span> <span class="nx">$localstorage</span><span class="p">,</span> <span class="nx">SERVER</span><span class="p">)</span> <span class="p">{</span>
</code></pre>
       </div>
       <div class="js-react-on-rails-component" style="display:none" data-component-name="Checkbox" data-props="{&quot;checkboxSlug&quot;:&quot;create-setSession&quot;,&quot;courseSlug&quot;:&quot;ionic-framework-tutorial&quot;,&quot;content&quot;:&quot;Lets create a method for storing our session data into localStorage (for persisting user info between app uses) as well as the User return object (for accessing by our running application):&quot;}" data-trace="true" data-dom-id="Checkbox-react-component-f4de8542-c399-4fc1-9cac-54d5871776fd"></div> 
       <div id="Checkbox-react-component-f4de8542-c399-4fc1-9cac-54d5871776fd"></div> 
       <div class="highlight">
        <pre class=""><code>  <span class="c1">// set session data</span>
  <span class="nx">o</span><span class="p">.</span><span class="nx">setSession</span> <span class="o">=</span> <span class="kd">function</span><span class="p">(</span><span class="nx">username</span><span class="p">,</span> <span class="nx">session_id</span><span class="p">,</span> <span class="nx">favorites</span><span class="p">)</span> <span class="p">{</span>
    <span class="k">if</span> <span class="p">(</span><span class="nx">username</span><span class="p">)</span> <span class="nx">o</span><span class="p">.</span><span class="nx">username</span> <span class="o">=</span> <span class="nx">username</span><span class="p">;</span>
    <span class="k">if</span> <span class="p">(</span><span class="nx">session_id</span><span class="p">)</span> <span class="nx">o</span><span class="p">.</span><span class="nx">session_id</span> <span class="o">=</span> <span class="nx">session_id</span><span class="p">;</span>
    <span class="k">if</span> <span class="p">(</span><span class="nx">favorites</span><span class="p">)</span> <span class="nx">o</span><span class="p">.</span><span class="nx">favorites</span> <span class="o">=</span> <span class="nx">favorites</span><span class="p">;</span>

    <span class="c1">// set data in localstorage object</span>
    <span class="nx">$localstorage</span><span class="p">.</span><span class="nx">setObject</span><span class="p">(</span><span class="s1">'user'</span><span class="p">,</span> <span class="p">{</span> <span class="na">username</span><span class="p">:</span> <span class="nx">username</span><span class="p">,</span> <span class="na">session_id</span><span class="p">:</span> <span class="nx">session_id</span> <span class="p">});</span>
  <span class="p">}</span>
</code></pre>
       </div>
       <div class="js-react-on-rails-component" style="display:none" data-component-name="Checkbox" data-props="{&quot;checkboxSlug&quot;:&quot;update-auth-setSession&quot;,&quot;courseSlug&quot;:&quot;ionic-framework-tutorial&quot;,&quot;content&quot;:&quot;Now, update the return promise in the \u003ccode\u003eauth()\u003c/code\u003e method to fire the \u003ccode\u003esetSession()\u003c/code\u003e method on success with the data returned from the server:&quot;}" data-trace="true" data-dom-id="Checkbox-react-component-11307d4f-1235-4083-8803-8fe7136edc59"></div> 
       <div id="Checkbox-react-component-11307d4f-1235-4083-8803-8fe7136edc59"></div> 
       <div class="highlight">
        <pre class=""><code>    <span class="k">return</span> <span class="nx">$http</span><span class="p">.</span><span class="nx">post</span><span class="p">(</span><span class="nx">SERVER</span><span class="p">.</span><span class="nx">url</span> <span class="o">+</span> <span class="s1">'/'</span> <span class="o">+</span> <span class="nx">authRoute</span><span class="p">,</span> <span class="p">{</span><span class="na">username</span><span class="p">:</span> <span class="nx">username</span><span class="p">})</span>
      <span class="p">.</span><span class="nx">success</span><span class="p">(</span><span class="kd">function</span><span class="p">(</span><span class="nx">data</span><span class="p">){</span>
        <span class="nx">o</span><span class="p">.</span><span class="nx">setSession</span><span class="p">(</span><span class="nx">data</span><span class="p">.</span><span class="nx">username</span><span class="p">,</span> <span class="nx">data</span><span class="p">.</span><span class="nx">session_id</span><span class="p">,</span> <span class="nx">data</span><span class="p">.</span><span class="nx">favorites</span><span class="p">);</span>
      <span class="p">});</span>
</code></pre>
       </div>
       <p>In various parts of our app, we'll need to check if there is currently a user session. For example, if a non-authenticated used tries to access the Discover page, we need to detect this and redirect them accordingly.</p>
       <div class="js-react-on-rails-component" style="display:none" data-component-name="Checkbox" data-props="{&quot;checkboxSlug&quot;:&quot;create-checkSession&quot;,&quot;courseSlug&quot;:&quot;ionic-framework-tutorial&quot;,&quot;content&quot;:&quot;Create a \u003ccode\u003echeckSession()\u003c/code\u003e method to determine if a user is currently logged in:&quot;}" data-trace="true" data-dom-id="Checkbox-react-component-02abe8d4-a8f0-4732-a2e5-9d2bbc367073"></div> 
       <div id="Checkbox-react-component-02abe8d4-a8f0-4732-a2e5-9d2bbc367073"></div> 
       <div class="highlight">
        <pre class=""><code>  <span class="c1">// check if there's a user session present</span>
  <span class="nx">o</span><span class="p">.</span><span class="nx">checkSession</span> <span class="o">=</span> <span class="kd">function</span><span class="p">()</span> <span class="p">{</span>
    <span class="kd">var</span> <span class="nx">defer</span> <span class="o">=</span> <span class="nx">$q</span><span class="p">.</span><span class="nx">defer</span><span class="p">();</span>

    <span class="k">if</span> <span class="p">(</span><span class="nx">o</span><span class="p">.</span><span class="nx">session_id</span><span class="p">)</span> <span class="p">{</span>
      <span class="c1">// if this session is already initialized in the service</span>
      <span class="nx">defer</span><span class="p">.</span><span class="nx">resolve</span><span class="p">(</span><span class="kc">true</span><span class="p">);</span>

    <span class="p">}</span> <span class="k">else</span> <span class="p">{</span>
      <span class="c1">// detect if there's a session in localstorage from previous use.</span>
      <span class="c1">// if it is, pull into our service</span>
      <span class="kd">var</span> <span class="nx">user</span> <span class="o">=</span> <span class="nx">$localstorage</span><span class="p">.</span><span class="nx">getObject</span><span class="p">(</span><span class="s1">'user'</span><span class="p">);</span>

      <span class="k">if</span> <span class="p">(</span><span class="nx">user</span><span class="p">.</span><span class="nx">username</span><span class="p">)</span> <span class="p">{</span>
        <span class="c1">// if there's a user, lets grab their favorites from the server</span>
        <span class="nx">o</span><span class="p">.</span><span class="nx">setSession</span><span class="p">(</span><span class="nx">user</span><span class="p">.</span><span class="nx">username</span><span class="p">,</span> <span class="nx">user</span><span class="p">.</span><span class="nx">session_id</span><span class="p">);</span>
        <span class="nx">o</span><span class="p">.</span><span class="nx">populateFavorites</span><span class="p">().</span><span class="nx">then</span><span class="p">(</span><span class="kd">function</span><span class="p">()</span> <span class="p">{</span>
          <span class="nx">defer</span><span class="p">.</span><span class="nx">resolve</span><span class="p">(</span><span class="kc">true</span><span class="p">);</span>
        <span class="p">});</span>

      <span class="p">}</span> <span class="k">else</span> <span class="p">{</span>
        <span class="c1">// no user info in localstorage, reject</span>
        <span class="nx">defer</span><span class="p">.</span><span class="nx">resolve</span><span class="p">(</span><span class="kc">false</span><span class="p">);</span>
      <span class="p">}</span>

    <span class="p">}</span>

    <span class="k">return</span> <span class="nx">defer</span><span class="p">.</span><span class="nx">promise</span><span class="p">;</span>
  <span class="p">}</span>
</code></pre>
       </div>
       <div class="js-react-on-rails-component" style="display:none" data-component-name="Checkbox" data-props="{&quot;checkboxSlug&quot;:&quot;create-destroySession&quot;,&quot;courseSlug&quot;:&quot;ionic-framework-tutorial&quot;,&quot;content&quot;:&quot;If a user wants to log out, we need a \u003ccode\u003edestroySession()\u003c/code\u003e method that clears the User service variables along with our local storage object:&quot;}" data-trace="true" data-dom-id="Checkbox-react-component-39653cd0-c655-4d14-90f2-f2d50424131c"></div> 
       <div id="Checkbox-react-component-39653cd0-c655-4d14-90f2-f2d50424131c"></div> 
       <div class="highlight">
        <pre class=""><code>  <span class="c1">// wipe out our session data</span>
  <span class="nx">o</span><span class="p">.</span><span class="nx">destroySession</span> <span class="o">=</span> <span class="kd">function</span><span class="p">()</span> <span class="p">{</span>
    <span class="nx">$localstorage</span><span class="p">.</span><span class="nx">setObject</span><span class="p">(</span><span class="s1">'user'</span><span class="p">,</span> <span class="p">{});</span>
    <span class="nx">o</span><span class="p">.</span><span class="nx">username</span> <span class="o">=</span> <span class="kc">false</span><span class="p">;</span>
    <span class="nx">o</span><span class="p">.</span><span class="nx">session_id</span> <span class="o">=</span> <span class="kc">false</span><span class="p">;</span>
    <span class="nx">o</span><span class="p">.</span><span class="nx">favorites</span> <span class="o">=</span> <span class="p">[];</span>
    <span class="nx">o</span><span class="p">.</span><span class="nx">newFavorites</span> <span class="o">=</span> <span class="mi">0</span><span class="p">;</span>
  <span class="p">}</span>
</code></pre>
       </div>
       <p>We now have all of the methods necessary to ensure non-authenticated users can't access the core parts of the app (and vice versa, if a user is logged in and visits the Splash page, they should be redirected to the Discover page).</p>
       <div class="js-react-on-rails-component" style="display:none" data-component-name="Video" data-props="{&quot;slug&quot;:&quot;ensuring-authentication&quot;,&quot;provider&quot;:&quot;wistia&quot;,&quot;courseSlug&quot;:&quot;ionic-framework-tutorial&quot;,&quot;pro&quot;:false,&quot;thumbnailUrl&quot;:&quot;https://embed-ssl.wistia.com/deliveries/fea49927f4067d778e938088f879d14fa2d3af50.jpg&quot;}" data-trace="true" data-dom-id="Video-react-component-bc0fd245-4dbf-4f48-8ca3-e73cf95b8fda"></div> 
       <div id="Video-react-component-bc0fd245-4dbf-4f48-8ca3-e73cf95b8fda"></div> 
       <div class="js-react-on-rails-component" style="display:none" data-component-name="Checkbox" data-props="{&quot;checkboxSlug&quot;:&quot;splash-onenter&quot;,&quot;courseSlug&quot;:&quot;ionic-framework-tutorial&quot;,&quot;content&quot;:&quot;In app.js, update the splash state to check if there is a session \u003ca href=\&quot;https://github.com/angular-ui/ui-router/wiki#onenter-and-onexit-callbacks\&quot; target=\&quot;_blank\&quot;\u003eonEnter\u003c/a\u003e:&quot;}" data-trace="true" data-dom-id="Checkbox-react-component-3b768b0a-a652-4354-a50d-cd1018b3ce7b"></div> 
       <div id="Checkbox-react-component-3b768b0a-a652-4354-a50d-cd1018b3ce7b"></div> 
       <div class="highlight">
        <pre class=""><code>  <span class="c1">// splash page</span>
  <span class="p">.</span><span class="nx">state</span><span class="p">(</span><span class="s1">'splash'</span><span class="p">,</span> <span class="p">{</span>
    <span class="na">url</span><span class="p">:</span> <span class="s1">'/'</span><span class="p">,</span>
    <span class="na">templateUrl</span><span class="p">:</span> <span class="s1">'templates/splash.html'</span><span class="p">,</span>
    <span class="na">controller</span><span class="p">:</span> <span class="s1">'SplashCtrl'</span><span class="p">,</span>
    <span class="na">onEnter</span><span class="p">:</span> <span class="kd">function</span><span class="p">(</span><span class="nx">$state</span><span class="p">,</span> <span class="nx">User</span><span class="p">){</span>
      <span class="nx">User</span><span class="p">.</span><span class="nx">checkSession</span><span class="p">().</span><span class="nx">then</span><span class="p">(</span><span class="kd">function</span><span class="p">(</span><span class="nx">hasSession</span><span class="p">)</span> <span class="p">{</span>
        <span class="k">if</span> <span class="p">(</span><span class="nx">hasSession</span><span class="p">)</span> <span class="nx">$state</span><span class="p">.</span><span class="nx">go</span><span class="p">(</span><span class="s1">'tab.discover'</span><span class="p">);</span>
      <span class="p">});</span>
    <span class="p">}</span>
  <span class="p">})</span>
</code></pre>
       </div>
       <div class="js-react-on-rails-component" style="display:none" data-component-name="Checkbox" data-props="{&quot;checkboxSlug&quot;:&quot;tab-onenter-resolve&quot;,&quot;courseSlug&quot;:&quot;ionic-framework-tutorial&quot;,&quot;content&quot;:&quot;Perform the same check on the tab abstract state (which covers both the discover and favorites states, since it\u0026#39;s their parent state), but we need to resolve the \u003ccode\u003echeckSession()\u003c/code\u003e method first. If there is a user session in local storage, we need to retrieve the user\u0026#39;s favorites from the server, and we don\u0026#39;t want to display our app until that data is returned successfully:&quot;}" data-trace="true" data-dom-id="Checkbox-react-component-790e3c6f-4774-4cb7-93ed-77e397feb390"></div> 
       <div id="Checkbox-react-component-790e3c6f-4774-4cb7-93ed-77e397feb390"></div> 
       <div class="highlight">
        <pre class=""><code>  <span class="c1">// setup an abstract state for the tabs directive</span>
  <span class="p">.</span><span class="nx">state</span><span class="p">(</span><span class="s1">'tab'</span><span class="p">,</span> <span class="p">{</span>
    <span class="na">url</span><span class="p">:</span> <span class="s1">'/tab'</span><span class="p">,</span>
    <span class="na">abstract</span><span class="p">:</span> <span class="kc">true</span><span class="p">,</span>
    <span class="na">templateUrl</span><span class="p">:</span> <span class="s1">'templates/tabs.html'</span><span class="p">,</span>
    <span class="na">controller</span><span class="p">:</span> <span class="s1">'TabsCtrl'</span><span class="p">,</span>
    <span class="c1">// don't load the state until we've populated our User, if necessary.</span>
    <span class="na">resolve</span><span class="p">:</span> <span class="p">{</span>
      <span class="na">populateSession</span><span class="p">:</span> <span class="kd">function</span><span class="p">(</span><span class="nx">User</span><span class="p">)</span> <span class="p">{</span>
        <span class="k">return</span> <span class="nx">User</span><span class="p">.</span><span class="nx">checkSession</span><span class="p">();</span>
      <span class="p">}</span>
    <span class="p">},</span>
    <span class="na">onEnter</span><span class="p">:</span> <span class="kd">function</span><span class="p">(</span><span class="nx">$state</span><span class="p">,</span> <span class="nx">User</span><span class="p">){</span>
      <span class="nx">User</span><span class="p">.</span><span class="nx">checkSession</span><span class="p">().</span><span class="nx">then</span><span class="p">(</span><span class="kd">function</span><span class="p">(</span><span class="nx">hasSession</span><span class="p">)</span> <span class="p">{</span>
        <span class="k">if</span> <span class="p">(</span><span class="o">!</span><span class="nx">hasSession</span><span class="p">)</span> <span class="nx">$state</span><span class="p">.</span><span class="nx">go</span><span class="p">(</span><span class="s1">'splash'</span><span class="p">);</span>
      <span class="p">});</span>
    <span class="p">}</span>
  <span class="p">})</span>
</code></pre>
       </div>
       <p>Now users can only access our core app's functionality if they're logged in. But what if a user wants to log out? Lets provide a logout button the favorites page. While we're at it, lets display their username at the top of the favorites page too.</p>
       <div class="js-react-on-rails-component" style="display:none" data-component-name="Checkbox" data-props="{&quot;checkboxSlug&quot;:&quot;scope.username-favoritesctrl&quot;,&quot;courseSlug&quot;:&quot;ionic-framework-tutorial&quot;,&quot;content&quot;:&quot;In \u003ccode\u003eFavoritesCtrl\u003c/code\u003e, expose the \u003ccode\u003eUser.username\u003c/code\u003e string to the scope:&quot;}" data-trace="true" data-dom-id="Checkbox-react-component-831c1aac-6b89-43a9-84d6-7a64b9c1af14"></div> 
       <div id="Checkbox-react-component-831c1aac-6b89-43a9-84d6-7a64b9c1af14"></div> 
       <div class="highlight">
        <pre class=""><code><span class="nx">$scope</span><span class="p">.</span><span class="nx">username</span> <span class="o">=</span> <span class="nx">User</span><span class="p">.</span><span class="nx">username</span><span class="p">;</span>
</code></pre>
       </div>
       <div class="js-react-on-rails-component" style="display:none" data-component-name="Checkbox" data-props="{&quot;checkboxSlug&quot;:&quot;tabsctrl-logout&quot;,&quot;courseSlug&quot;:&quot;ionic-framework-tutorial&quot;,&quot;content&quot;:&quot;We may want the logout button somewhere else in our app in the future, so we\u0026#39;ll put the logic for logging out in \u003ccode\u003eTabsCtrl\u003c/code\u003e (be sure to inject \u003ccode\u003e$window\u003c/code\u003e):&quot;}" data-trace="true" data-dom-id="Checkbox-react-component-715b68e8-846d-4c1f-b6b1-7f7e673c3f24"></div> 
       <div id="Checkbox-react-component-715b68e8-846d-4c1f-b6b1-7f7e673c3f24"></div> 
       <div class="highlight">
        <pre class=""><code>  <span class="nx">$scope</span><span class="p">.</span><span class="nx">logout</span> <span class="o">=</span> <span class="kd">function</span><span class="p">()</span> <span class="p">{</span>
    <span class="nx">User</span><span class="p">.</span><span class="nx">destroySession</span><span class="p">();</span>

    <span class="c1">// instead of using $state.go, we're going to redirect.</span>
    <span class="c1">// reason: we need to ensure views aren't cached.</span>
    <span class="nx">$window</span><span class="p">.</span><span class="nx">location</span><span class="p">.</span><span class="nx">href</span> <span class="o">=</span> <span class="s1">'index.html'</span><span class="p">;</span>
  <span class="p">}</span>
</code></pre>
       </div>
       <div class="js-react-on-rails-component" style="display:none" data-component-name="Checkbox" data-props="{&quot;checkboxSlug&quot;:&quot;favorites.html-logout&quot;,&quot;courseSlug&quot;:&quot;ionic-framework-tutorial&quot;,&quot;content&quot;:&quot;Finally, in favorites.html update the \u003ccode\u003e\u0026lt;ion-view\u0026gt;\u003c/code\u003e title attribute to include both our username and an \u003ca href=\&quot;http://ionicframework.com/docs/api/directive/ionNavButtons/\&quot; target=\&quot;_blank\&quot;\u003eion-nav-button\u003c/a\u003e for logging out:&quot;}" data-trace="true" data-dom-id="Checkbox-react-component-ea57f18e-4495-419a-af8c-aa9ae1f0bff3"></div> 
       <div id="Checkbox-react-component-ea57f18e-4495-419a-af8c-aa9ae1f0bff3"></div> 
       <div class="highlight">
        <pre class=""><code><span class="o">&lt;</span><span class="nx">ion</span><span class="o">-</span><span class="nx">view</span> <span class="nx">view</span><span class="o">-</span><span class="nx">title</span><span class="o">=</span><span class="s2">"Favorites | {{ username }}"</span> <span class="kr">class</span><span class="o">=</span><span class="s2">"favorites-page"</span><span class="o">&gt;</span>
  <span class="o">&lt;</span><span class="nx">ion</span><span class="o">-</span><span class="nx">nav</span><span class="o">-</span><span class="nx">buttons</span> <span class="nx">side</span><span class="o">=</span><span class="s2">"right"</span><span class="o">&gt;</span>
    <span class="o">&lt;</span><span class="nx">button</span> <span class="kr">class</span><span class="o">=</span><span class="s2">"button"</span> <span class="nx">ng</span><span class="o">-</span><span class="nx">click</span><span class="o">=</span><span class="s2">"logout()"</span><span class="o">&gt;</span>
      <span class="nx">Log</span> <span class="nx">out</span>
    <span class="o">&lt;</span><span class="sr">/button</span><span class="err">&gt; </span>  <span class="o">&lt;</span><span class="sr">/ion-nav-buttons</span><span class="err">&gt; </span>  <span class="o">&lt;</span><span class="nx">ion</span><span class="o">-</span><span class="nx">content</span><span class="o">&gt;</span>
</code></pre>
       </div>
       <p>And with that, our app is now 100% complete. We've covered a tremendous amount of knowledge about Ionic, but there is still much more to learn. As we mentioned at the beginning of the course, we highly recommending exploring the <a href="http://ionicframework.com/docs/components/" target="_blank">CSS Components</a> and <a href="http://ionicframework.com/docs/api/" target="_blank">AngularJS Extensions</a> that Ionic provides out of the box. The documentation on Ionic's website is hands down some of the best docs I've ever seen, so don't be afraid to peruse it when you have questions or are just looking for some inspiration.</p>
       <p>The folks behind Ionic are also building some amazing tools that make your experience working with the Ionic Framework even better. For example, the <a href="http://creator.ionic.io/" target="_blank">Ionic Creator</a> is a drag and drop tool that allows you to quickly mock up applications and have it export the working code (crazy, right?). It gets even better than that, though: They're starting to roll out a new service called <a href="http://ionic.io/" target="_blank">ionic.io</a> that comes with a handful of killer features, like the ability to update the HTML/CSS/JS of your hybrid app over the air, thus sidestepping Apple's lengthy app review process. Most recently, they announced a <a href="https://apps.ionic.io/landing/push" target="_blank">push notification service</a> that will make sending push notifications across platforms super simple.</p>
       <p>The next few years will be an exciting time for hybrid app developers using Ionic, so keep yourself in the loop and follow <a href="https://twitter.com/Ionicframework" target="_blank">@IonicFramework</a>. I'll be updating this course with every new release, so follow me <a href="https://twitter.com/ericsimons40" target="_blank">@ericsimons40</a> to keep your magical Ionic skills up to date.</p>
       <p>With the Ionic section of this course completed, let's start learning how to...what's that you say? Encore? Alrighty then...</p> 
       <h2 id="some-ionic-challenges-for-those-hungry-for-more">Some Ionic challenges for those hungry for more</h2> 
       <div class="js-react-on-rails-component" style="display:none" data-component-name="Checkbox" data-props="{&quot;checkboxSlug&quot;:&quot;implement-sharing&quot;,&quot;courseSlug&quot;:&quot;ionic-framework-tutorial&quot;,&quot;content&quot;:&quot;On the favorites page, include a share \u003ca href=\&quot;http://ionicframework.com/docs/components/#item-buttons\&quot; target=\&quot;_blank\&quot;\u003ebutton on each ion-item\u003c/a\u003e that will open an \u003ca href=\&quot;http://ionicframework.com/docs/api/service/$ionicActionSheet/\&quot; target=\&quot;_blank\&quot;\u003e$ionicActionSheet\u003c/a\u003e with the option to share the song\u0026#39;s Spotify URL on Twitter and Facebook.&quot;}" data-trace="true" data-dom-id="Checkbox-react-component-e5681314-b7d3-470d-afba-de6a79939651"></div> 
       <div id="Checkbox-react-component-e5681314-b7d3-470d-afba-de6a79939651"></div> 
       <div class="js-react-on-rails-component" style="display:none" data-component-name="Checkbox" data-props="{&quot;checkboxSlug&quot;:&quot;tinder-for-x&quot;,&quot;courseSlug&quot;:&quot;ionic-framework-tutorial&quot;,&quot;content&quot;:&quot;Wouldn\u0026#39;t it be great if we could swipe the song previews left and right, like on Tinder? Well, with Ionic\u0026#39;s \u003ca href=\&quot;http://ionicframework.com/blog/tinder-for-x/\&quot; target=\&quot;_blank\&quot;\u003eTinder-for-X\u003c/a\u003e directive, we can do just that. Take a crack at implementing it on the Discover page!&quot;}" data-trace="true" data-dom-id="Checkbox-react-component-6bb37c3a-fcee-49c6-a32c-cf9fe8e1aae9"></div> 
       <div id="Checkbox-react-component-6bb37c3a-fcee-49c6-a32c-cf9fe8e1aae9"></div> 
       <div class="js-react-on-rails-component" style="display:none" data-component-name="Checkbox" data-props="{&quot;checkboxSlug&quot;:&quot;dream-your-own&quot;,&quot;courseSlug&quot;:&quot;ionic-framework-tutorial&quot;,&quot;content&quot;:&quot;Get creative! Think of something cool to enhance the experience of using the app, build it, and then \u003ca href=\&quot;https://twitter.com/intent/tweet?text=@EricSimons40%20@GoThinkster%20I%20created...\&quot; target=\&quot;_blank\&quot;\u003etweet us about what you made :)\u003c/a\u003e&quot;}" data-trace="true" data-dom-id="Checkbox-react-component-56465586-56de-4576-ac83-67e3c788d891"></div> 
       <div id="Checkbox-react-component-56465586-56de-4576-ac83-67e3c788d891"></div> 
       <p>With the Ionic section of this course <em>actually</em> completed, let's start learning how to build this app for use on native devices.</p>
      </div>
      <div class="course-section" id="deploying-to-the-emulator-devices-and-app-stores">
       <h1>Deploying to the emulator, devices and App Stores</h1>
       <p>Sometimes, mobile websites just won't cut it. Maybe you need to allow users to download your app from their respective app store, or maybe you need to access native device features that don't have web APIs (like the device's accelerometer, for example). Cordova is the solution.</p>
       <div class="js-react-on-rails-component" style="display:none" data-component-name="Checkbox" data-props="{&quot;checkboxSlug&quot;:&quot;read-cordova-about&quot;,&quot;courseSlug&quot;:&quot;ionic-framework-tutorial&quot;,&quot;content&quot;:&quot;Learn exactly what Cordova provides us out of the box on the \u003ca href=\&quot;http://cordova.apache.org/#about\&quot; target=\&quot;_blank\&quot;\u003eabout section\u003c/a\u003e of their website.&quot;}" data-trace="true" data-dom-id="Checkbox-react-component-e5e6e6c8-0a21-48de-8498-f9a0bd40cd73"></div> 
       <div id="Checkbox-react-component-e5e6e6c8-0a21-48de-8498-f9a0bd40cd73"></div> 
       <p>We mentioned this at the beginning of the course, but we'll explain it again for those of you who skimmed over it: Cordova is to PhoneGap as Blink is to Chrome. Basically, PhoneGap is Cordova plus a whole bunch of other Adobe stuff. <a href="http://ionicframework.com/blog/what-is-cordova-phonegap/" target="_blank">Seriously, read this post that the Ionic folks wrote about the matter</a> - it's super good, I promise. There's also a <a href="http://blog.devgeeks.org/post/73789983750/cordova-vs-phonegap-an-update" target="_blank">great post by Tommy Williams</a> that should clear up any remaining questions you have about the history and differences between Cordova, Phonegap, and Phonegap build.</p>
       <p>This is a common point of confusion when first building hybrid apps, so don't feel bad if you're still a little confused. In fact, the Ionic team wrapped common Cordova functions under their CLI tool to ensure the experience of using Cordova was seamless and intuitive. I've used Cordova extensively without the Ionic CLI and recommend using the two together. The Ionic CLI provides some handy extensions that make the experience better, like automatically livereloading apps that are in the emulator (amongst many other things).</p> 
       <h2 id="setting-up-our-project-for-cordova">Setting up our project for Cordova</h2> 
       <p>We need to let Cordova know what platforms we intend to deploy our app to. This can be done via the Ionic CLI:</p>
       <div class="highlight">
        <pre class=""><code>$ ionic platform ios android
</code></pre>
       </div>
       <p>While we're at it, let's install the amazing <a href="https://github.com/driftyco/ionic-plugins-keyboard" target="_blank">Cordova keyboard plugin</a> that the Ionic team built, as it uses a custom implementation of the native keyboard instead of the web browser version:</p>
       <div class="highlight">
        <pre class=""><code>$ ionic plugin add com.ionic.keyboard
</code></pre>
       </div>
       <p>The syntax for adding and removing plugins is <code>ionic plugin add [plugin]</code> and <code>ionic plugin rm [plugin]</code>, respectively. This same syntax also applies to adding and removing platforms (<code>ionic platform rm ios</code>, etc).</p> 
       <h2 id="running-apps-in-the-emulator">Running apps in the emulator</h2> 
       <p>Simply run the emulate command to open your app in the emulator, where platform is either 'ios' or 'android' (the <code>-l</code> flag enables live reloading of the app):</p>
       <div class="highlight">
        <pre class=""><code><span class="gp">$ </span>ionic emulate <span class="o">[</span>platform] -l
</code></pre>
       </div>
       <p>{alert} There is currently a bug in Cordova: After adding a plugin and then attempting to build/emulate/run the project, the build will fail. The way you fix this is by removing the target platform (<code>ionic platform rm [platform]</code>) and then adding it again (<code>ionic platform add ios</code>). This should be fixed soon, but until then, this is the easiest solution.</p>
       <div class="js-react-on-rails-component" style="display:none" data-component-name="Checkbox" data-props="{&quot;checkboxSlug&quot;:&quot;learn-running-cli&quot;,&quot;courseSlug&quot;:&quot;ionic-framework-tutorial&quot;,&quot;content&quot;:&quot;\u003ca href=\&quot;http://ionicframework.com/docs/cli/run.html\&quot; target=\&quot;_blank\&quot;\u003eRead this\u003c/a\u003e to learn about all of the options available in the Ionic CLI for running \u0026amp; emulating.&quot;}" data-trace="true" data-dom-id="Checkbox-react-component-e4dbaa12-a562-4f71-9ec4-2e23c21ade26"></div> 
       <div id="Checkbox-react-component-e4dbaa12-a562-4f71-9ec4-2e23c21ade26"></div> 
       <p>At this point, you should see the Songhop app running in the emulator. There's one bug, though - if you favorite a couple of songs, go the favorites page, and tap a song to open it in Spotify, it doesn't open a new browser window. Instead, it opens it in our app's web view. To get around this, we need to install another plugin from Cordova called <a href="https://github.com/apache/cordova-plugin-inappbrowser/blob/master/doc/index.md" target="_blank">inappbrowser</a> that will allow the link to open in the device's native browser.</p>
       <div class="js-react-on-rails-component" style="display:none" data-component-name="Checkbox" data-props="{&quot;checkboxSlug&quot;:&quot;install-inappbrowser&quot;,&quot;courseSlug&quot;:&quot;ionic-framework-tutorial&quot;,&quot;content&quot;:&quot;Install the Cordova inappbrowser via the Ionic CLI:&quot;}" data-trace="true" data-dom-id="Checkbox-react-component-12b73643-7e73-409c-8bfb-8d962636694e"></div> 
       <div id="Checkbox-react-component-12b73643-7e73-409c-8bfb-8d962636694e"></div> 
       <div class="highlight">
        <pre class=""><code>ionic plugin add org.apache.cordova.inappbrowser
</code></pre>
       </div>
       <p>Now, if you emulate the app again and tap a song in our favorites, it will open in the device's native web browser!</p> 
       <h3 id="challenge">Challenge</h3> 
       <div class="js-react-on-rails-component" style="display:none" data-component-name="Checkbox" data-props="{&quot;checkboxSlug&quot;:&quot;implement-cordova-media&quot;,&quot;courseSlug&quot;:&quot;ionic-framework-tutorial&quot;,&quot;content&quot;:&quot;We\u0026#39;re currently using the HTMLAudioElement to playback audio, but Cordova has a \u003ca href=\&quot;https://github.com/apache/cordova-plugin-media/blob/master/doc/index.md\&quot; target=\&quot;_blank\&quot;\u003emedia plugin\u003c/a\u003e that we could use instead. In general, using plugins instead of browser implementations can help ensure your app stays speedy and stable. It often helps with troubleshooting, as Cordova plugins are open source and can therefore be troubleshooted and modified. In fact, \u003cstrong\u003eon iOS our app currently crashes after previewing 5-10 songs due to a bug in mobile Safari\u003c/strong\u003e, so try modifying the audio playback features of our app to use the Cordova media plugin instead of HTMLAudioElement!&quot;}" data-trace="true" data-dom-id="Checkbox-react-component-818af98f-1e97-40d8-847d-1485bae5197f"></div> 
       <div id="Checkbox-react-component-818af98f-1e97-40d8-847d-1485bae5197f"></div> 
       <h2 id="running-the-application-on-your-device">Running the application on your device</h2> 
       <p>To run your app on a device connected to your computer, the command <code>$ ionic run [platform]</code> will automatically package and install the app. However, your development environment &amp; device have to be set up properly to make this work. The requirements here have nothing to do with Ionic and Cordova (as they were set by Apple and Google), and as such, the requirements are different for both iOS and Android.</p> 
       <h3 id="android">Android</h3> 
       <p>For Android, the process is super simple: <a href="http://www.syncios.com/blog/enable-developer-optionsusb-debugging-mode-on-devices-with-android-4-2-jelly-bean/" target="_blank">enable developer mode</a> on your device, plug it into your computer, and <code>$ ionic run android</code>. Super easy, right? Compare that to...</p> 
       <h3 id="ios">iOS</h3> 
       <p>For iOS, you'll need to setup a development provisioning profile before you can successfully run <code>$ ionic run ios</code>. Setting up provisioning profiles first requires an <a href="https://developer.apple.com/register/index.action" target="_blank">Apple Developer account</a>, which costs $99/yr. If you think that price is a bit steep, I hear that Apple will also trade you their development tools for your left kidney, should you have one to spare.</p>
       <p>Lets dive into what many iOS developers refer to as "Provisioning Profile Hell" -- <a href="https://www.youtube.com/watch?v=l482T0yNkeo" target="_blank">buckle up, kids, because we're going for a ride</a>.</p> 
       <h4 id="highway-to-provisioning-profile-hell">Highway to (Provisioning Profile) Hell</h4> 
       <div class="js-react-on-rails-component" style="display:none" data-component-name="Checkbox" data-props="{&quot;checkboxSlug&quot;:&quot;understand-provprofiles&quot;,&quot;courseSlug&quot;:&quot;ionic-framework-tutorial&quot;,&quot;content&quot;:&quot;If you\u0026#39;re unfamiliar with iOS certificates and provisioning profiles, \u003ca href=\&quot;http://escoz.com/blog/demystifying-ios-certificates-and-provisioning-files/\&quot; target=\&quot;_blank\&quot;\u003eread this post\u003c/a\u003e. It will help you understand how Apple has structured this process.&quot;}" data-trace="true" data-dom-id="Checkbox-react-component-4ba4600b-b368-49aa-b469-7db5da52b7d9"></div> 
       <div id="Checkbox-react-component-4ba4600b-b368-49aa-b469-7db5da52b7d9"></div> 
       <div class="js-react-on-rails-component" style="display:none" data-component-name="Checkbox" data-props="{&quot;checkboxSlug&quot;:&quot;learn-to-provision&quot;,&quot;courseSlug&quot;:&quot;ionic-framework-tutorial&quot;,&quot;content&quot;:&quot;Learn how to spin up a provisioning profile for your device by going through \u003ca href=\&quot;http://www.bignerdranch.com/we-teach/how-to-prepare/ios-device-provisioning.html\&quot; target=\&quot;_blank\&quot;\u003ethis guide\u003c/a\u003e.&quot;}" data-trace="true" data-dom-id="Checkbox-react-component-0ae91f96-5c87-4c26-a87b-aa03ee58e23e"></div> 
       <div id="Checkbox-react-component-0ae91f96-5c87-4c26-a87b-aa03ee58e23e"></div> 
       <p>In your project's config.xml file, look for this line: <code>&lt;widget id="com.ionicframework.songhop616624"</code>. The ID attribute needs to match the app ID in your provisioning profile, otherwise the application will not be able to run on your device.</p>
       <p>If you've set up everything properly, you can now run <code>$ ionic run ios</code> and your app will be packaged and installed on your device.</p> 
       <h2 id="debugging-on-ios-android">Debugging on iOS/Android</h2> 
       <p>You can use remote debugging tools from Chrome and Safari to debug your running Android and iOS applications, respectively. They're the same inspector debugging tools that you use for normal web development. From the <a href="https://github.com/phonegap/phonegap/wiki/Debugging-in-PhoneGap" target="_blank">Cordova docs on debugging</a>:</p>
       <p><strong>Chrome Remote Debugging</strong></p>
       <p>If you are doing Android PhoneGap debugging and have an Android 4.4 device and Chrome 30+, you can use the new WebView Debugging tools added in Android 4.4. If you are using Cordova 3.3 or higher, this is already supported, and only requires the Debuggable flag in your AndroidManifest.xml. For Cordova 3.2, you will need to enable WebView debugging using some code, or by use of a plugin.</p>
       <p><strong>Safari Remote Debugging</strong></p>
       <p>If you are doing iOS PhoneGap debugging and have the Safari Develop Menu enabled, you can access the currently active session through the built-in Safari Web Inspector. To activate, go to Develop -&gt; (iPad || iPhone) Simulator (normally, the third menu item) and click the active session you want to connect to. Voila!</p> 
       <h2 id="deploying-to-app-stores">Deploying to App Stores</h2> 
       <h3 id="android-play-store">Android Play Store</h3> 
       <p>The Ionic team has a fantastic guide on how to prepare and submit your app to the Google Play Store; <a href="http://ionicframework.com/docs/guide/publishing.html" target="_blank">you can go through it here</a>.</p> 
       <h3 id="ios-app-store">iOS App Store</h3> 
       <p><a href="https://developer.apple.com/library/ios/documentation/IDEs/Conceptual/AppDistributionGuide/SubmittingYourApp/SubmittingYourApp.html" target="_blank">You will need to create a 'Distribution' provisioning profile to submit apps to the App Store</a>. Once you have that done, <a href="https://iphonedevlog.wordpress.com/2013/12/19/using-phonegap-3-3-cli-on-mac-os-x-mavericks-to-build-ios-projects/" target="_blank">follow this guide</a> on how to prepare &amp; upload your app for App Store submission.</p>
      </div>
      <div class="course-section" id="app-development-is-a-journey-not-a-destination">
       <h1>App development is a journey, not a destination</h1>
       <p>While this course is a very comprehensive overview of how to build amazing hybrid apps, it really is just an overview. The world of hybrid app development is changing at a rapid pace, and there is so much more to learn. To stay up to date on the latest and greatest, I highly recommend following <a href="https://twitter.com/Ionicframework" target="_blank">@IonicFramework</a> and signing up for their newsletter on <a href="http://ionicframework.com/" target="_blank">their website</a>. This course will be updated frequently, so if you're interested in keeping your skills up to date with Ionic and other hybrid app technologies, feel free to follow me <a href="https://twitter.com/ericsimons40" target="_blank">@ericsimons40</a>. I also tweet about other cool things besides programming stuff, like <a href="https://twitter.com/ericsimons40/status/448960308132859904" target="_blank">Aaron Levie's socks</a>.</p>
       <p>With that said, welcome to the bleeding edge of mobile app development! You did an amazing job completing this course, <a href="https://twitter.com/intent/tweet?text=@EricSimons40%20I%20love%20you" target="_blank">and I'd love to hear your feedback on it.</a></p>
      </div> 
     </div> 
    </div> 
    <div id="course-end" class="course-footer"> 
     <div class="row"> 
      <div class="five columns offset-by-one"> 
       <div id="nl-subscribe-bottom" class="nl-subscribe"> 
        <h5>Stay on the bleeding edge of your favorite technologies.</h5> 
        <p>Enter your email to receive courses on AngularJS, Node, Android, Swift and more. 1-2 emails per week, no spam.</p> 
        <div class="js-react-on-rails-component" style="display:none" data-component-name="EmailCapture" data-props="{}" data-trace="false" data-dom-id="EmailCapture-react-component-af37e681-a8ed-4858-bf41-f22cd9db4abf"></div> 
        <div id="EmailCapture-react-component-af37e681-a8ed-4858-bf41-f22cd9db4abf"></div> 
       </div> 
      </div> 
      <div class="five columns"> 
       <h5 class="share-header"> Did you like this course? Share it! </h5> 
       <div class="share-btns"> 
        <a href="https://www.facebook.com/sharer/sharer.php?u=https%3A%2F%2Fthinkster.io%2Fionic-framework-tutorial%2F" class="btn facebook" target="_blank"> <i class="ion-social-facebook"></i> </a> 
        <a href="https://twitter.com/intent/tweet?text=Mastering%20the%20Ionic%20Framework%3A%20Learn%20to%20Build%20%26%20Deploy%20Native%20Speed%20HTML5%20Based%20Apps&amp;url=https%3A%2F%2Fthinkster.io%2Fionic-framework-tutorial%2F&amp;related=gothinkster,angulartutorial" class="btn twitter" target="_blank"> <i class="ion-social-twitter"></i> </a> 
        <a href="https://plus.google.com/share?url=https%3A%2F%2Fthinkster.io%2Fionic-framework-tutorial%2F" class="btn google" target="_blank"> <i class="ion-social-googleplus"></i> </a> 
       </div> 
      </div> 
     </div> 
     <div class="row theres-more"> 
      <h5> <a href="/topics/angular"> <img border="0" src="/assets/homepage/angular-268245a51b0835e464c05aa644ab26cb26fb8a6d2cc88843ad45757d67e233ef.png" alt="Angular"> There's more to learn! <span>Check out our latest AngularJS courses&nbsp;&nbsp;<i class="ion-android-arrow-forward"></i></span> </a> </h5> 
     </div> 
    </div> 
   </div> 
   <script src="//fast.wistia.com/assets/external/E-v1.js" charset="ISO-8859-1"></script> 
  </div> 
  <div class="clearfix"></div> 
  <div class="footer"> 
   <div class="container"> 
    <div class="row"> 
     <div class="six columns sharer">
       Join our mission to 
      <a href="/about" class="tagline">Spread Knowledge.</a>&nbsp;&nbsp;
      <i class="ion-heart heart"></i> 
      <div class="js-react-on-rails-component" style="display:none" data-component-name="FollowButton" data-props="{}" data-trace="false" data-dom-id="FollowButton-react-component-4f033603-79e9-41f9-900e-601dd8d7854e"></div> 
      <div id="FollowButton-react-component-4f033603-79e9-41f9-900e-601dd8d7854e">
       <iframe src="//platform.twitter.com/widgets/follow_button.html?screen_name=GoThinkster&amp;show_count=true&amp;show_screen_name=false&amp;size=l" scrolling="no" frameborder="0" allowtransparency="true" width="190" height="30" class="FollowButtonnull" data-reactroot="" data-reactid="1" data-react-checksum="-784241871"></iframe>
      </div> 
     </div> 
     <div class="six columns map"> 
      <div class="links"> 
       <a href="/">Home</a> 
       <a href="/#start-learning">Topics</a> 
       <a href="/pro">Pro</a> 
       <a href="/about">About</a> 
       <a href="mailto:hello@thinkster.io">Contact Us</a> 
      </div> 
      <div class="legal"> 
       <span class="copy"> 2017 Thinkster</span> 
       <a href="/privacy-policy">Privacy Policy</a> | 
       <a href="/tos">Terms of Use</a> 
      </div> 
     </div> 
    </div> 
   </div> 
  </div> 
  <div class="js-react-on-rails-component" style="display:none" data-component-name="Modal" data-props="{}" data-trace="false" data-dom-id="Modal-react-component-bd7b42fb-0ee8-41cc-9bb8-61403cbfe3f1"></div> 
  <div id="Modal-react-component-bd7b42fb-0ee8-41cc-9bb8-61403cbfe3f1"></div> 
  <div class="js-react-on-rails-component" style="display:none" data-component-name="Snackbar" data-props="{}" data-trace="false" data-dom-id="Snackbar-react-component-3826ba29-f420-436a-b4d2-8434198b74ef"></div> 
  <div id="Snackbar-react-component-3826ba29-f420-436a-b4d2-8434198b74ef"></div> 
  <div class="js-react-on-rails-store" style="display:none" data-store-name="appStore" data-props="{}"></div>   
 </body>
</html>