<!doctype html>
<html class="v2" dir="ltr" xmlns="http://www.w3.org/1999/xhtml" xmlns:b="http://www.google.com/2005/gml/b" xmlns:data="http://www.google.com/2005/gml/data" xmlns:expr="http://www.google.com/2005/gml/expr">
 <head> 
  <link href="https://www.blogger.com/static/v1/widgets/521441841-css_bundle_v2.css" rel="stylesheet" type="text/css"> 
  <meta content="IE=EmulateIE7" http-equiv="X-UA-Compatible"> 
  <meta content="width=1100" name="viewport"> 
  <meta content="text/html; charset=UTF-8" http-equiv="Content-Type"> 
  <meta content="blogger" name="generator"> 
  <link href="http://arjan-tijms.omnifaces.org/favicon.ico" rel="icon" type="image/x-icon"> 
  <link href="http://arjan-tijms.omnifaces.org/2012/11/implementing-container-authentication.html" rel="canonical"> 
  <link rel="alternate" type="application/atom+xml" title="Arjan Tijms' Weblog - Atom" href="http://arjan-tijms.omnifaces.org/feeds/posts/default"> 
  <link rel="alternate" type="application/rss+xml" title="Arjan Tijms' Weblog - RSS" href="http://arjan-tijms.omnifaces.org/feeds/posts/default?alt=rss"> 
  <link rel="service.post" type="application/atom+xml" title="Arjan Tijms' Weblog - Atom" href="https://www.blogger.com/feeds/4498889353428710313/posts/default"> 
  <link rel="alternate" type="application/atom+xml" title="Arjan Tijms' Weblog - Atom" href="http://arjan-tijms.omnifaces.org/feeds/422402323853605005/comments/default"> 
  <!--[if IE]><script type="text/javascript" src="https://www.blogger.com/static/v1/jsbin/35781802-ieretrofit.js"></script>
<![endif]--> 
  <meta content="http://arjan-tijms.omnifaces.org/2012/11/implementing-container-authentication.html" property="og:url"> 
  <meta content="Implementing container authentication in Java EE with JASPIC" property="og:title"> 
  <meta content=" This article takes a look at the state of security support in Java EE 6, with a focus on applications that wish to do their own authenticat..." property="og:description"> 
  <!--[if IE]> <script> (function() { var html5 = ("abbr,article,aside,audio,canvas,datalist,details," + "figure,footer,header,hgroup,mark,menu,meter,nav,output," + "progress,section,time,video").split(','); for (var i = 0; i < html5.length; i++) { document.createElement(html5[i]); } try { document.execCommand('BackgroundImageCache', false, true); } catch(e) {} })(); </script> <![endif]--> 
  <title>Arjan Tijms' Weblog: Implementing container authentication in Java EE with JASPIC</title> 
  <style id="page-skin-1" type="text/css"><!--
/*
-----------------------------------------------
Blogger Template Style
Name:     Simple
Designer: Blogger
URL:      www.blogger.com
----------------------------------------------- */

/* Content
----------------------------------------------- */
body {
font: normal normal 12px Arial, Tahoma, Helvetica, FreeSans, sans-serif;
color: #222222;
background: #66bbdd none repeat scroll top left;
padding: 0 40px 40px 40px;
}
html body .region-inner {
min-width: 0;
max-width: 100%;
width: auto;
}
h2 {
font-size: 22px;
}
a:link {
text-decoration:none;
color: #2288bb;
}
a:visited {
text-decoration:none;
color: #888888;
}
a:hover {
text-decoration:underline;
color: #33aaff;
}
.body-fauxcolumn-outer .fauxcolumn-inner {
background: transparent url(//www.blogblog.com/1kt/simple/body_gradient_tile_light.png) repeat scroll top left;
_background-image: none;
}
.body-fauxcolumn-outer .cap-top {
position: absolute;
z-index: 1;
height: 400px;
width: 100%;
}
.body-fauxcolumn-outer .cap-top .cap-left {
width: 100%;
background: transparent url(//www.blogblog.com/1kt/simple/gradients_light.png) repeat-x scroll top left;
_background-image: none;
}
.content-outer {
-moz-box-shadow: 0 0 40px rgba(0, 0, 0, .15);
-webkit-box-shadow: 0 0 5px rgba(0, 0, 0, .15);
-goog-ms-box-shadow: 0 0 10px #333333;
box-shadow: 0 0 40px rgba(0, 0, 0, .15);
margin-bottom: 1px;
}
.content-inner {
padding: 10px 10px;
}
.content-inner {
background-color: #ffffff;
}
/* Header
----------------------------------------------- */
.header-outer {
background: transparent none repeat-x scroll 0 -400px;
_background-image: none;
}
.Header h1 {
font: normal normal 24px Arial, Tahoma, Helvetica, FreeSans, sans-serif;
color: #3399bb;
text-shadow: -1px -1px 1px rgba(0, 0, 0, .2);
}
.Header h1 a {
color: #3399bb;
}
.Header .description {
font-size: 140%;
color: #777777;
}
.header-inner .Header .titlewrapper {
padding: 22px 30px;
}
.header-inner .Header .descriptionwrapper {
padding: 0 30px;
}
/* Tabs
----------------------------------------------- */
.tabs-inner .section:first-child {
border-top: 1px solid #eeeeee;
}
.tabs-inner .section:first-child ul {
margin-top: -1px;
border-top: 1px solid #eeeeee;
border-left: 0 solid #eeeeee;
border-right: 0 solid #eeeeee;
}
.tabs-inner .widget ul {
background: #f5f5f5 url(//www.blogblog.com/1kt/simple/gradients_light.png) repeat-x scroll 0 -800px;
_background-image: none;
border-bottom: 1px solid #eeeeee;
margin-top: 0;
margin-left: -30px;
margin-right: -30px;
}
.tabs-inner .widget li a {
display: inline-block;
padding: .6em 1em;
font: normal normal 14px Arial, Tahoma, Helvetica, FreeSans, sans-serif;
color: #999999;
border-left: 1px solid #ffffff;
border-right: 1px solid #eeeeee;
}
.tabs-inner .widget li:first-child a {
border-left: none;
}
.tabs-inner .widget li.selected a, .tabs-inner .widget li a:hover {
color: #000000;
background-color: #eeeeee;
text-decoration: none;
}
/* Columns
----------------------------------------------- */
.main-outer {
border-top: 0 solid #eeeeee;
}
.fauxcolumn-left-outer .fauxcolumn-inner {
border-right: 1px solid #eeeeee;
}
.fauxcolumn-right-outer .fauxcolumn-inner {
border-left: 1px solid #eeeeee;
}
/* Headings
----------------------------------------------- */
div.widget > h2,
div.widget h2.title {
margin: 0 0 1em 0;
font: normal bold 11px Arial, Tahoma, Helvetica, FreeSans, sans-serif;
color: #000000;
}
/* Widgets
----------------------------------------------- */
.widget .zippy {
color: #999999;
text-shadow: 2px 2px 1px rgba(0, 0, 0, .1);
}
.widget .popular-posts ul {
list-style: none;
}
/* Posts
----------------------------------------------- */
h2.date-header {
font: normal bold 11px Arial, Tahoma, Helvetica, FreeSans, sans-serif;
}
.date-header span {
background-color: transparent;
color: #222222;
padding: inherit;
letter-spacing: inherit;
margin: inherit;
}
.main-inner {
padding-top: 30px;
padding-bottom: 30px;
}
.main-inner .column-center-inner {
padding: 0 15px;
}
.main-inner .column-center-inner .section {
margin: 0 15px;
}
.post {
margin: 0 0 25px 0;
}
h3.post-title, .comments h4 {
font: normal normal 22px Arial, Tahoma, Helvetica, FreeSans, sans-serif;
margin: .75em 0 0;
}
.post-body {
font-size: 110%;
line-height: 1.4;
position: relative;
}
.post-body img, .post-body .tr-caption-container, .Profile img, .Image img,
.BlogList .item-thumbnail img {
padding: 2px;
background: #ffffff;
border: 1px solid #eeeeee;
-moz-box-shadow: 1px 1px 5px rgba(0, 0, 0, .1);
-webkit-box-shadow: 1px 1px 5px rgba(0, 0, 0, .1);
box-shadow: 1px 1px 5px rgba(0, 0, 0, .1);
}
.post-body img, .post-body .tr-caption-container {
padding: 5px;
}
.post-body .tr-caption-container {
color: #222222;
}
.post-body .tr-caption-container img {
padding: 0;
background: transparent;
border: none;
-moz-box-shadow: 0 0 0 rgba(0, 0, 0, .1);
-webkit-box-shadow: 0 0 0 rgba(0, 0, 0, .1);
box-shadow: 0 0 0 rgba(0, 0, 0, .1);
}
.post-header {
margin: 0 0 1.5em;
line-height: 1.6;
font-size: 90%;
}
.post-footer {
margin: 20px -2px 0;
padding: 5px 10px;
color: #666666;
background-color: #f9f9f9;
border-bottom: 1px solid #eeeeee;
line-height: 1.6;
font-size: 90%;
}
#comments .comment-author {
padding-top: 1.5em;
border-top: 1px solid #eeeeee;
background-position: 0 1.5em;
}
#comments .comment-author:first-child {
padding-top: 0;
border-top: none;
}
.avatar-image-container {
margin: .2em 0 0;
}
#comments .avatar-image-container img {
border: 1px solid #eeeeee;
}
/* Comments
----------------------------------------------- */
.comments .comments-content .icon.blog-author {
background-repeat: no-repeat;
background-image: url(data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABIAAAASCAYAAABWzo5XAAAAAXNSR0IArs4c6QAAAAZiS0dEAP8A/wD/oL2nkwAAAAlwSFlzAAALEgAACxIB0t1+/AAAAAd0SU1FB9sLFwMeCjjhcOMAAAD+SURBVDjLtZSvTgNBEIe/WRRnm3U8RC1neQdsm1zSBIU9VVF1FkUguQQsD9ITmD7ECZIJSE4OZo9stoVjC/zc7ky+zH9hXwVwDpTAWWLrgS3QAe8AZgaAJI5zYAmc8r0G4AHYHQKVwII8PZrZFsBFkeRCABYiMh9BRUhnSkPTNCtVXYXURi1FpBDgArj8QU1eVXUzfnjv7yP7kwu1mYrkWlU33vs1QNu2qU8pwN0UpKoqokjWwCztrMuBhEhmh8bD5UDqur75asbcX0BGUB9/HAMB+r32hznJgXy2v0sGLBcyAJ1EK3LFcbo1s91JeLwAbwGYu7TP/3ZGfnXYPgAVNngtqatUNgAAAABJRU5ErkJggg==);
}
.comments .comments-content .loadmore a {
border-top: 1px solid #999999;
border-bottom: 1px solid #999999;
}
.comments .comment-thread.inline-thread {
background-color: #f9f9f9;
}
.comments .continue {
border-top: 2px solid #999999;
}
/* Accents
---------------------------------------------- */
.section-columns td.columns-cell {
border-left: 1px solid #eeeeee;
}
.blog-pager {
background: transparent none no-repeat scroll top center;
}
.blog-pager-older-link, .home-link,
.blog-pager-newer-link {
background-color: #ffffff;
padding: 5px;
}
.footer-outer {
border-top: 0 dashed #bbbbbb;
}
/* Mobile
----------------------------------------------- */
body.mobile  {
background-size: auto;
}
.mobile .body-fauxcolumn-outer {
background: transparent none repeat scroll top left;
}
.mobile .body-fauxcolumn-outer .cap-top {
background-size: 100% auto;
}
.mobile .content-outer {
-webkit-box-shadow: 0 0 3px rgba(0, 0, 0, .15);
box-shadow: 0 0 3px rgba(0, 0, 0, .15);
}
.mobile .tabs-inner .widget ul {
margin-left: 0;
margin-right: 0;
}
.mobile .post {
margin: 0;
}
.mobile .main-inner .column-center-inner .section {
margin: 0;
}
.mobile .date-header span {
padding: 0.1em 10px;
margin: 0 -10px;
}
.mobile h3.post-title {
margin: 0;
}
.mobile .blog-pager {
background: transparent none no-repeat scroll top center;
}
.mobile .footer-outer {
border-top: none;
}
.mobile .main-inner, .mobile .footer-inner {
background-color: #ffffff;
}
.mobile-index-contents {
color: #222222;
}
.mobile-link-button {
background-color: #2288bb;
}
.mobile-link-button a:link, .mobile-link-button a:visited {
color: #ffffff;
}
.mobile .tabs-inner .section:first-child {
border-top: none;
}
.mobile .tabs-inner .PageList .widget-content {
background-color: #eeeeee;
color: #000000;
border-top: 1px solid #eeeeee;
border-bottom: 1px solid #eeeeee;
}
.mobile .tabs-inner .PageList .widget-content .pagelist-arrow {
border-left: 1px solid #eeeeee;
}

--></style> 
  <style id="template-skin-1" type="text/css"><!--
body {
min-width: 1080px;
}
.content-outer, .content-fauxcolumn-outer, .region-inner {
min-width: 1080px;
max-width: 1080px;
_width: 1080px;
}
.main-inner .columns {
padding-left: 0px;
padding-right: 310px;
}
.main-inner .fauxcolumn-center-outer {
left: 0px;
right: 310px;
/* IE6 does not respect left and right together */
_width: expression(this.parentNode.offsetWidth -
parseInt("0px") -
parseInt("310px") + 'px');
}
.main-inner .fauxcolumn-left-outer {
width: 0px;
}
.main-inner .fauxcolumn-right-outer {
width: 310px;
}
.main-inner .column-left-outer {
width: 0px;
right: 100%;
margin-left: -0px;
}
.main-inner .column-right-outer {
width: 310px;
margin-right: -310px;
}
#layout {
min-width: 0;
}
#layout .content-outer {
min-width: 0;
width: 800px;
}
#layout .region-inner {
min-width: 0;
width: auto;
}
--></style> 
  <link href="http://alexgorbatchev.com/pub/sh/current/styles/shCore.css" rel="stylesheet" type="text/css"> 
  <link href="http://alexgorbatchev.com/pub/sh/current/styles/shThemeDefault.css" rel="stylesheet" type="text/css"> 
  <script src="http://alexgorbatchev.com/pub/sh/current/scripts/shCore.js" type="text/javascript"></script> 
  <script src="http://alexgorbatchev.com/pub/sh/current/scripts/shBrushJava.js" type="text/javascript"></script> 
  <script src="http://alexgorbatchev.com/pub/sh/current/scripts/shBrushJScript.js" type="text/javascript"></script> 
  <script src="http://alexgorbatchev.com/pub/sh/current/scripts/shBrushSql.js" type="text/javascript"></script> 
  <script src="http://alexgorbatchev.com/pub/sh/current/scripts/shBrushXml.js" type="text/javascript"></script> 
  <script language="javascript"> 
    SyntaxHighlighter.config.bloggerMode = true;
    SyntaxHighlighter.config.clipboardSwf = 'http://alexgorbatchev.com/pub/sh/current/scripts/clipboard.swf';
    SyntaxHighlighter.all();
  </script> 
  <link href="https://www.blogger.com/dyn-css/authorization.css?targetBlogID=4498889353428710313&amp;zx=6b130478-a618-494b-a23b-b36b37b46c12" media="none" onload="if(media!='all')media='all'" rel="stylesheet">
  <noscript>
   <link href="https://www.blogger.com/dyn-css/authorization.css?targetBlogID=4498889353428710313&amp;zx=6b130478-a618-494b-a23b-b36b37b46c12" rel="stylesheet">
  </noscript> 
 </head> 
 <body class="loading variant-pale"> 
  <div class="navbar section" id="navbar">
   <div class="widget Navbar" data-version="1" id="Navbar1">
    <script type="text/javascript">
    function setAttributeOnload(object, attribute, val) {
      if(window.addEventListener) {
        window.addEventListener('load',
          function(){ object[attribute] = val; }, false);
      } else {
        window.attachEvent('onload', function(){ object[attribute] = val; });
      }
    }
  </script> 
    <div id="navbar-iframe-container"></div> 
    <script type="text/javascript" src="https://apis.google.com/js/plusone.js"></script> 
    <script type="text/javascript">
      gapi.load("gapi.iframes:gapi.iframes.style.bubble", function() {
        if (gapi.iframes && gapi.iframes.getContext) {
          gapi.iframes.getContext().openChild({
              url: 'https://www.blogger.com/navbar.g?targetBlogID\x3d4498889353428710313\x26blogName\x3dArjan+Tijms\x27+Weblog\x26publishMode\x3dPUBLISH_MODE_HOSTED\x26navbarType\x3dLIGHT\x26layoutType\x3dLAYOUTS\x26searchRoot\x3dhttp://arjan-tijms.omnifaces.org/search\x26blogLocale\x3den\x26v\x3d2\x26homepageUrl\x3dhttp://arjan-tijms.omnifaces.org/\x26targetPostID\x3d422402323853605005\x26blogPostOrPageUrl\x3dhttp://arjan-tijms.omnifaces.org/2012/11/implementing-container-authentication.html\x26vt\x3d5232789217312888270',
              where: document.getElementById("navbar-iframe-container"),
              id: "navbar-iframe"
          });
        }
      });
    </script>
    <script type="text/javascript">
(function() {
var script = document.createElement('script');
script.type = 'text/javascript';
script.src = '//pagead2.googlesyndication.com/pagead/js/google_top_exp.js';
var head = document.getElementsByTagName('head')[0];
if (head) {
head.appendChild(script);
}})();
</script> 
   </div>
  </div> 
  <div class="body-fauxcolumns"> 
   <div class="fauxcolumn-outer body-fauxcolumn-outer"> 
    <div class="cap-top"> 
     <div class="cap-left"></div> 
     <div class="cap-right"></div> 
    </div> 
    <div class="fauxborder-left"> 
     <div class="fauxborder-right"></div> 
     <div class="fauxcolumn-inner"> 
     </div> 
    </div> 
    <div class="cap-bottom"> 
     <div class="cap-left"></div> 
     <div class="cap-right"></div> 
    </div> 
   </div> 
  </div> 
  <div class="content"> 
   <div class="content-fauxcolumns"> 
    <div class="fauxcolumn-outer content-fauxcolumn-outer"> 
     <div class="cap-top"> 
      <div class="cap-left"></div> 
      <div class="cap-right"></div> 
     </div> 
     <div class="fauxborder-left"> 
      <div class="fauxborder-right"></div> 
      <div class="fauxcolumn-inner"> 
      </div> 
     </div> 
     <div class="cap-bottom"> 
      <div class="cap-left"></div> 
      <div class="cap-right"></div> 
     </div> 
    </div> 
   </div> 
   <div class="content-outer"> 
    <div class="content-cap-top cap-top"> 
     <div class="cap-left"></div> 
     <div class="cap-right"></div> 
    </div> 
    <div class="fauxborder-left content-fauxborder-left"> 
     <div class="fauxborder-right content-fauxborder-right"></div> 
     <div class="content-inner"> 
      <header> 
       <div class="header-outer"> 
        <div class="header-cap-top cap-top"> 
         <div class="cap-left"></div> 
         <div class="cap-right"></div> 
        </div> 
        <div class="fauxborder-left header-fauxborder-left"> 
         <div class="fauxborder-right header-fauxborder-right"></div> 
         <div class="region-inner header-inner"> 
          <div class="header section" id="header">
           <div class="widget Header" data-version="1" id="Header1"> 
            <div id="header-inner"> 
             <div class="titlewrapper"> 
              <h1 class="title"> <a href="http://arjan-tijms.omnifaces.org/"> Arjan Tijms' Weblog </a> </h1> 
             </div> 
             <div class="descriptionwrapper"> 
              <p class="description"><span>Musings of a Java EE developer</span></p> 
             </div> 
            </div> 
           </div>
          </div> 
         </div> 
        </div> 
        <div class="header-cap-bottom cap-bottom"> 
         <div class="cap-left"></div> 
         <div class="cap-right"></div> 
        </div> 
       </div> 
      </header> 
      <div class="tabs-outer"> 
       <div class="tabs-cap-top cap-top"> 
        <div class="cap-left"></div> 
        <div class="cap-right"></div> 
       </div> 
       <div class="fauxborder-left tabs-fauxborder-left"> 
        <div class="fauxborder-right tabs-fauxborder-right"></div> 
        <div class="region-inner tabs-inner"> 
         <div class="tabs no-items section" id="crosscol"></div> 
         <div class="tabs no-items section" id="crosscol-overflow"></div> 
        </div> 
       </div> 
       <div class="tabs-cap-bottom cap-bottom"> 
        <div class="cap-left"></div> 
        <div class="cap-right"></div> 
       </div> 
      </div> 
      <div class="main-outer"> 
       <div class="main-cap-top cap-top"> 
        <div class="cap-left"></div> 
        <div class="cap-right"></div> 
       </div> 
       <div class="fauxborder-left main-fauxborder-left"> 
        <div class="fauxborder-right main-fauxborder-right"></div> 
        <div class="region-inner main-inner"> 
         <div class="columns fauxcolumns"> 
          <div class="fauxcolumn-outer fauxcolumn-center-outer"> 
           <div class="cap-top"> 
            <div class="cap-left"></div> 
            <div class="cap-right"></div> 
           </div> 
           <div class="fauxborder-left"> 
            <div class="fauxborder-right"></div> 
            <div class="fauxcolumn-inner"> 
            </div> 
           </div> 
           <div class="cap-bottom"> 
            <div class="cap-left"></div> 
            <div class="cap-right"></div> 
           </div> 
          </div> 
          <div class="fauxcolumn-outer fauxcolumn-left-outer"> 
           <div class="cap-top"> 
            <div class="cap-left"></div> 
            <div class="cap-right"></div> 
           </div> 
           <div class="fauxborder-left"> 
            <div class="fauxborder-right"></div> 
            <div class="fauxcolumn-inner"> 
            </div> 
           </div> 
           <div class="cap-bottom"> 
            <div class="cap-left"></div> 
            <div class="cap-right"></div> 
           </div> 
          </div> 
          <div class="fauxcolumn-outer fauxcolumn-right-outer"> 
           <div class="cap-top"> 
            <div class="cap-left"></div> 
            <div class="cap-right"></div> 
           </div> 
           <div class="fauxborder-left"> 
            <div class="fauxborder-right"></div> 
            <div class="fauxcolumn-inner"> 
            </div> 
           </div> 
           <div class="cap-bottom"> 
            <div class="cap-left"></div> 
            <div class="cap-right"></div> 
           </div> 
          </div> 
          <!-- corrects IE6 width calculation --> 
          <div class="columns-inner"> 
           <div class="column-center-outer"> 
            <div class="column-center-inner"> 
             <div class="main section" id="main">
              <div class="widget Blog" data-version="1" id="Blog1"> 
               <div class="blog-posts hfeed"> 
                <div class="date-outer"> 
                 <h2 class="date-header"><span>Wednesday, November 7, 2012</span></h2> 
                 <div class="date-posts"> 
                  <div class="post-outer"> 
                   <div class="post hentry" itemprop="blogPost" itemscope itemtype="http://schema.org/BlogPosting"> 
                    <a name="422402323853605005"></a> 
                    <h3 class="post-title entry-title" itemprop="name"> Implementing container authentication in Java EE with JASPIC </h3> 
                    <div class="post-header"> 
                     <div class="post-header-line-1"></div> 
                    </div> 
                    <div class="post-body entry-content" id="post-body-422402323853605005" itemprop="description articleBody"> 
                     <div style="text-align: justify;">
                       This article takes a look at the state of security support in Java EE 6, with a focus on applications that wish to do their own authentication and the usage of the JASPI/JASPIC/JSR 196 API. 
                      <br>
                      <br> 
                      <p> <b>Update:</b> the <i>further reading</i> section has been moved to <a href="https://jaspic.zeef.com/arjan.tijms">my ZEEF page about JASPIC</a>. This contains links to articles, background, questions and answers, and more. </p>
                      <p> &nbsp; </p>
                      <h2> Declarative security is easy</h2> In Java EE it has always been relatively straightforward to specify to which resources security constraints should be applied.
                      <br> 
                      <br> For web resources (Servlets, JSP pages, etc) there is the 
                      <i>&lt;security-constraint&gt;</i> element in web.xml, while for EJB beans there's the 
                      <i>@RolesAllowed</i> annotation. Via this so called 'declarative security' the programmer can specify that only a user having the given roles is allowed access to the protected web resource, or may invoke methods on the protected bean.
                      <br> 
                      <br> The declarative model has a programmatic counterpart via methods like 
                      <i><a href="http://docs.oracle.com/javaee/6/api/javax/servlet/http/HttpServletRequest.html#isUserInRole(java.lang.String)" target="_blank">HttpServletRequest#isUserInRole</a></i>, where the same kind of role checks can be done from within code (allowing for more elaborate combinations, e.g. has role 'admin' but not has role 'manager', or if price &gt; 5 and not has role 'manager', etc).
                      <br> 
                      <br> This is indeed straightforward and easy to use. Unfortunately, when it comes to implementing the actual authentication code (the code that actually loads a user and associated roles from some place and checks e.g. the password), things are not so simple.
                      <br> 
                      <br> 
                      <h2> How is authentication traditionally implemented?</h2> Traditionally, Java EE simply didn't say 
                      <i>how</i>&nbsp;authentication should be done at all, which greatly confused (new) users. The idea here is that security is setup inside the application server, and is done in a vendor specific way. In addition to that, a WAR or EAR will typically also have to contain vendor specific deployment descriptors which require setting up and configuring vendor specific things, often using vendor specific terminology. For instance, some application servers require specifying something called a "domain", which then approximately but not exactly corresponds to what another server may call a "realm", "zone", or "region". Roles can also rarely just be... roles. Many servers, but not all, require you to first map them to things like a "group", "principal", or "right" (which again are all roughly the same thing).
                      <br> 
                      <br> Ignoring the terminology confusion, this model works well for the situation where externally obtained applications need to be integrated in the existing intranet of an enterprise, and where existing user accounts residing in e.g. the enterprise's LDAP server need to access those applications. Examples of such applications are things like JIRA or Sonar. In that situation, if JIRA would use the role name "admin" and your organization uses the name "administrator", it's convenient that there's a way to map between those roles.
                      <br> 
                      <br> However, for applications that are developed in-house and are solely aimed to be deployed by the same organization that developed them and which are intended for the general Internet public (i.e. your typical web app), all this mandatory mapping is completely unnecessary.
                      <br> 
                      <br> Having the security setup inside the application server is an abstraction that only gets in the way if there is only ever one application deployed to that application server. Worse, because the functionality to create a user account is typically an integrated part of the above mentioned web applications, being forced to setup security outside the application really doesn't work nicely. Among others it prevents the application to easily use its own domain models for the authentication process (like e.g. a JPA entity 
                      <i>User</i>). There are some popular workarounds for this, like login modules that allow one to directly query a user and its roles from the same database that the application is using, but these are inelegant at best and require the details about how the 
                      <i>User</i> entity is persisted to reside at two places.
                      <br> 
                      <br> 
                      <h2> Heavyweight</h2> The fact that the authentication mechanism is vendor specific doesn't just hurt the portability of Java EE applications, it also hurts learning about Java EE. Namely, in order to secure a Java EE application, you can't just study Java EE books and tutorials, but you also have to learn e.g. JBoss, or GlassFish. Especially for lesser known application servers, it can be very frustrating to dig up that information. Essentially it makes Java EE developers less able to move between jobs and makes it harder for companies to hire experienced employees.
                      <br> 
                      <br> All of this unfortunately seems to add to the feeling that Java EE is 
                      <b>heavyweight</b>, a reputation that Sun, now Oracle and partners have been trying hard to shake off. Indeed, a technology like EJB has been massively slimmed down by among others simply not forcing certain restrictions upon users and having smart defaults. Yes, (business) interfaces for services and separating business code into its own layer may be a best practice in some situations, but it's a choice users should make and in EJB 3.1 this choice was finally given to the user.
                      <br> 
                      <br> 
                      <h2> What about JAAS?</h2> 
                      <div>
                        A common mistake is to think that 
                       <a href="http://docs.oracle.com/javase/6/docs/technotes/guides/security/jaas/JAASRefGuide.html" target="_blank">JAAS</a>&nbsp;(Java Authentication and Authorization Service) is the standardized and portable API that can be used to take care of authentication in Java EE without having to resort to vendor specific APIs.
                      </div> 
                      <div> 
                       <br>
                      </div> Unfortunately this is not the case. JAAS comes a long way in introducing a basic set of security primitives and overall establishing a very comprehensive security framework, but one thing it doesn't have knowledge about is how to integrate with a Java EE container. Practically this means that JAAS has no way of communicating a successful authentication to the container. A user may be logged-in to some JAAS module, but Java EE will be totally unaware of this fact. The reverse is also true; when a protected resource is accessed by the user, or when an explicit login is triggered via the Servlet 3 
                      <a href="http://docs.oracle.com/javaee/6/api/javax/servlet/http/HttpServletRequest.html#login(java.lang.String, java.lang.String)" target="_blank">HttpServletRequest#login</a> method, the container has no notion of which JAAS login module should be called. Finally, there is a 
                      <a href="http://arjan-tijms.blogspot.com/2014/02/jaas-in-java-ee-is-not-universal.html">mismatch</a> between the very general JAAS concept of a so-called Subject having a bag of Principals and the Java EE notion of a caller principal and a collection of roles. For further reading about this particular subject; Raymond Ng wrote an 
                      <a href="http://java.sys-con.com/node/1002315">excellent article</a> about this a few years ago. 
                      <br> 
                      <br> Nearly all vendor specific authentication mechanisms are in fact based on JAAS, but each vendor has taken its own approach to implementing the container integration, how to map the above mentioned caller principal and roles to the JAAS Subject, and how to let a user install and specify which authentication modules should be used for a given application (or domain, realm, zone, etc).
                      <br> 
                      <br> 
                      <h2> JASPIC to the rescue... sort off</h2> In actuality, the idea that there should be an API in Java EE that standardized the above mentioned integration already existed a long time ago, in 2002 to be precise when the JASPIC JSR (JSR 196) was created. For some reason or the other, it took a very long time for this JSR to be completed and it wasn't included in Java EE until Java EE 6 (2009). 
                      <br> 
                      <br> JASPIC finally standardizes how an authentication module is integrated into a Java EE container. However, it's not without its problems and has a few quirks. 
                      <br> 
                      <br> Probably in order to maintain compatibly with the existing ways that containers use the JAAS Subject, JASPIC did not specify which parts of this Subject correspond to the caller principal and roles. Instead, it uses a trick involving a so called callback handler. This works in 2 steps. First JASPIC introduced 2 types (called callbacks), that do contain this information in clearly specified fields. These are called 
                      <a href="http://docs.oracle.com/javaee/6/api/javax/security/auth/message/callback/CallerPrincipalCallback.html">CallerPrincipalCallback</a> and 
                      <a href="http://docs.oracle.com/javaee/6/api/javax/security/auth/message/callback/GroupPrincipalCallback.html">GroupPrincipalCallback</a>. Secondly the authentication module is given a handler implementation that reads the data from those two types and then stores it in a container specific way into the JAAS Subject. It's a bit convoluted, but it does do the trick.
                      <br> 
                      <br> Another strange aspect of JASPIC is its name. Seemingly people can't agree on whether it should be JASPIC or JASPI. Important vendors like JBoss and IBM call it "JASPI" in e.g. documentation and package names of source code. Oracle calls it "JASPIC". It's a small thing perhaps, but terminology is important and even though the difference is just one letter, it makes searching more difficult since many search engines emphasize full words. In e.g. JIRA and on Google I found searching for just "JASPI" did not always gave me the results that "JASPIC" would give me. And although it has now mostly faded away, JASPIC was once known by yet another name; JMAC. It looks like a rather different name, but it's an abbreviation for "
                      <a href="https://java.net/projects/glassfish/sources/svn/revision/17844">Java Message Authentication SPI for Container(s)</a>", which is almost identical to the current "Java Authentication SPI for Containers". The term "jmac" is still used in the GlassFish source code, which has apparently not been refactored after the name changed. 
                      <br> 
                      <br> For something that was added to Java EE 6, it really feels out of place that JASPIC is still limited to the Java 1.4 syntax. From Servlet, to JSF to EJB and JPA; pretty much everything has adopted at least the Java 5 syntax. The JASPIC 1.0mr1 spec does mention this issue, but merely states that 
                      <i>"There is a requirement that the SPI be used in J2SE 1.4 environments"</i>. -Why- this requirement is there, and why it holds for JASPIC but not for most of the other specifications in Java EE 6 is however not really clear.
                      <br> 
                      <br> A serious problem at the moment is the fact that adoption of JASPIC by vendors has been slow. JASPIC may be mandated for a Java EE 6 implementation, but only for the full profile. This means the very important web profile (with implementations like TomEE and Resin) does not need to implement it (not even the Servlet Container Profile, which is a subset of the full JASPIC spec). Web profile implementations do need to implement authentication modules (since security is a mandatory part of both Servlet and EJB-lite), but they have chosen to implement those using their own APIs. This is worrying. JASPIC isn't about something that web profile apps don't need, but is about doing something they need in a specific way. Perhaps this way is not yet good enough or not yet mature enough, or maybe there is just too much investment in proprietary solutions and the advantages of JASPIC are not seen as compelling enough, since otherwise those web profile implementations might have adopted JASPIC of their own account by now, without needing to be forced to implement it. (
                      <i><small>Tomcat in particular does ship with a <a href="http://tomcat.apache.org/tomcat-7.0-doc/realm-howto.html#JAASRealm">JAASRealm</a> (<a href="http://tomcat.apache.org/tomcat-7.0-doc/api/org/apache/catalina/realm/JAASRealm.html">javadoc</a>), which it says is an early prototype of JASPIC that was probably created somewhere around 2004)</small></i>)
                      <i><b>UPDATE:</b> In 2016, Tomcat 9 M4 has <a href="https://tomcat.apache.org/tomcat-9.0-doc/config/jaspic.html">implemented JASPIC</a></i>. 
                      <br> 
                      <br> Full profile implementations have implemented JASPIC of course, but most present it as a secondary option; for those usecases where a user happens to have a JASPIC authentication module that needs to be used. For "normal" security, the vendors' proprietary solutions are still being presented as the primary solution. As a result, various JASPIC implementations are a little buggy. This is however not a rare situation. The story is 
                      <a href="http://henk53.wordpress.com/2012/06/30/the-state-of-datasourcedefinition-in-java-ee">rather similar</a> for the standardized embedded data source that was introduced in Java EE 6 (@DataSource or data-source in web.xml). Initially adoption of this was rather slow and most if not all vendors kept plugging their own proprietary ways to define data sources. Lately the situation has improved somewhat, but perhaps the Java EE certification process should be a bit stricter here.
                      <br> 
                      <br> Then there's the question of how to tell a container to use a particular authentication module for a particular application or perhaps for the entire server. In order to do this there are typically a number of options; via some kind of admin UI or console offered by the application server, declarative via configuration files or annotations (where those configuration files can either reside inside a WAR/EAR or inside the server itself), or programmatically via some API.
                      <br> 
                      <br> Unfortunately, the only method that JASPIC standardized is the programmatic option. And this programmatic option seems to be aimed more at vendors needing an internal API to register modules than at user code registering their own at startup. So in practice the already ill-advertised and sometimes buggy standardized method appears to be not that standard at all. The 
                      <a href="http://pic.dhe.ibm.com/infocenter/wasinfo/v8r5/index.jsp?topic=%2Fcom.ibm.websphere.nd.doc%2Fae%2Ftsec_jaspi_create.html">JASPIC documentation</a> of 
                      <a href="http://docs.oracle.com/cd/E24329_01/web.1211/e24422/jaspic.htm">all vendors</a> 
                      <a href="https://community.jboss.org/wiki/JBossAS7EnablingJASPIAuthenticationForWebApplications">encourage the user</a> 
                      <a href="https://access.redhat.com/knowledge/docs/en-US/JBoss_Enterprise_Application_Platform/6/html/Administration_and_Configuration_Guide/Configure_Java_Authentication_SPI_for_Containers_JASPI_Security1.html">to install</a> the authentication module 
                      <a href="http://docs.oracle.com/cd/E18930_01/html/821-2418/gizel.html#gizfe">inside the server</a>, create or edit proprietary configuration files and as if that isn't insulting enough to a developer not rarely requires interacting with a graphical UI as well. Clearly such documentation is aimed at system administrators setting up the kind of traditional servers that are used to run externally obtained applications that need to integrate with the existing infrastructure. Developers creating applications that need to manage their own users are largely left in the cold here. 
                      <i><small>(The GlassFish developer documentation mentions the programmatic option, but doesn't go into detail how that exactly works)</small></i> 
                      <br> 
                      <br> 
                      <h2> Programmatically registering JASPIC auth modules</h2> Nevertheless, the programmatic API is sort of useable for applications to register their own internal authentication module. Of 5 servers that I tested; JBoss EAP 6.0 (JBoss AS 7.1.2.Final-redhat-1), GlassFish 3.1.2.2, WebLogic 12c, Geronimo v3 and WebSphere 8.5, only Geronimo seemed to have overlooked the possibility for web apps registering their own authentication module. For the other servers it did more or less work, but it's striking that even when using programmatic registration none of them could actually do their job without a vendor specific deployment descriptor being present (which is something related to the general concept of security in Java EE and not a specific fault of JASPIC).
                      <br> 
                      <br> The first hurdle when attempting to use JASPIC for programmatically registering just an authentication module is the fact that there isn't a convenience API to do just that. Instead there's something that's essentially a factory-factory-factory for a delegator to an actual authentication module. That's right, it's a quadruple indirection. Usefull and flexible for those situations that require it no doubt, but more than a little intimidating for novice JASPIC users. 
                      <br> 
                      <br> 
                      <a name="AppContextID"></a> Another hurdle is that the initial factory used for registering the factory-factory requires an "appContext" identifier. This identifier is specified to be either null, or be composed of the pattern [hostname] [space] [context path]. When the identifier is null, the registration is for all (web) applications, otherwise it's only for a specific one. Clearly when an application registers its own internal authentication module the latter form is needed. The problem is that this "hostname" part is not that easy to guess when doing programmatic registration at startup time. It's further defined as being a "logical host", but how does an app knows what its own logical host is? The situation is further complicated by the fact that all servers except JBoss EAP just use a constant here, which is simply "server" in case of GlassFish, Geronimo and WebLogic and "default_host" in case of WebSphere. JBoss EAP however uses 
                      <a href="http://docs.oracle.com/javaee/6/api/javax/servlet/ServletRequest.html#getLocalName()" target="_blank">ServletRequest#getLocalName</a> here, which is a value that's only available during request processing and not during startup time. It seems likely that if internal application server code is doing both the registration and the subsequent lookups, this is not really a problem. The AS itself knows which key it used for registration and can easily use the same one for lookups later. But when user code needs to do a registration independent of the application server that later on does the lookup, this becomes a problem. Maybe JBoss has interpreted the spec wrongly and the logical host should really be the constant "server", but then the spec needs to be clarified here. If it really should be a logical host of some kind, then there also needs to be a way to express that the application doesn't care about this (for example by specifying "*" as a kind of bind-all). As it stands, the situation is highly confusing. 
                      <i><b>UPDATE:</b> In JASPIC 1.1/Java EE this problem <a href="arjan-tijms.blogspot.com/2013/04/whats-new-in-java-ee-7s-authentication.html#AppContexID">has been solved</a>.</i> 
                      <br>
                      <br> 
                      <h3> Sample code</h3> 
                      <br> The code below shows how to programmatically register a sample JASPIC authentication module. The module itself will be as simple as can be, and always just "returns" a user with a name and one role.
                      <br> 
                      <br> 
                      <h2> Step 1 - Registering via the factory-factory-factory </h2> We first obtain a reference to the factory-factory-factory (
                      <i><a href="http://docs.oracle.com/javaee/6/api/javax/security/auth/message/config/AuthConfigFactory.html">AuthConfigFactory</a></i>), which we use to register our own factory-factory (shown highlighted). We need to specify for which 
                      <i>layer</i> we're doing the registration, which needs to be the constant "HttpServlet" for the Servlet Container Profile. For this example we evade the problems with the 
                      <i>appContext</i> and provide a null, which means we're doing the registration for all applications running on the server. 
                      <br> 
                      <pre class="brush: java; gutter: false; highlight: [7,8,9,10,11]">@WebListener
public class StartupListener implements ServletContextListener {
    
    @Override
    public void contextInitialized(ServletContextEvent sce) {
        AuthConfigFactory factory = AuthConfigFactory.getFactory();
        factory.registerConfigProvider(
      new TestAuthConfigProvider(), 
      "HttpServlet", null, 
      "The test"
     );
    }
    
    @Override
    public void contextDestroyed(ServletContextEvent sce) {
    }
}
</pre> 
                      <h2> Step 2 - Implementing the factory-factory </h2> In the next step we look at the factory-factory that we registered above, which is an implementation of 
                      <a href="http://docs.oracle.com/javaee/6/api/javax/security/auth/message/config/AuthConfigProvider.html">AuthConfigProvider</a>. This factory-factory has a required constructor with a required implementation. The implementation seemed trivial; we need to do a self-registration. As I wasn't sure where some of the parameters had to be obtained from, I used my good friend 
                      <i>null</i> again. 
                      <br> 
                      <br> The real meat of this class is in the 
                      <i>getServerAuthConfig</i> method (shown highlighted), which simply has to return a factory. The flexibility that this factory-factory offers is the ability to create factories with a given 
                      <i>handler</i> or when this is null give the factory-factory the chance to create a default handler of some sorts. There's also a 
                      <i>refresh</i> method that I think asks for updating all factories created by the factory-factory if needed. It's only for dynamic factory-factories though, so I left it unimplemented. 
                      <br> 
                      <pre class="brush: java; gutter: false; highlight: [41,42,43]">public class TestAuthConfigProvider implements AuthConfigProvider {

    private static final String 
        CALLBACK_HANDLER_PROPERTY_NAME = "authconfigprovider.client.callbackhandler";

    private Map&lt;String, String&gt; providerProperties;

    public TestAuthConfigProvider() {
    }

    /**
     * Constructor with signature and implementation that's required by API.
     * 
     * @param properties
     * @param factory
     */
    public TestAuthConfigProvider(Map&lt;String, String&gt; properties,
            AuthConfigFactory factory) {
        this.providerProperties = properties;

        // API requires self registration if factory is provided. Not clear
        // where the "layer" (2nd parameter)
        // and especially "appContext" (3rd parameter) values have to come from
        // at this place.
        if (factory != null) {
            factory.registerConfigProvider(
                this, null, null,
                "Auto registration"
            );
        }
    }

    /**
     * The actual factory method that creates the factory used to eventually
     * obtain the delegate for a SAM.
     */
    @Override
    public ServerAuthConfig getServerAuthConfig(String layer,
            String appContext, CallbackHandler handler) throws AuthException,
            SecurityException {
        return new TestServerAuthConfig(layer, appContext,
                handler == null ? createDefaultCallbackHandler() : handler,
                providerProperties);
    }

    @Override
    public ClientAuthConfig getClientAuthConfig(String layer,
            String appContext, CallbackHandler handler) throws AuthException,
            SecurityException {
        return null;
    }

    @Override
    public void refresh() {
    }

    /**
     * Creates a default callback handler via the system property
     * "authconfigprovider.client.callbackhandler", as seemingly required by the
     * API (API uses wording "may" create default handler).
     * 
     * @return
     * @throws AuthException
     */
    private CallbackHandler createDefaultCallbackHandler() throws AuthException {
        String callBackClassName = System
                .getProperty(CALLBACK_HANDLER_PROPERTY_NAME);
        
        if (callBackClassName == null) {
            throw new AuthException(
                    "No default handler set via system property: "
                            + CALLBACK_HANDLER_PROPERTY_NAME);
        }

        try {
            return (CallbackHandler) Thread.currentThread()
                    .getContextClassLoader().loadClass(callBackClassName)
                    .newInstance();
        } catch (Exception e) {
            throw new AuthException(e.getMessage());
        }
    }

}
</pre> 
                      <h2> Step 3 - Implementing the factory </h2> The factory that we returned in the previous step is an implementation of 
                      <a href="http://docs.oracle.com/javaee/6/api/javax/security/auth/message/config/ServerAuthConfig.html">ServerAuthConfig</a>. Its main functionality is creating instances of delegators for the authentication module (shown highlighted). 
                      <br> 
                      <br> In our case the factory functionality is very simply; it just creates a new instance of the delegator passing only the 
                      <i>handler</i> through. The factories that are provided by the application servers themselves typically read-in and process the proprietary configuration files here. 
                      <br> 
                      <br> I observed an interesting difference here between Geronimo and the other servers tested; Geronimo calls the 
                      <i>getAuthContext</i> method twice per request, while the others only do so once. 
                      <br> 
                      <pre class="brush: java; gutter: false; highlight: [33]">/**
 * This class functions as a kind of factory for {@link ServerAuthContext}
 * instances, which are delegates for the actual {@link ServerAuthModule} (SAM)
 * that we're after.
 * 
 */
public class TestServerAuthConfig implements ServerAuthConfig {

    private String layer;
    private String appContext;
    private CallbackHandler handler;
    private Map&lt;String, String&gt; providerProperties;

    public TestServerAuthConfig(String layer, String appContext,
            CallbackHandler handler, Map&lt;String, String&gt; providerProperties) {
        this.layer = layer;
        this.appContext = appContext;
        this.handler = handler;
        this.providerProperties = providerProperties;
    }

    /**
     * WebLogic 12c, JBoss EAP 6 and GlassFish 3.1.2.2 call this only once per
     * request, Geronimo V3 calls this before sam.validateRequest and again
     * before sam.secureRequest in the same request.
     * 
     */
    @Override
    public ServerAuthContext getAuthContext(String authContextID,
            Subject serviceSubject, @SuppressWarnings("rawtypes") Map properties)
            throws AuthException {
        
        return new TestServerAuthContext(handler);
    }

    @Override
    public String getMessageLayer() {
        return layer;
    }

    @Override
    public String getAuthContextID(MessageInfo messageInfo) {
        return appContext;
    }

    @Override
    public String getAppContext() {
        return appContext;
    }

    @Override
    public void refresh() {
    }

    @Override
    public boolean isProtected() {
        return false;
    }

    public Map&lt;String, String&gt; getProviderProperties() {
        return providerProperties;
    }

}
</pre> 
                      <h2> Step 4 - Implementing the delegator </h2> In the delegator (an implementation of 
                      <a href="http://docs.oracle.com/javaee/6/api/javax/security/auth/message/config/ServerAuthContext.html">ServerAuthContext</a>) that was returned from the factory above we finally get a chance to create our authentication module (shown highlighted). 
                      <br> 
                      <br> The rest of the delegator class can be pretty simple. As we don't have any selection between modules to do, we just delegate directly to the one and only module that we encapsulate. 
                      <br> 
                      <pre class="brush: java; gutter: false; highlight: [18,19,20]">/**
 * The Server Authentication Context is an extra (required) indirection between
 * the Application Server and the actual Server Authentication Module (SAM).
 * This can be used to encapsulate any number of SAMs and either select one at
 * run-time, invoke them all in order, etc.
 * &lt;p&gt;
 * Since this simple example only has a single SAM, we delegate directly to that
 * one. Note that this {@link ServerAuthContext} and the
 * {@link ServerAuthModule} (SAM) share a common base interface:
 * {@link ServerAuth}.
 * 
 */
public class TestServerAuthContext implements ServerAuthContext {

    private ServerAuthModule serverAuthModule;

    public TestServerAuthContext(CallbackHandler handler) throws AuthException {
        serverAuthModule = new TestServerAuthModule();
        serverAuthModule.initialize(null, null, handler,
                Collections.&lt;String, String&gt; emptyMap());
    }

    @Override
    public AuthStatus validateRequest(MessageInfo messageInfo,
            Subject clientSubject, Subject serviceSubject) throws AuthException {
        return serverAuthModule.validateRequest(messageInfo, clientSubject,
                serviceSubject);
    }

    @Override
    public AuthStatus secureResponse(MessageInfo messageInfo,
            Subject serviceSubject) throws AuthException {
        return serverAuthModule.secureResponse(messageInfo, serviceSubject);
    }

    @Override
    public void cleanSubject(MessageInfo messageInfo, Subject subject)
            throws AuthException {
        serverAuthModule.cleanSubject(messageInfo, subject);
    }

}
</pre> 
                      <h2> Step 5 - Implementing the authentication module </h2> At long last, we finally get to implement our authentication module, which is an instance of 
                      <a href="http://docs.oracle.com/javaee/6/api/javax/security/auth/message/module/ServerAuthModule.html">ServerAuthModule</a>. With respect to the API, it's interesting to note that this time around there's an 
                      <i>initialize</i> method present instead of a mandatory constructor. 
                      <br> 
                      <br> As mentioned before, we don't do an actual authentication but just "install" the caller principal and a role into the JAAS Subject. For this example, 
                      <i>getSupportedMessageTypes</i> actually doesn't need to be implemented since it's only called by the delegator that encapsulates it. Since we own that delegator, we know it's not going to call this method. For completeness though I implemented it anyway to be compliant with the Servlet Container Profile.
                      <br> 
                      <br> Interesting to note is that 
                      <i>secureResponse</i> was treated differently by most servers. Only WebLogic and Geronimo call this method, but where WebLogic insists on seeing 
                      <i>SEND_SUCCESS</i> returned, Geronimo just ignores the return value. In its class 
                      <i><a href="http://grepcode.com/file/repo1.maven.org/maven2/org.apache.geronimo.modules/geronimo-tomcat7/3.0.0/org/apache/geronimo/tomcat/security/SecurityValve.java#93">org.apache.geronimo.tomcat.security.SecurityValve</a></i>, it contains the following code fragment: 
                      <br> 
                      <blockquote>
                        // This returns a success code but I'm not sure what to do with it.
                       <br> authenticator.secureResponse(request, response, authResult); 
                      </blockquote> Another difference for this same 
                      <i>secureResponse</i> method, is that WebLogic calls it before a protected resource (e.g. Servlet) is called, while Geronimo does so after. 
                      <br> 
                      <pre class="brush: java; gutter: false">/**
 * The actual Server Authentication Module AKA SAM.
 * 
 */
public class TestServerAuthModule implements ServerAuthModule {

    private CallbackHandler handler;
    private Class&lt;?&gt;[] supportedMessageTypes = 
        new Class[] {HttpServletRequest.class, HttpServletResponse.class };

    @Override
    public void initialize(MessagePolicy requestPolicy,
            MessagePolicy responsePolicy, CallbackHandler handler,
            @SuppressWarnings("rawtypes") Map options) throws AuthException {
        this.handler = handler;
    }

    @Override
    public AuthStatus validateRequest(MessageInfo messageInfo,
            Subject clientSubject, Subject serviceSubject) throws AuthException {

        // Normally we would check here for authentication credentials being
        // present and perform actual authentication, or in absence of those
        // ask the user in some way to authenticate.

        // Here we just create the user and associated roles directly.

        // Create a handler (kind of directive) to add the caller principal (AKA
        // user principal) "test" (=basically user name, or user id)
        // This will be the name of the principal returned by e.g.
        // HttpServletRequest#getUserPrincipal
        CallerPrincipalCallback callerPrincipalCallback = 
            new CallerPrincipalCallback(clientSubject, "test");

        // Create a handler to add the group (AKA role) "architect"
        // This is what e.g. HttpServletRequest#isUserInRole and @RolesAllowed
        // test for
        GroupPrincipalCallback groupPrincipalCallback = 
            new GroupPrincipalCallback(
                clientSubject, new String[] { "architect" }
            );

        // Execute the handlers we created above. This will typically add the
        // "test" principal and the "architect"
        // role in an application server specific way to the JAAS Subject.
        try {
            handler.handle(new Callback[] { callerPrincipalCallback,
                    groupPrincipalCallback });
        } catch (IOException | UnsupportedCallbackException e) {
            e.printStackTrace();
        }

        return SUCCESS;
    }

    /**
     * A compliant implementation should return HttpServletRequest and
     * HttpServletResponse, so the delegation class {@link ServerAuthContext}
     * can choose the right SAM to delegate to. In this example there is only
     * one SAM and thus the return value actually doesn't matter here.
     */
    @Override
    public Class&lt;?&gt;[] getSupportedMessageTypes() {
        return supportedMessageTypes;
    }

    /**
     * WebLogic 12c calls this before Servlet is called, Geronimo v3 after,
     * JBoss EAP 6 and GlassFish 3.1.2.2 don't call this at all. WebLogic
     * (seemingly) only continues if SEND_SUCCESS is returned, Geronimo
     * completely ignores return value.
     */
    @Override
    public AuthStatus secureResponse(MessageInfo messageInfo,
            Subject serviceSubject) throws AuthException {
        return SEND_SUCCESS;
    }

    @Override
    public void cleanSubject(MessageInfo messageInfo, Subject subject)
            throws AuthException {

    }
}
</pre> 
                      <h2> Step 6 - Setting up declarative security in web.xml </h2> To test our code we first setup a security constraint using web.xml. It will simply require the role 
                      <i>architect</i> for all resources in our web application. 
                      <br> 
                      <pre class="brush: xml; gutter: false">&lt;?xml version="1.0" encoding="UTF-8"?&gt;
&lt;web-app version="3.0" xmlns="http://java.sun.com/xml/ns/javaee"
 xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
 xsi:schemaLocation="http://java.sun.com/xml/ns/javaee http://java.sun.com/xml/ns/javaee/web-app_3_0.xsd"&gt;

 &lt;security-constraint&gt;
  &lt;web-resource-collection&gt;
   &lt;web-resource-name&gt;Test&lt;/web-resource-name&gt;
   &lt;url-pattern&gt;/*&lt;/url-pattern&gt;
  &lt;/web-resource-collection&gt;
  &lt;auth-constraint&gt;
   &lt;role-name&gt;architect&lt;/role-name&gt;
  &lt;/auth-constraint&gt;
 &lt;/security-constraint&gt;

 &lt;security-role&gt;
  &lt;role-name&gt;architect&lt;/role-name&gt;
 &lt;/security-role&gt;

&lt;/web-app&gt;
</pre> 
                      <h2> Step 7 - Setting up the mandatory proprietary descriptors </h2> A very unfortunate and nasty step is that we -have- to setup proprietary deployment descriptors for each container. 
                      <br> 
                      <br> The majority of them (all, except JBoss EAP) don't directly accept the roles that our authentication module puts into the JAAS Subject, but forces us to map them. This necessitates a rather silly and pointless mapping where every time we map 
                      <i>architect</i> to 
                      <i>architect</i>. This will be extra painful when we are building an application that uses say 20 roles and we want to support those 3 servers out of the box. It will mean not less than 60 completely pointless mapping directives have to be added :( 
                      <br> 
                      <br> Two servers require us to specify something that JBoss calls a 
                      <i>domain</i>, but Geronimo calls a 
                      <i>security realm</i>. The idea behind this concept is that it's a kind of alias for a whole slew of security configuration options (typically which authentication modules should be used). Of course, if we're registering our own authentication modules programmatically this is rather pointless as well. JBoss actually seems to want that we modify a file called 
                      <i>domain.xml</i> inside the JBoss installation directory (a horror for portable apps that take care of their own security configuration), but luckily there's already a domain defined there by default that we can use. The problem with these default things in JBoss is that JBoss does like to change them on a whim between (major) releases. Today I found a domain called "other" to be useable, but unfortunately I know from experience this might have another name in the next release. 
                      <br> 
                      <br> Two servers, Geronimo and JBoss also needed extra configuration to work around bugs, where in the case of JBoss this configuration was needed because despite being Java EE 6 certified JBoss seemingly 
                      <a href="https://community.jboss.org/wiki/JBossAS7EnablingJASPIAuthenticationForWebApplications#comment-10018">does not want</a> to make JASPIC available by default; the user has to explicitly activate it. In the case of Geronimo, it was required to specify something called a 
                      <i>moduleId</i>, or otherwise 
                      <i>ClassNotFoundExceptions</i> would be thrown: 
                      <br> 
                      <pre class="brush: xml; gutter: false">java.lang.NoClassDefFoundError: jaspic/TestServerAuthConfig
 at jaspi.TestAuthConfigProvider.getServerAuthConfig(TestAuthConfigProvider.java:50)
 at org.apache.geronimo.tomcat.BaseGeronimoContextConfig.configureSecurity(BaseGeronimoContextConfig.java:177)
 at org.apache.geronimo.tomcat.WebContextConfig.authenticatorConfig(WebContextConfig.java:51)
 at org.apache.geronimo.tomcat.BaseGeronimoContextConfig.configureStart(BaseGeronimoContextConfig.java:116)
</pre> 
                      <br> 
                      <br> WebSphere 8.5 was particularly troublesome here. The example application is a WAR, but the file in which the roles mapping had to be done could only reside in an EAR. So, specifically for WebSphere an extra wrapping EAR had to be created. Even more troublesome was that with WebSphere security it self first had to be activated in a graphical admin console (by default at https://localhost:9043/ibm/console). 
                      <a href="http://stackoverflow.com/questions/12388293/ibm-was-ignoring-security-in-web-xml">It's a well known caveat</a>. After security was activated, JASPIC had to be separately activated as well. There seemed to be an option for this in the proprietary deployment descriptor, but unfortunately this didn't work. Likely this option is there to register a SAM declaratively, and it doesn't do anything without this SAM being given. More precisely the two settings that needed to be changed via the admin console are: 
                      <br> 
                      <ul> 
                       <li><i>Servers -&gt; Server Types -&gt; WebSphere application servers -&gt; Security Domain -&gt; Application Security -&gt; Enable application security</i> </li> 
                       <li><i>Servers -&gt; Server Types -&gt; WebSphere application servers -&gt; Security Domain -&gt; Enable Java Authentication SPI (JASPI)</i></li> 
                      </ul> After that and adding the role mapping, authentication kept failing. The only thing that was logged was: 
                      <i>"SECJ0056E: Authentication failed for reason 
                       <null>
                        "
                       </null></i>, which is a rather poor problem description. After hours of searching, the 
                      <a href="http://pic.dhe.ibm.com/infocenter/wasinfo/v8r5/index.jsp?topic=%2Fcom.ibm.websphere.nd.doc%2Fae%2Ftsec_jaspi_create.html">proprietary alternative to the JASPIC callback handlers</a> hinted at a solution. Namely, most JASPIC handlers are just wrappers around whatever proprietary mechanism the server has or had in place before JASPIC. In this case, the alternative solution asked to "get a unique user id" from some "registry". But how does WebSphere know about these users? As it appeared; creating them via the Admin Console again: 
                      <ul> 
                       <li><i>Users and Groups -&gt; Manage Users -&gt; Create -&gt; [User id = test]</i> </li> 
                       <li><i>Users and Groups -&gt; Manage Groups -&gt; Create -&gt; [Group name = architect]</i></li> 
                      </ul> After this, authentication finally succeeded. However, it's of course undoable to manually add all groups and especially all users to the admin console. How would this even work when users register themselves via the web? Hopefully there's an option somewhere to disable this, but I haven't found it yet. 
                      <br> 
                      <br> When it comes to proprietary stuff, Websphere was clearly the worst offender. Having to mock around with a GUI before the app can run is just not tolerable for the kind of application we're trying to build here. But Geronimo was not innocent either. As it stands Geronimo requires both the "security realm" thing and the role mapping to be specified, as well as some gibberish for working around what seems to be a bug. 
                      <br> 
                      <br> 
                      <b>GlassFish 3.1.2.2</b>
                      <br> WEB-INF/sun-web.xml 
                      <br> 
                      <pre class="brush: xml; gutter: false">&lt;?xml version="1.0" encoding="UTF-8"?&gt;
&lt;!DOCTYPE sun-web-app PUBLIC "-//Sun Microsystems, Inc.//DTD Application Server 9.0 Servlet 2.5//EN" "http://www.sun.com/software/appserver/dtds/sun-web-app_2_5-0.dtd"&gt;
&lt;sun-web-app&gt;

    &lt;security-role-mapping&gt;
        &lt;role-name&gt;architect&lt;/role-name&gt;
        &lt;group-name&gt;architect&lt;/group-name&gt;
    &lt;/security-role-mapping&gt;

&lt;/sun-web-app&gt;
</pre> 
                      <br> 
                      <b>WebOTX 9</b>
                      <br> WEB-INF/nec-web.xml 
                      <br> 
                      <pre class="brush: xml; gutter: false">&lt;?xml version="1.0" encoding="UTF-8"?&gt;
&lt;nec-web-app&gt;

    &lt;security-role-mapping&gt; 
        &lt;role-name&gt;architect&lt;/role-name&gt;
        &lt;group-name&gt;stGroup&lt;/group-name&gt;
    &lt;/security-role-mapping&gt;

&lt;/nec-web-app&gt;
</pre> 
                      <br> 
                      <b>WebLogic 12c (12.1.1)</b>
                      <br> WEB-INF/weblogic.xml 
                      <br> 
                      <pre class="brush: xml; gutter: false">&lt;?xml version = "1.0" encoding = "UTF-8"?&gt;
&lt;weblogic-web-app xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
    xsi:schemaLocation="http://www.bea.com/ns/weblogic/weblogic-web-app.xsd"
    xmlns="http://www.bea.com/ns/weblogic/weblogic-web-app"&gt;

    &lt;security-role-assignment&gt;
        &lt;role-name&gt;architect&lt;/role-name&gt;
        &lt;principal-name&gt;architect&lt;/principal-name&gt;
    &lt;/security-role-assignment&gt;

&lt;/weblogic-web-app&gt;
</pre> 
                      <br> 
                      <b>JEUS 8</b>
                      <br> WEB-INF/jeus-web-dd.xml 
                      <br> 
                      <pre class="brush: xml; gutter: false">&lt;?xml version="1.0"?&gt;
&lt;jeus-web-dd xmlns="http://www.tmaxsoft.com/xml/ns/jeus" version="7.0"&gt;

    &lt;role-mapping&gt;
        &lt;role-permission&gt;
            &lt;role&gt;architect&lt;/role&gt;
            &lt;principal&gt;architect&lt;/principal&gt;
        &lt;/role-permission&gt;
    &lt;/role-mapping&gt;

&lt;/jeus-web-dd&gt;
</pre> 
                      <br> 
                      <b>WebSphere 8.5</b>
                      <br> [EAR]/META-INF/ibm-application-bnd.xml 
                      <br> 
                      <pre class="brush: xml; gutter: false">&lt;?xml version="1.0" encoding="UTF-8"?&gt;
&lt;application-bnd xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
    xsi:schemaLocation="http://websphere.ibm.com/xml/ns/javaee http://websphere.ibm.com/xml/ns/javaee/ibm-application-bnd_1_1.xsd"
    xmlns="http://websphere.ibm.com/xml/ns/javaee"
    version="1.1"&gt;

    &lt;security-role name="architect"&gt; 
        &lt;group name="architect" /&gt;
    &lt;/security-role&gt;
    
&lt;/application-bnd&gt;
</pre> 
                      <br> 
                      <b>Geronimo v3.0</b>
                      <br> WEB-INF/geronimo-web.xml 
                      <br> 
                      <pre class="brush: xml; gutter: false">&lt;?xml version="1.0" encoding="UTF-8" standalone="no"?&gt;
&lt;web:web-app 
    xmlns:dep="http://geronimo.apache.org/xml/ns/deployment-1.2" 
    xmlns:sec="http://geronimo.apache.org/xml/ns/security-2.0" 
    xmlns:web="http://geronimo.apache.org/xml/ns/j2ee/web-2.0.1"
&gt;
    
    &lt;dep:environment&gt;
        &lt;dep:moduleId&gt;
            &lt;dep:groupId&gt;default&lt;/dep:groupId&gt;
            &lt;dep:artifactId&gt;jaspic&lt;/dep:artifactId&gt;
            &lt;dep:version&gt;1.0&lt;/dep:version&gt;
        &lt;/dep:moduleId&gt;
    &lt;/dep:environment&gt;
      
    &lt;web:security-realm-name&gt;geronimo-admin&lt;/web:security-realm-name&gt;
    
    &lt;sec:security&gt;
        &lt;sec:role-mappings&gt;
            &lt;sec:role role-name="architect"&gt;
                &lt;sec:principal 
                    class="org.apache.geronimo.security.realm.providers.GeronimoGroupPrincipal"
                    name="architect" 
                /&gt;
            &lt;/sec:role&gt;
        &lt;/sec:role-mappings&gt;
    &lt;/sec:security&gt;
    
&lt;/web:web-app&gt;
</pre> 
                      <br> 
                      <b>JBoss EAP 6.0.0.GA </b>
                      <br> WEB-INF/jboss-web.xml 
                      <br> 
                      <pre class="brush: xml; gutter: false">&lt;?xml version="1.0"?&gt;
&lt;jboss-web&gt;
    &lt;security-domain&gt;other&lt;/security-domain&gt;
    &lt;valve&gt;
        &lt;class-name&gt;patch.jboss.WebJASPIAuthenticator&lt;/class-name&gt;
    &lt;/valve&gt;
&lt;/jboss-web&gt;
</pre> 
                      <i><small>(note that for JBoss EAP/AS normally <i>jaspi.WebJASPIAuthenticator</i> is used to activate it)</small></i>.
                      <br> 
                      <br> 
                      <b>JBoss WildFly 10.0.0.Final </b>
                      <br> WEB-INF/jboss-web.xml 
                      <br> 
                      <pre class="brush: xml; gutter: false">&lt;?xml version="1.0"?&gt;
&lt;jboss-web&gt;
    &lt;security-domain&gt;jaspitest&lt;/security-domain&gt;
&lt;/jboss-web&gt;
</pre> 
                      <i><small>(UPDATE: See <a href="http://arjan-tijms.omnifaces.org/2015/08/activating-jaspic-in-jboss-wildfly.html">Activating JASPIC in JBoss WildFly</a> for other WildFly versions)</small></i>
                      <br> 
                      <br> It's amazing really how the exact same nonsense mapping of 
                      <i>architect</i> to 
                      <i>architect</i> can be expressed in so many nearly identical but still different ways. 
                      <br>
                      <br> 
                      <h2> Step 8 - Implementing a test Servlet </h2> In order to test that a request is getting authenticated, we also need an actual resource. For this I used a simple Servlet that just prints the name of the caller principal. Note that should the authentication module fail to put a caller principal into the JAAS Subject, this will result in a 
                      <i>NullPointerException</i>. 
                      <br> 
                      <pre class="brush: java; gutter: false">@WebServlet(urlPatterns = "/servlet")
public class TestServlet extends HttpServlet {

    private static final long serialVersionUID = 1L;

    @Override
    public void doGet(HttpServletRequest request, HttpServletResponse response)
            throws ServletException, IOException {
        
        response.getWriter().write(
            "Username " + request.getUserPrincipal().getName()
        );
    }

}
</pre> 
                      <br> 
                      <h2> Step 9 - Working around bugs </h2> Of the 4 servers tested, 2 of them have severe bugs that make the sample authentication module and programmatic registration as shown above unusable. 
                      <br> 
                      <br> JBoss AS 7.1.1 and JBoss EAP 6 ignore the 
                      <a href="http://docs.oracle.com/javaee/6/api/javax/security/auth/message/callback/GroupPrincipalCallback.html">GroupPrincipalCallback</a>, which makes it impossible to assign any roles. The way the code is setup a not yet mentioned callback, the 
                      <a href="http://docs.oracle.com/javaee/6/api/javax/security/auth/message/callback/PasswordValidationCallback.html">PasswordValidationCallback</a>, happens to be required even though the JASPIC spec does not require this one to be used at all. I reported 
                      <a href="https://issues.jboss.org/browse/AS7-5735">this issue</a> in June 2012 along with a proposal for a fix. Since then, the issue has been 
                      <a href="https://issues.jboss.org/browse/JBPAPP-10225">cloned</a>, and the patch I proposed was committed around half Oktober of that year. Unfortunately, it wasn't included in JBoss EAP 6.0.1/JBoss AS 7.1.3.Final-redhat-4 that was released the following December, but instead is slated for JBoss AS 7.2 and JBoss AS 7.1.4. It might still take a considerable amount of time before any of those two is released. Since the bug appears in a 
                      <a href="http://grepcode.com/file/repository.jboss.org/nexus/content/repositories/releases/org.jboss.web/jbossweb/7.0.16.Final/org/apache/catalina/Valve.java#Valve">Tomcat Valve</a>, which is the class we explicitly reference in 
                      <i>jboss-web.xml</i> it's relatively easy to patch ourselves. 
                      <br> 
                      <br> Geronimo v3.0 needs the extra gibberish in 
                      <i>geronimo-web.xml</i>, in order to prevent various class not found exceptions. Unfortunately, JASPIC authentication still doesn't work after that. It seems that if a web application registers a JASPIC authentication module, then this registration doesn't take effect for that application itself. In order to make this work we need to start up Geronimo with the app in question deployed, then undeploy the app while the server is still running and immediately deploy it again. After this sequence JASPIC authentication works correctly. An issue for this has been created at 
                      <a href="https://issues.apache.org/jira/browse/GERONIMO-6423">https://issues.apache.org/jira/browse/GERONIMO-6423</a>
                      <br> 
                      <br> 
                      <br> 
                      <h2> Step 10 - Taking behavioral differences into account </h2> With respect to the life-cycle of an authentication module and interaction with the rest of the Java platform, no two servers of the ones tested behaved exactly the same. 
                      <br> 
                      <br> For all application servers, the authentication module was invoked when a protected resource (the 
                      <i>TestServlet</i> from our example) was invoked. This is a good thing, otherwise JASPIC wouldn't be working at all. However, there was no universal agreement on what to do with non-protected resources. JBoss EAP didn't call the SAM in this case, but all other servers did. After an initial successful authentication (e.g. 
                      <i>request.getUserPrincipal()</i> subsequently returns a non-null value during the same request), the behavior differed with respect to the follow-up request. JBoss EAP would remember the full authentication, and would not call the SAM again until either the session expired or an explicit call to 
                      <i>request#logout</i> was made. All other servers did call the SAM again. In case we didn't re-authenticate again, then WebLogic would still remember the principal (
                      <i>request.getUserPrincipal()</i> would return the one for which we authenticated), but accessing protected resources for which the authenticated principal has the correct roles was still not allowed. GlassFish and Geronimo both didn't remember a single thing. 
                      <br> 
                      <br> As for accessing environmental Java EE resources, in both JBoss EAP and Geronimo it was possible to request the CDI bean manager from the standardized "java:comp/" JNDI namespace. GlassFish and WebLogic would throw binding exceptions here. When the SAM was called at the initial point during a request (before Servlet Filters are invoked) then in JBoss EAP the CDI request and session scope were already active. In GlassFish the scope seemed to be active, but when requesting a bean reference (after obtaining the bean manager via a globally accessible EJB), a scary warning was logged: 
                      <i>"SEVERE: No valid EE environment for injection of ..."</i>. In WebLogic the mentioned contexts definitely weren't active and context not active exceptions were thrown. Geronimo was hard to test at this point, since the SAM seemingly runs in a different class loader. Things changed when 
                      <i>request#authenticate</i> was called from e.g. a JSF managed bean. In that case the SAM was invoked, and for most servers the CDI scopes simply remained active. Judging from the call stack between the 
                      <i>authenticate()</i> call and the invocation of the SAM, the CDI scopes are most likely also still active for Geronimo, but because of the class loader issues this was again hard to test. 
                      <br> 
                      <br> Which brings us to our last point; for all servers the SAM that was embedded and installed by the application would run with the same class loaders as said application, except for Geronimo. Remembering that we needed the trick with the deploy/undeploy/deploy cycle, this perhaps doesn't come as a surprise. 
                      <br> 
                      <br> To summarize, with respect to calls to the 
                      <i>validateRequest()</i> method of an authentication module, the following differences were observed: 
                      <br> 
                      <br> 
                      <small> 
                       <table border="1"> 
                        <tbody>
                         <tr> 
                          <th></th> 
                          <th> JBoss EAP</th> 
                          <th>GlassFish</th> 
                          <th>WebLogic</th> 
                          <th>Geronimo</th> 
                          <th>WebSphere</th> 
                         </tr>
                         <tr> 
                          <td>Invokes SAM for protected resources </td>
                          <td>V</td>
                          <td>V</td>
                          <td>V</td>
                          <td>V</td>
                          <td>V</td> 
                         </tr> 
                         <tr> 
                          <td>Invokes SAM for non-protected resources </td>
                          <td>X / V <small>(with optional valve)</small></td>
                          <td>V</td>
                          <td>V</td>
                          <td>V</td>
                          <td>V</td> 
                         </tr> 
                         <tr> 
                          <td>Invokes SAM after authentication </td>
                          <td>X</td>
                          <td>V</td>
                          <td>V</td>
                          <td>V</td>
                          <td>V</td> 
                         </tr> 
                         <tr> 
                          <td>CallerPrincipalCallback accepts any name </td>
                          <td>V</td>
                          <td>V</td>
                          <td>V</td>
                          <td>V</td>
                          <td>X <small>(demands name to be known upfront via admin console)</small></td> 
                         </tr> 
                         <tr> 
                          <td>GroupPrincipalCallback accepts any name </td>
                          <td>V</td>
                          <td>V</td>
                          <td>V</td>
                          <td>V</td>
                          <td>X <small>(demands name to be known upfront via admin console)</small></td> 
                         </tr> 
                         <tr> 
                          <td><small>javax.security.auth.message.MessagePolicy.isMandatory = false</small> in MessageInfo Map for non-protected resources</td>
                          <td>V <small>(with optional valve)</small></td>
                          <td>X</td>
                          <td>X</td>
                          <td>X</td>
                          <td>V</td> 
                         </tr> 
                         <tr> 
                          <td>requestDispatcher.forward works </td>
                          <td>X 
                           <div style="text-align:left">
                            <small>(but works with proprietary request#getRequest)</small>
                           </div></td>
                          <td>V</td>
                          <td>X 
                           <div style="text-align:left;align:left">
                            <small>(works when CDI is <b>not</b> enabled)</small>
                           </div></td>
                          <td>V</td>
                          <td>V/X 
                           <div style="text-align:left;align:left">
                            <small>(effectively works, but exception is logged)</small>
                           </div></td> 
                         </tr> 
                         <tr> 
                          <td><small>ValidateRequest can set wrapped request in MessageInfo</small></td>
                          <td>X</td>
                          <td>X 
                           <div style="text-align:left">
                            <small>(almost works, tiny bug prevents it from actually working)</small>
                           </div></td>
                          <td>X</td>
                          <td>X</td>
                          <td>X</td> 
                         </tr> 
                         <tr> 
                          <td>SAM method called after request#logout</td>
                          <td>X</td>
                          <td>X</td>
                          <td>X</td>
                          <td>V <small>(cleanSubject())</small></td>
                          <td>X</td> 
                         </tr> 
                         <tr> 
                          <td>Remembers authentication for request.userPrincipal </td>
                          <td>V</td>
                          <td>X</td>
                          <td>V</td>
                          <td>X</td>
                          <td>X</td> 
                         </tr> 
                         <tr> 
                          <td>Remembers authentication for protected resources </td>
                          <td>V</td>
                          <td>X</td>
                          <td>X</td>
                          <td>X</td>
                          <td>X</td> 
                         </tr> 
                         <tr> 
                         </tr>
                         <tr> 
                          <td>appContext for web module "app" </td>
                          <td><small>[getLocalName] /app</small></td>
                          <td><small>server /app</small></td>
                          <td><small>server /app</small></td>
                          <td><small>server /app</small></td>
                          <td><small>default_host /app</small></td> 
                         </tr> 
                         <tr> 
                          <td>"java:comp/" available in SAM </td>
                          <td>V</td>
                          <td>X</td>
                          <td>X</td>
                          <td>V</td>
                          <td></td> 
                         </tr> 
                         <tr> 
                          <td>CDI request/session scope active in SAM (start of request) </td>
                          <td>V</td>
                          <td>V/X</td>
                          <td>X</td>
                          <td>X/?</td>
                          <td></td> 
                         </tr> 
                         <tr> 
                          <td>CDI request/session scope active in SAM (after authenticate call) </td>
                          <td>V</td>
                          <td>V</td>
                          <td>V</td>
                          <td>X/?</td>
                          <td></td> 
                         </tr> 
                         <tr> 
                          <td>Embedded SAM has same class loader as App </td>
                          <td>V</td>
                          <td>V</td>
                          <td>V</td>
                          <td>X</td>
                          <td></td> 
                         </tr> 
                        </tbody>
                       </table> <br> <i>Please note that an <em>X</em> doesn't mean "bad" in all cases. For instance "Remembers authentication" should NOT be done according to the JASPIC spec, so here a <em>X</em> means "good".</i> <br> </small> 
                      <br> 
                      <h3> Source code </h3> The full example source code can be obtained from 
                      <a href="https://github.com/arjantijms/javaee6-auth-example">Google code</a>. 
                      <br> 
                      <br> 
                      <h3> Update </h3> As of August 2015, the situation regarding implementation differences and bugs has considerably improved. 
                      <i>requestDispatcher#forward</i> and 
                      <i>request#logout</i> are now mandated by the spec to be supported, and wrapping the request (and response) which at the time this article was written didn't work with a single server now works everywhere. Furthermore, WebLogic doesn't require the mandatory role mapping anymore. In 2016 Payara, JBoss/WildFly and Liberty were 
                      <a href="http://arjan-tijms.omnifaces.org/2016/01/java-ee-7-server-liberty-9-beta-20161.html">re-tested</a>. GlassFish and WebLogic were additionally 
                      <a href="http://arjan-tijms.omnifaces.org/2015/11/the-state-of-portable-authentication.html">re-tested</a> end 2015. 
                      <br> 
                      <br> 
                      <h3> Conclusion </h3> 
                      <br> JASPIC is one of those things that should have been there relatively early (e.g. for J2EE 1.4 if the original timeline would have hold). By now it could have had its ease-of-use treatment in Java EE 5 and subsequent tuning in Java EE 6. Vendors then might not have had the ~10 years worth of their own proprietary technology in place, which perhaps is currently one of the reasons not all of them are embracing JASPIC beyond what the spec mandates. 
                      <br> 
                      <br> Originally a JASPIC 1.1 
                      <a href="http://www.slideshare.net/marakana/overview-of-java-ee-6-by-roberto-chinnici-at-sfjug">seemed to have been planned</a> for Java EE 6, but eventually this turned into a smaller maintenance release. Given the various issues outlined above, a true JASPIC 1.1 for Java EE 7 would still be very welcome, but as Java EE 7 is nearing completion and to the best of my knowledge no such work has been started, the chance that we'll see any improvements in the short term are slim. 
                      <br> 
                      <br> As it stands, JASPIC is not very well known among users and not universally embraced by vendors. Some users that do know JASPIC find it a "
                      <a href="http://code.google.com/p/authenticroast">little technical</a>". Where unfortunately some vendors go as far as to call it "
                      <a href="http://wiki.caucho.com/Resin_Java_EE_6_Web_Profile">bloated</a>", other vendors are waiting for more "
                      <a href="https://community.jboss.org/wiki/JBossAS7EnablingJASPIAuthenticationForWebApplications#comment-10018">widespread adoption</a>" before fully embracing it (which is a kind of chicken-and-egg problem).
                      <br> 
                      <br> Despite all this doom and gloom, the fact is that JASPIC -is- here and it really does offer a good portable way to integrate with container authentication. The bugs that are currently pressent in some implementations can of course be fixed and since the API is standardized there's nothing stopping a third party library to offer some convenience utilities that make things a little easier for 'casual' users (like we also see for e.g. JSF and JPA). 
                      <br> 
                      <br> All JASPIC really needs now is just that extra little push. 
                      <br> 
                      <br> 
                      <i>Arjan Tijms</i>
                      <br> 
                      <br> 
                      <br> 
                     </div> Further reading:
                     <br> See my 
                     <a href="https://jaspic.zeef.com/arjan.tijms">ZEEF page about JASPIC</a>. 
                     <div style="clear: both;"></div> 
                    </div> 
                    <div class="post-footer"> 
                     <div class="post-footer-line post-footer-line-1">
                      <span class="post-author vcard"> Posted by <span class="fn" itemprop="author" itemscope itemtype="http://schema.org/Person"> 
                        <meta content="https://plus.google.com/104480612998561613961" itemprop="url"> 
                        <meta content="4498889353428710313" itemprop="articleBody/aiaBlogId"> 
                        <meta content="422402323853605005" itemprop="articleBody/aiaPostId"> <a href="https://plus.google.com/104480612998561613961" rel="author" title="author profile"> <span itemprop="name">Arjan Tijms</span> </a> </span> </span> 
                      <span class="post-timestamp"> at 
                       <meta content="http://arjan-tijms.omnifaces.org/2012/11/implementing-container-authentication.html" itemprop="url"> <a class="timestamp-link" href="http://arjan-tijms.omnifaces.org/2012/11/implementing-container-authentication.html" rel="bookmark" title="permanent link"><abbr class="published" itemprop="datePublished" title="2012-11-07T11:29:00-08:00">11:29 AM</abbr></a> </span> 
                      <span class="post-comment-link"> </span> 
                      <span class="post-icons"> <span class="item-control blog-admin pid-1107289781"> <a href="https://www.blogger.com/post-edit.g?blogID=4498889353428710313&amp;postID=422402323853605005&amp;from=pencil" title="Edit Post"> <img alt="" class="icon-action" height="18" src="https://resources.blogblog.com/img/icon18_edit_allbkg.gif" width="18"> </a> </span> </span> 
                      <div class="post-share-buttons goog-inline-block"> 
                       <a class="goog-inline-block share-button sb-email" href="https://www.blogger.com/share-post.g?blogID=4498889353428710313&amp;postID=422402323853605005&amp;target=email" target="_blank" title="Email This"><span class="share-button-link-text">Email This</span></a>
                       <a class="goog-inline-block share-button sb-blog" href="https://www.blogger.com/share-post.g?blogID=4498889353428710313&amp;postID=422402323853605005&amp;target=blog" onclick="window.open(this.href, &quot;_blank&quot;, &quot;height=270,width=475&quot;); return false;" target="_blank" title="BlogThis!"><span class="share-button-link-text">BlogThis!</span></a>
                       <a class="goog-inline-block share-button sb-twitter" href="https://www.blogger.com/share-post.g?blogID=4498889353428710313&amp;postID=422402323853605005&amp;target=twitter" target="_blank" title="Share to Twitter"><span class="share-button-link-text">Share to Twitter</span></a>
                       <a class="goog-inline-block share-button sb-facebook" href="https://www.blogger.com/share-post.g?blogID=4498889353428710313&amp;postID=422402323853605005&amp;target=facebook" onclick="window.open(this.href, &quot;_blank&quot;, &quot;height=430,width=640&quot;); return false;" target="_blank" title="Share to Facebook"><span class="share-button-link-text">Share to Facebook</span></a>
                       <a class="goog-inline-block share-button sb-pinterest" href="https://www.blogger.com/share-post.g?blogID=4498889353428710313&amp;postID=422402323853605005&amp;target=pinterest" target="_blank" title="Share to Pinterest"><span class="share-button-link-text">Share to Pinterest</span></a>
                       <div class="goog-inline-block google-plus-share-container">
                        <g:plusone source="blogger:blog:plusone" href="http://arjan-tijms.omnifaces.org/2012/11/implementing-container-authentication.html" size="medium" width="300" annotation="inline" />
                       </div> 
                      </div> 
                     </div> 
                     <div class="post-footer-line post-footer-line-2">
                      <span class="post-labels"> </span> 
                     </div> 
                     <div class="post-footer-line post-footer-line-3">
                      <span class="post-location"> </span> 
                     </div> 
                    </div> 
                   </div> 
                   <div class="comments" id="comments"> 
                    <a name="comments"></a> 
                    <h4>65 comments:</h4> 
                    <div class="comments-content"> 
                     <script async src="//www.blogblog.com/dynamicviews/4224c15c4e7c9321/js/comments.js" type="text/javascript"></script> 
                     <script type="text/javascript">
    (function() {
      var items = [{'id': '1489399615392991080', 'body': 'Arjan,\x3cbr /\x3e\x3cbr /\x3egreat post! I\x26#39;m using your example code in a EE7/glassfish 4 environment. \x3cbr /\x3e\x3cbr /\x3eYou say to set up the security-constraint in web.xml.\x3cbr /\x3eI tried to restrict the constraint to a certain part of the application (say url-pattern \x3d /admin/*). Still validateRequest in the SAM is called for every request even when its not a restricted (admin) resource. \x3cbr /\x3e\x3cbr /\x3eAnd idea?\x3cbr /\x3e\x3cbr /\x3eThanks\x3cbr /\x3eChristian', 'timestamp': '1379580921652', 'permalink': 'http://arjan-tijms.omnifaces.org/2012/11/implementing-container-authentication.html?showComment\x3d1379580921652#c1489399615392991080', 'author': {'name': 'Noone', 'avatarUrl': '//lh3.googleusercontent.com/Rw_wdkZHfDXh8tDEBFF1Q3aSS_nDE-gMVWNfOHb7a2nIp2XuWAmJyGISHv9akZE\x3ds35', 'profileUrl': 'https://me.yahoo.com/chs_digitalvitamin'}, 'displayTime': 'September 19, 2013 at 1:55 AM', 'deleteclass': 'item-control blog-admin pid-558891391'}, {'id': '4617974601832150271', 'body': '\x26gt;Still validateRequest in the SAM is called for every request even when its not a \x26gt;restricted (admin) resource. \x3cbr /\x3e\x3cbr /\x3e\x26gt;And idea?\x3cbr /\x3e\x3cbr /\x3eYes, this is the intended behavior of JASPIC. validateRequest should be called for every request, independent of whether the request is to a protected resource and independent of whether the user is logged-in or not.\x3cbr /\x3e\x3cbr /\x3eThis feature is very important, since it allows a SAM to e.g. automatically log you in when you go the public home page of a site based on say a cookie. This is called preemptive authentication.\x3cbr /\x3e\x3cbr /\x3eIf the request is to a protected resource, the SAM has to do authentication, otherwise it can opt to \x26quot;do nothing\x26quot;. You can check if the request is to a protected resource via the following code:\x3cbr /\x3e\x3cbr /\x3eBoolean.valueOf((String) messageInfo.getMap().get(IS_MANDATORY));\x3cbr /\x3e\x3cbr /\x3e\x3cbr /\x3eAlso see http://code.google.com/p/omnisecurity/source/browse/src/org/omnifaces/security/jaspic/Jaspic.java#179\x3cbr /\x3e', 'timestamp': '1379594429544', 'permalink': 'http://arjan-tijms.omnifaces.org/2012/11/implementing-container-authentication.html?showComment\x3d1379594429544#c4617974601832150271', 'author': {'name': 'Arjan Tijms', 'avatarUrl': '//lh5.googleusercontent.com/-Fsb6YxLG-5Q/AAAAAAAAAAI/AAAAAAAAACY/8H8WPYh2OT8/s35-c/photo.jpg', 'profileUrl': 'https://www.blogger.com/profile/08548593340781885396'}, 'displayTime': 'September 19, 2013 at 5:40 AM', 'deleteclass': 'item-control blog-admin pid-1107289781'}, {'id': '1008502261948612851', 'body': 'Great article. Really helpful. Thanks!', 'timestamp': '1383744603762', 'permalink': 'http://arjan-tijms.omnifaces.org/2012/11/implementing-container-authentication.html?showComment\x3d1383744603762#c1008502261948612851', 'author': {'name': 'daron_', 'avatarUrl': '//lh3.googleusercontent.com/zFdxGE77vvD2w5xHy6jkVuElKv-U9_9qLkRYK8OnbDeJPtjSZ82UPq5w6hJ-SA\x3ds35', 'profileUrl': 'https://www.blogger.com/profile/00824738232304542734'}, 'displayTime': 'November 6, 2013 at 5:30 AM', 'deleteclass': 'item-control blog-admin pid-1552735461'}, {'id': '2698548455123046551', 'body': 'What are the pros/cons of using a ServerAuthModule over an AppServPasswordLoginModule?', 'timestamp': '1390228391876', 'permalink': 'http://arjan-tijms.omnifaces.org/2012/11/implementing-container-authentication.html?showComment\x3d1390228391876#c2698548455123046551', 'author': {'name': 'me', 'avatarUrl': '//lh3.googleusercontent.com/zFdxGE77vvD2w5xHy6jkVuElKv-U9_9qLkRYK8OnbDeJPtjSZ82UPq5w6hJ-SA\x3ds35', 'profileUrl': 'https://www.blogger.com/profile/18159411522912529606'}, 'displayTime': 'January 20, 2014 at 6:33 AM', 'deleteclass': 'item-control blog-admin pid-383034757'}, {'id': '2660589250365012464', 'parentId': '2698548455123046551', 'body': '\x26gt;What are the pros/cons of using a ServerAuthModule over an AppServPasswordLoginModule?\x3cbr /\x3e\x3cbr /\x3eThe ServerAuthModule is a standardized type. It works on all Java EE servers, like JBoss, GlassFish, JEUS, WebLogic, WebSphere, Geronimo, etc. \x3cbr /\x3e\x3cbr /\x3eWith AppServPasswordLoginModule I guess you mean com.sun.appserv.security.AppservPasswordLoginModule. This is a GlassFish specific type that thus only works on GlassFish.\x3cbr /\x3e\x3cbr /\x3eIf you know how to write such module you can\x26#39;t use that same knowledge to implement a similar module on JBoss; you have to relearn from scratch how to do it.\x3cbr /\x3e\x3cbr /\x3e', 'timestamp': '1390229680485', 'permalink': 'http://arjan-tijms.omnifaces.org/2012/11/implementing-container-authentication.html?showComment\x3d1390229680485#c2660589250365012464', 'author': {'name': 'Arjan Tijms', 'avatarUrl': '//lh5.googleusercontent.com/-Fsb6YxLG-5Q/AAAAAAAAAAI/AAAAAAAAACY/8H8WPYh2OT8/s35-c/photo.jpg', 'profileUrl': 'https://www.blogger.com/profile/08548593340781885396'}, 'displayTime': 'January 20, 2014 at 6:54 AM', 'deleteclass': 'item-control blog-admin pid-1107289781'}, {'id': '5767806915717291138', 'parentId': '2698548455123046551', 'body': 'Arjan, thanks, and also really informative article! For the sake of argument, let\x26#39;s say I commit to using Glassfish, is there a good argument to using one technique over the other?', 'timestamp': '1390230691132', 'permalink': 'http://arjan-tijms.omnifaces.org/2012/11/implementing-container-authentication.html?showComment\x3d1390230691132#c5767806915717291138', 'author': {'name': 'me', 'avatarUrl': '//lh3.googleusercontent.com/zFdxGE77vvD2w5xHy6jkVuElKv-U9_9qLkRYK8OnbDeJPtjSZ82UPq5w6hJ-SA\x3ds35', 'profileUrl': 'https://www.blogger.com/profile/18159411522912529606'}, 'displayTime': 'January 20, 2014 at 7:11 AM', 'deleteclass': 'item-control blog-admin pid-383034757'}, {'id': '275889729634407877', 'body': 'Hi Arjan Tijms, \x3cbr /\x3eI\x26#39;m having this exact problem below. Could you help me?\x3cbr /\x3e\x3cbr /\x3ehttp://stackoverflow.com/questions/19731679/how-to-obtain-httpservletrequest-in-appservpasswordloginmodule-ssl', 'timestamp': '1397153421742', 'permalink': 'http://arjan-tijms.omnifaces.org/2012/11/implementing-container-authentication.html?showComment\x3d1397153421742#c275889729634407877', 'author': {'name': 'Everton da Silva Barros', 'avatarUrl': '//lh3.googleusercontent.com/zFdxGE77vvD2w5xHy6jkVuElKv-U9_9qLkRYK8OnbDeJPtjSZ82UPq5w6hJ-SA\x3ds35', 'profileUrl': 'https://www.blogger.com/profile/16608967607772047959'}, 'displayTime': 'April 10, 2014 at 11:10 AM', 'deleteclass': 'item-control blog-admin pid-665836256'}, {'id': '2128960366936010506', 'parentId': '275889729634407877', 'body': 'I\x26#39;m afraid I can\x26#39;t really help you with that. As you may have noticed I mainly write about Java EE standard auth modules and thus have little or no experience with login modules that are proprietary for a specific container.\x3cbr /\x3e\x3cbr /\x3eWhen you use a JASPIC auth module instead of the GlassFish proprietary mechanism you already get the HttpServletRequest instance, so you might want to look at that.\x3cbr /\x3e', 'timestamp': '1397237024210', 'permalink': 'http://arjan-tijms.omnifaces.org/2012/11/implementing-container-authentication.html?showComment\x3d1397237024210#c2128960366936010506', 'author': {'name': 'Arjan Tijms', 'avatarUrl': '//lh5.googleusercontent.com/-Fsb6YxLG-5Q/AAAAAAAAAAI/AAAAAAAAACY/8H8WPYh2OT8/s35-c/photo.jpg', 'profileUrl': 'https://www.blogger.com/profile/08548593340781885396'}, 'displayTime': 'April 11, 2014 at 10:23 AM', 'deleteclass': 'item-control blog-admin pid-1107289781'}, {'id': '3406719145587637861', 'body': 'Hi Arjan Tijms,\x3cbr /\x3e\x3cbr /\x3eWould be possible to implement a ServerAuthModule which accepts multiple login methods, let\x26#39;s say username/password or Oauth?\x3cbr /\x3e\x3cbr /\x3eDo you mind point me on the right direction?\x3cbr /\x3e\x3cbr /\x3eThanks,\x3cbr /\x3eBruno', 'timestamp': '1405108411292', 'permalink': 'http://arjan-tijms.omnifaces.org/2012/11/implementing-container-authentication.html?showComment\x3d1405108411292#c3406719145587637861', 'author': {'name': 'Bruno Palermo', 'avatarUrl': '//lh3.googleusercontent.com/zFdxGE77vvD2w5xHy6jkVuElKv-U9_9qLkRYK8OnbDeJPtjSZ82UPq5w6hJ-SA\x3ds35', 'profileUrl': 'https://www.blogger.com/profile/08110659389324802906'}, 'displayTime': 'July 11, 2014 at 12:53 PM', 'deleteclass': 'item-control blog-admin pid-506152976'}, {'id': '1643855699359487801', 'parentId': '3406719145587637861', 'body': 'Theoretically yes. A ServerAuthModule is a very low level thing and can basically do anything. It gets called by the container at the start of an HTTP request, and what code it runs itself or what other code it calls is completely up to the module.\x3cbr /\x3e\x3cbr /\x3eWhen an authentication (login) has eventually happened by whatever mechanism(s), the ServerAuthModule communicates the username and roles to the container. The container naturally should not know nor care where this username and these roles were obtained from.\x3cbr /\x3e\x3cbr /\x3eWhen you do multiple login methods, you yourself have to keep track though of what method was used. If the login is a multi-step thing you have to remember somewhere (e.g. in the session) which method is currently being used (or tried, if you execute multiple ones in sequence).\x3cbr /\x3e\x3cbr /\x3eBecause JASPIC is such a low-level mechanism there\x26#39;s barely any higher level API to help you with this task, you have to do it yourself. The only thing that\x26#39;s there is that the ServerAuthModule should more or less implement 1 method only, while the ServerAuthContext (see example in the article) should be the place where you manage multiple ServerAuthModules (but the container can\x26#39;t enforce this and it\x26#39;s up to you whether you use this specific devision of responsibilities).\x3cbr /\x3e\x3cbr /\x3eI\x26#39;ve been working on and off on a library that provides some of this higher level functionality, and does indeed allow you to choose between various mechanism. It\x26#39;s however not entirely polished yet and a bit difficult to learn from, but maybe it\x26#39;s useful for you anyway: https://github.com/omnifaces/omnisecurity\x3cbr /\x3e', 'timestamp': '1405114009225', 'permalink': 'http://arjan-tijms.omnifaces.org/2012/11/implementing-container-authentication.html?showComment\x3d1405114009225#c1643855699359487801', 'author': {'name': 'Arjan Tijms', 'avatarUrl': '//lh5.googleusercontent.com/-Fsb6YxLG-5Q/AAAAAAAAAAI/AAAAAAAAACY/8H8WPYh2OT8/s35-c/photo.jpg', 'profileUrl': 'https://www.blogger.com/profile/08548593340781885396'}, 'displayTime': 'July 11, 2014 at 2:26 PM', 'deleteclass': 'item-control blog-admin pid-1107289781'}, {'id': '8203743265534762165', 'parentId': '3406719145587637861', 'body': 'Arjan,\x3cbr /\x3e\x3cbr /\x3eThanks for the reply. I\x26#39;ve been reading about Login context in JAAS:\x3cbr /\x3e\x3cbr /\x3ehttp://docs.oracle.com/javase/7/docs/technotes/guides/security/jgss/tutorials/AcnOnly.html\x3cbr /\x3e\x3cbr /\x3eDo you think it might be a way to do it?\x3cbr /\x3e\x3cbr /\x3eThanks,\x3cbr /\x3e\x3cbr /\x3eBruno Palermo', 'timestamp': '1405429464507', 'permalink': 'http://arjan-tijms.omnifaces.org/2012/11/implementing-container-authentication.html?showComment\x3d1405429464507#c8203743265534762165', 'author': {'name': 'Bruno Palermo', 'avatarUrl': '//lh3.googleusercontent.com/zFdxGE77vvD2w5xHy6jkVuElKv-U9_9qLkRYK8OnbDeJPtjSZ82UPq5w6hJ-SA\x3ds35', 'profileUrl': 'https://www.blogger.com/profile/08110659389324802906'}, 'displayTime': 'July 15, 2014 at 6:04 AM', 'deleteclass': 'item-control blog-admin pid-506152976'}, {'id': '1077002574062337140', 'parentId': '3406719145587637861', 'body': '\x26gt;Do you think it might be a way to do it?\x3cbr /\x3e\x3cbr /\x3eUnfortunately not. As I\x26#39;ve explained in the article and which is even better explained by Raymond K. NG (see references above), Java EE does not automatically know about JAAS.\x3cbr /\x3e\x3cbr /\x3eUsing the Login Context will NOT communicate anything to the Java EE container. There is no automatic connection whatsoever between the JAAS Login Context and Java EE.\x3cbr /\x3e\x3cbr /\x3eJust think of it as implementing your own class, e.g.:\x3cbr /\x3e\x3cbr /\x3epublic class MyLogin {\x3cbr /\x3e    public boolean login;\x3cbr /\x3e}\x3cbr /\x3e\x3cbr /\x3eThen you execute:\x3cbr /\x3e\x3cbr /\x3eMyLogin myLogin \x3d new MyLogin()\x3cbr /\x3emyLogin.login \x3d true;\x3cbr /\x3e\x3cbr /\x3eNow you\x26#39;re logged-in according to the instance of the MyLogin class, but of course it\x26#39;s trivial to see that setting this boolean to true does nothing for Java EE. It\x26#39;s exactly the same with JAAS.\x3cbr /\x3e\x3cbr /\x3eIn order to communicate the login details from a JAAS LoginModule to Java EE a connecting thing is needed. This thing is JASPIC, which is the topic of this article ;)\x3cbr /\x3e', 'timestamp': '1405438296833', 'permalink': 'http://arjan-tijms.omnifaces.org/2012/11/implementing-container-authentication.html?showComment\x3d1405438296833#c1077002574062337140', 'author': {'name': 'Arjan Tijms', 'avatarUrl': '//lh5.googleusercontent.com/-Fsb6YxLG-5Q/AAAAAAAAAAI/AAAAAAAAACY/8H8WPYh2OT8/s35-c/photo.jpg', 'profileUrl': 'https://www.blogger.com/profile/08548593340781885396'}, 'displayTime': 'July 15, 2014 at 8:31 AM', 'deleteclass': 'item-control blog-admin pid-1107289781'}, {'id': '1202802272565040997', 'parentId': '3406719145587637861', 'body': 'Arjan,\x3cbr /\x3e\x3cbr /\x3eGreat explanation! Thank you very much for your time.', 'timestamp': '1405448876091', 'permalink': 'http://arjan-tijms.omnifaces.org/2012/11/implementing-container-authentication.html?showComment\x3d1405448876091#c1202802272565040997', 'author': {'name': 'Bruno Palermo', 'avatarUrl': '//lh3.googleusercontent.com/zFdxGE77vvD2w5xHy6jkVuElKv-U9_9qLkRYK8OnbDeJPtjSZ82UPq5w6hJ-SA\x3ds35', 'profileUrl': 'https://www.blogger.com/profile/08110659389324802906'}, 'displayTime': 'July 15, 2014 at 11:27 AM', 'deleteclass': 'item-control blog-admin pid-506152976'}, {'id': '7665397568582426542', 'body': '\x3ca href\x3d\x22http://www.invisionsolutions.ca/\x22 rel\x3d\x22nofollow\x22\x3ecustom software development\x3c/a\x3e', 'timestamp': '1405747509303', 'permalink': 'http://arjan-tijms.omnifaces.org/2012/11/implementing-container-authentication.html?showComment\x3d1405747509303#c7665397568582426542', 'author': {'name': 'Harley Watts', 'avatarUrl': '//lh3.googleusercontent.com/zFdxGE77vvD2w5xHy6jkVuElKv-U9_9qLkRYK8OnbDeJPtjSZ82UPq5w6hJ-SA\x3ds35', 'profileUrl': 'https://www.blogger.com/profile/11427356135556050507'}, 'displayTime': 'July 18, 2014 at 10:25 PM', 'deleteclass': 'item-control blog-admin pid-602416376'}, {'id': '4727816469686095139', 'body': 'Arjan,\x3cbr /\x3e\x3cbr /\x3eI implemented your example for Glassfish and added a few modifications based on this article:\x3cbr /\x3e\x3cbr /\x3ehttps://blogs.oracle.com/nasradu8/entry/loginmodule_bridge_profile_jaspic_in\x3cbr /\x3e\x3cbr /\x3eBut now I\x26#39;m struggling to integrate with Glassfish SSO solution.\x3cbr /\x3e\x3cbr /\x3eI hope that maybe you could help me with some points.\x3cbr /\x3e\x3cbr /\x3eThanks,\x3cbr /\x3eBruno Palermo', 'timestamp': '1406059597815', 'permalink': 'http://arjan-tijms.omnifaces.org/2012/11/implementing-container-authentication.html?showComment\x3d1406059597815#c4727816469686095139', 'author': {'name': 'Bruno Palermo', 'avatarUrl': '//lh3.googleusercontent.com/zFdxGE77vvD2w5xHy6jkVuElKv-U9_9qLkRYK8OnbDeJPtjSZ82UPq5w6hJ-SA\x3ds35', 'profileUrl': 'https://www.blogger.com/profile/08110659389324802906'}, 'displayTime': 'July 22, 2014 at 1:06 PM', 'deleteclass': 'item-control blog-admin pid-506152976'}, {'id': '2408143113929329738', 'body': 'Regarding WebSphere, you have to specify the user registry to be used by your installation:\x3cbr /\x3e\x3cbr /\x3ehttp://www-01.ibm.com/support/knowledgecenter/SSAW57_8.5.5/com.ibm.websphere.nd.doc/ae/tsec_useregistry.html?cp\x3dSSAW57_8.5.5%2F1-8-2-33-2-1\x26amp;lang\x3den', 'timestamp': '1406627729911', 'permalink': 'http://arjan-tijms.omnifaces.org/2012/11/implementing-container-authentication.html?showComment\x3d1406627729911#c2408143113929329738', 'author': {'name': 'dbaltor', 'avatarUrl': '//lh3.googleusercontent.com/zFdxGE77vvD2w5xHy6jkVuElKv-U9_9qLkRYK8OnbDeJPtjSZ82UPq5w6hJ-SA\x3ds35', 'profileUrl': 'https://www.blogger.com/profile/13770256603790285307'}, 'displayTime': 'July 29, 2014 at 2:55 AM', 'deleteclass': 'item-control blog-admin pid-733868392'}, {'id': '3223394358819195731', 'parentId': '2408143113929329738', 'body': 'Thanks a lot for the pointer dbaltor!\x3cbr /\x3e\x3cbr /\x3eI half suspected something like that, but not being anywhere near a WebSphere expert I had no idea where to look and will certainly try out specifying that user registry. I do think it\x26#39;s not entirely correct, because when JASPIC is used a SAM should be in total control and not depend on some server specific configuration to work.\x3cbr /\x3e\x3cbr /\x3eThen again, in the case of WebSphere you also need to activate (Servlet) security itself which always baffled me as well. Why is WebSphere out of the box not Servlet compliant and do you need to switch a toggle to make it so?\x3cbr /\x3e\x3cbr /\x3eAnyway, thanks again for your pointer and I\x26#39;ll surely take a look.', 'timestamp': '1406665692260', 'permalink': 'http://arjan-tijms.omnifaces.org/2012/11/implementing-container-authentication.html?showComment\x3d1406665692260#c3223394358819195731', 'author': {'name': 'Arjan Tijms', 'avatarUrl': '//lh5.googleusercontent.com/-Fsb6YxLG-5Q/AAAAAAAAAAI/AAAAAAAAACY/8H8WPYh2OT8/s35-c/photo.jpg', 'profileUrl': 'https://www.blogger.com/profile/08548593340781885396'}, 'displayTime': 'July 29, 2014 at 1:28 PM', 'deleteclass': 'item-control blog-admin pid-1107289781'}, {'id': '177343062708431257', 'parentId': '2408143113929329738', 'body': 'Welcome Arjan! \x3cbr /\x3e\x3cbr /\x3eIndeed, I\x26#39;ve found a reference that states:\x3cbr /\x3e\x26quot;The WebSphere Application Server implementation of CallbackHandler supports three callbacks:\x3cbr /\x3e    CallerPrincipalCallback\x3cbr /\x3e    GroupPrincipalCallback\x3cbr /\x3e    PasswordValidationCallback\x3cbr /\x3eWebSphere Application Server expects the name values obtained with PasswordValidationCallback.getUsername() and CallerPrincipalCallback.getName() to be identical. If they are not, unpredictable results occur.\x26quot;\x3cbr /\x3e\x3cbr /\x3eSo it looks like your implementation didn\x26#39;t work as it was supposed to and maybe WebSphere was still looking for an user id in its configured repository, in your case a default (file) repository which was empty (but wasadmin account). That possibly can explain why you had to create an user id using the admin console.\x3cbr /\x3e\x3cbr /\x3eCheck it out here:\x3cbr /\x3ehttp://www-01.ibm.com/support/knowledgecenter/api/content/SSAW57_8.5.5/com.ibm.websphere.nd.doc/ae/tsec_jaspi_develop.html', 'timestamp': '1406704496958', 'permalink': 'http://arjan-tijms.omnifaces.org/2012/11/implementing-container-authentication.html?showComment\x3d1406704496958#c177343062708431257', 'author': {'name': 'dbaltor', 'avatarUrl': '//lh3.googleusercontent.com/zFdxGE77vvD2w5xHy6jkVuElKv-U9_9qLkRYK8OnbDeJPtjSZ82UPq5w6hJ-SA\x3ds35', 'profileUrl': 'https://www.blogger.com/profile/13770256603790285307'}, 'displayTime': 'July 30, 2014 at 12:14 AM', 'deleteclass': 'item-control blog-admin pid-733868392'}, {'id': '4150084124082385316', 'parentId': '2408143113929329738', 'body': '\x26gt;\x3ci\x3eSo it looks like your implementation didn\x26#39;t work as it was supposed to and maybe WebSphere was still looking for an user id in its configured repository, in your case a default (file) repository which was empty (but wasadmin account).\x3c/i\x3e\x3cbr /\x3e\x3cbr /\x3eIndeed, after a debugging session (WebSphere being closed source is horribly difficult to debug, but you can deduct a lot) this is what seemed to happen indeed. I posted about this some year ago here: https://www.ibm.com/developerworks/community/forums/thread.jspa?threadID\x3d470426\x3cbr /\x3e\x3cbr /\x3eThe problem is that the implementation I used should be what\x26#39;s mandated by the spec. I had a quick chat with the JASPIC spec lead about this a while ago and he seemed to support that.\x3cbr /\x3e\x3cbr /\x3eAs mentioned, when a JASPIC SAM is configured, the SAM is in control of the authentication process. The SAM can delegate to other systems (repositories), but that\x26#39;s all under the direct control of the SAM\x26#39;s code. Whatever name + groups the SAM puts in the CallerPrincipalCallback and GroupPrincipalCallback have to be accepted at face value by the container.\x3cbr /\x3e\x3cbr /\x3eWebSphere is the only server that still checks the name + groups with this proprietary repository. This then means that for WebSphere you always have to pair your JASPIC module with an IBM specific repository plug-in, unless there\x26#39;s a default NO-OP repository that just says \x26quot;yes\x26quot; or \x26quot;accepted\x26quot; to every check. I\x26#39;ll still have to dive deeper into this subject to see if this is indeed possible.\x3cbr /\x3e\x3cbr /\x3eAt any length, having to do this pairing and/or coding something specifically for WebSphere goes against the very idea of JASPC, which is to provide \x3cb\x3eportable\x3c/b\x3e authentication modules.', 'timestamp': '1406716364151', 'permalink': 'http://arjan-tijms.omnifaces.org/2012/11/implementing-container-authentication.html?showComment\x3d1406716364151#c4150084124082385316', 'author': {'name': 'Arjan Tijms', 'avatarUrl': '//lh5.googleusercontent.com/-Fsb6YxLG-5Q/AAAAAAAAAAI/AAAAAAAAACY/8H8WPYh2OT8/s35-c/photo.jpg', 'profileUrl': 'https://www.blogger.com/profile/08548593340781885396'}, 'displayTime': 'July 30, 2014 at 3:32 AM', 'deleteclass': 'item-control blog-admin pid-1107289781'}, {'id': '2498684736239104497', 'body': '\x3cspan class\x3d\x27deleted-comment\x27\x3eThis comment has been removed by the author.\x3c/span\x3e', 'timestamp': '1406730260608', 'permalink': 'http://arjan-tijms.omnifaces.org/2012/11/implementing-container-authentication.html?showComment\x3d1406730260608#c2498684736239104497', 'author': {'name': 'dbaltor', 'avatarUrl': '//lh3.googleusercontent.com/zFdxGE77vvD2w5xHy6jkVuElKv-U9_9qLkRYK8OnbDeJPtjSZ82UPq5w6hJ-SA\x3ds35', 'profileUrl': 'https://www.blogger.com/profile/13770256603790285307'}, 'displayTime': 'July 30, 2014 at 7:24 AM', 'deleteclass': 'item-control blog-admin '}, {'id': '8373277727944584890', 'parentId': '2408143113929329738', 'body': 'I do agree with you that WebSphere\x26#39;s behavior of checking the username on a repository is neither the right action it should take and nor the expected one according to the product documentation. That\x26#39;s why I&#8217;ve pointed you to the post which mentions:\x3cbr /\x3e\x3cbr /\x3e\x26quot;WebSphere Application Server expects the name values obtained with PasswordValidationCallback.getUsername() and CallerPrincipalCallback.getName() to be identical. If they are not, unpredictable results occur.\x26quot;\x3cbr /\x3e\x3cbr /\x3eI suppose (it&#8217;s just an assumption!!) this behavior is being sparked by the absence of a PasswordValidationCallback in your Callback[] array. So, if I may say so, I suggest you add the following lines on your validateRequest method:\x3cbr /\x3e\x3cbr /\x3ePasswordValidationCallback passwordValidationCallback \x3d\x3cbr /\x3enew PasswordValidationCallback(clientSubject, \x26quot;test\x26quot;, null);\x3cbr /\x3e\x3cbr /\x3etry {\x3cbr /\x3ehandler.handle(new Callback[] { callerPrincipalCallback,\x3cbr /\x3egroupPrincipalCallback,\x3cbr /\x3epasswordValidationCallback });\x3cbr /\x3e} catch (IOException | UnsupportedCallbackException e) {\x3cbr /\x3ee.printStackTrace();\x3cbr /\x3e}', 'timestamp': '1406730373605', 'permalink': 'http://arjan-tijms.omnifaces.org/2012/11/implementing-container-authentication.html?showComment\x3d1406730373605#c8373277727944584890', 'author': {'name': 'dbaltor', 'avatarUrl': '//lh3.googleusercontent.com/zFdxGE77vvD2w5xHy6jkVuElKv-U9_9qLkRYK8OnbDeJPtjSZ82UPq5w6hJ-SA\x3ds35', 'profileUrl': 'https://www.blogger.com/profile/13770256603790285307'}, 'displayTime': 'July 30, 2014 at 7:26 AM', 'deleteclass': 'item-control blog-admin pid-733868392'}, {'id': '4240988930795098610', 'parentId': '2408143113929329738', 'body': '\x26gt; \x3ci\x3eI suppose (it&#8217;s just an assumption!!) this behavior is being sparked by the absence of a PasswordValidationCallback in your Callback[] array. \x3c/i\x3e\x3cbr /\x3e\x3cbr /\x3eMay indeed be something to look into as well. I personally interpreted that statement though as \x26quot;IFF you use the PasswordValidationCallback, THEN the name values should be identical\x26quot;. This indeed sounds reasonable to me.\x3cbr /\x3e\x3cbr /\x3eThe passwordValidationCallback however is not applicable if the SAM manages the passwords (or, as in increasing many cases, there\x26#39;s not a password to begin with). Therefore using the passwordValidationCallback should be completely optional, but I\x26#39;ll certainly try if it does anything on WebSphere. Thanks again!', 'timestamp': '1406733432090', 'permalink': 'http://arjan-tijms.omnifaces.org/2012/11/implementing-container-authentication.html?showComment\x3d1406733432090#c4240988930795098610', 'author': {'name': 'Arjan Tijms', 'avatarUrl': '//lh5.googleusercontent.com/-Fsb6YxLG-5Q/AAAAAAAAAAI/AAAAAAAAACY/8H8WPYh2OT8/s35-c/photo.jpg', 'profileUrl': 'https://www.blogger.com/profile/08548593340781885396'}, 'displayTime': 'July 30, 2014 at 8:17 AM', 'deleteclass': 'item-control blog-admin pid-1107289781'}, {'id': '4176813724399945980', 'body': 'Your example code is not conforming all JSR-196 API requirements.\x3cbr /\x3e\x3cbr /\x3eAuthConfigProvider should return not null implementation of ClientAuthConfig and ServerAuthConfig. If provider do not support client side authentication, implementation of ClientAuthConfig should return null from getAuthContext method.\x3cbr /\x3e\x3cbr /\x3eLook at page 140 of JSR-196 1.1 version maintenance release B.\x3cbr /\x3e\x3cbr /\x3eNote that GlassFish has \x26quot;Default Principal To Role Mapping\x26quot; security flag (defaulted to false). If you switch it to true (by admin console or asadmin tool), additional XML descriptor for role mapping is not necessary.', 'timestamp': '1414411214853', 'permalink': 'http://arjan-tijms.omnifaces.org/2012/11/implementing-container-authentication.html?showComment\x3d1414411214853#c4176813724399945980', 'author': {'name': 'Micha? Krzempek', 'avatarUrl': '//lh3.googleusercontent.com/-kqykVp9E1KU/AAAAAAAAAAI/AAAAAAAAAEs/4EFtagdUjy8/s35-c/photo.jpg', 'profileUrl': 'https://www.blogger.com/profile/00854947997366382076'}, 'displayTime': 'October 27, 2014 at 5:00 AM', 'deleteclass': 'item-control blog-admin pid-326869019'}, {'id': '5809154498370311172', 'parentId': '4176813724399945980', 'body': 'Thanks for your comment Micha? :)\x3cbr /\x3e\x3cbr /\x3eThe AuthConfigProvider as demonstrated attempts to be the most minimal example to get a SAM installed for the Servlet Container Profile. Indeed, client side authentication is completely ignored here. But you\x26#39;re right, just for correctness it maybe should do just that, even when in practice this is never really a problem given the very limited applicability of this very, very specific AuthConfigProvider.\x3cbr /\x3e\x3cbr /\x3e\x26gt;Note that GlassFish has \x26quot;Default Principal To Role Mapping\x26quot; security flag (defaulted to false).\x3cbr /\x3e\x3cbr /\x3eYes, I\x26#39;m fully aware of that ;) But the intend here was to do everything from within the archive. If only that flag could be switched from within the archive (e.g in sun/glassfish-web.xml) then I surely would have used that. But asadmin tools and especially admin consoles are just not an option here.', 'timestamp': '1414420764666', 'permalink': 'http://arjan-tijms.omnifaces.org/2012/11/implementing-container-authentication.html?showComment\x3d1414420764666#c5809154498370311172', 'author': {'name': 'Arjan Tijms', 'avatarUrl': '//lh5.googleusercontent.com/-Fsb6YxLG-5Q/AAAAAAAAAAI/AAAAAAAAACY/8H8WPYh2OT8/s35-c/photo.jpg', 'profileUrl': 'https://www.blogger.com/profile/08548593340781885396'}, 'displayTime': 'October 27, 2014 at 7:39 AM', 'deleteclass': 'item-control blog-admin pid-1107289781'}, {'id': '7911867153605602713', 'body': 'Arjan,\x3cbr /\x3e\x3cbr /\x3eWhere would you put settings information, like JDNI Datasource, so it can be retreived by the ServerAuthModule?\x3cbr /\x3e\x3cbr /\x3eThanks,\x3cbr /\x3eBruno Palermo', 'timestamp': '1422893033371', 'permalink': 'http://arjan-tijms.omnifaces.org/2012/11/implementing-container-authentication.html?showComment\x3d1422893033371#c7911867153605602713', 'author': {'name': 'Bruno Palermo', 'avatarUrl': '//lh3.googleusercontent.com/zFdxGE77vvD2w5xHy6jkVuElKv-U9_9qLkRYK8OnbDeJPtjSZ82UPq5w6hJ-SA\x3ds35', 'profileUrl': 'https://www.blogger.com/profile/01877240194499460152'}, 'displayTime': 'February 2, 2015 at 8:03 AM', 'deleteclass': 'item-control blog-admin pid-562919412'}, {'id': '2550247422866920417', 'body': 'What do you make of https://docs.oracle.com/middleware/1213/wls/SECMG/jaspic.htm#SECMG663\x3cbr /\x3ewhich mentions requirements to make configurations on the weblogic console and have classes on the system classpath?\x3cbr /\x3eMy attempts with weblogic 12.1.3 work for my web application but seem to break the weblogic console. I can\x26#39;t find anything that explains how to forward to other authentication mechanisms a la REQUIRED/REQUISITE/SUFFICIENT/OPTIONAL flags.', 'timestamp': '1430807740816', 'permalink': 'http://arjan-tijms.omnifaces.org/2012/11/implementing-container-authentication.html?showComment\x3d1430807740816#c2550247422866920417', 'author': {'name': 'Evans', 'avatarUrl': '//lh3.googleusercontent.com/zFdxGE77vvD2w5xHy6jkVuElKv-U9_9qLkRYK8OnbDeJPtjSZ82UPq5w6hJ-SA\x3ds35', 'profileUrl': 'https://www.blogger.com/profile/13575795650654330823'}, 'displayTime': 'May 4, 2015 at 11:35 PM', 'deleteclass': 'item-control blog-admin pid-1081039884'}, {'id': '2947359138280806613', 'body': 'Hi Arjan, I am trying to run authentication module example with wildfly8.2.0 but it is not working. Can you pls suggest me, Do I need to add anything in standalone.xml. Pls guide.\x3cbr /\x3e\x3cbr /\x3eThanks - Pradeep', 'timestamp': '1434010833618', 'permalink': 'http://arjan-tijms.omnifaces.org/2012/11/implementing-container-authentication.html?showComment\x3d1434010833618#c2947359138280806613', 'author': {'name': 'pradeep choudhary', 'avatarUrl': '//lh3.googleusercontent.com/zFdxGE77vvD2w5xHy6jkVuElKv-U9_9qLkRYK8OnbDeJPtjSZ82UPq5w6hJ-SA\x3ds35', 'profileUrl': 'https://www.blogger.com/profile/01010814120784566911'}, 'displayTime': 'June 11, 2015 at 1:20 AM', 'deleteclass': 'item-control blog-admin pid-1311061113'}, {'id': '7165611127090438230', 'parentId': '2947359138280806613', 'body': 'It\x26#39;s indeed necessary to add something in standalone.xml for WildFly. This is *extremely* unfortunate as it should \x26quot;just-work\x26quot;, but it is what it is I guess.\x3cbr /\x3e\x3cbr /\x3eYou need to add the XML to standalone.xml as mentioned here:\x3cbr /\x3e\x3cbr /\x3e\x3ca href\x3d\x22https://github.com/javaee-samples/javaee7-samples/issues/243\x22 rel\x3d\x22nofollow\x22\x3ehttps://github.com/javaee-samples/javaee7-samples/issues/243\x3c/a\x3e\x3cbr /\x3e\x3cbr /\x3eAnd then add a jboss-web.xml like here:\x3cbr /\x3e\x3cbr /\x3e\x3ca href\x3d\x22https://github.com/arjantijms/javaee7-samples/blob/master/jaspic/basic-authentication/src/main/webapp/WEB-INF/jboss-web.xml\x22 rel\x3d\x22nofollow\x22\x3ehttps://github.com/arjantijms/javaee7-samples/blob/master/jaspic/basic-authentication/src/main/webapp/WEB-INF/jboss-web.xml\x3c/a\x3e', 'timestamp': '1434015935383', 'permalink': 'http://arjan-tijms.omnifaces.org/2012/11/implementing-container-authentication.html?showComment\x3d1434015935383#c7165611127090438230', 'author': {'name': 'Arjan Tijms', 'avatarUrl': '//lh5.googleusercontent.com/-Fsb6YxLG-5Q/AAAAAAAAAAI/AAAAAAAAACY/8H8WPYh2OT8/s35-c/photo.jpg', 'profileUrl': 'https://www.blogger.com/profile/08548593340781885396'}, 'displayTime': 'June 11, 2015 at 2:45 AM', 'deleteclass': 'item-control blog-admin pid-1107289781'}, {'id': '3800808044708404795', 'parentId': '2947359138280806613', 'body': '\x3cspan class\x3d\x27deleted-comment\x27\x3eThis comment has been removed by the author.\x3c/span\x3e', 'timestamp': '1434030837725', 'permalink': 'http://arjan-tijms.omnifaces.org/2012/11/implementing-container-authentication.html?showComment\x3d1434030837725#c3800808044708404795', 'author': {'name': 'pradeep choudhary', 'avatarUrl': '//lh3.googleusercontent.com/zFdxGE77vvD2w5xHy6jkVuElKv-U9_9qLkRYK8OnbDeJPtjSZ82UPq5w6hJ-SA\x3ds35', 'profileUrl': 'https://www.blogger.com/profile/01010814120784566911'}, 'displayTime': 'June 11, 2015 at 6:53 AM', 'deleteclass': 'item-control blog-admin '}, {'id': '5018286118524525253', 'parentId': '2947359138280806613', 'body': 'Hi Arjan, \x3cbr /\x3e\x3cbr /\x3eActually I am trying to implement Form Based authentication Using Jaspic and I refer the given links but could not make it. Here is code ..\x3cbr /\x3e\x3cbr /\x3e-------------Web.xml----------------------------\x3cbr /\x3e  {security-constraint}  \x3cbr /\x3e    {web-resource-collection}  \x3cbr /\x3e      {web-resource-name}Home{/web-resource-name}  \x3cbr /\x3e      {url-pattern}/*{/url-pattern}  \x3cbr /\x3e    {/web-resource-collection}  \x3cbr /\x3e    {auth-constraint}  \x3cbr /\x3e      {role-name}admin{/role-name}  \x3cbr /\x3e    {/auth-constraint}  \x3cbr /\x3e  {/security-constraint}  \x3cbr /\x3e  \x3cbr /\x3e  {login-config}  \x3cbr /\x3e      {auth-method}FORM{/auth-method}  \x3cbr /\x3e      {realm-name}form-auth{/realm-name}  \x3cbr /\x3e      {form-login-config}\x3cbr /\x3e      {form-login-page}/login.jsp{/form-login-page}\x3cbr /\x3e      {form-error-page}/loginerror.jsp{/form-error-page}\x3cbr /\x3e    {/form-login-config}\x3cbr /\x3e   {/login-config}  \x3cbr /\x3e  \x3cbr /\x3e  {security-role}  \x3cbr /\x3e    {role-name}admin{/role-name}  \x3cbr /\x3e  {/security-role}  \x3cbr /\x3e{/web-app}  \x3cbr /\x3e------------------------jboss-web.xml-----------------------\x3cbr /\x3e{jboss-web}  \x3cbr /\x3e  {security-domain}form-auth{/security-domain}\x3cbr /\x3e   {disable-audit}true{/disable-audit}\x3cbr /\x3e{/jboss-web} \x3cbr /\x3e-----------------------standalone.xml-------------------------\x3cbr /\x3e               {security-domain name\x3d\x26quot;form-auth\x26quot; cache-type\x3d\x26quot;default\x26quot;}\x3cbr /\x3e                    {authentication-jaspi}\x3cbr /\x3e                        {login-module-stack name\x3d\x26quot;lm-stack\x26quot;}\x3cbr /\x3e                            {login-module code\x3d\x26quot;com.pkc.TestAuthModule\x26quot; flag\x3d\x26quot;required\x26quot;}\x3cbr /\x3e                            {/login-module}\x3cbr /\x3e                        {/login-module-stack}\x3cbr /\x3e                        {auth-module code\x3d\x26quot;org.jboss.as.web.security.jaspi.modules.HTTPFormServerAuthModule\x26quot; flag\x3d\x26quot;required\x26quot; login-module-stack-ref\x3d\x26quot;lm-stack\x26quot;/}\x3cbr /\x3e                    {/authentication-jaspi}\x3cbr /\x3e                {/security-domain}', 'timestamp': '1434031548390', 'permalink': 'http://arjan-tijms.omnifaces.org/2012/11/implementing-container-authentication.html?showComment\x3d1434031548390#c5018286118524525253', 'author': {'name': 'pradeep choudhary', 'avatarUrl': '//lh3.googleusercontent.com/zFdxGE77vvD2w5xHy6jkVuElKv-U9_9qLkRYK8OnbDeJPtjSZ82UPq5w6hJ-SA\x3ds35', 'profileUrl': 'https://www.blogger.com/profile/01010814120784566911'}, 'displayTime': 'June 11, 2015 at 7:05 AM', 'deleteclass': 'item-control blog-admin pid-1311061113'}, {'id': '4420433125337854471', 'parentId': '2947359138280806613', 'body': 'Hi Arjan,\x3cbr /\x3eCould you please review above code and suggest to make it work ? Awaiting for your response..!  \x3cbr /\x3eThank you..', 'timestamp': '1434095274544', 'permalink': 'http://arjan-tijms.omnifaces.org/2012/11/implementing-container-authentication.html?showComment\x3d1434095274544#c4420433125337854471', 'author': {'name': 'pradeep choudhary', 'avatarUrl': '//lh3.googleusercontent.com/zFdxGE77vvD2w5xHy6jkVuElKv-U9_9qLkRYK8OnbDeJPtjSZ82UPq5w6hJ-SA\x3ds35', 'profileUrl': 'https://www.blogger.com/profile/01010814120784566911'}, 'displayTime': 'June 12, 2015 at 12:47 AM', 'deleteclass': 'item-control blog-admin pid-1311061113'}, {'id': '3274534814440913997', 'body': 'Hello Arjan; thanks for all the time and effort you\x26#39;ve tirelessly invested into the improvement of the Java EE security landscape!\x3cbr /\x3e\x3cbr /\x3eI\x26#39;ve set up a trivial \x26quot;app-agnostic\x26quot; JASPIC Servlet profile-specific SAM to integrate an external authentication system with my AS. It\x26#39;s functioning decently, except for the case of its validateRequest method getting invoked \x26quot;during service invocation\x26quot; --i.e. due to applications invoking HttpServletRequest#authenticate()-- which irks me a tiny bit. Initially I handled this case the usual, simplistic (and probably naive) way; call sendRedirect on the MessageInfo-encapsulated HttpServletResponse and return a SEND_CONTINUE, so as to ask for the user to be redirected the external login endpoint. As you can imagine, I soon started running into IllegalStateExceptions due to some apps\x26#39; Filters being unable to modify the HttpServletResponse. I then thought about wrapping the response in MessageInfo, but, unless I\x26#39;m misinterpreting the spec here, I can only do so when returning SUCCESS. The simple workaround I\x26#39;ve employed for the time being has been to set a redirection HTTP status code on the response without committing it. What annoys me, regardless of wrapping, is that, since the SAM is in that case principally treated as just another Filter within the chain (and certainly not the first one) by the runtime, there\x26#39;s no guarantee that preceeding Filter(s) won\x26#39;t potentially alter the status code set on the response by the SAM. How am I supposed to issue a client redirect then? Common sense tells me that, since I want the SAM to be able to cater for the authentication needs of an arbitrary number of applications (which themselves should just ignore the SAM\x26#39;s existence to the greatest extend possible), the SAM should be capable of \x26quot;overruling\x26quot; whatever Servlet Filters or other request/response-modifying components have been set up by the applications it serves --i.e. \x26quot;just break their chain\x26quot;, if you will-- when it needs to do so. However, \x26quot;during service invocation\x26quot; I\x26#39;m afraid it just can\x26#39;t.\x3cbr /\x3e\x3cbr /\x3eAm I missing something here or am I just plain wrong? I\x26#39;d appreciate any insight you could provide on the matter.', 'timestamp': '1435766347956', 'permalink': 'http://arjan-tijms.omnifaces.org/2012/11/implementing-container-authentication.html?showComment\x3d1435766347956#c3274534814440913997', 'author': {'name': 'virtuousoutlaw', 'avatarUrl': '//lh3.googleusercontent.com/Rw_wdkZHfDXh8tDEBFF1Q3aSS_nDE-gMVWNfOHb7a2nIp2XuWAmJyGISHv9akZE\x3ds35', 'profileUrl': 'http://virtuousoutlaw.livejournal.com/'}, 'displayTime': 'July 1, 2015 at 8:59 AM', 'deleteclass': 'item-control blog-admin pid-77561647'}, {'id': '8183413323385619817', 'parentId': '3274534814440913997', 'body': '\x26gt;As you can imagine, I soon started running into IllegalStateExceptions due to some apps\x26#39; Filters being unable to modify the HttpServletResponse.\x3cbr /\x3e\x3cbr /\x3eI can imagine that, and there\x26#39;s another common cause for IllegalStateExceptions in this case and that\x26#39;s the fact that a response may already have been committed. \x3cbr /\x3e\x3cbr /\x3e\x26gt;I then thought about wrapping the response in MessageInfo, but, unless I\x26#39;m misinterpreting the spec here, I can only do so when returning SUCCESS. \x3cbr /\x3e\x3cbr /\x3eI\x26#39;ve to double check, but for those cases where the SAM is called before the service invocation this is the only logical moment indeed, since in all other situations the response wouldn\x26#39;t be used anymore after that. The case for a SAM invocation during the response is more difficult, as how exactly would the wrapped response arrive at the next Filter or Servlet in that case?\x3cbr /\x3e\x3cbr /\x3e\x26gt;Am I missing something here or am I just plain wrong?\x3cbr /\x3e\x3cbr /\x3eIt\x26#39;s a difficult situation. The fact is that to a certain extent many Filters are also required to work with an arbitrary amount of applications. But they too have a hard time coping with things Filters that happen to appear in the chain before them do, and they can also realistically only wrap the response for Filters that come *after* them, not for Filters that come before them. The Filter that comes before a Filter that wraps a response still has a reference to the original response that can\x26#39;t be changed from a later Filter.\x3cbr /\x3e\x3cbr /\x3eA SAM does have a specific edge over a Filter, and that\x26#39;s the fact that it\x26#39;s ALSO invoked before any other Filter or Servlet. At this point your SAM must have returned SUCCESS already, otherwise the Filter or Servlet from which you called HttpServletRequest#authenticate() could not have been invoked.\x3cbr /\x3e\x3cbr /\x3eDuring this initial first call to the SAM you may be able to wrap the response. When the SAM is called the second time (after calling #authenticate) it can recognise that the response has been wrapped and just set the response code and perhaps even commit. The wrapped response response can then be set to ignore further writes to it.\x3cbr /\x3e\x3cbr /\x3eDepending on the exact structure of your SAM you have one other opportunity to do something and that\x26#39;s in secureResponse, which is called after all other filters have been called. If I\x26#39;m not mistaken JBoss has a bug here that prevents writing to the response here (this too I\x26#39;ve too double check again and make a test for)\x3cbr /\x3e\x3cbr /\x3e', 'timestamp': '1436380096941', 'permalink': 'http://arjan-tijms.omnifaces.org/2012/11/implementing-container-authentication.html?showComment\x3d1436380096941#c8183413323385619817', 'author': {'name': 'Arjan Tijms', 'avatarUrl': '//lh5.googleusercontent.com/-Fsb6YxLG-5Q/AAAAAAAAAAI/AAAAAAAAACY/8H8WPYh2OT8/s35-c/photo.jpg', 'profileUrl': 'https://www.blogger.com/profile/08548593340781885396'}, 'displayTime': 'July 8, 2015 at 11:28 AM', 'deleteclass': 'item-control blog-admin pid-1107289781'}, {'id': '5497486168585130695', 'body': 'Arjan Tijms, how to check login and password?\x3cbr /\x3eI add PasswordValidationCallback, but I\x26#39;m getting error: Invalid call to login while pluggable authentication method is configured.', 'timestamp': '1436908004524', 'permalink': 'http://arjan-tijms.omnifaces.org/2012/11/implementing-container-authentication.html?showComment\x3d1436908004524#c5497486168585130695', 'author': {'name': 'MrWishmaster35', 'avatarUrl': '//lh4.googleusercontent.com/-G1NLoGVL0xc/AAAAAAAAAAI/AAAAAAAAADo/Zw1WCD9OIBk/s35-c/photo.jpg', 'profileUrl': 'https://www.blogger.com/profile/15252573382289982579'}, 'displayTime': 'July 14, 2015 at 2:06 PM', 'deleteclass': 'item-control blog-admin pid-1429834979'}, {'id': '1487356642081823927', 'body': 'ideally JAPIC should have corrected the mistake perpetrated by almost all of the application servers in naming a role as a group. it is surprising how so many experts ignored the possibility/need for a group of users having a same role, or a  caller having permission over a group of resources.\x3cbr /\x3e\x3cbr /\x3eAt least in the next version of the spec it should correct this anomaly and introduce three principals :\x3cbr /\x3e\x3cbr /\x3eCallerPrincipal\x3cbr /\x3eGroupPrincipal -- this is group of users or resources, not role\x3cbr /\x3eRolePrincipal\x3cbr /\x3e\x3cbr /\x3eI believe this is the fundamental flaw in JEE security design by almost all containers without any exception. people can\x26#39;t and won\x26#39;t change their language to fit the system, rather they change the system.', 'timestamp': '1437388065471', 'permalink': 'http://arjan-tijms.omnifaces.org/2012/11/implementing-container-authentication.html?showComment\x3d1437388065471#c1487356642081823927', 'author': {'name': 'Samba Siva Rao Kolusu', 'avatarUrl': '//lh4.googleusercontent.com/-GqASw5ggs8s/AAAAAAAAAAI/AAAAAAAAAAA/8oAQ5Lt6UdI/s35-c/photo.jpg', 'profileUrl': 'https://www.blogger.com/profile/09115322868826391199'}, 'displayTime': 'July 20, 2015 at 3:27 AM', 'deleteclass': 'item-control blog-admin pid-1047312927'}, {'id': '2937088368192662707', 'body': 'forgot to mention : with the introduction of these principals the containers can easily map which are callers, and which are roles( by their terminology groups -- which i propose to change, immediately) and thus we can be freed from the mundane task of writing mapping definitions between JASPIC Roles and container Groups', 'timestamp': '1437388314556', 'permalink': 'http://arjan-tijms.omnifaces.org/2012/11/implementing-container-authentication.html?showComment\x3d1437388314556#c2937088368192662707', 'author': {'name': 'Samba Siva Rao Kolusu', 'avatarUrl': '//lh4.googleusercontent.com/-GqASw5ggs8s/AAAAAAAAAAI/AAAAAAAAAAA/8oAQ5Lt6UdI/s35-c/photo.jpg', 'profileUrl': 'https://www.blogger.com/profile/09115322868826391199'}, 'displayTime': 'July 20, 2015 at 3:31 AM', 'deleteclass': 'item-control blog-admin pid-1047312927'}, {'id': '4228490225155343183', 'parentId': '3274534814440913997', 'body': 'Thank you for leading me to the right direction.\x3cbr /\x3e\x3cbr /\x3eI feel stupid admitting this: I wasn\x26#39;t aware that, *regardless* of the second SAM invocation\x26#39;s outcome, #secureResponse still gets called, eventually. Unfortunately, as they say, \x26quot;common sense is not so common\x26quot;, and I believe that a tiny clarification at the particular section of the spec might be beneficial to novice devs like myself.\x3cbr /\x3e\x3cbr /\x3eI\x26#39;m using GlassFish 4.1 and response (un-)wrapping in #validateRequest / #secureResponse works like a charm. Still, I unfortunately haven\x26#39;t found enforcing response content (or absence thereof) and status code, either in the \x26quot;nested\x26quot; (i.e. second) #validateRequest invocation, or in #secureResponse, to be trivial to correctly implement.\x3cbr /\x3e\x3cbr /\x3eDisregarding any \x26quot;SAM vs Filter-X\x26quot; precedence \x26quot;conflicts\x26quot; which may arise (i.e. \x26quot;should the SAM honor an HTTP 5xx set by some Filter, when the former wishes to redirect?\x26quot;), and for which no generic solution can probably exist (except for allowing SAM behavior customization on a case-by-case basis), I found the more troublesome aspect to be the difficulty accessing the *original* response from within the second #validateRequest invocation.\x3cbr /\x3e\x3cbr /\x3e\x26gt; When the SAM is called the second time (after calling #authenticate) it can recognise that the response has been wrapped and just set the response code and perhaps even commit. The wrapped response response can then be set to ignore further writes to it.\x3cbr /\x3e\x3cbr /\x3eI can sadly not expect all hosted apps, depending on the SAM for authentication, to employ the same wrapper implementation. In fact, I cannot even assume that the wrappers are \x26quot;well-behaved\x26quot;; e.g. wrapper#sendRedirect might choose to \x26quot;do nothing\x26quot;; wrapper#getResponse might just return *this*. Access to the original response (or the initial wrapper established during the first #validateRequest invocation) is unfortunately essential.\x3cbr /\x3e\x3cbr /\x3eBut it\x26#39;s not exactly simple to access that instance either, since, at least on GlassFish, the SAM is instantiated for each request, thus the two #validateRequest invocations occur on disparate instances. It would be a joy if the two at least shared the same MessageInfo, but of course they do not. Some ugly workarounds have crossed my mind for enabling communication between the two SAM instances, but the sole reliable solution there probably is, would be to implement a ServerAuthContext (plus the two further abstraction layers that inevitably accompany it), appropriately reusing the SAM instance, in the particular case.\x3cbr /\x3e\x3cbr /\x3eThe actual question I\x26#39;d like to ask, is if there\x26#39;s a way to *centrally* make an AuthConfigProvider available to all applications. By \x26quot;centrally\x26quot; I mean so as to avoid packaging the four classes with all apps, and/or the need to use a listener to register the provider on behalf of the app. Ironically I can have just that, as long as I stick to using just a plain SAM... I could of course have one app registering the provider on all others\x26#39; behalf, but it\x26#39;s not quite pretty. I\x26#39;m aware that the AuthConfigFactory of each AS is expected to offer some sort of persistent provider store but, at least in the case of GlassFish, the documentation on it is as good as nonexistent. Hopefully I won\x26#39;t have to implement an AuthConfigFactory as well, just to be able to programmatically and centrally register AuthConfigProviders... I\x26#39;d still be struggling long after your work on JSR-375 had been completed :P.', 'timestamp': '1437562082435', 'permalink': 'http://arjan-tijms.omnifaces.org/2012/11/implementing-container-authentication.html?showComment\x3d1437562082435#c4228490225155343183', 'author': {'name': 'virtuousoutlaw', 'avatarUrl': '//lh3.googleusercontent.com/Rw_wdkZHfDXh8tDEBFF1Q3aSS_nDE-gMVWNfOHb7a2nIp2XuWAmJyGISHv9akZE\x3ds35', 'profileUrl': 'http://virtuousoutlaw.livejournal.com/'}, 'displayTime': 'July 22, 2015 at 3:48 AM', 'deleteclass': 'item-control blog-admin pid-77561647'}, {'id': '5319513899349455598', 'parentId': '1487356642081823927', 'body': 'Isn\x26#39;t there a group to role mapping that is done by the application server?  There\x26#39;s no \x26quot;default\x26quot; specified, it is expected the application server will have their own mapping implementation.', 'timestamp': '1443064127747', 'permalink': 'http://arjan-tijms.omnifaces.org/2012/11/implementing-container-authentication.html?showComment\x3d1443064127747#c5319513899349455598', 'author': {'name': 'Archimedes Trajano', 'avatarUrl': '//lh5.googleusercontent.com/-5dCYObhO1so/AAAAAAAAAAI/AAAAAAAACY4/R4ZWNEo3j3c/s35-c/photo.jpg', 'profileUrl': 'https://www.blogger.com/profile/06709900922358770930'}, 'displayTime': 'September 23, 2015 at 8:08 PM', 'deleteclass': 'item-control blog-admin pid-2071024754'}, {'id': '6677006005570133080', 'parentId': '5497486168585130695', 'body': 'I implement it as part of the validateRequest method.  But I will not use that callback, I just use the CallerPrincipalCallback and GroupPrincipalCallback.  The PasswordValidationCallback uses the runtime\x26#39;s password handling mechanism according to JavaDoc, but when I implement JASPIC module I would be doing the check myself on the module', 'timestamp': '1443064308861', 'permalink': 'http://arjan-tijms.omnifaces.org/2012/11/implementing-container-authentication.html?showComment\x3d1443064308861#c6677006005570133080', 'author': {'name': 'Archimedes Trajano', 'avatarUrl': '//lh5.googleusercontent.com/-5dCYObhO1so/AAAAAAAAAAI/AAAAAAAACY4/R4ZWNEo3j3c/s35-c/photo.jpg', 'profileUrl': 'https://www.blogger.com/profile/06709900922358770930'}, 'displayTime': 'September 23, 2015 at 8:11 PM', 'deleteclass': 'item-control blog-admin pid-2071024754'}, {'id': '5638119599145285088', 'parentId': '2937088368192662707', 'body': 'Yes I agree, this would be nice and easier to deal with.  Not sure what the impact would be though... what if you had both container managed group-role mapping and application level role mapping what should happen?', 'timestamp': '1443064450309', 'permalink': 'http://arjan-tijms.omnifaces.org/2012/11/implementing-container-authentication.html?showComment\x3d1443064450309#c5638119599145285088', 'author': {'name': 'Archimedes Trajano', 'avatarUrl': '//lh5.googleusercontent.com/-5dCYObhO1so/AAAAAAAAAAI/AAAAAAAACY4/R4ZWNEo3j3c/s35-c/photo.jpg', 'profileUrl': 'https://www.blogger.com/profile/06709900922358770930'}, 'displayTime': 'September 23, 2015 at 8:14 PM', 'deleteclass': 'item-control blog-admin pid-2071024754'}, {'id': '5017276828301877912', 'parentId': '2408143113929329738', 'body': 'They sort of fixed this on 8.5.5.7.  You still require the group to be defined in the registry, but you don\x26#39;t require the user anymore.', 'timestamp': '1443064557189', 'permalink': 'http://arjan-tijms.omnifaces.org/2012/11/implementing-container-authentication.html?showComment\x3d1443064557189#c5017276828301877912', 'author': {'name': 'Archimedes Trajano', 'avatarUrl': '//lh5.googleusercontent.com/-5dCYObhO1so/AAAAAAAAAAI/AAAAAAAACY4/R4ZWNEo3j3c/s35-c/photo.jpg', 'profileUrl': 'https://www.blogger.com/profile/06709900922358770930'}, 'displayTime': 'September 23, 2015 at 8:15 PM', 'deleteclass': 'item-control blog-admin pid-2071024754'}, {'id': '1369872887902829838', 'body': 'Arjan, how do you deal with the fact that there\x26#39;re some servers than call JASPIC even when the user has been authenticated in a previous request? How do you check, for example, if the session ID provided by the user on a cookie is\x26#39;isn\x26#39;t valid?\x3cbr /\x3e\x3cbr /\x3eThanks!', 'timestamp': '1447926688768', 'permalink': 'http://arjan-tijms.omnifaces.org/2012/11/implementing-container-authentication.html?showComment\x3d1447926688768#c1369872887902829838', 'author': {'name': 'Alex Bennasar', 'avatarUrl': '//lh3.googleusercontent.com/zFdxGE77vvD2w5xHy6jkVuElKv-U9_9qLkRYK8OnbDeJPtjSZ82UPq5w6hJ-SA\x3ds35', 'profileUrl': 'https://www.blogger.com/profile/05692970832417194407'}, 'displayTime': 'November 19, 2015 at 1:51 AM', 'deleteclass': 'item-control blog-admin pid-2074569689'}, {'id': '7393725448179133917', 'parentId': '1369872887902829838', 'body': 'Hi Alex,\x3cbr /\x3e\x3cbr /\x3eWith the current crop of servers, all of them call JASPIC when a user has been authenticated in a previous request. This is actually what the JASPIC spec requires.\x3cbr /\x3e\x3cbr /\x3eJASPIC\x26#39;s native mode of operation is stateless; a user is only authenticated for the duration of a single request. If you want a user to be logged-in for the duration of an HTTP session, then you mainly have to manage that yourself -\x26gt; store the details in the session scope, then every time your SAM is called check if those details are present an if so pass them again on to the container.\x3cbr /\x3e\x3cbr /\x3eJASPIC does have a feature where it can store those details for you, but it will not automatically apply them. In other words, it\x26#39;s an alternative for HttpSession#setAttribute. It\x26#39;s presumably somewhat more secure for if you happen to don\x26#39;t trust your own code (e.g. if the SAM and application code are developed by different parties that don\x26#39;t 100% trust each other). \x3cbr /\x3e\x3cbr /\x3eSee http://arjan-tijms.omnifaces.org/2013/04/whats-new-in-java-ee-7s-authentication.html#RegisterSession\x3cbr /\x3e\x3cbr /\x3e', 'timestamp': '1447932896151', 'permalink': 'http://arjan-tijms.omnifaces.org/2012/11/implementing-container-authentication.html?showComment\x3d1447932896151#c7393725448179133917', 'author': {'name': 'Arjan Tijms', 'avatarUrl': '//lh5.googleusercontent.com/-Fsb6YxLG-5Q/AAAAAAAAAAI/AAAAAAAAACY/8H8WPYh2OT8/s35-c/photo.jpg', 'profileUrl': 'https://www.blogger.com/profile/08548593340781885396'}, 'displayTime': 'November 19, 2015 at 3:34 AM', 'deleteclass': 'item-control blog-admin pid-1107289781'}, {'id': '6037068951020027715', 'body': 'Hi again Arjan!\x3cbr /\x3e\x3cbr /\x3eIn \x26quot;classic\x26quot; certificate realm on JEE, you can get the user\x26#39;s certificate by making a call like req.getAttribute(\x26quot;javax.servlet.request.X509Certificate\x26quot;);\x3cbr /\x3eAnd if you get a not-null certificate, you can be sure the user has been previously authenticated by the container and its truststore with cryptography.\x3cbr /\x3eObviously, in JASPIC you can also get the caller\x26#39;s certificate with the same API but, since you don\x26#39;t have here any \x26quot;realm\x26quot; and/or \x26quot;login-config\x26quot;, how can the authentification achieved? You can see if the user\x26#39;s cert is in truststore, but how is the SSL handshake done?\x3cbr /\x3e\x3cbr /\x3eMany thanks for your help!!', 'timestamp': '1456132383726', 'permalink': 'http://arjan-tijms.omnifaces.org/2012/11/implementing-container-authentication.html?showComment\x3d1456132383726#c6037068951020027715', 'author': {'name': 'Alex Bennasar', 'avatarUrl': '//lh3.googleusercontent.com/zFdxGE77vvD2w5xHy6jkVuElKv-U9_9qLkRYK8OnbDeJPtjSZ82UPq5w6hJ-SA\x3ds35', 'profileUrl': 'https://www.blogger.com/profile/05692970832417194407'}, 'displayTime': 'February 22, 2016 at 1:13 AM', 'deleteclass': 'item-control blog-admin pid-2074569689'}, {'id': '95814775757822761', 'parentId': '6037068951020027715', 'body': 'It would happen in much the same way. A \x26quot;realm\x26quot; is just another term for what\x26#39;s more generally called \x26quot;identity store\x26quot;. A SAM can either delegate to this or perform it\x26#39;s logic itself. \x3cbr /\x3e\x3cbr /\x3eFor further details, see: http://arjan-tijms.omnifaces.org/2015/10/how-servlet-containers-all-implement.html', 'timestamp': '1456145773532', 'permalink': 'http://arjan-tijms.omnifaces.org/2012/11/implementing-container-authentication.html?showComment\x3d1456145773532#c95814775757822761', 'author': {'name': 'Arjan Tijms', 'avatarUrl': '//lh5.googleusercontent.com/-Fsb6YxLG-5Q/AAAAAAAAAAI/AAAAAAAAACY/8H8WPYh2OT8/s35-c/photo.jpg', 'profileUrl': 'https://www.blogger.com/profile/08548593340781885396'}, 'displayTime': 'February 22, 2016 at 4:56 AM', 'deleteclass': 'item-control blog-admin pid-1107289781'}, {'id': '1535499740607489599', 'parentId': '6037068951020027715', 'body': 'Thanks for your help Arjan. What I still don\x26#39;t understand is: when I read (req.getAttribute...) the certificate attached to the request, did the server previously checked (SSL/TLS handshake) the remote user knows the associated private key?\x3cbr /\x3e\x3cbr /\x3eThanks for your help!!', 'timestamp': '1456148256328', 'permalink': 'http://arjan-tijms.omnifaces.org/2012/11/implementing-container-authentication.html?showComment\x3d1456148256328#c1535499740607489599', 'author': {'name': 'Alex Bennasar', 'avatarUrl': '//lh3.googleusercontent.com/zFdxGE77vvD2w5xHy6jkVuElKv-U9_9qLkRYK8OnbDeJPtjSZ82UPq5w6hJ-SA\x3ds35', 'profileUrl': 'https://www.blogger.com/profile/05692970832417194407'}, 'displayTime': 'February 22, 2016 at 5:37 AM', 'deleteclass': 'item-control blog-admin pid-2074569689'}, {'id': '7240122579152724443', 'parentId': '6037068951020027715', 'body': 'I\x26#39;m going to elaborate a little more (sorry for my poor english):\x3cbr /\x3e\x3cbr /\x3eI understand the SAM has the responsibility of knowing, in this case, where the accepted certificates are, and of comparing the certificate attached to the request with the accepted certificates to see if someone matches.\x3cbr /\x3e\x3cbr /\x3eMy question is, since that is not enough for ensuring the user is who says he is (as he can attach an arbitrary certiicate), who performs the SSL handshake, and when is it done?\x3cbr /\x3e\x3cbr /\x3eMany thanks', 'timestamp': '1456152483548', 'permalink': 'http://arjan-tijms.omnifaces.org/2012/11/implementing-container-authentication.html?showComment\x3d1456152483548#c7240122579152724443', 'author': {'name': 'Alex Bennasar', 'avatarUrl': '//lh3.googleusercontent.com/zFdxGE77vvD2w5xHy6jkVuElKv-U9_9qLkRYK8OnbDeJPtjSZ82UPq5w6hJ-SA\x3ds35', 'profileUrl': 'https://www.blogger.com/profile/05692970832417194407'}, 'displayTime': 'February 22, 2016 at 6:48 AM', 'deleteclass': 'item-control blog-admin pid-2074569689'}, {'id': '3800197659916648645', 'parentId': '6037068951020027715', 'body': 'Don\x26#39;t worry about the English, it\x26#39;s perfectly fine ;)\x3cbr /\x3e\x3cbr /\x3eThe answer is really that JASPIC doesn\x26#39;t have anything specific to say about this. It\x26#39;s just an SPI/API. It\x26#39;s called at exactly the same moment when the server would otherwise call a proprietary authentication mechanism/identity store.\x3cbr /\x3e\x3cbr /\x3eSo, the best way to find an answer is to study how existing certificate implementations do this.\x3cbr /\x3e\x3cbr /\x3eAt any length, for JSR 375 we\x26#39;ll be looking at implementing a certificate authentication mechanism and identity store before long. Since the authentication mechanism there is JASPIC based you could use that as an example too.\x3cbr /\x3e', 'timestamp': '1456153183624', 'permalink': 'http://arjan-tijms.omnifaces.org/2012/11/implementing-container-authentication.html?showComment\x3d1456153183624#c3800197659916648645', 'author': {'name': 'Arjan Tijms', 'avatarUrl': '//lh5.googleusercontent.com/-Fsb6YxLG-5Q/AAAAAAAAAAI/AAAAAAAAACY/8H8WPYh2OT8/s35-c/photo.jpg', 'profileUrl': 'https://www.blogger.com/profile/08548593340781885396'}, 'displayTime': 'February 22, 2016 at 6:59 AM', 'deleteclass': 'item-control blog-admin pid-1107289781'}, {'id': '3546273964001665452', 'parentId': '6037068951020027715', 'body': 'Thanks for your answers Arjan!\x3cbr /\x3e\x3cbr /\x3eFor those with the same kind of problems, here you have a proprietary solution for Glassfish:\x3cbr /\x3ehttps://blogs.oracle.com/nasradu8/entry/extend_certificaterealm_with_loginmodule_glassfish\x3cbr /\x3e\x3cbr /\x3eThere, the server cryptografically checks the remote client certificate against the truststore, and later you can perform your login logic with a custom login module.\x3cbr /\x3e\x3cbr /\x3eNot standard, but custom solution. I didn\x26#39;t tried yet with JASPIC over Glassfish, but anyway, as Arjan says, it will be implementation-specific...', 'timestamp': '1456297362938', 'permalink': 'http://arjan-tijms.omnifaces.org/2012/11/implementing-container-authentication.html?showComment\x3d1456297362938#c3546273964001665452', 'author': {'name': 'Alex Bennasar', 'avatarUrl': '//lh3.googleusercontent.com/zFdxGE77vvD2w5xHy6jkVuElKv-U9_9qLkRYK8OnbDeJPtjSZ82UPq5w6hJ-SA\x3ds35', 'profileUrl': 'https://www.blogger.com/profile/05692970832417194407'}, 'displayTime': 'February 23, 2016 at 11:02 PM', 'deleteclass': 'item-control blog-admin pid-2074569689'}, {'id': '4240248368626585219', 'parentId': '6037068951020027715', 'body': 'Hello Arjan!\x3cbr /\x3e\x3cbr /\x3eI read your article, as well as a couple of related ones. Currently I am trying to solve this problem:\x3cbr /\x3e\x3cbr /\x3e\x3cbr /\x3ehttp://stackoverflow.com/questions/36348377/implement-a-custom-serverauthmodule-for-jboss\x3cbr /\x3e\x3cbr /\x3ebut I am not able to.\x3cbr /\x3eMay I ask you for advice?\x3cbr /\x3e\x3cbr /\x3eThank you,\x3cbr /\x3eKind regards: Alex', 'timestamp': '1459733422915', 'permalink': 'http://arjan-tijms.omnifaces.org/2012/11/implementing-container-authentication.html?showComment\x3d1459733422915#c4240248368626585219', 'author': {'name': 'Unknown', 'avatarUrl': '//lh3.googleusercontent.com/zFdxGE77vvD2w5xHy6jkVuElKv-U9_9qLkRYK8OnbDeJPtjSZ82UPq5w6hJ-SA\x3ds35', 'profileUrl': 'https://www.blogger.com/profile/01396280297047334213'}, 'displayTime': 'April 3, 2016 at 6:30 PM', 'deleteclass': 'item-control blog-admin pid-1893058769'}, {'id': '8551908891142907133', 'parentId': '6037068951020027715', 'body': 'Hi Alex,\x3cbr /\x3e\x3cbr /\x3eI implemented almost exactly what you\x26#39;re asking for in Soteria (the JSR 375 RI). See here: https://github.com/javaee-security-spec/soteria/blob/master/impl/src/main/java/org/glassfish/soteria/cdi/RememberMeInterceptor.java and https://github.com/javaee-security-spec/soteria/blob/master/impl/src/main/java/org/glassfish/soteria/mechanisms/FormAuthenticationMechanism.java\x3cbr /\x3e\x3cbr /\x3eAlthough this is based on an Interceptor and a helper class (HttpMessageContext), it\x26#39;s essentially build on top of JASPIC, so whatever that code is doing is something you could do.\x3cbr /\x3e\x3cbr /\x3eI do wonder why you specifically use JBoss 7.1.1.Final? This is a very old beta version of JBoss that contained many bugs. Specifically JASPIC barely works in that version. From the top of my head I don\x26#39;t think it was even in a half usable state before at least 7.2.0 or 7.2.1, somewhere along that version.\x3cbr /\x3e\x3cbr /\x3eFor a time I used a patch for JBoss 7.x, see here: https://github.com/javaeekickoff/jboss-as-jaspic-patch That fixed a couple of worst bugs, but even that needed 7.2.x at least if I remember correctly.\x3cbr /\x3e\x3cbr /\x3eYour best bet would be to use the latest beta of JBoss EAP 7, which is WildFly 10.0.Final.', 'timestamp': '1459760879159', 'permalink': 'http://arjan-tijms.omnifaces.org/2012/11/implementing-container-authentication.html?showComment\x3d1459760879159#c8551908891142907133', 'author': {'name': 'Arjan Tijms', 'avatarUrl': '//lh5.googleusercontent.com/-Fsb6YxLG-5Q/AAAAAAAAAAI/AAAAAAAAACY/8H8WPYh2OT8/s35-c/photo.jpg', 'profileUrl': 'https://www.blogger.com/profile/08548593340781885396'}, 'displayTime': 'April 4, 2016 at 2:07 AM', 'deleteclass': 'item-control blog-admin pid-1107289781'}, {'id': '7290523352827925898', 'body': 'Hi Arjan,\x3cbr /\x3eThanks for the article, it was helpful and I was able to use JASPIC in payara.\x3cbr /\x3eI am trying to use this same example (custom auth) JASPIC in jetty 9, but I can\x26#39;t seem to make it work.\x3cbr /\x3eCould you help with that ?\x3cbr /\x3e\x3cbr /\x3eCould you also provide some details about how to use JASPIC in soteria for this same example.\x3cbr /\x3e\x3cbr /\x3eThanks.', 'timestamp': '1472066556530', 'permalink': 'http://arjan-tijms.omnifaces.org/2012/11/implementing-container-authentication.html?showComment\x3d1472066556530#c7290523352827925898', 'author': {'name': 'Rahul Khandelwal', 'avatarUrl': '//lh3.googleusercontent.com/-dmIpIS2VP8M/AAAAAAAAAAI/AAAAAAAAA5c/5doZLrm-iXY/s35-c/photo.jpg', 'profileUrl': 'https://www.blogger.com/profile/03578167832086522197'}, 'displayTime': 'August 24, 2016 at 12:22 PM', 'deleteclass': 'item-control blog-admin pid-1198936349'}, {'id': '1204038832627354756', 'parentId': '7290523352827925898', 'body': 'I\x26#39;m glad you liked the article. Payara is one of the best servers to use for JASPIC.\x3cbr /\x3e\x3cbr /\x3eI\x26#39;m regularly testing JASPIC on almost all servers (see e.g. http://arjan-tijms.omnifaces.org/2016/06/the-state-of-portable-authentication-in.html) but Jetty is the one server I didn\x26#39;t test yet. Instead of Jetty you could try Tomcat (8.5 or 9), which also works really well. \x3cbr /\x3e\x3cbr /\x3eI did ask about Jetty a while back, so maybe the answer given back then is helpful to you: http://stackoverflow.com/questions/14224792/how-to-use-jaspi-jaspic-on-jetty\x3cbr /\x3e\x3cbr /\x3e(I really have to followup on Jetty and add it to the test set, so thanks for reminding me)\x3cbr /\x3e\x3cbr /\x3e\x26gt;Could you also provide some details about how to use JASPIC in soteria for this same example.\x3cbr /\x3e\x3cbr /\x3eYou wouldn\x26#39;t so much use JASPIC -in- Soteria. Instead, Soteria builds on top of JASPIC and it provides a more HTTP specific CDI enabled variant of the ServerAuthModule called the AuthenticationMechanism.\x3cbr /\x3e\x3cbr /\x3eSoteria is still in active development and not officially released yet. See this for (early) details: http://arjan-tijms.omnifaces.org/p/whats-new-in-java-ee-security-api-10.html#32', 'timestamp': '1472071580678', 'permalink': 'http://arjan-tijms.omnifaces.org/2012/11/implementing-container-authentication.html?showComment\x3d1472071580678#c1204038832627354756', 'author': {'name': 'Arjan Tijms', 'avatarUrl': '//lh5.googleusercontent.com/-Fsb6YxLG-5Q/AAAAAAAAAAI/AAAAAAAAACY/8H8WPYh2OT8/s35-c/photo.jpg', 'profileUrl': 'https://www.blogger.com/profile/08548593340781885396'}, 'displayTime': 'August 24, 2016 at 1:46 PM', 'deleteclass': 'item-control blog-admin pid-1107289781'}, {'id': '2112917007667287148', 'parentId': '7290523352827925898', 'body': 'Hi Arjan,\x3cbr /\x3eThanks for the prompt reply.\x3cbr /\x3e\x3cbr /\x3eOur company uses jetty as server and as of now we are not using any standard authentication mechanism. To port the authentication to JASPIC, I need to do a POC for jetty, that\x26#39;s why Jetty is important for my use case.\x3cbr /\x3e\x3cbr /\x3eAbout the stack overflow link you mentioned, I tried the github project mentioned in answer, but I can\x26#39;t find a place to plug my custom auth module. I am still trying to make it work and will let you know if it works.\x3cbr /\x3e\x3cbr /\x3eFor the soteria, I\x26#39;ll look into it for using custom auth modules.\x3cbr /\x3e\x3cbr /\x3eThanks again.', 'timestamp': '1472105716807', 'permalink': 'http://arjan-tijms.omnifaces.org/2012/11/implementing-container-authentication.html?showComment\x3d1472105716807#c2112917007667287148', 'author': {'name': 'Rahul Khandelwal', 'avatarUrl': '//lh3.googleusercontent.com/-dmIpIS2VP8M/AAAAAAAAAAI/AAAAAAAAA5c/5doZLrm-iXY/s35-c/photo.jpg', 'profileUrl': 'https://www.blogger.com/profile/03578167832086522197'}, 'displayTime': 'August 24, 2016 at 11:15 PM', 'deleteclass': 'item-control blog-admin pid-1198936349'}, {'id': '143256642679991929', 'parentId': '7290523352827925898', 'body': 'I see, for now it may be best to ask on the Jetty mailing list about this. I\x26#39;m going to try myself too soon, but that will take some time.\x3cbr /\x3e\x3cbr /\x3eDo note that Soteria at the moment is only supported on a limited amount of servers, namely Payara, JBoss and TomEE. It should theoretically also work on Tomcat if you add a CDI implementation to it, but I haven\x26#39;t tested that. Same goes for Jetty, it should work if you add CDI, but you just as well need to activate JASPIC then first.\x3cbr /\x3e\x3cbr /\x3eSince Soteria asks a lot from the server in terms of compatible JASPIC features, my guess would be that it initially would not work on Jetty, but who knows.', 'timestamp': '1472106914300', 'permalink': 'http://arjan-tijms.omnifaces.org/2012/11/implementing-container-authentication.html?showComment\x3d1472106914300#c143256642679991929', 'author': {'name': 'Arjan Tijms', 'avatarUrl': '//lh5.googleusercontent.com/-Fsb6YxLG-5Q/AAAAAAAAAAI/AAAAAAAAACY/8H8WPYh2OT8/s35-c/photo.jpg', 'profileUrl': 'https://www.blogger.com/profile/08548593340781885396'}, 'displayTime': 'August 24, 2016 at 11:35 PM', 'deleteclass': 'item-control blog-admin pid-1107289781'}, {'id': '8459442202446903050', 'body': 'Awesome article, and you still update it after all these years(I have seen the Note about Tomcat 8.5.x and 9.x)\x3cbr /\x3eAre you planning to add them to the matrix (server / functionality) comparasion ?', 'timestamp': '1476986281618', 'permalink': 'http://arjan-tijms.omnifaces.org/2012/11/implementing-container-authentication.html?showComment\x3d1476986281618#c8459442202446903050', 'author': {'name': 'Jordi Llach', 'avatarUrl': '//lh4.googleusercontent.com/-JBWbNerT1KE/AAAAAAAAAAI/AAAAAAAAADc/CkQ0l2PwBgM/s35-c/photo.jpg', 'profileUrl': 'https://www.blogger.com/profile/18364232595681202972'}, 'displayTime': 'October 20, 2016 at 10:58 AM', 'deleteclass': 'item-control blog-admin pid-1741803449'}, {'id': '2894551079059651035', 'parentId': '8459442202446903050', 'body': 'Good to hear you like the article :)\x3cbr /\x3e\x3cbr /\x3eTomcat will indeed be added to the matrix, the Java EE 7 samples project that\x26#39;s the home of the tests for that has already been updated for Tomcat. Tomcat is a special case since it doesn\x26#39;t need to be tested for the integration with EJB, CDI, JSF, etc. I\x26#39;m planning to update the matrix when the next version of Liberty is released. Small spoiler ahead of that: Tomcat passes all tests till so far ;)', 'timestamp': '1476987233419', 'permalink': 'http://arjan-tijms.omnifaces.org/2012/11/implementing-container-authentication.html?showComment\x3d1476987233419#c2894551079059651035', 'author': {'name': 'Arjan Tijms', 'avatarUrl': '//lh5.googleusercontent.com/-Fsb6YxLG-5Q/AAAAAAAAAAI/AAAAAAAAACY/8H8WPYh2OT8/s35-c/photo.jpg', 'profileUrl': 'https://www.blogger.com/profile/08548593340781885396'}, 'displayTime': 'October 20, 2016 at 11:13 AM', 'deleteclass': 'item-control blog-admin pid-1107289781'}, {'id': '7702492063481782191', 'parentId': '8459442202446903050', 'body': 'Great news, and thanks for the spoiler :)', 'timestamp': '1476989150699', 'permalink': 'http://arjan-tijms.omnifaces.org/2012/11/implementing-container-authentication.html?showComment\x3d1476989150699#c7702492063481782191', 'author': {'name': 'Jordi Llach', 'avatarUrl': '//lh4.googleusercontent.com/-JBWbNerT1KE/AAAAAAAAAAI/AAAAAAAAADc/CkQ0l2PwBgM/s35-c/photo.jpg', 'profileUrl': 'https://www.blogger.com/profile/18364232595681202972'}, 'displayTime': 'October 20, 2016 at 11:45 AM', 'deleteclass': 'item-control blog-admin pid-1741803449'}, {'id': '6007512410859021777', 'body': 'Hi Arjan. \x3cbr /\x3e\x3cbr /\x3eThis article describe a very interesting topic, I have to confess that I never heard from JASPIC before. I\x26#39;m developing a Java EE 7 application on WildFly 10.1.0 and currently the authentication mechanism is FORM based linked with a Security Domain at database level. Altough this strategy is running and supporting this important secutiry requirement, I want to adopt JASPIC to have more control and to build our own authentication module. Following the steps described in the article the username and password (credentials) to authenticate are not present, but in my application I have a form with those fields to send the values and a rule in the web application descriptor to map the form-login and form-error pages. How can I adapt my application to work with JASPIC using those defined form rules and identifying the scenarios in which the validateRequest method don\x26#39;t have to review the user an password to authenticate if a valid process was runned before?', 'timestamp': '1480546855738', 'permalink': 'http://arjan-tijms.omnifaces.org/2012/11/implementing-container-authentication.html?showComment\x3d1480546855738#c6007512410859021777', 'author': {'name': 'Juan Pablo Feliciano Bez', 'avatarUrl': '//lh3.googleusercontent.com/zFdxGE77vvD2w5xHy6jkVuElKv-U9_9qLkRYK8OnbDeJPtjSZ82UPq5w6hJ-SA\x3ds35', 'profileUrl': 'https://www.blogger.com/profile/02513774196371967258'}, 'displayTime': 'November 30, 2016 at 3:00 PM', 'deleteclass': 'item-control blog-admin pid-47963190'}, {'id': '8844672145721209620', 'parentId': '7290523352827925898', 'body': 'Hi Arjan,\x3cbr /\x3eHave you found out anything for jaspic in jetty?\x3cbr /\x3eThanks.', 'timestamp': '1480574552280', 'permalink': 'http://arjan-tijms.omnifaces.org/2012/11/implementing-container-authentication.html?showComment\x3d1480574552280#c8844672145721209620', 'author': {'name': 'Rahul Khandelwal', 'avatarUrl': '//lh3.googleusercontent.com/-dmIpIS2VP8M/AAAAAAAAAAI/AAAAAAAAA5c/5doZLrm-iXY/s35-c/photo.jpg', 'profileUrl': 'https://www.blogger.com/profile/03578167832086522197'}, 'displayTime': 'November 30, 2016 at 10:42 PM', 'deleteclass': 'item-control blog-admin pid-1198936349'}, {'id': '8076102989755399832', 'body': 'Hi Arjan,\x3cbr /\x3e\x3cbr /\x3eIn one of your updates you say \x26quot;WebLogic doesn\x26#39;t require the mandatory role mapping anymore.\x26quot;  I don\x26#39;t think this is the case.  I\x26#39;m trying to work with WebLogic 12.2.1.2.0.  So far the only way I got things working is to have my roles defined in web.xml and a mapping defined in weblogic.xml too.  Furthermore, the value for  in web.xml, and the values for  and  in weblogic.xml all had to be the same value. I tried doing a mapping where I gave  in weblogic.xml a different value and set that value in GroupPrincipalCallback, but so far I\x26#39;ve not has success with WebLogic doing this mapping.  WebLogic also doesn\x26#39;t seem to like @DeclareRoles and prefers everything in web.xml otherwise you get deployment errors.', 'timestamp': '1505238334810', 'permalink': 'http://arjan-tijms.omnifaces.org/2012/11/implementing-container-authentication.html?showComment\x3d1505238334810#c8076102989755399832', 'author': {'name': 'mjremijan', 'avatarUrl': '//1.bp.blogspot.com/-WnvsgxXZacQ/VAJ89MgcRJI/AAAAAAAAAIY/S75Ehh9XLjY/s35/Profile_Picture.jpg', 'profileUrl': 'https://www.blogger.com/profile/01721904127841880944'}, 'displayTime': 'September 12, 2017 at 10:45 AM', 'deleteclass': 'item-control blog-admin pid-42639361'}, {'id': '2361057601035330193', 'body': 'Looks like WebLogic 12.2.1.0 doesn\x26#39;t propagate a custom Principal object either.', 'timestamp': '1505247966628', 'permalink': 'http://arjan-tijms.omnifaces.org/2012/11/implementing-container-authentication.html?showComment\x3d1505247966628#c2361057601035330193', 'author': {'name': 'mjremijan', 'avatarUrl': '//1.bp.blogspot.com/-WnvsgxXZacQ/VAJ89MgcRJI/AAAAAAAAAIY/S75Ehh9XLjY/s35/Profile_Picture.jpg', 'profileUrl': 'https://www.blogger.com/profile/01721904127841880944'}, 'displayTime': 'September 12, 2017 at 1:26 PM', 'deleteclass': 'item-control blog-admin pid-42639361'}, {'id': '5538368375106899871', 'parentId': '2361057601035330193', 'body': 'Indeed, the WLS Security team has strong opinions about the necessity for custom principals and indeed does not support them. \x3cbr /\x3e\x3cbr /\x3eSee this matrix where I last tested WebLogic 12.2.1.2 and the tests with custom principals indeed fail: http://arjan-tijms.omnifaces.org/2016/12/the-state-of-portable-authentication-in.html\x3cbr /\x3e\x3cbr /\x3eAfter quite a huge discussion we have reached a kind of compromise support for custom principals in JSR 375, since the spec lead (Will) is from WebLogic and explained that WebLogic cannot really support custom principals in the way that all other application servers can.', 'timestamp': '1505248426084', 'permalink': 'http://arjan-tijms.omnifaces.org/2012/11/implementing-container-authentication.html?showComment\x3d1505248426084#c5538368375106899871', 'author': {'name': 'Arjan Tijms', 'avatarUrl': '//lh5.googleusercontent.com/-Fsb6YxLG-5Q/AAAAAAAAAAI/AAAAAAAAACY/8H8WPYh2OT8/s35-c/photo.jpg', 'profileUrl': 'https://www.blogger.com/profile/08548593340781885396'}, 'displayTime': 'September 12, 2017 at 1:33 PM', 'deleteclass': 'item-control blog-admin pid-1107289781'}, {'id': '8082909950241329295', 'parentId': '8076102989755399832', 'body': '\x26gt;In one of your updates you say \x26quot;WebLogic doesn\x26#39;t require the mandatory role mapping anymore.\x26quot; I don\x26#39;t think this is the case.\x3cbr /\x3e\x3cbr /\x3eIt can be confusing under which circumstances this is exactly the case, but it really should work. See https://github.com/javaee-samples/javaee7-samples/tree/master/jaspic/basic-authentication/src/main/webapp/WEB-INF \x3cbr /\x3e\x3cbr /\x3eThere\x26#39;s no weblogic.xml file, and that test passed on WebLogic.\x3cbr /\x3e\x3cbr /\x3eNote that for Java EE 8 default group to role mapping is mandatory when there is no container specific configuration .', 'timestamp': '1505248808035', 'permalink': 'http://arjan-tijms.omnifaces.org/2012/11/implementing-container-authentication.html?showComment\x3d1505248808035#c8082909950241329295', 'author': {'name': 'Arjan Tijms', 'avatarUrl': '//lh5.googleusercontent.com/-Fsb6YxLG-5Q/AAAAAAAAAAI/AAAAAAAAACY/8H8WPYh2OT8/s35-c/photo.jpg', 'profileUrl': 'https://www.blogger.com/profile/08548593340781885396'}, 'displayTime': 'September 12, 2017 at 1:40 PM', 'deleteclass': 'item-control blog-admin pid-1107289781'}, {'id': '7063176019781739227', 'parentId': '8076102989755399832', 'body': 'I\x26#39;ll take a look at this.  It looks like I\x26#39;m doing essentially the same thing so I\x26#39;ll see if I can find the difference.', 'timestamp': '1505249606764', 'permalink': 'http://arjan-tijms.omnifaces.org/2012/11/implementing-container-authentication.html?showComment\x3d1505249606764#c7063176019781739227', 'author': {'name': 'mjremijan', 'avatarUrl': '//1.bp.blogspot.com/-WnvsgxXZacQ/VAJ89MgcRJI/AAAAAAAAAIY/S75Ehh9XLjY/s35/Profile_Picture.jpg', 'profileUrl': 'https://www.blogger.com/profile/01721904127841880944'}, 'displayTime': 'September 12, 2017 at 1:53 PM', 'deleteclass': 'item-control blog-admin pid-42639361'}];
      var msgs = {'loadMore': 'Load more...', 'loading': 'Loading...', 'loaded': 'No more!', 'addComment': 'Add comment', 'reply': 'Reply', 'delete': 'Delete'};
      var config = {'blogId': '4498889353428710313', 'postId': '422402323853605005', 'feed': 'http://arjan-tijms.omnifaces.org/feeds/422402323853605005/comments/default', 'authorName': 'Arjan Tijms', 'authorUrl': 'https://www.blogger.com/profile/08548593340781885396', 'baseUri': 'https://www.blogger.com', 'maxThreadDepth': 2};

// <![CDATA[
      var cursor = null;
      if (items && items.length > 0) {
        cursor = parseInt(items[items.length - 1].timestamp) + 1;
      }

      var bodyFromEntry = function(entry) {
        if (entry.gd$extendedProperty) {
          for (var k in entry.gd$extendedProperty) {
            if (entry.gd$extendedProperty[k].name == 'blogger.contentRemoved') {
              return '<span class="deleted-comment">' + entry.content.$t + '</span>';
            }
          }
        }
        return entry.content.$t;
      }

      var parse = function(data) {
        cursor = null;
        var comments = [];
        if (data && data.feed && data.feed.entry) {
          for (var i = 0, entry; entry = data.feed.entry[i]; i++) {
            var comment = {};
            // comment ID, parsed out of the original id format
            var id = /blog-(\d+).post-(\d+)/.exec(entry.id.$t);
            comment.id = id ? id[2] : null;
            comment.body = bodyFromEntry(entry);
            comment.timestamp = Date.parse(entry.published.$t) + '';
            if (entry.author && entry.author.constructor === Array) {
              var auth = entry.author[0];
              if (auth) {
                comment.author = {
                  name: (auth.name ? auth.name.$t : undefined),
                  profileUrl: (auth.uri ? auth.uri.$t : undefined),
                  avatarUrl: (auth.gd$image ? auth.gd$image.src : undefined)
                };
              }
            }
            if (entry.link) {
              if (entry.link[2]) {
                comment.link = comment.permalink = entry.link[2].href;
              }
              if (entry.link[3]) {
                var pid = /.*comments\/default\/(\d+)\?.*/.exec(entry.link[3].href);
                if (pid && pid[1]) {
                  comment.parentId = pid[1];
                }
              }
            }
            comment.deleteclass = 'item-control blog-admin';
            if (entry.gd$extendedProperty) {
              for (var k in entry.gd$extendedProperty) {
                if (entry.gd$extendedProperty[k].name == 'blogger.itemClass') {
                  comment.deleteclass += ' ' + entry.gd$extendedProperty[k].value;
                } else if (entry.gd$extendedProperty[k].name == 'blogger.displayTime') {
                  comment.displayTime = entry.gd$extendedProperty[k].value;
                }
              }
            }
            comments.push(comment);
          }
        }
        return comments;
      };

      var paginator = function(callback) {
        if (hasMore()) {
          var url = config.feed + '?alt=json&v=2&orderby=published&reverse=false&max-results=50';
          if (cursor) {
            url += '&published-min=' + new Date(cursor).toISOString();
          }
          window.bloggercomments = function(data) {
            var parsed = parse(data);
            cursor = parsed.length < 50 ? null
                : parseInt(parsed[parsed.length - 1].timestamp) + 1
            callback(parsed);
            window.bloggercomments = null;
          }
          url += '&callback=bloggercomments';
          var script = document.createElement('script');
          script.type = 'text/javascript';
          script.src = url;
          document.getElementsByTagName('head')[0].appendChild(script);
        }
      };
      var hasMore = function() {
        return !!cursor;
      };
      var getMeta = function(key, comment) {
        if ('iswriter' == key) {
          var matches = !!comment.author
              && comment.author.name == config.authorName
              && comment.author.profileUrl == config.authorUrl;
          return matches ? 'true' : '';
        } else if ('deletelink' == key) {
          return config.baseUri + '/delete-comment.g?blogID='
               + config.blogId + '&postID=' + comment.id;
        } else if ('deleteclass' == key) {
          return comment.deleteclass;
        }
        return '';
      };

      var replybox = null;
      var replyUrlParts = null;
      var replyParent = undefined;

      var onReply = function(commentId, domId) {
        if (replybox == null) {
          // lazily cache replybox, and adjust to suit this style:
          replybox = document.getElementById('comment-editor');
          if (replybox != null) {
            replybox.height = '250px';
            replybox.style.display = 'block';
            replyUrlParts = replybox.src.split('#');
          }
        }
        if (replybox && (commentId !== replyParent)) {
          replybox.src = '';
          document.getElementById(domId).insertBefore(replybox, null);
          replybox.src = replyUrlParts[0]
              + (commentId ? '&parentID=' + commentId : '')
              + '#' + replyUrlParts[1];
          replyParent = commentId;
        }
      };

      var hash = (window.location.hash || '#').substring(1);
      var startThread, targetComment;
      if (/^comment-form_/.test(hash)) {
        startThread = hash.substring('comment-form_'.length);
      } else if (/^c[0-9]+$/.test(hash)) {
        targetComment = hash.substring(1);
      }

      // Configure commenting API:
      var configJso = {
        'maxDepth': config.maxThreadDepth
      };
      var provider = {
        'id': config.postId,
        'data': items,
        'loadNext': paginator,
        'hasMore': hasMore,
        'getMeta': getMeta,
        'onReply': onReply,
        'rendered': true,
        'initComment': targetComment,
        'initReplyThread': startThread,
        'config': configJso,
        'messages': msgs
      };

      var render = function() {
        if (window.goog && window.goog.comments) {
          var holder = document.getElementById('comment-holder');
          window.goog.comments.render(holder, provider);
        }
      };

      // render now, or queue to render when library loads:
      if (window.goog && window.goog.comments) {
        render();
      } else {
        window.goog = window.goog || {};
        window.goog.comments = window.goog.comments || {};
        window.goog.comments.loadQueue = window.goog.comments.loadQueue || [];
        window.goog.comments.loadQueue.push(render);
      }
    })();
// ]]>
  </script> 
                     <div id="comment-holder"> 
                      <div id="bc_0_66C" kind="c">
                       <div id="bc_0_66CT">
                        <div id="bc_0_65T" class="comment-thread" kind="r" t="0" u="0">
                         <ol id="bc_0_65TB">
                          <li id="bc_0_0B" class="comment" kind="b">
                           <div class="avatar-image-container">
                            <img src="//lh3.googleusercontent.com/Rw_wdkZHfDXh8tDEBFF1Q3aSS_nDE-gMVWNfOHb7a2nIp2XuWAmJyGISHv9akZE=s35">
                           </div>
                           <div id="c1489399615392991080" class="comment-block">
                            <div id="bc_0_0M" class="comment-header" kind="m">
                             <cite class="user"><a rel="nofollow" href="https://me.yahoo.com/chs_digitalvitamin">Noone</a></cite>
                             <span class="icon user"></span>
                             <span class="datetime secondary-text"><a rel="nofollow" href="http://arjan-tijms.omnifaces.org/2012/11/implementing-container-authentication.html?showComment=1379580921652#c1489399615392991080">September 19, 2013 at 1:55 AM</a></span>
                            </div>
                            <p id="bc_0_0MC" class="comment-content">Arjan,<br><br>great post! I'm using your example code in a EE7/glassfish 4 environment. <br><br>You say to set up the security-constraint in web.xml.<br>I tried to restrict the constraint to a certain part of the application (say url-pattern = /admin/*). Still validateRequest in the SAM is called for every request even when its not a restricted (admin) resource. <br><br>And idea?<br><br>Thanks<br>Christian</p>
                            <span id="bc_0_0MN" class="comment-actions secondary-text" kind="m"><a kind="i" href="javascript:;" target="_self" o="r">Reply</a><span class="item-control blog-admin pid-558891391"><a o="d" target="_self" href="https://www.blogger.com/delete-comment.g?blogID=4498889353428710313&amp;postID=1489399615392991080">Delete</a></span></span>
                           </div>
                           <div id="bc_0_0BR" class="comment-replies"></div>
                           <div id="bc_0_0B_box" class="comment-replybox-single"></div></li>
                          <li id="bc_0_1B" class="comment" kind="b">
                           <div class="avatar-image-container">
                            <img src="//lh5.googleusercontent.com/-Fsb6YxLG-5Q/AAAAAAAAAAI/AAAAAAAAACY/8H8WPYh2OT8/s35-c/photo.jpg">
                           </div>
                           <div id="c4617974601832150271" class="comment-block">
                            <div id="bc_0_1M" class="comment-header" kind="m">
                             <cite class="user blog-author"><a rel="nofollow" href="https://www.blogger.com/profile/08548593340781885396">Arjan Tijms</a></cite>
                             <span class="icon user blog-author"></span>
                             <span class="datetime secondary-text"><a rel="nofollow" href="http://arjan-tijms.omnifaces.org/2012/11/implementing-container-authentication.html?showComment=1379594429544#c4617974601832150271">September 19, 2013 at 5:40 AM</a></span>
                            </div>
                            <p id="bc_0_1MC" class="comment-content">&gt;Still validateRequest in the SAM is called for every request even when its not a &gt;restricted (admin) resource. <br><br>&gt;And idea?<br><br>Yes, this is the intended behavior of JASPIC. validateRequest should be called for every request, independent of whether the request is to a protected resource and independent of whether the user is logged-in or not.<br><br>This feature is very important, since it allows a SAM to e.g. automatically log you in when you go the public home page of a site based on say a cookie. This is called preemptive authentication.<br><br>If the request is to a protected resource, the SAM has to do authentication, otherwise it can opt to "do nothing". You can check if the request is to a protected resource via the following code:<br><br>Boolean.valueOf((String) messageInfo.getMap().get(IS_MANDATORY));<br><br><br>Also see http://code.google.com/p/omnisecurity/source/browse/src/org/omnifaces/security/jaspic/Jaspic.java#179<br></p>
                            <span id="bc_0_1MN" class="comment-actions secondary-text" kind="m"><a kind="i" href="javascript:;" target="_self" o="r">Reply</a><span class="item-control blog-admin pid-1107289781"><a o="d" target="_self" href="https://www.blogger.com/delete-comment.g?blogID=4498889353428710313&amp;postID=4617974601832150271">Delete</a></span></span>
                           </div>
                           <div id="bc_0_1BR" class="comment-replies"></div>
                           <div id="bc_0_1B_box" class="comment-replybox-single"></div></li>
                          <li id="bc_0_2B" class="comment" kind="b">
                           <div class="avatar-image-container">
                            <img src="//lh3.googleusercontent.com/zFdxGE77vvD2w5xHy6jkVuElKv-U9_9qLkRYK8OnbDeJPtjSZ82UPq5w6hJ-SA=s35">
                           </div>
                           <div id="c1008502261948612851" class="comment-block">
                            <div id="bc_0_2M" class="comment-header" kind="m">
                             <cite class="user"><a rel="nofollow" href="https://www.blogger.com/profile/00824738232304542734">daron_</a></cite>
                             <span class="icon user"></span>
                             <span class="datetime secondary-text"><a rel="nofollow" href="http://arjan-tijms.omnifaces.org/2012/11/implementing-container-authentication.html?showComment=1383744603762#c1008502261948612851">November 6, 2013 at 5:30 AM</a></span>
                            </div>
                            <p id="bc_0_2MC" class="comment-content">Great article. Really helpful. Thanks!</p>
                            <span id="bc_0_2MN" class="comment-actions secondary-text" kind="m"><a kind="i" href="javascript:;" target="_self" o="r">Reply</a><span class="item-control blog-admin pid-1552735461"><a o="d" target="_self" href="https://www.blogger.com/delete-comment.g?blogID=4498889353428710313&amp;postID=1008502261948612851">Delete</a></span></span>
                           </div>
                           <div id="bc_0_2BR" class="comment-replies"></div>
                           <div id="bc_0_2B_box" class="comment-replybox-single"></div></li>
                          <li id="bc_0_5B" class="comment" kind="b">
                           <div class="avatar-image-container">
                            <img src="//lh3.googleusercontent.com/zFdxGE77vvD2w5xHy6jkVuElKv-U9_9qLkRYK8OnbDeJPtjSZ82UPq5w6hJ-SA=s35">
                           </div>
                           <div id="c2698548455123046551" class="comment-block">
                            <div id="bc_0_5M" class="comment-header" kind="m">
                             <cite class="user"><a rel="nofollow" href="https://www.blogger.com/profile/18159411522912529606">me</a></cite>
                             <span class="icon user"></span>
                             <span class="datetime secondary-text"><a rel="nofollow" href="http://arjan-tijms.omnifaces.org/2012/11/implementing-container-authentication.html?showComment=1390228391876#c2698548455123046551">January 20, 2014 at 6:33 AM</a></span>
                            </div>
                            <p id="bc_0_5MC" class="comment-content">What are the pros/cons of using a ServerAuthModule over an AppServPasswordLoginModule?</p>
                            <span id="bc_0_5MN" class="comment-actions secondary-text" kind="m"><a kind="i" href="javascript:;" target="_self" o="r">Reply</a><span class="item-control blog-admin pid-383034757"><a o="d" target="_self" href="https://www.blogger.com/delete-comment.g?blogID=4498889353428710313&amp;postID=2698548455123046551">Delete</a></span></span>
                           </div>
                           <div id="bc_0_5BR" class="comment-replies">
                            <span id="bc_0_5b+seedGhrBD" kind="d">
                             <div id="bc_0_3T" class="comment-thread inline-thread" kind="t" t="0" u="0">
                              <span id="bc_0_3TT" class="thread-toggle thread-expanded" kind="g"><span id="bc_0_3TA" class="thread-arrow"></span><span id="bc_0_3TN" class="thread-count"><span id="bc_0_3TNT" style="display: none;"></span><span id="bc_0_3TNU" style="display: none;"></span><a href="javascript:;" target="_self">Replies</a>
                                <div id="bc_0_3TD" class="thread-dropContainer thread-expanded">
                                 <span class="thread-drop"></span>
                                </div></span></span>
                              <ol id="bc_0_3TC" class="thread-chrome thread-expanded">
                               <div>
                                <li id="bc_0_3B" class="comment" kind="b">
                                 <div class="avatar-image-container">
                                  <img src="//lh5.googleusercontent.com/-Fsb6YxLG-5Q/AAAAAAAAAAI/AAAAAAAAACY/8H8WPYh2OT8/s35-c/photo.jpg">
                                 </div>
                                 <div id="c2660589250365012464" class="comment-block">
                                  <div id="bc_0_3M" class="comment-header" kind="m">
                                   <cite class="user blog-author"><a rel="nofollow" href="https://www.blogger.com/profile/08548593340781885396">Arjan Tijms</a></cite>
                                   <span class="icon user blog-author"></span>
                                   <span class="datetime secondary-text"><a rel="nofollow" href="http://arjan-tijms.omnifaces.org/2012/11/implementing-container-authentication.html?showComment=1390229680485#c2660589250365012464">January 20, 2014 at 6:54 AM</a></span>
                                  </div>
                                  <p id="bc_0_3MC" class="comment-content">&gt;What are the pros/cons of using a ServerAuthModule over an AppServPasswordLoginModule?<br><br>The ServerAuthModule is a standardized type. It works on all Java EE servers, like JBoss, GlassFish, JEUS, WebLogic, WebSphere, Geronimo, etc. <br><br>With AppServPasswordLoginModule I guess you mean com.sun.appserv.security.AppservPasswordLoginModule. This is a GlassFish specific type that thus only works on GlassFish.<br><br>If you know how to write such module you can't use that same knowledge to implement a similar module on JBoss; you have to relearn from scratch how to do it.<br><br></p>
                                  <span id="bc_0_3MN" class="comment-actions secondary-text" kind="m"><span class="item-control blog-admin pid-1107289781"><a o="d" target="_self" href="https://www.blogger.com/delete-comment.g?blogID=4498889353428710313&amp;postID=2660589250365012464">Delete</a></span></span>
                                 </div>
                                 <div id="bc_0_3BR" class="comment-replies"></div>
                                 <div id="bc_0_3B_box" class="comment-replybox-single"></div></li>
                                <li id="bc_0_4B" class="comment" kind="b">
                                 <div class="avatar-image-container">
                                  <img src="//lh3.googleusercontent.com/zFdxGE77vvD2w5xHy6jkVuElKv-U9_9qLkRYK8OnbDeJPtjSZ82UPq5w6hJ-SA=s35">
                                 </div>
                                 <div id="c5767806915717291138" class="comment-block">
                                  <div id="bc_0_4M" class="comment-header" kind="m">
                                   <cite class="user"><a rel="nofollow" href="https://www.blogger.com/profile/18159411522912529606">me</a></cite>
                                   <span class="icon user"></span>
                                   <span class="datetime secondary-text"><a rel="nofollow" href="http://arjan-tijms.omnifaces.org/2012/11/implementing-container-authentication.html?showComment=1390230691132#c5767806915717291138">January 20, 2014 at 7:11 AM</a></span>
                                  </div>
                                  <p id="bc_0_4MC" class="comment-content">Arjan, thanks, and also really informative article! For the sake of argument, let's say I commit to using Glassfish, is there a good argument to using one technique over the other?</p>
                                  <span id="bc_0_4MN" class="comment-actions secondary-text" kind="m"><span class="item-control blog-admin pid-383034757"><a o="d" target="_self" href="https://www.blogger.com/delete-comment.g?blogID=4498889353428710313&amp;postID=5767806915717291138">Delete</a></span></span>
                                 </div>
                                 <div id="bc_0_4BR" class="comment-replies"></div>
                                 <div id="bc_0_4B_box" class="comment-replybox-single"></div></li>
                               </div>
                               <div id="bc_0_3I" class="continue" kind="ci">
                                <a href="javascript:;" target="_self">Reply</a>
                               </div>
                              </ol>
                              <div id="bc_0_3T_box" class="comment-replybox-thread"></div>
                             </div></span>
                           </div>
                           <div id="bc_0_5B_box" class="comment-replybox-single"></div></li>
                          <li id="bc_0_7B" class="comment" kind="b">
                           <div class="avatar-image-container">
                            <img src="//lh3.googleusercontent.com/zFdxGE77vvD2w5xHy6jkVuElKv-U9_9qLkRYK8OnbDeJPtjSZ82UPq5w6hJ-SA=s35">
                           </div>
                           <div id="c275889729634407877" class="comment-block">
                            <div id="bc_0_7M" class="comment-header" kind="m">
                             <cite class="user"><a rel="nofollow" href="https://www.blogger.com/profile/16608967607772047959">Everton da Silva Barros</a></cite>
                             <span class="icon user"></span>
                             <span class="datetime secondary-text"><a rel="nofollow" href="http://arjan-tijms.omnifaces.org/2012/11/implementing-container-authentication.html?showComment=1397153421742#c275889729634407877">April 10, 2014 at 11:10 AM</a></span>
                            </div>
                            <p id="bc_0_7MC" class="comment-content">Hi Arjan Tijms, <br>I'm having this exact problem below. Could you help me?<br><br>http://stackoverflow.com/questions/19731679/how-to-obtain-httpservletrequest-in-appservpasswordloginmodule-ssl</p>
                            <span id="bc_0_7MN" class="comment-actions secondary-text" kind="m"><a kind="i" href="javascript:;" target="_self" o="r">Reply</a><span class="item-control blog-admin pid-665836256"><a o="d" target="_self" href="https://www.blogger.com/delete-comment.g?blogID=4498889353428710313&amp;postID=275889729634407877">Delete</a></span></span>
                           </div>
                           <div id="bc_0_7BR" class="comment-replies">
                            <span id="bc_0_7b+seedGhrED" kind="d">
                             <div id="bc_0_6T" class="comment-thread inline-thread" kind="t" t="0" u="0">
                              <span id="bc_0_6TT" class="thread-toggle thread-expanded" kind="g"><span id="bc_0_6TA" class="thread-arrow"></span><span id="bc_0_6TN" class="thread-count"><span id="bc_0_6TNT" style="display: none;"></span><span id="bc_0_6TNU" style="display: none;"></span><a href="javascript:;" target="_self">Replies</a>
                                <div id="bc_0_6TD" class="thread-dropContainer thread-expanded">
                                 <span class="thread-drop"></span>
                                </div></span></span>
                              <ol id="bc_0_6TC" class="thread-chrome thread-expanded">
                               <div>
                                <li id="bc_0_6B" class="comment" kind="b">
                                 <div class="avatar-image-container">
                                  <img src="//lh5.googleusercontent.com/-Fsb6YxLG-5Q/AAAAAAAAAAI/AAAAAAAAACY/8H8WPYh2OT8/s35-c/photo.jpg">
                                 </div>
                                 <div id="c2128960366936010506" class="comment-block">
                                  <div id="bc_0_6M" class="comment-header" kind="m">
                                   <cite class="user blog-author"><a rel="nofollow" href="https://www.blogger.com/profile/08548593340781885396">Arjan Tijms</a></cite>
                                   <span class="icon user blog-author"></span>
                                   <span class="datetime secondary-text"><a rel="nofollow" href="http://arjan-tijms.omnifaces.org/2012/11/implementing-container-authentication.html?showComment=1397237024210#c2128960366936010506">April 11, 2014 at 10:23 AM</a></span>
                                  </div>
                                  <p id="bc_0_6MC" class="comment-content">I'm afraid I can't really help you with that. As you may have noticed I mainly write about Java EE standard auth modules and thus have little or no experience with login modules that are proprietary for a specific container.<br><br>When you use a JASPIC auth module instead of the GlassFish proprietary mechanism you already get the HttpServletRequest instance, so you might want to look at that.<br></p>
                                  <span id="bc_0_6MN" class="comment-actions secondary-text" kind="m"><span class="item-control blog-admin pid-1107289781"><a o="d" target="_self" href="https://www.blogger.com/delete-comment.g?blogID=4498889353428710313&amp;postID=2128960366936010506">Delete</a></span></span>
                                 </div>
                                 <div id="bc_0_6BR" class="comment-replies"></div>
                                 <div id="bc_0_6B_box" class="comment-replybox-single"></div></li>
                               </div>
                               <div id="bc_0_6I" class="continue" kind="ci">
                                <a href="javascript:;" target="_self">Reply</a>
                               </div>
                              </ol>
                              <div id="bc_0_6T_box" class="comment-replybox-thread"></div>
                             </div></span>
                           </div>
                           <div id="bc_0_7B_box" class="comment-replybox-single"></div></li>
                          <li id="bc_0_12B" class="comment" kind="b">
                           <div class="avatar-image-container">
                            <img src="//lh3.googleusercontent.com/zFdxGE77vvD2w5xHy6jkVuElKv-U9_9qLkRYK8OnbDeJPtjSZ82UPq5w6hJ-SA=s35">
                           </div>
                           <div id="c3406719145587637861" class="comment-block">
                            <div id="bc_0_12M" class="comment-header" kind="m">
                             <cite class="user"><a rel="nofollow" href="https://www.blogger.com/profile/08110659389324802906">Bruno Palermo</a></cite>
                             <span class="icon user"></span>
                             <span class="datetime secondary-text"><a rel="nofollow" href="http://arjan-tijms.omnifaces.org/2012/11/implementing-container-authentication.html?showComment=1405108411292#c3406719145587637861">July 11, 2014 at 12:53 PM</a></span>
                            </div>
                            <p id="bc_0_12MC" class="comment-content">Hi Arjan Tijms,<br><br>Would be possible to implement a ServerAuthModule which accepts multiple login methods, let's say username/password or Oauth?<br><br>Do you mind point me on the right direction?<br><br>Thanks,<br>Bruno</p>
                            <span id="bc_0_12MN" class="comment-actions secondary-text" kind="m"><a kind="i" href="javascript:;" target="_self" o="r">Reply</a><span class="item-control blog-admin pid-506152976"><a o="d" target="_self" href="https://www.blogger.com/delete-comment.g?blogID=4498889353428710313&amp;postID=3406719145587637861">Delete</a></span></span>
                           </div>
                           <div id="bc_0_12BR" class="comment-replies">
                            <span id="bc_0_12b+seedGhrGD" kind="d">
                             <div id="bc_0_8T" class="comment-thread inline-thread" kind="t" t="0" u="0">
                              <span id="bc_0_8TT" class="thread-toggle thread-expanded" kind="g"><span id="bc_0_8TA" class="thread-arrow"></span><span id="bc_0_8TN" class="thread-count"><span id="bc_0_8TNT" style="display: none;"></span><span id="bc_0_8TNU" style="display: none;"></span><a href="javascript:;" target="_self">Replies</a>
                                <div id="bc_0_8TD" class="thread-dropContainer thread-expanded">
                                 <span class="thread-drop"></span>
                                </div></span></span>
                              <ol id="bc_0_8TC" class="thread-chrome thread-expanded">
                               <div>
                                <li id="bc_0_8B" class="comment" kind="b">
                                 <div class="avatar-image-container">
                                  <img src="//lh5.googleusercontent.com/-Fsb6YxLG-5Q/AAAAAAAAAAI/AAAAAAAAACY/8H8WPYh2OT8/s35-c/photo.jpg">
                                 </div>
                                 <div id="c1643855699359487801" class="comment-block">
                                  <div id="bc_0_8M" class="comment-header" kind="m">
                                   <cite class="user blog-author"><a rel="nofollow" href="https://www.blogger.com/profile/08548593340781885396">Arjan Tijms</a></cite>
                                   <span class="icon user blog-author"></span>
                                   <span class="datetime secondary-text"><a rel="nofollow" href="http://arjan-tijms.omnifaces.org/2012/11/implementing-container-authentication.html?showComment=1405114009225#c1643855699359487801">July 11, 2014 at 2:26 PM</a></span>
                                  </div>
                                  <p id="bc_0_8MC" class="comment-content">Theoretically yes. A ServerAuthModule is a very low level thing and can basically do anything. It gets called by the container at the start of an HTTP request, and what code it runs itself or what other code it calls is completely up to the module.<br><br>When an authentication (login) has eventually happened by whatever mechanism(s), the ServerAuthModule communicates the username and roles to the container. The container naturally should not know nor care where this username and these roles were obtained from.<br><br>When you do multiple login methods, you yourself have to keep track though of what method was used. If the login is a multi-step thing you have to remember somewhere (e.g. in the session) which method is currently being used (or tried, if you execute multiple ones in sequence).<br><br>Because JASPIC is such a low-level mechanism there's barely any higher level API to help you with this task, you have to do it yourself. The only thing that's there is that the ServerAuthModule should more or less implement 1 method only, while the ServerAuthContext (see example in the article) should be the place where you manage multiple ServerAuthModules (but the container can't enforce this and it's up to you whether you use this specific devision of responsibilities).<br><br>I've been working on and off on a library that provides some of this higher level functionality, and does indeed allow you to choose between various mechanism. It's however not entirely polished yet and a bit difficult to learn from, but maybe it's useful for you anyway: https://github.com/omnifaces/omnisecurity<br></p>
                                  <span id="bc_0_8MN" class="comment-actions secondary-text" kind="m"><span class="item-control blog-admin pid-1107289781"><a o="d" target="_self" href="https://www.blogger.com/delete-comment.g?blogID=4498889353428710313&amp;postID=1643855699359487801">Delete</a></span></span>
                                 </div>
                                 <div id="bc_0_8BR" class="comment-replies"></div>
                                 <div id="bc_0_8B_box" class="comment-replybox-single"></div></li>
                                <li id="bc_0_9B" class="comment" kind="b">
                                 <div class="avatar-image-container">
                                  <img src="//lh3.googleusercontent.com/zFdxGE77vvD2w5xHy6jkVuElKv-U9_9qLkRYK8OnbDeJPtjSZ82UPq5w6hJ-SA=s35">
                                 </div>
                                 <div id="c8203743265534762165" class="comment-block">
                                  <div id="bc_0_9M" class="comment-header" kind="m">
                                   <cite class="user"><a rel="nofollow" href="https://www.blogger.com/profile/08110659389324802906">Bruno Palermo</a></cite>
                                   <span class="icon user"></span>
                                   <span class="datetime secondary-text"><a rel="nofollow" href="http://arjan-tijms.omnifaces.org/2012/11/implementing-container-authentication.html?showComment=1405429464507#c8203743265534762165">July 15, 2014 at 6:04 AM</a></span>
                                  </div>
                                  <p id="bc_0_9MC" class="comment-content">Arjan,<br><br>Thanks for the reply. I've been reading about Login context in JAAS:<br><br>http://docs.oracle.com/javase/7/docs/technotes/guides/security/jgss/tutorials/AcnOnly.html<br><br>Do you think it might be a way to do it?<br><br>Thanks,<br><br>Bruno Palermo</p>
                                  <span id="bc_0_9MN" class="comment-actions secondary-text" kind="m"><span class="item-control blog-admin pid-506152976"><a o="d" target="_self" href="https://www.blogger.com/delete-comment.g?blogID=4498889353428710313&amp;postID=8203743265534762165">Delete</a></span></span>
                                 </div>
                                 <div id="bc_0_9BR" class="comment-replies"></div>
                                 <div id="bc_0_9B_box" class="comment-replybox-single"></div></li>
                                <li id="bc_0_10B" class="comment" kind="b">
                                 <div class="avatar-image-container">
                                  <img src="//lh5.googleusercontent.com/-Fsb6YxLG-5Q/AAAAAAAAAAI/AAAAAAAAACY/8H8WPYh2OT8/s35-c/photo.jpg">
                                 </div>
                                 <div id="c1077002574062337140" class="comment-block">
                                  <div id="bc_0_10M" class="comment-header" kind="m">
                                   <cite class="user blog-author"><a rel="nofollow" href="https://www.blogger.com/profile/08548593340781885396">Arjan Tijms</a></cite>
                                   <span class="icon user blog-author"></span>
                                   <span class="datetime secondary-text"><a rel="nofollow" href="http://arjan-tijms.omnifaces.org/2012/11/implementing-container-authentication.html?showComment=1405438296833#c1077002574062337140">July 15, 2014 at 8:31 AM</a></span>
                                  </div>
                                  <p id="bc_0_10MC" class="comment-content">&gt;Do you think it might be a way to do it?<br><br>Unfortunately not. As I've explained in the article and which is even better explained by Raymond K. NG (see references above), Java EE does not automatically know about JAAS.<br><br>Using the Login Context will NOT communicate anything to the Java EE container. There is no automatic connection whatsoever between the JAAS Login Context and Java EE.<br><br>Just think of it as implementing your own class, e.g.:<br><br>public class MyLogin {<br> public boolean login;<br>}<br><br>Then you execute:<br><br>MyLogin myLogin = new MyLogin()<br>myLogin.login = true;<br><br>Now you're logged-in according to the instance of the MyLogin class, but of course it's trivial to see that setting this boolean to true does nothing for Java EE. It's exactly the same with JAAS.<br><br>In order to communicate the login details from a JAAS LoginModule to Java EE a connecting thing is needed. This thing is JASPIC, which is the topic of this article ;)<br></p>
                                  <span id="bc_0_10MN" class="comment-actions secondary-text" kind="m"><span class="item-control blog-admin pid-1107289781"><a o="d" target="_self" href="https://www.blogger.com/delete-comment.g?blogID=4498889353428710313&amp;postID=1077002574062337140">Delete</a></span></span>
                                 </div>
                                 <div id="bc_0_10BR" class="comment-replies"></div>
                                 <div id="bc_0_10B_box" class="comment-replybox-single"></div></li>
                                <li id="bc_0_11B" class="comment" kind="b">
                                 <div class="avatar-image-container">
                                  <img src="//lh3.googleusercontent.com/zFdxGE77vvD2w5xHy6jkVuElKv-U9_9qLkRYK8OnbDeJPtjSZ82UPq5w6hJ-SA=s35">
                                 </div>
                                 <div id="c1202802272565040997" class="comment-block">
                                  <div id="bc_0_11M" class="comment-header" kind="m">
                                   <cite class="user"><a rel="nofollow" href="https://www.blogger.com/profile/08110659389324802906">Bruno Palermo</a></cite>
                                   <span class="icon user"></span>
                                   <span class="datetime secondary-text"><a rel="nofollow" href="http://arjan-tijms.omnifaces.org/2012/11/implementing-container-authentication.html?showComment=1405448876091#c1202802272565040997">July 15, 2014 at 11:27 AM</a></span>
                                  </div>
                                  <p id="bc_0_11MC" class="comment-content">Arjan,<br><br>Great explanation! Thank you very much for your time.</p>
                                  <span id="bc_0_11MN" class="comment-actions secondary-text" kind="m"><span class="item-control blog-admin pid-506152976"><a o="d" target="_self" href="https://www.blogger.com/delete-comment.g?blogID=4498889353428710313&amp;postID=1202802272565040997">Delete</a></span></span>
                                 </div>
                                 <div id="bc_0_11BR" class="comment-replies"></div>
                                 <div id="bc_0_11B_box" class="comment-replybox-single"></div></li>
                               </div>
                               <div id="bc_0_8I" class="continue" kind="ci">
                                <a href="javascript:;" target="_self">Reply</a>
                               </div>
                              </ol>
                              <div id="bc_0_8T_box" class="comment-replybox-thread"></div>
                             </div></span>
                           </div>
                           <div id="bc_0_12B_box" class="comment-replybox-single"></div></li>
                          <li id="bc_0_13B" class="comment" kind="b">
                           <div class="avatar-image-container">
                            <img src="//lh3.googleusercontent.com/zFdxGE77vvD2w5xHy6jkVuElKv-U9_9qLkRYK8OnbDeJPtjSZ82UPq5w6hJ-SA=s35">
                           </div>
                           <div id="c7665397568582426542" class="comment-block">
                            <div id="bc_0_13M" class="comment-header" kind="m">
                             <cite class="user"><a rel="nofollow" href="https://www.blogger.com/profile/11427356135556050507">Harley Watts</a></cite>
                             <span class="icon user"></span>
                             <span class="datetime secondary-text"><a rel="nofollow" href="http://arjan-tijms.omnifaces.org/2012/11/implementing-container-authentication.html?showComment=1405747509303#c7665397568582426542">July 18, 2014 at 10:25 PM</a></span>
                            </div>
                            <p id="bc_0_13MC" class="comment-content"><a href="http://www.invisionsolutions.ca/" rel="nofollow">custom software development</a></p>
                            <span id="bc_0_13MN" class="comment-actions secondary-text" kind="m"><a kind="i" href="javascript:;" target="_self" o="r">Reply</a><span class="item-control blog-admin pid-602416376"><a o="d" target="_self" href="https://www.blogger.com/delete-comment.g?blogID=4498889353428710313&amp;postID=7665397568582426542">Delete</a></span></span>
                           </div>
                           <div id="bc_0_13BR" class="comment-replies"></div>
                           <div id="bc_0_13B_box" class="comment-replybox-single"></div></li>
                          <li id="bc_0_14B" class="comment" kind="b">
                           <div class="avatar-image-container">
                            <img src="//lh3.googleusercontent.com/zFdxGE77vvD2w5xHy6jkVuElKv-U9_9qLkRYK8OnbDeJPtjSZ82UPq5w6hJ-SA=s35">
                           </div>
                           <div id="c4727816469686095139" class="comment-block">
                            <div id="bc_0_14M" class="comment-header" kind="m">
                             <cite class="user"><a rel="nofollow" href="https://www.blogger.com/profile/08110659389324802906">Bruno Palermo</a></cite>
                             <span class="icon user"></span>
                             <span class="datetime secondary-text"><a rel="nofollow" href="http://arjan-tijms.omnifaces.org/2012/11/implementing-container-authentication.html?showComment=1406059597815#c4727816469686095139">July 22, 2014 at 1:06 PM</a></span>
                            </div>
                            <p id="bc_0_14MC" class="comment-content">Arjan,<br><br>I implemented your example for Glassfish and added a few modifications based on this article:<br><br>https://blogs.oracle.com/nasradu8/entry/loginmodule_bridge_profile_jaspic_in<br><br>But now I'm struggling to integrate with Glassfish SSO solution.<br><br>I hope that maybe you could help me with some points.<br><br>Thanks,<br>Bruno Palermo</p>
                            <span id="bc_0_14MN" class="comment-actions secondary-text" kind="m"><a kind="i" href="javascript:;" target="_self" o="r">Reply</a><span class="item-control blog-admin pid-506152976"><a o="d" target="_self" href="https://www.blogger.com/delete-comment.g?blogID=4498889353428710313&amp;postID=4727816469686095139">Delete</a></span></span>
                           </div>
                           <div id="bc_0_14BR" class="comment-replies"></div>
                           <div id="bc_0_14B_box" class="comment-replybox-single"></div></li>
                          <li id="bc_0_21B" class="comment" kind="b">
                           <div class="avatar-image-container">
                            <img src="//lh3.googleusercontent.com/zFdxGE77vvD2w5xHy6jkVuElKv-U9_9qLkRYK8OnbDeJPtjSZ82UPq5w6hJ-SA=s35">
                           </div>
                           <div id="c2408143113929329738" class="comment-block">
                            <div id="bc_0_21M" class="comment-header" kind="m">
                             <cite class="user"><a rel="nofollow" href="https://www.blogger.com/profile/13770256603790285307">dbaltor</a></cite>
                             <span class="icon user"></span>
                             <span class="datetime secondary-text"><a rel="nofollow" href="http://arjan-tijms.omnifaces.org/2012/11/implementing-container-authentication.html?showComment=1406627729911#c2408143113929329738">July 29, 2014 at 2:55 AM</a></span>
                            </div>
                            <p id="bc_0_21MC" class="comment-content">Regarding WebSphere, you have to specify the user registry to be used by your installation:<br><br>http://www-01.ibm.com/support/knowledgecenter/SSAW57_8.5.5/com.ibm.websphere.nd.doc/ae/tsec_useregistry.html?cp=SSAW57_8.5.5%2F1-8-2-33-2-1&amp;lang=en</p>
                            <span id="bc_0_21MN" class="comment-actions secondary-text" kind="m"><a kind="i" href="javascript:;" target="_self" o="r">Reply</a><span class="item-control blog-admin pid-733868392"><a o="d" target="_self" href="https://www.blogger.com/delete-comment.g?blogID=4498889353428710313&amp;postID=2408143113929329738">Delete</a></span></span>
                           </div>
                           <div id="bc_0_21BR" class="comment-replies">
                            <span id="bc_0_21b+seedGhrND" kind="d">
                             <div id="bc_0_15T" class="comment-thread inline-thread" kind="t" t="0" u="0">
                              <span id="bc_0_15TT" class="thread-toggle thread-expanded" kind="g"><span id="bc_0_15TA" class="thread-arrow"></span><span id="bc_0_15TN" class="thread-count"><span id="bc_0_15TNT" style="display: none;"></span><span id="bc_0_15TNU" style="display: none;"></span><a href="javascript:;" target="_self">Replies</a>
                                <div id="bc_0_15TD" class="thread-dropContainer thread-expanded">
                                 <span class="thread-drop"></span>
                                </div></span></span>
                              <ol id="bc_0_15TC" class="thread-chrome thread-expanded">
                               <div>
                                <li id="bc_0_15B" class="comment" kind="b">
                                 <div class="avatar-image-container">
                                  <img src="//lh5.googleusercontent.com/-Fsb6YxLG-5Q/AAAAAAAAAAI/AAAAAAAAACY/8H8WPYh2OT8/s35-c/photo.jpg">
                                 </div>
                                 <div id="c3223394358819195731" class="comment-block">
                                  <div id="bc_0_15M" class="comment-header" kind="m">
                                   <cite class="user blog-author"><a rel="nofollow" href="https://www.blogger.com/profile/08548593340781885396">Arjan Tijms</a></cite>
                                   <span class="icon user blog-author"></span>
                                   <span class="datetime secondary-text"><a rel="nofollow" href="http://arjan-tijms.omnifaces.org/2012/11/implementing-container-authentication.html?showComment=1406665692260#c3223394358819195731">July 29, 2014 at 1:28 PM</a></span>
                                  </div>
                                  <p id="bc_0_15MC" class="comment-content">Thanks a lot for the pointer dbaltor!<br><br>I half suspected something like that, but not being anywhere near a WebSphere expert I had no idea where to look and will certainly try out specifying that user registry. I do think it's not entirely correct, because when JASPIC is used a SAM should be in total control and not depend on some server specific configuration to work.<br><br>Then again, in the case of WebSphere you also need to activate (Servlet) security itself which always baffled me as well. Why is WebSphere out of the box not Servlet compliant and do you need to switch a toggle to make it so?<br><br>Anyway, thanks again for your pointer and I'll surely take a look.</p>
                                  <span id="bc_0_15MN" class="comment-actions secondary-text" kind="m"><span class="item-control blog-admin pid-1107289781"><a o="d" target="_self" href="https://www.blogger.com/delete-comment.g?blogID=4498889353428710313&amp;postID=3223394358819195731">Delete</a></span></span>
                                 </div>
                                 <div id="bc_0_15BR" class="comment-replies"></div>
                                 <div id="bc_0_15B_box" class="comment-replybox-single"></div></li>
                                <li id="bc_0_16B" class="comment" kind="b">
                                 <div class="avatar-image-container">
                                  <img src="//lh3.googleusercontent.com/zFdxGE77vvD2w5xHy6jkVuElKv-U9_9qLkRYK8OnbDeJPtjSZ82UPq5w6hJ-SA=s35">
                                 </div>
                                 <div id="c177343062708431257" class="comment-block">
                                  <div id="bc_0_16M" class="comment-header" kind="m">
                                   <cite class="user"><a rel="nofollow" href="https://www.blogger.com/profile/13770256603790285307">dbaltor</a></cite>
                                   <span class="icon user"></span>
                                   <span class="datetime secondary-text"><a rel="nofollow" href="http://arjan-tijms.omnifaces.org/2012/11/implementing-container-authentication.html?showComment=1406704496958#c177343062708431257">July 30, 2014 at 12:14 AM</a></span>
                                  </div>
                                  <p id="bc_0_16MC" class="comment-content">Welcome Arjan! <br><br>Indeed, I've found a reference that states:<br>"The WebSphere Application Server implementation of CallbackHandler supports three callbacks:<br> CallerPrincipalCallback<br> GroupPrincipalCallback<br> PasswordValidationCallback<br>WebSphere Application Server expects the name values obtained with PasswordValidationCallback.getUsername() and CallerPrincipalCallback.getName() to be identical. If they are not, unpredictable results occur."<br><br>So it looks like your implementation didn't work as it was supposed to and maybe WebSphere was still looking for an user id in its configured repository, in your case a default (file) repository which was empty (but wasadmin account). That possibly can explain why you had to create an user id using the admin console.<br><br>Check it out here:<br>http://www-01.ibm.com/support/knowledgecenter/api/content/SSAW57_8.5.5/com.ibm.websphere.nd.doc/ae/tsec_jaspi_develop.html</p>
                                  <span id="bc_0_16MN" class="comment-actions secondary-text" kind="m"><span class="item-control blog-admin pid-733868392"><a o="d" target="_self" href="https://www.blogger.com/delete-comment.g?blogID=4498889353428710313&amp;postID=177343062708431257">Delete</a></span></span>
                                 </div>
                                 <div id="bc_0_16BR" class="comment-replies"></div>
                                 <div id="bc_0_16B_box" class="comment-replybox-single"></div></li>
                                <li id="bc_0_17B" class="comment" kind="b">
                                 <div class="avatar-image-container">
                                  <img src="//lh5.googleusercontent.com/-Fsb6YxLG-5Q/AAAAAAAAAAI/AAAAAAAAACY/8H8WPYh2OT8/s35-c/photo.jpg">
                                 </div>
                                 <div id="c4150084124082385316" class="comment-block">
                                  <div id="bc_0_17M" class="comment-header" kind="m">
                                   <cite class="user blog-author"><a rel="nofollow" href="https://www.blogger.com/profile/08548593340781885396">Arjan Tijms</a></cite>
                                   <span class="icon user blog-author"></span>
                                   <span class="datetime secondary-text"><a rel="nofollow" href="http://arjan-tijms.omnifaces.org/2012/11/implementing-container-authentication.html?showComment=1406716364151#c4150084124082385316">July 30, 2014 at 3:32 AM</a></span>
                                  </div>
                                  <p id="bc_0_17MC" class="comment-content">&gt;<i>So it looks like your implementation didn't work as it was supposed to and maybe WebSphere was still looking for an user id in its configured repository, in your case a default (file) repository which was empty (but wasadmin account).</i><br><br>Indeed, after a debugging session (WebSphere being closed source is horribly difficult to debug, but you can deduct a lot) this is what seemed to happen indeed. I posted about this some year ago here: https://www.ibm.com/developerworks/community/forums/thread.jspa?threadID=470426<br><br>The problem is that the implementation I used should be what's mandated by the spec. I had a quick chat with the JASPIC spec lead about this a while ago and he seemed to support that.<br><br>As mentioned, when a JASPIC SAM is configured, the SAM is in control of the authentication process. The SAM can delegate to other systems (repositories), but that's all under the direct control of the SAM's code. Whatever name + groups the SAM puts in the CallerPrincipalCallback and GroupPrincipalCallback have to be accepted at face value by the container.<br><br>WebSphere is the only server that still checks the name + groups with this proprietary repository. This then means that for WebSphere you always have to pair your JASPIC module with an IBM specific repository plug-in, unless there's a default NO-OP repository that just says "yes" or "accepted" to every check. I'll still have to dive deeper into this subject to see if this is indeed possible.<br><br>At any length, having to do this pairing and/or coding something specifically for WebSphere goes against the very idea of JASPC, which is to provide <b>portable</b> authentication modules.</p>
                                  <span id="bc_0_17MN" class="comment-actions secondary-text" kind="m"><span class="item-control blog-admin pid-1107289781"><a o="d" target="_self" href="https://www.blogger.com/delete-comment.g?blogID=4498889353428710313&amp;postID=4150084124082385316">Delete</a></span></span>
                                 </div>
                                 <div id="bc_0_17BR" class="comment-replies"></div>
                                 <div id="bc_0_17B_box" class="comment-replybox-single"></div></li>
                                <li id="bc_0_18B" class="comment" kind="b">
                                 <div class="avatar-image-container">
                                  <img src="//lh3.googleusercontent.com/zFdxGE77vvD2w5xHy6jkVuElKv-U9_9qLkRYK8OnbDeJPtjSZ82UPq5w6hJ-SA=s35">
                                 </div>
                                 <div id="c8373277727944584890" class="comment-block">
                                  <div id="bc_0_18M" class="comment-header" kind="m">
                                   <cite class="user"><a rel="nofollow" href="https://www.blogger.com/profile/13770256603790285307">dbaltor</a></cite>
                                   <span class="icon user"></span>
                                   <span class="datetime secondary-text"><a rel="nofollow" href="http://arjan-tijms.omnifaces.org/2012/11/implementing-container-authentication.html?showComment=1406730373605#c8373277727944584890">July 30, 2014 at 7:26 AM</a></span>
                                  </div>
                                  <p id="bc_0_18MC" class="comment-content">I do agree with you that WebSphere's behavior of checking the username on a repository is neither the right action it should take and nor the expected one according to the product documentation. That's why Ive pointed you to the post which mentions:<br><br>"WebSphere Application Server expects the name values obtained with PasswordValidationCallback.getUsername() and CallerPrincipalCallback.getName() to be identical. If they are not, unpredictable results occur."<br><br>I suppose (its just an assumption!!) this behavior is being sparked by the absence of a PasswordValidationCallback in your Callback[] array. So, if I may say so, I suggest you add the following lines on your validateRequest method:<br><br>PasswordValidationCallback passwordValidationCallback =<br>new PasswordValidationCallback(clientSubject, "test", null);<br><br>try {<br>handler.handle(new Callback[] { callerPrincipalCallback,<br>groupPrincipalCallback,<br>passwordValidationCallback });<br>} catch (IOException | UnsupportedCallbackException e) {<br>e.printStackTrace();<br>}</p>
                                  <span id="bc_0_18MN" class="comment-actions secondary-text" kind="m"><span class="item-control blog-admin pid-733868392"><a o="d" target="_self" href="https://www.blogger.com/delete-comment.g?blogID=4498889353428710313&amp;postID=8373277727944584890">Delete</a></span></span>
                                 </div>
                                 <div id="bc_0_18BR" class="comment-replies"></div>
                                 <div id="bc_0_18B_box" class="comment-replybox-single"></div></li>
                                <li id="bc_0_19B" class="comment" kind="b">
                                 <div class="avatar-image-container">
                                  <img src="//lh5.googleusercontent.com/-Fsb6YxLG-5Q/AAAAAAAAAAI/AAAAAAAAACY/8H8WPYh2OT8/s35-c/photo.jpg">
                                 </div>
                                 <div id="c4240988930795098610" class="comment-block">
                                  <div id="bc_0_19M" class="comment-header" kind="m">
                                   <cite class="user blog-author"><a rel="nofollow" href="https://www.blogger.com/profile/08548593340781885396">Arjan Tijms</a></cite>
                                   <span class="icon user blog-author"></span>
                                   <span class="datetime secondary-text"><a rel="nofollow" href="http://arjan-tijms.omnifaces.org/2012/11/implementing-container-authentication.html?showComment=1406733432090#c4240988930795098610">July 30, 2014 at 8:17 AM</a></span>
                                  </div>
                                  <p id="bc_0_19MC" class="comment-content">&gt; <i>I suppose (its just an assumption!!) this behavior is being sparked by the absence of a PasswordValidationCallback in your Callback[] array. </i><br><br>May indeed be something to look into as well. I personally interpreted that statement though as "IFF you use the PasswordValidationCallback, THEN the name values should be identical". This indeed sounds reasonable to me.<br><br>The passwordValidationCallback however is not applicable if the SAM manages the passwords (or, as in increasing many cases, there's not a password to begin with). Therefore using the passwordValidationCallback should be completely optional, but I'll certainly try if it does anything on WebSphere. Thanks again!</p>
                                  <span id="bc_0_19MN" class="comment-actions secondary-text" kind="m"><span class="item-control blog-admin pid-1107289781"><a o="d" target="_self" href="https://www.blogger.com/delete-comment.g?blogID=4498889353428710313&amp;postID=4240988930795098610">Delete</a></span></span>
                                 </div>
                                 <div id="bc_0_19BR" class="comment-replies"></div>
                                 <div id="bc_0_19B_box" class="comment-replybox-single"></div></li>
                                <li id="bc_0_20B" class="comment" kind="b">
                                 <div class="avatar-image-container">
                                  <img src="//lh5.googleusercontent.com/-5dCYObhO1so/AAAAAAAAAAI/AAAAAAAACY4/R4ZWNEo3j3c/s35-c/photo.jpg">
                                 </div>
                                 <div id="c5017276828301877912" class="comment-block">
                                  <div id="bc_0_20M" class="comment-header" kind="m">
                                   <cite class="user"><a rel="nofollow" href="https://www.blogger.com/profile/06709900922358770930">Archimedes Trajano</a></cite>
                                   <span class="icon user"></span>
                                   <span class="datetime secondary-text"><a rel="nofollow" href="http://arjan-tijms.omnifaces.org/2012/11/implementing-container-authentication.html?showComment=1443064557189#c5017276828301877912">September 23, 2015 at 8:15 PM</a></span>
                                  </div>
                                  <p id="bc_0_20MC" class="comment-content">They sort of fixed this on 8.5.5.7. You still require the group to be defined in the registry, but you don't require the user anymore.</p>
                                  <span id="bc_0_20MN" class="comment-actions secondary-text" kind="m"><span class="item-control blog-admin pid-2071024754"><a o="d" target="_self" href="https://www.blogger.com/delete-comment.g?blogID=4498889353428710313&amp;postID=5017276828301877912">Delete</a></span></span>
                                 </div>
                                 <div id="bc_0_20BR" class="comment-replies"></div>
                                 <div id="bc_0_20B_box" class="comment-replybox-single"></div></li>
                               </div>
                               <div id="bc_0_15I" class="continue" kind="ci">
                                <a href="javascript:;" target="_self">Reply</a>
                               </div>
                              </ol>
                              <div id="bc_0_15T_box" class="comment-replybox-thread"></div>
                             </div></span>
                           </div>
                           <div id="bc_0_21B_box" class="comment-replybox-single"></div></li>
                          <li id="bc_0_22B" class="comment" kind="b">
                           <div class="avatar-image-container">
                            <img src="//lh3.googleusercontent.com/zFdxGE77vvD2w5xHy6jkVuElKv-U9_9qLkRYK8OnbDeJPtjSZ82UPq5w6hJ-SA=s35">
                           </div>
                           <div id="c2498684736239104497" class="comment-block">
                            <div id="bc_0_22M" class="comment-header" kind="m">
                             <cite class="user"><a rel="nofollow" href="https://www.blogger.com/profile/13770256603790285307">dbaltor</a></cite>
                             <span class="icon user"></span>
                             <span class="datetime secondary-text"><a rel="nofollow" href="http://arjan-tijms.omnifaces.org/2012/11/implementing-container-authentication.html?showComment=1406730260608#c2498684736239104497">July 30, 2014 at 7:24 AM</a></span>
                            </div>
                            <p id="bc_0_22MC" class="comment-content"><span class="deleted-comment">This comment has been removed by the author.</span></p>
                            <span id="bc_0_22MN" class="comment-actions secondary-text" kind="m"><a kind="i" href="javascript:;" target="_self" o="r">Reply</a><span class="item-control blog-admin "><a o="d" target="_self" href="https://www.blogger.com/delete-comment.g?blogID=4498889353428710313&amp;postID=2498684736239104497">Delete</a></span></span>
                           </div>
                           <div id="bc_0_22BR" class="comment-replies"></div>
                           <div id="bc_0_22B_box" class="comment-replybox-single"></div></li>
                          <li id="bc_0_24B" class="comment" kind="b">
                           <div class="avatar-image-container">
                            <img src="//lh3.googleusercontent.com/-kqykVp9E1KU/AAAAAAAAAAI/AAAAAAAAAEs/4EFtagdUjy8/s35-c/photo.jpg">
                           </div>
                           <div id="c4176813724399945980" class="comment-block">
                            <div id="bc_0_24M" class="comment-header" kind="m">
                             <cite class="user"><a rel="nofollow" href="https://www.blogger.com/profile/00854947997366382076">Micha? Krzempek</a></cite>
                             <span class="icon user"></span>
                             <span class="datetime secondary-text"><a rel="nofollow" href="http://arjan-tijms.omnifaces.org/2012/11/implementing-container-authentication.html?showComment=1414411214853#c4176813724399945980">October 27, 2014 at 5:00 AM</a></span>
                            </div>
                            <p id="bc_0_24MC" class="comment-content">Your example code is not conforming all JSR-196 API requirements.<br><br>AuthConfigProvider should return not null implementation of ClientAuthConfig and ServerAuthConfig. If provider do not support client side authentication, implementation of ClientAuthConfig should return null from getAuthContext method.<br><br>Look at page 140 of JSR-196 1.1 version maintenance release B.<br><br>Note that GlassFish has "Default Principal To Role Mapping" security flag (defaulted to false). If you switch it to true (by admin console or asadmin tool), additional XML descriptor for role mapping is not necessary.</p>
                            <span id="bc_0_24MN" class="comment-actions secondary-text" kind="m"><a kind="i" href="javascript:;" target="_self" o="r">Reply</a><span class="item-control blog-admin pid-326869019"><a o="d" target="_self" href="https://www.blogger.com/delete-comment.g?blogID=4498889353428710313&amp;postID=4176813724399945980">Delete</a></span></span>
                           </div>
                           <div id="bc_0_24BR" class="comment-replies">
                            <span id="bc_0_24b+seedGhrUD" kind="d">
                             <div id="bc_0_23T" class="comment-thread inline-thread" kind="t" t="0" u="0">
                              <span id="bc_0_23TT" class="thread-toggle thread-expanded" kind="g"><span id="bc_0_23TA" class="thread-arrow"></span><span id="bc_0_23TN" class="thread-count"><span id="bc_0_23TNT" style="display: none;"></span><span id="bc_0_23TNU" style="display: none;"></span><a href="javascript:;" target="_self">Replies</a>
                                <div id="bc_0_23TD" class="thread-dropContainer thread-expanded">
                                 <span class="thread-drop"></span>
                                </div></span></span>
                              <ol id="bc_0_23TC" class="thread-chrome thread-expanded">
                               <div>
                                <li id="bc_0_23B" class="comment" kind="b">
                                 <div class="avatar-image-container">
                                  <img src="//lh5.googleusercontent.com/-Fsb6YxLG-5Q/AAAAAAAAAAI/AAAAAAAAACY/8H8WPYh2OT8/s35-c/photo.jpg">
                                 </div>
                                 <div id="c5809154498370311172" class="comment-block">
                                  <div id="bc_0_23M" class="comment-header" kind="m">
                                   <cite class="user blog-author"><a rel="nofollow" href="https://www.blogger.com/profile/08548593340781885396">Arjan Tijms</a></cite>
                                   <span class="icon user blog-author"></span>
                                   <span class="datetime secondary-text"><a rel="nofollow" href="http://arjan-tijms.omnifaces.org/2012/11/implementing-container-authentication.html?showComment=1414420764666#c5809154498370311172">October 27, 2014 at 7:39 AM</a></span>
                                  </div>
                                  <p id="bc_0_23MC" class="comment-content">Thanks for your comment Micha? :)<br><br>The AuthConfigProvider as demonstrated attempts to be the most minimal example to get a SAM installed for the Servlet Container Profile. Indeed, client side authentication is completely ignored here. But you're right, just for correctness it maybe should do just that, even when in practice this is never really a problem given the very limited applicability of this very, very specific AuthConfigProvider.<br><br>&gt;Note that GlassFish has "Default Principal To Role Mapping" security flag (defaulted to false).<br><br>Yes, I'm fully aware of that ;) But the intend here was to do everything from within the archive. If only that flag could be switched from within the archive (e.g in sun/glassfish-web.xml) then I surely would have used that. But asadmin tools and especially admin consoles are just not an option here.</p>
                                  <span id="bc_0_23MN" class="comment-actions secondary-text" kind="m"><span class="item-control blog-admin pid-1107289781"><a o="d" target="_self" href="https://www.blogger.com/delete-comment.g?blogID=4498889353428710313&amp;postID=5809154498370311172">Delete</a></span></span>
                                 </div>
                                 <div id="bc_0_23BR" class="comment-replies"></div>
                                 <div id="bc_0_23B_box" class="comment-replybox-single"></div></li>
                               </div>
                               <div id="bc_0_23I" class="continue" kind="ci">
                                <a href="javascript:;" target="_self">Reply</a>
                               </div>
                              </ol>
                              <div id="bc_0_23T_box" class="comment-replybox-thread"></div>
                             </div></span>
                           </div>
                           <div id="bc_0_24B_box" class="comment-replybox-single"></div></li>
                          <li id="bc_0_25B" class="comment" kind="b">
                           <div class="avatar-image-container">
                            <img src="//lh3.googleusercontent.com/zFdxGE77vvD2w5xHy6jkVuElKv-U9_9qLkRYK8OnbDeJPtjSZ82UPq5w6hJ-SA=s35">
                           </div>
                           <div id="c7911867153605602713" class="comment-block">
                            <div id="bc_0_25M" class="comment-header" kind="m">
                             <cite class="user"><a rel="nofollow" href="https://www.blogger.com/profile/01877240194499460152">Bruno Palermo</a></cite>
                             <span class="icon user"></span>
                             <span class="datetime secondary-text"><a rel="nofollow" href="http://arjan-tijms.omnifaces.org/2012/11/implementing-container-authentication.html?showComment=1422893033371#c7911867153605602713">February 2, 2015 at 8:03 AM</a></span>
                            </div>
                            <p id="bc_0_25MC" class="comment-content">Arjan,<br><br>Where would you put settings information, like JDNI Datasource, so it can be retreived by the ServerAuthModule?<br><br>Thanks,<br>Bruno Palermo</p>
                            <span id="bc_0_25MN" class="comment-actions secondary-text" kind="m"><a kind="i" href="javascript:;" target="_self" o="r">Reply</a><span class="item-control blog-admin pid-562919412"><a o="d" target="_self" href="https://www.blogger.com/delete-comment.g?blogID=4498889353428710313&amp;postID=7911867153605602713">Delete</a></span></span>
                           </div>
                           <div id="bc_0_25BR" class="comment-replies"></div>
                           <div id="bc_0_25B_box" class="comment-replybox-single"></div></li>
                          <li id="bc_0_26B" class="comment" kind="b">
                           <div class="avatar-image-container">
                            <img src="//lh3.googleusercontent.com/zFdxGE77vvD2w5xHy6jkVuElKv-U9_9qLkRYK8OnbDeJPtjSZ82UPq5w6hJ-SA=s35">
                           </div>
                           <div id="c2550247422866920417" class="comment-block">
                            <div id="bc_0_26M" class="comment-header" kind="m">
                             <cite class="user"><a rel="nofollow" href="https://www.blogger.com/profile/13575795650654330823">Evans</a></cite>
                             <span class="icon user"></span>
                             <span class="datetime secondary-text"><a rel="nofollow" href="http://arjan-tijms.omnifaces.org/2012/11/implementing-container-authentication.html?showComment=1430807740816#c2550247422866920417">May 4, 2015 at 11:35 PM</a></span>
                            </div>
                            <p id="bc_0_26MC" class="comment-content">What do you make of https://docs.oracle.com/middleware/1213/wls/SECMG/jaspic.htm#SECMG663<br>which mentions requirements to make configurations on the weblogic console and have classes on the system classpath?<br>My attempts with weblogic 12.1.3 work for my web application but seem to break the weblogic console. I can't find anything that explains how to forward to other authentication mechanisms a la REQUIRED/REQUISITE/SUFFICIENT/OPTIONAL flags.</p>
                            <span id="bc_0_26MN" class="comment-actions secondary-text" kind="m"><a kind="i" href="javascript:;" target="_self" o="r">Reply</a><span class="item-control blog-admin pid-1081039884"><a o="d" target="_self" href="https://www.blogger.com/delete-comment.g?blogID=4498889353428710313&amp;postID=2550247422866920417">Delete</a></span></span>
                           </div>
                           <div id="bc_0_26BR" class="comment-replies"></div>
                           <div id="bc_0_26B_box" class="comment-replybox-single"></div></li>
                          <li id="bc_0_31B" class="comment" kind="b">
                           <div class="avatar-image-container">
                            <img src="//lh3.googleusercontent.com/zFdxGE77vvD2w5xHy6jkVuElKv-U9_9qLkRYK8OnbDeJPtjSZ82UPq5w6hJ-SA=s35">
                           </div>
                           <div id="c2947359138280806613" class="comment-block">
                            <div id="bc_0_31M" class="comment-header" kind="m">
                             <cite class="user"><a rel="nofollow" href="https://www.blogger.com/profile/01010814120784566911">pradeep choudhary</a></cite>
                             <span class="icon user"></span>
                             <span class="datetime secondary-text"><a rel="nofollow" href="http://arjan-tijms.omnifaces.org/2012/11/implementing-container-authentication.html?showComment=1434010833618#c2947359138280806613">June 11, 2015 at 1:20 AM</a></span>
                            </div>
                            <p id="bc_0_31MC" class="comment-content">Hi Arjan, I am trying to run authentication module example with wildfly8.2.0 but it is not working. Can you pls suggest me, Do I need to add anything in standalone.xml. Pls guide.<br><br>Thanks - Pradeep</p>
                            <span id="bc_0_31MN" class="comment-actions secondary-text" kind="m"><a kind="i" href="javascript:;" target="_self" o="r">Reply</a><span class="item-control blog-admin pid-1311061113"><a o="d" target="_self" href="https://www.blogger.com/delete-comment.g?blogID=4498889353428710313&amp;postID=2947359138280806613">Delete</a></span></span>
                           </div>
                           <div id="bc_0_31BR" class="comment-replies">
                            <span id="bc_0_31b+seedGhrYD" kind="d">
                             <div id="bc_0_27T" class="comment-thread inline-thread" kind="t" t="0" u="0">
                              <span id="bc_0_27TT" class="thread-toggle thread-expanded" kind="g"><span id="bc_0_27TA" class="thread-arrow"></span><span id="bc_0_27TN" class="thread-count"><span id="bc_0_27TNT" style="display: none;"></span><span id="bc_0_27TNU" style="display: none;"></span><a href="javascript:;" target="_self">Replies</a>
                                <div id="bc_0_27TD" class="thread-dropContainer thread-expanded">
                                 <span class="thread-drop"></span>
                                </div></span></span>
                              <ol id="bc_0_27TC" class="thread-chrome thread-expanded">
                               <div>
                                <li id="bc_0_27B" class="comment" kind="b">
                                 <div class="avatar-image-container">
                                  <img src="//lh5.googleusercontent.com/-Fsb6YxLG-5Q/AAAAAAAAAAI/AAAAAAAAACY/8H8WPYh2OT8/s35-c/photo.jpg">
                                 </div>
                                 <div id="c7165611127090438230" class="comment-block">
                                  <div id="bc_0_27M" class="comment-header" kind="m">
                                   <cite class="user blog-author"><a rel="nofollow" href="https://www.blogger.com/profile/08548593340781885396">Arjan Tijms</a></cite>
                                   <span class="icon user blog-author"></span>
                                   <span class="datetime secondary-text"><a rel="nofollow" href="http://arjan-tijms.omnifaces.org/2012/11/implementing-container-authentication.html?showComment=1434015935383#c7165611127090438230">June 11, 2015 at 2:45 AM</a></span>
                                  </div>
                                  <p id="bc_0_27MC" class="comment-content">It's indeed necessary to add something in standalone.xml for WildFly. This is *extremely* unfortunate as it should "just-work", but it is what it is I guess.<br><br>You need to add the XML to standalone.xml as mentioned here:<br><br><a href="https://github.com/javaee-samples/javaee7-samples/issues/243" rel="nofollow">https://github.com/javaee-samples/javaee7-samples/issues/243</a><br><br>And then add a jboss-web.xml like here:<br><br><a href="https://github.com/arjantijms/javaee7-samples/blob/master/jaspic/basic-authentication/src/main/webapp/WEB-INF/jboss-web.xml" rel="nofollow">https://github.com/arjantijms/javaee7-samples/blob/master/jaspic/basic-authentication/src/main/webapp/WEB-INF/jboss-web.xml</a></p>
                                  <span id="bc_0_27MN" class="comment-actions secondary-text" kind="m"><span class="item-control blog-admin pid-1107289781"><a o="d" target="_self" href="https://www.blogger.com/delete-comment.g?blogID=4498889353428710313&amp;postID=7165611127090438230">Delete</a></span></span>
                                 </div>
                                 <div id="bc_0_27BR" class="comment-replies"></div>
                                 <div id="bc_0_27B_box" class="comment-replybox-single"></div></li>
                                <li id="bc_0_28B" class="comment" kind="b">
                                 <div class="avatar-image-container">
                                  <img src="//lh3.googleusercontent.com/zFdxGE77vvD2w5xHy6jkVuElKv-U9_9qLkRYK8OnbDeJPtjSZ82UPq5w6hJ-SA=s35">
                                 </div>
                                 <div id="c3800808044708404795" class="comment-block">
                                  <div id="bc_0_28M" class="comment-header" kind="m">
                                   <cite class="user"><a rel="nofollow" href="https://www.blogger.com/profile/01010814120784566911">pradeep choudhary</a></cite>
                                   <span class="icon user"></span>
                                   <span class="datetime secondary-text"><a rel="nofollow" href="http://arjan-tijms.omnifaces.org/2012/11/implementing-container-authentication.html?showComment=1434030837725#c3800808044708404795">June 11, 2015 at 6:53 AM</a></span>
                                  </div>
                                  <p id="bc_0_28MC" class="comment-content"><span class="deleted-comment">This comment has been removed by the author.</span></p>
                                  <span id="bc_0_28MN" class="comment-actions secondary-text" kind="m"><span class="item-control blog-admin "><a o="d" target="_self" href="https://www.blogger.com/delete-comment.g?blogID=4498889353428710313&amp;postID=3800808044708404795">Delete</a></span></span>
                                 </div>
                                 <div id="bc_0_28BR" class="comment-replies"></div>
                                 <div id="bc_0_28B_box" class="comment-replybox-single"></div></li>
                                <li id="bc_0_29B" class="comment" kind="b">
                                 <div class="avatar-image-container">
                                  <img src="//lh3.googleusercontent.com/zFdxGE77vvD2w5xHy6jkVuElKv-U9_9qLkRYK8OnbDeJPtjSZ82UPq5w6hJ-SA=s35">
                                 </div>
                                 <div id="c5018286118524525253" class="comment-block">
                                  <div id="bc_0_29M" class="comment-header" kind="m">
                                   <cite class="user"><a rel="nofollow" href="https://www.blogger.com/profile/01010814120784566911">pradeep choudhary</a></cite>
                                   <span class="icon user"></span>
                                   <span class="datetime secondary-text"><a rel="nofollow" href="http://arjan-tijms.omnifaces.org/2012/11/implementing-container-authentication.html?showComment=1434031548390#c5018286118524525253">June 11, 2015 at 7:05 AM</a></span>
                                  </div>
                                  <p id="bc_0_29MC" class="comment-content">Hi Arjan, <br><br>Actually I am trying to implement Form Based authentication Using Jaspic and I refer the given links but could not make it. Here is code ..<br><br>-------------Web.xml----------------------------<br> {security-constraint} <br> {web-resource-collection} <br> {web-resource-name}Home{/web-resource-name} <br> {url-pattern}/*{/url-pattern} <br> {/web-resource-collection} <br> {auth-constraint} <br> {role-name}admin{/role-name} <br> {/auth-constraint} <br> {/security-constraint} <br> <br> {login-config} <br> {auth-method}FORM{/auth-method} <br> {realm-name}form-auth{/realm-name} <br> {form-login-config}<br> {form-login-page}/login.jsp{/form-login-page}<br> {form-error-page}/loginerror.jsp{/form-error-page}<br> {/form-login-config}<br> {/login-config} <br> <br> {security-role} <br> {role-name}admin{/role-name} <br> {/security-role} <br>{/web-app} <br>------------------------jboss-web.xml-----------------------<br>{jboss-web} <br> {security-domain}form-auth{/security-domain}<br> {disable-audit}true{/disable-audit}<br>{/jboss-web} <br>-----------------------standalone.xml-------------------------<br> {security-domain name="form-auth" cache-type="default"}<br> {authentication-jaspi}<br> {login-module-stack name="lm-stack"}<br> {login-module code="com.pkc.TestAuthModule" flag="required"}<br> {/login-module}<br> {/login-module-stack}<br> {auth-module code="org.jboss.as.web.security.jaspi.modules.HTTPFormServerAuthModule" flag="required" login-module-stack-ref="lm-stack"/}<br> {/authentication-jaspi}<br> {/security-domain}</p>
                                  <span id="bc_0_29MN" class="comment-actions secondary-text" kind="m"><span class="item-control blog-admin pid-1311061113"><a o="d" target="_self" href="https://www.blogger.com/delete-comment.g?blogID=4498889353428710313&amp;postID=5018286118524525253">Delete</a></span></span>
                                 </div>
                                 <div id="bc_0_29BR" class="comment-replies"></div>
                                 <div id="bc_0_29B_box" class="comment-replybox-single"></div></li>
                                <li id="bc_0_30B" class="comment" kind="b">
                                 <div class="avatar-image-container">
                                  <img src="//lh3.googleusercontent.com/zFdxGE77vvD2w5xHy6jkVuElKv-U9_9qLkRYK8OnbDeJPtjSZ82UPq5w6hJ-SA=s35">
                                 </div>
                                 <div id="c4420433125337854471" class="comment-block">
                                  <div id="bc_0_30M" class="comment-header" kind="m">
                                   <cite class="user"><a rel="nofollow" href="https://www.blogger.com/profile/01010814120784566911">pradeep choudhary</a></cite>
                                   <span class="icon user"></span>
                                   <span class="datetime secondary-text"><a rel="nofollow" href="http://arjan-tijms.omnifaces.org/2012/11/implementing-container-authentication.html?showComment=1434095274544#c4420433125337854471">June 12, 2015 at 12:47 AM</a></span>
                                  </div>
                                  <p id="bc_0_30MC" class="comment-content">Hi Arjan,<br>Could you please review above code and suggest to make it work ? Awaiting for your response..! <br>Thank you..</p>
                                  <span id="bc_0_30MN" class="comment-actions secondary-text" kind="m"><span class="item-control blog-admin pid-1311061113"><a o="d" target="_self" href="https://www.blogger.com/delete-comment.g?blogID=4498889353428710313&amp;postID=4420433125337854471">Delete</a></span></span>
                                 </div>
                                 <div id="bc_0_30BR" class="comment-replies"></div>
                                 <div id="bc_0_30B_box" class="comment-replybox-single"></div></li>
                               </div>
                               <div id="bc_0_27I" class="continue" kind="ci">
                                <a href="javascript:;" target="_self">Reply</a>
                               </div>
                              </ol>
                              <div id="bc_0_27T_box" class="comment-replybox-thread"></div>
                             </div></span>
                           </div>
                           <div id="bc_0_31B_box" class="comment-replybox-single"></div></li>
                          <li id="bc_0_34B" class="comment" kind="b">
                           <div class="avatar-image-container">
                            <img src="//lh3.googleusercontent.com/Rw_wdkZHfDXh8tDEBFF1Q3aSS_nDE-gMVWNfOHb7a2nIp2XuWAmJyGISHv9akZE=s35">
                           </div>
                           <div id="c3274534814440913997" class="comment-block">
                            <div id="bc_0_34M" class="comment-header" kind="m">
                             <cite class="user"><a rel="nofollow" href="http://virtuousoutlaw.livejournal.com/">virtuousoutlaw</a></cite>
                             <span class="icon user"></span>
                             <span class="datetime secondary-text"><a rel="nofollow" href="http://arjan-tijms.omnifaces.org/2012/11/implementing-container-authentication.html?showComment=1435766347956#c3274534814440913997">July 1, 2015 at 8:59 AM</a></span>
                            </div>
                            <p id="bc_0_34MC" class="comment-content">Hello Arjan; thanks for all the time and effort you've tirelessly invested into the improvement of the Java EE security landscape!<br><br>I've set up a trivial "app-agnostic" JASPIC Servlet profile-specific SAM to integrate an external authentication system with my AS. It's functioning decently, except for the case of its validateRequest method getting invoked "during service invocation" --i.e. due to applications invoking HttpServletRequest#authenticate()-- which irks me a tiny bit. Initially I handled this case the usual, simplistic (and probably naive) way; call sendRedirect on the MessageInfo-encapsulated HttpServletResponse and return a SEND_CONTINUE, so as to ask for the user to be redirected the external login endpoint. As you can imagine, I soon started running into IllegalStateExceptions due to some apps' Filters being unable to modify the HttpServletResponse. I then thought about wrapping the response in MessageInfo, but, unless I'm misinterpreting the spec here, I can only do so when returning SUCCESS. The simple workaround I've employed for the time being has been to set a redirection HTTP status code on the response without committing it. What annoys me, regardless of wrapping, is that, since the SAM is in that case principally treated as just another Filter within the chain (and certainly not the first one) by the runtime, there's no guarantee that preceeding Filter(s) won't potentially alter the status code set on the response by the SAM. How am I supposed to issue a client redirect then? Common sense tells me that, since I want the SAM to be able to cater for the authentication needs of an arbitrary number of applications (which themselves should just ignore the SAM's existence to the greatest extend possible), the SAM should be capable of "overruling" whatever Servlet Filters or other request/response-modifying components have been set up by the applications it serves --i.e. "just break their chain", if you will-- when it needs to do so. However, "during service invocation" I'm afraid it just can't.<br><br>Am I missing something here or am I just plain wrong? I'd appreciate any insight you could provide on the matter.</p>
                            <span id="bc_0_34MN" class="comment-actions secondary-text" kind="m"><a kind="i" href="javascript:;" target="_self" o="r">Reply</a><span class="item-control blog-admin pid-77561647"><a o="d" target="_self" href="https://www.blogger.com/delete-comment.g?blogID=4498889353428710313&amp;postID=3274534814440913997">Delete</a></span></span>
                           </div>
                           <div id="bc_0_34BR" class="comment-replies">
                            <span id="bc_0_34b+seedGhrdD" kind="d">
                             <div id="bc_0_32T" class="comment-thread inline-thread" kind="t" t="0" u="0">
                              <span id="bc_0_32TT" class="thread-toggle thread-expanded" kind="g"><span id="bc_0_32TA" class="thread-arrow"></span><span id="bc_0_32TN" class="thread-count"><span id="bc_0_32TNT" style="display: none;"></span><span id="bc_0_32TNU" style="display: none;"></span><a href="javascript:;" target="_self">Replies</a>
                                <div id="bc_0_32TD" class="thread-dropContainer thread-expanded">
                                 <span class="thread-drop"></span>
                                </div></span></span>
                              <ol id="bc_0_32TC" class="thread-chrome thread-expanded">
                               <div>
                                <li id="bc_0_32B" class="comment" kind="b">
                                 <div class="avatar-image-container">
                                  <img src="//lh5.googleusercontent.com/-Fsb6YxLG-5Q/AAAAAAAAAAI/AAAAAAAAACY/8H8WPYh2OT8/s35-c/photo.jpg">
                                 </div>
                                 <div id="c8183413323385619817" class="comment-block">
                                  <div id="bc_0_32M" class="comment-header" kind="m">
                                   <cite class="user blog-author"><a rel="nofollow" href="https://www.blogger.com/profile/08548593340781885396">Arjan Tijms</a></cite>
                                   <span class="icon user blog-author"></span>
                                   <span class="datetime secondary-text"><a rel="nofollow" href="http://arjan-tijms.omnifaces.org/2012/11/implementing-container-authentication.html?showComment=1436380096941#c8183413323385619817">July 8, 2015 at 11:28 AM</a></span>
                                  </div>
                                  <p id="bc_0_32MC" class="comment-content">&gt;As you can imagine, I soon started running into IllegalStateExceptions due to some apps' Filters being unable to modify the HttpServletResponse.<br><br>I can imagine that, and there's another common cause for IllegalStateExceptions in this case and that's the fact that a response may already have been committed. <br><br>&gt;I then thought about wrapping the response in MessageInfo, but, unless I'm misinterpreting the spec here, I can only do so when returning SUCCESS. <br><br>I've to double check, but for those cases where the SAM is called before the service invocation this is the only logical moment indeed, since in all other situations the response wouldn't be used anymore after that. The case for a SAM invocation during the response is more difficult, as how exactly would the wrapped response arrive at the next Filter or Servlet in that case?<br><br>&gt;Am I missing something here or am I just plain wrong?<br><br>It's a difficult situation. The fact is that to a certain extent many Filters are also required to work with an arbitrary amount of applications. But they too have a hard time coping with things Filters that happen to appear in the chain before them do, and they can also realistically only wrap the response for Filters that come *after* them, not for Filters that come before them. The Filter that comes before a Filter that wraps a response still has a reference to the original response that can't be changed from a later Filter.<br><br>A SAM does have a specific edge over a Filter, and that's the fact that it's ALSO invoked before any other Filter or Servlet. At this point your SAM must have returned SUCCESS already, otherwise the Filter or Servlet from which you called HttpServletRequest#authenticate() could not have been invoked.<br><br>During this initial first call to the SAM you may be able to wrap the response. When the SAM is called the second time (after calling #authenticate) it can recognise that the response has been wrapped and just set the response code and perhaps even commit. The wrapped response response can then be set to ignore further writes to it.<br><br>Depending on the exact structure of your SAM you have one other opportunity to do something and that's in secureResponse, which is called after all other filters have been called. If I'm not mistaken JBoss has a bug here that prevents writing to the response here (this too I've too double check again and make a test for)<br><br></p>
                                  <span id="bc_0_32MN" class="comment-actions secondary-text" kind="m"><span class="item-control blog-admin pid-1107289781"><a o="d" target="_self" href="https://www.blogger.com/delete-comment.g?blogID=4498889353428710313&amp;postID=8183413323385619817">Delete</a></span></span>
                                 </div>
                                 <div id="bc_0_32BR" class="comment-replies"></div>
                                 <div id="bc_0_32B_box" class="comment-replybox-single"></div></li>
                                <li id="bc_0_33B" class="comment" kind="b">
                                 <div class="avatar-image-container">
                                  <img src="//lh3.googleusercontent.com/Rw_wdkZHfDXh8tDEBFF1Q3aSS_nDE-gMVWNfOHb7a2nIp2XuWAmJyGISHv9akZE=s35">
                                 </div>
                                 <div id="c4228490225155343183" class="comment-block">
                                  <div id="bc_0_33M" class="comment-header" kind="m">
                                   <cite class="user"><a rel="nofollow" href="http://virtuousoutlaw.livejournal.com/">virtuousoutlaw</a></cite>
                                   <span class="icon user"></span>
                                   <span class="datetime secondary-text"><a rel="nofollow" href="http://arjan-tijms.omnifaces.org/2012/11/implementing-container-authentication.html?showComment=1437562082435#c4228490225155343183">July 22, 2015 at 3:48 AM</a></span>
                                  </div>
                                  <p id="bc_0_33MC" class="comment-content">Thank you for leading me to the right direction.<br><br>I feel stupid admitting this: I wasn't aware that, *regardless* of the second SAM invocation's outcome, #secureResponse still gets called, eventually. Unfortunately, as they say, "common sense is not so common", and I believe that a tiny clarification at the particular section of the spec might be beneficial to novice devs like myself.<br><br>I'm using GlassFish 4.1 and response (un-)wrapping in #validateRequest / #secureResponse works like a charm. Still, I unfortunately haven't found enforcing response content (or absence thereof) and status code, either in the "nested" (i.e. second) #validateRequest invocation, or in #secureResponse, to be trivial to correctly implement.<br><br>Disregarding any "SAM vs Filter-X" precedence "conflicts" which may arise (i.e. "should the SAM honor an HTTP 5xx set by some Filter, when the former wishes to redirect?"), and for which no generic solution can probably exist (except for allowing SAM behavior customization on a case-by-case basis), I found the more troublesome aspect to be the difficulty accessing the *original* response from within the second #validateRequest invocation.<br><br>&gt; When the SAM is called the second time (after calling #authenticate) it can recognise that the response has been wrapped and just set the response code and perhaps even commit. The wrapped response response can then be set to ignore further writes to it.<br><br>I can sadly not expect all hosted apps, depending on the SAM for authentication, to employ the same wrapper implementation. In fact, I cannot even assume that the wrappers are "well-behaved"; e.g. wrapper#sendRedirect might choose to "do nothing"; wrapper#getResponse might just return *this*. Access to the original response (or the initial wrapper established during the first #validateRequest invocation) is unfortunately essential.<br><br>But it's not exactly simple to access that instance either, since, at least on GlassFish, the SAM is instantiated for each request, thus the two #validateRequest invocations occur on disparate instances. It would be a joy if the two at least shared the same MessageInfo, but of course they do not. Some ugly workarounds have crossed my mind for enabling communication between the two SAM instances, but the sole reliable solution there probably is, would be to implement a ServerAuthContext (plus the two further abstraction layers that inevitably accompany it), appropriately reusing the SAM instance, in the particular case.<br><br>The actual question I'd like to ask, is if there's a way to *centrally* make an AuthConfigProvider available to all applications. By "centrally" I mean so as to avoid packaging the four classes with all apps, and/or the need to use a listener to register the provider on behalf of the app. Ironically I can have just that, as long as I stick to using just a plain SAM... I could of course have one app registering the provider on all others' behalf, but it's not quite pretty. I'm aware that the AuthConfigFactory of each AS is expected to offer some sort of persistent provider store but, at least in the case of GlassFish, the documentation on it is as good as nonexistent. Hopefully I won't have to implement an AuthConfigFactory as well, just to be able to programmatically and centrally register AuthConfigProviders... I'd still be struggling long after your work on JSR-375 had been completed :P.</p>
                                  <span id="bc_0_33MN" class="comment-actions secondary-text" kind="m"><span class="item-control blog-admin pid-77561647"><a o="d" target="_self" href="https://www.blogger.com/delete-comment.g?blogID=4498889353428710313&amp;postID=4228490225155343183">Delete</a></span></span>
                                 </div>
                                 <div id="bc_0_33BR" class="comment-replies"></div>
                                 <div id="bc_0_33B_box" class="comment-replybox-single"></div></li>
                               </div>
                               <div id="bc_0_32I" class="continue" kind="ci">
                                <a href="javascript:;" target="_self">Reply</a>
                               </div>
                              </ol>
                              <div id="bc_0_32T_box" class="comment-replybox-thread"></div>
                             </div></span>
                           </div>
                           <div id="bc_0_34B_box" class="comment-replybox-single"></div></li>
                          <li id="bc_0_36B" class="comment" kind="b">
                           <div class="avatar-image-container">
                            <img src="//lh4.googleusercontent.com/-G1NLoGVL0xc/AAAAAAAAAAI/AAAAAAAAADo/Zw1WCD9OIBk/s35-c/photo.jpg">
                           </div>
                           <div id="c5497486168585130695" class="comment-block">
                            <div id="bc_0_36M" class="comment-header" kind="m">
                             <cite class="user"><a rel="nofollow" href="https://www.blogger.com/profile/15252573382289982579">MrWishmaster35</a></cite>
                             <span class="icon user"></span>
                             <span class="datetime secondary-text"><a rel="nofollow" href="http://arjan-tijms.omnifaces.org/2012/11/implementing-container-authentication.html?showComment=1436908004524#c5497486168585130695">July 14, 2015 at 2:06 PM</a></span>
                            </div>
                            <p id="bc_0_36MC" class="comment-content">Arjan Tijms, how to check login and password?<br>I add PasswordValidationCallback, but I'm getting error: Invalid call to login while pluggable authentication method is configured.</p>
                            <span id="bc_0_36MN" class="comment-actions secondary-text" kind="m"><a kind="i" href="javascript:;" target="_self" o="r">Reply</a><span class="item-control blog-admin pid-1429834979"><a o="d" target="_self" href="https://www.blogger.com/delete-comment.g?blogID=4498889353428710313&amp;postID=5497486168585130695">Delete</a></span></span>
                           </div>
                           <div id="bc_0_36BR" class="comment-replies">
                            <span id="bc_0_36b+seedGhrjD" kind="d">
                             <div id="bc_0_35T" class="comment-thread inline-thread" kind="t" t="0" u="0">
                              <span id="bc_0_35TT" class="thread-toggle thread-expanded" kind="g"><span id="bc_0_35TA" class="thread-arrow"></span><span id="bc_0_35TN" class="thread-count"><span id="bc_0_35TNT" style="display: none;"></span><span id="bc_0_35TNU" style="display: none;"></span><a href="javascript:;" target="_self">Replies</a>
                                <div id="bc_0_35TD" class="thread-dropContainer thread-expanded">
                                 <span class="thread-drop"></span>
                                </div></span></span>
                              <ol id="bc_0_35TC" class="thread-chrome thread-expanded">
                               <div>
                                <li id="bc_0_35B" class="comment" kind="b">
                                 <div class="avatar-image-container">
                                  <img src="//lh5.googleusercontent.com/-5dCYObhO1so/AAAAAAAAAAI/AAAAAAAACY4/R4ZWNEo3j3c/s35-c/photo.jpg">
                                 </div>
                                 <div id="c6677006005570133080" class="comment-block">
                                  <div id="bc_0_35M" class="comment-header" kind="m">
                                   <cite class="user"><a rel="nofollow" href="https://www.blogger.com/profile/06709900922358770930">Archimedes Trajano</a></cite>
                                   <span class="icon user"></span>
                                   <span class="datetime secondary-text"><a rel="nofollow" href="http://arjan-tijms.omnifaces.org/2012/11/implementing-container-authentication.html?showComment=1443064308861#c6677006005570133080">September 23, 2015 at 8:11 PM</a></span>
                                  </div>
                                  <p id="bc_0_35MC" class="comment-content">I implement it as part of the validateRequest method. But I will not use that callback, I just use the CallerPrincipalCallback and GroupPrincipalCallback. The PasswordValidationCallback uses the runtime's password handling mechanism according to JavaDoc, but when I implement JASPIC module I would be doing the check myself on the module</p>
                                  <span id="bc_0_35MN" class="comment-actions secondary-text" kind="m"><span class="item-control blog-admin pid-2071024754"><a o="d" target="_self" href="https://www.blogger.com/delete-comment.g?blogID=4498889353428710313&amp;postID=6677006005570133080">Delete</a></span></span>
                                 </div>
                                 <div id="bc_0_35BR" class="comment-replies"></div>
                                 <div id="bc_0_35B_box" class="comment-replybox-single"></div></li>
                               </div>
                               <div id="bc_0_35I" class="continue" kind="ci">
                                <a href="javascript:;" target="_self">Reply</a>
                               </div>
                              </ol>
                              <div id="bc_0_35T_box" class="comment-replybox-thread"></div>
                             </div></span>
                           </div>
                           <div id="bc_0_36B_box" class="comment-replybox-single"></div></li>
                          <li id="bc_0_38B" class="comment" kind="b">
                           <div class="avatar-image-container">
                            <img src="//lh4.googleusercontent.com/-GqASw5ggs8s/AAAAAAAAAAI/AAAAAAAAAAA/8oAQ5Lt6UdI/s35-c/photo.jpg">
                           </div>
                           <div id="c1487356642081823927" class="comment-block">
                            <div id="bc_0_38M" class="comment-header" kind="m">
                             <cite class="user"><a rel="nofollow" href="https://www.blogger.com/profile/09115322868826391199">Samba Siva Rao Kolusu</a></cite>
                             <span class="icon user"></span>
                             <span class="datetime secondary-text"><a rel="nofollow" href="http://arjan-tijms.omnifaces.org/2012/11/implementing-container-authentication.html?showComment=1437388065471#c1487356642081823927">July 20, 2015 at 3:27 AM</a></span>
                            </div>
                            <p id="bc_0_38MC" class="comment-content">ideally JAPIC should have corrected the mistake perpetrated by almost all of the application servers in naming a role as a group. it is surprising how so many experts ignored the possibility/need for a group of users having a same role, or a caller having permission over a group of resources.<br><br>At least in the next version of the spec it should correct this anomaly and introduce three principals :<br><br>CallerPrincipal<br>GroupPrincipal -- this is group of users or resources, not role<br>RolePrincipal<br><br>I believe this is the fundamental flaw in JEE security design by almost all containers without any exception. people can't and won't change their language to fit the system, rather they change the system.</p>
                            <span id="bc_0_38MN" class="comment-actions secondary-text" kind="m"><a kind="i" href="javascript:;" target="_self" o="r">Reply</a><span class="item-control blog-admin pid-1047312927"><a o="d" target="_self" href="https://www.blogger.com/delete-comment.g?blogID=4498889353428710313&amp;postID=1487356642081823927">Delete</a></span></span>
                           </div>
                           <div id="bc_0_38BR" class="comment-replies">
                            <span id="bc_0_38b+seedGhriD" kind="d">
                             <div id="bc_0_37T" class="comment-thread inline-thread" kind="t" t="0" u="0">
                              <span id="bc_0_37TT" class="thread-toggle thread-expanded" kind="g"><span id="bc_0_37TA" class="thread-arrow"></span><span id="bc_0_37TN" class="thread-count"><span id="bc_0_37TNT" style="display: none;"></span><span id="bc_0_37TNU" style="display: none;"></span><a href="javascript:;" target="_self">Replies</a>
                                <div id="bc_0_37TD" class="thread-dropContainer thread-expanded">
                                 <span class="thread-drop"></span>
                                </div></span></span>
                              <ol id="bc_0_37TC" class="thread-chrome thread-expanded">
                               <div>
                                <li id="bc_0_37B" class="comment" kind="b">
                                 <div class="avatar-image-container">
                                  <img src="//lh5.googleusercontent.com/-5dCYObhO1so/AAAAAAAAAAI/AAAAAAAACY4/R4ZWNEo3j3c/s35-c/photo.jpg">
                                 </div>
                                 <div id="c5319513899349455598" class="comment-block">
                                  <div id="bc_0_37M" class="comment-header" kind="m">
                                   <cite class="user"><a rel="nofollow" href="https://www.blogger.com/profile/06709900922358770930">Archimedes Trajano</a></cite>
                                   <span class="icon user"></span>
                                   <span class="datetime secondary-text"><a rel="nofollow" href="http://arjan-tijms.omnifaces.org/2012/11/implementing-container-authentication.html?showComment=1443064127747#c5319513899349455598">September 23, 2015 at 8:08 PM</a></span>
                                  </div>
                                  <p id="bc_0_37MC" class="comment-content">Isn't there a group to role mapping that is done by the application server? There's no "default" specified, it is expected the application server will have their own mapping implementation.</p>
                                  <span id="bc_0_37MN" class="comment-actions secondary-text" kind="m"><span class="item-control blog-admin pid-2071024754"><a o="d" target="_self" href="https://www.blogger.com/delete-comment.g?blogID=4498889353428710313&amp;postID=5319513899349455598">Delete</a></span></span>
                                 </div>
                                 <div id="bc_0_37BR" class="comment-replies"></div>
                                 <div id="bc_0_37B_box" class="comment-replybox-single"></div></li>
                               </div>
                               <div id="bc_0_37I" class="continue" kind="ci">
                                <a href="javascript:;" target="_self">Reply</a>
                               </div>
                              </ol>
                              <div id="bc_0_37T_box" class="comment-replybox-thread"></div>
                             </div></span>
                           </div>
                           <div id="bc_0_38B_box" class="comment-replybox-single"></div></li>
                          <li id="bc_0_40B" class="comment" kind="b">
                           <div class="avatar-image-container">
                            <img src="//lh4.googleusercontent.com/-GqASw5ggs8s/AAAAAAAAAAI/AAAAAAAAAAA/8oAQ5Lt6UdI/s35-c/photo.jpg">
                           </div>
                           <div id="c2937088368192662707" class="comment-block">
                            <div id="bc_0_40M" class="comment-header" kind="m">
                             <cite class="user"><a rel="nofollow" href="https://www.blogger.com/profile/09115322868826391199">Samba Siva Rao Kolusu</a></cite>
                             <span class="icon user"></span>
                             <span class="datetime secondary-text"><a rel="nofollow" href="http://arjan-tijms.omnifaces.org/2012/11/implementing-container-authentication.html?showComment=1437388314556#c2937088368192662707">July 20, 2015 at 3:31 AM</a></span>
                            </div>
                            <p id="bc_0_40MC" class="comment-content">forgot to mention : with the introduction of these principals the containers can easily map which are callers, and which are roles( by their terminology groups -- which i propose to change, immediately) and thus we can be freed from the mundane task of writing mapping definitions between JASPIC Roles and container Groups</p>
                            <span id="bc_0_40MN" class="comment-actions secondary-text" kind="m"><a kind="i" href="javascript:;" target="_self" o="r">Reply</a><span class="item-control blog-admin pid-1047312927"><a o="d" target="_self" href="https://www.blogger.com/delete-comment.g?blogID=4498889353428710313&amp;postID=2937088368192662707">Delete</a></span></span>
                           </div>
                           <div id="bc_0_40BR" class="comment-replies">
                            <span id="bc_0_40b+seedGhrkD" kind="d">
                             <div id="bc_0_39T" class="comment-thread inline-thread" kind="t" t="0" u="0">
                              <span id="bc_0_39TT" class="thread-toggle thread-expanded" kind="g"><span id="bc_0_39TA" class="thread-arrow"></span><span id="bc_0_39TN" class="thread-count"><span id="bc_0_39TNT" style="display: none;"></span><span id="bc_0_39TNU" style="display: none;"></span><a href="javascript:;" target="_self">Replies</a>
                                <div id="bc_0_39TD" class="thread-dropContainer thread-expanded">
                                 <span class="thread-drop"></span>
                                </div></span></span>
                              <ol id="bc_0_39TC" class="thread-chrome thread-expanded">
                               <div>
                                <li id="bc_0_39B" class="comment" kind="b">
                                 <div class="avatar-image-container">
                                  <img src="//lh5.googleusercontent.com/-5dCYObhO1so/AAAAAAAAAAI/AAAAAAAACY4/R4ZWNEo3j3c/s35-c/photo.jpg">
                                 </div>
                                 <div id="c5638119599145285088" class="comment-block">
                                  <div id="bc_0_39M" class="comment-header" kind="m">
                                   <cite class="user"><a rel="nofollow" href="https://www.blogger.com/profile/06709900922358770930">Archimedes Trajano</a></cite>
                                   <span class="icon user"></span>
                                   <span class="datetime secondary-text"><a rel="nofollow" href="http://arjan-tijms.omnifaces.org/2012/11/implementing-container-authentication.html?showComment=1443064450309#c5638119599145285088">September 23, 2015 at 8:14 PM</a></span>
                                  </div>
                                  <p id="bc_0_39MC" class="comment-content">Yes I agree, this would be nice and easier to deal with. Not sure what the impact would be though... what if you had both container managed group-role mapping and application level role mapping what should happen?</p>
                                  <span id="bc_0_39MN" class="comment-actions secondary-text" kind="m"><span class="item-control blog-admin pid-2071024754"><a o="d" target="_self" href="https://www.blogger.com/delete-comment.g?blogID=4498889353428710313&amp;postID=5638119599145285088">Delete</a></span></span>
                                 </div>
                                 <div id="bc_0_39BR" class="comment-replies"></div>
                                 <div id="bc_0_39B_box" class="comment-replybox-single"></div></li>
                               </div>
                               <div id="bc_0_39I" class="continue" kind="ci">
                                <a href="javascript:;" target="_self">Reply</a>
                               </div>
                              </ol>
                              <div id="bc_0_39T_box" class="comment-replybox-thread"></div>
                             </div></span>
                           </div>
                           <div id="bc_0_40B_box" class="comment-replybox-single"></div></li>
                          <li id="bc_0_42B" class="comment" kind="b">
                           <div class="avatar-image-container">
                            <img src="//lh3.googleusercontent.com/zFdxGE77vvD2w5xHy6jkVuElKv-U9_9qLkRYK8OnbDeJPtjSZ82UPq5w6hJ-SA=s35">
                           </div>
                           <div id="c1369872887902829838" class="comment-block">
                            <div id="bc_0_42M" class="comment-header" kind="m">
                             <cite class="user"><a rel="nofollow" href="https://www.blogger.com/profile/05692970832417194407">Alex Bennasar</a></cite>
                             <span class="icon user"></span>
                             <span class="datetime secondary-text"><a rel="nofollow" href="http://arjan-tijms.omnifaces.org/2012/11/implementing-container-authentication.html?showComment=1447926688768#c1369872887902829838">November 19, 2015 at 1:51 AM</a></span>
                            </div>
                            <p id="bc_0_42MC" class="comment-content">Arjan, how do you deal with the fact that there're some servers than call JASPIC even when the user has been authenticated in a previous request? How do you check, for example, if the session ID provided by the user on a cookie is'isn't valid?<br><br>Thanks!</p>
                            <span id="bc_0_42MN" class="comment-actions secondary-text" kind="m"><a kind="i" href="javascript:;" target="_self" o="r">Reply</a><span class="item-control blog-admin pid-2074569689"><a o="d" target="_self" href="https://www.blogger.com/delete-comment.g?blogID=4498889353428710313&amp;postID=1369872887902829838">Delete</a></span></span>
                           </div>
                           <div id="bc_0_42BR" class="comment-replies">
                            <span id="bc_0_42b+seedGhrnD" kind="d">
                             <div id="bc_0_41T" class="comment-thread inline-thread" kind="t" t="0" u="0">
                              <span id="bc_0_41TT" class="thread-toggle thread-expanded" kind="g"><span id="bc_0_41TA" class="thread-arrow"></span><span id="bc_0_41TN" class="thread-count"><span id="bc_0_41TNT" style="display: none;"></span><span id="bc_0_41TNU" style="display: none;"></span><a href="javascript:;" target="_self">Replies</a>
                                <div id="bc_0_41TD" class="thread-dropContainer thread-expanded">
                                 <span class="thread-drop"></span>
                                </div></span></span>
                              <ol id="bc_0_41TC" class="thread-chrome thread-expanded">
                               <div>
                                <li id="bc_0_41B" class="comment" kind="b">
                                 <div class="avatar-image-container">
                                  <img src="//lh5.googleusercontent.com/-Fsb6YxLG-5Q/AAAAAAAAAAI/AAAAAAAAACY/8H8WPYh2OT8/s35-c/photo.jpg">
                                 </div>
                                 <div id="c7393725448179133917" class="comment-block">
                                  <div id="bc_0_41M" class="comment-header" kind="m">
                                   <cite class="user blog-author"><a rel="nofollow" href="https://www.blogger.com/profile/08548593340781885396">Arjan Tijms</a></cite>
                                   <span class="icon user blog-author"></span>
                                   <span class="datetime secondary-text"><a rel="nofollow" href="http://arjan-tijms.omnifaces.org/2012/11/implementing-container-authentication.html?showComment=1447932896151#c7393725448179133917">November 19, 2015 at 3:34 AM</a></span>
                                  </div>
                                  <p id="bc_0_41MC" class="comment-content">Hi Alex,<br><br>With the current crop of servers, all of them call JASPIC when a user has been authenticated in a previous request. This is actually what the JASPIC spec requires.<br><br>JASPIC's native mode of operation is stateless; a user is only authenticated for the duration of a single request. If you want a user to be logged-in for the duration of an HTTP session, then you mainly have to manage that yourself -&gt; store the details in the session scope, then every time your SAM is called check if those details are present an if so pass them again on to the container.<br><br>JASPIC does have a feature where it can store those details for you, but it will not automatically apply them. In other words, it's an alternative for HttpSession#setAttribute. It's presumably somewhat more secure for if you happen to don't trust your own code (e.g. if the SAM and application code are developed by different parties that don't 100% trust each other). <br><br>See http://arjan-tijms.omnifaces.org/2013/04/whats-new-in-java-ee-7s-authentication.html#RegisterSession<br><br></p>
                                  <span id="bc_0_41MN" class="comment-actions secondary-text" kind="m"><span class="item-control blog-admin pid-1107289781"><a o="d" target="_self" href="https://www.blogger.com/delete-comment.g?blogID=4498889353428710313&amp;postID=7393725448179133917">Delete</a></span></span>
                                 </div>
                                 <div id="bc_0_41BR" class="comment-replies"></div>
                                 <div id="bc_0_41B_box" class="comment-replybox-single"></div></li>
                               </div>
                               <div id="bc_0_41I" class="continue" kind="ci">
                                <a href="javascript:;" target="_self">Reply</a>
                               </div>
                              </ol>
                              <div id="bc_0_41T_box" class="comment-replybox-thread"></div>
                             </div></span>
                           </div>
                           <div id="bc_0_42B_box" class="comment-replybox-single"></div></li>
                          <li id="bc_0_50B" class="comment" kind="b">
                           <div class="avatar-image-container">
                            <img src="//lh3.googleusercontent.com/zFdxGE77vvD2w5xHy6jkVuElKv-U9_9qLkRYK8OnbDeJPtjSZ82UPq5w6hJ-SA=s35">
                           </div>
                           <div id="c6037068951020027715" class="comment-block">
                            <div id="bc_0_50M" class="comment-header" kind="m">
                             <cite class="user"><a rel="nofollow" href="https://www.blogger.com/profile/05692970832417194407">Alex Bennasar</a></cite>
                             <span class="icon user"></span>
                             <span class="datetime secondary-text"><a rel="nofollow" href="http://arjan-tijms.omnifaces.org/2012/11/implementing-container-authentication.html?showComment=1456132383726#c6037068951020027715">February 22, 2016 at 1:13 AM</a></span>
                            </div>
                            <p id="bc_0_50MC" class="comment-content">Hi again Arjan!<br><br>In "classic" certificate realm on JEE, you can get the user's certificate by making a call like req.getAttribute("javax.servlet.request.X509Certificate");<br>And if you get a not-null certificate, you can be sure the user has been previously authenticated by the container and its truststore with cryptography.<br>Obviously, in JASPIC you can also get the caller's certificate with the same API but, since you don't have here any "realm" and/or "login-config", how can the authentification achieved? You can see if the user's cert is in truststore, but how is the SSL handshake done?<br><br>Many thanks for your help!!</p>
                            <span id="bc_0_50MN" class="comment-actions secondary-text" kind="m"><a kind="i" href="javascript:;" target="_self" o="r">Reply</a><span class="item-control blog-admin pid-2074569689"><a o="d" target="_self" href="https://www.blogger.com/delete-comment.g?blogID=4498889353428710313&amp;postID=6037068951020027715">Delete</a></span></span>
                           </div>
                           <div id="bc_0_50BR" class="comment-replies">
                            <span id="bc_0_50b+seedGhrpD" kind="d">
                             <div id="bc_0_43T" class="comment-thread inline-thread" kind="t" t="0" u="0">
                              <span id="bc_0_43TT" class="thread-toggle thread-expanded" kind="g"><span id="bc_0_43TA" class="thread-arrow"></span><span id="bc_0_43TN" class="thread-count"><span id="bc_0_43TNT" style="display: none;"></span><span id="bc_0_43TNU" style="display: none;"></span><a href="javascript:;" target="_self">Replies</a>
                                <div id="bc_0_43TD" class="thread-dropContainer thread-expanded">
                                 <span class="thread-drop"></span>
                                </div></span></span>
                              <ol id="bc_0_43TC" class="thread-chrome thread-expanded">
                               <div>
                                <li id="bc_0_43B" class="comment" kind="b">
                                 <div class="avatar-image-container">
                                  <img src="//lh5.googleusercontent.com/-Fsb6YxLG-5Q/AAAAAAAAAAI/AAAAAAAAACY/8H8WPYh2OT8/s35-c/photo.jpg">
                                 </div>
                                 <div id="c95814775757822761" class="comment-block">
                                  <div id="bc_0_43M" class="comment-header" kind="m">
                                   <cite class="user blog-author"><a rel="nofollow" href="https://www.blogger.com/profile/08548593340781885396">Arjan Tijms</a></cite>
                                   <span class="icon user blog-author"></span>
                                   <span class="datetime secondary-text"><a rel="nofollow" href="http://arjan-tijms.omnifaces.org/2012/11/implementing-container-authentication.html?showComment=1456145773532#c95814775757822761">February 22, 2016 at 4:56 AM</a></span>
                                  </div>
                                  <p id="bc_0_43MC" class="comment-content">It would happen in much the same way. A "realm" is just another term for what's more generally called "identity store". A SAM can either delegate to this or perform it's logic itself. <br><br>For further details, see: http://arjan-tijms.omnifaces.org/2015/10/how-servlet-containers-all-implement.html</p>
                                  <span id="bc_0_43MN" class="comment-actions secondary-text" kind="m"><span class="item-control blog-admin pid-1107289781"><a o="d" target="_self" href="https://www.blogger.com/delete-comment.g?blogID=4498889353428710313&amp;postID=95814775757822761">Delete</a></span></span>
                                 </div>
                                 <div id="bc_0_43BR" class="comment-replies"></div>
                                 <div id="bc_0_43B_box" class="comment-replybox-single"></div></li>
                                <li id="bc_0_44B" class="comment" kind="b">
                                 <div class="avatar-image-container">
                                  <img src="//lh3.googleusercontent.com/zFdxGE77vvD2w5xHy6jkVuElKv-U9_9qLkRYK8OnbDeJPtjSZ82UPq5w6hJ-SA=s35">
                                 </div>
                                 <div id="c1535499740607489599" class="comment-block">
                                  <div id="bc_0_44M" class="comment-header" kind="m">
                                   <cite class="user"><a rel="nofollow" href="https://www.blogger.com/profile/05692970832417194407">Alex Bennasar</a></cite>
                                   <span class="icon user"></span>
                                   <span class="datetime secondary-text"><a rel="nofollow" href="http://arjan-tijms.omnifaces.org/2012/11/implementing-container-authentication.html?showComment=1456148256328#c1535499740607489599">February 22, 2016 at 5:37 AM</a></span>
                                  </div>
                                  <p id="bc_0_44MC" class="comment-content">Thanks for your help Arjan. What I still don't understand is: when I read (req.getAttribute...) the certificate attached to the request, did the server previously checked (SSL/TLS handshake) the remote user knows the associated private key?<br><br>Thanks for your help!!</p>
                                  <span id="bc_0_44MN" class="comment-actions secondary-text" kind="m"><span class="item-control blog-admin pid-2074569689"><a o="d" target="_self" href="https://www.blogger.com/delete-comment.g?blogID=4498889353428710313&amp;postID=1535499740607489599">Delete</a></span></span>
                                 </div>
                                 <div id="bc_0_44BR" class="comment-replies"></div>
                                 <div id="bc_0_44B_box" class="comment-replybox-single"></div></li>
                                <li id="bc_0_45B" class="comment" kind="b">
                                 <div class="avatar-image-container">
                                  <img src="//lh3.googleusercontent.com/zFdxGE77vvD2w5xHy6jkVuElKv-U9_9qLkRYK8OnbDeJPtjSZ82UPq5w6hJ-SA=s35">
                                 </div>
                                 <div id="c7240122579152724443" class="comment-block">
                                  <div id="bc_0_45M" class="comment-header" kind="m">
                                   <cite class="user"><a rel="nofollow" href="https://www.blogger.com/profile/05692970832417194407">Alex Bennasar</a></cite>
                                   <span class="icon user"></span>
                                   <span class="datetime secondary-text"><a rel="nofollow" href="http://arjan-tijms.omnifaces.org/2012/11/implementing-container-authentication.html?showComment=1456152483548#c7240122579152724443">February 22, 2016 at 6:48 AM</a></span>
                                  </div>
                                  <p id="bc_0_45MC" class="comment-content">I'm going to elaborate a little more (sorry for my poor english):<br><br>I understand the SAM has the responsibility of knowing, in this case, where the accepted certificates are, and of comparing the certificate attached to the request with the accepted certificates to see if someone matches.<br><br>My question is, since that is not enough for ensuring the user is who says he is (as he can attach an arbitrary certiicate), who performs the SSL handshake, and when is it done?<br><br>Many thanks</p>
                                  <span id="bc_0_45MN" class="comment-actions secondary-text" kind="m"><span class="item-control blog-admin pid-2074569689"><a o="d" target="_self" href="https://www.blogger.com/delete-comment.g?blogID=4498889353428710313&amp;postID=7240122579152724443">Delete</a></span></span>
                                 </div>
                                 <div id="bc_0_45BR" class="comment-replies"></div>
                                 <div id="bc_0_45B_box" class="comment-replybox-single"></div></li>
                                <li id="bc_0_46B" class="comment" kind="b">
                                 <div class="avatar-image-container">
                                  <img src="//lh5.googleusercontent.com/-Fsb6YxLG-5Q/AAAAAAAAAAI/AAAAAAAAACY/8H8WPYh2OT8/s35-c/photo.jpg">
                                 </div>
                                 <div id="c3800197659916648645" class="comment-block">
                                  <div id="bc_0_46M" class="comment-header" kind="m">
                                   <cite class="user blog-author"><a rel="nofollow" href="https://www.blogger.com/profile/08548593340781885396">Arjan Tijms</a></cite>
                                   <span class="icon user blog-author"></span>
                                   <span class="datetime secondary-text"><a rel="nofollow" href="http://arjan-tijms.omnifaces.org/2012/11/implementing-container-authentication.html?showComment=1456153183624#c3800197659916648645">February 22, 2016 at 6:59 AM</a></span>
                                  </div>
                                  <p id="bc_0_46MC" class="comment-content">Don't worry about the English, it's perfectly fine ;)<br><br>The answer is really that JASPIC doesn't have anything specific to say about this. It's just an SPI/API. It's called at exactly the same moment when the server would otherwise call a proprietary authentication mechanism/identity store.<br><br>So, the best way to find an answer is to study how existing certificate implementations do this.<br><br>At any length, for JSR 375 we'll be looking at implementing a certificate authentication mechanism and identity store before long. Since the authentication mechanism there is JASPIC based you could use that as an example too.<br></p>
                                  <span id="bc_0_46MN" class="comment-actions secondary-text" kind="m"><span class="item-control blog-admin pid-1107289781"><a o="d" target="_self" href="https://www.blogger.com/delete-comment.g?blogID=4498889353428710313&amp;postID=3800197659916648645">Delete</a></span></span>
                                 </div>
                                 <div id="bc_0_46BR" class="comment-replies"></div>
                                 <div id="bc_0_46B_box" class="comment-replybox-single"></div></li>
                                <li id="bc_0_47B" class="comment" kind="b">
                                 <div class="avatar-image-container">
                                  <img src="//lh3.googleusercontent.com/zFdxGE77vvD2w5xHy6jkVuElKv-U9_9qLkRYK8OnbDeJPtjSZ82UPq5w6hJ-SA=s35">
                                 </div>
                                 <div id="c3546273964001665452" class="comment-block">
                                  <div id="bc_0_47M" class="comment-header" kind="m">
                                   <cite class="user"><a rel="nofollow" href="https://www.blogger.com/profile/05692970832417194407">Alex Bennasar</a></cite>
                                   <span class="icon user"></span>
                                   <span class="datetime secondary-text"><a rel="nofollow" href="http://arjan-tijms.omnifaces.org/2012/11/implementing-container-authentication.html?showComment=1456297362938#c3546273964001665452">February 23, 2016 at 11:02 PM</a></span>
                                  </div>
                                  <p id="bc_0_47MC" class="comment-content">Thanks for your answers Arjan!<br><br>For those with the same kind of problems, here you have a proprietary solution for Glassfish:<br>https://blogs.oracle.com/nasradu8/entry/extend_certificaterealm_with_loginmodule_glassfish<br><br>There, the server cryptografically checks the remote client certificate against the truststore, and later you can perform your login logic with a custom login module.<br><br>Not standard, but custom solution. I didn't tried yet with JASPIC over Glassfish, but anyway, as Arjan says, it will be implementation-specific...</p>
                                  <span id="bc_0_47MN" class="comment-actions secondary-text" kind="m"><span class="item-control blog-admin pid-2074569689"><a o="d" target="_self" href="https://www.blogger.com/delete-comment.g?blogID=4498889353428710313&amp;postID=3546273964001665452">Delete</a></span></span>
                                 </div>
                                 <div id="bc_0_47BR" class="comment-replies"></div>
                                 <div id="bc_0_47B_box" class="comment-replybox-single"></div></li>
                                <li id="bc_0_48B" class="comment" kind="b">
                                 <div class="avatar-image-container">
                                  <img src="//lh3.googleusercontent.com/zFdxGE77vvD2w5xHy6jkVuElKv-U9_9qLkRYK8OnbDeJPtjSZ82UPq5w6hJ-SA=s35">
                                 </div>
                                 <div id="c4240248368626585219" class="comment-block">
                                  <div id="bc_0_48M" class="comment-header" kind="m">
                                   <cite class="user"><a rel="nofollow" href="https://www.blogger.com/profile/01396280297047334213">Unknown</a></cite>
                                   <span class="icon user"></span>
                                   <span class="datetime secondary-text"><a rel="nofollow" href="http://arjan-tijms.omnifaces.org/2012/11/implementing-container-authentication.html?showComment=1459733422915#c4240248368626585219">April 3, 2016 at 6:30 PM</a></span>
                                  </div>
                                  <p id="bc_0_48MC" class="comment-content">Hello Arjan!<br><br>I read your article, as well as a couple of related ones. Currently I am trying to solve this problem:<br><br><br>http://stackoverflow.com/questions/36348377/implement-a-custom-serverauthmodule-for-jboss<br><br>but I am not able to.<br>May I ask you for advice?<br><br>Thank you,<br>Kind regards: Alex</p>
                                  <span id="bc_0_48MN" class="comment-actions secondary-text" kind="m"><span class="item-control blog-admin pid-1893058769"><a o="d" target="_self" href="https://www.blogger.com/delete-comment.g?blogID=4498889353428710313&amp;postID=4240248368626585219">Delete</a></span></span>
                                 </div>
                                 <div id="bc_0_48BR" class="comment-replies"></div>
                                 <div id="bc_0_48B_box" class="comment-replybox-single"></div></li>
                                <li id="bc_0_49B" class="comment" kind="b">
                                 <div class="avatar-image-container">
                                  <img src="//lh5.googleusercontent.com/-Fsb6YxLG-5Q/AAAAAAAAAAI/AAAAAAAAACY/8H8WPYh2OT8/s35-c/photo.jpg">
                                 </div>
                                 <div id="c8551908891142907133" class="comment-block">
                                  <div id="bc_0_49M" class="comment-header" kind="m">
                                   <cite class="user blog-author"><a rel="nofollow" href="https://www.blogger.com/profile/08548593340781885396">Arjan Tijms</a></cite>
                                   <span class="icon user blog-author"></span>
                                   <span class="datetime secondary-text"><a rel="nofollow" href="http://arjan-tijms.omnifaces.org/2012/11/implementing-container-authentication.html?showComment=1459760879159#c8551908891142907133">April 4, 2016 at 2:07 AM</a></span>
                                  </div>
                                  <p id="bc_0_49MC" class="comment-content">Hi Alex,<br><br>I implemented almost exactly what you're asking for in Soteria (the JSR 375 RI). See here: https://github.com/javaee-security-spec/soteria/blob/master/impl/src/main/java/org/glassfish/soteria/cdi/RememberMeInterceptor.java and https://github.com/javaee-security-spec/soteria/blob/master/impl/src/main/java/org/glassfish/soteria/mechanisms/FormAuthenticationMechanism.java<br><br>Although this is based on an Interceptor and a helper class (HttpMessageContext), it's essentially build on top of JASPIC, so whatever that code is doing is something you could do.<br><br>I do wonder why you specifically use JBoss 7.1.1.Final? This is a very old beta version of JBoss that contained many bugs. Specifically JASPIC barely works in that version. From the top of my head I don't think it was even in a half usable state before at least 7.2.0 or 7.2.1, somewhere along that version.<br><br>For a time I used a patch for JBoss 7.x, see here: https://github.com/javaeekickoff/jboss-as-jaspic-patch That fixed a couple of worst bugs, but even that needed 7.2.x at least if I remember correctly.<br><br>Your best bet would be to use the latest beta of JBoss EAP 7, which is WildFly 10.0.Final.</p>
                                  <span id="bc_0_49MN" class="comment-actions secondary-text" kind="m"><span class="item-control blog-admin pid-1107289781"><a o="d" target="_self" href="https://www.blogger.com/delete-comment.g?blogID=4498889353428710313&amp;postID=8551908891142907133">Delete</a></span></span>
                                 </div>
                                 <div id="bc_0_49BR" class="comment-replies"></div>
                                 <div id="bc_0_49B_box" class="comment-replybox-single"></div></li>
                               </div>
                               <div id="bc_0_43I" class="continue" kind="ci">
                                <a href="javascript:;" target="_self">Reply</a>
                               </div>
                              </ol>
                              <div id="bc_0_43T_box" class="comment-replybox-thread"></div>
                             </div></span>
                           </div>
                           <div id="bc_0_50B_box" class="comment-replybox-single"></div></li>
                          <li id="bc_0_55B" class="comment" kind="b">
                           <div class="avatar-image-container">
                            <img src="//lh3.googleusercontent.com/-dmIpIS2VP8M/AAAAAAAAAAI/AAAAAAAAA5c/5doZLrm-iXY/s35-c/photo.jpg">
                           </div>
                           <div id="c7290523352827925898" class="comment-block">
                            <div id="bc_0_55M" class="comment-header" kind="m">
                             <cite class="user"><a rel="nofollow" href="https://www.blogger.com/profile/03578167832086522197">Rahul Khandelwal</a></cite>
                             <span class="icon user"></span>
                             <span class="datetime secondary-text"><a rel="nofollow" href="http://arjan-tijms.omnifaces.org/2012/11/implementing-container-authentication.html?showComment=1472066556530#c7290523352827925898">August 24, 2016 at 12:22 PM</a></span>
                            </div>
                            <p id="bc_0_55MC" class="comment-content">Hi Arjan,<br>Thanks for the article, it was helpful and I was able to use JASPIC in payara.<br>I am trying to use this same example (custom auth) JASPIC in jetty 9, but I can't seem to make it work.<br>Could you help with that ?<br><br>Could you also provide some details about how to use JASPIC in soteria for this same example.<br><br>Thanks.</p>
                            <span id="bc_0_55MN" class="comment-actions secondary-text" kind="m"><a kind="i" href="javascript:;" target="_self" o="r">Reply</a><span class="item-control blog-admin pid-1198936349"><a o="d" target="_self" href="https://www.blogger.com/delete-comment.g?blogID=4498889353428710313&amp;postID=7290523352827925898">Delete</a></span></span>
                           </div>
                           <div id="bc_0_55BR" class="comment-replies">
                            <span id="bc_0_55b+seedGhrxD" kind="d">
                             <div id="bc_0_51T" class="comment-thread inline-thread" kind="t" t="0" u="0">
                              <span id="bc_0_51TT" class="thread-toggle thread-expanded" kind="g"><span id="bc_0_51TA" class="thread-arrow"></span><span id="bc_0_51TN" class="thread-count"><span id="bc_0_51TNT" style="display: none;"></span><span id="bc_0_51TNU" style="display: none;"></span><a href="javascript:;" target="_self">Replies</a>
                                <div id="bc_0_51TD" class="thread-dropContainer thread-expanded">
                                 <span class="thread-drop"></span>
                                </div></span></span>
                              <ol id="bc_0_51TC" class="thread-chrome thread-expanded">
                               <div>
                                <li id="bc_0_51B" class="comment" kind="b">
                                 <div class="avatar-image-container">
                                  <img src="//lh5.googleusercontent.com/-Fsb6YxLG-5Q/AAAAAAAAAAI/AAAAAAAAACY/8H8WPYh2OT8/s35-c/photo.jpg">
                                 </div>
                                 <div id="c1204038832627354756" class="comment-block">
                                  <div id="bc_0_51M" class="comment-header" kind="m">
                                   <cite class="user blog-author"><a rel="nofollow" href="https://www.blogger.com/profile/08548593340781885396">Arjan Tijms</a></cite>
                                   <span class="icon user blog-author"></span>
                                   <span class="datetime secondary-text"><a rel="nofollow" href="http://arjan-tijms.omnifaces.org/2012/11/implementing-container-authentication.html?showComment=1472071580678#c1204038832627354756">August 24, 2016 at 1:46 PM</a></span>
                                  </div>
                                  <p id="bc_0_51MC" class="comment-content">I'm glad you liked the article. Payara is one of the best servers to use for JASPIC.<br><br>I'm regularly testing JASPIC on almost all servers (see e.g. http://arjan-tijms.omnifaces.org/2016/06/the-state-of-portable-authentication-in.html) but Jetty is the one server I didn't test yet. Instead of Jetty you could try Tomcat (8.5 or 9), which also works really well. <br><br>I did ask about Jetty a while back, so maybe the answer given back then is helpful to you: http://stackoverflow.com/questions/14224792/how-to-use-jaspi-jaspic-on-jetty<br><br>(I really have to followup on Jetty and add it to the test set, so thanks for reminding me)<br><br>&gt;Could you also provide some details about how to use JASPIC in soteria for this same example.<br><br>You wouldn't so much use JASPIC -in- Soteria. Instead, Soteria builds on top of JASPIC and it provides a more HTTP specific CDI enabled variant of the ServerAuthModule called the AuthenticationMechanism.<br><br>Soteria is still in active development and not officially released yet. See this for (early) details: http://arjan-tijms.omnifaces.org/p/whats-new-in-java-ee-security-api-10.html#32</p>
                                  <span id="bc_0_51MN" class="comment-actions secondary-text" kind="m"><span class="item-control blog-admin pid-1107289781"><a o="d" target="_self" href="https://www.blogger.com/delete-comment.g?blogID=4498889353428710313&amp;postID=1204038832627354756">Delete</a></span></span>
                                 </div>
                                 <div id="bc_0_51BR" class="comment-replies"></div>
                                 <div id="bc_0_51B_box" class="comment-replybox-single"></div></li>
                                <li id="bc_0_52B" class="comment" kind="b">
                                 <div class="avatar-image-container">
                                  <img src="//lh3.googleusercontent.com/-dmIpIS2VP8M/AAAAAAAAAAI/AAAAAAAAA5c/5doZLrm-iXY/s35-c/photo.jpg">
                                 </div>
                                 <div id="c2112917007667287148" class="comment-block">
                                  <div id="bc_0_52M" class="comment-header" kind="m">
                                   <cite class="user"><a rel="nofollow" href="https://www.blogger.com/profile/03578167832086522197">Rahul Khandelwal</a></cite>
                                   <span class="icon user"></span>
                                   <span class="datetime secondary-text"><a rel="nofollow" href="http://arjan-tijms.omnifaces.org/2012/11/implementing-container-authentication.html?showComment=1472105716807#c2112917007667287148">August 24, 2016 at 11:15 PM</a></span>
                                  </div>
                                  <p id="bc_0_52MC" class="comment-content">Hi Arjan,<br>Thanks for the prompt reply.<br><br>Our company uses jetty as server and as of now we are not using any standard authentication mechanism. To port the authentication to JASPIC, I need to do a POC for jetty, that's why Jetty is important for my use case.<br><br>About the stack overflow link you mentioned, I tried the github project mentioned in answer, but I can't find a place to plug my custom auth module. I am still trying to make it work and will let you know if it works.<br><br>For the soteria, I'll look into it for using custom auth modules.<br><br>Thanks again.</p>
                                  <span id="bc_0_52MN" class="comment-actions secondary-text" kind="m"><span class="item-control blog-admin pid-1198936349"><a o="d" target="_self" href="https://www.blogger.com/delete-comment.g?blogID=4498889353428710313&amp;postID=2112917007667287148">Delete</a></span></span>
                                 </div>
                                 <div id="bc_0_52BR" class="comment-replies"></div>
                                 <div id="bc_0_52B_box" class="comment-replybox-single"></div></li>
                                <li id="bc_0_53B" class="comment" kind="b">
                                 <div class="avatar-image-container">
                                  <img src="//lh5.googleusercontent.com/-Fsb6YxLG-5Q/AAAAAAAAAAI/AAAAAAAAACY/8H8WPYh2OT8/s35-c/photo.jpg">
                                 </div>
                                 <div id="c143256642679991929" class="comment-block">
                                  <div id="bc_0_53M" class="comment-header" kind="m">
                                   <cite class="user blog-author"><a rel="nofollow" href="https://www.blogger.com/profile/08548593340781885396">Arjan Tijms</a></cite>
                                   <span class="icon user blog-author"></span>
                                   <span class="datetime secondary-text"><a rel="nofollow" href="http://arjan-tijms.omnifaces.org/2012/11/implementing-container-authentication.html?showComment=1472106914300#c143256642679991929">August 24, 2016 at 11:35 PM</a></span>
                                  </div>
                                  <p id="bc_0_53MC" class="comment-content">I see, for now it may be best to ask on the Jetty mailing list about this. I'm going to try myself too soon, but that will take some time.<br><br>Do note that Soteria at the moment is only supported on a limited amount of servers, namely Payara, JBoss and TomEE. It should theoretically also work on Tomcat if you add a CDI implementation to it, but I haven't tested that. Same goes for Jetty, it should work if you add CDI, but you just as well need to activate JASPIC then first.<br><br>Since Soteria asks a lot from the server in terms of compatible JASPIC features, my guess would be that it initially would not work on Jetty, but who knows.</p>
                                  <span id="bc_0_53MN" class="comment-actions secondary-text" kind="m"><span class="item-control blog-admin pid-1107289781"><a o="d" target="_self" href="https://www.blogger.com/delete-comment.g?blogID=4498889353428710313&amp;postID=143256642679991929">Delete</a></span></span>
                                 </div>
                                 <div id="bc_0_53BR" class="comment-replies"></div>
                                 <div id="bc_0_53B_box" class="comment-replybox-single"></div></li>
                                <li id="bc_0_54B" class="comment" kind="b">
                                 <div class="avatar-image-container">
                                  <img src="//lh3.googleusercontent.com/-dmIpIS2VP8M/AAAAAAAAAAI/AAAAAAAAA5c/5doZLrm-iXY/s35-c/photo.jpg">
                                 </div>
                                 <div id="c8844672145721209620" class="comment-block">
                                  <div id="bc_0_54M" class="comment-header" kind="m">
                                   <cite class="user"><a rel="nofollow" href="https://www.blogger.com/profile/03578167832086522197">Rahul Khandelwal</a></cite>
                                   <span class="icon user"></span>
                                   <span class="datetime secondary-text"><a rel="nofollow" href="http://arjan-tijms.omnifaces.org/2012/11/implementing-container-authentication.html?showComment=1480574552280#c8844672145721209620">November 30, 2016 at 10:42 PM</a></span>
                                  </div>
                                  <p id="bc_0_54MC" class="comment-content">Hi Arjan,<br>Have you found out anything for jaspic in jetty?<br>Thanks.</p>
                                  <span id="bc_0_54MN" class="comment-actions secondary-text" kind="m"><span class="item-control blog-admin pid-1198936349"><a o="d" target="_self" href="https://www.blogger.com/delete-comment.g?blogID=4498889353428710313&amp;postID=8844672145721209620">Delete</a></span></span>
                                 </div>
                                 <div id="bc_0_54BR" class="comment-replies"></div>
                                 <div id="bc_0_54B_box" class="comment-replybox-single"></div></li>
                               </div>
                               <div id="bc_0_51I" class="continue" kind="ci">
                                <a href="javascript:;" target="_self">Reply</a>
                               </div>
                              </ol>
                              <div id="bc_0_51T_box" class="comment-replybox-thread"></div>
                             </div></span>
                           </div>
                           <div id="bc_0_55B_box" class="comment-replybox-single"></div></li>
                          <li id="bc_0_58B" class="comment" kind="b">
                           <div class="avatar-image-container">
                            <img src="//lh4.googleusercontent.com/-JBWbNerT1KE/AAAAAAAAAAI/AAAAAAAAADc/CkQ0l2PwBgM/s35-c/photo.jpg">
                           </div>
                           <div id="c8459442202446903050" class="comment-block">
                            <div id="bc_0_58M" class="comment-header" kind="m">
                             <cite class="user"><a rel="nofollow" href="https://www.blogger.com/profile/18364232595681202972">Jordi Llach</a></cite>
                             <span class="icon user"></span>
                             <span class="datetime secondary-text"><a rel="nofollow" href="http://arjan-tijms.omnifaces.org/2012/11/implementing-container-authentication.html?showComment=1476986281618#c8459442202446903050">October 20, 2016 at 10:58 AM</a></span>
                            </div>
                            <p id="bc_0_58MC" class="comment-content">Awesome article, and you still update it after all these years(I have seen the Note about Tomcat 8.5.x and 9.x)<br>Are you planning to add them to the matrix (server / functionality) comparasion ?</p>
                            <span id="bc_0_58MN" class="comment-actions secondary-text" kind="m"><a kind="i" href="javascript:;" target="_self" o="r">Reply</a><span class="item-control blog-admin pid-1741803449"><a o="d" target="_self" href="https://www.blogger.com/delete-comment.g?blogID=4498889353428710313&amp;postID=8459442202446903050">Delete</a></span></span>
                           </div>
                           <div id="bc_0_58BR" class="comment-replies">
                            <span id="bc_0_58b+seedGhr1D" kind="d">
                             <div id="bc_0_56T" class="comment-thread inline-thread" kind="t" t="0" u="0">
                              <span id="bc_0_56TT" class="thread-toggle thread-expanded" kind="g"><span id="bc_0_56TA" class="thread-arrow"></span><span id="bc_0_56TN" class="thread-count"><span id="bc_0_56TNT" style="display: none;"></span><span id="bc_0_56TNU" style="display: none;"></span><a href="javascript:;" target="_self">Replies</a>
                                <div id="bc_0_56TD" class="thread-dropContainer thread-expanded">
                                 <span class="thread-drop"></span>
                                </div></span></span>
                              <ol id="bc_0_56TC" class="thread-chrome thread-expanded">
                               <div>
                                <li id="bc_0_56B" class="comment" kind="b">
                                 <div class="avatar-image-container">
                                  <img src="//lh5.googleusercontent.com/-Fsb6YxLG-5Q/AAAAAAAAAAI/AAAAAAAAACY/8H8WPYh2OT8/s35-c/photo.jpg">
                                 </div>
                                 <div id="c2894551079059651035" class="comment-block">
                                  <div id="bc_0_56M" class="comment-header" kind="m">
                                   <cite class="user blog-author"><a rel="nofollow" href="https://www.blogger.com/profile/08548593340781885396">Arjan Tijms</a></cite>
                                   <span class="icon user blog-author"></span>
                                   <span class="datetime secondary-text"><a rel="nofollow" href="http://arjan-tijms.omnifaces.org/2012/11/implementing-container-authentication.html?showComment=1476987233419#c2894551079059651035">October 20, 2016 at 11:13 AM</a></span>
                                  </div>
                                  <p id="bc_0_56MC" class="comment-content">Good to hear you like the article :)<br><br>Tomcat will indeed be added to the matrix, the Java EE 7 samples project that's the home of the tests for that has already been updated for Tomcat. Tomcat is a special case since it doesn't need to be tested for the integration with EJB, CDI, JSF, etc. I'm planning to update the matrix when the next version of Liberty is released. Small spoiler ahead of that: Tomcat passes all tests till so far ;)</p>
                                  <span id="bc_0_56MN" class="comment-actions secondary-text" kind="m"><span class="item-control blog-admin pid-1107289781"><a o="d" target="_self" href="https://www.blogger.com/delete-comment.g?blogID=4498889353428710313&amp;postID=2894551079059651035">Delete</a></span></span>
                                 </div>
                                 <div id="bc_0_56BR" class="comment-replies"></div>
                                 <div id="bc_0_56B_box" class="comment-replybox-single"></div></li>
                                <li id="bc_0_57B" class="comment" kind="b">
                                 <div class="avatar-image-container">
                                  <img src="//lh4.googleusercontent.com/-JBWbNerT1KE/AAAAAAAAAAI/AAAAAAAAADc/CkQ0l2PwBgM/s35-c/photo.jpg">
                                 </div>
                                 <div id="c7702492063481782191" class="comment-block">
                                  <div id="bc_0_57M" class="comment-header" kind="m">
                                   <cite class="user"><a rel="nofollow" href="https://www.blogger.com/profile/18364232595681202972">Jordi Llach</a></cite>
                                   <span class="icon user"></span>
                                   <span class="datetime secondary-text"><a rel="nofollow" href="http://arjan-tijms.omnifaces.org/2012/11/implementing-container-authentication.html?showComment=1476989150699#c7702492063481782191">October 20, 2016 at 11:45 AM</a></span>
                                  </div>
                                  <p id="bc_0_57MC" class="comment-content">Great news, and thanks for the spoiler :)</p>
                                  <span id="bc_0_57MN" class="comment-actions secondary-text" kind="m"><span class="item-control blog-admin pid-1741803449"><a o="d" target="_self" href="https://www.blogger.com/delete-comment.g?blogID=4498889353428710313&amp;postID=7702492063481782191">Delete</a></span></span>
                                 </div>
                                 <div id="bc_0_57BR" class="comment-replies"></div>
                                 <div id="bc_0_57B_box" class="comment-replybox-single"></div></li>
                               </div>
                               <div id="bc_0_56I" class="continue" kind="ci">
                                <a href="javascript:;" target="_self">Reply</a>
                               </div>
                              </ol>
                              <div id="bc_0_56T_box" class="comment-replybox-thread"></div>
                             </div></span>
                           </div>
                           <div id="bc_0_58B_box" class="comment-replybox-single"></div></li>
                          <li id="bc_0_59B" class="comment" kind="b">
                           <div class="avatar-image-container">
                            <img src="//lh3.googleusercontent.com/zFdxGE77vvD2w5xHy6jkVuElKv-U9_9qLkRYK8OnbDeJPtjSZ82UPq5w6hJ-SA=s35">
                           </div>
                           <div id="c6007512410859021777" class="comment-block">
                            <div id="bc_0_59M" class="comment-header" kind="m">
                             <cite class="user"><a rel="nofollow" href="https://www.blogger.com/profile/02513774196371967258">Juan Pablo Feliciano Bez</a></cite>
                             <span class="icon user"></span>
                             <span class="datetime secondary-text"><a rel="nofollow" href="http://arjan-tijms.omnifaces.org/2012/11/implementing-container-authentication.html?showComment=1480546855738#c6007512410859021777">November 30, 2016 at 3:00 PM</a></span>
                            </div>
                            <p id="bc_0_59MC" class="comment-content">Hi Arjan. <br><br>This article describe a very interesting topic, I have to confess that I never heard from JASPIC before. I'm developing a Java EE 7 application on WildFly 10.1.0 and currently the authentication mechanism is FORM based linked with a Security Domain at database level. Altough this strategy is running and supporting this important secutiry requirement, I want to adopt JASPIC to have more control and to build our own authentication module. Following the steps described in the article the username and password (credentials) to authenticate are not present, but in my application I have a form with those fields to send the values and a rule in the web application descriptor to map the form-login and form-error pages. How can I adapt my application to work with JASPIC using those defined form rules and identifying the scenarios in which the validateRequest method don't have to review the user an password to authenticate if a valid process was runned before?</p>
                            <span id="bc_0_59MN" class="comment-actions secondary-text" kind="m"><a kind="i" href="javascript:;" target="_self" o="r">Reply</a><span class="item-control blog-admin pid-47963190"><a o="d" target="_self" href="https://www.blogger.com/delete-comment.g?blogID=4498889353428710313&amp;postID=6007512410859021777">Delete</a></span></span>
                           </div>
                           <div id="bc_0_59BR" class="comment-replies"></div>
                           <div id="bc_0_59B_box" class="comment-replybox-single"></div></li>
                          <li id="bc_0_62B" class="comment" kind="b">
                           <div class="avatar-image-container">
                            <img src="//1.bp.blogspot.com/-WnvsgxXZacQ/VAJ89MgcRJI/AAAAAAAAAIY/S75Ehh9XLjY/s35/Profile_Picture.jpg">
                           </div>
                           <div id="c8076102989755399832" class="comment-block">
                            <div id="bc_0_62M" class="comment-header" kind="m">
                             <cite class="user"><a rel="nofollow" href="https://www.blogger.com/profile/01721904127841880944">mjremijan</a></cite>
                             <span class="icon user"></span>
                             <span class="datetime secondary-text"><a rel="nofollow" href="http://arjan-tijms.omnifaces.org/2012/11/implementing-container-authentication.html?showComment=1505238334810#c8076102989755399832">September 12, 2017 at 10:45 AM</a></span>
                            </div>
                            <p id="bc_0_62MC" class="comment-content">Hi Arjan,<br><br>In one of your updates you say "WebLogic doesn't require the mandatory role mapping anymore." I don't think this is the case. I'm trying to work with WebLogic 12.2.1.2.0. So far the only way I got things working is to have my roles defined in web.xml and a mapping defined in weblogic.xml too. Furthermore, the value for in web.xml, and the values for and in weblogic.xml all had to be the same value. I tried doing a mapping where I gave in weblogic.xml a different value and set that value in GroupPrincipalCallback, but so far I've not has success with WebLogic doing this mapping. WebLogic also doesn't seem to like @DeclareRoles and prefers everything in web.xml otherwise you get deployment errors.</p>
                            <span id="bc_0_62MN" class="comment-actions secondary-text" kind="m"><a kind="i" href="javascript:;" target="_self" o="r">Reply</a><span class="item-control blog-admin pid-42639361"><a o="d" target="_self" href="https://www.blogger.com/delete-comment.g?blogID=4498889353428710313&amp;postID=8076102989755399832">Delete</a></span></span>
                           </div>
                           <div id="bc_0_62BR" class="comment-replies">
                            <span id="bc_0_62b+seedGhr8D" kind="d">
                             <div id="bc_0_60T" class="comment-thread inline-thread" kind="t" t="0" u="0">
                              <span id="bc_0_60TT" class="thread-toggle thread-expanded" kind="g"><span id="bc_0_60TA" class="thread-arrow"></span><span id="bc_0_60TN" class="thread-count"><span id="bc_0_60TNT" style="display: none;"></span><span id="bc_0_60TNU" style="display: none;"></span><a href="javascript:;" target="_self">Replies</a>
                                <div id="bc_0_60TD" class="thread-dropContainer thread-expanded">
                                 <span class="thread-drop"></span>
                                </div></span></span>
                              <ol id="bc_0_60TC" class="thread-chrome thread-expanded">
                               <div>
                                <li id="bc_0_60B" class="comment" kind="b">
                                 <div class="avatar-image-container">
                                  <img src="//lh5.googleusercontent.com/-Fsb6YxLG-5Q/AAAAAAAAAAI/AAAAAAAAACY/8H8WPYh2OT8/s35-c/photo.jpg">
                                 </div>
                                 <div id="c8082909950241329295" class="comment-block">
                                  <div id="bc_0_60M" class="comment-header" kind="m">
                                   <cite class="user blog-author"><a rel="nofollow" href="https://www.blogger.com/profile/08548593340781885396">Arjan Tijms</a></cite>
                                   <span class="icon user blog-author"></span>
                                   <span class="datetime secondary-text"><a rel="nofollow" href="http://arjan-tijms.omnifaces.org/2012/11/implementing-container-authentication.html?showComment=1505248808035#c8082909950241329295">September 12, 2017 at 1:40 PM</a></span>
                                  </div>
                                  <p id="bc_0_60MC" class="comment-content">&gt;In one of your updates you say "WebLogic doesn't require the mandatory role mapping anymore." I don't think this is the case.<br><br>It can be confusing under which circumstances this is exactly the case, but it really should work. See https://github.com/javaee-samples/javaee7-samples/tree/master/jaspic/basic-authentication/src/main/webapp/WEB-INF <br><br>There's no weblogic.xml file, and that test passed on WebLogic.<br><br>Note that for Java EE 8 default group to role mapping is mandatory when there is no container specific configuration .</p>
                                  <span id="bc_0_60MN" class="comment-actions secondary-text" kind="m"><span class="item-control blog-admin pid-1107289781"><a o="d" target="_self" href="https://www.blogger.com/delete-comment.g?blogID=4498889353428710313&amp;postID=8082909950241329295">Delete</a></span></span>
                                 </div>
                                 <div id="bc_0_60BR" class="comment-replies"></div>
                                 <div id="bc_0_60B_box" class="comment-replybox-single"></div></li>
                                <li id="bc_0_61B" class="comment" kind="b">
                                 <div class="avatar-image-container">
                                  <img src="//1.bp.blogspot.com/-WnvsgxXZacQ/VAJ89MgcRJI/AAAAAAAAAIY/S75Ehh9XLjY/s35/Profile_Picture.jpg">
                                 </div>
                                 <div id="c7063176019781739227" class="comment-block">
                                  <div id="bc_0_61M" class="comment-header" kind="m">
                                   <cite class="user"><a rel="nofollow" href="https://www.blogger.com/profile/01721904127841880944">mjremijan</a></cite>
                                   <span class="icon user"></span>
                                   <span class="datetime secondary-text"><a rel="nofollow" href="http://arjan-tijms.omnifaces.org/2012/11/implementing-container-authentication.html?showComment=1505249606764#c7063176019781739227">September 12, 2017 at 1:53 PM</a></span>
                                  </div>
                                  <p id="bc_0_61MC" class="comment-content">I'll take a look at this. It looks like I'm doing essentially the same thing so I'll see if I can find the difference.</p>
                                  <span id="bc_0_61MN" class="comment-actions secondary-text" kind="m"><span class="item-control blog-admin pid-42639361"><a o="d" target="_self" href="https://www.blogger.com/delete-comment.g?blogID=4498889353428710313&amp;postID=7063176019781739227">Delete</a></span></span>
                                 </div>
                                 <div id="bc_0_61BR" class="comment-replies"></div>
                                 <div id="bc_0_61B_box" class="comment-replybox-single"></div></li>
                               </div>
                               <div id="bc_0_60I" class="continue" kind="ci">
                                <a href="javascript:;" target="_self">Reply</a>
                               </div>
                              </ol>
                              <div id="bc_0_60T_box" class="comment-replybox-thread"></div>
                             </div></span>
                           </div>
                           <div id="bc_0_62B_box" class="comment-replybox-single"></div></li>
                          <li id="bc_0_64B" class="comment" kind="b">
                           <div class="avatar-image-container">
                            <img src="//1.bp.blogspot.com/-WnvsgxXZacQ/VAJ89MgcRJI/AAAAAAAAAIY/S75Ehh9XLjY/s35/Profile_Picture.jpg">
                           </div>
                           <div id="c2361057601035330193" class="comment-block">
                            <div id="bc_0_64M" class="comment-header" kind="m">
                             <cite class="user"><a rel="nofollow" href="https://www.blogger.com/profile/01721904127841880944">mjremijan</a></cite>
                             <span class="icon user"></span>
                             <span class="datetime secondary-text"><a rel="nofollow" href="http://arjan-tijms.omnifaces.org/2012/11/implementing-container-authentication.html?showComment=1505247966628#c2361057601035330193">September 12, 2017 at 1:26 PM</a></span>
                            </div>
                            <p id="bc_0_64MC" class="comment-content">Looks like WebLogic 12.2.1.0 doesn't propagate a custom Principal object either.</p>
                            <span id="bc_0_64MN" class="comment-actions secondary-text" kind="m"><a kind="i" href="javascript:;" target="_self" o="r">Reply</a><span class="item-control blog-admin pid-42639361"><a o="d" target="_self" href="https://www.blogger.com/delete-comment.g?blogID=4498889353428710313&amp;postID=2361057601035330193">Delete</a></span></span>
                           </div>
                           <div id="bc_0_64BR" class="comment-replies">
                            <span id="bc_0_64b+seedGhr7D" kind="d">
                             <div id="bc_0_63T" class="comment-thread inline-thread" kind="t" t="0" u="0">
                              <span id="bc_0_63TT" class="thread-toggle thread-expanded" kind="g"><span id="bc_0_63TA" class="thread-arrow"></span><span id="bc_0_63TN" class="thread-count"><span id="bc_0_63TNT" style="display: none;"></span><span id="bc_0_63TNU" style="display: none;"></span><a href="javascript:;" target="_self">Replies</a>
                                <div id="bc_0_63TD" class="thread-dropContainer thread-expanded">
                                 <span class="thread-drop"></span>
                                </div></span></span>
                              <ol id="bc_0_63TC" class="thread-chrome thread-expanded">
                               <div>
                                <li id="bc_0_63B" class="comment" kind="b">
                                 <div class="avatar-image-container">
                                  <img src="//lh5.googleusercontent.com/-Fsb6YxLG-5Q/AAAAAAAAAAI/AAAAAAAAACY/8H8WPYh2OT8/s35-c/photo.jpg">
                                 </div>
                                 <div id="c5538368375106899871" class="comment-block">
                                  <div id="bc_0_63M" class="comment-header" kind="m">
                                   <cite class="user blog-author"><a rel="nofollow" href="https://www.blogger.com/profile/08548593340781885396">Arjan Tijms</a></cite>
                                   <span class="icon user blog-author"></span>
                                   <span class="datetime secondary-text"><a rel="nofollow" href="http://arjan-tijms.omnifaces.org/2012/11/implementing-container-authentication.html?showComment=1505248426084#c5538368375106899871">September 12, 2017 at 1:33 PM</a></span>
                                  </div>
                                  <p id="bc_0_63MC" class="comment-content">Indeed, the WLS Security team has strong opinions about the necessity for custom principals and indeed does not support them. <br><br>See this matrix where I last tested WebLogic 12.2.1.2 and the tests with custom principals indeed fail: http://arjan-tijms.omnifaces.org/2016/12/the-state-of-portable-authentication-in.html<br><br>After quite a huge discussion we have reached a kind of compromise support for custom principals in JSR 375, since the spec lead (Will) is from WebLogic and explained that WebLogic cannot really support custom principals in the way that all other application servers can.</p>
                                  <span id="bc_0_63MN" class="comment-actions secondary-text" kind="m"><span class="item-control blog-admin pid-1107289781"><a o="d" target="_self" href="https://www.blogger.com/delete-comment.g?blogID=4498889353428710313&amp;postID=5538368375106899871">Delete</a></span></span>
                                 </div>
                                 <div id="bc_0_63BR" class="comment-replies"></div>
                                 <div id="bc_0_63B_box" class="comment-replybox-single"></div></li>
                               </div>
                               <div id="bc_0_63I" class="continue" kind="ci">
                                <a href="javascript:;" target="_self">Reply</a>
                               </div>
                              </ol>
                              <div id="bc_0_63T_box" class="comment-replybox-thread"></div>
                             </div></span>
                           </div>
                           <div id="bc_0_64B_box" class="comment-replybox-single"></div></li>
                         </ol>
                         <div id="bc_0_65I" class="continue" kind="ci">
                          <a href="javascript:;" target="_self">Add comment</a>
                         </div>
                         <div id="bc_0_65T_box" class="comment-replybox-thread"></div>
                         <div id="bc_0_65L" class="loadmore loaded" kind="rb">
                          <a href="javascript:;" target="_self">Load more...</a>
                         </div>
                        </div>
                       </div>
                      </div> 
                     </div> 
                    </div> 
                    <p class="comment-footer"> </p>
                    <div class="comment-form"> 
                     <a name="comment-form"></a> 
                     <p> </p> 
                     <a href="https://www.blogger.com/comment-iframe.g?blogID=4498889353428710313&amp;postID=422402323853605005" id="comment-editor-src"></a> 
                     <iframe allowtransparency="true" class="blogger-iframe-colorize blogger-comment-from-post" frameborder="0" height="410px" id="comment-editor" name="comment-editor" src="" width="100%"></iframe> 
                     <script src="https://www.blogger.com/static/v1/jsbin/3223910711-comment_from_post_iframe.js" type="text/javascript"></script> 
                     <script type="text/javascript">
      BLOG_CMT_createIframe('https://www.blogger.com/rpc_relay.html');
    </script> 
                    </div> 
                    <p></p> 
                    <div id="backlinks-container"> 
                     <div id="Blog1_backlinks-container"> 
                     </div> 
                    </div> 
                   </div> 
                  </div> 
                 </div>
                </div> 
               </div> 
               <div class="blog-pager" id="blog-pager"> 
                <span id="blog-pager-newer-link"> <a class="blog-pager-newer-link" href="http://arjan-tijms.omnifaces.org/2012/12/bridging-undertows-authentication.html" id="Blog1_blog-pager-newer-link" title="Newer Post">Newer Post</a> </span> 
                <span id="blog-pager-older-link"> <a class="blog-pager-older-link" href="http://arjan-tijms.omnifaces.org/2012/08/dynamic-cdi-producers.html" id="Blog1_blog-pager-older-link" title="Older Post">Older Post</a> </span> 
                <a class="home-link" href="http://arjan-tijms.omnifaces.org/">Home</a> 
               </div> 
               <div class="clear"></div> 
               <div class="post-feeds"> 
                <div class="feed-links">
                  Subscribe to: 
                 <a class="feed-link" href="http://arjan-tijms.omnifaces.org/feeds/422402323853605005/comments/default" target="_blank" type="application/atom+xml">Post Comments (Atom)</a> 
                </div> 
               </div> 
               <script type="text/javascript">
    window.___gcfg = { 'lang': 'en' };
  </script> 
              </div>
             </div> 
            </div> 
           </div> 
           <div class="column-left-outer"> 
            <div class="column-left-inner"> 
             <aside> 
             </aside> 
            </div> 
           </div> 
           <div class="column-right-outer"> 
            <div class="column-right-inner"> 
             <aside> 
              <div class="sidebar section" id="sidebar-right-1">
               <div class="widget Poll" data-version="1" id="Poll4"> 
                <h2 class="title">Do you want OmniFaces to take over the JSF spec lead role?</h2> 
                <div class="widget-content"> 
                 <iframe allowtransparency="true" frameborder="0" height="180" name="poll-widget-2485419822756739149" style="border:none; width:100%;"></iframe> 
                 <div class="clear"></div> 
                 <span class="widget-item-control"> <span class="item-control blog-admin"> <a class="quickedit" href="//www.blogger.com/rearrange?blogID=4498889353428710313&amp;widgetType=Poll&amp;widgetId=Poll4&amp;action=editWidget&amp;sectionId=sidebar-right-1" onclick="return _WidgetManager._PopupConfig(document.getElementById(&quot;Poll4&quot;));" target="configPoll4" title="Edit"> <img alt="" height="18" src="https://resources.blogblog.com/img/icon18_wrench_allbkg.png" width="18"> </a> </span> </span> 
                 <div class="clear"></div> 
                </div> 
               </div>
               <div class="widget Poll" data-version="1" id="Poll3"> 
                <h2 class="title">Which specs would you like most to see updated or added to Java EE 8?</h2> 
                <div class="widget-content"> 
                 <iframe allowtransparency="true" frameborder="0" height="680" name="poll-widget5635513600561124107" style="border:none; width:100%;"></iframe> 
                 <div class="clear"></div> 
                 <span class="widget-item-control"> <span class="item-control blog-admin"> <a class="quickedit" href="//www.blogger.com/rearrange?blogID=4498889353428710313&amp;widgetType=Poll&amp;widgetId=Poll3&amp;action=editWidget&amp;sectionId=sidebar-right-1" onclick="return _WidgetManager._PopupConfig(document.getElementById(&quot;Poll3&quot;));" target="configPoll3" title="Edit"> <img alt="" height="18" src="https://resources.blogblog.com/img/icon18_wrench_allbkg.png" width="18"> </a> </span> </span> 
                 <div class="clear"></div> 
                </div> 
               </div>
               <div class="widget Profile" data-version="1" id="Profile1"> 
                <h2>About Me</h2> 
                <div class="widget-content"> 
                 <a href="https://plus.google.com/104480612998561613961"><img alt="My photo" class="profile-img" height="80" src="//lh5.googleusercontent.com/-Fsb6YxLG-5Q/AAAAAAAAAAI/AAAAAAAAACY/8H8WPYh2OT8/s80-c/photo.jpg" width="80"></a> 
                 <dl class="profile-datablock"> 
                  <dt class="profile-data"> 
                   <a class="profile-name-link g-profile" href="https://plus.google.com/104480612998561613961" rel="author" style="background-image: url(//www.google.com/images/icons/ui/gprofile_button-16.png);"> Arjan Tijms </a> 
                   <br> 
                   <div class="g-follow" data-annotation="bubble" data-height="20" data-href="https://plus.google.com/104480612998561613961"></div> 
                  </dt> 
                 </dl> 
                 <a class="profile-link" href="https://plus.google.com/104480612998561613961" rel="author">View my complete profile</a> 
                 <div class="clear"></div> 
                 <span class="widget-item-control"> <span class="item-control blog-admin"> <a class="quickedit" href="//www.blogger.com/rearrange?blogID=4498889353428710313&amp;widgetType=Profile&amp;widgetId=Profile1&amp;action=editWidget&amp;sectionId=sidebar-right-1" onclick="return _WidgetManager._PopupConfig(document.getElementById(&quot;Profile1&quot;));" target="configProfile1" title="Edit"> <img alt="" height="18" src="https://resources.blogblog.com/img/icon18_wrench_allbkg.png" width="18"> </a> </span> </span> 
                 <div class="clear"></div> 
                </div> 
               </div>
               <div class="widget HTML" data-version="1" id="HTML2"> 
                <div class="widget-content"> 
                 <iframe class="zeef" src="http://zeef.io/block/8905?font_size=14" height="200" style="width: 253px; margin:-5px; padding:0; overflow:hidden;" frameborder="no" scrolling="no"></iframe> 
                </div> 
                <div class="clear"></div> 
                <span class="widget-item-control"> <span class="item-control blog-admin"> <a class="quickedit" href="//www.blogger.com/rearrange?blogID=4498889353428710313&amp;widgetType=HTML&amp;widgetId=HTML2&amp;action=editWidget&amp;sectionId=sidebar-right-1" onclick="return _WidgetManager._PopupConfig(document.getElementById(&quot;HTML2&quot;));" target="configHTML2" title="Edit"> <img alt="" height="18" src="https://resources.blogblog.com/img/icon18_wrench_allbkg.png" width="18"> </a> </span> </span> 
                <div class="clear"></div> 
               </div>
               <div class="widget PageList" data-version="1" id="PageList1"> 
                <h2>Pages</h2> 
                <div class="widget-content"> 
                 <ul> 
                  <li> <a href="http://arjan-tijms.omnifaces.org/p/jsf-23.html">What's new in JSF 2.3?</a> </li> 
                  <li> <a href="http://arjan-tijms.omnifaces.org/p/jsf-22.html">What's new in JSF 2.2?</a> </li> 
                  <li> <a href="http://arjan-tijms.omnifaces.org/p/whats-new-in-java-ee-security-api-10.html">What's new in Java EE Security API 1.0?</a> </li> 
                 </ul> 
                 <div class="clear"></div> 
                 <span class="widget-item-control"> <span class="item-control blog-admin"> <a class="quickedit" href="//www.blogger.com/rearrange?blogID=4498889353428710313&amp;widgetType=PageList&amp;widgetId=PageList1&amp;action=editWidget&amp;sectionId=sidebar-right-1" onclick="return _WidgetManager._PopupConfig(document.getElementById(&quot;PageList1&quot;));" target="configPageList1" title="Edit"> <img alt="" height="18" src="https://resources.blogblog.com/img/icon18_wrench_allbkg.png" width="18"> </a> </span> </span> 
                 <div class="clear"></div> 
                </div> 
               </div>
               <div class="widget HTML" data-version="1" id="HTML1"> 
                <h2 class="title">Resources</h2> 
                <div class="widget-content"> 
                 <ul> 
                  <li><a href="https://javaee7.zeef.com">Java EE 7</a> </li>
                  <li><a href="https://jsf.zeef.com">JSF</a> </li>
                  <li><a href="https://omnifaces.zeef.com">OmniFaces</a> </li>
                 </ul> 
                </div> 
                <div class="clear"></div> 
                <span class="widget-item-control"> <span class="item-control blog-admin"> <a class="quickedit" href="//www.blogger.com/rearrange?blogID=4498889353428710313&amp;widgetType=HTML&amp;widgetId=HTML1&amp;action=editWidget&amp;sectionId=sidebar-right-1" onclick="return _WidgetManager._PopupConfig(document.getElementById(&quot;HTML1&quot;));" target="configHTML1" title="Edit"> <img alt="" height="18" src="https://resources.blogblog.com/img/icon18_wrench_allbkg.png" width="18"> </a> </span> </span> 
                <div class="clear"></div> 
               </div>
               <div class="widget BlogArchive" data-version="1" id="BlogArchive1"> 
                <h2>Blog Archive</h2> 
                <div class="widget-content"> 
                 <div id="ArchiveList"> 
                  <div id="BlogArchive1_ArchiveList"> 
                   <ul class="hierarchy"> 
                    <li class="archivedate collapsed"> <a class="toggle" href="javascript:void(0)"> <span class="zippy"> ?&nbsp; </span> </a> <a class="post-count-link" href="http://arjan-tijms.omnifaces.org/2017/"> 2017 </a> <span class="post-count" dir="ltr">(6)</span> 
                     <ul class="hierarchy"> 
                      <li class="archivedate collapsed"> <a class="toggle" href="javascript:void(0)"> <span class="zippy"> ?&nbsp; </span> </a> <a class="post-count-link" href="http://arjan-tijms.omnifaces.org/2017/08/"> August </a> <span class="post-count" dir="ltr">(3)</span> </li> 
                     </ul> 
                     <ul class="hierarchy"> 
                      <li class="archivedate collapsed"> <a class="toggle" href="javascript:void(0)"> <span class="zippy"> ?&nbsp; </span> </a> <a class="post-count-link" href="http://arjan-tijms.omnifaces.org/2017/06/"> June </a> <span class="post-count" dir="ltr">(1)</span> </li> 
                     </ul> 
                     <ul class="hierarchy"> 
                      <li class="archivedate collapsed"> <a class="toggle" href="javascript:void(0)"> <span class="zippy"> ?&nbsp; </span> </a> <a class="post-count-link" href="http://arjan-tijms.omnifaces.org/2017/05/"> May </a> <span class="post-count" dir="ltr">(1)</span> </li> 
                     </ul> 
                     <ul class="hierarchy"> 
                      <li class="archivedate collapsed"> <a class="toggle" href="javascript:void(0)"> <span class="zippy"> ?&nbsp; </span> </a> <a class="post-count-link" href="http://arjan-tijms.omnifaces.org/2017/03/"> March </a> <span class="post-count" dir="ltr">(1)</span> </li> 
                     </ul> </li> 
                   </ul> 
                   <ul class="hierarchy"> 
                    <li class="archivedate collapsed"> <a class="toggle" href="javascript:void(0)"> <span class="zippy"> ?&nbsp; </span> </a> <a class="post-count-link" href="http://arjan-tijms.omnifaces.org/2016/"> 2016 </a> <span class="post-count" dir="ltr">(8)</span> 
                     <ul class="hierarchy"> 
                      <li class="archivedate collapsed"> <a class="toggle" href="javascript:void(0)"> <span class="zippy"> ?&nbsp; </span> </a> <a class="post-count-link" href="http://arjan-tijms.omnifaces.org/2016/12/"> December </a> <span class="post-count" dir="ltr">(1)</span> </li> 
                     </ul> 
                     <ul class="hierarchy"> 
                      <li class="archivedate collapsed"> <a class="toggle" href="javascript:void(0)"> <span class="zippy"> ?&nbsp; </span> </a> <a class="post-count-link" href="http://arjan-tijms.omnifaces.org/2016/08/"> August </a> <span class="post-count" dir="ltr">(1)</span> </li> 
                     </ul> 
                     <ul class="hierarchy"> 
                      <li class="archivedate collapsed"> <a class="toggle" href="javascript:void(0)"> <span class="zippy"> ?&nbsp; </span> </a> <a class="post-count-link" href="http://arjan-tijms.omnifaces.org/2016/07/"> July </a> <span class="post-count" dir="ltr">(1)</span> </li> 
                     </ul> 
                     <ul class="hierarchy"> 
                      <li class="archivedate collapsed"> <a class="toggle" href="javascript:void(0)"> <span class="zippy"> ?&nbsp; </span> </a> <a class="post-count-link" href="http://arjan-tijms.omnifaces.org/2016/06/"> June </a> <span class="post-count" dir="ltr">(1)</span> </li> 
                     </ul> 
                     <ul class="hierarchy"> 
                      <li class="archivedate collapsed"> <a class="toggle" href="javascript:void(0)"> <span class="zippy"> ?&nbsp; </span> </a> <a class="post-count-link" href="http://arjan-tijms.omnifaces.org/2016/05/"> May </a> <span class="post-count" dir="ltr">(1)</span> </li> 
                     </ul> 
                     <ul class="hierarchy"> 
                      <li class="archivedate collapsed"> <a class="toggle" href="javascript:void(0)"> <span class="zippy"> ?&nbsp; </span> </a> <a class="post-count-link" href="http://arjan-tijms.omnifaces.org/2016/04/"> April </a> <span class="post-count" dir="ltr">(1)</span> </li> 
                     </ul> 
                     <ul class="hierarchy"> 
                      <li class="archivedate collapsed"> <a class="toggle" href="javascript:void(0)"> <span class="zippy"> ?&nbsp; </span> </a> <a class="post-count-link" href="http://arjan-tijms.omnifaces.org/2016/01/"> January </a> <span class="post-count" dir="ltr">(2)</span> </li> 
                     </ul> </li> 
                   </ul> 
                   <ul class="hierarchy"> 
                    <li class="archivedate collapsed"> <a class="toggle" href="javascript:void(0)"> <span class="zippy"> ?&nbsp; </span> </a> <a class="post-count-link" href="http://arjan-tijms.omnifaces.org/2015/"> 2015 </a> <span class="post-count" dir="ltr">(13)</span> 
                     <ul class="hierarchy"> 
                      <li class="archivedate collapsed"> <a class="toggle" href="javascript:void(0)"> <span class="zippy"> ?&nbsp; </span> </a> <a class="post-count-link" href="http://arjan-tijms.omnifaces.org/2015/11/"> November </a> <span class="post-count" dir="ltr">(1)</span> </li> 
                     </ul> 
                     <ul class="hierarchy"> 
                      <li class="archivedate collapsed"> <a class="toggle" href="javascript:void(0)"> <span class="zippy"> ?&nbsp; </span> </a> <a class="post-count-link" href="http://arjan-tijms.omnifaces.org/2015/10/"> October </a> <span class="post-count" dir="ltr">(1)</span> </li> 
                     </ul> 
                     <ul class="hierarchy"> 
                      <li class="archivedate collapsed"> <a class="toggle" href="javascript:void(0)"> <span class="zippy"> ?&nbsp; </span> </a> <a class="post-count-link" href="http://arjan-tijms.omnifaces.org/2015/08/"> August </a> <span class="post-count" dir="ltr">(1)</span> </li> 
                     </ul> 
                     <ul class="hierarchy"> 
                      <li class="archivedate collapsed"> <a class="toggle" href="javascript:void(0)"> <span class="zippy"> ?&nbsp; </span> </a> <a class="post-count-link" href="http://arjan-tijms.omnifaces.org/2015/07/"> July </a> <span class="post-count" dir="ltr">(1)</span> </li> 
                     </ul> 
                     <ul class="hierarchy"> 
                      <li class="archivedate collapsed"> <a class="toggle" href="javascript:void(0)"> <span class="zippy"> ?&nbsp; </span> </a> <a class="post-count-link" href="http://arjan-tijms.omnifaces.org/2015/06/"> June </a> <span class="post-count" dir="ltr">(1)</span> </li> 
                     </ul> 
                     <ul class="hierarchy"> 
                      <li class="archivedate collapsed"> <a class="toggle" href="javascript:void(0)"> <span class="zippy"> ?&nbsp; </span> </a> <a class="post-count-link" href="http://arjan-tijms.omnifaces.org/2015/05/"> May </a> <span class="post-count" dir="ltr">(2)</span> </li> 
                     </ul> 
                     <ul class="hierarchy"> 
                      <li class="archivedate collapsed"> <a class="toggle" href="javascript:void(0)"> <span class="zippy"> ?&nbsp; </span> </a> <a class="post-count-link" href="http://arjan-tijms.omnifaces.org/2015/04/"> April </a> <span class="post-count" dir="ltr">(2)</span> </li> 
                     </ul> 
                     <ul class="hierarchy"> 
                      <li class="archivedate collapsed"> <a class="toggle" href="javascript:void(0)"> <span class="zippy"> ?&nbsp; </span> </a> <a class="post-count-link" href="http://arjan-tijms.omnifaces.org/2015/03/"> March </a> <span class="post-count" dir="ltr">(2)</span> </li> 
                     </ul> 
                     <ul class="hierarchy"> 
                      <li class="archivedate collapsed"> <a class="toggle" href="javascript:void(0)"> <span class="zippy"> ?&nbsp; </span> </a> <a class="post-count-link" href="http://arjan-tijms.omnifaces.org/2015/01/"> January </a> <span class="post-count" dir="ltr">(2)</span> </li> 
                     </ul> </li> 
                   </ul> 
                   <ul class="hierarchy"> 
                    <li class="archivedate collapsed"> <a class="toggle" href="javascript:void(0)"> <span class="zippy"> ?&nbsp; </span> </a> <a class="post-count-link" href="http://arjan-tijms.omnifaces.org/2014/"> 2014 </a> <span class="post-count" dir="ltr">(15)</span> 
                     <ul class="hierarchy"> 
                      <li class="archivedate collapsed"> <a class="toggle" href="javascript:void(0)"> <span class="zippy"> ?&nbsp; </span> </a> <a class="post-count-link" href="http://arjan-tijms.omnifaces.org/2014/12/"> December </a> <span class="post-count" dir="ltr">(1)</span> </li> 
                     </ul> 
                     <ul class="hierarchy"> 
                      <li class="archivedate collapsed"> <a class="toggle" href="javascript:void(0)"> <span class="zippy"> ?&nbsp; </span> </a> <a class="post-count-link" href="http://arjan-tijms.omnifaces.org/2014/11/"> November </a> <span class="post-count" dir="ltr">(5)</span> </li> 
                     </ul> 
                     <ul class="hierarchy"> 
                      <li class="archivedate collapsed"> <a class="toggle" href="javascript:void(0)"> <span class="zippy"> ?&nbsp; </span> </a> <a class="post-count-link" href="http://arjan-tijms.omnifaces.org/2014/10/"> October </a> <span class="post-count" dir="ltr">(1)</span> </li> 
                     </ul> 
                     <ul class="hierarchy"> 
                      <li class="archivedate collapsed"> <a class="toggle" href="javascript:void(0)"> <span class="zippy"> ?&nbsp; </span> </a> <a class="post-count-link" href="http://arjan-tijms.omnifaces.org/2014/09/"> September </a> <span class="post-count" dir="ltr">(1)</span> </li> 
                     </ul> 
                     <ul class="hierarchy"> 
                      <li class="archivedate collapsed"> <a class="toggle" href="javascript:void(0)"> <span class="zippy"> ?&nbsp; </span> </a> <a class="post-count-link" href="http://arjan-tijms.omnifaces.org/2014/08/"> August </a> <span class="post-count" dir="ltr">(1)</span> </li> 
                     </ul> 
                     <ul class="hierarchy"> 
                      <li class="archivedate collapsed"> <a class="toggle" href="javascript:void(0)"> <span class="zippy"> ?&nbsp; </span> </a> <a class="post-count-link" href="http://arjan-tijms.omnifaces.org/2014/07/"> July </a> <span class="post-count" dir="ltr">(1)</span> </li> 
                     </ul> 
                     <ul class="hierarchy"> 
                      <li class="archivedate collapsed"> <a class="toggle" href="javascript:void(0)"> <span class="zippy"> ?&nbsp; </span> </a> <a class="post-count-link" href="http://arjan-tijms.omnifaces.org/2014/06/"> June </a> <span class="post-count" dir="ltr">(1)</span> </li> 
                     </ul> 
                     <ul class="hierarchy"> 
                      <li class="archivedate collapsed"> <a class="toggle" href="javascript:void(0)"> <span class="zippy"> ?&nbsp; </span> </a> <a class="post-count-link" href="http://arjan-tijms.omnifaces.org/2014/05/"> May </a> <span class="post-count" dir="ltr">(1)</span> </li> 
                     </ul> 
                     <ul class="hierarchy"> 
                      <li class="archivedate collapsed"> <a class="toggle" href="javascript:void(0)"> <span class="zippy"> ?&nbsp; </span> </a> <a class="post-count-link" href="http://arjan-tijms.omnifaces.org/2014/04/"> April </a> <span class="post-count" dir="ltr">(1)</span> </li> 
                     </ul> 
                     <ul class="hierarchy"> 
                      <li class="archivedate collapsed"> <a class="toggle" href="javascript:void(0)"> <span class="zippy"> ?&nbsp; </span> </a> <a class="post-count-link" href="http://arjan-tijms.omnifaces.org/2014/03/"> March </a> <span class="post-count" dir="ltr">(1)</span> </li> 
                     </ul> 
                     <ul class="hierarchy"> 
                      <li class="archivedate collapsed"> <a class="toggle" href="javascript:void(0)"> <span class="zippy"> ?&nbsp; </span> </a> <a class="post-count-link" href="http://arjan-tijms.omnifaces.org/2014/02/"> February </a> <span class="post-count" dir="ltr">(1)</span> </li> 
                     </ul> </li> 
                   </ul> 
                   <ul class="hierarchy"> 
                    <li class="archivedate collapsed"> <a class="toggle" href="javascript:void(0)"> <span class="zippy"> ?&nbsp; </span> </a> <a class="post-count-link" href="http://arjan-tijms.omnifaces.org/2013/"> 2013 </a> <span class="post-count" dir="ltr">(9)</span> 
                     <ul class="hierarchy"> 
                      <li class="archivedate collapsed"> <a class="toggle" href="javascript:void(0)"> <span class="zippy"> ?&nbsp; </span> </a> <a class="post-count-link" href="http://arjan-tijms.omnifaces.org/2013/10/"> October </a> <span class="post-count" dir="ltr">(2)</span> </li> 
                     </ul> 
                     <ul class="hierarchy"> 
                      <li class="archivedate collapsed"> <a class="toggle" href="javascript:void(0)"> <span class="zippy"> ?&nbsp; </span> </a> <a class="post-count-link" href="http://arjan-tijms.omnifaces.org/2013/09/"> September </a> <span class="post-count" dir="ltr">(1)</span> </li> 
                     </ul> 
                     <ul class="hierarchy"> 
                      <li class="archivedate collapsed"> <a class="toggle" href="javascript:void(0)"> <span class="zippy"> ?&nbsp; </span> </a> <a class="post-count-link" href="http://arjan-tijms.omnifaces.org/2013/08/"> August </a> <span class="post-count" dir="ltr">(1)</span> </li> 
                     </ul> 
                     <ul class="hierarchy"> 
                      <li class="archivedate collapsed"> <a class="toggle" href="javascript:void(0)"> <span class="zippy"> ?&nbsp; </span> </a> <a class="post-count-link" href="http://arjan-tijms.omnifaces.org/2013/07/"> July </a> <span class="post-count" dir="ltr">(1)</span> </li> 
                     </ul> 
                     <ul class="hierarchy"> 
                      <li class="archivedate collapsed"> <a class="toggle" href="javascript:void(0)"> <span class="zippy"> ?&nbsp; </span> </a> <a class="post-count-link" href="http://arjan-tijms.omnifaces.org/2013/06/"> June </a> <span class="post-count" dir="ltr">(1)</span> </li> 
                     </ul> 
                     <ul class="hierarchy"> 
                      <li class="archivedate collapsed"> <a class="toggle" href="javascript:void(0)"> <span class="zippy"> ?&nbsp; </span> </a> <a class="post-count-link" href="http://arjan-tijms.omnifaces.org/2013/05/"> May </a> <span class="post-count" dir="ltr">(1)</span> </li> 
                     </ul> 
                     <ul class="hierarchy"> 
                      <li class="archivedate collapsed"> <a class="toggle" href="javascript:void(0)"> <span class="zippy"> ?&nbsp; </span> </a> <a class="post-count-link" href="http://arjan-tijms.omnifaces.org/2013/04/"> April </a> <span class="post-count" dir="ltr">(1)</span> </li> 
                     </ul> 
                     <ul class="hierarchy"> 
                      <li class="archivedate collapsed"> <a class="toggle" href="javascript:void(0)"> <span class="zippy"> ?&nbsp; </span> </a> <a class="post-count-link" href="http://arjan-tijms.omnifaces.org/2013/03/"> March </a> <span class="post-count" dir="ltr">(1)</span> </li> 
                     </ul> </li> 
                   </ul> 
                   <ul class="hierarchy"> 
                    <li class="archivedate expanded"> <a class="toggle" href="javascript:void(0)"> <span class="zippy toggle-open"> ?&nbsp; </span> </a> <a class="post-count-link" href="http://arjan-tijms.omnifaces.org/2012/"> 2012 </a> <span class="post-count" dir="ltr">(13)</span> 
                     <ul class="hierarchy"> 
                      <li class="archivedate collapsed"> <a class="toggle" href="javascript:void(0)"> <span class="zippy"> ?&nbsp; </span> </a> <a class="post-count-link" href="http://arjan-tijms.omnifaces.org/2012/12/"> December </a> <span class="post-count" dir="ltr">(2)</span> </li> 
                     </ul> 
                     <ul class="hierarchy"> 
                      <li class="archivedate expanded"> <a class="toggle" href="javascript:void(0)"> <span class="zippy toggle-open"> ?&nbsp; </span> </a> <a class="post-count-link" href="http://arjan-tijms.omnifaces.org/2012/11/"> November </a> <span class="post-count" dir="ltr">(1)</span> 
                       <ul class="posts"> 
                        <li><a href="http://arjan-tijms.omnifaces.org/2012/11/implementing-container-authentication.html">Implementing container authentication in Java EE w...</a></li> 
                       </ul> </li> 
                     </ul> 
                     <ul class="hierarchy"> 
                      <li class="archivedate collapsed"> <a class="toggle" href="javascript:void(0)"> <span class="zippy"> ?&nbsp; </span> </a> <a class="post-count-link" href="http://arjan-tijms.omnifaces.org/2012/08/"> August </a> <span class="post-count" dir="ltr">(1)</span> </li> 
                     </ul> 
                     <ul class="hierarchy"> 
                      <li class="archivedate collapsed"> <a class="toggle" href="javascript:void(0)"> <span class="zippy"> ?&nbsp; </span> </a> <a class="post-count-link" href="http://arjan-tijms.omnifaces.org/2012/06/"> June </a> <span class="post-count" dir="ltr">(1)</span> </li> 
                     </ul> 
                     <ul class="hierarchy"> 
                      <li class="archivedate collapsed"> <a class="toggle" href="javascript:void(0)"> <span class="zippy"> ?&nbsp; </span> </a> <a class="post-count-link" href="http://arjan-tijms.omnifaces.org/2012/05/"> May </a> <span class="post-count" dir="ltr">(1)</span> </li> 
                     </ul> 
                     <ul class="hierarchy"> 
                      <li class="archivedate collapsed"> <a class="toggle" href="javascript:void(0)"> <span class="zippy"> ?&nbsp; </span> </a> <a class="post-count-link" href="http://arjan-tijms.omnifaces.org/2012/04/"> April </a> <span class="post-count" dir="ltr">(2)</span> </li> 
                     </ul> 
                     <ul class="hierarchy"> 
                      <li class="archivedate collapsed"> <a class="toggle" href="javascript:void(0)"> <span class="zippy"> ?&nbsp; </span> </a> <a class="post-count-link" href="http://arjan-tijms.omnifaces.org/2012/03/"> March </a> <span class="post-count" dir="ltr">(1)</span> </li> 
                     </ul> 
                     <ul class="hierarchy"> 
                      <li class="archivedate collapsed"> <a class="toggle" href="javascript:void(0)"> <span class="zippy"> ?&nbsp; </span> </a> <a class="post-count-link" href="http://arjan-tijms.omnifaces.org/2012/02/"> February </a> <span class="post-count" dir="ltr">(1)</span> </li> 
                     </ul> 
                     <ul class="hierarchy"> 
                      <li class="archivedate collapsed"> <a class="toggle" href="javascript:void(0)"> <span class="zippy"> ?&nbsp; </span> </a> <a class="post-count-link" href="http://arjan-tijms.omnifaces.org/2012/01/"> January </a> <span class="post-count" dir="ltr">(3)</span> </li> 
                     </ul> </li> 
                   </ul> 
                   <ul class="hierarchy"> 
                    <li class="archivedate collapsed"> <a class="toggle" href="javascript:void(0)"> <span class="zippy"> ?&nbsp; </span> </a> <a class="post-count-link" href="http://arjan-tijms.omnifaces.org/2011/"> 2011 </a> <span class="post-count" dir="ltr">(6)</span> 
                     <ul class="hierarchy"> 
                      <li class="archivedate collapsed"> <a class="toggle" href="javascript:void(0)"> <span class="zippy"> ?&nbsp; </span> </a> <a class="post-count-link" href="http://arjan-tijms.omnifaces.org/2011/12/"> December </a> <span class="post-count" dir="ltr">(1)</span> </li> 
                     </ul> 
                     <ul class="hierarchy"> 
                      <li class="archivedate collapsed"> <a class="toggle" href="javascript:void(0)"> <span class="zippy"> ?&nbsp; </span> </a> <a class="post-count-link" href="http://arjan-tijms.omnifaces.org/2011/09/"> September </a> <span class="post-count" dir="ltr">(3)</span> </li> 
                     </ul> 
                     <ul class="hierarchy"> 
                      <li class="archivedate collapsed"> <a class="toggle" href="javascript:void(0)"> <span class="zippy"> ?&nbsp; </span> </a> <a class="post-count-link" href="http://arjan-tijms.omnifaces.org/2011/08/"> August </a> <span class="post-count" dir="ltr">(1)</span> </li> 
                     </ul> 
                     <ul class="hierarchy"> 
                      <li class="archivedate collapsed"> <a class="toggle" href="javascript:void(0)"> <span class="zippy"> ?&nbsp; </span> </a> <a class="post-count-link" href="http://arjan-tijms.omnifaces.org/2011/07/"> July </a> <span class="post-count" dir="ltr">(1)</span> </li> 
                     </ul> </li> 
                   </ul> 
                   <ul class="hierarchy"> 
                    <li class="archivedate collapsed"> <a class="toggle" href="javascript:void(0)"> <span class="zippy"> ?&nbsp; </span> </a> <a class="post-count-link" href="http://arjan-tijms.omnifaces.org/2010/"> 2010 </a> <span class="post-count" dir="ltr">(2)</span> 
                     <ul class="hierarchy"> 
                      <li class="archivedate collapsed"> <a class="toggle" href="javascript:void(0)"> <span class="zippy"> ?&nbsp; </span> </a> <a class="post-count-link" href="http://arjan-tijms.omnifaces.org/2010/09/"> September </a> <span class="post-count" dir="ltr">(1)</span> </li> 
                     </ul> 
                     <ul class="hierarchy"> 
                      <li class="archivedate collapsed"> <a class="toggle" href="javascript:void(0)"> <span class="zippy"> ?&nbsp; </span> </a> <a class="post-count-link" href="http://arjan-tijms.omnifaces.org/2010/04/"> April </a> <span class="post-count" dir="ltr">(1)</span> </li> 
                     </ul> </li> 
                   </ul> 
                  </div> 
                 </div> 
                 <div class="clear"></div> 
                 <span class="widget-item-control"> <span class="item-control blog-admin"> <a class="quickedit" href="//www.blogger.com/rearrange?blogID=4498889353428710313&amp;widgetType=BlogArchive&amp;widgetId=BlogArchive1&amp;action=editWidget&amp;sectionId=sidebar-right-1" onclick="return _WidgetManager._PopupConfig(document.getElementById(&quot;BlogArchive1&quot;));" target="configBlogArchive1" title="Edit"> <img alt="" height="18" src="https://resources.blogblog.com/img/icon18_wrench_allbkg.png" width="18"> </a> </span> </span> 
                 <div class="clear"></div> 
                </div> 
               </div>
               <div class="widget PopularPosts" data-version="1" id="PopularPosts1"> 
                <h2>Popular Posts</h2> 
                <div class="widget-content popular-posts"> 
                 <ul> 
                  <li> 
                   <div class="item-content"> 
                    <div class="item-title">
                     <a href="http://arjan-tijms.omnifaces.org/2012/11/implementing-container-authentication.html">Implementing container authentication in Java EE with JASPIC</a>
                    </div> 
                    <div class="item-snippet">
                      This article takes a look at the state of security support in Java EE 6, with a focus on applications that wish to do their own authenticat...
                    </div> 
                   </div> 
                   <div style="clear: both;"></div> </li> 
                  <li> 
                   <div class="item-content"> 
                    <div class="item-title">
                     <a href="http://arjan-tijms.omnifaces.org/2015/07/jsf-23-new-feature-registrable.html">JSF 2.3 new feature: registrable DataModels</a>
                    </div> 
                    <div class="item-snippet">
                     Iterating components in JSF such as h:dataTable and ui:repeat have the DataModel class as their native input type. Other datatypes such a...
                    </div> 
                   </div> 
                   <div style="clear: both;"></div> </li> 
                  <li> 
                   <div class="item-content"> 
                    <div class="item-title">
                     <a href="http://arjan-tijms.omnifaces.org/2015/04/testing-jaspic-11-on-ibm-liberty-ee-7.html">Testing JASPIC 1.1 on IBM Liberty EE 7 beta </a>
                    </div> 
                    <div class="item-snippet">
                     In this article we take a look at the latest April 2015 beta version of IBM's Liberty server, and specifically look at how well it imple...
                    </div> 
                   </div> 
                   <div style="clear: both;"></div> </li> 
                  <li> 
                   <div class="item-content"> 
                    <div class="item-title">
                     <a href="http://arjan-tijms.omnifaces.org/2015/11/the-state-of-portable-authentication.html">The state of portable authentication for GlassFish, Payara, JBoss/WildFly, WebLogic and Liberty</a>
                    </div> 
                    <div class="item-snippet">
                     Almost exactly 3 years ago I took an initial look at custom container authentication in Java EE . Java EE has a dedicated API for this calle...
                    </div> 
                   </div> 
                   <div style="clear: both;"></div> </li> 
                  <li> 
                   <div class="item-content"> 
                    <div class="item-title">
                     <a href="http://arjan-tijms.omnifaces.org/2015/03/the-most-popular-java-ee-servers-in.html">The most popular Java EE servers in 2014/2015 according to OmniFaces users</a>
                    </div> 
                    <div class="item-snippet">
                     For a little over 3 months (from half of November 2014 to late February 2015) we had a poll on the OmniFaces website asking what AS (Applic...
                    </div> 
                   </div> 
                   <div style="clear: both;"></div> </li> 
                  <li> 
                   <div class="item-content"> 
                    <div class="item-title">
                     <a href="http://arjan-tijms.omnifaces.org/2014/03/implementing-container-authorization-in.html">Implementing container authorization in Java EE with JACC</a>
                    </div> 
                    <div class="item-snippet">
                     A while back we looked at how container authentication is done in Java EE by using the JASPIC API. In this article we'll take a look at...
                    </div> 
                   </div> 
                   <div style="clear: both;"></div> </li> 
                  <li> 
                   <div class="item-content"> 
                    <div class="item-title">
                     <a href="http://arjan-tijms.omnifaces.org/2014/11/jsf-and-mvc-10-comparison-in-code.html">JSF and MVC 1.0, a comparison in code</a>
                    </div> 
                    <div class="item-snippet">
                      One of the new specs that will debut in Java EE 8 will be MVC 1.0, a second MVC framework alongside the existing MVC framework JSF. A lot...
                    </div> 
                   </div> 
                   <div style="clear: both;"></div> </li> 
                  <li> 
                   <div class="item-content"> 
                    <div class="item-title">
                     <a href="http://arjan-tijms.omnifaces.org/2014/11/header-based-stateless-token.html">Header based stateless token authentication for JAX-RS</a>
                    </div> 
                    <div class="item-snippet">
                     Authentication is a topic that comes up often for web applications. The Java EE spec supports authentication for those via the Servlet and ...
                    </div> 
                   </div> 
                   <div style="clear: both;"></div> </li> 
                  <li> 
                   <div class="item-content"> 
                    <div class="item-title">
                     <a href="http://arjan-tijms.omnifaces.org/2015/10/how-servlet-containers-all-implement.html">How Servlet containers all implement identity stores differently</a>
                    </div> 
                    <div class="item-snippet">
                     In Java EE security two artefacts play a major role, the authentication mechanism and the identity store . The authentication mechanism ...
                    </div> 
                   </div> 
                   <div style="clear: both;"></div> </li> 
                  <li> 
                   <div class="item-content"> 
                    <div class="item-title">
                     <a href="http://arjan-tijms.omnifaces.org/2013/04/whats-new-in-java-ee-7s-authentication.html">What's new in Java EE 7's authentication support?</a>
                    </div> 
                    <div class="item-snippet">
                     Java EE 7 comes with a lot of improvements in many areas. Things like JSF 2.2 , CDI 1.1, JMS 2.0 and JAX-RS 2.0 have all been massively impr...
                    </div> 
                   </div> 
                   <div style="clear: both;"></div> </li> 
                 </ul> 
                 <div class="clear"></div> 
                 <span class="widget-item-control"> <span class="item-control blog-admin"> <a class="quickedit" href="//www.blogger.com/rearrange?blogID=4498889353428710313&amp;widgetType=PopularPosts&amp;widgetId=PopularPosts1&amp;action=editWidget&amp;sectionId=sidebar-right-1" onclick="return _WidgetManager._PopupConfig(document.getElementById(&quot;PopularPosts1&quot;));" target="configPopularPosts1" title="Edit"> <img alt="" height="18" src="https://resources.blogblog.com/img/icon18_wrench_allbkg.png" width="18"> </a> </span> </span> 
                 <div class="clear"></div> 
                </div> 
               </div>
               <div class="widget Poll" data-version="1" id="Poll2"> 
                <h2 class="title">Which AS do you use with OmniFaces?</h2> 
                <div class="widget-content"> 
                 <iframe allowtransparency="true" frameborder="0" height="480" name="poll-widget4845701979806098855" style="border:none; width:100%;"></iframe> 
                 <div class="clear"></div> 
                 <span class="widget-item-control"> <span class="item-control blog-admin"> <a class="quickedit" href="//www.blogger.com/rearrange?blogID=4498889353428710313&amp;widgetType=Poll&amp;widgetId=Poll2&amp;action=editWidget&amp;sectionId=sidebar-right-1" onclick="return _WidgetManager._PopupConfig(document.getElementById(&quot;Poll2&quot;));" target="configPoll2" title="Edit"> <img alt="" height="18" src="https://resources.blogblog.com/img/icon18_wrench_allbkg.png" width="18"> </a> </span> </span> 
                 <div class="clear"></div> 
                </div> 
               </div>
               <div class="widget Poll" data-version="1" id="Poll1"> 
                <h2 class="title">Should OmniFaces 2.x require as a minimum:</h2> 
                <div class="widget-content"> 
                 <iframe allowtransparency="true" frameborder="0" height="200" name="poll-widget-5422524114728630317" style="border:none; width:100%;"></iframe> 
                 <div class="clear"></div> 
                 <span class="widget-item-control"> <span class="item-control blog-admin"> <a class="quickedit" href="//www.blogger.com/rearrange?blogID=4498889353428710313&amp;widgetType=Poll&amp;widgetId=Poll1&amp;action=editWidget&amp;sectionId=sidebar-right-1" onclick="return _WidgetManager._PopupConfig(document.getElementById(&quot;Poll1&quot;));" target="configPoll1" title="Edit"> <img alt="" height="18" src="https://resources.blogblog.com/img/icon18_wrench_allbkg.png" width="18"> </a> </span> </span> 
                 <div class="clear"></div> 
                </div> 
               </div>
              </div> 
             </aside> 
            </div> 
           </div> 
          </div> 
          <div style="clear: both"></div> 
          <!-- columns --> 
         </div> 
         <!-- main --> 
        </div> 
       </div> 
       <div class="main-cap-bottom cap-bottom"> 
        <div class="cap-left"></div> 
        <div class="cap-right"></div> 
       </div> 
      </div> 
      <footer> 
       <div class="footer-outer"> 
        <div class="footer-cap-top cap-top"> 
         <div class="cap-left"></div> 
         <div class="cap-right"></div> 
        </div> 
        <div class="fauxborder-left footer-fauxborder-left"> 
         <div class="fauxborder-right footer-fauxborder-right"></div> 
         <div class="region-inner footer-inner"> 
          <div class="foot no-items section" id="footer-1"></div> 
          <table border="0" cellpadding="0" cellspacing="0" class="section-columns columns-2"> 
           <tbody> 
            <tr> 
             <td class="first columns-cell"> 
              <div class="foot no-items section" id="footer-2-1"></div> </td> 
             <td class="columns-cell"> 
              <div class="foot no-items section" id="footer-2-2"></div> </td> 
            </tr> 
           </tbody> 
          </table> 
          <!-- outside of the include in order to lock Attribution widget --> 
          <div class="foot section" id="footer-3">
           <div class="widget Attribution" data-version="1" id="Attribution1"> 
            <div class="widget-content" style="text-align: center;">
              Simple theme. Powered by 
             <a href="https://www.blogger.com" target="_blank">Blogger</a>. 
            </div> 
            <div class="clear"></div> 
            <span class="widget-item-control"> <span class="item-control blog-admin"> <a class="quickedit" href="//www.blogger.com/rearrange?blogID=4498889353428710313&amp;widgetType=Attribution&amp;widgetId=Attribution1&amp;action=editWidget&amp;sectionId=footer-3" onclick="return _WidgetManager._PopupConfig(document.getElementById(&quot;Attribution1&quot;));" target="configAttribution1" title="Edit"> <img alt="" height="18" src="https://resources.blogblog.com/img/icon18_wrench_allbkg.png" width="18"> </a> </span> </span> 
            <div class="clear"></div> 
           </div>
          </div> 
         </div> 
        </div> 
        <div class="footer-cap-bottom cap-bottom"> 
         <div class="cap-left"></div> 
         <div class="cap-right"></div> 
        </div> 
       </div> 
      </footer> 
      <!-- content --> 
     </div> 
    </div> 
    <div class="content-cap-bottom cap-bottom"> 
     <div class="cap-left"></div> 
     <div class="cap-right"></div> 
    </div> 
   </div> 
  </div> 
  <script type="text/javascript">
    window.setTimeout(function() {
        document.body.className = document.body.className.replace('loading', '');
      }, 10);
  </script> 
  <script type="text/javascript">
        (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
        (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
        m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
        })(window,document,'script','https://www.google-analytics.com/analytics.js','ga');
        ga('create', 'UA-92647715-1', 'auto', 'blogger');
        ga('blogger.send', 'pageview');
      </script> 
  <script src="https://apis.google.com/js/plusone.js" type="text/javascript"></script> 
  <script type="text/javascript" src="https://www.blogger.com/static/v1/widgets/3392677022-widgets.js"></script> 
  <script type="text/javascript">
window['__wavt'] = 'AOuZoY59w4bBFT-fFbaLOPAIr2wmPcXqew:1505675985744';_WidgetManager._Init('//www.blogger.com/rearrange?blogID\x3d4498889353428710313','//arjan-tijms.omnifaces.org/2012/11/implementing-container-authentication.html','4498889353428710313');
_WidgetManager._SetDataContext([{'name': 'blog', 'data': {'blogId': '4498889353428710313', 'title': 'Arjan Tijms\x27 Weblog', 'url': 'http://arjan-tijms.omnifaces.org/2012/11/implementing-container-authentication.html', 'canonicalUrl': 'http://arjan-tijms.omnifaces.org/2012/11/implementing-container-authentication.html', 'homepageUrl': 'http://arjan-tijms.omnifaces.org/', 'searchUrl': 'http://arjan-tijms.omnifaces.org/search', 'canonicalHomepageUrl': 'http://arjan-tijms.omnifaces.org/', 'blogspotFaviconUrl': 'http://arjan-tijms.omnifaces.org/favicon.ico', 'bloggerUrl': 'https://www.blogger.com', 'hasCustomDomain': true, 'httpsEnabled': false, 'enabledCommentProfileImages': true, 'gPlusViewType': 'FILTERED_POSTMOD', 'adultContent': false, 'analyticsAccountNumber': 'UA-92647715-1', 'encoding': 'UTF-8', 'locale': 'en', 'localeUnderscoreDelimited': 'en', 'languageDirection': 'ltr', 'isPrivate': false, 'isMobile': false, 'isMobileRequest': false, 'mobileClass': '', 'isPrivateBlog': false, 'feedLinks': '\x3clink rel\x3d\x22alternate\x22 type\x3d\x22application/atom+xml\x22 title\x3d\x22Arjan Tijms\x26#39; Weblog - Atom\x22 href\x3d\x22http://arjan-tijms.omnifaces.org/feeds/posts/default\x22 /\x3e\n\x3clink rel\x3d\x22alternate\x22 type\x3d\x22application/rss+xml\x22 title\x3d\x22Arjan Tijms\x26#39; Weblog - RSS\x22 href\x3d\x22http://arjan-tijms.omnifaces.org/feeds/posts/default?alt\x3drss\x22 /\x3e\n\x3clink rel\x3d\x22service.post\x22 type\x3d\x22application/atom+xml\x22 title\x3d\x22Arjan Tijms\x26#39; Weblog - Atom\x22 href\x3d\x22https://www.blogger.com/feeds/4498889353428710313/posts/default\x22 /\x3e\n\n\x3clink rel\x3d\x22alternate\x22 type\x3d\x22application/atom+xml\x22 title\x3d\x22Arjan Tijms\x26#39; Weblog - Atom\x22 href\x3d\x22http://arjan-tijms.omnifaces.org/feeds/422402323853605005/comments/default\x22 /\x3e\n', 'meTag': '', 'openIdOpTag': '', 'adsenseHostId': 'ca-host-pub-1556223355139109', 'adsenseHasAds': false, 'ieCssRetrofitLinks': '\x3c!--[if IE]\x3e\x3cscript type\x3d\x22text/javascript\x22 src\x3d\x22https://www.blogger.com/static/v1/jsbin/35781802-ieretrofit.js\x22\x3e\x3c/script\x3e\n\x3c![endif]--\x3e', 'view': '', 'dynamicViewsCommentsSrc': '//www.blogblog.com/dynamicviews/4224c15c4e7c9321/js/comments.js', 'dynamicViewsScriptSrc': '//www.blogblog.com/dynamicviews/c4bb9df366c0abf7', 'plusOneApiSrc': 'https://apis.google.com/js/plusone.js', 'sharing': {'platforms': [{'name': 'Get link', 'key': 'link', 'shareMessage': 'Get link', 'target': ''}, {'name': 'Facebook', 'key': 'facebook', 'shareMessage': 'Share to Facebook', 'target': 'facebook'}, {'name': 'BlogThis!', 'key': 'blogThis', 'shareMessage': 'BlogThis!', 'target': 'blog'}, {'name': 'Twitter', 'key': 'twitter', 'shareMessage': 'Share to Twitter', 'target': 'twitter'}, {'name': 'Pinterest', 'key': 'pinterest', 'shareMessage': 'Share to Pinterest', 'target': 'pinterest'}, {'name': 'Google+', 'key': 'googlePlus', 'shareMessage': 'Share to Google+', 'target': 'googleplus'}, {'name': 'Email', 'key': 'email', 'shareMessage': 'Email', 'target': 'email'}], 'googlePlusShareButtonWidth': 300, 'googlePlusBootstrap': '\x3cscript type\x3d\x22text/javascript\x22\x3ewindow.___gcfg \x3d {\x27lang\x27: \x27en\x27};\x3c/script\x3e'}, 'hasCustomJumpLinkMessage': false, 'jumpLinkMessage': 'Read more', 'pageType': 'item', 'postId': '422402323853605005', 'pageName': 'Implementing container authentication in Java EE with JASPIC', 'pageTitle': 'Arjan Tijms\x27 Weblog: Implementing container authentication in Java EE with JASPIC'}}, {'name': 'features', 'data': {'lazy_images': 'false', 'unsupported_browser_message': 'false', 'lightbox_img_parsing': 'false', 'video_theatre_support': 'false', 'sharing_get_link_dialog': 'false'}}, {'name': 'messages', 'data': {'edit': 'Edit', 'linkCopiedToClipboard': 'Link copied to clipboard!', 'ok': 'Ok', 'postLink': 'Post Link'}}, {'name': 'template', 'data': {'name': 'custom', 'localizedName': 'Custom', 'isResponsive': false, 'isAlternateRendering': false, 'isCustom': true, 'variant': 'pale', 'variantId': 'pale', 'variantName': 'Pale', 'localizedVariantName': 'Pale'}}, {'name': 'view', 'data': {'classic': {'name': 'classic', 'url': '?view\x3dclassic'}, 'flipcard': {'name': 'flipcard', 'url': '?view\x3dflipcard'}, 'magazine': {'name': 'magazine', 'url': '?view\x3dmagazine'}, 'mosaic': {'name': 'mosaic', 'url': '?view\x3dmosaic'}, 'sidebar': {'name': 'sidebar', 'url': '?view\x3dsidebar'}, 'snapshot': {'name': 'snapshot', 'url': '?view\x3dsnapshot'}, 'timeslide': {'name': 'timeslide', 'url': '?view\x3dtimeslide'}, 'isMobile': false, 'title': 'Implementing container authentication in Java EE with JASPIC', 'description': ' This article takes a look at the state of security support in Java EE 6, with a focus on applications that wish to do their own authenticat...', 'url': 'http://arjan-tijms.omnifaces.org/2012/11/implementing-container-authentication.html', 'type': 'item', 'isSingleItem': true, 'isMultipleItems': false, 'isError': false, 'isPage': false, 'isPost': true, 'isHomepage': false, 'isArchive': false, 'isLabelSearch': false, 'postId': 422402323853605005}}]);
_WidgetManager._RegisterWidget('_NavbarView', new _WidgetInfo('Navbar1', 'navbar', null, document.getElementById('Navbar1'), {}, 'displayModeFull'));
_WidgetManager._RegisterWidget('_HeaderView', new _WidgetInfo('Header1', 'header', null, document.getElementById('Header1'), {}, 'displayModeFull'));
_WidgetManager._RegisterWidget('_BlogView', new _WidgetInfo('Blog1', 'main', null, document.getElementById('Blog1'), {'cmtInteractionsEnabled': false, 'lightboxEnabled': true, 'lightboxModuleUrl': 'https://www.blogger.com/static/v1/jsbin/658758296-lbx.js', 'lightboxCssUrl': 'https://www.blogger.com/static/v1/v-css/368954415-lightbox_bundle.css'}, 'displayModeFull'));
_WidgetManager._RegisterWidget('_PollView', new _WidgetInfo('Poll4', 'sidebar-right-1', null, document.getElementById('Poll4'), {'pollid': '-2485419822756739149', 'iframeurl': 'https://www.google.com/reviews/polls/display/-2485419822756739149/blogger_template/run_app?txtclr\x3d%23222222\x26lnkclr\x3d%232288bb\x26chrtclr\x3d%232288bb\x26font\x3dnormal+normal+12px+Arial,+Tahoma,+Helvetica,+FreeSans,+sans-serif\x26hideq\x3dtrue\x26purl\x3dhttp://arjan-tijms.omnifaces.org/'}, 'displayModeFull'));
_WidgetManager._RegisterWidget('_PollView', new _WidgetInfo('Poll3', 'sidebar-right-1', null, document.getElementById('Poll3'), {'pollid': '5635513600561124107', 'iframeurl': 'https://www.google.com/reviews/polls/display/5635513600561124107/blogger_template/run_app?txtclr\x3d%23222222\x26lnkclr\x3d%232288bb\x26chrtclr\x3d%232288bb\x26font\x3dnormal+normal+12px+Arial,+Tahoma,+Helvetica,+FreeSans,+sans-serif\x26hideq\x3dtrue\x26purl\x3dhttp://arjan-tijms.omnifaces.org/'}, 'displayModeFull'));
_WidgetManager._RegisterWidget('_ProfileView', new _WidgetInfo('Profile1', 'sidebar-right-1', null, document.getElementById('Profile1'), {}, 'displayModeFull'));
_WidgetManager._RegisterWidget('_HTMLView', new _WidgetInfo('HTML2', 'sidebar-right-1', null, document.getElementById('HTML2'), {}, 'displayModeFull'));
_WidgetManager._RegisterWidget('_PageListView', new _WidgetInfo('PageList1', 'sidebar-right-1', null, document.getElementById('PageList1'), {'title': 'Pages', 'links': [{'isCurrentPage': false, 'href': 'http://arjan-tijms.omnifaces.org/p/jsf-23.html', 'id': '4449117008857082921', 'title': 'What\x27s new in JSF 2.3?'}, {'isCurrentPage': false, 'href': 'http://arjan-tijms.omnifaces.org/p/jsf-22.html', 'id': '6249704474818192199', 'title': 'What\x26#39;s new in JSF 2.2?'}, {'isCurrentPage': false, 'href': 'http://arjan-tijms.omnifaces.org/p/whats-new-in-java-ee-security-api-10.html', 'id': '8337734301344612657', 'title': 'What\x27s new in Java EE Security API 1.0?'}], 'mobile': false}, 'displayModeFull'));
_WidgetManager._RegisterWidget('_HTMLView', new _WidgetInfo('HTML1', 'sidebar-right-1', null, document.getElementById('HTML1'), {}, 'displayModeFull'));
_WidgetManager._RegisterWidget('_BlogArchiveView', new _WidgetInfo('BlogArchive1', 'sidebar-right-1', null, document.getElementById('BlogArchive1'), {'languageDirection': 'ltr', 'loadingMessage': 'Loading\x26hellip;'}, 'displayModeFull'));
_WidgetManager._RegisterWidget('_PopularPostsView', new _WidgetInfo('PopularPosts1', 'sidebar-right-1', null, document.getElementById('PopularPosts1'), {}, 'displayModeFull'));
_WidgetManager._RegisterWidget('_PollView', new _WidgetInfo('Poll2', 'sidebar-right-1', null, document.getElementById('Poll2'), {'pollid': '4845701979806098855', 'iframeurl': 'https://www.google.com/reviews/polls/display/4845701979806098855/blogger_template/run_app?txtclr\x3d%23222222\x26lnkclr\x3d%232288bb\x26chrtclr\x3d%232288bb\x26font\x3dnormal+normal+12px+Arial,+Tahoma,+Helvetica,+FreeSans,+sans-serif\x26hideq\x3dtrue\x26purl\x3dhttp://arjan-tijms.omnifaces.org/'}, 'displayModeFull'));
_WidgetManager._RegisterWidget('_PollView', new _WidgetInfo('Poll1', 'sidebar-right-1', null, document.getElementById('Poll1'), {'pollid': '-5422524114728630317', 'iframeurl': 'https://www.google.com/reviews/polls/display/-5422524114728630317/blogger_template/run_app?txtclr\x3d%23222222\x26lnkclr\x3d%232288bb\x26chrtclr\x3d%232288bb\x26font\x3dnormal+normal+12px+Arial,+Tahoma,+Helvetica,+FreeSans,+sans-serif\x26hideq\x3dtrue\x26purl\x3dhttp://arjan-tijms.omnifaces.org/'}, 'displayModeFull'));
_WidgetManager._RegisterWidget('_AttributionView', new _WidgetInfo('Attribution1', 'footer-3', null, document.getElementById('Attribution1'), {}, 'displayModeFull'));
</script>  
 </body>
</html>