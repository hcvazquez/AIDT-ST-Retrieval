<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" lang="en" xml:lang="en">
 <head> 
  <title>BotDetect JSF Login Form CAPTCHA Code Example</title> 
  <meta http-equiv="Content-Type" content="text/html; charset=utf-8"> 
  <meta name="description" content="JSF Login Form Captcha validation - Java code example: BotDetect Java Captcha library example source code listing and explanation."> 
  <meta name="keywords" content="captcha, captcha java, captcha login form, java captcha, javaserver faces, javaserver faces login form, javaserver faces captcha, login form, examples, botdetect"> 
  <meta name="copyright" content="(C) Captcha, Inc."> 
  <meta name="robots" content="index, follow, noodp"> 
  <meta name="viewport" content="width=device-width, initial-scale=1"> 
  <link href="../../../style/ethereal.css?t=1506517089" type="text/css" rel="stylesheet" media="screen"> 
  <link rel="apple-touch-icon" href="../../../images/apple-touch-icon.png"> 
  <link href="https://captcha.com/doc/java/examples/jsf-login-form-captcha-example.html" rel="canonical"> 
  <link href="https://captcha.com/" rel="home"> 
  <script async type="text/javascript" src="../../../script/scripts.js?t=1506517089"></script> 
 </head> 
 <body id="top"> 
  <div class="container"> 
   <div class="content"> 
    <div class="column" id="main"> 
     <h1>JavaServer Faces Login Form CAPTCHA Code Example</h1> 
     <div id="breadcrumbs">
      <a href="../../../documentation.html" title="BotDetect CAPTCHA Documentation Index">documentation</a> &gt; 
      <a href="../../../java-captcha.html" title="BotDetect Java CAPTCHA Library">java captcha</a> &gt; 
      <a href="../../../doc/java/howto/jsf-captcha.html" title="BotDetect JavaServer Faces CAPTCHA Integration">javaserver faces</a>
     </div> 
     <div class="spacerjavaalpha"></div> 
     <div class="tabstrip" data-tabstrip-group="traditionalapi-simpleapi" data-is-root-tabstrip> 
      <ul> 
       <li class="tabstrip_active"><a href="#traditional-api">Traditional API</a></li> 
       <li class="tabstrip_inactive"><a href="#simple-api">Simple API</a></li> 
      </ul> 
     </div> 
     <div id="traditional-api" data-tabstrip-group="traditionalapi-simpleapi" class="tab_content"> 
      <p>The JSF Login Form Captcha code example shows how to add <a href="../../../java-captcha.html" title="BotDetect Java CAPTCHA library">BotDetect CAPTCHA</a> protection to a typical JavaServer Faces login form.</p> 
      <div class="bounded floater crash" style="margin-top: 15px;"> 
       <h3>First Time Here?</h3> 
       <p>Check the BotDetect <a href="../jsp-captcha-quickstart.html" title="BotDetect Java Server Pages CAPTCHA Integration Quickstart">JSP Captcha Quickstart</a> for key integration steps.</p> 
      </div> 
      <p>To prevent bots from trying to guess the login info by brute force submission of a large number of common values, the visitor first has to prove they are human (by solving the CAPTCHA), and only then is their username and password submission checked against the authentication data store.</p> 
      <p>Also, if they enter an invalid username + password combination three times, they have to solve the CAPTCHA again. This prevents attempts in which the attacker would first solve the CAPTCHA themselves, and then let a bot brute-force the authentication info.</p> 
      <p>To keep the example code simple, the example doesn't access a data store to authenticate the user, but <strong>accepts all logins with usernames and passwords at least 5 characters long as valid</strong>.</p> 
      <a class="download_free" href="../../../captcha-download.html?version=java" title="Download the BotDetect Java CAPTCHA Library Free Version">Download the BotDetect Java library and run this example</a> 
      <br> 
      <ul class="sitemap"> 
       <li><a href="#jsf20">JavaServer Faces 2.0+</a></li> 
       <li><a href="#jsf12">JavaServer Faces 1.2</a></li> 
      </ul> 
      <h2 class="section" id="jsf20">JavaServer Faces 2.0+</h2> 
      <h3>Downloaded Location</h3> 
      <p>The JSF 2.0+ Login Form CAPTCHA code example is included in the <br> <code>examples/traditional-api/bdc4-traditional-api-jsf20-login-form-captcha-example.war</code> file of the download package. Deploying (unpacking) the file will create a standard JSP directory tree.</p> 
      <ul class="sitemap"> 
       <li><a href="#index.jsp">index.jsp</a></li> 
       <li><a href="#LoginForm.java">WEB-INF/src/com/captcha/botdetect/examples/jsf/login_form/view/LoginForm.java</a></li> 
       <li><a href="#web.xml">WEB-INF/web.xml</a></li> 
      </ul> 
      <h3>Running Example</h3> 
      <p>This example's war file (in BotDetect download package) already embeds all dependencies.</p> 
      <p>In case you are making this example from scratch in your IDE, you need to ensure <code>botdetect.jar</code>, <code>botdetect-servlet.jar</code>, <code>botdetect-jsp20.jar</code>, and <code>botdetect-jsf20.jar</code> are in the classpath.</p> 
      <h3 id="index.jsp">index.jsp</h3> 
      <pre class="hl"><span class="hl kwa">&lt;%@</span>page contentType<span class="hl opt">=</span><span class="hl str">"text/html"</span> pageEncoding<span class="hl opt">=</span><span class="hl str">"UTF-8"</span><span class="hl kwa">%&gt;</span>
<span class="hl kwa">&lt;%@</span>taglib prefix<span class="hl opt">=</span><span class="hl str">"f"</span> uri<span class="hl opt">=</span><span class="hl str">"http://java.sun.com/jsf/core"</span><span class="hl kwa">%&gt;</span>
<span class="hl kwa">&lt;%@</span>taglib prefix<span class="hl opt">=</span><span class="hl str">"h"</span> uri<span class="hl opt">=</span><span class="hl str">"http://java.sun.com/jsf/html"</span><span class="hl kwa">%&gt;</span>
<span class="hl kwa"></span><strong><span class="hl kwa">&lt;%@</span>taglib prefix<span class="hl opt">=</span><span class="hl str">"botDetect"</span> uri<span class="hl opt">=</span><span class="hl str">"https://captcha.com/java/jsf"</span><span class="hl kwa">%&gt;</span></strong><span class="hl kwa"></span>
<span class="hl kwa">&lt;!DOCTYPE</span> HTML PUBLIC <span class="hl str">"-//W3C//DTD HTML 4.01 Transitional//EN"</span>
  <span class="hl str">"http://www.w3.org/TR/html4/loose.dtd"</span><span class="hl kwa">&gt;</span>
<span class="hl kwa">&lt;f:view&gt;</span>
  <span class="hl kwa">&lt;html&gt;</span>
    <span class="hl kwa">&lt;head&gt;</span>
      <span class="hl kwa">&lt;meta</span> <span class="hl kwb">http-equiv</span>=<span class="hl str">"Content-Type"</span> <span class="hl kwb">content</span>=<span class="hl str">"text/html; charset=UTF-8"</span><span class="hl kwa">/&gt;</span>
      <span class="hl kwa">&lt;title&gt;</span>BotDetect Java CAPTCHA Validation: JSF Login Form CAPTCHA Code Example<span class="hl kwa">&lt;/title&gt;</span>
      <span class="hl kwa">&lt;link</span> <span class="hl kwb">rel</span>=<span class="hl str">"stylesheet"</span> <span class="hl kwb">href</span>=<span class="hl str">"stylesheet.css"</span> <span class="hl kwb">type</span>=<span class="hl str">"text/css"</span><span class="hl kwa">&gt;</span>
    <span class="hl kwa">&lt;/head&gt;</span>
    <span class="hl kwa">&lt;body&gt;</span>
      <span class="hl kwa">&lt;h:form</span> <span class="hl kwb">prependId</span>=<span class="hl str">"false"</span> <span class="hl kwb">styleClass</span>=<span class="hl str">"column"</span><span class="hl kwa">&gt;</span>
        <span class="hl kwa">&lt;h1&gt;</span>BotDetect Java CAPTCHA Validation:<span class="hl kwa">&lt;br/&gt;</span> JSF Login Form CAPTCHA Code Example<span class="hl kwa">&lt;/h1&gt;</span>
        <span class="hl kwa">&lt;fieldset&gt;</span>
          <span class="hl kwa">&lt;legend&gt;</span>
            <span class="hl kwa">&lt;h:panelGroup</span> <span class="hl kwb">rendered</span>=<span class="hl str">"#{!loginForm.isUserLoggedIn}"</span><span class="hl kwa">&gt;</span>
              CAPTCHA included in JSF Login form validation
            <span class="hl kwa">&lt;/h:panelGroup&gt;</span>
            <span class="hl kwa">&lt;h:panelGroup</span> <span class="hl kwb">rendered</span>=<span class="hl str">"#{loginForm.isUserLoggedIn}"</span><span class="hl kwa">&gt;</span>
              Validation passed
            <span class="hl kwa">&lt;/h:panelGroup&gt;</span>
          <span class="hl kwa">&lt;/legend&gt;</span>
          
          <span class="hl kwa">&lt;h:panelGrid</span> <span class="hl kwb">columns</span>=<span class="hl str">"1"</span><span class="hl kwa">&gt;</span>
            <span class="hl kwa">&lt;h:outputText</span> <span class="hl kwb">value</span>=<span class="hl str">"Username:"</span><span class="hl kwa">/&gt;</span>
            <span class="hl kwa">&lt;h:inputText</span> <span class="hl kwb">id</span>=<span class="hl str">"username"</span> <span class="hl kwb">value</span>=<span class="hl str">"#{loginForm.username}"</span><span class="hl kwa">/&gt;</span>

            <span class="hl kwa">&lt;h:outputText</span> <span class="hl kwb">value</span>=<span class="hl str">"Password:"</span><span class="hl kwa">/&gt;</span>
            <span class="hl kwa">&lt;h:inputSecret</span> <span class="hl kwb">id</span>=<span class="hl str">"password"</span> <span class="hl kwb">value</span>=<span class="hl str">"#{loginForm.password}"</span> <span class="hl kwb">rendered</span>=<span class="hl str">"#{!loginForm.isUserLoggedIn}"</span><span class="hl kwa">/&gt;</span>
            <span class="hl kwa">&lt;h:inputText</span> <span class="hl kwb">value</span>=<span class="hl str">"#{loginForm.password}"</span> <span class="hl kwb">rendered</span>=<span class="hl str">"#{loginForm.isUserLoggedIn}"</span><span class="hl kwa">/&gt;</span>

            <span class="hl kwa">&lt;h:panelGroup</span> <span class="hl kwb">rendered</span>=<span class="hl str">"#{!loginForm.isCaptchaSolved}"</span><span class="hl kwa">&gt;</span>
              <span class="hl kwa">&lt;h:outputLabel</span> <span class="hl kwb">for</span>=<span class="hl str">"captchaCode"</span> <span class="hl kwb">value</span>=<span class="hl str">"Retype the characters from the picture:"</span><span class="hl kwa">/&gt;</span>
              <span class="hl com">&lt;!-- Adding BotDetect Captcha to the page --&gt;</span>
              <span class="hl kwa"></span><strong><span class="hl kwa">&lt;botDetect:jsfCaptcha</span> <span class="hl kwb">id</span>=<span class="hl str">"exampleCaptcha"</span> 
                        <span class="hl kwb">userInputID</span>=<span class="hl str">"captchaCode"</span>
                        <span class="hl kwb">imageWidth</span>=<span class="hl str">"200"</span>
                        <span class="hl kwb">codeLength</span>=<span class="hl str">"4"</span>
                        <span class="hl kwb">codeStyle</span>=<span class="hl str">"ALPHA"</span>
                        <span class="hl kwb">binding</span>=<span class="hl str">"#{loginForm.captcha}"</span><span class="hl kwa">/&gt;</span></strong><span class="hl kwa"></span>
              
              <span class="hl kwa">&lt;div</span> <span class="hl kwb">class</span>=<span class="hl str">"validationDiv"</span><span class="hl kwa">&gt;</span>
                <span class="hl kwa">&lt;h:inputText</span> <span class="hl kwb">id</span>=<span class="hl str">"captchaCode"</span> <span class="hl kwb">value</span>=<span class="hl str">"#{loginForm.captchaCode}"</span><span class="hl kwa">/&gt;</span>
              <span class="hl kwa">&lt;/div&gt;</span>
            <span class="hl kwa">&lt;/h:panelGroup&gt;</span>
              
            <span class="hl kwa">&lt;h:outputText</span> <span class="hl kwb">value</span>=<span class="hl str">"#{loginForm.errorMessage}"</span> <span class="hl kwb">rendered</span>=<span class="hl str">"#{!loginForm.isUserLoggedIn}"</span> <span class="hl kwb">styleClass</span>=<span class="hl str">"incorrect"</span> <span class="hl kwa">/&gt;</span>
            <span class="hl kwa">&lt;h:commandButton</span> <span class="hl kwb">action</span>=<span class="hl str">"#{loginForm.login}"</span> <span class="hl kwb">value</span>=<span class="hl str">"Login"</span> <span class="hl kwb">rendered</span>=<span class="hl str">"#{!loginForm.isUserLoggedIn}"</span><span class="hl kwa">/&gt;</span>
          <span class="hl kwa">&lt;/h:panelGrid&gt;</span>
              
          <span class="hl kwa">&lt;h:outputLink</span> <span class="hl kwb">value</span>=<span class="hl str">"#{facesContext.externalContext.requestContextPath}/faces/index.jsp"</span>
                 <span class="hl kwb">rendered</span>=<span class="hl str">"#{loginForm.isUserLoggedIn}"</span><span class="hl kwa">&gt;</span>Back to login page.<span class="hl kwa">&lt;/h:outputLink&gt;</span>
        <span class="hl kwa">&lt;/fieldset&gt;</span>
      <span class="hl kwa">&lt;/h:form&gt;</span>
    <span class="hl kwa">&lt;/body&gt;</span>
  <span class="hl kwa">&lt;/html&gt;</span>
<span class="hl kwa">&lt;/f:view&gt;</span>
</pre> 
      <p>The example login form is simple, containing textboxes for username and password input. We <a href="../howto/jsf-captcha.html#standardJsf">add Captcha protection to the form</a> using the standard procedure.</p> 
      <p>Note that we check for managed bean <code>isCaptchaSolved</code> property's value to display parts of the form regarding authentication and Captcha validation status.</p> 
      <p class="toplink"><a href="#top" title="BotDetect JSF Login Form CAPTCHA Code Example">[back to top]</a></p> 
      <h3 id="LoginForm.java">LoginForm.java</h3> 
      <pre class="hl"><span class="hl kwa">package</span> com<span class="hl opt">.</span>captcha<span class="hl opt">.</span>botdetect<span class="hl opt">.</span>examples<span class="hl opt">.</span>jsf<span class="hl opt">.</span>login_form<span class="hl opt">.</span>view<span class="hl opt">;</span>

<span class="hl kwa">import</span> com<span class="hl opt">.</span>captcha<span class="hl opt">.</span>botdetect<span class="hl opt">.</span>web<span class="hl opt">.</span>jsf<span class="hl opt">.</span>JsfCaptcha<span class="hl opt">;</span>
<span class="hl kwa">import</span> javax<span class="hl opt">.</span>faces<span class="hl opt">.</span>bean<span class="hl opt">.</span>ManagedBean<span class="hl opt">;</span>
<span class="hl kwa">import</span> javax<span class="hl opt">.</span>faces<span class="hl opt">.</span>bean<span class="hl opt">.</span>RequestScoped<span class="hl opt">;</span>
<span class="hl kwa">import</span> javax<span class="hl opt">.</span>faces<span class="hl opt">.</span>context<span class="hl opt">.</span>FacesContext<span class="hl opt">;</span>
<span class="hl kwa">import</span> javax<span class="hl opt">.</span>servlet<span class="hl opt">.</span>http<span class="hl opt">.</span>HttpSession<span class="hl opt">;</span>

<span class="hl kwc">@ManagedBean</span><span class="hl opt">(</span>name<span class="hl opt">=</span><span class="hl str">"loginForm"</span><span class="hl opt">)</span>
<span class="hl kwc">@RequestScoped</span>
<span class="hl kwa">public class</span> LoginForm <span class="hl opt">{</span>
  
  <span class="hl kwa"></span><strong><span class="hl kwa">private</span> JsfCaptcha captcha<span class="hl opt">;</span></strong><span class="hl opt"></span>
  <span class="hl kwa">private</span> String captchaCode<span class="hl opt">;</span>
  <span class="hl kwa">private</span> String username<span class="hl opt">,</span> password<span class="hl opt">;</span>
  <span class="hl kwa">private</span> String errorMessage<span class="hl opt">;</span>
  <span class="hl kwa">private</span> HttpSession session<span class="hl opt">;</span>
  
  <span class="hl kwa">private</span> <span class="hl kwb">int</span> failedAuthCount<span class="hl opt">;</span>
  <span class="hl kwa">private</span> <span class="hl kwb">boolean</span> isCaptchaSolved<span class="hl opt">;</span>
  <span class="hl kwa">private</span> <span class="hl kwb">boolean</span> isUserLoggedIn<span class="hl opt">;</span>

  <span class="hl kwa">public</span> <span class="hl kwd">LoginForm</span><span class="hl opt">() {</span>
    FacesContext ctx <span class="hl opt">=</span> FacesContext<span class="hl opt">.</span><span class="hl kwd">getCurrentInstance</span><span class="hl opt">();</span>
    session <span class="hl opt">= (</span>HttpSession<span class="hl opt">)</span>FacesContext<span class="hl opt">.</span><span class="hl kwd">getCurrentInstance</span><span class="hl opt">().</span><span class="hl kwd">getExternalContext</span><span class="hl opt">().</span><span class="hl kwd">getSession</span><span class="hl opt">(</span>true<span class="hl opt">);</span>
    <span class="hl kwa">if</span> <span class="hl opt">(</span>ctx<span class="hl opt">.</span><span class="hl kwd">isPostback</span><span class="hl opt">()) {</span>
      <span class="hl kwd">loadSessionAttributes</span><span class="hl opt">();</span>
    <span class="hl opt">}</span> <span class="hl kwa">else</span> <span class="hl opt">{</span>
      <span class="hl kwd">saveSessionAttributes</span><span class="hl opt">();</span>
    <span class="hl opt">}</span>
  <span class="hl opt">}</span>

  <span class="hl kwa"></span><strong><span class="hl kwa">public</span> JsfCaptcha <span class="hl kwd">getCaptcha</span><span class="hl opt">() {</span>
    <span class="hl kwa">return</span> captcha<span class="hl opt">;</span>
  <span class="hl opt">}</span>

  <span class="hl kwa">public</span> <span class="hl kwb">void</span> <span class="hl kwd">setCaptcha</span><span class="hl opt">(</span>JsfCaptcha captcha<span class="hl opt">) {</span>
    <span class="hl kwa">this</span><span class="hl opt">.</span>captcha <span class="hl opt">=</span> captcha<span class="hl opt">;</span>
  <span class="hl opt">}</span></strong><span class="hl opt"></span>

  <span class="hl kwa">public</span> String <span class="hl kwd">getCaptchaCode</span><span class="hl opt">() {</span>
    <span class="hl kwa">return</span> captchaCode<span class="hl opt">;</span>
  <span class="hl opt">}</span>

  <span class="hl kwa">public</span> <span class="hl kwb">void</span> <span class="hl kwd">setCaptchaCode</span><span class="hl opt">(</span>String captchaCode<span class="hl opt">) {</span>
    <span class="hl kwa">this</span><span class="hl opt">.</span>captchaCode <span class="hl opt">=</span> captchaCode<span class="hl opt">;</span>
  <span class="hl opt">}</span>

  <span class="hl kwa">public</span> String <span class="hl kwd">getUsername</span><span class="hl opt">() {</span>
    <span class="hl kwa">return</span> username<span class="hl opt">;</span>
  <span class="hl opt">}</span>

  <span class="hl kwa">public</span> <span class="hl kwb">void</span> <span class="hl kwd">setUsername</span><span class="hl opt">(</span>String username<span class="hl opt">) {</span>
    <span class="hl kwa">this</span><span class="hl opt">.</span>username <span class="hl opt">=</span> username<span class="hl opt">;</span>
  <span class="hl opt">}</span>

  <span class="hl kwa">public</span> String <span class="hl kwd">getPassword</span><span class="hl opt">() {</span>
    <span class="hl kwa">return</span> password<span class="hl opt">;</span>
  <span class="hl opt">}</span>

  <span class="hl kwa">public</span> <span class="hl kwb">void</span> <span class="hl kwd">setPassword</span><span class="hl opt">(</span>String password<span class="hl opt">) {</span>
    <span class="hl kwa">this</span><span class="hl opt">.</span>password <span class="hl opt">=</span> password<span class="hl opt">;</span>
  <span class="hl opt">}</span>

  <span class="hl kwa">public</span> String <span class="hl kwd">getErrorMessage</span><span class="hl opt">() {</span>
    <span class="hl kwa">return</span> errorMessage<span class="hl opt">;</span>
  <span class="hl opt">}</span>

  <span class="hl kwa">public</span> <span class="hl kwb">boolean</span> <span class="hl kwd">getIsCaptchaSolved</span><span class="hl opt">() {</span>
    <span class="hl kwa">return</span> isCaptchaSolved<span class="hl opt">;</span>
  <span class="hl opt">}</span>
  
  <span class="hl kwa">public</span> <span class="hl kwb">boolean</span> <span class="hl kwd">getIsUserLoggedIn</span><span class="hl opt">() {</span>
    <span class="hl kwa">return</span> isUserLoggedIn<span class="hl opt">;</span>
  <span class="hl opt">}</span>

  <span class="hl kwa">public</span> <span class="hl kwb">void</span> <span class="hl kwd">login</span><span class="hl opt">() {</span>

    <span class="hl kwa">if</span> <span class="hl opt">(</span><span class="hl kwd">validateCaptcha</span><span class="hl opt">() &amp;&amp;</span> <span class="hl kwd">validateLogin</span><span class="hl opt">()) {</span>
      <span class="hl kwa">if</span> <span class="hl opt">(</span><span class="hl kwd">authenticate</span><span class="hl opt">()) {</span>
        errorMessage <span class="hl opt">=</span> <span class="hl str">""</span><span class="hl opt">;</span>
        isUserLoggedIn <span class="hl opt">=</span> true<span class="hl opt">;</span>
      <span class="hl opt">}</span> <span class="hl kwa">else</span> <span class="hl opt">{</span>
        errorMessage <span class="hl opt">=</span> <span class="hl str">"Authentication failed"</span><span class="hl opt">;</span>
      
        <span class="hl kwa">if</span> <span class="hl opt">(++</span>failedAuthCount <span class="hl opt">&gt;</span> <span class="hl num">2</span><span class="hl opt">) {</span>
          isCaptchaSolved <span class="hl opt">=</span> false<span class="hl opt">;</span>
          failedAuthCount <span class="hl opt">=</span> <span class="hl num">0</span><span class="hl opt">;</span>
        <span class="hl opt">}</span>
      <span class="hl opt">}</span>
    <span class="hl opt">}</span>
    
    captchaCode <span class="hl opt">=</span> <span class="hl str">""</span><span class="hl opt">;</span>
    <span class="hl kwd">saveSessionAttributes</span><span class="hl opt">();</span>
  <span class="hl opt">}</span>

  <span class="hl kwa">private</span> <span class="hl kwb">boolean</span> <span class="hl kwd">validateCaptcha</span><span class="hl opt">() {</span>
    <span class="hl slc">// validate the Captcha to check we're not dealing with a bot</span>
    <span class="hl kwa">if</span> <span class="hl opt">(!</span>isCaptchaSolved<span class="hl opt">) {</span>
      <span class="hl kwa"></span><strong><span class="hl kwa">if</span> <span class="hl opt">(!</span><span class="hl kwa">this</span><span class="hl opt">.</span>captcha<span class="hl opt">.</span><span class="hl kwd">validate</span><span class="hl opt">(</span>captchaCode<span class="hl opt">)) {</span></strong><span class="hl opt"></span>
        errorMessage <span class="hl opt">=</span> <span class="hl str">"Invalid code"</span><span class="hl opt">;</span>
        isCaptchaSolved <span class="hl opt">=</span> false<span class="hl opt">;</span>
        <span class="hl kwa">return</span> false<span class="hl opt">;</span>
      <span class="hl opt">}</span> <span class="hl kwa">else</span> <span class="hl opt">{</span>
        isCaptchaSolved <span class="hl opt">=</span> true<span class="hl opt">;</span>
      <span class="hl opt">}</span>
    <span class="hl opt">}</span>
  
    <span class="hl kwa">return</span> true<span class="hl opt">;</span>
  <span class="hl opt">}</span>

  <span class="hl kwa">private</span> <span class="hl kwb">boolean</span> <span class="hl kwd">validateLogin</span><span class="hl opt">() {</span>
    String pattern <span class="hl opt">=</span> <span class="hl str">"^[a-zA-Z0-9_]+$"</span><span class="hl opt">;</span> <span class="hl slc">// alphanumeric chars and underscores only</span>

    <span class="hl kwb">boolean</span> validLogin <span class="hl opt">=</span> username<span class="hl opt">.</span><span class="hl kwd">matches</span><span class="hl opt">(</span>pattern<span class="hl opt">) &amp;&amp;</span> password<span class="hl opt">.</span><span class="hl kwd">matches</span><span class="hl opt">(</span>pattern<span class="hl opt">);</span>
    <span class="hl kwa">if</span> <span class="hl opt">(!</span>validLogin<span class="hl opt">) {</span>
      errorMessage <span class="hl opt">=</span> <span class="hl str">"Invalid authentication info"</span><span class="hl opt">;</span>
    <span class="hl opt">}</span>
    <span class="hl kwa">return</span> validLogin<span class="hl opt">;</span>
  <span class="hl opt">}</span>

  <span class="hl kwa">private</span> <span class="hl kwb">boolean</span> <span class="hl kwd">authenticate</span><span class="hl opt">() {</span>
    <span class="hl kwa">return</span> <span class="hl opt">((</span>username<span class="hl opt">.</span><span class="hl kwd">length</span><span class="hl opt">() &gt;</span> <span class="hl num">4</span><span class="hl opt">) &amp;&amp; (</span>password<span class="hl opt">.</span><span class="hl kwd">length</span><span class="hl opt">() &gt;</span> <span class="hl num">4</span><span class="hl opt">));</span>
  <span class="hl opt">}</span>

  <span class="hl kwa">private</span> <span class="hl kwb">void</span> <span class="hl kwd">loadSessionAttributes</span><span class="hl opt">() {</span>
    <span class="hl kwa">if</span> <span class="hl opt">(</span>session<span class="hl opt">.</span><span class="hl kwd">getAttribute</span><span class="hl opt">(</span><span class="hl str">"failedAuthCount"</span><span class="hl opt">) !=</span> null<span class="hl opt">) {</span>
      failedAuthCount <span class="hl opt">= (</span>Integer<span class="hl opt">)</span> session<span class="hl opt">.</span><span class="hl kwd">getAttribute</span><span class="hl opt">(</span><span class="hl str">"failedAuthCount"</span><span class="hl opt">);</span>
    <span class="hl opt">}</span>
    
    <span class="hl kwa">if</span> <span class="hl opt">(</span>session<span class="hl opt">.</span><span class="hl kwd">getAttribute</span><span class="hl opt">(</span><span class="hl str">"isCaptchaSolved"</span><span class="hl opt">) !=</span> null<span class="hl opt">) {</span>
      isCaptchaSolved <span class="hl opt">= (</span>Boolean<span class="hl opt">)</span> session<span class="hl opt">.</span><span class="hl kwd">getAttribute</span><span class="hl opt">(</span><span class="hl str">"isCaptchaSolved"</span><span class="hl opt">);</span>
    <span class="hl opt">}</span>
  <span class="hl opt">}</span>

  <span class="hl kwa">private</span> <span class="hl kwb">void</span> <span class="hl kwd">saveSessionAttributes</span><span class="hl opt">() {</span>
    session<span class="hl opt">.</span><span class="hl kwd">setAttribute</span><span class="hl opt">(</span><span class="hl str">"failedAuthCount"</span><span class="hl opt">,</span> failedAuthCount<span class="hl opt">);</span>
    session<span class="hl opt">.</span><span class="hl kwd">setAttribute</span><span class="hl opt">(</span><span class="hl str">"isCaptchaSolved"</span><span class="hl opt">,</span> isCaptchaSolved<span class="hl opt">);</span>
  <span class="hl opt">}</span>
<span class="hl opt">}</span>
</pre> 
      <p>Since we want to reset the Captcha status after 3 failed authentications, we keep the related counter in the <code>failedAuthCount</code> session value.</p> 
      <p>This allows us to implement the proper Login form workflow:</p> 
      <ul class="continued"> 
       <li>The user must first solve the Captcha to prove they are human. This keeps the bots away from the authentication code, both conserving its resources and improving its security (since usernames and passwords will not be forwarded to the underlying data store if the Captcha is not solved first).</li> 
       <li>When the user has proven they are human, they get 3 authentication attempts without new Captcha tests, which allows them to remember the right combination in most cases.</li> 
       <li>If the user fails three authentication requests, they are shown a new Captcha which they must solve before continuing. This throttles authentication access, ensuring username + password combinations cannot be brute-forced, while real human users get theoretically unlimited authentication attempts (as long as they don't mind solving further Captchas).</li> 
      </ul> 
      <p>As previously mentioned, the actual authentication code is not implemented, but the example code should demonstrate the underlying principles adequately.</p> 
      <p>After successful authentication, the example just displays the user input (while a real login form would set an auth cookie and redirect the user to actual functionality).</p> 
      <p class="toplink"><a href="#top" title="BotDetect JSF Login Form CAPTCHA Code Example">[back to top]</a></p> 
      <h3 id="web.xml">web.xml</h3> 
      <pre class="hl"><span class="hl kwa">&lt;?xml</span> <span class="hl kwb">version</span>=<span class="hl str">"1.0"</span> <span class="hl kwb">encoding</span>=<span class="hl str">"UTF-8"</span><span class="hl kwa">?&gt;</span>
<span class="hl kwa">&lt;web-app</span> xmlns:<span class="hl kwb">xsi</span>=<span class="hl str">"http://www.w3.org/2001/XMLSchema-instance"</span>
  <span class="hl kwb">xmlns</span>=<span class="hl str">"http://java.sun.com/xml/ns/javaee"</span> 
    xmlns:<span class="hl kwb">web</span>=<span class="hl str">"http://java.sun.com/xml/ns/javaee/web-app_2_5.xsd"</span>
  xsi:<span class="hl kwb">schemaLocation</span>=<span class="hl str">"http://java.sun.com/xml/ns/javaee </span>
<span class="hl str">  http://java.sun.com/xml/ns/javaee/web-app_2_5.xsd"</span>
  <span class="hl kwb">id</span>=<span class="hl str">"WebApp_ID"</span> <span class="hl kwb">version</span>=<span class="hl str">"2.5"</span><span class="hl kwa">&gt;</span>

  <span class="hl kwa">&lt;display-name&gt;</span>JavaServerFaces<span class="hl kwa">&lt;/display-name&gt;</span>

  <span class="hl kwa">&lt;context-param&gt;</span>
    <span class="hl kwa">&lt;param-name&gt;</span>javax.faces.PROJECT_STAGE<span class="hl kwa">&lt;/param-name&gt;</span>
    <span class="hl kwa">&lt;param-value&gt;</span>Development<span class="hl kwa">&lt;/param-value&gt;</span>
  <span class="hl kwa">&lt;/context-param&gt;</span>

  <span class="hl kwa">&lt;context-param&gt;</span>
    <span class="hl kwa">&lt;param-name&gt;</span>javax.faces.DEFAULT_SUFFIX<span class="hl kwa">&lt;/param-name&gt;</span>
    <span class="hl kwa">&lt;param-value&gt;</span>.jsp<span class="hl kwa">&lt;/param-value&gt;</span>
  <span class="hl kwa">&lt;/context-param&gt;</span>

  <span class="hl kwa">&lt;context-param&gt;</span>
    <span class="hl kwa">&lt;param-name&gt;</span>facelets.VIEW_MAPPINGS<span class="hl kwa">&lt;/param-name&gt;</span>
    <span class="hl kwa">&lt;param-value&gt;</span>*.xhtml<span class="hl kwa">&lt;/param-value&gt;</span>
  <span class="hl kwa">&lt;/context-param&gt;</span>     
 
  <span class="hl kwa">&lt;context-param&gt;</span>
    <span class="hl kwa">&lt;param-name&gt;</span>javax.faces.VALIDATE_EMPTY_FIELDS<span class="hl kwa">&lt;/param-name&gt;</span> 
    <span class="hl kwa">&lt;param-value&gt;</span>true<span class="hl kwa">&lt;/param-value&gt;</span>
  <span class="hl kwa">&lt;/context-param&gt;</span>    

  <span class="hl kwa">&lt;servlet&gt;</span>
    <span class="hl kwa">&lt;servlet-name&gt;</span>Faces Servlet<span class="hl kwa">&lt;/servlet-name&gt;</span>
    <span class="hl kwa">&lt;servlet-class&gt;</span>javax.faces.webapp.FacesServlet<span class="hl kwa">&lt;/servlet-class&gt;</span>
    <span class="hl kwa">&lt;load-on-startup&gt;</span><span class="hl num">1</span><span class="hl kwa">&lt;/load-on-startup&gt;</span>
  <span class="hl kwa">&lt;/servlet&gt;</span>

  <span class="hl kwa">&lt;servlet-mapping&gt;</span>
    <span class="hl kwa">&lt;servlet-name&gt;</span>Faces Servlet<span class="hl kwa">&lt;/servlet-name&gt;</span>
    <span class="hl kwa">&lt;url-pattern&gt;</span>/faces/*<span class="hl kwa">&lt;/url-pattern&gt;</span>
  <span class="hl kwa">&lt;/servlet-mapping&gt;</span>
  <span class="hl kwa">&lt;servlet-mapping&gt;</span>
    <span class="hl kwa">&lt;servlet-name&gt;</span>Faces Servlet<span class="hl kwa">&lt;/servlet-name&gt;</span>
    <span class="hl kwa">&lt;url-pattern&gt;</span>*.faces<span class="hl kwa">&lt;/url-pattern&gt;</span>
  <span class="hl kwa">&lt;/servlet-mapping&gt;</span>

  <span class="hl kwa"></span><strong><span class="hl kwa">&lt;servlet&gt;</span>
    <span class="hl kwa">&lt;servlet-name&gt;</span>BotDetect Captcha<span class="hl kwa">&lt;/servlet-name&gt;</span>
    <span class="hl kwa">&lt;servlet-class&gt;</span>com.captcha.botdetect.web.servlet.CaptchaServlet<span class="hl kwa">&lt;/servlet-class&gt;</span>
  <span class="hl kwa">&lt;/servlet&gt;</span>    
  <span class="hl kwa">&lt;servlet-mapping&gt;</span>
    <span class="hl kwa">&lt;servlet-name&gt;</span>BotDetect Captcha<span class="hl kwa">&lt;/servlet-name&gt;</span>
    <span class="hl kwa">&lt;url-pattern&gt;</span>/botdetectcaptcha<span class="hl kwa">&lt;/url-pattern&gt;</span>
  <span class="hl kwa">&lt;/servlet-mapping&gt;</span></strong><span class="hl kwa"></span> 
  
  <span class="hl kwa">&lt;welcome-file-list&gt;</span>
    <span class="hl kwa">&lt;welcome-file&gt;</span>faces/index.jsp<span class="hl kwa">&lt;/welcome-file&gt;</span>
  <span class="hl kwa">&lt;/welcome-file-list&gt;</span>
  
  <span class="hl kwa">&lt;session-config&gt;</span>
    <span class="hl kwa">&lt;session-timeout&gt;</span>
      <span class="hl num">30</span>
    <span class="hl kwa">&lt;/session-timeout&gt;</span>
  <span class="hl kwa">&lt;/session-config&gt;</span>
<span class="hl kwa">&lt;/web-app&gt;</span>
</pre> 
      <p>In <code>WEB-INF/web.xml</code> file we register <code>CaptchaServlet</code> used for BotDetect Captcha requests.</p> 
      <p class="toplink"><a href="#top" title="BotDetect JSF Login Form CAPTCHA Code Example">[back to top]</a></p> 
      <h2 class="section" id="jsf12">JavaServer Faces 1.2</h2> 
      <p>The JSF 1.2 Login Form CAPTCHA code example is included in the <br> <code>examples/traditional-api/bdc4-traditional-api-jsf12-login-form-captcha-example.war</code> file of the download package.</p> 
      <p class="toplink"><a href="#top" title="BotDetect JSF Login Form CAPTCHA Code Example">[back to top]</a></p> 
      <br> 
     </div>
     <!-- end traditional-api --> 
     <div id="simple-api" data-tabstrip-group="traditionalapi-simpleapi" class="tab_content" style="display: none"> 
      <p>The JSF Login Form Captcha code example shows how to add <a href="../../../java-captcha.html#simple-api" title="BotDetect Java CAPTCHA library">BotDetect CAPTCHA</a> protection to a typical JavaServer Faces login form.</p> 
      <div class="bounded floater crash" style="margin-top: 15px;"> 
       <h3>First Time Here?</h3> 
       <p>Check the BotDetect <a href="../jsp-captcha-quickstart.html#simple-api" title="BotDetect Java Server Pages CAPTCHA Integration Quickstart">JSP Captcha Quickstart</a> for key integration steps.</p> 
      </div> 
      <p>To prevent bots from trying to guess the login info by brute force submission of a large number of common values, the visitor first has to prove they are human (by solving the CAPTCHA), and only then is their username and password submission checked against the authentication data store.</p> 
      <p>Also, if they enter an invalid username + password combination three times, they have to solve the CAPTCHA again. This prevents attempts in which the attacker would first solve the CAPTCHA themselves, and then let a bot brute-force the authentication info.</p> 
      <p>To keep the example code simple, the example doesn't access a data store to authenticate the user, but <strong>accepts all logins with usernames and passwords at least 5 characters long as valid</strong>.</p> 
      <a class="download_free" href="../../../captcha-download.html?version=java" title="Download the BotDetect Java CAPTCHA Library Free Version">Download the BotDetect Java library and run this example</a> 
      <br> 
      <ul class="sitemap"> 
       <li><a href="#simple-api:jsf20">JavaServer Faces 2.0+</a></li> 
       <li><a href="#simple-api:jsf12">JavaServer Faces 1.2</a></li> 
      </ul> 
      <h2 class="section" id="simple-api:jsf20">JavaServer Faces 2.0+</h2> 
      <h3>Downloaded Location</h3> 
      <p>The JSF 2.0+ Login Form CAPTCHA code example is included in the <br> <code>examples/simple-api/bdc4-simple-api-jsf20-login-form-captcha-example.war</code> file of the download package. Deploying (unpacking) the file will create a standard JSP directory tree.</p> 
      <ul class="sitemap"> 
       <li><a href="#simple-api:index.jsp">index.jsp</a></li> 
       <li><a href="#simple-api:LoginForm.java">WEB-INF/src/com/captcha/botdetect/examples/jsf/login_form/view/LoginForm.java</a></li> 
       <li><a href="#simple-api:botdetect.xml">WEB-INF/botdetect.xml</a></li> 
       <li><a href="#simple-api:web.xml">WEB-INF/web.xml</a></li> 
      </ul> 
      <h3>Running Example</h3> 
      <p>This example's war file (in BotDetect download package) already embeds all dependencies.</p> 
      <p>In case you are making this example from scratch in your IDE, you need to ensure <code>botdetect.jar</code>, <code>botdetect-servlet.jar</code>, <code>simple-api-botdetect-jsp20.jar</code>, <code>simple-api-botdetect-jsf20.jar</code>, and <code>hsqldb.jar</code> (HyperSQL DB library) are in the classpath.</p> 
      <h3 id="index.jsp">index.jsp</h3> 
      <pre class="hl"><span class="hl kwa">&lt;%@</span>page contentType<span class="hl opt">=</span><span class="hl str">"text/html"</span> pageEncoding<span class="hl opt">=</span><span class="hl str">"UTF-8"</span><span class="hl kwa">%&gt;</span>
<span class="hl kwa">&lt;%@</span>taglib prefix<span class="hl opt">=</span><span class="hl str">"f"</span> uri<span class="hl opt">=</span><span class="hl str">"http://java.sun.com/jsf/core"</span><span class="hl kwa">%&gt;</span>
<span class="hl kwa">&lt;%@</span>taglib prefix<span class="hl opt">=</span><span class="hl str">"h"</span> uri<span class="hl opt">=</span><span class="hl str">"http://java.sun.com/jsf/html"</span><span class="hl kwa">%&gt;</span>
<span class="hl kwa"></span><strong><span class="hl kwa">&lt;%@</span>taglib prefix<span class="hl opt">=</span><span class="hl str">"botDetect"</span> uri<span class="hl opt">=</span><span class="hl str">"https://captcha.com/java/jsf"</span><span class="hl kwa">%&gt;</span></strong><span class="hl kwa"></span>
<span class="hl kwa">&lt;!DOCTYPE</span> HTML PUBLIC <span class="hl str">"-//W3C//DTD HTML 4.01 Transitional//EN"</span>
  <span class="hl str">"http://www.w3.org/TR/html4/loose.dtd"</span><span class="hl kwa">&gt;</span>
<span class="hl kwa">&lt;f:view&gt;</span>
  <span class="hl kwa">&lt;html&gt;</span>
    <span class="hl kwa">&lt;head&gt;</span>
      <span class="hl kwa">&lt;meta</span> <span class="hl kwb">http-equiv</span>=<span class="hl str">"Content-Type"</span> <span class="hl kwb">content</span>=<span class="hl str">"text/html; charset=UTF-8"</span><span class="hl kwa">/&gt;</span>
      <span class="hl kwa">&lt;title&gt;</span>BotDetect Java CAPTCHA Validation: JSF Login Form CAPTCHA Code Example<span class="hl kwa">&lt;/title&gt;</span>
      <span class="hl kwa">&lt;link</span> <span class="hl kwb">rel</span>=<span class="hl str">"stylesheet"</span> <span class="hl kwb">href</span>=<span class="hl str">"stylesheet.css"</span> <span class="hl kwb">type</span>=<span class="hl str">"text/css"</span><span class="hl kwa">&gt;</span>
    <span class="hl kwa">&lt;/head&gt;</span>
    <span class="hl kwa">&lt;body&gt;</span>
      <span class="hl kwa">&lt;h:form</span> <span class="hl kwb">prependId</span>=<span class="hl str">"false"</span> <span class="hl kwb">styleClass</span>=<span class="hl str">"column"</span><span class="hl kwa">&gt;</span>
        <span class="hl kwa">&lt;h1&gt;</span>BotDetect Java CAPTCHA Validation:<span class="hl kwa">&lt;br/&gt;</span> JSF Login Form CAPTCHA Code Example<span class="hl kwa">&lt;/h1&gt;</span>
        <span class="hl kwa">&lt;fieldset&gt;</span>
          <span class="hl kwa">&lt;legend&gt;</span>
            <span class="hl kwa">&lt;h:panelGroup</span> <span class="hl kwb">rendered</span>=<span class="hl str">"#{!loginForm.isUserLoggedIn}"</span><span class="hl kwa">&gt;</span>
              CAPTCHA included in JSF Login form validation
            <span class="hl kwa">&lt;/h:panelGroup&gt;</span>
            <span class="hl kwa">&lt;h:panelGroup</span> <span class="hl kwb">rendered</span>=<span class="hl str">"#{loginForm.isUserLoggedIn}"</span><span class="hl kwa">&gt;</span>
              Validation passed
            <span class="hl kwa">&lt;/h:panelGroup&gt;</span>
          <span class="hl kwa">&lt;/legend&gt;</span>
          
          <span class="hl kwa">&lt;h:panelGrid</span> <span class="hl kwb">columns</span>=<span class="hl str">"1"</span><span class="hl kwa">&gt;</span>
            <span class="hl kwa">&lt;h:outputText</span> <span class="hl kwb">value</span>=<span class="hl str">"Username:"</span><span class="hl kwa">/&gt;</span>
            <span class="hl kwa">&lt;h:inputText</span> <span class="hl kwb">id</span>=<span class="hl str">"username"</span> <span class="hl kwb">value</span>=<span class="hl str">"#{loginForm.username}"</span><span class="hl kwa">/&gt;</span>

            <span class="hl kwa">&lt;h:outputText</span> <span class="hl kwb">value</span>=<span class="hl str">"Password:"</span><span class="hl kwa">/&gt;</span>
            <span class="hl kwa">&lt;h:inputSecret</span> <span class="hl kwb">id</span>=<span class="hl str">"password"</span> <span class="hl kwb">value</span>=<span class="hl str">"#{loginForm.password}"</span> <span class="hl kwb">rendered</span>=<span class="hl str">"#{!loginForm.isUserLoggedIn}"</span><span class="hl kwa">/&gt;</span>
            <span class="hl kwa">&lt;h:inputText</span> <span class="hl kwb">value</span>=<span class="hl str">"#{loginForm.password}"</span> <span class="hl kwb">rendered</span>=<span class="hl str">"#{loginForm.isUserLoggedIn}"</span><span class="hl kwa">/&gt;</span>

            <span class="hl kwa">&lt;h:panelGroup</span> <span class="hl kwb">rendered</span>=<span class="hl str">"#{!loginForm.isCaptchaSolved}"</span><span class="hl kwa">&gt;</span>
              <span class="hl kwa">&lt;h:outputLabel</span> <span class="hl kwb">for</span>=<span class="hl str">"captchaCode"</span> <span class="hl kwb">value</span>=<span class="hl str">"Retype the characters from the picture:"</span><span class="hl kwa">/&gt;</span>
              <span class="hl com">&lt;!-- Adding BotDetect Captcha to the page --&gt;</span>
              <span class="hl kwa"></span><strong><span class="hl kwa">&lt;botDetect:simpleJsfCaptcha</span> <span class="hl kwb">styleName</span>=<span class="hl str">"exampleCaptcha"</span> 
                        <span class="hl kwb">binding</span>=<span class="hl str">"#{loginForm.captcha}"</span><span class="hl kwa">/&gt;</span></strong><span class="hl kwa"></span>
              
              <span class="hl kwa">&lt;div</span> <span class="hl kwb">class</span>=<span class="hl str">"validationDiv"</span><span class="hl kwa">&gt;</span>
                <span class="hl kwa">&lt;h:inputText</span> <span class="hl kwb">id</span>=<span class="hl str">"captchaCode"</span> <span class="hl kwb">value</span>=<span class="hl str">"#{loginForm.captchaCode}"</span><span class="hl kwa">/&gt;</span>
              <span class="hl kwa">&lt;/div&gt;</span>
            <span class="hl kwa">&lt;/h:panelGroup&gt;</span>
              
            <span class="hl kwa">&lt;h:outputText</span> <span class="hl kwb">value</span>=<span class="hl str">"#{loginForm.errorMessage}"</span> <span class="hl kwb">rendered</span>=<span class="hl str">"#{!loginForm.isUserLoggedIn}"</span> <span class="hl kwb">styleClass</span>=<span class="hl str">"incorrect"</span> <span class="hl kwa">/&gt;</span>
            <span class="hl kwa">&lt;h:commandButton</span> <span class="hl kwb">action</span>=<span class="hl str">"#{loginForm.login}"</span> <span class="hl kwb">value</span>=<span class="hl str">"Login"</span> <span class="hl kwb">rendered</span>=<span class="hl str">"#{!loginForm.isUserLoggedIn}"</span><span class="hl kwa">/&gt;</span>
          <span class="hl kwa">&lt;/h:panelGrid&gt;</span>
              
          <span class="hl kwa">&lt;h:outputLink</span> <span class="hl kwb">value</span>=<span class="hl str">"#{facesContext.externalContext.requestContextPath}/faces/index.jsp"</span>
                 <span class="hl kwb">rendered</span>=<span class="hl str">"#{loginForm.isUserLoggedIn}"</span><span class="hl kwa">&gt;</span>Back to login page.<span class="hl kwa">&lt;/h:outputLink&gt;</span>
        <span class="hl kwa">&lt;/fieldset&gt;</span>
      <span class="hl kwa">&lt;/h:form&gt;</span>
    <span class="hl kwa">&lt;/body&gt;</span>
  <span class="hl kwa">&lt;/html&gt;</span>
<span class="hl kwa">&lt;/f:view&gt;</span>
</pre> 
      <p>The example login form is simple, containing textboxes for username and password input. We <a href="../howto/jsf-captcha.html#imple-api:standardJsf">add Captcha protection to the form</a> using the standard procedure.</p> 
      <p>Note that we check for managed bean <code>isCaptchaSolved</code> property's value to display parts of the form regarding authentication and Captcha validation status.</p> 
      <p class="toplink"><a href="#top" title="BotDetect JSF Login Form CAPTCHA Code Example">[back to top]</a></p> 
      <h3 id="simple-api:LoginForm.java">LoginForm.java</h3> 
      <pre class="hl"><span class="hl kwa">package</span> com<span class="hl opt">.</span>captcha<span class="hl opt">.</span>botdetect<span class="hl opt">.</span>examples<span class="hl opt">.</span>jsf<span class="hl opt">.</span>login_form<span class="hl opt">.</span>view<span class="hl opt">;</span>

<span class="hl kwa">import</span> com<span class="hl opt">.</span>captcha<span class="hl opt">.</span>botdetect<span class="hl opt">.</span>web<span class="hl opt">.</span>jsf<span class="hl opt">.</span>SimpleJsfCaptcha<span class="hl opt">;</span>
<span class="hl kwa">import</span> javax<span class="hl opt">.</span>faces<span class="hl opt">.</span>bean<span class="hl opt">.</span>ManagedBean<span class="hl opt">;</span>
<span class="hl kwa">import</span> javax<span class="hl opt">.</span>faces<span class="hl opt">.</span>bean<span class="hl opt">.</span>RequestScoped<span class="hl opt">;</span>
<span class="hl kwa">import</span> javax<span class="hl opt">.</span>faces<span class="hl opt">.</span>context<span class="hl opt">.</span>FacesContext<span class="hl opt">;</span>
<span class="hl kwa">import</span> javax<span class="hl opt">.</span>servlet<span class="hl opt">.</span>http<span class="hl opt">.</span>HttpSession<span class="hl opt">;</span>

<span class="hl kwc">@ManagedBean</span><span class="hl opt">(</span>name<span class="hl opt">=</span><span class="hl str">"loginForm"</span><span class="hl opt">)</span>
<span class="hl kwc">@RequestScoped</span>
<span class="hl kwa">public class</span> LoginForm <span class="hl opt">{</span>
  
  <span class="hl kwa"></span><strong><span class="hl kwa">private</span> SimpleJsfCaptcha captcha<span class="hl opt">;</span></strong><span class="hl opt"></span>
  <span class="hl kwa">private</span> String captchaCode<span class="hl opt">;</span>
  <span class="hl kwa">private</span> String username<span class="hl opt">,</span> password<span class="hl opt">;</span>
  <span class="hl kwa">private</span> String errorMessage<span class="hl opt">;</span>
  <span class="hl kwa">private</span> HttpSession session<span class="hl opt">;</span>
  
  <span class="hl kwa">private</span> <span class="hl kwb">int</span> failedAuthCount<span class="hl opt">;</span>
  <span class="hl kwa">private</span> <span class="hl kwb">boolean</span> isCaptchaSolved<span class="hl opt">;</span>
  <span class="hl kwa">private</span> <span class="hl kwb">boolean</span> isUserLoggedIn<span class="hl opt">;</span>

  <span class="hl kwa">public</span> <span class="hl kwd">LoginForm</span><span class="hl opt">() {</span>
    FacesContext ctx <span class="hl opt">=</span> FacesContext<span class="hl opt">.</span><span class="hl kwd">getCurrentInstance</span><span class="hl opt">();</span>
    session <span class="hl opt">= (</span>HttpSession<span class="hl opt">)</span>FacesContext<span class="hl opt">.</span><span class="hl kwd">getCurrentInstance</span><span class="hl opt">().</span><span class="hl kwd">getExternalContext</span><span class="hl opt">().</span><span class="hl kwd">getSession</span><span class="hl opt">(</span>true<span class="hl opt">);</span>
    <span class="hl kwa">if</span> <span class="hl opt">(</span>ctx<span class="hl opt">.</span><span class="hl kwd">isPostback</span><span class="hl opt">()) {</span>
      <span class="hl kwd">loadSessionAttributes</span><span class="hl opt">();</span>
    <span class="hl opt">}</span> <span class="hl kwa">else</span> <span class="hl opt">{</span>
      <span class="hl kwd">saveSessionAttributes</span><span class="hl opt">();</span>
    <span class="hl opt">}</span>
  <span class="hl opt">}</span>

  <span class="hl kwa"></span><strong><span class="hl kwa">public</span> SimpleJsfCaptcha <span class="hl kwd">getCaptcha</span><span class="hl opt">() {</span>
    <span class="hl kwa">return</span> captcha<span class="hl opt">;</span>
  <span class="hl opt">}</span>

  <span class="hl kwa">public</span> <span class="hl kwb">void</span> <span class="hl kwd">setCaptcha</span><span class="hl opt">(</span>SimpleJsfCaptcha captcha<span class="hl opt">) {</span>
    <span class="hl kwa">this</span><span class="hl opt">.</span>captcha <span class="hl opt">=</span> captcha<span class="hl opt">;</span>
  <span class="hl opt">}</span></strong><span class="hl opt"></span>

  <span class="hl kwa">public</span> String <span class="hl kwd">getCaptchaCode</span><span class="hl opt">() {</span>
    <span class="hl kwa">return</span> captchaCode<span class="hl opt">;</span>
  <span class="hl opt">}</span>

  <span class="hl kwa">public</span> <span class="hl kwb">void</span> <span class="hl kwd">setCaptchaCode</span><span class="hl opt">(</span>String captchaCode<span class="hl opt">) {</span>
    <span class="hl kwa">this</span><span class="hl opt">.</span>captchaCode <span class="hl opt">=</span> captchaCode<span class="hl opt">;</span>
  <span class="hl opt">}</span>

  <span class="hl kwa">public</span> String <span class="hl kwd">getUsername</span><span class="hl opt">() {</span>
    <span class="hl kwa">return</span> username<span class="hl opt">;</span>
  <span class="hl opt">}</span>

  <span class="hl kwa">public</span> <span class="hl kwb">void</span> <span class="hl kwd">setUsername</span><span class="hl opt">(</span>String username<span class="hl opt">) {</span>
    <span class="hl kwa">this</span><span class="hl opt">.</span>username <span class="hl opt">=</span> username<span class="hl opt">;</span>
  <span class="hl opt">}</span>

  <span class="hl kwa">public</span> String <span class="hl kwd">getPassword</span><span class="hl opt">() {</span>
    <span class="hl kwa">return</span> password<span class="hl opt">;</span>
  <span class="hl opt">}</span>

  <span class="hl kwa">public</span> <span class="hl kwb">void</span> <span class="hl kwd">setPassword</span><span class="hl opt">(</span>String password<span class="hl opt">) {</span>
    <span class="hl kwa">this</span><span class="hl opt">.</span>password <span class="hl opt">=</span> password<span class="hl opt">;</span>
  <span class="hl opt">}</span>

  <span class="hl kwa">public</span> String <span class="hl kwd">getErrorMessage</span><span class="hl opt">() {</span>
    <span class="hl kwa">return</span> errorMessage<span class="hl opt">;</span>
  <span class="hl opt">}</span>

  <span class="hl kwa">public</span> <span class="hl kwb">boolean</span> <span class="hl kwd">getIsCaptchaSolved</span><span class="hl opt">() {</span>
    <span class="hl kwa">return</span> isCaptchaSolved<span class="hl opt">;</span>
  <span class="hl opt">}</span>
  
  <span class="hl kwa">public</span> <span class="hl kwb">boolean</span> <span class="hl kwd">getIsUserLoggedIn</span><span class="hl opt">() {</span>
    <span class="hl kwa">return</span> isUserLoggedIn<span class="hl opt">;</span>
  <span class="hl opt">}</span>

  <span class="hl kwa">public</span> <span class="hl kwb">void</span> <span class="hl kwd">login</span><span class="hl opt">() {</span>

    <span class="hl kwa">if</span> <span class="hl opt">(</span><span class="hl kwd">validateCaptcha</span><span class="hl opt">() &amp;&amp;</span> <span class="hl kwd">validateLogin</span><span class="hl opt">()) {</span>
      <span class="hl kwa">if</span> <span class="hl opt">(</span><span class="hl kwd">authenticate</span><span class="hl opt">()) {</span>
        errorMessage <span class="hl opt">=</span> <span class="hl str">""</span><span class="hl opt">;</span>
        isUserLoggedIn <span class="hl opt">=</span> true<span class="hl opt">;</span>
      <span class="hl opt">}</span> <span class="hl kwa">else</span> <span class="hl opt">{</span>
        errorMessage <span class="hl opt">=</span> <span class="hl str">"Authentication failed"</span><span class="hl opt">;</span>
      
        <span class="hl kwa">if</span> <span class="hl opt">(++</span>failedAuthCount <span class="hl opt">&gt;</span> <span class="hl num">2</span><span class="hl opt">) {</span>
          isCaptchaSolved <span class="hl opt">=</span> false<span class="hl opt">;</span>
          failedAuthCount <span class="hl opt">=</span> <span class="hl num">0</span><span class="hl opt">;</span>
        <span class="hl opt">}</span>
      <span class="hl opt">}</span>
    <span class="hl opt">}</span>
    
    captchaCode <span class="hl opt">=</span> <span class="hl str">""</span><span class="hl opt">;</span>
    <span class="hl kwd">saveSessionAttributes</span><span class="hl opt">();</span>
  <span class="hl opt">}</span>

  <span class="hl kwa">private</span> <span class="hl kwb">boolean</span> <span class="hl kwd">validateCaptcha</span><span class="hl opt">() {</span>
    <span class="hl slc">// validate the Captcha to check we're not dealing with a bot</span>
    <span class="hl kwa">if</span> <span class="hl opt">(!</span>isCaptchaSolved<span class="hl opt">) {</span>
      <span class="hl kwa"></span><strong><span class="hl kwa">if</span> <span class="hl opt">(!</span><span class="hl kwa">this</span><span class="hl opt">.</span>captcha<span class="hl opt">.</span><span class="hl kwd">validate</span><span class="hl opt">(</span>captchaCode<span class="hl opt">)) {</span></strong><span class="hl opt"></span>
        errorMessage <span class="hl opt">=</span> <span class="hl str">"Invalid code"</span><span class="hl opt">;</span>
        isCaptchaSolved <span class="hl opt">=</span> false<span class="hl opt">;</span>
        <span class="hl kwa">return</span> false<span class="hl opt">;</span>
      <span class="hl opt">}</span> <span class="hl kwa">else</span> <span class="hl opt">{</span>
        isCaptchaSolved <span class="hl opt">=</span> true<span class="hl opt">;</span>
      <span class="hl opt">}</span>
    <span class="hl opt">}</span>
  
    <span class="hl kwa">return</span> true<span class="hl opt">;</span>
  <span class="hl opt">}</span>

  <span class="hl kwa">private</span> <span class="hl kwb">boolean</span> <span class="hl kwd">validateLogin</span><span class="hl opt">() {</span>
    String pattern <span class="hl opt">=</span> <span class="hl str">"^[a-zA-Z0-9_]+$"</span><span class="hl opt">;</span> <span class="hl slc">// alphanumeric chars and underscores only</span>

    <span class="hl kwb">boolean</span> validLogin <span class="hl opt">=</span> username<span class="hl opt">.</span><span class="hl kwd">matches</span><span class="hl opt">(</span>pattern<span class="hl opt">) &amp;&amp;</span> password<span class="hl opt">.</span><span class="hl kwd">matches</span><span class="hl opt">(</span>pattern<span class="hl opt">);</span>
    <span class="hl kwa">if</span> <span class="hl opt">(!</span>validLogin<span class="hl opt">) {</span>
      errorMessage <span class="hl opt">=</span> <span class="hl str">"Invalid authentication info"</span><span class="hl opt">;</span>
    <span class="hl opt">}</span>
    <span class="hl kwa">return</span> validLogin<span class="hl opt">;</span>
  <span class="hl opt">}</span>

  <span class="hl kwa">private</span> <span class="hl kwb">boolean</span> <span class="hl kwd">authenticate</span><span class="hl opt">() {</span>
    <span class="hl kwa">return</span> <span class="hl opt">((</span>username<span class="hl opt">.</span><span class="hl kwd">length</span><span class="hl opt">() &gt;</span> <span class="hl num">4</span><span class="hl opt">) &amp;&amp; (</span>password<span class="hl opt">.</span><span class="hl kwd">length</span><span class="hl opt">() &gt;</span> <span class="hl num">4</span><span class="hl opt">));</span>
  <span class="hl opt">}</span>

  <span class="hl kwa">private</span> <span class="hl kwb">void</span> <span class="hl kwd">loadSessionAttributes</span><span class="hl opt">() {</span>
    <span class="hl kwa">if</span> <span class="hl opt">(</span>session<span class="hl opt">.</span><span class="hl kwd">getAttribute</span><span class="hl opt">(</span><span class="hl str">"failedAuthCount"</span><span class="hl opt">) !=</span> null<span class="hl opt">) {</span>
      failedAuthCount <span class="hl opt">= (</span>Integer<span class="hl opt">)</span> session<span class="hl opt">.</span><span class="hl kwd">getAttribute</span><span class="hl opt">(</span><span class="hl str">"failedAuthCount"</span><span class="hl opt">);</span>
    <span class="hl opt">}</span>
    
    <span class="hl kwa">if</span> <span class="hl opt">(</span>session<span class="hl opt">.</span><span class="hl kwd">getAttribute</span><span class="hl opt">(</span><span class="hl str">"isCaptchaSolved"</span><span class="hl opt">) !=</span> null<span class="hl opt">) {</span>
      isCaptchaSolved <span class="hl opt">= (</span>Boolean<span class="hl opt">)</span> session<span class="hl opt">.</span><span class="hl kwd">getAttribute</span><span class="hl opt">(</span><span class="hl str">"isCaptchaSolved"</span><span class="hl opt">);</span>
    <span class="hl opt">}</span>
  <span class="hl opt">}</span>

  <span class="hl kwa">private</span> <span class="hl kwb">void</span> <span class="hl kwd">saveSessionAttributes</span><span class="hl opt">() {</span>
    session<span class="hl opt">.</span><span class="hl kwd">setAttribute</span><span class="hl opt">(</span><span class="hl str">"failedAuthCount"</span><span class="hl opt">,</span> failedAuthCount<span class="hl opt">);</span>
    session<span class="hl opt">.</span><span class="hl kwd">setAttribute</span><span class="hl opt">(</span><span class="hl str">"isCaptchaSolved"</span><span class="hl opt">,</span> isCaptchaSolved<span class="hl opt">);</span>
  <span class="hl opt">}</span>
<span class="hl opt">}</span>
</pre> 
      <p>Since we want to reset the Captcha status after 3 failed authentications, we keep the related counter in the <code>failedAuthCount</code> session value.</p> 
      <p>This allows us to implement the proper Login form workflow:</p> 
      <ul class="continued"> 
       <li>The user must first solve the Captcha to prove they are human. This keeps the bots away from the authentication code, both conserving its resources and improving its security (since usernames and passwords will not be forwarded to the underlying data store if the Captcha is not solved first).</li> 
       <li>When the user has proven they are human, they get 3 authentication attempts without new Captcha tests, which allows them to remember the right combination in most cases.</li> 
       <li>If the user fails three authentication requests, they are shown a new Captcha which they must solve before continuing. This throttles authentication access, ensuring username + password combinations cannot be brute-forced, while real human users get theoretically unlimited authentication attempts (as long as they don't mind solving further Captchas).</li> 
      </ul> 
      <p>As previously mentioned, the actual authentication code is not implemented, but the example code should demonstrate the underlying principles adequately.</p> 
      <p>After successful authentication, the example just displays the user input (while a real login form would set an auth cookie and redirect the user to actual functionality).</p> 
      <p class="toplink"><a href="#top" title="BotDetect JSF Login Form CAPTCHA Code Example">[back to top]</a></p> 
      <h3 id="simple-api:botdetect.xml">botdetect.xml</h3> 
      <pre class="hl"><span class="hl kwa">&lt;?xml</span> <span class="hl kwb">version</span>=<span class="hl str">"1.0"</span> <span class="hl kwb">encoding</span>=<span class="hl str">"UTF-8"</span><span class="hl kwa">?&gt;</span>
<span class="hl kwa">&lt;botdetect</span> <span class="hl kwb">xmlns</span>=<span class="hl str">"https://captcha.com/schema/java"</span> 
    xmlns:<span class="hl kwb">xsi</span>=<span class="hl str">"http://www.w3.org/2001/XMLSchema-instance"</span>
    xsi:<span class="hl kwb">schemaLocation</span>=<span class="hl str">"https://captcha.com/schema/java</span>
<span class="hl str">      https://captcha.com/schema/java/botdetect-4.0.beta3.xsd"</span><span class="hl kwa">&gt;</span>

  <span class="hl kwa">&lt;captchaStyles&gt;</span>
    <span class="hl kwa">&lt;captchaStyle&gt;</span>
      <span class="hl kwa">&lt;name&gt;</span>loginCaptcha<span class="hl kwa">&lt;/name&gt;</span>
      <span class="hl kwa">&lt;userInputID&gt;</span>captchaCode<span class="hl kwa">&lt;/userInputID&gt;</span>
      <span class="hl kwa">&lt;imageWidth&gt;</span><span class="hl num">200</span><span class="hl kwa">&lt;/imageWidth&gt;</span>
      <span class="hl kwa">&lt;codeLength&gt;</span><span class="hl num">4</span><span class="hl kwa">&lt;/codeLength&gt;</span>
      <span class="hl kwa">&lt;codeStyle&gt;</span>ALPHA<span class="hl kwa">&lt;/codeStyle&gt;</span>
    <span class="hl kwa">&lt;/captchaStyle&gt;</span>
  <span class="hl kwa">&lt;/captchaStyles&gt;</span>

<span class="hl kwa">&lt;/botdetect&gt;</span>
</pre> 
      <p>In <code>WEB-INF/botdetect.xml</code>, we configure captcha options for the <code>loginCaptcha</code> captcha style name. You can find a full list of available Captcha configuration options and related instructions at the <a href="../captcha-options.html#simple-api">Captcha configuration options</a> page.</p> 
      <p class="toplink"><a href="#top" title="BotDetect JSF Login Form CAPTCHA Code Example">[back to top]</a></p> 
      <h3 id="simple-api:web.xml">web.xml</h3> 
      <pre class="hl"><span class="hl kwa">&lt;?xml</span> <span class="hl kwb">version</span>=<span class="hl str">"1.0"</span> <span class="hl kwb">encoding</span>=<span class="hl str">"UTF-8"</span><span class="hl kwa">?&gt;</span>
<span class="hl kwa">&lt;web-app</span> xmlns:<span class="hl kwb">xsi</span>=<span class="hl str">"http://www.w3.org/2001/XMLSchema-instance"</span>
  <span class="hl kwb">xmlns</span>=<span class="hl str">"http://java.sun.com/xml/ns/javaee"</span> 
    xmlns:<span class="hl kwb">web</span>=<span class="hl str">"http://java.sun.com/xml/ns/javaee/web-app_2_5.xsd"</span>
  xsi:<span class="hl kwb">schemaLocation</span>=<span class="hl str">"http://java.sun.com/xml/ns/javaee </span>
<span class="hl str">  http://java.sun.com/xml/ns/javaee/web-app_2_5.xsd"</span>
  <span class="hl kwb">id</span>=<span class="hl str">"WebApp_ID"</span> <span class="hl kwb">version</span>=<span class="hl str">"2.5"</span><span class="hl kwa">&gt;</span>

  <span class="hl kwa">&lt;display-name&gt;</span>JavaServerFaces<span class="hl kwa">&lt;/display-name&gt;</span>

  <span class="hl kwa">&lt;context-param&gt;</span>
    <span class="hl kwa">&lt;param-name&gt;</span>javax.faces.PROJECT_STAGE<span class="hl kwa">&lt;/param-name&gt;</span>
    <span class="hl kwa">&lt;param-value&gt;</span>Development<span class="hl kwa">&lt;/param-value&gt;</span>
  <span class="hl kwa">&lt;/context-param&gt;</span>

  <span class="hl kwa">&lt;context-param&gt;</span>
    <span class="hl kwa">&lt;param-name&gt;</span>javax.faces.DEFAULT_SUFFIX<span class="hl kwa">&lt;/param-name&gt;</span>
    <span class="hl kwa">&lt;param-value&gt;</span>.jsp<span class="hl kwa">&lt;/param-value&gt;</span>
  <span class="hl kwa">&lt;/context-param&gt;</span>

  <span class="hl kwa">&lt;context-param&gt;</span>
    <span class="hl kwa">&lt;param-name&gt;</span>facelets.VIEW_MAPPINGS<span class="hl kwa">&lt;/param-name&gt;</span>
    <span class="hl kwa">&lt;param-value&gt;</span>*.xhtml<span class="hl kwa">&lt;/param-value&gt;</span>
  <span class="hl kwa">&lt;/context-param&gt;</span>     
 
  <span class="hl kwa">&lt;context-param&gt;</span>
    <span class="hl kwa">&lt;param-name&gt;</span>javax.faces.VALIDATE_EMPTY_FIELDS<span class="hl kwa">&lt;/param-name&gt;</span> 
    <span class="hl kwa">&lt;param-value&gt;</span>true<span class="hl kwa">&lt;/param-value&gt;</span>
  <span class="hl kwa">&lt;/context-param&gt;</span>    

  <span class="hl kwa">&lt;servlet&gt;</span>
    <span class="hl kwa">&lt;servlet-name&gt;</span>Faces Servlet<span class="hl kwa">&lt;/servlet-name&gt;</span>
    <span class="hl kwa">&lt;servlet-class&gt;</span>javax.faces.webapp.FacesServlet<span class="hl kwa">&lt;/servlet-class&gt;</span>
    <span class="hl kwa">&lt;load-on-startup&gt;</span><span class="hl num">1</span><span class="hl kwa">&lt;/load-on-startup&gt;</span>
  <span class="hl kwa">&lt;/servlet&gt;</span>

  <span class="hl kwa">&lt;servlet-mapping&gt;</span>
    <span class="hl kwa">&lt;servlet-name&gt;</span>Faces Servlet<span class="hl kwa">&lt;/servlet-name&gt;</span>
    <span class="hl kwa">&lt;url-pattern&gt;</span>/faces/*<span class="hl kwa">&lt;/url-pattern&gt;</span>
  <span class="hl kwa">&lt;/servlet-mapping&gt;</span>
  <span class="hl kwa">&lt;servlet-mapping&gt;</span>
    <span class="hl kwa">&lt;servlet-name&gt;</span>Faces Servlet<span class="hl kwa">&lt;/servlet-name&gt;</span>
    <span class="hl kwa">&lt;url-pattern&gt;</span>*.faces<span class="hl kwa">&lt;/url-pattern&gt;</span>
  <span class="hl kwa">&lt;/servlet-mapping&gt;</span>

  <span class="hl kwa"></span><strong><span class="hl kwa">&lt;servlet&gt;</span>
    <span class="hl kwa">&lt;servlet-name&gt;</span>BotDetect Captcha<span class="hl kwa">&lt;/servlet-name&gt;</span>
    <span class="hl kwa">&lt;servlet-class&gt;</span>com.captcha.botdetect.web.servlet.SimpleCaptchaServlet<span class="hl kwa">&lt;/servlet-class&gt;</span>
  <span class="hl kwa">&lt;/servlet&gt;</span>    
  <span class="hl kwa">&lt;servlet-mapping&gt;</span>
    <span class="hl kwa">&lt;servlet-name&gt;</span>BotDetect Captcha<span class="hl kwa">&lt;/servlet-name&gt;</span>
    <span class="hl kwa">&lt;url-pattern&gt;</span>/botdetectcaptcha<span class="hl kwa">&lt;/url-pattern&gt;</span>
  <span class="hl kwa">&lt;/servlet-mapping&gt;</span></strong><span class="hl kwa"></span> 
  
  <span class="hl kwa">&lt;welcome-file-list&gt;</span>
    <span class="hl kwa">&lt;welcome-file&gt;</span>faces/index.jsp<span class="hl kwa">&lt;/welcome-file&gt;</span>
  <span class="hl kwa">&lt;/welcome-file-list&gt;</span>
  
  <span class="hl kwa">&lt;session-config&gt;</span>
    <span class="hl kwa">&lt;session-timeout&gt;</span>
      <span class="hl num">30</span>
    <span class="hl kwa">&lt;/session-timeout&gt;</span>
  <span class="hl kwa">&lt;/session-config&gt;</span>
<span class="hl kwa">&lt;/web-app&gt;</span>
</pre> 
      <p>In <code>WEB-INF/web.xml</code> file we register <code>SimpleCaptchaServlet</code> used for BotDetect Captcha requests.</p> 
      <p class="toplink"><a href="#top" title="BotDetect JSF Login Form CAPTCHA Code Example">[back to top]</a></p> 
      <h2 class="section" id="simple-api:jsf12">JavaServer Faces 1.2</h2> 
      <p>The JSF 1.2 Login Form CAPTCHA code example is included in the <br> <code>examples/simple-api/bdc4-simple-api-jsf12-login-form-captcha-example.war</code> file of the download package.</p> 
      <p class="toplink"><a href="#top" title="BotDetect JSF Login Form CAPTCHA Code Example">[back to top]</a></p> 
      <br> 
     </div>
     <!-- end simple-api --> 
     <div class="bounded important_note" style="position: absolute; top: 75px;"> 
      <h3>Please Note</h3> 
      <p>BotDetect Java Captcha Library v4.0.Beta3 is an in-progress port of BotDetect 4 Captcha, and we need you to guide our efforts towards a polished product. Please <a href="../../../contact.html?topic=java">let us know</a> if you encounter any bugs, implementation issues, or a usage scenario you would like to discuss.</p> 
     </div> 
    </div> 
    <div class="column" id="left"> 
     <div> 
      <ul class="navigation navlevel0"> 
       <li class="first expanded"> <a href="../../../" title="BotDetect CAPTCHA Generator Homepage">CAPTCHA Generator Home</a> 
        <ul class="navigation navlevel1"> 
         <li class="first"> <a href="../../../references.html" title="BotDetect CAPTCHA Customer References">Customer References</a> </li> 
         <li> <a href="../../../demos/features/captcha-demo.aspx" title="BotDetect CAPTCHA Online Demos">CAPTCHA Demo</a> </li> 
         <li> <a href="../../../captcha-download.html?version=java" title="Download BotDetect CAPTCHA Free Version">CAPTCHA Download</a> </li> 
         <li> <a href="../../../captcha-examples.html" title="BotDetect CAPTCHA Image &amp; Audio CAPTCHA Samples">CAPTCHA Samples</a> </li> 
         <li> <a href="../../../captcha-localizations.html" title="BotDetect CAPTCHA Localization Details &amp; Downloads Page">CAPTCHA Localizations</a> </li> 
         <li> <a href="../../../asp.net-captcha.html" title="BotDetect ASP.NET CAPTCHA Control">ASP.NET CAPTCHA Control</a> </li> 
         <li class="expanded"> <a href="../../../java-captcha.html" title="BotDetect Java CAPTCHA library">Java CAPTCHA Library <span class="alpha">Beta</span></a> 
          <ul class="navigation navlevel2"> 
           <li class="first"> <a href="../../../doc/java/captcha-getting-started.html" title="Getting Started with BotDetect Java CAPTCHA">Getting Started</a> </li> 
           <li> <a href="../../../doc/java/jsp-captcha-quickstart.html" title="BotDetect JavaServer Pages CAPTCHA">JSP CAPTCHA</a> </li> 
           <li class="expanded"> <a href="../../../doc/java/howto/jsf-captcha.html" title="BotDetect JavaServer Faces CAPTCHA">JSF CAPTCHA</a> 
            <ul class="navigation navlevel3"> 
             <li class="first"> <a href="../../../doc/java/howto/jsf-captcha.html" title="How To Add BotDetect CAPTCHA Protection to JavaServer Faces Forms">JSF CAPTCHA Integration Guide</a> </li> 
             <li> <a href="../../../doc/java/examples/jsf-basic-captcha-example.html" title="JavaServer Faces Basic CAPTCHA Example">JSF Basic CAPTCHA Example</a> </li> 
             <li> <a href="../../../doc/java/examples/jsf-facelets-captcha-example.html" title="JavaServer Faces Facelets CAPTCHA Example">JSF Facelets CAPTCHA Example</a> </li> 
             <li> <span>JSF Login Form CAPTCHA Example</span> </li> 
             <li> <a href="../../../doc/java/examples/jsf-login-form-filter-captcha-example.html" title="JavaServer Faces Login Form Filter CAPTCHA Example">JSF Login Form Filter CAPTCHA Example</a> </li> 
             <li class="last"> <a href="../../../doc/java/examples/jsf-validator-captcha-example.html" title="JavaServer Faces Validator CAPTCHA Example">JSF Validator CAPTCHA Example</a> </li> 
            </ul> </li> 
           <li> <a href="../../../doc/java/howto/springmvc-captcha.html" title="BotDetect Spring MVC CAPTCHA">Spring MVC CAPTCHA</a> </li> 
           <li> <a href="../../../doc/java/struts-captcha-quickstart.html" title="BotDetect Struts CAPTCHA">Struts CAPTCHA</a> </li> 
           <li> <a href="../../../doc/java/maven-captcha.html" title="Setting BotDetect CAPTCHA Java Build Dependencies">Build (Maven, Gradle, Ant, Ivy)</a> </li> 
           <li> <a href="../../../doc/java/captcha-options.html" title="BotDetect CAPTCHA Java Configuration Guides &amp; Examples">Configuration</a> </li> 
           <li> <a href="../../../doc/java/howto/captcha-deployment.html" title="BotDetect Java CAPTCHA Deployment Guides">Deployment</a> </li> 
           <li> <a href="../../../doc/java/captcha-faq.html" title="BotDetect CAPTCHA Java Technical FAQ">Technical FAQ</a> </li> 
           <li class="last"> <a href="../../../doc/java/captcha-api-reference.html" title="BotDetect Java CAPTCHA API Reference">API Reference</a> </li> 
          </ul> </li> 
         <li> <a href="../../../php-captcha.html" title="BotDetect PHP CAPTCHA Library">PHP CAPTCHA Library</a> </li> 
         <li> <a href="../../../asp-captcha.html" title="BotDetect ASP Classic CAPTCHA Component">Classic ASP CAPTCHA</a> </li> 
         <li> <a href="../../../angular-captcha.html" title="BotDetect CAPTCHA Angular Module">Angular CAPTCHA Module</a> </li> 
         <li> <a href="../../../captcha-faq.html" title="BotDetect CAPTCHA General FAQ">BotDetect General FAQ</a> </li> 
         <li> <a href="../../../captcha-roadmap-and-release-notes.html" title="BotDetect CAPTCHA Release Notes">Roadmap &amp; Release Notes</a> </li> 
         <li> <a href="../../../captcha-migration-guides.html" title="BotDetect CAPTCHA Migration Guides">Migration Guides</a> </li> 
         <li class="last"> <a href="../../../captcha-known-issues.html" title="BotDetect CAPTCHA Known Issues">Known Issues</a> </li> 
        </ul> </li> 
       <li> <a href="../../../shop.html" title="BotDetect CAPTCHA Online Store">Shop</a> </li> 
       <li> <a href="../../../documentation.html" title="BotDetect CAPTCHA Documentation Index">Documentation</a> </li> 
       <li> <a href="../../../captcha-accessibility.html" title="Strict Standards - Introduction to CAPTCHA Accessibility">Captcha Accessibility</a> </li> 
       <li> <a href="../../../articles/can-captcha-be-broken.html" title="CAPTCHA Articles">Articles</a> </li> 
       <li class="last"> <a href="../../../about/captcha-inc.html" title="About Captcha, Inc">About</a> </li> 
      </ul> 
     </div> 
     <div id="current_versions"> 
      <h3>Current BotDetect Versions</h3> 
      <ul> 
       <li> <span style="font-family:Arial;font-size:12px;padding-left:0">BotDetect ASP.NET CAPTCHA</span><br> <a href="../../../captcha-roadmap-and-release-notes.html#aspnet-release-notes" title="BotDetect ASP.NET CAPTCHA Control Release Notes"> 
         <div style="display:inline;">
          <span style="padding-left:0;padding-right:15px;">2017-04-29</span>
         </div> 
         <div style="display:inline;">
          v4.2.0
         </div> </a><br> <a href="../../../captcha-roadmap-and-release-notes.html#aspnet-release-notes" title="BotDetect ASP.NET CAPTCHA Control Release Notes"> 
         <div style="display:inline;">
          <span style="padding-left:0;padding-right:15px;">2015-12-03</span>
         </div> 
         <div style="display:inline;">
          v3.0.18
         </div> </a> </li> 
       <li> <span style="font-family:Arial;font-size:12px;padding-left:0">BotDetect Java CAPTCHA</span><br> <a href="../../../captcha-roadmap-and-release-notes.html#java-release-notes" title="BotDetect Java CAPTCHA Library Release Notes"> 
         <div style="display:inline;">
          <span style="padding-left:0;padding-right:15px;">2017-05-18</span>
         </div> 
         <div style="display:inline;">
          v4.0.Beta3
         </div> </a><br> <a href="../../../captcha-roadmap-and-release-notes.html#java-release-notes" title="BotDetect Java CAPTCHA Library Release Notes"> 
         <div style="display:inline;">
          <span style="padding-left:0;padding-right:15px;">2015-12-03</span>
         </div> 
         <div style="display:inline;">
          v3.0.Alpha3
         </div> </a> </li> 
       <li> <span style="font-family:Arial;font-size:12px;padding-left:0">BotDetect ASP Classic CAPTCHA</span><br> <a href="../../../captcha-roadmap-and-release-notes.html#asp-release-notes" title="BotDetect ASP Classic CAPTCHA Component Release Notes"> 
         <div style="display:inline;">
          <span style="padding-left:0;padding-right:15px;">2016-07-25</span>
         </div> 
         <div style="display:inline;">
          v4.1.0
         </div> </a><br> <a href="../../../captcha-roadmap-and-release-notes.html#asp-release-notes" title="BotDetect ASP Classic CAPTCHA Component Release Notes"> 
         <div style="display:inline;">
          <span style="padding-left:0;padding-right:15px;">2015-12-03</span>
         </div> 
         <div style="display:inline;">
          v3.0.18
         </div> </a> </li> 
       <li> <span style="font-family:Arial;font-size:12px;padding-left:0">BotDetect PHP CAPTCHA</span><br> <a href="../../../captcha-roadmap-and-release-notes.html#php-release-notes" title="BotDetect PHP CAPTCHA Library Release Notes"> 
         <div style="display:inline;">
          <span style="padding-left:0;padding-right:15px;">2016-06-08</span>
         </div> 
         <div style="display:inline;">
          v4.1.0
         </div> </a><br> <a href="../../../captcha-roadmap-and-release-notes.html#php-release-notes" title="BotDetect PHP CAPTCHA Library Release Notes"> 
         <div style="display:inline;">
          <span style="padding-left:0;padding-right:15px;">2015-12-03</span>
         </div> 
         <div style="display:inline;">
          v3.0.4
         </div> </a> </li> 
      </ul> 
     </div> 
     <div class="extra"> 
      <h3>Popular Content</h3>
      <ul>
       <li><a href="../../../angular-captcha.html" title="Angular Captcha">Angular Captcha</a></li>
       <li><a href="../../../articles/audio-captcha.html" title="Sound Advice: All About Audio CAPTCHA">Audio Captcha</a></li>
       <li><a href="../../../captcha-accessibility.html" title="Strict Standards: Introduction to CAPTCHA Accessibility">Captcha Accessibility</a></li>
       <li><a href="../../../accessibility/section508-captcha.html" title="Section 508 CAPTCHA: How to Make CAPTCHA Comply with Access Board Section 508 Standards">Section 508 Captcha</a></li>
       <li><a href="../../../accessibility/wcag-captcha.html" title="WCAG CAPTCHA: How to Make CAPTCHA Conform to W3C WCAG 2.0 Standards">WCAG Captcha</a></li>
       <li><a href="../../../accessibility/ada-captcha.html" title="ADA CAPTCHA: Does CAPTCHA Need to Comply with the ADA Standards?">ADA Captcha</a></li>
       <li><a href="../../../mvc-captcha.html" title="BotDetect MVC CAPTCHA Documentation">MVC Captcha</a></li>
       <li><a href="../../../javascript-captcha.html" title="BotDetect JavaScript CAPTCHA Documentation">JavaScript Captcha</a></li>
       <li><a href="../../../ajax-captcha.html" title="BotDetect Ajax CAPTCHA Documentation">Ajax Captcha</a></li>
       <li><a href="../../../jquery-captcha.html" title="BotDetect jQuery CAPTCHA Documentation">jQuery Captcha</a></li>
       <li><a href="../../.././#recaptcha_vs_botdetect_captcha" title="BotDetect Captcha vs. Recaptcha">BotDetect Captcha vs.<br>Recaptcha the Stalker</a></li>
      </ul> 
     </div> 
    </div> 
    <div class="column" id="right"> 
     <div class="references_movie"> 
      <a href="../../../references.html" title="BotDetect Captcha Customer References">BotDetect Captcha Customer References</a> 
      <div id="references_movie_container"></div> 
     </div> 
     <div class="action">
      <a href="../../../demos/features/captcha-demo.aspx" title="Run the BotDetect CAPTCHA Online Demo"><img src="../../../images/demo.png" alt="Run the BotDetect CAPTCHA Online Demo"><span><strong class="highlight">Live</strong> BotDetect Captcha <strong>Demo</strong></span></a>
     </div> 
     <div class="action">
      <a href="../../../captcha-download.html?version=java" title="Download the BotDetect CAPTCHA Free Version"><img src="../../../images/download.png" alt="Download the BotDetect CAPTCHA  Free Version"><span><strong class="highlight">Free</strong> BotDetect Captcha <strong>Download</strong></span></a>
     </div> 
     <div class="action">
      <a href="../../../shop.html" title="Purchase BotDetect CAPTCHA  License Upgrades"><img src="../../../images/shop.png" alt="Purchase BotDetect CAPTCHA  License Upgrades"><span><strong class="highlight">Full</strong> BotDetect Captcha <strong>Purchase</strong></span></a>
     </div> 
     <div id="image_examples"> 
      <h3>BotDetect Captcha Image Samples</h3>
      <!-- Set17--> 
      <a href="../../../localizations/japanese-captcha.html" title="Japanese Captcha "><img src="../../../images/captcha/180/hiragana/botdetect-captcha-hiragana-ghostly.jpg" alt="BotDetect Japanese CAPTCHA  image style screenshot"> </a> 
      <img src="../../../images/captcha/180/botdetect-captcha-caughtinthenet2.jpg" alt="BotDetect CAPTCHA  image style screenshot"> 
      <img src="../../../images/captcha/180/botdetect-captcha-wave.jpg" alt="BotDetect CAPTCHA  image style screenshot"> 
      <img src="../../../images/captcha/180/botdetect-captcha-wavycolorletters.jpg" alt="BotDetect CAPTCHA  image style screenshot"> 
      <img src="../../../images/captcha/180/botdetect-captcha-snow.jpg" alt="BotDetect CAPTCHA  image style screenshot"> 
      <!-- Set8--> 
      <a href="../../../localizations/korean-captcha.html" title="Korean Captcha "><img src="../../../images/captcha/180/hangul/botdetect-captcha-hangul-chess.jpg" alt="BotDetect Korean CAPTCHA  image style screenshot"> </a> 
      <img src="../../../images/captcha/180/botdetect-captcha-vertigo.jpg" alt="BotDetect CAPTCHA  image style screenshot"> 
      <img src="../../../images/captcha/180/botdetect-captcha-cut.jpg" alt="BotDetect CAPTCHA  image style screenshot"> 
      <img src="../../../images/captcha/180/botdetect-captcha-meltingheat2.jpg" alt="BotDetect CAPTCHA  image style screenshot"> 
      <img src="../../../images/captcha/180/botdetect-captcha-rough.jpg" alt="BotDetect CAPTCHA  image style screenshot"> 
      <p><a href="../../../captcha-examples.html" title="View all BotDetect CAPTCHA  image screenshots">More CAPTCHA image samples...</a></p> 
     </div> 
     <div id="sound_examples"> 
      <h3>BotDetect Audio Captcha Sound Samples</h3>
      <a class="sample" href="../../../sounds/radio.wav" title="Play BotDetect Audio CAPTCHA sound Sample" onclick="l_PlaySound('../../../sounds/radio.wav', 'radio_sample_placeholder'); return false;">Radio</a>
      <div class="placeholder" id="radio_sample_placeholder">
       &nbsp;
      </div>
      <a class="sample" href="../../../sounds/hivemind.wav" title="Play BotDetect Audio CAPTCHA sound Sample" onclick="l_PlaySound('../../../sounds/hivemind.wav', 'hivemind_sample_placeholder'); return false;">HiveMind</a>
      <div class="placeholder" id="hivemind_sample_placeholder">
       &nbsp;
      </div>
      <a class="sample" href="../../../sounds/robot.wav" title="Play BotDetect Audio CAPTCHA sound Sample" onclick="l_PlaySound('../../../sounds/robot.wav', 'robot_sample_placeholder'); return false;">Robot</a>
      <div class="placeholder" id="robot_sample_placeholder">
       &nbsp;
      </div>
      <a class="sample" href="../../../sounds/pulse.wav" title="Play BotDetect Audio CAPTCHA sound Sample" onclick="l_PlaySound('../../../sounds/pulse.wav', 'pulse_sample_placeholder'); return false;">Pulse</a>
      <div class="placeholder" id="pulse_sample_placeholder">
       &nbsp;
      </div>
      <a class="sample" href="../../../sounds/dispatch.wav" title="Play BotDetect Audio CAPTCHA sound Sample" onclick="l_PlaySound('../../../sounds/dispatch.wav', 'dispatch_sample_placeholder'); return false;">Dispatch</a>
      <div class="placeholder" id="dispatch_sample_placeholder">
       &nbsp;
      </div>
      <p><a href="../../../audio-captcha-examples.html" title="View all BotDetect audio CAPTCHA sound samples">More audio CAPTCHA sound samples...</a></p> 
     </div> 
    </div> 
    <div class="pagecontrols-top"> 
     <div class="print"> 
      <span class="print_icon"> <a class="stbutton ptico_default" href="#" onclick="l_PrintPage();"></a> </span> 
     </div> 
     <div class="searchbox"> 
      <form id="cse-search-box" action="../../../search-results.html"> 
       <input class="searchInactive" type="text" name="q" id="query"> 
      </form> 
     </div> 
    </div> 
    <div class="pagecontrols-bottom"> 
     <div class="print"> 
      <span class="print_icon"> <a class="stbutton ptico_default" href="#" onclick="l_PrintPage();"></a> </span> 
     </div> 
    </div> 
   </div> 
   <div class="header"> 
    <div class="header_inner"> 
     <div class="logocontainer"> 
      <a href="../../../" title="BotDetect CAPTCHA Homepage"><span class="logo">&nbsp;</span></a> 
     </div> 
     <div class="topmenu"> 
      <ul class="links"> 
       <li style="width: 91px"><a style="width: 91px" id="home" accesskey="1" href="../../../" title="BotDetect CAPTCHA Generator Homepage">Home</a></li> 
       <li style="width: 91px"><a style="width: 91px" id="angular-captcha" href="../../../angular-captcha.html" title="BotDetect ASP.NET CAPTCHA Control">Angular Captcha</a></li> 
       <li style="width: 91px"><a style="width: 91px" id="dotnet-captcha" href="../../../asp.net-captcha.html" title="BotDetect ASP.NET CAPTCHA Control">.NET Captcha</a></li> 
       <li style="width: 91px"><a style="width: 91px" id="java-captcha" href="../../../java-captcha.html" title="BotDetect Java CAPTCHA Library">Java Captcha<span class="alpha">Beta</span></a></li> 
       <li style="width: 91px"><a style="width: 91px" id="php-captcha" href="../../../php-captcha.html" title="BotDetect PHP CAPTCHA Library">PHP Captcha</a></li> 
       <li style="width: 91px"><a style="width: 91px" id="asp-captcha" href="../../../asp-captcha.html" title="BotDetect ASP Classic CAPTCHA Component">ASP Captcha</a></li> 
       <li style="width: 91px"><a style="width: 91px" id="documentation" href="../../../documentation.html" title="BotDetect CAPTCHA Documentation Index">Documentation</a></li> 
       <li style="width: 91px"><a style="width: 91px" id="downloads" href="../../../captcha-download.html" title="Download BotDetect CAPTCHA Free Version">Download</a></li> 
       <li style="width: 91px"><a style="width: 91px" id="demo" href="../../../demos/features/captcha-demo.aspx" title="BotDetect CAPTCHA Features Demo">Demo</a></li> 
       <li style="width: 91px"><a style="width: 91px" id="support" href="../../../contact.html" title="Contact Captcha, Inc Support Department">Support</a></li> 
       <li style="width: 91px"><a style="width: 91px" id="shop" href="../../../shop.html" title="Buy BotDetect CAPTCHA Licenses">Shop</a></li> 
       <li style="width: 91px"><a style="width: 91px" id="references" href="../../../references.html" title="BotDetect CAPTCHA Customer References">References</a></li> 
       <li style="width: 91px"><a style="width: 91px" id="contact" accesskey="9" href="../../../contact.html" title="Contact Captcha, Inc.">Contact</a></li> 
       <li style="width: 91px"><a style="width: 91px" id="about" href="../../../about/captcha-inc.html" title="About Captcha, Inc.">About</a></li> 
      </ul> 
     </div> 
    </div> 
   </div> 
   <div class="footer"> 
    <div class="navigation"> 
     <ul class="links"> 
      <li><a href="../../../asp.net-captcha.html" title="BotDetect ASP.NET CAPTCHA Control">.NET Captcha</a></li> 
      <li><a href="../../../java-captcha.html" title="BotDetect Java CAPTCHA Control">Java Captcha</a></li> 
      <li><a href="../../../php-captcha.html" title="BotDetect PHP CAPTCHA Library">PHP Captcha</a></li> 
      <li><a href="../../../asp-captcha.html" title="BotDetect ASP Classic CAPTCHA Component">ASP Captcha</a></li> 
      <li><a href="../../../mvc-captcha.html" title="BotDetect MVC CAPTCHA Documentation">MVC Captcha</a></li> 
      <li><a href="../../../javascript-captcha.html" title="BotDetect JavaScript CAPTCHA Documentation">JavaScript Captcha</a></li> 
      <li><a href="../../../ajax-captcha.html" title="BotDetect Ajax CAPTCHA Documentation">Ajax Captcha</a></li> 
      <li><a href="../../../jquery-captcha.html" title="BotDetect jQuery CAPTCHA Documentation">jQuery Captcha</a></li> 
      <li><a href="../../../captcha-download.html" title="Download BotDetect CAPTCHA Free Version">Download</a></li> 
      <li><a href="../../../demos/features/captcha-demo.aspx" title="BotDetect CAPTCHA Features Demo">Demo</a></li> 
      <li><a href="../../../" title="BotDetect CAPTCHA Generator Homepage">Captcha Generator</a></li> 
      <li><a href="../../../documentation.html" title="BotDetect CAPTCHA Documentation Index">Documentation</a></li> 
      <li><a href="../../../contact.html" title="Contact Captcha, Inc Support Department">Support</a></li> 
      <li><a href="../../../shop.html" title="Buy BotDetect CAPTCHA Licenses">Shop</a></li> 
      <li><a href="../../../references.html" title="BotDetect CAPTCHA Customer References">References</a></li> 
      <li><a href="../../../about/captcha-inc.html" title="About Captcha, Inc.">About</a></li> 
      <li><a href="../../../contact.html" title="captcha.com Webmaster Contact">Contact</a></li> 
      <li><a href="../../../privacy.html" title="captcha.com Privacy Policy">Privacy</a></li> 
      <li><a href="../../../terms.html" title="captcha.com Terms of Use">Terms</a></li> 
     </ul> 
    </div> 
    <div class="legal"> 
     <p> Captcha, Inc. 2004-2017. All rights reserved.</p> 
     <p>BotDetect, BotDetect CAPTCHA, Lanap, Lanap CAPTCHA, Lanap BotDetect, Lanap BotDetect CAPTCHA, Lanapsoft, Lanapsoft CAPTCHA, Lanapsoft BotDetect, Lanapsoft BotDetect CAPTCHA, and Lanap Software are trademarks of Captcha, Inc. All other product, brand, and company names are mentioned for identification purposes only and are trademarks or registered trademarks of their respective owners.</p> 
     <p>Captcha, Inc. -- formerly: Lanapsoft, Inc. / Lanap, Inc.</p> 
    </div> 
   </div> 
  </div> 
  <div class="footer_outer"></div> 
  <br> 
  <script type="text/javascript">
/* <![CDATA[ */
var google_conversion_id = 989336542;
var google_conversion_language = "en";
var google_conversion_format = "3";
var google_conversion_color = "ffffff";
var google_conversion_label = "N3WACJrTiAgQ3qfg1wM";
var google_conversion_value = 0;
var google_remarketing_only = false;
/* ]]> */
</script> 
  <script type="text/javascript" src="//www.googleadservices.com/pagead/conversion.js?t=1506517089">
</script> 
  <noscript> 
   <div style="display:inline;"> 
    <img height="1" width="1" style="border-style:none;" alt="" src="//www.googleadservices.com/pagead/conversion/989336542/?value=0&amp;label=N3WACJrTiAgQ3qfg1wM&amp;guid=ON&amp;script=0"> 
   </div> 
  </noscript> 
  <script type="text/javascript">
try{if(typeof(Storage)!=='undefined')localStorage.setItem('ZZZZZga','UA-221733-4');}catch(e){};
try {
(function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
(i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
})(window,document,'script','https://www.google-analytics.com/analytics.js','ga');
ga('create', 'UA-221733-4', 'auto');
ga('send', 'pageview');
}catch(err){
window.addEventListener('load', function() {
try {
jQuery.post('https://captcha.com/forms/js-error-logger.php',
{msg: 'Analytics error: '+err,
url: 'nourl',
line: 'noline',
window: window.location.href});
}catch(e){};})};

</script> 
  <script src="../../../script/tabstrip.min.js?t=1506517089"></script> 
  <script type="text/javascript">
window.addEventListener('load', function() {
  new TabStrip();
});
</script>   
 </body>
</html>