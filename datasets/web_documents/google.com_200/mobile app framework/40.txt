<!doctype html>
<!--[if lt IE 7]>  <html class="no-js lt-ie9 lt-ie8 lt-ie7" lang="en-US" prefix="og: http://ogp.me/ns#"> <![endif]-->
<!--[if IE 7]>     <html class="no-js lt-ie9 lt-ie8" lang="en-US" prefix="og: http://ogp.me/ns#"> <![endif]-->
<!--[if IE 8]>     <html class="no-js lt-ie9" lang="en-US" prefix="og: http://ogp.me/ns#"> <![endif]-->
<!--[if gt IE 8]><!-->
<html class="no-js" lang="en-US" prefix="og: http://ogp.me/ns#">
 <!--<![endif]-->
 <head> 
  <meta charset="UTF-8"> 
  <meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1"> 
  <meta name="viewport" content="width=device-width"> 
  <link href="/wp-content/uploads/2016/03/favicon.png" type="image/png" rel="icon"> 
  <link rel="profile" href="http://gmpg.org/xfn/11"> 
  <link rel="pingback" href="https://stormpath.com/xmlrpc.php"> 
  <title>Tutorial: Build a REST API for Your Mobile Apps using Node.js</title> 
  <meta name="description" content="Behind every great mobile app is a great backend. This tutorial will show you how to build your first REST API using Node.js, and connect it to an iOS or Android app!"> 
  <meta name="robots" content="noodp"> 
  <link rel="canonical" href="https://stormpath.com/blog/tutorial-build-rest-api-mobile-apps-using-node-js"> 
  <meta property="og:locale" content="en_US"> 
  <meta property="og:type" content="article"> 
  <meta property="og:title" content="Tutorial: Build a REST API for Your Mobile Apps using Node.js"> 
  <meta property="og:description" content="Behind every great mobile app is a great backend. This tutorial will show you how to build your first REST API using Node.js, and connect it to an iOS or Android app!"> 
  <meta property="og:url" content="https://stormpath.com/blog/tutorial-build-rest-api-mobile-apps-using-node-js"> 
  <meta property="og:site_name" content="Stormpath User Identity API"> 
  <meta property="article:section" content="Mobile"> 
  <meta property="article:published_time" content="2016-05-10T11:13:08-07:00"> 
  <meta property="article:modified_time" content="2016-12-07T11:39:37-07:00"> 
  <meta property="og:updated_time" content="2016-12-07T11:39:37-07:00"> 
  <meta property="og:image" content="https://stormpath.com/wp-content/uploads/2016/05/api-node-1200x630.jpg"> 
  <meta name="twitter:card" content="summary_large_image"> 
  <meta name="twitter:description" content="Behind every great mobile app is a great backend. This tutorial will show you how to build your first REST API using Node.js, and connect it to an iOS or Android app!"> 
  <meta name="twitter:title" content="Tutorial: Build a REST API for Your Mobile Apps using Node.js"> 
  <meta name="twitter:image" content="https://stormpath.com/wp-content/uploads/2016/05/api-node-1200x630.jpg"> 
  <meta name="twitter:creator" content="@EdwardStarcraft"> 
  <meta property="DC.date.issued" content="2016-05-10T11:13:08-07:00"> 
  <link rel="dns-prefetch" href="//s0.wp.com"> 
  <link rel="dns-prefetch" href="//s.w.org"> 
  <link rel="alternate" type="application/rss+xml" title="Stormpath User Identity API » Feed" href="https://stormpath.com/feed"> 
  <link rel="alternate" type="application/rss+xml" title="Stormpath User Identity API » Comments Feed" href="https://stormpath.com/comments/feed"> 
  <link rel="alternate" type="application/rss+xml" title="Stormpath User Identity API » Tutorial: Build a REST API for Your Mobile Apps using Node.js Comments Feed" href="https://stormpath.com/blog/tutorial-build-rest-api-mobile-apps-using-node-js/feed"> 
  <script type="text/javascript">
			window._wpemojiSettings = {"baseUrl":"https:\/\/s.w.org\/images\/core\/emoji\/2.3\/72x72\/","ext":".png","svgUrl":"https:\/\/s.w.org\/images\/core\/emoji\/2.3\/svg\/","svgExt":".svg","source":{"concatemoji":"https:\/\/stormpath.com\/wp-includes\/js\/wp-emoji-release.min.js?ver=4.8.2"}};
			!function(a,b,c){function d(a){var b,c,d,e,f=String.fromCharCode;if(!k||!k.fillText)return!1;switch(k.clearRect(0,0,j.width,j.height),k.textBaseline="top",k.font="600 32px Arial",a){case"flag":return k.fillText(f(55356,56826,55356,56819),0,0),b=j.toDataURL(),k.clearRect(0,0,j.width,j.height),k.fillText(f(55356,56826,8203,55356,56819),0,0),c=j.toDataURL(),b!==c&&(k.clearRect(0,0,j.width,j.height),k.fillText(f(55356,57332,56128,56423,56128,56418,56128,56421,56128,56430,56128,56423,56128,56447),0,0),b=j.toDataURL(),k.clearRect(0,0,j.width,j.height),k.fillText(f(55356,57332,8203,56128,56423,8203,56128,56418,8203,56128,56421,8203,56128,56430,8203,56128,56423,8203,56128,56447),0,0),c=j.toDataURL(),b!==c);case"emoji4":return k.fillText(f(55358,56794,8205,9794,65039),0,0),d=j.toDataURL(),k.clearRect(0,0,j.width,j.height),k.fillText(f(55358,56794,8203,9794,65039),0,0),e=j.toDataURL(),d!==e}return!1}function e(a){var c=b.createElement("script");c.src=a,c.defer=c.type="text/javascript",b.getElementsByTagName("head")[0].appendChild(c)}var f,g,h,i,j=b.createElement("canvas"),k=j.getContext&&j.getContext("2d");for(i=Array("flag","emoji4"),c.supports={everything:!0,everythingExceptFlag:!0},h=0;h<i.length;h++)c.supports[i[h]]=d(i[h]),c.supports.everything=c.supports.everything&&c.supports[i[h]],"flag"!==i[h]&&(c.supports.everythingExceptFlag=c.supports.everythingExceptFlag&&c.supports[i[h]]);c.supports.everythingExceptFlag=c.supports.everythingExceptFlag&&!c.supports.flag,c.DOMReady=!1,c.readyCallback=function(){c.DOMReady=!0},c.supports.everything||(g=function(){c.readyCallback()},b.addEventListener?(b.addEventListener("DOMContentLoaded",g,!1),a.addEventListener("load",g,!1)):(a.attachEvent("onload",g),b.attachEvent("onreadystatechange",function(){"complete"===b.readyState&&c.readyCallback()})),f=c.source||{},f.concatemoji?e(f.concatemoji):f.wpemoji&&f.twemoji&&(e(f.twemoji),e(f.wpemoji)))}(window,document,window._wpemojiSettings);
		</script> 
  <style type="text/css">
img.wp-smiley,
img.emoji {
	display: inline !important;
	border: none !important;
	box-shadow: none !important;
	height: 1em !important;
	width: 1em !important;
	margin: 0 .07em !important;
	vertical-align: -0.1em !important;
	background: none !important;
	padding: 0 !important;
}
</style> 
  <link rel="stylesheet" id="crayon-theme-stormpath-css" href="https://stormpath.com/wp-content/uploads/crayon-syntax-highlighter/themes/stormpath/stormpath.css?ver=_2.7.2_beta" type="text/css" media="all"> 
  <link rel="stylesheet" id="crayon-font-monaco-css" href="https://stormpath.com/wp-content/plugins/crayon-syntax-highlighter/fonts/monaco.css?ver=_2.7.2_beta" type="text/css" media="all"> 
  <link rel="stylesheet" id="contact-form-7-css" href="https://stormpath.com/wp-content/plugins/contact-form-7/includes/css/styles.css?ver=4.7" type="text/css" media="all"> 
  <link rel="stylesheet" id="stormpath-style-css" href="https://stormpath.com/wp-content/themes/stormpath/style.css?ver=4.8.2" type="text/css" media="all"> 
  <link rel="stylesheet" id="jetpack_css-css" href="https://stormpath.com/wp-content/plugins/jetpack/css/jetpack.css?ver=4.7.1" type="text/css" media="all"> 
  <script type="text/javascript" src="https://stormpath.com/wp-includes/js/jquery/jquery.js?ver=1.12.4"></script> 
  <script type="text/javascript" src="https://stormpath.com/wp-includes/js/jquery/jquery-migrate.min.js?ver=1.4.1"></script> 
  <script type="text/javascript">
/* <![CDATA[ */
var related_posts_js_options = {"post_heading":"h4"};
/* ]]> */
</script> 
  <script type="text/javascript" src="https://stormpath.com/wp-content/plugins/jetpack/modules/related-posts/related-posts.js?ver=20150408"></script> 
  <link rel="https://api.w.org/" href="https://stormpath.com/wp-json/"> 
  <link rel="EditURI" type="application/rsd+xml" title="RSD" href="https://stormpath.com/xmlrpc.php?rsd"> 
  <link rel="wlwmanifest" type="application/wlwmanifest+xml" href="https://stormpath.com/wp-includes/wlwmanifest.xml"> 
  <link rel="shortlink" href="https://stormpath.com/?p=4169"> 
  <link rel="alternate" type="application/json+oembed" href="https://stormpath.com/wp-json/oembed/1.0/embed?url=https%3A%2F%2Fstormpath.com%2Fblog%2Ftutorial-build-rest-api-mobile-apps-using-node-js"> 
  <link rel="alternate" type="text/xml+oembed" href="https://stormpath.com/wp-json/oembed/1.0/embed?url=https%3A%2F%2Fstormpath.com%2Fblog%2Ftutorial-build-rest-api-mobile-apps-using-node-js&amp;format=xml"> 
  <script>
!function(f,b,e,v,n,t,s){if(f.fbq)return;n=f.fbq=function(){n.callMethod?
n.callMethod.apply(n,arguments):n.queue.push(arguments)};if(!f._fbq)f._fbq=n;
n.push=n;n.loaded=!0;n.version='2.0';n.queue=[];t=b.createElement(e);t.async=!0;
t.src=v;s=b.getElementsByTagName(e)[0];s.parentNode.insertBefore(t,s)}(window,
document,'script','https://connect.facebook.net/en_US/fbevents.js');

fbq('init', '986262161469311');
fbq('track', "PageView");</script> 
  <noscript>
   &lt;img height="1" width="1" style="display:none" src="https://www.facebook.com/tr?id=986262161469311&amp;amp;ev=PageView&amp;amp;noscript=1"&gt;
  </noscript> 
  <script src="https://cdn.optimizely.com/js/225847041.js"></script> 
  <style type="text/css">.recentcomments a{display:inline !important;padding:0 !important;margin:0 !important;}</style> 
  <meta name="generator" content="Powered by Visual Composer - drag and drop page builder for WordPress."> 
  <!--[if lte IE 9]><link rel="stylesheet" type="text/css" href="https://stormpath.com/wp-content/plugins/js_composer/assets/css/vc_lte_ie9.min.css" media="screen"><![endif]-->
  <!--[if IE  8]><link rel="stylesheet" type="text/css" href="https://stormpath.com/wp-content/plugins/js_composer/assets/css/vc-ie8.min.css" media="screen"><![endif]-->
  <noscript>
   <style type="text/css"> .wpb_animate_when_almost_visible { opacity: 1; }</style>
  </noscript>
 </head> 
 <body id="blog" class="post-template-default single single-post postid-4169 single-format-standard stretched wpb-js-composer js-comp-ver-4.11.2.1 vc_responsive"> 
  <!--[if lt IE 8]>
<p class="chromeframe">You are using an <strong>outdated</strong> browser. Please "browsehappy.com" upgrade your browser or "www.google.com/chromeframe/?redirect=true" activate Google Chrome Frame to improve your experience.</p>
<![endif]--> 
  <div id="wrapper" class="clearfix"> 
   <header class="main-navbar"> 
    <nav class="navbar navbar-default navbar-fixed-top" id="main-nav-menu"> 
     <div class="container main-navbar-container"> 
      <div class="navbar-header-container"> 
       <div class="navbar-header"> 
        <a href="https://stormpath.com" class="standard-logo main-nav-logo" data-dark-logo="http://stormpath.com/wp-content/uploads/2017/08/logos.png"><img src="https://stormpath.com/wp-content/uploads/2017/08/logos.png" alt="Stormpath Logo"></a> 
        <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#main-navbar-collapsable" aria-expanded="false"> <span class="sr-only">Toggle navigation</span> <span class="icon-bar"></span> <span class="icon-bar"></span> <span class="icon-bar"></span> </button> 
       </div> 
      </div> 
      <style>
              .global-msg {
                  color: #bbb;
                  text-align: right;
                  margin-top: 18px;
                  padding: 0px;
              }
          </style> 
      <div class="collapse navbar-collapse" id="main-navbar-collapsable"> 
       <ul id="menu-menu-1" class="nav navbar-nav main-navbar__links">
        <li id="menu-item-5143" class="menu-item menu-item-type-post_type menu-item-object-page current_page_parent menu-item-5143"><a class="main-navbar__link" href="https://stormpath.com/blog">Blog</a></li> 
       </ul> 
       <div class="global-msg visible-lg-block">
        <p>The Stormpath API shut down on August 17, 2017. Thank you to all the developers who have used Stormpath.</p> 
       </div> 
      </div> 
     </div> 
    </nav> 
   </header> 
   <div id="content" class="site-content"> 
    <section id="content"> 
     <div class="content-wrap nopadding"> 
      <style type="text/css">

                    .blog_header {
                        position: relative;
                        background-image: url(https://stormpath.com/wp-content/uploads/2016/05/api-node-OG-700x250-1.jpg);
                        background-position: center center;
                        background-size: cover;
                    }

                    .blog_header,
                    .blog_header_rule {
                        height: 250px;
                        border: none;
                        position: relative;
                        z-index: 11;
                    }

                    #blog .blog_header h1 {
                        color: #fff;
                        height: 220px;
                        display: table-cell;
                        vertical-align: bottom;
                        padding: 0;
                        margin: 0 !important;
                    }

                    .blog_header_text_bg {
                        display: block !important;
                        height: 100%;
                        width: 100%;
                        background: rgba(0,0,0,.7);
                        position: absolute;
                        z-index: 10;
                        top: 0;
                        left: 0;
                    }

                </style> 
      <div class="blog_header blog_header_image nopadding"> 
       <div class="container nopadding" style="z-index: 12;"> 
        <div class="col-md-8"> 
         <h1 class="entry-title">Tutorial: Build a REST API for Your Mobile Apps using Node.js</h1> 
        </div> 
       </div> 
       <div class="blog_header_text_bg"></div> 
      </div> 
      <div class="container clearfix nopadding"> 
       <main id="blog-content" class="site-main" role="main"> 
        <div class="col-md-8 col-sm-12 col-xs-12 nobottommargin nopadding clearfix"> 
         <article id="post-4169" class="post-4169 post type-post status-publish format-standard has-post-thumbnail hentry category-mobile category-node" role="article"> 
          <div class="post-meta"> 
           <div class="author_avatar"> 
            <img alt="" src="https://secure.gravatar.com/avatar/8129433c64eede2e20d450ffef359ed1?s=96&amp;d=mm&amp;r=g" srcset="https://secure.gravatar.com/avatar/8129433c64eede2e20d450ffef359ed1?s=192&amp;d=mm&amp;r=g 2x" class="avatar avatar-96 photo" height="96" width="96"> 
           </div> 
           <p class="author-and-date"> by Edward Jiang <span class="dividers">|</span> May 10, 2016 <span class="dividers">|</span> </p> 
           <ul class="post-categories"> 
            <li><a href="https://stormpath.com/blog/category/mobile" rel="category tag">Mobile</a></li> 
            <li><a href="https://stormpath.com/blog/category/node" rel="category tag">Node</a></li>
           </ul> 
          </div> 
          <div class="entry-content"> 
           <p>Behind every great mobile app is a great backend, but building a REST API for your app can be a bit daunting if you haven’t done so before. Fear not! This tutorial will show you how to build your first REST API using Node.js, and connect it&nbsp;to an iOS or Android app!</p> 
           <p>As a mobile app developer, I love to build REST APIs using the Node.js backend for several reasons:</p> 
           <ul> 
            <li>It’s easy to work with JSON in JavaScript, because JSON stands for JavaScript Object Notation!</li> 
            <li>Node.js is lightweight and easy to get started with.</li> 
            <li>Node.js gives you fine-grained control over your request and responses.</li> 
           </ul> 
           <p>However, when building an API, figuring out how to handle authentication is always a huge challenge. Authentication refers to the practice of understanding exactly who is accessing your data, and securely doing so is not easy. We built Stormpath to help developers easily add secure authentication to their apps, and we’ll also show you how to include this in your Node.js-powered REST API.</p> 
           <p><span id="more-4169"></span></p> 
           <h2 id="node-js-and-express-for-android-ios">Node.js and Express for Android &amp; iOS<a href="#node-js-and-express-for-android-ios" class="heading-link"><i class="stp-icons stp-icon-link2"></i></a></h2> 
           <p>Today, we’ll build the backend powering Stormpath Notes, a simple note taking app that syncs data online. With this knowledge, maybe you’ll be able to build a solid competitor to Evernote, OneNote, and other industry giants!</p> 
           <p>We have a separate tutorial for how to build the <a href="https://stormpath.com/blog/build-note-taking-app-swift-ios/">iOS</a> and <a href="https://stormpath.com/blog/build-user-authentication-for-android-app/">Android</a> apps that can use&nbsp;this backend, so check them out once you’ve finished this tutorial.</p> 
           <p>Today we’ll be implementing the following endpoints:</p> 
           <p><code>GET /notes</code> – returns the notes for the authenticated user in the form of a JSON object.</p> 
           <p><code>POST /notes</code> – takes a JSON object with the notes and saves it for the authenticated user.</p> 
           <p>The JSON object takes the form of:</p> 
           <p></p> 
           <div id="crayon-59d42784beda6443135002" class="crayon-syntax crayon-theme-stormpath crayon-font-monaco crayon-os-pc print-yes notranslate" data-settings=" minimize scroll-mouseover" style=" margin-top: 12px; margin-bottom: 12px; font-size: 12px !important; line-height: 15px !important;"> 
            <div class="crayon-plain-wrap">
             <textarea wrap="soft" class="crayon-plain print-no" data-settings="dblclick" readonly style="-moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4; font-size: 12px !important; line-height: 15px !important;">
{"notes": "The notes the user saved"}
</textarea>
            </div> 
            <div class="crayon-main" style=""> 
             <table class="crayon-table"> 
              <tbody>
               <tr class="crayon-row"> 
                <td class="crayon-nums " data-settings="hide"> 
                 <div class="crayon-nums-content" style="font-size: 12px !important; line-height: 15px !important;">
                  <div class="crayon-num" data-line="crayon-59d42784beda6443135002-1">
                   1
                  </div>
                  <div class="crayon-num crayon-striped-num" data-line="crayon-59d42784beda6443135002-2">
                   2
                  </div>
                 </div> </td> 
                <td class="crayon-code">
                 <div class="crayon-pre" style="font-size: 12px !important; line-height: 15px !important; -moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4;">
                  <div class="crayon-line" id="crayon-59d42784beda6443135002-1">
                   <span class="crayon-sy">{</span>
                   <span class="crayon-s">"notes"</span>
                   <span class="crayon-o">:</span>
                   <span class="crayon-h"> </span>
                   <span class="crayon-s">"The notes the user saved"</span>
                   <span class="crayon-sy">}</span>
                  </div>
                  <div class="crayon-line crayon-striped-line" id="crayon-59d42784beda6443135002-2">
                   &nbsp;
                  </div>
                 </div></td> 
               </tr> 
              </tbody>
             </table> 
            </div> 
           </div> 
           <p></p> 
           <p>Stormpath’s backend integrations (<a href="https://github.com/stormpath/express-stormpath/">Express-Stormpath</a> being one of them) also expose a common API, including <code>/register</code>, <code>/oauth/token</code> (for logging in), and other endpoints so we don’t have to worry about coding them! You’ll learn more about those endpoints later in this tutorial.</p> 
           <p>We’ll also be using the following tools to build and test this backend:</p> 
           <ul> 
            <li><a href="https://nodejs.org/en/">Node.js</a> – the runtime for our app.</li> 
            <li><a href="http://expressjs.com">Express.js</a> – a popular, lightweight framework for building Node.js apps</li> 
            <li><a href="https://stormpath.com">Stormpath</a> – a backend service for handling user authentication</li> 
            <li><a href="https://www.getpostman.com">Postman</a> – a HTTP client that allows us to make custom requests to the REST API</li> 
           </ul> 
           <p>Also, the finished code is live and hosted at https://stormpathnotes.herokuapp.com/, so you can play around with the API, and the <a href="https://github.com/stormpath/stormpath-express-mobile-notes-example">code is available on GitHub</a></p> 
           <h2 id="starting-your-node-js-mobile-app">Starting Your Node.js Mobile App<a href="#starting-your-node-js-mobile-app" class="heading-link"><i class="stp-icons stp-icon-link2"></i></a></h2> 
           <p>To get started, make sure that you:</p> 
           <ol> 
            <li>Install a great text editor. I like <a href="https://www.sublimetext.com">Sublime</a>, <a href="https://atom.io">Atom</a>, or <a href="https://code.visualstudio.com">VS Code</a></li> 
            <li>Install the <a href="https://nodejs.org/en/">Node.js</a> runtime. You can install the “Current” (v6) version of Node.</li> 
            <li>Sign up for a <a href="https://api.stormpath.com/register">Stormpath Account</a></li> 
            <li>Install <a href="https://www.getpostman.com">Postman</a></li> 
           </ol> 
           <h3 id="setting-up-your-app">Setting Up Your App<a href="#setting-up-your-app" class="heading-link"><i class="stp-icons stp-icon-link2"></i></a></h3> 
           <p>To get started with your Node.js project, we’ll use npm. npm is a package manager for JavaScript projects, and allows you to install JavaScript tools and modules for your project. It’s automatically included in your Node.js install, so all we have to do is start using it in the command line!</p> 
           <p>To get started, create a folder, navigate to it in the command line, and run:</p> 
           <p></p> 
           <div id="crayon-59d42784bedb3646661555" class="crayon-syntax crayon-theme-stormpath crayon-font-monaco crayon-os-pc print-yes notranslate" data-settings=" minimize scroll-mouseover" style=" margin-top: 12px; margin-bottom: 12px; font-size: 12px !important; line-height: 15px !important;"> 
            <div class="crayon-plain-wrap">
             <textarea wrap="soft" class="crayon-plain print-no" data-settings="dblclick" readonly style="-moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4; font-size: 12px !important; line-height: 15px !important;">
$ npm init
</textarea>
            </div> 
            <div class="crayon-main" style=""> 
             <table class="crayon-table"> 
              <tbody>
               <tr class="crayon-row"> 
                <td class="crayon-nums " data-settings="hide"> 
                 <div class="crayon-nums-content" style="font-size: 12px !important; line-height: 15px !important;">
                  <div class="crayon-num" data-line="crayon-59d42784bedb3646661555-1">
                   1
                  </div>
                  <div class="crayon-num crayon-striped-num" data-line="crayon-59d42784bedb3646661555-2">
                   2
                  </div>
                 </div> </td> 
                <td class="crayon-code">
                 <div class="crayon-pre" style="font-size: 12px !important; line-height: 15px !important; -moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4;">
                  <div class="crayon-line" id="crayon-59d42784bedb3646661555-1">
                   <span class="crayon-sy">$</span>
                   <span class="crayon-h"> </span>
                   <span class="crayon-e">npm </span>
                   <span class="crayon-i">init</span>
                  </div>
                  <div class="crayon-line crayon-striped-line" id="crayon-59d42784bedb3646661555-2">
                   &nbsp;
                  </div>
                 </div></td> 
               </tr> 
              </tbody>
             </table> 
            </div> 
           </div> 
           <p></p> 
           <p>npm will ask you a lot of questions — feel free to leave them as the default!</p> 
           <p>Once you’re done, npm will create a <code>package.json</code> file in your folder. <code>package.json</code> keeps track of your project information and dependencies!</p> 
           <p>In addition, we need to install express, a popular, minimalist web framework for Node.js. Install it by running this command:</p> 
           <p></p> 
           <div id="crayon-59d42784bedb8503451684" class="crayon-syntax crayon-theme-stormpath crayon-font-monaco crayon-os-pc print-yes notranslate" data-settings=" minimize scroll-mouseover" style=" margin-top: 12px; margin-bottom: 12px; font-size: 12px !important; line-height: 15px !important;"> 
            <div class="crayon-plain-wrap">
             <textarea wrap="soft" class="crayon-plain print-no" data-settings="dblclick" readonly style="-moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4; font-size: 12px !important; line-height: 15px !important;">
$ npm install --save express
</textarea>
            </div> 
            <div class="crayon-main" style=""> 
             <table class="crayon-table"> 
              <tbody>
               <tr class="crayon-row"> 
                <td class="crayon-nums " data-settings="hide"> 
                 <div class="crayon-nums-content" style="font-size: 12px !important; line-height: 15px !important;">
                  <div class="crayon-num" data-line="crayon-59d42784bedb8503451684-1">
                   1
                  </div>
                  <div class="crayon-num crayon-striped-num" data-line="crayon-59d42784bedb8503451684-2">
                   2
                  </div>
                 </div> </td> 
                <td class="crayon-code">
                 <div class="crayon-pre" style="font-size: 12px !important; line-height: 15px !important; -moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4;">
                  <div class="crayon-line" id="crayon-59d42784bedb8503451684-1">
                   <span class="crayon-sy">$</span>
                   <span class="crayon-h"> </span>
                   <span class="crayon-e">npm </span>
                   <span class="crayon-v">install</span>
                   <span class="crayon-h"> </span>
                   <span class="crayon-o">--</span>
                   <span class="crayon-e">save </span>
                   <span class="crayon-i">express</span>
                  </div>
                  <div class="crayon-line crayon-striped-line" id="crayon-59d42784bedb8503451684-2">
                   &nbsp;
                  </div>
                 </div></td> 
               </tr> 
              </tbody>
             </table> 
            </div> 
           </div> 
           <p></p> 
           <p>With this command, npm will install express, and save its version to the package.json file. Now, we can use express in our project.</p> 
           <h2 id="code-your-first-rest-api">Code Your First REST API<a href="#code-your-first-rest-api" class="heading-link"><i class="stp-icons stp-icon-link2"></i></a></h2> 
           <p>We’re all set with the project, so let’s start writing our REST API! Create a file named <code>index.js</code>, and type in the following:</p> 
           <p></p> 
           <div id="crayon-59d42784bedba323300725" class="crayon-syntax crayon-theme-stormpath crayon-font-monaco crayon-os-pc print-yes notranslate" data-settings=" minimize scroll-mouseover" style=" margin-top: 12px; margin-bottom: 12px; font-size: 12px !important; line-height: 15px !important;"> 
            <div class="crayon-plain-wrap">
             <textarea wrap="soft" class="crayon-plain print-no" data-settings="dblclick" readonly style="-moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4; font-size: 12px !important; line-height: 15px !important;">
var express = require('express')

var app = express()

app.get('/notes', function(req, res) {
  res.json({notes: "This is your notebook. Edit this to start saving your notes!"})
})

app.listen(3000)
</textarea>
            </div> 
            <div class="crayon-main" style=""> 
             <table class="crayon-table"> 
              <tbody>
               <tr class="crayon-row"> 
                <td class="crayon-nums " data-settings="hide"> 
                 <div class="crayon-nums-content" style="font-size: 12px !important; line-height: 15px !important;">
                  <div class="crayon-num" data-line="crayon-59d42784bedba323300725-1">
                   1
                  </div>
                  <div class="crayon-num crayon-striped-num" data-line="crayon-59d42784bedba323300725-2">
                   2
                  </div>
                  <div class="crayon-num" data-line="crayon-59d42784bedba323300725-3">
                   3
                  </div>
                  <div class="crayon-num crayon-striped-num" data-line="crayon-59d42784bedba323300725-4">
                   4
                  </div>
                  <div class="crayon-num" data-line="crayon-59d42784bedba323300725-5">
                   5
                  </div>
                  <div class="crayon-num crayon-striped-num" data-line="crayon-59d42784bedba323300725-6">
                   6
                  </div>
                  <div class="crayon-num" data-line="crayon-59d42784bedba323300725-7">
                   7
                  </div>
                  <div class="crayon-num crayon-striped-num" data-line="crayon-59d42784bedba323300725-8">
                   8
                  </div>
                  <div class="crayon-num" data-line="crayon-59d42784bedba323300725-9">
                   9
                  </div>
                  <div class="crayon-num crayon-striped-num" data-line="crayon-59d42784bedba323300725-10">
                   10
                  </div>
                 </div> </td> 
                <td class="crayon-code">
                 <div class="crayon-pre" style="font-size: 12px !important; line-height: 15px !important; -moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4;">
                  <div class="crayon-line" id="crayon-59d42784bedba323300725-1">
                   <span class="crayon-t">var</span>
                   <span class="crayon-h"> </span>
                   <span class="crayon-v">express</span>
                   <span class="crayon-h"> </span>
                   <span class="crayon-o">=</span>
                   <span class="crayon-h"> </span>
                   <span class="crayon-e">require</span>
                   <span class="crayon-sy">(</span>
                   <span class="crayon-s">'express'</span>
                   <span class="crayon-sy">)</span>
                  </div>
                  <div class="crayon-line crayon-striped-line" id="crayon-59d42784bedba323300725-2">
                   &nbsp;
                  </div>
                  <div class="crayon-line" id="crayon-59d42784bedba323300725-3">
                   <span class="crayon-t">var</span>
                   <span class="crayon-h"> </span>
                   <span class="crayon-v">app</span>
                   <span class="crayon-h"> </span>
                   <span class="crayon-o">=</span>
                   <span class="crayon-h"> </span>
                   <span class="crayon-e">express</span>
                   <span class="crayon-sy">(</span>
                   <span class="crayon-sy">)</span>
                  </div>
                  <div class="crayon-line crayon-striped-line" id="crayon-59d42784bedba323300725-4">
                   &nbsp;
                  </div>
                  <div class="crayon-line" id="crayon-59d42784bedba323300725-5">
                   <span class="crayon-v">app</span>
                   <span class="crayon-sy">.</span>
                   <span class="crayon-e">get</span>
                   <span class="crayon-sy">(</span>
                   <span class="crayon-s">'/notes'</span>
                   <span class="crayon-sy">,</span>
                   <span class="crayon-h"> </span>
                   <span class="crayon-t">function</span>
                   <span class="crayon-sy">(</span>
                   <span class="crayon-v">req</span>
                   <span class="crayon-sy">,</span>
                   <span class="crayon-h"> </span>
                   <span class="crayon-v">res</span>
                   <span class="crayon-sy">)</span>
                   <span class="crayon-h"> </span>
                   <span class="crayon-sy">{</span>
                  </div>
                  <div class="crayon-line crayon-striped-line" id="crayon-59d42784bedba323300725-6">
                   <span class="crayon-h">&nbsp;&nbsp;</span>
                   <span class="crayon-v">res</span>
                   <span class="crayon-sy">.</span>
                   <span class="crayon-e">json</span>
                   <span class="crayon-sy">(</span>
                   <span class="crayon-sy">{</span>
                   <span class="crayon-v">notes</span>
                   <span class="crayon-o">:</span>
                   <span class="crayon-h"> </span>
                   <span class="crayon-s">"This is your notebook. Edit this to start saving your notes!"</span>
                   <span class="crayon-sy">}</span>
                   <span class="crayon-sy">)</span>
                  </div>
                  <div class="crayon-line" id="crayon-59d42784bedba323300725-7">
                   <span class="crayon-sy">}</span>
                   <span class="crayon-sy">)</span>
                  </div>
                  <div class="crayon-line crayon-striped-line" id="crayon-59d42784bedba323300725-8">
                   &nbsp;
                  </div>
                  <div class="crayon-line" id="crayon-59d42784bedba323300725-9">
                   <span class="crayon-v">app</span>
                   <span class="crayon-sy">.</span>
                   <span class="crayon-e">listen</span>
                   <span class="crayon-sy">(</span>
                   <span class="crayon-cn">3000</span>
                   <span class="crayon-sy">)</span>
                  </div>
                  <div class="crayon-line crayon-striped-line" id="crayon-59d42784bedba323300725-10">
                   &nbsp;
                  </div>
                 </div></td> 
               </tr> 
              </tbody>
             </table> 
            </div> 
           </div> 
           <p></p> 
           <p>Simple, right? In six lines of code, we:</p> 
           <ul> 
            <li>Imported the Express module</li> 
            <li>Initialized the Express object</li> 
            <li>Added a handler for <code>GET /notes</code> which responds to the request with a JSON object with sample notes</li> 
            <li>Told express to listen to HTTP requests on port 3000</li> 
           </ul> 
           <p>Try running it in the command line:</p> 
           <p></p> 
           <div id="crayon-59d42784bedbd135423161" class="crayon-syntax crayon-theme-stormpath crayon-font-monaco crayon-os-pc print-yes notranslate" data-settings=" minimize scroll-mouseover" style=" margin-top: 12px; margin-bottom: 12px; font-size: 12px !important; line-height: 15px !important;"> 
            <div class="crayon-plain-wrap">
             <textarea wrap="soft" class="crayon-plain print-no" data-settings="dblclick" readonly style="-moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4; font-size: 12px !important; line-height: 15px !important;">
node index.js
</textarea>
            </div> 
            <div class="crayon-main" style=""> 
             <table class="crayon-table"> 
              <tbody>
               <tr class="crayon-row"> 
                <td class="crayon-nums " data-settings="hide"> 
                 <div class="crayon-nums-content" style="font-size: 12px !important; line-height: 15px !important;">
                  <div class="crayon-num" data-line="crayon-59d42784bedbd135423161-1">
                   1
                  </div>
                  <div class="crayon-num crayon-striped-num" data-line="crayon-59d42784bedbd135423161-2">
                   2
                  </div>
                 </div> </td> 
                <td class="crayon-code">
                 <div class="crayon-pre" style="font-size: 12px !important; line-height: 15px !important; -moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4;">
                  <div class="crayon-line" id="crayon-59d42784bedbd135423161-1">
                   <span class="crayon-e">node </span>
                   <span class="crayon-v">index</span>
                   <span class="crayon-sy">.</span>
                   <span class="crayon-i">js</span>
                  </div>
                  <div class="crayon-line crayon-striped-line" id="crayon-59d42784bedbd135423161-2">
                   &nbsp;
                  </div>
                 </div></td> 
               </tr> 
              </tbody>
             </table> 
            </div> 
           </div> 
           <p></p> 
           <p>Congrats, you now have a basic REST API with one endpoint, and it’s running on your machine! Try visiting it at http://localhost:3000/notes and see what happens.</p> 
           <p><img src="https://stormpath.com/wp-content/uploads/2016/05/Screen-Shot-2016-05-09-at-11.26.40-AM-1.png" alt="REST API Endpoint" width="616" height="344" class="alignnone size-full wp-image-4539" srcset="https://stormpath.com/wp-content/uploads/2016/05/Screen-Shot-2016-05-09-at-11.26.40-AM-1.png 616w, https://stormpath.com/wp-content/uploads/2016/05/Screen-Shot-2016-05-09-at-11.26.40-AM-1-300x168.png 300w" sizes="(max-width: 616px) 100vw, 616px"></p> 
           <h3 id="adding-authentication-to-your-mobile-api">Adding Authentication to Your Mobile API<a href="#adding-authentication-to-your-mobile-api" class="heading-link"><i class="stp-icons stp-icon-link2"></i></a></h3> 
           <p>Having a <code>/notes</code> endpoint is great, but for a note-taking app, we can’t have everyone viewing the same set of notes. We need to add authentication to our app. Authentication allows our REST API to know who is accessing the notes endpoint, and only show notes to users that are logged in. For that, we’re going to use Stormpath.</p> 
           <p>Log into the <a href="https://api.stormpath.com/login">Stormpath Account</a> you created, and click on the Node.js quickstart. In the first page, you’ll see a section showing you how to set up your API Keys by using environment variables. Environment variables allow you to configure your application without using code, which is great when you have multiple development environments or even servers. Paste the API Keys from the quickstart into your command line:</p> 
           <p></p> 
           <div id="crayon-59d42784bedc0202354124" class="crayon-syntax crayon-theme-stormpath crayon-font-monaco crayon-os-pc print-yes notranslate" data-settings=" minimize scroll-mouseover" style=" margin-top: 12px; margin-bottom: 12px; font-size: 12px !important; line-height: 15px !important;"> 
            <div class="crayon-plain-wrap">
             <textarea wrap="soft" class="crayon-plain print-no" data-settings="dblclick" readonly style="-moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4; font-size: 12px !important; line-height: 15px !important;">
# This is an example; use the values in Stormpath instead.
$ export STORMPATH_CLIENT_APIKEY_ID=EXAMPLE
$ export STORMPATH_CLIENT_APIKEY_SECRET=EXAMPLE
$ export STORMPATH_APPLICATION_HREF=https://api.stormpath.com/v1/applications/EXAMPLE
</textarea>
            </div> 
            <div class="crayon-main" style=""> 
             <table class="crayon-table"> 
              <tbody>
               <tr class="crayon-row"> 
                <td class="crayon-nums " data-settings="hide"> 
                 <div class="crayon-nums-content" style="font-size: 12px !important; line-height: 15px !important;">
                  <div class="crayon-num" data-line="crayon-59d42784bedc0202354124-1">
                   1
                  </div>
                  <div class="crayon-num crayon-striped-num" data-line="crayon-59d42784bedc0202354124-2">
                   2
                  </div>
                  <div class="crayon-num" data-line="crayon-59d42784bedc0202354124-3">
                   3
                  </div>
                  <div class="crayon-num crayon-striped-num" data-line="crayon-59d42784bedc0202354124-4">
                   4
                  </div>
                  <div class="crayon-num" data-line="crayon-59d42784bedc0202354124-5">
                   5
                  </div>
                 </div> </td> 
                <td class="crayon-code">
                 <div class="crayon-pre" style="font-size: 12px !important; line-height: 15px !important; -moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4;">
                  <div class="crayon-line" id="crayon-59d42784bedc0202354124-1">
                   <span class="crayon-p"># This is an example; use the values in Stormpath instead.</span>
                  </div>
                  <div class="crayon-line crayon-striped-line" id="crayon-59d42784bedc0202354124-2">
                   <span class="crayon-sy">$</span>
                   <span class="crayon-h"> </span>
                   <span class="crayon-e">export </span>
                   <span class="crayon-v">STORMPATH_CLIENT_APIKEY_ID</span>
                   <span class="crayon-o">=</span>
                   <span class="crayon-i">EXAMPLE</span>
                  </div>
                  <div class="crayon-line" id="crayon-59d42784bedc0202354124-3">
                   <span class="crayon-sy">$</span>
                   <span class="crayon-h"> </span>
                   <span class="crayon-e">export </span>
                   <span class="crayon-v">STORMPATH_CLIENT_APIKEY_SECRET</span>
                   <span class="crayon-o">=</span>
                   <span class="crayon-i">EXAMPLE</span>
                  </div>
                  <div class="crayon-line crayon-striped-line" id="crayon-59d42784bedc0202354124-4">
                   <span class="crayon-sy">$</span>
                   <span class="crayon-h"> </span>
                   <span class="crayon-e">export </span>
                   <span class="crayon-v">STORMPATH_APPLICATION_HREF</span>
                   <span class="crayon-o">=</span>
                   <span class="crayon-v">https</span>
                   <span class="crayon-o">:</span>
                   <span class="crayon-c">//api.stormpath.com/v1/applications/EXAMPLE</span>
                  </div>
                  <div class="crayon-line" id="crayon-59d42784bedc0202354124-5">
                   &nbsp;
                  </div>
                 </div></td> 
               </tr> 
              </tbody>
             </table> 
            </div> 
           </div> 
           <p></p> 
           <p>Let’s install the <code>express-stormpath</code> integration, so we can get a standard API for logging in, and other tasks:</p> 
           <p></p> 
           <div id="crayon-59d42784bedc4511769494" class="crayon-syntax crayon-theme-stormpath crayon-font-monaco crayon-os-pc print-yes notranslate" data-settings=" minimize scroll-mouseover" style=" margin-top: 12px; margin-bottom: 12px; font-size: 12px !important; line-height: 15px !important;"> 
            <div class="crayon-plain-wrap">
             <textarea wrap="soft" class="crayon-plain print-no" data-settings="dblclick" readonly style="-moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4; font-size: 12px !important; line-height: 15px !important;">
$ npm install --save express-stormpath
</textarea>
            </div> 
            <div class="crayon-main" style=""> 
             <table class="crayon-table"> 
              <tbody>
               <tr class="crayon-row"> 
                <td class="crayon-nums " data-settings="hide"> 
                 <div class="crayon-nums-content" style="font-size: 12px !important; line-height: 15px !important;">
                  <div class="crayon-num" data-line="crayon-59d42784bedc4511769494-1">
                   1
                  </div>
                  <div class="crayon-num crayon-striped-num" data-line="crayon-59d42784bedc4511769494-2">
                   2
                  </div>
                 </div> </td> 
                <td class="crayon-code">
                 <div class="crayon-pre" style="font-size: 12px !important; line-height: 15px !important; -moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4;">
                  <div class="crayon-line" id="crayon-59d42784bedc4511769494-1">
                   <span class="crayon-sy">$</span>
                   <span class="crayon-h"> </span>
                   <span class="crayon-e">npm </span>
                   <span class="crayon-v">install</span>
                   <span class="crayon-h"> </span>
                   <span class="crayon-o">--</span>
                   <span class="crayon-e">save </span>
                   <span class="crayon-v">express</span>
                   <span class="crayon-o">-</span>
                   <span class="crayon-i">stormpath</span>
                  </div>
                  <div class="crayon-line crayon-striped-line" id="crayon-59d42784bedc4511769494-2">
                   &nbsp;
                  </div>
                 </div></td> 
               </tr> 
              </tbody>
             </table> 
            </div> 
           </div> 
           <p></p> 
           <p>Now, let’s add Stormpath to our application in <code>index.js</code>:</p> 
           <p></p> 
           <div id="crayon-59d42784bedc6561070420" class="crayon-syntax crayon-theme-stormpath crayon-font-monaco crayon-os-pc print-yes notranslate" data-settings=" minimize scroll-mouseover" style=" margin-top: 12px; margin-bottom: 12px; font-size: 12px !important; line-height: 15px !important;"> 
            <div class="crayon-plain-wrap">
             <textarea wrap="soft" class="crayon-plain print-no" data-settings="dblclick" readonly style="-moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4; font-size: 12px !important; line-height: 15px !important;">
var stormpath = require('express-stormpath')
</textarea>
            </div> 
            <div class="crayon-main" style=""> 
             <table class="crayon-table"> 
              <tbody>
               <tr class="crayon-row"> 
                <td class="crayon-nums " data-settings="hide"> 
                 <div class="crayon-nums-content" style="font-size: 12px !important; line-height: 15px !important;">
                  <div class="crayon-num" data-line="crayon-59d42784bedc6561070420-1">
                   1
                  </div>
                  <div class="crayon-num crayon-striped-num" data-line="crayon-59d42784bedc6561070420-2">
                   2
                  </div>
                 </div> </td> 
                <td class="crayon-code">
                 <div class="crayon-pre" style="font-size: 12px !important; line-height: 15px !important; -moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4;">
                  <div class="crayon-line" id="crayon-59d42784bedc6561070420-1">
                   <span class="crayon-t">var</span>
                   <span class="crayon-h"> </span>
                   <span class="crayon-v">stormpath</span>
                   <span class="crayon-h"> </span>
                   <span class="crayon-o">=</span>
                   <span class="crayon-h"> </span>
                   <span class="crayon-e">require</span>
                   <span class="crayon-sy">(</span>
                   <span class="crayon-s">'express-stormpath'</span>
                   <span class="crayon-sy">)</span>
                  </div>
                  <div class="crayon-line crayon-striped-line" id="crayon-59d42784bedc6561070420-2">
                   &nbsp;
                  </div>
                 </div></td> 
               </tr> 
              </tbody>
             </table> 
            </div> 
           </div> 
           <p></p> 
           <p>Delete the old code for the <code>/notes</code> endpoint, and replace it with:</p> 
           <p></p> 
           <div id="crayon-59d42784bedc9731105711" class="crayon-syntax crayon-theme-stormpath crayon-font-monaco crayon-os-pc print-yes notranslate" data-settings=" minimize scroll-mouseover" style=" margin-top: 12px; margin-bottom: 12px; font-size: 12px !important; line-height: 15px !important;"> 
            <div class="crayon-plain-wrap">
             <textarea wrap="soft" class="crayon-plain print-no" data-settings="dblclick" readonly style="-moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4; font-size: 12px !important; line-height: 15px !important;">
app.use(stormpath.init(app, {
  expand: {
    customData: true,
  },
  web: {
    produces: ['application/json']
  }
}))

app.get('/notes', stormpath.apiAuthenticationRequired, function(req, res) {
  res.json({notes: req.user.customData.notes || "This is your notebook. Edit this to start saving your notes!"})
})
</textarea>
            </div> 
            <div class="crayon-main" style=""> 
             <table class="crayon-table"> 
              <tbody>
               <tr class="crayon-row"> 
                <td class="crayon-nums " data-settings="hide"> 
                 <div class="crayon-nums-content" style="font-size: 12px !important; line-height: 15px !important;">
                  <div class="crayon-num" data-line="crayon-59d42784bedc9731105711-1">
                   1
                  </div>
                  <div class="crayon-num crayon-striped-num" data-line="crayon-59d42784bedc9731105711-2">
                   2
                  </div>
                  <div class="crayon-num" data-line="crayon-59d42784bedc9731105711-3">
                   3
                  </div>
                  <div class="crayon-num crayon-striped-num" data-line="crayon-59d42784bedc9731105711-4">
                   4
                  </div>
                  <div class="crayon-num" data-line="crayon-59d42784bedc9731105711-5">
                   5
                  </div>
                  <div class="crayon-num crayon-striped-num" data-line="crayon-59d42784bedc9731105711-6">
                   6
                  </div>
                  <div class="crayon-num" data-line="crayon-59d42784bedc9731105711-7">
                   7
                  </div>
                  <div class="crayon-num crayon-striped-num" data-line="crayon-59d42784bedc9731105711-8">
                   8
                  </div>
                  <div class="crayon-num" data-line="crayon-59d42784bedc9731105711-9">
                   9
                  </div>
                  <div class="crayon-num crayon-striped-num" data-line="crayon-59d42784bedc9731105711-10">
                   10
                  </div>
                  <div class="crayon-num" data-line="crayon-59d42784bedc9731105711-11">
                   11
                  </div>
                  <div class="crayon-num crayon-striped-num" data-line="crayon-59d42784bedc9731105711-12">
                   12
                  </div>
                  <div class="crayon-num" data-line="crayon-59d42784bedc9731105711-13">
                   13
                  </div>
                 </div> </td> 
                <td class="crayon-code">
                 <div class="crayon-pre" style="font-size: 12px !important; line-height: 15px !important; -moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4;">
                  <div class="crayon-line" id="crayon-59d42784bedc9731105711-1">
                   <span class="crayon-v">app</span>
                   <span class="crayon-sy">.</span>
                   <span class="crayon-st">use</span>
                   <span class="crayon-sy">(</span>
                   <span class="crayon-v">stormpath</span>
                   <span class="crayon-sy">.</span>
                   <span class="crayon-e">init</span>
                   <span class="crayon-sy">(</span>
                   <span class="crayon-v">app</span>
                   <span class="crayon-sy">,</span>
                   <span class="crayon-h"> </span>
                   <span class="crayon-sy">{</span>
                  </div>
                  <div class="crayon-line crayon-striped-line" id="crayon-59d42784bedc9731105711-2">
                   <span class="crayon-h">&nbsp;&nbsp;</span>
                   <span class="crayon-v">expand</span>
                   <span class="crayon-o">:</span>
                   <span class="crayon-h"> </span>
                   <span class="crayon-sy">{</span>
                  </div>
                  <div class="crayon-line" id="crayon-59d42784bedc9731105711-3">
                   <span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;</span>
                   <span class="crayon-v">customData</span>
                   <span class="crayon-o">:</span>
                   <span class="crayon-h"> </span>
                   <span class="crayon-t">true</span>
                   <span class="crayon-sy">,</span>
                  </div>
                  <div class="crayon-line crayon-striped-line" id="crayon-59d42784bedc9731105711-4">
                   <span class="crayon-h">&nbsp;&nbsp;</span>
                   <span class="crayon-sy">}</span>
                   <span class="crayon-sy">,</span>
                  </div>
                  <div class="crayon-line" id="crayon-59d42784bedc9731105711-5">
                   <span class="crayon-h">&nbsp;&nbsp;</span>
                   <span class="crayon-v">web</span>
                   <span class="crayon-o">:</span>
                   <span class="crayon-h"> </span>
                   <span class="crayon-sy">{</span>
                  </div>
                  <div class="crayon-line crayon-striped-line" id="crayon-59d42784bedc9731105711-6">
                   <span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;</span>
                   <span class="crayon-v">produces</span>
                   <span class="crayon-o">:</span>
                   <span class="crayon-h"> </span>
                   <span class="crayon-sy">[</span>
                   <span class="crayon-s">'application/json'</span>
                   <span class="crayon-sy">]</span>
                  </div>
                  <div class="crayon-line" id="crayon-59d42784bedc9731105711-7">
                   <span class="crayon-h">&nbsp;&nbsp;</span>
                   <span class="crayon-sy">}</span>
                  </div>
                  <div class="crayon-line crayon-striped-line" id="crayon-59d42784bedc9731105711-8">
                   <span class="crayon-sy">}</span>
                   <span class="crayon-sy">)</span>
                   <span class="crayon-sy">)</span>
                  </div>
                  <div class="crayon-line" id="crayon-59d42784bedc9731105711-9">
                   &nbsp;
                  </div>
                  <div class="crayon-line crayon-striped-line" id="crayon-59d42784bedc9731105711-10">
                   <span class="crayon-v">app</span>
                   <span class="crayon-sy">.</span>
                   <span class="crayon-e">get</span>
                   <span class="crayon-sy">(</span>
                   <span class="crayon-s">'/notes'</span>
                   <span class="crayon-sy">,</span>
                   <span class="crayon-h"> </span>
                   <span class="crayon-v">stormpath</span>
                   <span class="crayon-sy">.</span>
                   <span class="crayon-v">apiAuthenticationRequired</span>
                   <span class="crayon-sy">,</span>
                   <span class="crayon-h"> </span>
                   <span class="crayon-t">function</span>
                   <span class="crayon-sy">(</span>
                   <span class="crayon-v">req</span>
                   <span class="crayon-sy">,</span>
                   <span class="crayon-h"> </span>
                   <span class="crayon-v">res</span>
                   <span class="crayon-sy">)</span>
                   <span class="crayon-h"> </span>
                   <span class="crayon-sy">{</span>
                  </div>
                  <div class="crayon-line" id="crayon-59d42784bedc9731105711-11">
                   <span class="crayon-h">&nbsp;&nbsp;</span>
                   <span class="crayon-v">res</span>
                   <span class="crayon-sy">.</span>
                   <span class="crayon-e">json</span>
                   <span class="crayon-sy">(</span>
                   <span class="crayon-sy">{</span>
                   <span class="crayon-v">notes</span>
                   <span class="crayon-o">:</span>
                   <span class="crayon-h"> </span>
                   <span class="crayon-v">req</span>
                   <span class="crayon-sy">.</span>
                   <span class="crayon-v">user</span>
                   <span class="crayon-sy">.</span>
                   <span class="crayon-v">customData</span>
                   <span class="crayon-sy">.</span>
                   <span class="crayon-v">notes</span>
                   <span class="crayon-h"> </span>
                   <span class="crayon-o">||</span>
                   <span class="crayon-h"> </span>
                   <span class="crayon-s">"This is your notebook. Edit this to start saving your notes!"</span>
                   <span class="crayon-sy">}</span>
                   <span class="crayon-sy">)</span>
                  </div>
                  <div class="crayon-line crayon-striped-line" id="crayon-59d42784bedc9731105711-12">
                   <span class="crayon-sy">}</span>
                   <span class="crayon-sy">)</span>
                  </div>
                  <div class="crayon-line" id="crayon-59d42784bedc9731105711-13">
                   &nbsp;
                  </div>
                 </div></td> 
               </tr> 
              </tbody>
             </table> 
            </div> 
           </div> 
           <p></p> 
           <p>In this bit of code, we’re initializing <code>express-stormpath</code> and attaching it to Express. We’re asking it to preload user <code>customData</code> when retrieving objects from Stormpath. We need customData to store our user’s notes, and this will make them easier to fetch. In addition, we configure it to only produce <code>application/json</code> outputs, as otherwise it can also produce HTML views. Express-Stormpath is <a href="https://docs.stormpath.com/nodejs/express/latest/configuration.html">highly configurable, and supports many different options</a> for building your API.</p> 
           <p>To require authentication, we’re attaching the <code>stormpath.apiAuthenticationRequired</code> middleware to the <code>/notes</code> endpoint. This will inspect the headers on every request, and look for an access token. If there is no access token, it will respond with a <code>401 Unauthorized</code> error.</p> 
           <p>Finally, we respond with the notes in the customData, or, if not present, a default message for your notes.</p> 
           <p>Let’s run this code, and try using our new API. But this time, instead of using a browser, we’re going to use Postman.</p> 
           <h3 id="testing-your-node-js-rest-api-with-postman">Testing Your Node.js REST API With Postman<a href="#testing-your-node-js-rest-api-with-postman" class="heading-link"><i class="stp-icons stp-icon-link2"></i></a></h3> 
           <p>To get started with Postman, let’s try registering a new user in our app. To do this, let’s first install the <a href="https://app.getpostman.com/run-collection/6c51d38e029b74a57067#?env%5BStormpath%20Notes%5D=W3sia2V5IjoicG9ydCIsInZhbHVlIjoiMzAwMCIsInR5cGUiOiJ0ZXh0IiwiZW5hYmxlZCI6dHJ1ZX1d">Stormpath Notes Postman collection</a>. This will add pre-made requests to your Postman app, which will make it easier for you to test out your API.</p> 
           <p><img src="https://stormpath.com/wp-content/uploads/2016/05/Screen-Shot-2016-05-09-at-11.31.48-AM-1.png" alt="Register Account Using Postman" width="1144" height="803" class="alignnone size-full wp-image-4540"></p> 
           <p>Make sure that your server is running, and then click and send the “Register New User” request in Postman. This will load a saved request for the <code>/register</code> route. Feel free to click around, and see what Postman is sending to <code>/register</code>. If you click “Send”, the server will return a JSON object of the new account. Congrats, you’ve just registered an account on your Stormpath instance! You can double check if the account has been registered in the <a href="https://api.stormpath.com/">Stormpath Admin Dashboard</a>.</p> 
           <h3 id="getting-an-oauth-2-token">Getting an OAuth 2 Token<a href="#getting-an-oauth-2-token" class="heading-link"><i class="stp-icons stp-icon-link2"></i></a></h3> 
           <p>For mobile and web clients, Stormpath uses OAuth 2 access and refresh tokens for authentication. An access token is used for direct authentication with the API, but expires on a periodic basis. When the access token expires, the refresh token can be used to get a new access token. This makes your API <a href="https://scotch.io/tutorials/the-ins-and-outs-of-token-based-authentication#the-benefits-of-tokens">more secure and scalable</a>.</p> 
           <p>To get your OAuth 2 tokens, click on and send the “Get OAuth Tokens” request in Postman. You’ll see an access and refresh token pair pop out in JSON:</p> 
           <p></p> 
           <div id="crayon-59d42784bedcc742836553" class="crayon-syntax crayon-theme-stormpath crayon-font-monaco crayon-os-pc print-yes notranslate" data-settings=" minimize scroll-mouseover" style=" margin-top: 12px; margin-bottom: 12px; font-size: 12px !important; line-height: 15px !important;"> 
            <div class="crayon-plain-wrap">
             <textarea wrap="soft" class="crayon-plain print-no" data-settings="dblclick" readonly style="-moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4; font-size: 12px !important; line-height: 15px !important;">
{
  "access_token": "eyJraWQiOiIxTkk0SUg3ME9WN1Y3V...",
  "refresh_token": "eyJracy81bWVJUXRuWlBqS0E1Nk5...",
  "token_type": "Bearer",
  "expires_in": 3600,
  "stormpath_access_token_href": "https://api.stormpath.com/v1/accessTokens/EXAMPLE"
}
</textarea>
            </div> 
            <div class="crayon-main" style=""> 
             <table class="crayon-table"> 
              <tbody>
               <tr class="crayon-row"> 
                <td class="crayon-nums " data-settings="hide"> 
                 <div class="crayon-nums-content" style="font-size: 12px !important; line-height: 15px !important;">
                  <div class="crayon-num" data-line="crayon-59d42784bedcc742836553-1">
                   1
                  </div>
                  <div class="crayon-num crayon-striped-num" data-line="crayon-59d42784bedcc742836553-2">
                   2
                  </div>
                  <div class="crayon-num" data-line="crayon-59d42784bedcc742836553-3">
                   3
                  </div>
                  <div class="crayon-num crayon-striped-num" data-line="crayon-59d42784bedcc742836553-4">
                   4
                  </div>
                  <div class="crayon-num" data-line="crayon-59d42784bedcc742836553-5">
                   5
                  </div>
                  <div class="crayon-num crayon-striped-num" data-line="crayon-59d42784bedcc742836553-6">
                   6
                  </div>
                  <div class="crayon-num" data-line="crayon-59d42784bedcc742836553-7">
                   7
                  </div>
                  <div class="crayon-num crayon-striped-num" data-line="crayon-59d42784bedcc742836553-8">
                   8
                  </div>
                 </div> </td> 
                <td class="crayon-code">
                 <div class="crayon-pre" style="font-size: 12px !important; line-height: 15px !important; -moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4;">
                  <div class="crayon-line" id="crayon-59d42784bedcc742836553-1">
                   <span class="crayon-sy">{</span>
                  </div>
                  <div class="crayon-line crayon-striped-line" id="crayon-59d42784bedcc742836553-2">
                   <span class="crayon-h">&nbsp;&nbsp;</span>
                   <span class="crayon-s">"access_token"</span>
                   <span class="crayon-o">:</span>
                   <span class="crayon-h"> </span>
                   <span class="crayon-s">"eyJraWQiOiIxTkk0SUg3ME9WN1Y3V..."</span>
                   <span class="crayon-sy">,</span>
                  </div>
                  <div class="crayon-line" id="crayon-59d42784bedcc742836553-3">
                   <span class="crayon-h">&nbsp;&nbsp;</span>
                   <span class="crayon-s">"refresh_token"</span>
                   <span class="crayon-o">:</span>
                   <span class="crayon-h"> </span>
                   <span class="crayon-s">"eyJracy81bWVJUXRuWlBqS0E1Nk5..."</span>
                   <span class="crayon-sy">,</span>
                  </div>
                  <div class="crayon-line crayon-striped-line" id="crayon-59d42784bedcc742836553-4">
                   <span class="crayon-h">&nbsp;&nbsp;</span>
                   <span class="crayon-s">"token_type"</span>
                   <span class="crayon-o">:</span>
                   <span class="crayon-h"> </span>
                   <span class="crayon-s">"Bearer"</span>
                   <span class="crayon-sy">,</span>
                  </div>
                  <div class="crayon-line" id="crayon-59d42784bedcc742836553-5">
                   <span class="crayon-h">&nbsp;&nbsp;</span>
                   <span class="crayon-s">"expires_in"</span>
                   <span class="crayon-o">:</span>
                   <span class="crayon-h"> </span>
                   <span class="crayon-cn">3600</span>
                   <span class="crayon-sy">,</span>
                  </div>
                  <div class="crayon-line crayon-striped-line" id="crayon-59d42784bedcc742836553-6">
                   <span class="crayon-h">&nbsp;&nbsp;</span>
                   <span class="crayon-s">"stormpath_access_token_href"</span>
                   <span class="crayon-o">:</span>
                   <span class="crayon-h"> </span>
                   <span class="crayon-s">"https://api.stormpath.com/v1/accessTokens/EXAMPLE"</span>
                  </div>
                  <div class="crayon-line" id="crayon-59d42784bedcc742836553-7">
                   <span class="crayon-sy">}</span>
                  </div>
                  <div class="crayon-line crayon-striped-line" id="crayon-59d42784bedcc742836553-8">
                   &nbsp;
                  </div>
                 </div></td> 
               </tr> 
              </tbody>
             </table> 
            </div> 
           </div> 
           <p></p> 
           <h3 id="getting-the-notes">Getting the Notes<a href="#getting-the-notes" class="heading-link"><i class="stp-icons stp-icon-link2"></i></a></h3> 
           <p>Now that we have our access token, let’s use it to authenticate a request to the API we’ve created. Open up the “Get Notes” request in Postman, and insert your access token into the Authorization header so it says:</p> 
           <p><code>Authorization: Bearer eyJraWQiOiIxTkk0SUg3ME9WN1Y3V...</code></p> 
           <p>Now run the request. You should see the default JSON response!</p> 
           <p><img src="https://stormpath.com/wp-content/uploads/2016/05/Screen-Shot-2016-05-09-at-11.31.59-AM-1.png" alt="Authenticated REST API Endpoint" width="1144" height="803" class="alignnone size-full wp-image-4541"></p> 
           <h3 id="saving-the-notes-to-your-rest-api">Saving the Notes To Your REST API<a href="#saving-the-notes-to-your-rest-api" class="heading-link"><i class="stp-icons stp-icon-link2"></i></a></h3> 
           <p>We’ve gotten and tested out three of our endpoints. It’s time to write the final endpoint, so the user can save the notes back to the server.</p> 
           <p>In the command line, run:</p> 
           <p></p> 
           <div id="crayon-59d42784bedd1234624851" class="crayon-syntax crayon-theme-stormpath crayon-font-monaco crayon-os-pc print-yes notranslate" data-settings=" minimize scroll-mouseover" style=" margin-top: 12px; margin-bottom: 12px; font-size: 12px !important; line-height: 15px !important;"> 
            <div class="crayon-plain-wrap">
             <textarea wrap="soft" class="crayon-plain print-no" data-settings="dblclick" readonly style="-moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4; font-size: 12px !important; line-height: 15px !important;">
$ npm install --save body-parser
</textarea>
            </div> 
            <div class="crayon-main" style=""> 
             <table class="crayon-table"> 
              <tbody>
               <tr class="crayon-row"> 
                <td class="crayon-nums " data-settings="hide"> 
                 <div class="crayon-nums-content" style="font-size: 12px !important; line-height: 15px !important;">
                  <div class="crayon-num" data-line="crayon-59d42784bedd1234624851-1">
                   1
                  </div>
                  <div class="crayon-num crayon-striped-num" data-line="crayon-59d42784bedd1234624851-2">
                   2
                  </div>
                 </div> </td> 
                <td class="crayon-code">
                 <div class="crayon-pre" style="font-size: 12px !important; line-height: 15px !important; -moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4;">
                  <div class="crayon-line" id="crayon-59d42784bedd1234624851-1">
                   <span class="crayon-sy">$</span>
                   <span class="crayon-h"> </span>
                   <span class="crayon-e">npm </span>
                   <span class="crayon-v">install</span>
                   <span class="crayon-h"> </span>
                   <span class="crayon-o">--</span>
                   <span class="crayon-e">save </span>
                   <span class="crayon-v">body</span>
                   <span class="crayon-o">-</span>
                   <span class="crayon-i">parser</span>
                  </div>
                  <div class="crayon-line crayon-striped-line" id="crayon-59d42784bedd1234624851-2">
                   &nbsp;
                  </div>
                 </div></td> 
               </tr> 
              </tbody>
             </table> 
            </div> 
           </div> 
           <p></p> 
           <p>In our <code>index.js</code> file, add:</p> 
           <p></p> 
           <div id="crayon-59d42784bedd3440110409" class="crayon-syntax crayon-theme-stormpath crayon-font-monaco crayon-os-pc print-yes notranslate" data-settings=" minimize scroll-mouseover" style=" margin-top: 12px; margin-bottom: 12px; font-size: 12px !important; line-height: 15px !important;"> 
            <div class="crayon-plain-wrap">
             <textarea wrap="soft" class="crayon-plain print-no" data-settings="dblclick" readonly style="-moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4; font-size: 12px !important; line-height: 15px !important;">
var bodyParser = require('body-parser')

app.use(bodyParser.json())
app.use(bodyParser.urlencoded({extended: false}))

app.post('/notes', stormpath.apiAuthenticationRequired, function(req, res) {
  if(!req.body.notes || typeof req.body.notes != "string") {
    res.status(400).send("400 Bad Request")
  }

  req.user.customData.notes = req.body.notes
  req.user.customData.save()
  res.status(200).end()
})
</textarea>
            </div> 
            <div class="crayon-main" style=""> 
             <table class="crayon-table"> 
              <tbody>
               <tr class="crayon-row"> 
                <td class="crayon-nums " data-settings="hide"> 
                 <div class="crayon-nums-content" style="font-size: 12px !important; line-height: 15px !important;">
                  <div class="crayon-num" data-line="crayon-59d42784bedd3440110409-1">
                   1
                  </div>
                  <div class="crayon-num crayon-striped-num" data-line="crayon-59d42784bedd3440110409-2">
                   2
                  </div>
                  <div class="crayon-num" data-line="crayon-59d42784bedd3440110409-3">
                   3
                  </div>
                  <div class="crayon-num crayon-striped-num" data-line="crayon-59d42784bedd3440110409-4">
                   4
                  </div>
                  <div class="crayon-num" data-line="crayon-59d42784bedd3440110409-5">
                   5
                  </div>
                  <div class="crayon-num crayon-striped-num" data-line="crayon-59d42784bedd3440110409-6">
                   6
                  </div>
                  <div class="crayon-num" data-line="crayon-59d42784bedd3440110409-7">
                   7
                  </div>
                  <div class="crayon-num crayon-striped-num" data-line="crayon-59d42784bedd3440110409-8">
                   8
                  </div>
                  <div class="crayon-num" data-line="crayon-59d42784bedd3440110409-9">
                   9
                  </div>
                  <div class="crayon-num crayon-striped-num" data-line="crayon-59d42784bedd3440110409-10">
                   10
                  </div>
                  <div class="crayon-num" data-line="crayon-59d42784bedd3440110409-11">
                   11
                  </div>
                  <div class="crayon-num crayon-striped-num" data-line="crayon-59d42784bedd3440110409-12">
                   12
                  </div>
                  <div class="crayon-num" data-line="crayon-59d42784bedd3440110409-13">
                   13
                  </div>
                  <div class="crayon-num crayon-striped-num" data-line="crayon-59d42784bedd3440110409-14">
                   14
                  </div>
                  <div class="crayon-num" data-line="crayon-59d42784bedd3440110409-15">
                   15
                  </div>
                 </div> </td> 
                <td class="crayon-code">
                 <div class="crayon-pre" style="font-size: 12px !important; line-height: 15px !important; -moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4;">
                  <div class="crayon-line" id="crayon-59d42784bedd3440110409-1">
                   <span class="crayon-t">var</span>
                   <span class="crayon-h"> </span>
                   <span class="crayon-v">bodyParser</span>
                   <span class="crayon-h"> </span>
                   <span class="crayon-o">=</span>
                   <span class="crayon-h"> </span>
                   <span class="crayon-e">require</span>
                   <span class="crayon-sy">(</span>
                   <span class="crayon-s">'body-parser'</span>
                   <span class="crayon-sy">)</span>
                  </div>
                  <div class="crayon-line crayon-striped-line" id="crayon-59d42784bedd3440110409-2">
                   &nbsp;
                  </div>
                  <div class="crayon-line" id="crayon-59d42784bedd3440110409-3">
                   <span class="crayon-v">app</span>
                   <span class="crayon-sy">.</span>
                   <span class="crayon-st">use</span>
                   <span class="crayon-sy">(</span>
                   <span class="crayon-v">bodyParser</span>
                   <span class="crayon-sy">.</span>
                   <span class="crayon-e">json</span>
                   <span class="crayon-sy">(</span>
                   <span class="crayon-sy">)</span>
                   <span class="crayon-sy">)</span>
                  </div>
                  <div class="crayon-line crayon-striped-line" id="crayon-59d42784bedd3440110409-4">
                   <span class="crayon-v">app</span>
                   <span class="crayon-sy">.</span>
                   <span class="crayon-st">use</span>
                   <span class="crayon-sy">(</span>
                   <span class="crayon-v">bodyParser</span>
                   <span class="crayon-sy">.</span>
                   <span class="crayon-e">urlencoded</span>
                   <span class="crayon-sy">(</span>
                   <span class="crayon-sy">{</span>
                   <span class="crayon-v">extended</span>
                   <span class="crayon-o">:</span>
                   <span class="crayon-h"> </span>
                   <span class="crayon-t">false</span>
                   <span class="crayon-sy">}</span>
                   <span class="crayon-sy">)</span>
                   <span class="crayon-sy">)</span>
                  </div>
                  <div class="crayon-line" id="crayon-59d42784bedd3440110409-5">
                   &nbsp;
                  </div>
                  <div class="crayon-line crayon-striped-line" id="crayon-59d42784bedd3440110409-6">
                   <span class="crayon-v">app</span>
                   <span class="crayon-sy">.</span>
                   <span class="crayon-e">post</span>
                   <span class="crayon-sy">(</span>
                   <span class="crayon-s">'/notes'</span>
                   <span class="crayon-sy">,</span>
                   <span class="crayon-h"> </span>
                   <span class="crayon-v">stormpath</span>
                   <span class="crayon-sy">.</span>
                   <span class="crayon-v">apiAuthenticationRequired</span>
                   <span class="crayon-sy">,</span>
                   <span class="crayon-h"> </span>
                   <span class="crayon-t">function</span>
                   <span class="crayon-sy">(</span>
                   <span class="crayon-v">req</span>
                   <span class="crayon-sy">,</span>
                   <span class="crayon-h"> </span>
                   <span class="crayon-v">res</span>
                   <span class="crayon-sy">)</span>
                   <span class="crayon-h"> </span>
                   <span class="crayon-sy">{</span>
                  </div>
                  <div class="crayon-line" id="crayon-59d42784bedd3440110409-7">
                   <span class="crayon-h">&nbsp;&nbsp;</span>
                   <span class="crayon-st">if</span>
                   <span class="crayon-sy">(</span>
                   <span class="crayon-o">!</span>
                   <span class="crayon-v">req</span>
                   <span class="crayon-sy">.</span>
                   <span class="crayon-v">body</span>
                   <span class="crayon-sy">.</span>
                   <span class="crayon-v">notes</span>
                   <span class="crayon-h"> </span>
                   <span class="crayon-o">||</span>
                   <span class="crayon-h"> </span>
                   <span class="crayon-e">typeof </span>
                   <span class="crayon-v">req</span>
                   <span class="crayon-sy">.</span>
                   <span class="crayon-v">body</span>
                   <span class="crayon-sy">.</span>
                   <span class="crayon-v">notes</span>
                   <span class="crayon-h"> </span>
                   <span class="crayon-o">!=</span>
                   <span class="crayon-h"> </span>
                   <span class="crayon-s">"string"</span>
                   <span class="crayon-sy">)</span>
                   <span class="crayon-h"> </span>
                   <span class="crayon-sy">{</span>
                  </div>
                  <div class="crayon-line crayon-striped-line" id="crayon-59d42784bedd3440110409-8">
                   <span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;</span>
                   <span class="crayon-v">res</span>
                   <span class="crayon-sy">.</span>
                   <span class="crayon-e">status</span>
                   <span class="crayon-sy">(</span>
                   <span class="crayon-cn">400</span>
                   <span class="crayon-sy">)</span>
                   <span class="crayon-sy">.</span>
                   <span class="crayon-e">send</span>
                   <span class="crayon-sy">(</span>
                   <span class="crayon-s">"400 Bad Request"</span>
                   <span class="crayon-sy">)</span>
                  </div>
                  <div class="crayon-line" id="crayon-59d42784bedd3440110409-9">
                   <span class="crayon-h">&nbsp;&nbsp;</span>
                   <span class="crayon-sy">}</span>
                  </div>
                  <div class="crayon-line crayon-striped-line" id="crayon-59d42784bedd3440110409-10">
                   &nbsp;
                  </div>
                  <div class="crayon-line" id="crayon-59d42784bedd3440110409-11">
                   <span class="crayon-h">&nbsp;&nbsp;</span>
                   <span class="crayon-v">req</span>
                   <span class="crayon-sy">.</span>
                   <span class="crayon-v">user</span>
                   <span class="crayon-sy">.</span>
                   <span class="crayon-v">customData</span>
                   <span class="crayon-sy">.</span>
                   <span class="crayon-v">notes</span>
                   <span class="crayon-h"> </span>
                   <span class="crayon-o">=</span>
                   <span class="crayon-h"> </span>
                   <span class="crayon-v">req</span>
                   <span class="crayon-sy">.</span>
                   <span class="crayon-v">body</span>
                   <span class="crayon-sy">.</span>
                   <span class="crayon-e">notes</span>
                  </div>
                  <div class="crayon-line crayon-striped-line" id="crayon-59d42784bedd3440110409-12">
                   <span class="crayon-e">&nbsp;&nbsp;</span>
                   <span class="crayon-v">req</span>
                   <span class="crayon-sy">.</span>
                   <span class="crayon-v">user</span>
                   <span class="crayon-sy">.</span>
                   <span class="crayon-v">customData</span>
                   <span class="crayon-sy">.</span>
                   <span class="crayon-e">save</span>
                   <span class="crayon-sy">(</span>
                   <span class="crayon-sy">)</span>
                  </div>
                  <div class="crayon-line" id="crayon-59d42784bedd3440110409-13">
                   <span class="crayon-h">&nbsp;&nbsp;</span>
                   <span class="crayon-v">res</span>
                   <span class="crayon-sy">.</span>
                   <span class="crayon-e">status</span>
                   <span class="crayon-sy">(</span>
                   <span class="crayon-cn">200</span>
                   <span class="crayon-sy">)</span>
                   <span class="crayon-sy">.</span>
                   <span class="crayon-st">end</span>
                   <span class="crayon-sy">(</span>
                   <span class="crayon-sy">)</span>
                  </div>
                  <div class="crayon-line crayon-striped-line" id="crayon-59d42784bedd3440110409-14">
                   <span class="crayon-sy">}</span>
                   <span class="crayon-sy">)</span>
                  </div>
                  <div class="crayon-line" id="crayon-59d42784bedd3440110409-15">
                   &nbsp;
                  </div>
                 </div></td> 
               </tr> 
              </tbody>
             </table> 
            </div> 
           </div> 
           <p></p> 
           <p>Express is a minimalist web framework, so to parse the POST body from our app, we need to add one more package. We use <code>body-parser</code> and bind it to the app as middleware. This means that every request will pass through<code>body-parser</code>, and <code>body-parser</code> will inspect the POST body, and add any JSON or urlencoded info to the request object as <code>req.body</code>.</p> 
           <p>Afterwards, we register a POST endpoint which reads the request body, verifies that the user passed a “notes” string, and saves it to our user’s customData in Stormpath.</p> 
           <p>Let’s restart the server and test it. Click on the “Save Notes” request in Postman, add your access token, modify the body to something else, and then make the request! Now, send the “Get Notes” request again. You should see that it’s now what you just saved! You can also see the data attached to the user’s customData in the <a href="https://api.stormpath.com/">Stormpath Admin Dashboard</a>.</p> 
           <p>Congrats, you just finished this tutorial! Today, you learned how to write a basic Node.js application, integrate Stormpath, and write two endpoints to help you retrieve and save a user’s notes!</p> 
           <h2 id="next-steps">Next Steps<a href="#next-steps" class="heading-link"><i class="stp-icons stp-icon-link2"></i></a></h2> 
           <p><strong>Check out the code on GitHub</strong> – Want to see the final version of Stormpath Notes? See <a href="https://github.com/stormpath/stormpath-express-mobile-notes-example">Stormpath Notes on GitHub</a>.</p> 
           <p><strong>Try the iOS or Android Tutorial</strong> – Learn how to build Stormpath Notes on <a href="https://stormpath.com/blog/build-note-taking-app-swift-ios">iOS using Swift</a> or <a href="https://stormpath.com/blog/build-user-authentication-for-android-app">Android</a>!</p> 
           <p><strong>Learn More About Express-Stormpath</strong> – You’ve been using Express-Stormpath for today’s demo, but we’ve only scratched the surface regarding the features you can use it for. <a href="https://docs.stormpath.com/nodejs/express/latest/index.html">Check out our awesome documentation</a> about how to use Express-Stormpath, or learn how to <a href="https://stormpath.com/blog/heroku-stormpath-and-expressjs">deploy Express-Stormpath to Heroku</a>, so your API will be available to the public!</p> 
           <p><strong>Read More on RESTful API Design</strong> – Vinny Sahni from Enchant wrote a great blog post about <a href="http://www.vinaysahni.com/best-practices-for-a-pragmatic-restful-api">designing a pragmatic RESTful API</a>. A must read if you’re building a REST API from scratch.</p> 
           <p><strong>Talk to us!</strong> – We’re proud of the exceptional level of support we provide our community, and would love to hear from you about your project! Please don’t hesitate to contact us at <a href="/cdn-cgi/l/email-protection" class="__cf_email__" data-cfemail="4a393f3a3a25383e0a393e2538273a2b3e2264292527">[email&nbsp;protected]</a>, file an issue against one of our GitHub projects, or leave a comment below!</p> 
           <div class="clearfix"></div> 
          </div> 
         </article> 
        </div> 
        <div class="blog_sidebar col-md-3 col-md-offset-1 nopadding" data-spy="affix" data-offset-top="240" data-offset-bottom="600"> 
         <div id="search-5" class="widget widget_search">
          <form role="search" method="get" class="search-form form" action="https://stormpath.com/"> 
           <label for="form-search-input" class="sr-only">Search for</label> 
           <div class="input-group"> 
            <input type="search" id="form-search-input" class="form-control" placeholder="Search …" value="" name="s" title="Search for:"> 
            <span class="input-group-btn"> <button type="submit" class="button button-green button-small search-button"><i class="stp-icons stp-icon-search"></i></button> </span> 
           </div> 
           <input type="hidden" name="post_type" value="post"> 
          </form> 
         </div>
         <div id="categories-5" class="widget widget_categories">
          <h3 class="widget-title">Explore the Topic</h3> 
          <ul> 
           <li class="cat-item cat-item-10"><a href="https://stormpath.com/blog/category/net">.NET</a> </li> 
           <li class="cat-item cat-item-13"><a href="https://stormpath.com/blog/category/general">General</a> </li> 
           <li class="cat-item cat-item-8"><a href="https://stormpath.com/blog/category/java">Java</a> </li> 
           <li class="cat-item cat-item-74"><a href="https://stormpath.com/blog/category/javascript">Javascript</a> </li> 
           <li class="cat-item cat-item-9"><a href="https://stormpath.com/blog/category/mobile">Mobile</a> </li> 
           <li class="cat-item cat-item-7"><a href="https://stormpath.com/blog/category/node">Node</a> </li> 
           <li class="cat-item cat-item-5"><a href="https://stormpath.com/blog/category/php">PHP</a> </li> 
           <li class="cat-item cat-item-11"><a href="https://stormpath.com/blog/category/python">Python</a> </li> 
           <li class="cat-item cat-item-12"><a href="https://stormpath.com/blog/category/rest-api">REST API</a> </li> 
          </ul> 
         </div> 
         <div class="social-bar widget stormpath-social-counter-widget" data-action="fetch_social_share_count" data-instance="2"> 
          <h3 class="widget-title">Share a Post</h3> 
          <a class="social-icon si-small si-borderless si-twitter share-button" target="_blank" href="https://twitter.com/share?text=Tutorial%3A+Build+a+REST+API+for+Your+Mobile+Apps+using+Node.js - &amp;url=https%3A%2F%2Fstormpath.com%2Fblog%2Ftutorial-build-rest-api-mobile-apps-using-node-js&amp;via=gostormpath"> <i class="stp-icons stp-icon-twitter">
            <div class="social-icon-counter">
             0
            </div></i> <i class="stp-icons stp-icon-twitter">
            <div class="social-icon-counter">
             0
            </div></i> </a> 
          <a class="social-icon si-small si-borderless si-facebook share-button" target="_blank" href="https://www.facebook.com/share.php?u=https%3A%2F%2Fstormpath.com%2Fblog%2Ftutorial-build-rest-api-mobile-apps-using-node-js&amp;title=Tutorial%3A%20Build%20a%20REST%20API%20for%20Your%20Mobile%20Apps%20using%20Node.js"> <i class="stp-icons stp-icon-facebook">
            <div class="social-icon-counter">
             0
            </div></i> <i class="stp-icons stp-icon-facebook">
            <div class="social-icon-counter">
             0
            </div></i> </a> 
          <a class="social-icon si-small si-borderless si-gplus share-button" target="_blank" href="https://plus.google.com/share?url=https%3A%2F%2Fstormpath.com%2Fblog%2Ftutorial-build-rest-api-mobile-apps-using-node-js"> <i class="stp-icons stp-icon-gplus">
            <div class="social-icon-counter">
             0
            </div></i> <i class="stp-icons stp-icon-gplus">
            <div class="social-icon-counter">
             0
            </div></i> </a> 
          <a class="social-icon si-small si-borderless si-linkedin share-button" target="_blank" href="http://www.linkedin.com/shareArticle?mini=true&amp;url=https%3A%2F%2Fstormpath.com%2Fblog%2Ftutorial-build-rest-api-mobile-apps-using-node-js&amp;title=Tutorial%3A%20Build%20a%20REST%20API%20for%20Your%20Mobile%20Apps%20using%20Node.js&amp;source=https%3A%2F%2Fstormpath.com"> <i class="stp-icons stp-icon-linkedin">
            <div class="social-icon-counter">
             0
            </div></i> <i class="stp-icons stp-icon-linkedin">
            <div class="social-icon-counter">
             0
            </div></i> </a> 
         </div> 
        </div> 
       </main> 
      </div> 
     </div> 
    </section> 
    <script style="display: none !important;">!function(e,t,r,n,c,a,l){function i(t,r){return r=e.createElement('div'),r.innerHTML='<a href="'+t.replace(/"/g,'&quot;')+'"></a>',r.childNodes[0].getAttribute('href')}function o(e,t,r,n){for(r='',n='0x'+e.substr(t,2)|0,t+=2;t<e.length;t+=2)r+=String.fromCharCode('0x'+e.substr(t,2)^n);return i(r)}try{for(c=e.getElementsByTagName('a'),l='/cdn-cgi/l/email-protection#',n=0;n<c.length;n++)try{(t=(a=c[n]).href.indexOf(l))>-1&&(a.href='mailto:'+o(a.href,t+l.length))}catch(e){}for(c=e.querySelectorAll('.__cf_email__'),n=0;n<c.length;n++)try{(a=c[n]).parentNode.replaceChild(e.createTextNode(o(a.getAttribute('data-cfemail'),0)),a)}catch(e){}}catch(e){}}(document);</script>
    <script async src="//platform.twitter.com/widgets.js" charset="utf-8"></script> 
   </div> 
   <footer id="footer" class="dark"> 
    <div class="container"> 
     <div class="footer-widgets-wrap nopadding topmargin-sm bottommargin-sm clearfix"> 
      <div class="col-md-4"> 
       <div id="text-4" class="widget widget_text"> 
        <div class="textwidget">
         <img src="https://stormpath.com/wp-content/uploads/2017/08/logos.png" class="footer-logo">
        </div> 
       </div> 
      </div> 
      <div class="col-md-2 col-md-offset-1 col-sm-4 col-xs-5"> 
       <div id="nav_menu-2" class="widget widget_links widget_nav_menu"></div> 
      </div> 
      <div class="col-md-2 col-sm-4 col-xs-6"> 
       <div id="nav_menu-3" class="widget widget_links widget_nav_menu"></div> 
      </div> 
      <div class="col-md-3 col-sm-4 col-xs-12" id="info-social"> 
       <div id="text-3" class="widget widget_text"> 
        <div class="textwidget">
         <div> 
          <strong>Support:</strong> 
          <a href="/cdn-cgi/l/email-protection" class="__cf_email__" data-cfemail="e581809380898a95809796a58a8e9184cb868a88">[email&nbsp;protected]</a> 
         </div> 
        </div> 
       </div> 
      </div> 
     </div> 
    </div> 
    <div id="copyrights"> 
     <div class="container clearfix"> 
      <div class="col-md-12">
        Copyright 2017 Stormpath 
      </div> 
     </div> 
    </div> 
   </footer> 
  </div> 
  <noscript>
   <iframe src="//www.googletagmanager.com/ns.html?id=GTM-NQZZFW" height="0" width="0" style="display:none;visibility:hidden"></iframe>
  </noscript> 
  <script style="display: none !important;">!function(e,t,r,n,c,a,l){function i(t,r){return r=e.createElement('div'),r.innerHTML='<a href="'+t.replace(/"/g,'&quot;')+'"></a>',r.childNodes[0].getAttribute('href')}function o(e,t,r,n){for(r='',n='0x'+e.substr(t,2)|0,t+=2;t<e.length;t+=2)r+=String.fromCharCode('0x'+e.substr(t,2)^n);return i(r)}try{for(c=e.getElementsByTagName('a'),l='/cdn-cgi/l/email-protection#',n=0;n<c.length;n++)try{(t=(a=c[n]).href.indexOf(l))>-1&&(a.href='mailto:'+o(a.href,t+l.length))}catch(e){}for(c=e.querySelectorAll('.__cf_email__'),n=0;n<c.length;n++)try{(a=c[n]).parentNode.replaceChild(e.createTextNode(o(a.getAttribute('data-cfemail'),0)),a)}catch(e){}}catch(e){}}(document);</script>
  <script>(function(w,d,s,l,i){w[l]=w[l]||[];w[l].push({'gtm.start':
                new Date().getTime(),event:'gtm.js'});var f=d.getElementsByTagName(s)[0],
                j=d.createElement(s),dl=l!='dataLayer'?'&l='+l:'';j.async=true;j.src=
                '//www.googletagmanager.com/gtm.js?id='+i+dl;f.parentNode.insertBefore(j,f);
                })(window,document,'script','dataLayer','GTM-NQZZFW');</script> 
  <link rel="stylesheet" id="crayon-css" href="https://stormpath.com/wp-content/plugins/crayon-syntax-highlighter/css/min/crayon.min.css?ver=_2.7.2_beta" type="text/css" media="all"> 
  <script type="text/javascript" src="https://stormpath.com/wp-content/plugins/contact-form-7/includes/js/jquery.form.min.js?ver=3.51.0-2014.06.20"></script> 
  <script type="text/javascript">
/* <![CDATA[ */
var _wpcf7 = {"recaptcha":{"messages":{"empty":"Please verify that you are not a robot."}},"cached":"1"};
/* ]]> */
</script> 
  <script type="text/javascript" src="https://stormpath.com/wp-content/plugins/contact-form-7/includes/js/scripts.js?ver=4.7"></script> 
  <script type="text/javascript" src="https://s0.wp.com/wp-content/js/devicepx-jetpack.js?ver=201740"></script> 
  <script type="text/javascript" src="https://stormpath.com/wp-content/themes/stormpath/vendor/js/script-global.min.js?ver=4.8.2"></script> 
  <script type="text/javascript" src="https://stormpath.com/wp-includes/js/wp-embed.min.js?ver=4.8.2"></script> 
  <script type="text/javascript">
/* <![CDATA[ */
var CrayonSyntaxSettings = {"version":"_2.7.2_beta","is_admin":"0","ajaxurl":"https:\/\/stormpath.com\/wp-admin\/admin-ajax.php","prefix":"crayon-","setting":"crayon-setting","selected":"crayon-setting-selected","changed":"crayon-setting-changed","special":"crayon-setting-special","orig_value":"data-orig-value","debug":""};
var CrayonSyntaxStrings = {"copy":"Press %s to Copy, %s to Paste","minimize":"Click To Expand Code"};
/* ]]> */
</script> 
  <script type="text/javascript" src="https://stormpath.com/wp-content/plugins/crayon-syntax-highlighter/js/min/crayon.min.js?ver=_2.7.2_beta"></script> 
  <script type="text/javascript">
/* <![CDATA[ */
var stormpath_social_object = {"ajaxurl":"https:\/\/stormpath.com\/wp-admin\/admin-ajax.php","post_id":"4169"};
/* ]]> */
</script> 
  <script type="text/javascript" src="https://stormpath.com/wp-content/plugins/stormpath-social-media-widgets/widgets/js/social-media-counter.js?ver=4.8.2"></script> 
  <script type="text/javascript">
/* <![CDATA[ */
var countVars = {"disqusShortname":"stormpath"};
/* ]]> */
</script> 
  <script type="text/javascript" src="https://stormpath.com/wp-content/plugins/disqus-comment-system/media/js/count.js?ver=4.8.2"></script>   
 </body>
</html>